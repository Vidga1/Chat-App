/*! For license information please see main.bundle.js.LICENSE.txt */
(()=>{"use strict";var t,e,n={132:(t,e,n)=>{n(307);const r=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=63&s|128):55296==(64512&s)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(s=65536+((1023&s)<<10)+(1023&t.charCodeAt(++r)),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=63&s|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=63&s|128)}return e},s={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let e=0;e<t.length;e+=3){const s=t[e],i=e+1<t.length,o=i?t[e+1]:0,a=e+2<t.length,c=a?t[e+2]:0,u=s>>2,h=(3&s)<<4|o>>4;let l=(15&o)<<2|c>>6,d=63&c;a||(d=64,i||(l=64)),r.push(n[u],n[h],n[l],n[d])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(r(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((31&s)<<6|63&i)}else if(s>239&&s<365){const i=((7&s)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(i>>10)),e[r++]=String.fromCharCode(56320+(1023&i))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((15&s)<<12|(63&i)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let e=0;e<t.length;){const s=n[t.charAt(e++)],o=e<t.length?n[t.charAt(e)]:0;++e;const a=e<t.length?n[t.charAt(e)]:64;++e;const c=e<t.length?n[t.charAt(e)]:64;if(++e,null==s||null==o||null==a||null==c)throw new i;const u=s<<2|o>>4;if(r.push(u),64!==a){const t=o<<4&240|a>>2;if(r.push(t),64!==c){const t=a<<6&192|c;r.push(t)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class i extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const o=function(t){return function(t){const e=r(t);return s.encodeByteArray(e,!0)}(t).replace(/\./g,"")},a=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const t=process.env.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if("undefined"==typeof document)return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(t){return}const e=t&&function(t){try{return s.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null}(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},c=()=>{var t;return null===(t=a())||void 0===t?void 0:t.config};class u{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"==typeof t&&(this.promise.catch((()=>{})),1===t.length?t(e):t(e,n))}}}class h extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,h.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,l.prototype.create)}}class l{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},r=`${this.service}/${t}`,s=this.errors[t],i=s?function(t,e){return t.replace(d,((t,n)=>{const r=e[n];return null!=r?String(r):`<${n}?>`}))}(s,n):"Error",o=`${this.serviceName}: ${i} (${r}).`;return new h(r,o,n)}}const d=/\{\$([^}]+)}/g;function f(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const n=t[s],i=e[s];if(p(n)&&p(i)){if(!f(n,i))return!1}else if(n!==i)return!1}for(const t of r)if(!n.includes(t))return!1;return!0}function p(t){return null!==t&&"object"==typeof t}function g(t){return t&&t._delegate?t._delegate:t}class m{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const y="[DEFAULT]";class v{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new u;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(t){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(t){if(r)return null;throw t}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:y})}catch(t){}for(const[t,e]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:n});e.resolve(t)}catch(t){}}}}clearInstance(t=y){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter((t=>"INTERNAL"in t)).map((t=>t.INTERNAL.delete())),...t.filter((t=>"_delete"in t)).map((t=>t._delete()))])}isComponentSet(){return null!=this.component}isInitialized(t=y){return this.instances.has(t)}getOptions(t=y){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[t,e]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(t)&&e.resolve(r);return r}onInit(t,e){var n;const r=this.normalizeInstanceIdentifier(e),s=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;s.add(t),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&t(i,r),()=>{s.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const r of n)try{r(t,e)}catch(t){}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=t,r===y?void 0:r),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch(t){}var r;return n||null}normalizeInstanceIdentifier(t=y){return this.component?this.component.multipleInstances?t:y:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class w{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new v(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}const E=[];var b,_;(_=b||(b={}))[_.DEBUG=0]="DEBUG",_[_.VERBOSE=1]="VERBOSE",_[_.INFO=2]="INFO",_[_.WARN=3]="WARN",_[_.ERROR=4]="ERROR",_[_.SILENT=5]="SILENT";const T={debug:b.DEBUG,verbose:b.VERBOSE,info:b.INFO,warn:b.WARN,error:b.ERROR,silent:b.SILENT},S=b.INFO,I={[b.DEBUG]:"log",[b.VERBOSE]:"log",[b.INFO]:"info",[b.WARN]:"warn",[b.ERROR]:"error"},C=(t,e,...n)=>{if(e<t.logLevel)return;const r=(new Date).toISOString(),s=I[e];if(!s)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[s](`[${r}]  ${t.name}:`,...n)};class A{constructor(t){this.name=t,this._logLevel=S,this._logHandler=C,this._userLogHandler=null,E.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in b))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"==typeof t?T[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,b.DEBUG,...t),this._logHandler(this,b.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,b.VERBOSE,...t),this._logHandler(this,b.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,b.INFO,...t),this._logHandler(this,b.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,b.WARN,...t),this._logHandler(this,b.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,b.ERROR,...t),this._logHandler(this,b.ERROR,...t)}}const D=(t,e)=>e.some((e=>t instanceof e));let k,N;const R=new WeakMap,x=new WeakMap,O=new WeakMap,L=new WeakMap,M=new WeakMap;let P={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return x.get(t);if("objectStoreNames"===e)return t.objectStoreNames||O.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return V(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function F(t){return"function"==typeof t?(e=t)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(N||(N=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(U(this),t),V(R.get(this))}:function(...t){return V(e.apply(U(this),t))}:function(t,...n){const r=e.call(U(this),t,...n);return O.set(r,t.sort?t.sort():[t]),V(r)}:(t instanceof IDBTransaction&&function(t){if(x.has(t))return;const e=new Promise(((e,n)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",i),t.removeEventListener("abort",i)},s=()=>{e(),r()},i=()=>{n(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",i),t.addEventListener("abort",i)}));x.set(t,e)}(t),D(t,k||(k=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,P):t);var e}function V(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,n)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",i)},s=()=>{e(V(t.result)),r()},i=()=>{n(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",i)}));return e.then((e=>{e instanceof IDBCursor&&R.set(e,t)})).catch((()=>{})),M.set(e,t),e}(t);if(L.has(t))return L.get(t);const e=F(t);return e!==t&&(L.set(t,e),M.set(e,t)),e}const U=t=>M.get(t),B=["get","getKey","getAll","getAllKeys","count"],j=["put","add","delete","clear"],q=new Map;function $(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(q.get(e))return q.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=j.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!s&&!B.includes(n))return;const i=async function(t,...e){const i=this.transaction(t,s?"readwrite":"readonly");let o=i.store;return r&&(o=o.index(e.shift())),(await Promise.all([o[n](...e),s&&i.done]))[0]};return q.set(e,i),i}var z;z=P,P={...z,get:(t,e,n)=>$(t,e)||z.get(t,e,n),has:(t,e)=>!!$(t,e)||z.has(t,e)};class H{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map((t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null})).filter((t=>t)).join(" ")}}const K="@firebase/app",G="0.9.24",Q=new A("@firebase/app"),W="[DEFAULT]",X={[K]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Y=new Map,J=new Map;function Z(t,e){try{t.container.addComponent(e)}catch(n){Q.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function tt(t){const e=t.name;if(J.has(e))return Q.debug(`There were multiple attempts to register component ${e}.`),!1;J.set(e,t);for(const e of Y.values())Z(e,t);return!0}const et=new l("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class nt{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new m("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw et.create("app-deleted",{appName:this._name})}}function rt(t,e={}){let n=t;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:W,automaticDataCollectionEnabled:!1},e),s=r.name;if("string"!=typeof s||!s)throw et.create("bad-app-name",{appName:String(s)});if(n||(n=c()),!n)throw et.create("no-options");const i=Y.get(s);if(i){if(f(n,i.options)&&f(r,i.config))return i;throw et.create("duplicate-app",{appName:s})}const o=new w(s);for(const t of J.values())o.addComponent(t);const a=new nt(n,r,o);return Y.set(s,a),a}function st(t,e,n){var r;let s=null!==(r=X[t])&&void 0!==r?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const t=[`Unable to register library "${s}" with version "${e}":`];return i&&t.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&t.push("and"),o&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Q.warn(t.join(" "))}tt(new m(`${s}-version`,(()=>({library:s,version:e})),"VERSION"))}const it="firebase-heartbeat-database",ot=1,at="firebase-heartbeat-store";let ct=null;function ut(){return ct||(ct=function(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=V(o);return r&&o.addEventListener("upgradeneeded",(t=>{r(V(o.result),t.oldVersion,t.newVersion,V(o.transaction),t)})),n&&o.addEventListener("blocked",(t=>n(t.oldVersion,t.newVersion,t))),a.then((t=>{i&&t.addEventListener("close",(()=>i())),s&&t.addEventListener("versionchange",(t=>s(t.oldVersion,t.newVersion,t)))})).catch((()=>{})),a}(it,ot,{upgrade:(t,e)=>{0===e&&t.createObjectStore(at)}}).catch((t=>{throw et.create("idb-open",{originalErrorMessage:t.message})}))),ct}async function ht(t,e){try{const n=(await ut()).transaction(at,"readwrite"),r=n.objectStore(at);await r.put(e,lt(t)),await n.done}catch(t){if(t instanceof h)Q.warn(t.message);else{const e=et.create("idb-set",{originalErrorMessage:null==t?void 0:t.message});Q.warn(e.message)}}}function lt(t){return`${t.name}!${t.options.appId}`}class dt{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new pt(e),this._heartbeatsCachePromise=this._storage.read().then((t=>(this._heartbeatsCache=t,t)))}async triggerHeartbeat(){var t,e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ft();if((null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((t=>t.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((t=>{const e=new Date(t.date).valueOf();return Date.now()-e<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const e=ft(),{heartbeatsToSend:n,unsentEntries:r}=function(t,e=1024){const n=[];let r=t.slice();for(const s of t){const t=n.find((t=>t.agent===s.agent));if(t){if(t.dates.push(s.date),gt(n)>e){t.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),gt(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),s=o(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function ft(){return(new Date).toISOString().substring(0,10)}class pt{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"==typeof indexedDB}catch(t){return!1}}()&&new Promise(((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var t;e((null===(t=s.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const t=await async function(t){try{const e=await ut();return await e.transaction(at).objectStore(at).get(lt(t))}catch(t){if(t instanceof h)Q.warn(t.message);else{const e=et.create("idb-get",{originalErrorMessage:null==t?void 0:t.message});Q.warn(e.message)}}}(this.app);return(null==t?void 0:t.heartbeats)?t:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return ht(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}}async add(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return ht(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}}}function gt(t){return o(JSON.stringify({version:2,heartbeats:t})).length}tt(new m("platform-logger",(t=>new H(t)),"PRIVATE")),tt(new m("heartbeat",(t=>new dt(t)),"PRIVATE")),st(K,G,""),st(K,G,"esm2017"),st("fire-js","");var mt,yt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},vt={},wt=wt||{},Et=yt||self;function bt(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function _t(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Tt="closure_uid_"+(1e9*Math.random()>>>0),St=0;function It(t,e,n){return t.call.apply(t.bind,arguments)}function Ct(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function At(t,e,n){return(At=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?It:Ct).apply(null,arguments)}function Dt(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function kt(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(t,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return e.prototype[n].apply(t,s)}}function Nt(){this.s=this.s,this.o=this.o}Nt.prototype.s=!1,Nt.prototype.sa=function(){var t;!this.s&&(this.s=!0,this.N(),0)&&(t=this,Object.prototype.hasOwnProperty.call(t,Tt)&&t[Tt]||(t[Tt]=++St))},Nt.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Rt=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function xt(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function Ot(t,e){for(let e=1;e<arguments.length;e++){const n=arguments[e];if(bt(n)){const e=t.length||0,r=n.length||0;t.length=e+r;for(let s=0;s<r;s++)t[e+s]=n[s]}else t.push(n)}}function Lt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Lt.prototype.h=function(){this.defaultPrevented=!0};var Mt=function(){if(!Et.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const t=()=>{};Et.addEventListener("test",t,e),Et.removeEventListener("test",t,e)}catch(t){}return t}();function Pt(t){return/^[\s\xa0]*$/.test(t)}function Ft(){var t=Et.navigator;return t&&(t=t.userAgent)?t:""}function Vt(t){return-1!=Ft().indexOf(t)}function Ut(t){return Ut[" "](t),t}Ut[" "]=function(){};var Bt,jt,qt,$t=Vt("Opera"),zt=Vt("Trident")||Vt("MSIE"),Ht=Vt("Edge"),Kt=Ht||zt,Gt=Vt("Gecko")&&!(-1!=Ft().toLowerCase().indexOf("webkit")&&!Vt("Edge"))&&!(Vt("Trident")||Vt("MSIE"))&&!Vt("Edge"),Qt=-1!=Ft().toLowerCase().indexOf("webkit")&&!Vt("Edge");function Wt(){var t=Et.document;return t?t.documentMode:void 0}t:{var Xt="",Yt=(jt=Ft(),Gt?/rv:([^\);]+)(\)|;)/.exec(jt):Ht?/Edge\/([\d\.]+)/.exec(jt):zt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(jt):Qt?/WebKit\/(\S+)/.exec(jt):$t?/(?:Version)[ \/]?(\S+)/.exec(jt):void 0);if(Yt&&(Xt=Yt?Yt[1]:""),zt){var Jt=Wt();if(null!=Jt&&Jt>parseFloat(Xt)){Bt=String(Jt);break t}}Bt=Xt}Et.document&&zt?qt=Wt()||parseInt(Bt,10)||void 0:qt=void 0;var Zt=qt;function te(t,e){if(Lt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Gt){t:{try{Ut(e.nodeName);var s=!0;break t}catch(t){}s=!1}s||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:ee[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&te.$.h.call(this)}}kt(te,Lt);var ee={2:"touch",3:"pen",4:"mouse"};te.prototype.h=function(){te.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var ne="closure_listenable_"+(1e6*Math.random()|0),re=0;function se(t,e,n,r,s){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=s,this.key=++re,this.fa=this.ia=!1}function ie(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function oe(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function ae(t){const e={};for(const n in t)e[n]=t[n];return e}const ce="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ue(t,e){let n,r;for(let e=1;e<arguments.length;e++){for(n in r=arguments[e],r)t[n]=r[n];for(let e=0;e<ce.length;e++)n=ce[e],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function he(t){this.src=t,this.g={},this.h=0}function le(t,e){var n=e.type;if(n in t.g){var r,s=t.g[n],i=Rt(s,e);(r=0<=i)&&Array.prototype.splice.call(s,i,1),r&&(ie(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function de(t,e,n,r){for(var s=0;s<t.length;++s){var i=t[s];if(!i.fa&&i.listener==e&&i.capture==!!n&&i.la==r)return s}return-1}he.prototype.add=function(t,e,n,r,s){var i=t.toString();(t=this.g[i])||(t=this.g[i]=[],this.h++);var o=de(t,e,r,s);return-1<o?(e=t[o],n||(e.ia=!1)):((e=new se(e,this.src,i,!!r,s)).ia=n,t.push(e)),e};var fe="closure_lm_"+(1e6*Math.random()|0),pe={};function ge(t,e,n,r,s){if(r&&r.once)return ye(t,e,n,r,s);if(Array.isArray(e)){for(var i=0;i<e.length;i++)ge(t,e[i],n,r,s);return null}return n=Se(n),t&&t[ne]?t.O(e,n,_t(r)?!!r.capture:!!r,s):me(t,e,n,!1,r,s)}function me(t,e,n,r,s,i){if(!e)throw Error("Invalid event type");var o=_t(s)?!!s.capture:!!s,a=_e(t);if(a||(t[fe]=a=new he(t)),(n=a.add(e,n,r,o,i)).proxy)return n;if(r=function(){const t=be;return function e(n){return t.call(e.src,e.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Mt||(s=o),void 0===s&&(s=!1),t.addEventListener(e.toString(),r,s);else if(t.attachEvent)t.attachEvent(Ee(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function ye(t,e,n,r,s){if(Array.isArray(e)){for(var i=0;i<e.length;i++)ye(t,e[i],n,r,s);return null}return n=Se(n),t&&t[ne]?t.P(e,n,_t(r)?!!r.capture:!!r,s):me(t,e,n,!0,r,s)}function ve(t,e,n,r,s){if(Array.isArray(e))for(var i=0;i<e.length;i++)ve(t,e[i],n,r,s);else r=_t(r)?!!r.capture:!!r,n=Se(n),t&&t[ne]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=de(i=t.g[e],n,r,s))&&(ie(i[n]),Array.prototype.splice.call(i,n,1),0==i.length&&(delete t.g[e],t.h--))):t&&(t=_e(t))&&(e=t.g[e.toString()],t=-1,e&&(t=de(e,n,r,s)),(n=-1<t?e[t]:null)&&we(n))}function we(t){if("number"!=typeof t&&t&&!t.fa){var e=t.src;if(e&&e[ne])le(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Ee(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=_e(e))?(le(n,t),0==n.h&&(n.src=null,e[fe]=null)):ie(t)}}}function Ee(t){return t in pe?pe[t]:pe[t]="on"+t}function be(t,e){if(t.fa)t=!0;else{e=new te(e,this);var n=t.listener,r=t.la||t.src;t.ia&&we(t),t=n.call(r,e)}return t}function _e(t){return(t=t[fe])instanceof he?t:null}var Te="__closure_events_fn_"+(1e9*Math.random()>>>0);function Se(t){return"function"==typeof t?t:(t[Te]||(t[Te]=function(e){return t.handleEvent(e)}),t[Te])}function Ie(){Nt.call(this),this.i=new he(this),this.S=this,this.J=null}function Ce(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,"string"==typeof e)e=new Lt(e,t);else if(e instanceof Lt)e.target=e.target||t;else{var s=e;ue(e=new Lt(r,t),s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=e.g=n[i];s=Ae(o,r,!0,e)&&s}if(s=Ae(o=e.g=t,r,!0,e)&&s,s=Ae(o,r,!1,e)&&s,n)for(i=0;i<n.length;i++)s=Ae(o=e.g=n[i],r,!1,e)&&s}function Ae(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var s=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&le(t.i,o),s=!1!==a.call(c,r)&&s}}return s&&!r.defaultPrevented}kt(Ie,Nt),Ie.prototype[ne]=!0,Ie.prototype.removeEventListener=function(t,e,n,r){ve(this,t,e,n,r)},Ie.prototype.N=function(){if(Ie.$.N.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)ie(n[r]);delete e.g[t],e.h--}}this.J=null},Ie.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},Ie.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var De=Et.JSON.stringify;function ke(){var t=Pe;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Ne=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}((()=>new Re),(t=>t.reset()));class Re{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function xe(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function Oe(t){Et.setTimeout((()=>{throw t}),0)}let Le,Me=!1,Pe=new class{constructor(){this.h=this.g=null}add(t,e){const n=Ne.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}},Fe=()=>{const t=Et.Promise.resolve(void 0);Le=()=>{t.then(Ve)}};var Ve=()=>{for(var t;t=ke();){try{t.h.call(t.g)}catch(t){Oe(t)}var e=Ne;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Me=!1};function Ue(t,e){Ie.call(this),this.h=t||1,this.g=e||Et,this.j=At(this.qb,this),this.l=Date.now()}function Be(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function je(t,e,n){if("function"==typeof t)n&&(t=At(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=At(t.handleEvent,t)}return 2147483647<Number(e)?-1:Et.setTimeout(t,e||0)}function qe(t){t.g=je((()=>{t.g=null,t.i&&(t.i=!1,qe(t))}),t.j);const e=t.h;t.h=null,t.m.apply(null,e)}kt(Ue,Ie),(mt=Ue.prototype).ga=!1,mt.T=null,mt.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ce(this,"tick"),this.ga&&(Be(this),this.start()))}},mt.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},mt.N=function(){Ue.$.N.call(this),Be(this),delete this.g};class $e extends Nt{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:qe(this)}N(){super.N(),this.g&&(Et.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ze(t){Nt.call(this),this.h=t,this.g={}}kt(ze,Nt);var He=[];function Ke(t,e,n,r){Array.isArray(n)||(n&&(He[0]=n.toString()),n=He);for(var s=0;s<n.length;s++){var i=ge(e,n[s],r||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}}function Ge(t){oe(t.g,(function(t,e){this.g.hasOwnProperty(e)&&we(t)}),t),t.g={}}function Qe(){this.g=!0}function We(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(var o=1;o<s.length;o++)s[o]=""}}}return De(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}ze.prototype.N=function(){ze.$.N.call(this),Ge(this)},ze.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Qe.prototype.Ea=function(){this.g=!1},Qe.prototype.info=function(){};var Xe={},Ye=null;function Je(){return Ye=Ye||new Ie}function Ze(t){Lt.call(this,Xe.Ta,t)}function tn(t){const e=Je();Ce(e,new Ze(e))}function en(t,e){Lt.call(this,Xe.STAT_EVENT,t),this.stat=e}function nn(t){const e=Je();Ce(e,new en(e,t))}function rn(t,e){Lt.call(this,Xe.Ua,t),this.size=e}function sn(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Et.setTimeout((function(){t()}),e)}Xe.Ta="serverreachability",kt(Ze,Lt),Xe.STAT_EVENT="statevent",kt(en,Lt),Xe.Ua="timingevent",kt(rn,Lt);var on={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},an={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function cn(){}function un(t){return t.h||(t.h=t.i())}function hn(){}cn.prototype.h=null;var ln,dn={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function fn(){Lt.call(this,"d")}function pn(){Lt.call(this,"c")}function gn(){}function mn(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new ze(this),this.P=vn,t=Kt?125:void 0,this.V=new Ue(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new yn}function yn(){this.i=null,this.g="",this.h=!1}kt(fn,Lt),kt(pn,Lt),kt(gn,cn),gn.prototype.g=function(){return new XMLHttpRequest},gn.prototype.i=function(){return{}},ln=new gn;var vn=45e3,wn={},En={};function bn(t,e,n){t.L=1,t.A=Bn(Mn(e)),t.u=n,t.S=!0,_n(t,null)}function _n(t,e){t.G=Date.now(),Cn(t),t.B=Mn(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),Zn(n.i,"t",r),t.o=0,n=t.l.J,t.h=new yn,t.g=Zr(t.l,n?e:null,!t.u),0<t.O&&(t.M=new $e(At(t.Pa,t,t.g),t.O)),Ke(t.U,t.g,"readystatechange",t.nb),e=t.I?ae(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),tn(),function(t,e,n,r,s,i){t.info((function(){if(t.g)if(i)for(var o="",a=i.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var h=u[0];u=u[1];var l=h.split("_");o=2<=l.length&&"type"==l[1]?o+(h+"=")+u+"&":o+(h+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+"\n"+n+"\n"+o}))}(t.j,t.v,t.B,t.m,t.W,t.u)}function Tn(t){return!!t.g&&"GET"==t.v&&2!=t.L&&t.l.Ha}function Sn(t,e,n){let r,s=!0;for(;!t.J&&t.o<n.length;){if(r=In(t,n),r==En){4==e&&(t.s=4,nn(14),s=!1),We(t.j,t.m,null,"[Incomplete Response]");break}if(r==wn){t.s=4,nn(15),We(t.j,t.m,n,"[Invalid Chunk]"),s=!1;break}We(t.j,t.m,r,null),Rn(t,r)}Tn(t)&&0!=t.o&&(t.h.g=t.h.g.slice(t.o),t.o=0),4!=e||0!=n.length||t.h.h||(t.s=1,nn(16),s=!1),t.i=t.i&&s,s?0<n.length&&!t.ba&&(t.ba=!0,(e=t.l).g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Hr(e),e.M=!0,nn(11))):(We(t.j,t.m,n,"[Invalid Chunked Response]"),Nn(t),kn(t))}function In(t,e){var n=t.o,r=e.indexOf("\n",n);return-1==r?En:(n=Number(e.substring(n,r)),isNaN(n)?wn:(r+=1)+n>e.length?En:(e=e.slice(r,r+n),t.o=r+n,e))}function Cn(t){t.Y=Date.now()+t.P,An(t,t.P)}function An(t,e){if(null!=t.C)throw Error("WatchDog timer not null");t.C=sn(At(t.lb,t),e)}function Dn(t){t.C&&(Et.clearTimeout(t.C),t.C=null)}function kn(t){0==t.l.H||t.J||Qr(t.l,t)}function Nn(t){Dn(t);var e=t.M;e&&"function"==typeof e.sa&&e.sa(),t.M=null,Be(t.V),Ge(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Rn(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||or(n.i,t)))if(!t.K&&or(n.i,t)&&3==n.H){try{var r=n.Ja.g.parse(e)}catch(t){r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){t:if(!n.u){if(n.g){if(!(n.g.G+3e3<t.G))break t;Gr(n),Fr(n)}zr(n),nn(18)}}else n.Fa=s[1],0<n.Fa-n.V&&37500>s[2]&&n.G&&0==n.A&&!n.v&&(n.v=sn(At(n.ib,n),6e3));if(1>=ir(n.i)&&n.oa){try{n.oa()}catch(t){}n.oa=void 0}}else Xr(n,11)}else if((t.K||n.g==t)&&Gr(n),!Pt(e))for(s=n.Ja.g.parse(e),e=0;e<s.length;e++){let u=s[e];if(n.V=u[0],u=u[1],2==n.H)if("c"==u[0]){n.K=u[1],n.pa=u[2];const e=u[3];null!=e&&(n.ra=e,n.l.info("VER="+n.ra));const s=u[4];null!=s&&(n.Ga=s,n.l.info("SVER="+n.Ga));const h=u[5];null!=h&&"number"==typeof h&&0<h&&(r=1.5*h,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const l=t.g;if(l){const t=l.g?l.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var i=r.i;i.g||-1==t.indexOf("spdy")&&-1==t.indexOf("quic")&&-1==t.indexOf("h2")||(i.j=i.l,i.g=new Set,i.h&&(ar(i,i.h),i.h=null))}if(r.F){const t=l.g?l.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(r.Da=t,Un(r.I,r.F,t))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=t;if((r=n).wa=Jr(r,r.J?r.pa:null,r.Y),o.K){cr(r.i,o);var a=o,c=r.L;c&&a.setTimeout(c),a.C&&(Dn(a),Cn(a)),r.g=o}else $r(r);0<n.j.length&&Ur(n)}else"stop"!=u[0]&&"close"!=u[0]||Xr(n,7);else 3==n.H&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?Xr(n,7):Pr(n):"noop"!=u[0]&&n.h&&n.h.Aa(u),n.A=0)}tn()}catch(t){}}function xn(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(bt(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function(t){if(t.ta&&"function"==typeof t.ta)return t.ta();if(!t.Z||"function"!=typeof t.Z){if("undefined"!=typeof Map&&t instanceof Map)return Array.from(t.keys());if(!("undefined"!=typeof Set&&t instanceof Set)){if(bt(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}(t),r=function(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if("undefined"!=typeof Map&&t instanceof Map||"undefined"!=typeof Set&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(bt(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),s=r.length,i=0;i<s;i++)e.call(void 0,r[i],n&&n[i],t)}(mt=mn.prototype).setTimeout=function(t){this.P=t},mt.nb=function(t){t=t.target;const e=this.M;e&&3==Nr(t)?e.l():this.Pa(t)},mt.Pa=function(t){try{if(t==this.g)t:{const h=Nr(this.g);var e=this.g.Ia();if(this.g.da(),!(3>h)&&(3!=h||Kt||this.g&&(this.h.h||this.g.ja()||Rr(this.g)))){this.J||4!=h||7==e||tn(),Dn(this);var n=this.g.da();this.ca=n;e:if(Tn(this)){var r=Rr(this.g);t="";var s=r.length,i=4==Nr(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Nn(this),kn(this);var o="";break e}this.h.i=new Et.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:i&&e==s-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(t,e,n,r,s,i,o){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+"\n"+n+"\n"+i+" "+o}))}(this.j,this.v,this.B,this.m,this.W,h,n),this.i){if(this.aa&&!this.K){e:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Pt(a)){var u=a;break e}}u=null}if(!(n=u)){this.i=!1,this.s=3,nn(12),Nn(this),kn(this);break t}We(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Rn(this,n)}this.S?(Sn(this,h,o),Kt&&this.i&&3==h&&(Ke(this.U,this.V,"tick",this.mb),this.V.start())):(We(this.j,this.m,o,null),Rn(this,o)),4==h&&Nn(this),this.i&&!this.J&&(4==h?Qr(this.l,this):(this.i=!1,Cn(this)))}else(function(t){const e={};t=(t.g&&2<=Nr(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<t.length;r++){if(Pt(t[r]))continue;var n=xe(t[r]);const s=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const i=e[s]||[];e[s]=i,i.push(n)}!function(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,(function(t){return t.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,nn(12)):(this.s=0,nn(13)),Nn(this),kn(this)}}}catch(t){}},mt.mb=function(){if(this.g){var t=Nr(this.g),e=this.g.ja();this.o<e.length&&(Dn(this),Sn(this,t,e),this.i&&4!=t&&Cn(this))}},mt.cancel=function(){this.J=!0,Nn(this)},mt.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.B),2!=this.L&&(tn(),nn(17)),Nn(this),this.s=2,kn(this)):An(this,this.Y-t)};var On=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ln(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Ln){this.h=t.h,Pn(this,t.j),this.s=t.s,this.g=t.g,Fn(this,t.m),this.l=t.l;var e=t.i,n=new Wn;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Vn(this,n),this.o=t.o}else t&&(e=String(t).match(On))?(this.h=!1,Pn(this,e[1]||"",!0),this.s=jn(e[2]||""),this.g=jn(e[3]||"",!0),Fn(this,e[4]),this.l=jn(e[5]||"",!0),Vn(this,e[6]||"",!0),this.o=jn(e[7]||"")):(this.h=!1,this.i=new Wn(null,this.h))}function Mn(t){return new Ln(t)}function Pn(t,e,n){t.j=n?jn(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Fn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Vn(t,e,n){e instanceof Wn?(t.i=e,function(t,e){e&&!t.j&&(Xn(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Yn(this,e),Zn(this,n,t))}),t)),t.j=e}(t.i,t.h)):(n||(e=qn(e,Gn)),t.i=new Wn(e,t.h))}function Un(t,e,n){t.i.set(e,n)}function Bn(t){return Un(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function jn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function qn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,$n),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function $n(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Ln.prototype.toString=function(){var t=[],e=this.j;e&&t.push(qn(e,zn,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(qn(e,zn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(qn(n,"/"==n.charAt(0)?Kn:Hn,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",qn(n,Qn)),t.join("")};var zn=/[#\/\?@]/g,Hn=/[#\?:]/g,Kn=/[#\?]/g,Gn=/[#\?@]/g,Qn=/#/g;function Wn(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Xn(t){t.g||(t.g=new Map,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),s=null;if(0<=r){var i=t[n].substring(0,r);s=t[n].substring(r+1)}else i=t[n];e(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Yn(t,e){Xn(t),e=tr(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function Jn(t,e){return Xn(t),e=tr(t,e),t.g.has(e)}function Zn(t,e,n){Yn(t,e),0<n.length&&(t.i=null,t.g.set(tr(t,e),xt(n)),t.h+=n.length)}function tr(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(mt=Wn.prototype).add=function(t,e){Xn(this),this.i=null,t=tr(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},mt.forEach=function(t,e){Xn(this),this.g.forEach((function(n,r){n.forEach((function(n){t.call(e,n,r,this)}),this)}),this)},mt.ta=function(){Xn(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const s=t[r];for(let t=0;t<s.length;t++)n.push(e[r])}return n},mt.Z=function(t){Xn(this);let e=[];if("string"==typeof t)Jn(this,t)&&(e=e.concat(this.g.get(tr(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},mt.set=function(t,e){return Xn(this),this.i=null,Jn(this,t=tr(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},mt.get=function(t,e){return t&&0<(t=this.Z(t)).length?String(t[0]):e},mt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const i=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var s=i;""!==o[r]&&(s+="="+encodeURIComponent(String(o[r]))),t.push(s)}}return this.i=t.join("&")};var er=class{constructor(t,e){this.g=t,this.map=e}};function nr(t){this.l=t||rr,t=Et.PerformanceNavigationTiming?0<(t=Et.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Et.g&&Et.g.Ka&&Et.g.Ka()&&Et.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var rr=10;function sr(t){return!!t.h||!!t.g&&t.g.size>=t.j}function ir(t){return t.h?1:t.g?t.g.size:0}function or(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function ar(t,e){t.g?t.g.add(e):t.h=e}function cr(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function ur(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return xt(t.i)}nr.prototype.cancel=function(){if(this.i=ur(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var hr=class{stringify(t){return Et.JSON.stringify(t,void 0)}parse(t){return Et.JSON.parse(t,void 0)}};function lr(){this.g=new hr}function dr(t,e,n){const r=n||"";try{xn(t,(function(t,n){let s=t;_t(t)&&(s=De(t)),e.push(r+n+"="+encodeURIComponent(s))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function fr(t,e,n,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch(t){}}function pr(t){this.l=t.ec||null,this.j=t.ob||!1}function gr(t,e){Ie.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=mr,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}kt(pr,cn),pr.prototype.g=function(){return new gr(this.l,this.j)},pr.prototype.i=function(t){return function(){return t}}({}),kt(gr,Ie);var mr=0;function yr(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function vr(t){t.readyState=4,t.l=null,t.j=null,t.A=null,wr(t)}function wr(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(mt=gr.prototype).open=function(t,e){if(this.readyState!=mr)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,wr(this)},mt.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||Et).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},mt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,vr(this)),this.readyState=mr},mt.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,wr(this)),this.g&&(this.readyState=3,wr(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(void 0!==Et.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;yr(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))},mt.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?vr(this):wr(this),3==this.readyState&&yr(this)}},mt.Za=function(t){this.g&&(this.response=this.responseText=t,vr(this))},mt.Ya=function(t){this.g&&(this.response=t,vr(this))},mt.ka=function(){this.g&&vr(this)},mt.setRequestHeader=function(t,e){this.v.append(t,e)},mt.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},mt.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(gr.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var Er=Et.JSON.parse;function br(t){Ie.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=_r,this.L=this.M=!1}kt(br,Ie);var _r="",Tr=/^https?$/i,Sr=["POST","PUT"];function Ir(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Cr(t),Dr(t)}function Cr(t){t.F||(t.F=!0,Ce(t,"complete"),Ce(t,"error"))}function Ar(t){if(t.h&&void 0!==wt&&(!t.C[1]||4!=Nr(t)||2!=t.da()))if(t.v&&4==Nr(t))je(t.La,0,t);else if(Ce(t,"readystatechange"),4==Nr(t)){t.h=!1;try{const o=t.da();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var n;if(!(n=e)){var r;if(r=0===o){var s=String(t.I).match(On)[1]||null;!s&&Et.self&&Et.self.location&&(s=Et.self.location.protocol.slice(0,-1)),r=!Tr.test(s?s.toLowerCase():"")}n=r}if(n)Ce(t,"complete"),Ce(t,"success");else{t.m=6;try{var i=2<Nr(t)?t.g.statusText:""}catch(t){i=""}t.j=i+" ["+t.da()+"]",Cr(t)}}finally{Dr(t)}}}function Dr(t,e){if(t.g){kr(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Ce(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function kr(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(Et.clearTimeout(t.A),t.A=null)}function Nr(t){return t.g?t.g.readyState:0}function Rr(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case _r:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(t){return null}}function xr(t){let e="";return oe(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}function Or(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=xr(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Un(t,e,n))}function Lr(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Mr(t){this.Ga=0,this.j=[],this.l=new Qe,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Lr("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Lr("baseRetryDelayMs",5e3,t),this.hb=Lr("retryDelaySeedMs",1e4,t),this.eb=Lr("forwardChannelMaxRetries",2,t),this.xa=Lr("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new nr(t&&t.concurrentRequestLimit),this.Ja=new lr,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Pr(t){if(Vr(t),3==t.H){var e=t.W++,n=Mn(t.I);if(Un(n,"SID",t.K),Un(n,"RID",e),Un(n,"TYPE","terminate"),jr(t,n),(e=new mn(t,t.l,e)).L=2,e.A=Bn(Mn(n)),n=!1,Et.navigator&&Et.navigator.sendBeacon)try{n=Et.navigator.sendBeacon(e.A.toString(),"")}catch(t){}!n&&Et.Image&&((new Image).src=e.A,n=!0),n||(e.g=Zr(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Cn(e)}Yr(t)}function Fr(t){t.g&&(Hr(t),t.g.cancel(),t.g=null)}function Vr(t){Fr(t),t.u&&(Et.clearTimeout(t.u),t.u=null),Gr(t),t.i.cancel(),t.m&&("number"==typeof t.m&&Et.clearTimeout(t.m),t.m=null)}function Ur(t){if(!sr(t.i)&&!t.m){t.m=!0;var e=t.Na;Le||Fe(),Me||(Le(),Me=!0),Pe.add(e,t),t.C=0}}function Br(t,e){var n;n=e?e.m:t.W++;const r=Mn(t.I);Un(r,"SID",t.K),Un(r,"RID",n),Un(r,"AID",t.V),jr(t,r),t.o&&t.s&&Or(r,t.o,t.s),n=new mn(t,t.l,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=qr(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),ar(t.i,n),bn(n,r,e)}function jr(t,e){t.na&&oe(t.na,(function(t,n){Un(e,n,t)})),t.h&&xn({},(function(t,n){Un(e,n,t)}))}function qr(t,e,n){n=Math.min(t.j.length,n);var r=t.h?At(t.h.Va,t.h,t):null;t:{var s=t.j;let e=-1;for(;;){const t=["count="+n];-1==e?0<n?(e=s[0].g,t.push("ofs="+e)):e=0:t.push("ofs="+e);let i=!0;for(let o=0;o<n;o++){let n=s[o].g;const a=s[o].map;if(n-=e,0>n)e=Math.max(0,s[o].g-100),i=!1;else try{dr(a,t,"req"+n+"_")}catch(t){r&&r(a)}}if(i){r=t.join("&");break t}}}return t=t.j.splice(0,n),e.F=t,r}function $r(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Le||Fe(),Me||(Le(),Me=!0),Pe.add(e,t),t.A=0}}function zr(t){return!(t.g||t.u||3<=t.A||(t.ba++,t.u=sn(At(t.Ma,t),Wr(t,t.A)),t.A++,0))}function Hr(t){null!=t.B&&(Et.clearTimeout(t.B),t.B=null)}function Kr(t){t.g=new mn(t,t.l,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=Mn(t.wa);Un(e,"RID","rpc"),Un(e,"SID",t.K),Un(e,"AID",t.V),Un(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Un(e,"TO",t.qa),Un(e,"TYPE","xmlhttp"),jr(t,e),t.o&&t.s&&Or(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Bn(Mn(e)),n.u=null,n.S=!0,_n(n,t)}function Gr(t){null!=t.v&&(Et.clearTimeout(t.v),t.v=null)}function Qr(t,e){var n=null;if(t.g==e){Gr(t),Hr(t),t.g=null;var r=2}else{if(!or(t.i,e))return;n=e.F,cr(t.i,e),r=1}if(0!=t.H)if(e.i)if(1==r){n=e.u?e.u.length:0,e=Date.now()-e.G;var s=t.C;Ce(r=Je(),new rn(r,n)),Ur(t)}else $r(t);else if(3==(s=e.s)||0==s&&0<e.ca||!(1==r&&function(t,e){return!(ir(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.j=e.F.concat(t.j),0):1==t.H||2==t.H||t.C>=(t.cb?0:t.eb)||(t.m=sn(At(t.Na,t,e),Wr(t,t.C)),t.C++,0)))}(t,e)||2==r&&zr(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),s){case 1:Xr(t,5);break;case 4:Xr(t,10);break;case 3:Xr(t,6);break;default:Xr(t,2)}}function Wr(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Xr(t,e){if(t.l.info("Error code "+e),2==e){var n=null;t.h&&(n=null);var r=At(t.pb,t);n||(n=new Ln("//www.google.com/images/cleardot.gif"),Et.location&&"http"==Et.location.protocol||Pn(n,"https"),Bn(n)),function(t,e){const n=new Qe;if(Et.Image){const r=new Image;r.onload=Dt(fr,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Dt(fr,n,r,"TestLoadImage: error",!1,e),r.onabort=Dt(fr,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Dt(fr,n,r,"TestLoadImage: timeout",!1,e),Et.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else nn(2);t.H=0,t.h&&t.h.za(e),Yr(t),Vr(t)}function Yr(t){if(t.H=0,t.ma=[],t.h){const e=ur(t.i);0==e.length&&0==t.j.length||(Ot(t.ma,e),Ot(t.ma,t.j),t.i.i.length=0,xt(t.j),t.j.length=0),t.h.ya()}}function Jr(t,e,n){var r=n instanceof Ln?Mn(n):new Ln(n);if(""!=r.g)e&&(r.g=e+"."+r.g),Fn(r,r.m);else{var s=Et.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var i=new Ln(null);r&&Pn(i,r),e&&(i.g=e),s&&Fn(i,s),n&&(i.l=n),r=i}return n=t.F,e=t.Da,n&&e&&Un(r,n,e),Un(r,"VER",t.ra),jr(t,r),r}function Zr(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=t.Ha&&!t.va?new br(new pr({ob:n})):new br(t.va)).Oa(t.J),e}function ts(){}function es(){if(zt&&!(10<=Number(Zt)))throw Error("Environmental error: no available transport.")}function ns(t,e){Ie.call(this),this.g=new Mr(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Pt(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Pt(e)&&(this.g.F=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new is(this)}function rs(t){fn.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){t:{for(const n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function ss(){pn.call(this),this.status=1}function is(t){this.g=t}function os(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function as(t,e,n){n||(n=0);var r=Array(16);if("string"==typeof e)for(var s=0;16>s;++s)r[s]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],s=t.g[2];var i=t.g[3],o=e+(i^n&(s^i))+r[0]+3614090360&4294967295;o=(n=(s=(i=(e=(n=(s=(i=(e=(n=(s=(i=(e=(n=(s=(i=(e=(n=(s=(i=(e=(n=(s=(i=(e=(n=(s=(i=(e=(n=(s=(i=(e=(n=(s=(i=(e=(n=(s=(i=(e=(n=(s=(i=(e=(n=(s=(i=(e=(n=(s=(i=(e=(n=(s=(i=(e=(n=(s=(i=(e=n+(o<<7&4294967295|o>>>25))+((o=i+(s^e&(n^s))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=s+(n^i&(e^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^s&(i^e))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(i^n&(s^i))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=i+(s^e&(n^s))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=s+(n^i&(e^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^s&(i^e))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(i^n&(s^i))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=i+(s^e&(n^s))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=s+(n^i&(e^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^s&(i^e))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(i^n&(s^i))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=i+(s^e&(n^s))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=s+(n^i&(e^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^s&(i^e))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^i&(n^s))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=i+(n^s&(e^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=s+(e^n&(i^e))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(i^e&(s^i))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(s^i&(n^s))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=i+(n^s&(e^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=s+(e^n&(i^e))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(i^e&(s^i))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(s^i&(n^s))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=i+(n^s&(e^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=s+(e^n&(i^e))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(i^e&(s^i))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(s^i&(n^s))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=i+(n^s&(e^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=s+(e^n&(i^e))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(i^e&(s^i))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(n^s^i)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=i+(e^n^s)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=s+(i^e^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(s^i^e)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^s^i)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=i+(e^n^s)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=s+(i^e^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(s^i^e)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^s^i)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=i+(e^n^s)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=s+(i^e^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(s^i^e)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^s^i)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=i+(e^n^s)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=s+(i^e^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(s^i^e)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(s^(n|~i))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=i+(n^(e|~s))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=s+(e^(i|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(i^(s|~e))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(s^(n|~i))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=i+(n^(e|~s))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=s+(e^(i|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(i^(s|~e))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(s^(n|~i))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=i+(n^(e|~s))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=s+(e^(i|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(i^(s|~e))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((i=(e=n+((o=e+(s^(n|~i))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=i+(n^(e|~s))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((s=i+((o=s+(e^(i|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(s+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+s&4294967295,t.g[3]=t.g[3]+i&4294967295}function cs(t,e){this.h=e;for(var n=[],r=!0,s=t.length-1;0<=s;s--){var i=0|t[s];r&&i==e||(n[s]=i,r=!1)}this.g=n}(mt=br.prototype).Oa=function(t){this.M=t},mt.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():ln.g(),this.C=this.u?un(this.u):un(ln),this.g.onreadystatechange=At(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(t){return void Ir(this,t)}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const t of r.keys())n.set(t,r.get(t))}r=Array.from(n.keys()).find((t=>"content-type"==t.toLowerCase())),s=Et.FormData&&t instanceof Et.FormData,!(0<=Rt(Sr,e))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[t,e]of n)this.g.setRequestHeader(t,e);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{kr(this),0<this.B&&((this.L=function(t){return zt&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=At(this.ua,this)):this.A=je(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(t){Ir(this,t)}},mt.ua=function(){void 0!==wt&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ce(this,"timeout"),this.abort(8))},mt.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Ce(this,"complete"),Ce(this,"abort"),Dr(this))},mt.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Dr(this,!0)),br.$.N.call(this)},mt.La=function(){this.s||(this.G||this.v||this.l?Ar(this):this.kb())},mt.kb=function(){Ar(this)},mt.isActive=function(){return!!this.g},mt.da=function(){try{return 2<Nr(this)?this.g.status:-1}catch(t){return-1}},mt.ja=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},mt.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Er(e)}},mt.Ia=function(){return this.m},mt.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(mt=Mr.prototype).ra=8,mt.H=1,mt.Na=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const s=new mn(this,this.l,t);let i=this.s;if(this.U&&(i?(i=ae(i),ue(i,this.U)):i=this.U),null!==this.o||this.O||(s.I=i,i=null),this.P)t:{for(var e=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=n;break t}if(4096===e||n===this.j.length-1){e=n+1;break t}}e=1e3}else e=1e3;e=qr(this,s,e),Un(n=Mn(this.I),"RID",t),Un(n,"CVER",22),this.F&&Un(n,"X-HTTP-Session-Id",this.F),jr(this,n),i&&(this.O?e="headers="+encodeURIComponent(String(xr(i)))+"&"+e:this.o&&Or(n,this.o,i)),ar(this.i,s),this.bb&&Un(n,"TYPE","init"),this.P?(Un(n,"$req",e),Un(n,"SID","null"),s.aa=!0,bn(s,n,null)):bn(s,n,e),this.H=2}}else 3==this.H&&(t?Br(this,t):0==this.j.length||sr(this.i)||Br(this))},mt.Ma=function(){if(this.u=null,Kr(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=sn(At(this.jb,this),t)}},mt.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,nn(10),Fr(this),Kr(this))},mt.ib=function(){null!=this.v&&(this.v=null,Fr(this),zr(this),nn(19))},mt.pb=function(t){t?(this.l.info("Successfully pinged google.com"),nn(2)):(this.l.info("Failed to ping google.com"),nn(1))},mt.isActive=function(){return!!this.h&&this.h.isActive(this)},(mt=ts.prototype).Ba=function(){},mt.Aa=function(){},mt.za=function(){},mt.ya=function(){},mt.isActive=function(){return!0},mt.Va=function(){},es.prototype.g=function(t,e){return new ns(t,e)},kt(ns,Ie),ns.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;nn(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=Jr(t,null,t.Y),Ur(t)},ns.prototype.close=function(){Pr(this.g)},ns.prototype.u=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=De(t),t=n);e.j.push(new er(e.fb++,t)),3==e.H&&Ur(e)},ns.prototype.N=function(){this.g.h=null,delete this.j,Pr(this.g),delete this.g,ns.$.N.call(this)},kt(rs,fn),kt(ss,pn),kt(is,ts),is.prototype.Ba=function(){Ce(this.g,"a")},is.prototype.Aa=function(t){Ce(this.g,new rs(t))},is.prototype.za=function(t){Ce(this.g,new ss)},is.prototype.ya=function(){Ce(this.g,"b")},kt(os,(function(){this.blockSize=-1})),os.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},os.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=this.m,s=this.h,i=0;i<e;){if(0==s)for(;i<=n;)as(this,t,i),i+=this.blockSize;if("string"==typeof t){for(;i<e;)if(r[s++]=t.charCodeAt(i++),s==this.blockSize){as(this,r),s=0;break}}else for(;i<e;)if(r[s++]=t[i++],s==this.blockSize){as(this,r),s=0;break}}this.h=s,this.i+=e},os.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};var us={};function hs(t){return-128<=t&&128>t?function(t,e){var n=us;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=function(t){return new cs([0|t],0>t?-1:0)}(t)}(t):new cs([0|t],0>t?-1:0)}function ls(t){if(isNaN(t)||!isFinite(t))return fs;if(0>t)return vs(ls(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=ds;return new cs(e,0)}var ds=4294967296,fs=hs(0),ps=hs(1),gs=hs(16777216);function ms(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function ys(t){return-1==t.h}function vs(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new cs(n,~t.h).add(ps)}function ws(t,e){return t.add(vs(e))}function Es(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function bs(t,e){this.g=t,this.h=e}function _s(t,e){if(ms(e))throw Error("division by zero");if(ms(t))return new bs(fs,fs);if(ys(t))return e=_s(vs(t),e),new bs(vs(e.g),vs(e.h));if(ys(e))return e=_s(t,vs(e)),new bs(vs(e.g),e.h);if(30<t.g.length){if(ys(t)||ys(e))throw Error("slowDivide_ only works with positive integers.");for(var n=ps,r=e;0>=r.X(t);)n=Ts(n),r=Ts(r);var s=Ss(n,1),i=Ss(r,1);for(r=Ss(r,2),n=Ss(n,2);!ms(r);){var o=i.add(r);0>=o.X(t)&&(s=s.add(n),i=o),r=Ss(r,1),n=Ss(n,1)}return e=ws(t,s.R(e)),new bs(s,e)}for(s=fs;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(i=ls(n)).R(e);ys(o)||0<o.X(t);)o=(i=ls(n-=r)).R(e);ms(i)&&(i=ps),s=s.add(i),t=ws(t,o)}return new bs(s,t)}function Ts(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new cs(n,t.h)}function Ss(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,s=[],i=0;i<r;i++)s[i]=0<e?t.D(i+n)>>>e|t.D(i+n+1)<<32-e:t.D(i+n);return new cs(s,t.h)}(mt=cs.prototype).ea=function(){if(ys(this))return-vs(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:ds+r)*e,e*=ds}return t},mt.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(ms(this))return"0";if(ys(this))return"-"+vs(this).toString(t);for(var e=ls(Math.pow(t,6)),n=this,r="";;){var s=_s(n,e).g,i=((0<(n=ws(n,s.R(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(ms(n=s))return i+r;for(;6>i.length;)i="0"+i;r=i+r}},mt.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},mt.X=function(t){return ys(t=ws(this,t))?-1:ms(t)?0:1},mt.abs=function(){return ys(this)?vs(this):this},mt.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,s=0;s<=e;s++){var i=r+(65535&this.D(s))+(65535&t.D(s)),o=(i>>>16)+(this.D(s)>>>16)+(t.D(s)>>>16);r=o>>>16,i&=65535,o&=65535,n[s]=o<<16|i}return new cs(n,-2147483648&n[n.length-1]?-1:0)},mt.R=function(t){if(ms(this)||ms(t))return fs;if(ys(this))return ys(t)?vs(this).R(vs(t)):vs(vs(this).R(t));if(ys(t))return vs(this.R(vs(t)));if(0>this.X(gs)&&0>t.X(gs))return ls(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<t.g.length;s++){var i=this.D(r)>>>16,o=65535&this.D(r),a=t.D(s)>>>16,c=65535&t.D(s);n[2*r+2*s]+=o*c,Es(n,2*r+2*s),n[2*r+2*s+1]+=i*c,Es(n,2*r+2*s+1),n[2*r+2*s+1]+=o*a,Es(n,2*r+2*s+1),n[2*r+2*s+2]+=i*a,Es(n,2*r+2*s+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new cs(n,0)},mt.gb=function(t){return _s(this,t).h},mt.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new cs(n,this.h&t.h)},mt.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new cs(n,this.h|t.h)},mt.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new cs(n,this.h^t.h)},es.prototype.createWebChannel=es.prototype.g,ns.prototype.send=ns.prototype.u,ns.prototype.open=ns.prototype.m,ns.prototype.close=ns.prototype.close,on.NO_ERROR=0,on.TIMEOUT=8,on.HTTP_ERROR=6,an.COMPLETE="complete",hn.EventType=dn,dn.OPEN="a",dn.CLOSE="b",dn.ERROR="c",dn.MESSAGE="d",Ie.prototype.listen=Ie.prototype.O,br.prototype.listenOnce=br.prototype.P,br.prototype.getLastError=br.prototype.Sa,br.prototype.getLastErrorCode=br.prototype.Ia,br.prototype.getStatus=br.prototype.da,br.prototype.getResponseJson=br.prototype.Wa,br.prototype.getResponseText=br.prototype.ja,br.prototype.send=br.prototype.ha,br.prototype.setWithCredentials=br.prototype.Oa,os.prototype.digest=os.prototype.l,os.prototype.reset=os.prototype.reset,os.prototype.update=os.prototype.j,cs.prototype.add=cs.prototype.add,cs.prototype.multiply=cs.prototype.R,cs.prototype.modulo=cs.prototype.gb,cs.prototype.compare=cs.prototype.X,cs.prototype.toNumber=cs.prototype.ea,cs.prototype.toString=cs.prototype.toString,cs.prototype.getBits=cs.prototype.D,cs.fromNumber=ls,cs.fromString=function t(e,n){if(0==e.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==e.charAt(0))return vs(t(e.substring(1),n));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=ls(Math.pow(n,8)),s=fs,i=0;i<e.length;i+=8){var o=Math.min(8,e.length-i),a=parseInt(e.substring(i,i+o),n);8>o?(o=ls(Math.pow(n,o)),s=s.R(o).add(ls(a))):s=(s=s.R(r)).add(ls(a))}return s};var Is=vt.createWebChannelTransport=function(){return new es},Cs=vt.getStatEventTarget=function(){return Je()},As=vt.ErrorCode=on,Ds=vt.EventType=an,ks=vt.Event=Xe,Ns=vt.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Rs=(vt.FetchXmlHttpFactory=pr,vt.WebChannel=hn),xs=vt.XhrIo=br,Os=vt.Md5=os,Ls=vt.Integer=cs;const Ms="@firebase/firestore";class Ps{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Ps.UNAUTHENTICATED=new Ps(null),Ps.GOOGLE_CREDENTIALS=new Ps("google-credentials-uid"),Ps.FIRST_PARTY=new Ps("first-party-uid"),Ps.MOCK_USER=new Ps("mock-user");let Fs="10.7.0";const Vs=new A("@firebase/firestore");function Us(){return Vs.logLevel}function Bs(t,...e){if(Vs.logLevel<=b.DEBUG){const n=e.map($s);Vs.debug(`Firestore (${Fs}): ${t}`,...n)}}function js(t,...e){if(Vs.logLevel<=b.ERROR){const n=e.map($s);Vs.error(`Firestore (${Fs}): ${t}`,...n)}}function qs(t,...e){if(Vs.logLevel<=b.WARN){const n=e.map($s);Vs.warn(`Firestore (${Fs}): ${t}`,...n)}}function $s(t){if("string"==typeof t)return t;try{return function(t){return JSON.stringify(t)}(t)}catch(e){return t}}function zs(t="Unexpected state"){const e=`FIRESTORE (${Fs}) INTERNAL ASSERTION FAILED: `+t;throw js(e),new Error(e)}function Hs(t,e){t||zs()}function Ks(t,e){return t}const Gs={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Qs extends h{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ws{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}class Xs{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Ys{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(Ps.UNAUTHENTICATED)))}shutdown(){}}class Js{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class Zs{constructor(t){this.t=t,this.currentUser=Ps.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let n=this.i;const r=t=>this.i!==n?(n=this.i,e(t)):Promise.resolve();let s=new Ws;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ws,t.enqueueRetryable((()=>r(this.currentUser)))};const i=()=>{const e=s;t.enqueueRetryable((async()=>{await e.promise,await r(this.currentUser)}))},o=t=>{Bs("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=t,this.auth.addAuthTokenListener(this.o),i()};this.t.onInit((t=>o(t))),setTimeout((()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?o(t):(Bs("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ws)}}),0),i()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((e=>this.i!==t?(Bs("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?(Hs("string"==typeof e.accessToken),new Xs(e.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Hs(null===t||"string"==typeof t),new Ps(t)}}class ti{constructor(t,e,n){this.l=t,this.h=e,this.P=n,this.type="FirstParty",this.user=Ps.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class ei{constructor(t,e,n){this.l=t,this.h=e,this.P=n}getToken(){return Promise.resolve(new ti(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable((()=>e(Ps.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ni{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ri{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){const n=t=>{null!=t.error&&Bs("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${t.error.message}`);const n=t.token!==this.R;return this.R=t.token,Bs("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?e(t.token):Promise.resolve()};this.o=e=>{t.enqueueRetryable((()=>n(e)))};const r=t=>{Bs("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=t,this.appCheck.addTokenListener(this.o)};this.A.onInit((t=>r(t))),setTimeout((()=>{if(!this.appCheck){const t=this.A.getImmediate({optional:!0});t?r(t):Bs("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((t=>t?(Hs("string"==typeof t.token),this.R=t.token,new ni(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function si(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let e=0;e<t;e++)n[e]=Math.floor(256*Math.random());return n}class ii{static newId(){const t=62*Math.floor(256/62);let e="";for(;e.length<20;){const n=si(40);for(let r=0;r<n.length;++r)e.length<20&&n[r]<t&&(e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return e}}function oi(t,e){return t<e?-1:t>e?1:0}function ai(t,e,n){return t.length===e.length&&t.every(((t,r)=>n(t,e[r])))}class ci{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Qs(Gs.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Qs(Gs.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Qs(Gs.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Qs(Gs.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return ci.fromMillis(Date.now())}static fromDate(t){return ci.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new ci(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?oi(this.nanoseconds,t.nanoseconds):oi(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ui{constructor(t){this.timestamp=t}static fromTimestamp(t){return new ui(t)}static min(){return new ui(new ci(0,0))}static max(){return new ui(new ci(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class hi{constructor(t,e,n){void 0===e?e=0:e>t.length&&zs(),void 0===n?n=t.length-e:n>t.length-e&&zs(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===hi.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof hi?t.forEach((t=>{e.push(t)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const n=t.get(r),s=e.get(r);if(n<s)return-1;if(n>s)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class li extends hi{construct(t,e,n){return new li(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new Qs(Gs.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter((t=>t.length>0)))}return new li(e)}static emptyPath(){return new li([])}}const di=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fi extends hi{construct(t,e,n){return new fi(t,e,n)}static isValidIdentifier(t){return di.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fi.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new fi(["__name__"])}static fromServerFormat(t){const e=[];let n="",r=0;const s=()=>{if(0===n.length)throw new Qs(Gs.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let i=!1;for(;r<t.length;){const e=t[r];if("\\"===e){if(r+1===t.length)throw new Qs(Gs.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[r+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new Qs(Gs.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,r+=2}else"`"===e?(i=!i,r++):"."!==e||i?(n+=e,r++):(s(),r++)}if(s(),i)throw new Qs(Gs.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new fi(e)}static emptyPath(){return new fi([])}}class pi{constructor(t){this.path=t}static fromPath(t){return new pi(li.fromString(t))}static fromName(t){return new pi(li.fromString(t).popFirst(5))}static empty(){return new pi(li.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===li.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return li.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new pi(new li(t.slice()))}}function gi(t){return new mi(t.readTime,t.key,-1)}class mi{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new mi(ui.min(),pi.empty(),-1)}static max(){return new mi(ui.max(),pi.empty(),-1)}}function yi(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=pi.comparator(t.documentKey,e.documentKey),0!==n?n:oi(t.largestBatchId,e.largestBatchId))}const vi="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wi{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function Ei(t){if(t.code!==Gs.FAILED_PRECONDITION||t.message!==vi)throw t;Bs("LocalStore","Unexpectedly lost primary lease")}class bi{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&zs(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new bi(((n,r)=>{this.nextCallback=e=>{this.wrapSuccess(t,e).next(n,r)},this.catchCallback=t=>{this.wrapFailure(e,t).next(n,r)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof bi?e:bi.resolve(e)}catch(t){return bi.reject(t)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):bi.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):bi.reject(e)}static resolve(t){return new bi(((e,n)=>{e(t)}))}static reject(t){return new bi(((e,n)=>{n(t)}))}static waitFor(t){return new bi(((e,n)=>{let r=0,s=0,i=!1;t.forEach((t=>{++r,t.next((()=>{++s,i&&s===r&&e()}),(t=>n(t)))})),i=!0,s===r&&e()}))}static or(t){let e=bi.resolve(!1);for(const n of t)e=e.next((t=>t?bi.resolve(t):n()));return e}static forEach(t,e){const n=[];return t.forEach(((t,r)=>{n.push(e.call(this,t,r))})),this.waitFor(n)}static mapArray(t,e){return new bi(((n,r)=>{const s=t.length,i=new Array(s);let o=0;for(let a=0;a<s;a++){const c=a;e(t[c]).next((t=>{i[c]=t,++o,o===s&&n(i)}),(t=>r(t)))}}))}static doWhile(t,e){return new bi(((n,r)=>{const s=()=>{!0===t()?e().next((()=>{s()}),r):n()};s()}))}}function _i(t){return"IndexedDbTransactionError"===t.name}class Ti{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this.se(t),this.oe=t=>e.writeSequenceNumber(t))}se(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.oe&&this.oe(t),t}}function Si(t){return null==t}function Ii(t){return 0===t&&1/t==-1/0}Ti._e=-1;function Ci(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ai(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Di(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class ki{constructor(t,e){this.comparator=t,this.root=e||Ri.EMPTY}insert(t,e){return new ki(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Ri.BLACK,null,null))}remove(t){return new ki(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ri.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,n)=>(t(e,n),!1)))}toString(){const t=[];return this.inorderTraversal(((e,n)=>(t.push(`${e}:${n}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Ni(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Ni(this.root,t,this.comparator,!1)}getReverseIterator(){return new Ni(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Ni(this.root,t,this.comparator,!0)}}class Ni{constructor(t,e,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?n(t.key,e):1,e&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(0===s){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ri{constructor(t,e,n,r,s){this.key=t,this.value=e,this.color=null!=n?n:Ri.RED,this.left=null!=r?r:Ri.EMPTY,this.right=null!=s?s:Ri.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,r,s){return new Ri(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let r=this;const s=n(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===s?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ri.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===e(t,r.key)){if(r.right.isEmpty())return Ri.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ri.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ri.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw zs();if(this.right.isRed())throw zs();const t=this.left.check();if(t!==this.right.check())throw zs();return t+(this.isRed()?0:1)}}Ri.EMPTY=null,Ri.RED=!0,Ri.BLACK=!1,Ri.EMPTY=new class{constructor(){this.size=0}get key(){throw zs()}get value(){throw zs()}get color(){throw zs()}get left(){throw zs()}get right(){throw zs()}copy(t,e,n,r,s){return this}insert(t,e,n){return new Ri(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class xi{constructor(t){this.comparator=t,this.data=new ki(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,n)=>(t(e),!1)))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new Oi(this.data.getIterator())}getIteratorFrom(t){return new Oi(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((t=>{e=e.add(t)})),e}isEqual(t){if(!(t instanceof xi))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,r=n.getNext().key;if(0!==this.comparator(t,r))return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new xi(this.comparator);return e.data=t,e}}class Oi{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Li{constructor(t){this.fields=t,t.sort(fi.comparator)}static empty(){return new Li([])}unionWith(t){let e=new xi(fi.comparator);for(const t of this.fields)e=e.add(t);for(const n of t)e=e.add(n);return new Li(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return ai(this.fields,t.fields,((t,e)=>t.isEqual(e)))}}class Mi extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Pi{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(t){try{return atob(t)}catch(t){throw"undefined"!=typeof DOMException&&t instanceof DOMException?new Mi("Invalid base64 string: "+t):t}}(t);return new Pi(e)}static fromUint8Array(t){const e=function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t);return new Pi(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return t=this.binaryString,btoa(t);var t}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return oi(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Pi.EMPTY_BYTE_STRING=new Pi("");const Fi=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vi(t){if(Hs(!!t),"string"==typeof t){let e=0;const n=Fi.exec(t);if(Hs(!!n),n[1]){let t=n[1];t=(t+"000000000").substr(0,9),e=Number(t)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ui(t.seconds),nanos:Ui(t.nanos)}}function Ui(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Bi(t){return"string"==typeof t?Pi.fromBase64String(t):Pi.fromUint8Array(t)}function ji(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function qi(t){const e=t.mapValue.fields.__previous_value__;return ji(e)?qi(e):e}function $i(t){const e=Vi(t.mapValue.fields.__local_write_time__.timestampValue);return new ci(e.seconds,e.nanos)}class zi{constructor(t,e,n,r,s,i,o,a,c){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c}}class Hi{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new Hi("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof Hi&&t.projectId===this.projectId&&t.database===this.database}}const Ki={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Gi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ji(t)?4:oo(t)?9007199254740991:10:zs()}function Qi(t,e){if(t===e)return!0;const n=Gi(t);if(n!==Gi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return $i(t).isEqual($i(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;const n=Vi(t.timestampValue),r=Vi(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Bi(t.bytesValue).isEqual(Bi(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Ui(t.geoPointValue.latitude)===Ui(e.geoPointValue.latitude)&&Ui(t.geoPointValue.longitude)===Ui(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Ui(t.integerValue)===Ui(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){const n=Ui(t.doubleValue),r=Ui(e.doubleValue);return n===r?Ii(n)===Ii(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return ai(t.arrayValue.values||[],e.arrayValue.values||[],Qi);case 10:return function(t,e){const n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Ci(n)!==Ci(r))return!1;for(const t in n)if(n.hasOwnProperty(t)&&(void 0===r[t]||!Qi(n[t],r[t])))return!1;return!0}(t,e);default:return zs()}}function Wi(t,e){return void 0!==(t.values||[]).find((t=>Qi(t,e)))}function Xi(t,e){if(t===e)return 0;const n=Gi(t),r=Gi(e);if(n!==r)return oi(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return oi(t.booleanValue,e.booleanValue);case 2:return function(t,e){const n=Ui(t.integerValue||t.doubleValue),r=Ui(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Yi(t.timestampValue,e.timestampValue);case 4:return Yi($i(t),$i(e));case 5:return oi(t.stringValue,e.stringValue);case 6:return function(t,e){const n=Bi(t),r=Bi(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){const n=t.split("/"),r=e.split("/");for(let t=0;t<n.length&&t<r.length;t++){const e=oi(n[t],r[t]);if(0!==e)return e}return oi(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){const n=oi(Ui(t.latitude),Ui(e.latitude));return 0!==n?n:oi(Ui(t.longitude),Ui(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){const n=t.values||[],r=e.values||[];for(let t=0;t<n.length&&t<r.length;++t){const e=Xi(n[t],r[t]);if(e)return e}return oi(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){if(t===Ki.mapValue&&e===Ki.mapValue)return 0;if(t===Ki.mapValue)return 1;if(e===Ki.mapValue)return-1;const n=t.fields||{},r=Object.keys(n),s=e.fields||{},i=Object.keys(s);r.sort(),i.sort();for(let t=0;t<r.length&&t<i.length;++t){const e=oi(r[t],i[t]);if(0!==e)return e;const o=Xi(n[r[t]],s[i[t]]);if(0!==o)return o}return oi(r.length,i.length)}(t.mapValue,e.mapValue);default:throw zs()}}function Yi(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return oi(t,e);const n=Vi(t),r=Vi(e),s=oi(n.seconds,r.seconds);return 0!==s?s:oi(n.nanos,r.nanos)}function Ji(t){return Zi(t)}function Zi(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){const e=Vi(t);return`time(${e.seconds},${e.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(t){return Bi(t).toBase64()}(t.bytesValue):"referenceValue"in t?function(t){return pi.fromName(t).toString()}(t.referenceValue):"geoPointValue"in t?function(t){return`geo(${t.latitude},${t.longitude})`}(t.geoPointValue):"arrayValue"in t?function(t){let e="[",n=!0;for(const r of t.values||[])n?n=!1:e+=",",e+=Zi(r);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){const e=Object.keys(t.fields||{}).sort();let n="{",r=!0;for(const s of e)r?r=!1:n+=",",n+=`${s}:${Zi(t.fields[s])}`;return n+"}"}(t.mapValue):zs()}function to(t){return!!t&&"integerValue"in t}function eo(t){return!!t&&"arrayValue"in t}function no(t){return!!t&&"nullValue"in t}function ro(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function so(t){return!!t&&"mapValue"in t}function io(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ai(t.mapValue.fields,((t,n)=>e.mapValue.fields[t]=io(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=io(t.arrayValue.values[n]);return e}return Object.assign({},t)}function oo(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}class ao{constructor(t){this.value=t}static empty(){return new ao({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!so(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=io(e)}setAll(t){let e=fi.emptyPath(),n={},r=[];t.forEach(((t,s)=>{if(!e.isImmediateParentOf(s)){const t=this.getFieldsMap(e);this.applyChanges(t,n,r),n={},r=[],e=s.popLast()}t?n[s.lastSegment()]=io(t):r.push(s.lastSegment())}));const s=this.getFieldsMap(e);this.applyChanges(s,n,r)}delete(t){const e=this.field(t.popLast());so(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Qi(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let r=e.mapValue.fields[t.get(n)];so(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,n){Ai(e,((e,n)=>t[e]=n));for(const e of n)delete t[e]}clone(){return new ao(io(this.value))}}function co(t){const e=[];return Ai(t.fields,((t,n)=>{const r=new fi([t]);if(so(n)){const t=co(n.mapValue).fields;if(0===t.length)e.push(r);else for(const n of t)e.push(r.child(n))}else e.push(r)})),new Li(e)}class uo{constructor(t,e,n,r,s,i,o){this.key=t,this.documentType=e,this.version=n,this.readTime=r,this.createTime=s,this.data=i,this.documentState=o}static newInvalidDocument(t){return new uo(t,0,ui.min(),ui.min(),ui.min(),ao.empty(),0)}static newFoundDocument(t,e,n,r){return new uo(t,1,e,ui.min(),n,r,0)}static newNoDocument(t,e){return new uo(t,2,e,ui.min(),ui.min(),ao.empty(),0)}static newUnknownDocument(t,e){return new uo(t,3,e,ui.min(),ui.min(),ao.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(ui.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=ao.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=ao.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ui.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof uo&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new uo(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ho{constructor(t,e){this.position=t,this.inclusive=e}}function lo(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(r=i.field.isKeyField()?pi.comparator(pi.fromName(o.referenceValue),n.key):Xi(o,n.data.field(i.field)),"desc"===i.dir&&(r*=-1),0!==r)break}return r}function fo(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Qi(t.position[n],e.position[n]))return!1;return!0}class po{constructor(t,e="asc"){this.field=t,this.dir=e}}function go(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class mo{}class yo extends mo{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(t,e,n):new So(t,e,n):"array-contains"===e?new Do(t,n):"in"===e?new ko(t,n):"not-in"===e?new No(t,n):"array-contains-any"===e?new Ro(t,n):new yo(t,e,n)}static createKeyFieldInFilter(t,e,n){return"in"===e?new Io(t,n):new Co(t,n)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.matchesComparison(Xi(e,this.value)):null!==e&&Gi(this.value)===Gi(e)&&this.matchesComparison(Xi(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return zs()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class vo extends mo{constructor(t,e){super(),this.filters=t,this.op=e,this.ue=null}static create(t,e){return new vo(t,e)}matches(t){return wo(this)?void 0===this.filters.find((e=>!e.matches(t))):void 0!==this.filters.find((e=>e.matches(t)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function wo(t){return"and"===t.op}function Eo(t){return function(t){for(const e of t.filters)if(e instanceof vo)return!1;return!0}(t)&&wo(t)}function bo(t){if(t instanceof yo)return t.field.canonicalString()+t.op.toString()+Ji(t.value);if(Eo(t))return t.filters.map((t=>bo(t))).join(",");{const e=t.filters.map((t=>bo(t))).join(",");return`${t.op}(${e})`}}function _o(t,e){return t instanceof yo?function(t,e){return e instanceof yo&&t.op===e.op&&t.field.isEqual(e.field)&&Qi(t.value,e.value)}(t,e):t instanceof vo?function(t,e){return e instanceof vo&&t.op===e.op&&t.filters.length===e.filters.length&&t.filters.reduce(((t,n,r)=>t&&_o(n,e.filters[r])),!0)}(t,e):void zs()}function To(t){return t instanceof yo?function(t){return`${t.field.canonicalString()} ${t.op} ${Ji(t.value)}`}(t):t instanceof vo?function(t){return t.op.toString()+" {"+t.getFilters().map(To).join(" ,")+"}"}(t):"Filter"}class So extends yo{constructor(t,e,n){super(t,e,n),this.key=pi.fromName(n.referenceValue)}matches(t){const e=pi.comparator(t.key,this.key);return this.matchesComparison(e)}}class Io extends yo{constructor(t,e){super(t,"in",e),this.keys=Ao(0,e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class Co extends yo{constructor(t,e){super(t,"not-in",e),this.keys=Ao(0,e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function Ao(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((t=>pi.fromName(t.referenceValue)))}class Do extends yo{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return eo(e)&&Wi(e.arrayValue,this.value)}}class ko extends yo{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&Wi(this.value.arrayValue,e)}}class No extends yo{constructor(t,e){super(t,"not-in",e)}matches(t){if(Wi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!Wi(this.value.arrayValue,e)}}class Ro extends yo{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!eo(e)||!e.arrayValue.values)&&e.arrayValue.values.some((t=>Wi(this.value.arrayValue,t)))}}class xo{constructor(t,e=null,n=[],r=[],s=null,i=null,o=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=i,this.endAt=o,this.ce=null}}function Oo(t,e=null,n=[],r=[],s=null,i=null,o=null){return new xo(t,e,n,r,s,i,o)}function Lo(t){const e=Ks(t);if(null===e.ce){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((t=>bo(t))).join(","),t+="|ob:",t+=e.orderBy.map((t=>function(t){return t.field.canonicalString()+t.dir}(t))).join(","),Si(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((t=>Ji(t))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((t=>Ji(t))).join(",")),e.ce=t}return e.ce}function Mo(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!go(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!_o(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!fo(t.startAt,e.startAt)&&fo(t.endAt,e.endAt)}function Po(t){return pi.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}class Fo{constructor(t,e=null,n=[],r=[],s=null,i="F",o=null,a=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=i,this.startAt=o,this.endAt=a,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function Vo(t){return new Fo(t)}function Uo(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function Bo(t){const e=Ks(t);if(null===e.le){e.le=[];const t=new Set;for(const n of e.explicitOrderBy)e.le.push(n),t.add(n.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc",r=function(t){let e=new xi(fi.comparator);return t.filters.forEach((t=>{t.getFlattenedFilters().forEach((t=>{t.isInequality()&&(e=e.add(t.field))}))})),e}(e);r.forEach((r=>{t.has(r.canonicalString())||r.isKeyField()||e.le.push(new po(r,n))})),t.has(fi.keyField().canonicalString())||e.le.push(new po(fi.keyField(),n))}return e.le}function jo(t){const e=Ks(t);return e.he||(e.he=function(t,e){if("F"===t.limitType)return Oo(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((t=>{const e="desc"===t.dir?"asc":"desc";return new po(t.field,e)}));const n=t.endAt?new ho(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ho(t.startAt.position,t.startAt.inclusive):null;return Oo(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}(e,Bo(t))),e.he}function qo(t,e,n){return new Fo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function $o(t,e){return Mo(jo(t),jo(e))&&t.limitType===e.limitType}function zo(t){return`${Lo(jo(t))}|lt:${t.limitType}`}function Ho(t){return`Query(target=${function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map((t=>To(t))).join(", ")}]`),Si(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map((t=>function(t){return`${t.field.canonicalString()} (${t.dir})`}(t))).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((t=>Ji(t))).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((t=>Ji(t))).join(",")),`Target(${e})`}(jo(t))}; limitType=${t.limitType})`}function Ko(t,e){return e.isFoundDocument()&&function(t,e){const n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):pi.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(const n of Bo(t))if(!n.field.isKeyField()&&null===e.data.field(n.field))return!1;return!0}(t,e)&&function(t,e){for(const n of t.filters)if(!n.matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!function(t,e,n){const r=lo(t,e,n);return t.inclusive?r<=0:r<0}(t.startAt,Bo(t),e)||t.endAt&&!function(t,e,n){const r=lo(t,e,n);return t.inclusive?r>=0:r>0}(t.endAt,Bo(t),e))}(t,e)}function Go(t){return(e,n)=>{let r=!1;for(const s of Bo(t)){const t=Qo(s,e,n);if(0!==t)return t;r=r||s.field.isKeyField()}return 0}}function Qo(t,e,n){const r=t.field.isKeyField()?pi.comparator(e.key,n.key):function(t,e,n){const r=e.data.field(t),s=n.data.field(t);return null!==r&&null!==s?Xi(r,s):zs()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return zs()}}class Wo{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(const[e,r]of n)if(this.equalsFn(e,t))return r}has(t){return void 0!==this.get(t)}set(t,e){const n=this.mapKeyFn(t),r=this.inner[n];if(void 0===r)return this.inner[n]=[[t,e]],void this.innerSize++;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],t))return void(r[n]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(t){Ai(this.inner,((e,n)=>{for(const[e,r]of n)t(e,r)}))}isEmpty(){return Di(this.inner)}size(){return this.innerSize}}const Xo=new ki(pi.comparator);function Yo(){return Xo}const Jo=new ki(pi.comparator);function Zo(...t){let e=Jo;for(const n of t)e=e.insert(n.key,n);return e}function ta(t){let e=Jo;return t.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function ea(){return ra()}function na(){return ra()}function ra(){return new Wo((t=>t.toString()),((t,e)=>t.isEqual(e)))}const sa=new ki(pi.comparator),ia=new xi(pi.comparator);function oa(...t){let e=ia;for(const n of t)e=e.add(n);return e}const aa=new xi(oi);function ca(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ii(e)?"-0":e}}function ua(t){return{integerValue:""+t}}function ha(t,e){return function(t){return"number"==typeof t&&Number.isInteger(t)&&!Ii(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}(e)?ua(e):ca(t,e)}class la{constructor(){this._=void 0}}function da(t,e,n){return t instanceof ga?function(t,e){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&ji(e)&&(e=qi(e)),e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof ma?ya(t,e):t instanceof va?wa(t,e):function(t,e){const n=pa(t,e),r=ba(n)+ba(t.Ie);return to(n)&&to(t.Ie)?ua(r):ca(t.serializer,r)}(t,e)}function fa(t,e,n){return t instanceof ma?ya(t,e):t instanceof va?wa(t,e):n}function pa(t,e){return t instanceof Ea?function(t){return to(t)||function(t){return!!t&&"doubleValue"in t}(t)}(e)?e:{integerValue:0}:null}class ga extends la{}class ma extends la{constructor(t){super(),this.elements=t}}function ya(t,e){const n=_a(e);for(const e of t.elements)n.some((t=>Qi(t,e)))||n.push(e);return{arrayValue:{values:n}}}class va extends la{constructor(t){super(),this.elements=t}}function wa(t,e){let n=_a(e);for(const e of t.elements)n=n.filter((t=>!Qi(t,e)));return{arrayValue:{values:n}}}class Ea extends la{constructor(t,e){super(),this.serializer=t,this.Ie=e}}function ba(t){return Ui(t.integerValue||t.doubleValue)}function _a(t){return eo(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Ta{constructor(t,e){this.version=t,this.transformResults=e}}class Sa{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Sa}static exists(t){return new Sa(void 0,t)}static updateTime(t){return new Sa(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Ia(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class Ca{}function Aa(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new Fa(t.key,Sa.none()):new xa(t.key,t.data,Sa.none());{const n=t.data,r=ao.empty();let s=new xi(fi.comparator);for(let t of e.fields)if(!s.has(t)){let e=n.field(t);null===e&&t.length>1&&(t=t.popLast(),e=n.field(t)),null===e?r.delete(t):r.set(t,e),s=s.add(t)}return new Oa(t.key,r,new Li(s.toArray()),Sa.none())}}function Da(t,e,n){t instanceof xa?function(t,e,n){const r=t.value.clone(),s=Ma(t.fieldTransforms,e,n.transformResults);r.setAll(s),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof Oa?function(t,e,n){if(!Ia(t.precondition,e))return void e.convertToUnknownDocument(n.version);const r=Ma(t.fieldTransforms,e,n.transformResults),s=e.data;s.setAll(La(t)),s.setAll(r),e.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function ka(t,e,n,r){return t instanceof xa?function(t,e,n,r){if(!Ia(t.precondition,e))return n;const s=t.value.clone(),i=Pa(t.fieldTransforms,r,e);return s.setAll(i),e.convertToFoundDocument(e.version,s).setHasLocalMutations(),null}(t,e,n,r):t instanceof Oa?function(t,e,n,r){if(!Ia(t.precondition,e))return n;const s=Pa(t.fieldTransforms,r,e),i=e.data;return i.setAll(La(t)),i.setAll(s),e.convertToFoundDocument(e.version,i).setHasLocalMutations(),null===n?null:n.unionWith(t.fieldMask.fields).unionWith(t.fieldTransforms.map((t=>t.field)))}(t,e,n,r):function(t,e,n){return Ia(t.precondition,e)?(e.convertToNoDocument(e.version).setHasLocalMutations(),null):n}(t,e,n)}function Na(t,e){let n=null;for(const r of t.fieldTransforms){const t=e.data.field(r.field),s=pa(r.transform,t||null);null!=s&&(null===n&&(n=ao.empty()),n.set(r.field,s))}return n||null}function Ra(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&ai(t,e,((t,e)=>function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof ma&&e instanceof ma||t instanceof va&&e instanceof va?ai(t.elements,e.elements,Qi):t instanceof Ea&&e instanceof Ea?Qi(t.Ie,e.Ie):t instanceof ga&&e instanceof ga}(t.transform,e.transform)}(t,e)))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class xa extends Ca{constructor(t,e,n,r=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Oa extends Ca{constructor(t,e,n,r,s=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function La(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function Ma(t,e,n){const r=new Map;Hs(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,fa(o,a,n[s]))}return r}function Pa(t,e,n){const r=new Map;for(const s of t){const t=s.transform,i=n.data.field(s.field);r.set(s.field,da(t,i,e))}return r}class Fa extends Ca{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Va extends Ca{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Ua{constructor(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let e=0;e<this.mutations.length;e++){const r=this.mutations[e];r.key.isEqual(t.key)&&Da(r,t,n[e])}}applyToLocalView(t,e){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(e=ka(n,t,e,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(e=ka(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const n=na();return this.mutations.forEach((r=>{const s=t.get(r.key),i=s.overlayedDocument;let o=this.applyToLocalView(i,s.mutatedFields);o=e.has(r.key)?null:o;const a=Aa(i,o);null!==a&&n.set(r.key,a),i.isValidDocument()||i.convertToNoDocument(ui.min())})),n}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),oa())}isEqual(t){return this.batchId===t.batchId&&ai(this.mutations,t.mutations,((t,e)=>Ra(t,e)))&&ai(this.baseMutations,t.baseMutations,((t,e)=>Ra(t,e)))}}class Ba{constructor(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}static from(t,e,n){Hs(t.mutations.length===n.length);let r=sa;const s=t.mutations;for(let t=0;t<s.length;t++)r=r.insert(s[t].key,n[t].version);return new Ba(t,e,n,r)}}class ja{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class qa{constructor(t,e){this.count=t,this.unchangedNames=e}}var $a,za;function Ha(t){if(void 0===t)return js("GRPC error has no .code"),Gs.UNKNOWN;switch(t){case $a.OK:return Gs.OK;case $a.CANCELLED:return Gs.CANCELLED;case $a.UNKNOWN:return Gs.UNKNOWN;case $a.DEADLINE_EXCEEDED:return Gs.DEADLINE_EXCEEDED;case $a.RESOURCE_EXHAUSTED:return Gs.RESOURCE_EXHAUSTED;case $a.INTERNAL:return Gs.INTERNAL;case $a.UNAVAILABLE:return Gs.UNAVAILABLE;case $a.UNAUTHENTICATED:return Gs.UNAUTHENTICATED;case $a.INVALID_ARGUMENT:return Gs.INVALID_ARGUMENT;case $a.NOT_FOUND:return Gs.NOT_FOUND;case $a.ALREADY_EXISTS:return Gs.ALREADY_EXISTS;case $a.PERMISSION_DENIED:return Gs.PERMISSION_DENIED;case $a.FAILED_PRECONDITION:return Gs.FAILED_PRECONDITION;case $a.ABORTED:return Gs.ABORTED;case $a.OUT_OF_RANGE:return Gs.OUT_OF_RANGE;case $a.UNIMPLEMENTED:return Gs.UNIMPLEMENTED;case $a.DATA_LOSS:return Gs.DATA_LOSS;default:return zs()}}(za=$a||($a={}))[za.OK=0]="OK",za[za.CANCELLED=1]="CANCELLED",za[za.UNKNOWN=2]="UNKNOWN",za[za.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",za[za.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",za[za.NOT_FOUND=5]="NOT_FOUND",za[za.ALREADY_EXISTS=6]="ALREADY_EXISTS",za[za.PERMISSION_DENIED=7]="PERMISSION_DENIED",za[za.UNAUTHENTICATED=16]="UNAUTHENTICATED",za[za.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",za[za.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",za[za.ABORTED=10]="ABORTED",za[za.OUT_OF_RANGE=11]="OUT_OF_RANGE",za[za.UNIMPLEMENTED=12]="UNIMPLEMENTED",za[za.INTERNAL=13]="INTERNAL",za[za.UNAVAILABLE=14]="UNAVAILABLE",za[za.DATA_LOSS=15]="DATA_LOSS";const Ka=new Ls([4294967295,4294967295],0);function Ga(t){const e=(new TextEncoder).encode(t),n=new Os;return n.update(e),new Uint8Array(n.digest())}function Qa(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Ls([n,r],0),new Ls([s,i],0)]}class Wa{constructor(t,e,n){if(this.bitmap=t,this.padding=e,this.hashCount=n,e<0||e>=8)throw new Xa(`Invalid padding: ${e}`);if(n<0)throw new Xa(`Invalid hash count: ${n}`);if(t.length>0&&0===this.hashCount)throw new Xa(`Invalid hash count: ${n}`);if(0===t.length&&0!==e)throw new Xa(`Invalid padding when bitmap length is 0: ${e}`);this.Te=8*t.length-e,this.Ee=Ls.fromNumber(this.Te)}de(t,e,n){let r=t.add(e.multiply(Ls.fromNumber(n)));return 1===r.compare(Ka)&&(r=new Ls([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(t){return 0!=(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(0===this.Te)return!1;const e=Ga(t),[n,r]=Qa(e);for(let t=0;t<this.hashCount;t++){const e=this.de(n,r,t);if(!this.Ae(e))return!1}return!0}static create(t,e,n){const r=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),i=new Wa(s,r,e);return n.forEach((t=>i.insert(t))),i}insert(t){if(0===this.Te)return;const e=Ga(t),[n,r]=Qa(e);for(let t=0;t<this.hashCount;t++){const e=this.de(n,r,t);this.Re(e)}}Re(t){const e=Math.floor(t/8),n=t%8;this.bitmap[e]|=1<<n}}class Xa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ya{constructor(t,e,n,r,s){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,e,n){const r=new Map;return r.set(t,Ja.createSynthesizedTargetChangeForCurrentChange(t,e,n)),new Ya(ui.min(),r,new ki(oi),Yo(),oa())}}class Ja{constructor(t,e,n,r,s){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,e,n){return new Ja(n,e,oa(),oa(),oa())}}class Za{constructor(t,e,n,r){this.Ve=t,this.removedTargetIds=e,this.key=n,this.me=r}}class tc{constructor(t,e){this.targetId=t,this.fe=e}}class ec{constructor(t,e,n=Pi.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r}}class nc{constructor(){this.ge=0,this.pe=ic(),this.ye=Pi.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(t){t.approximateByteSize()>0&&(this.Se=!0,this.ye=t)}ve(){let t=oa(),e=oa(),n=oa();return this.pe.forEach(((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:zs()}})),new Ja(this.ye,this.we,t,e,n)}Fe(){this.Se=!1,this.pe=ic()}Me(t,e){this.Se=!0,this.pe=this.pe.insert(t,e)}xe(t){this.Se=!0,this.pe=this.pe.remove(t)}Oe(){this.ge+=1}Ne(){this.ge-=1,Hs(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class rc{constructor(t){this.Le=t,this.ke=new Map,this.qe=Yo(),this.Qe=sc(),this.Ke=new ki(oi)}$e(t){for(const e of t.Ve)t.me&&t.me.isFoundDocument()?this.Ue(e,t.me):this.We(e,t.key,t.me);for(const e of t.removedTargetIds)this.We(e,t.key,t.me)}Ge(t){this.forEachTarget(t,(e=>{const n=this.ze(e);switch(t.state){case 0:this.je(e)&&n.Ce(t.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(t.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(e);break;case 3:this.je(e)&&(n.Be(),n.Ce(t.resumeToken));break;case 4:this.je(e)&&(this.He(e),n.Ce(t.resumeToken));break;default:zs()}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ke.forEach(((t,n)=>{this.je(n)&&e(n)}))}Je(t){const e=t.targetId,n=t.fe.count,r=this.Ye(e);if(r){const s=r.target;if(Po(s))if(0===n){const t=new pi(s.path);this.We(e,t,uo.newNoDocument(t,ui.min()))}else Hs(1===n);else{const r=this.Ze(e);if(r!==n){const n=this.Xe(t),s=n?this.et(n,t,r):1;if(0!==s){this.He(e);const t=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(e,t)}}}}}Xe(t){const e=t.fe.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:s=0}=e;let i,o;try{i=Bi(n).toUint8Array()}catch(t){if(t instanceof Mi)return qs("Decoding the base64 bloom filter in existence filter failed ("+t.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw t}try{o=new Wa(i,r,s)}catch(t){return qs(t instanceof Xa?"BloomFilter error: ":"Applying bloom filter failed: ",t),null}return 0===o.Te?null:o}et(t,e,n){return e.fe.count===n-this.rt(t,e.targetId)?0:2}rt(t,e){const n=this.Le.getRemoteKeysForTarget(e);let r=0;return n.forEach((n=>{const s=this.Le.nt(),i=`projects/${s.projectId}/databases/${s.database}/documents/${n.path.canonicalString()}`;t.mightContain(i)||(this.We(e,n,null),r++)})),r}it(t){const e=new Map;this.ke.forEach(((n,r)=>{const s=this.Ye(r);if(s){if(n.current&&Po(s.target)){const e=new pi(s.target.path);null!==this.qe.get(e)||this.st(r,e)||this.We(r,e,uo.newNoDocument(e,t))}n.De&&(e.set(r,n.ve()),n.Fe())}}));let n=oa();this.Qe.forEach(((t,e)=>{let r=!0;e.forEachWhile((t=>{const e=this.Ye(t);return!e||"TargetPurposeLimboResolution"===e.purpose||(r=!1,!1)})),r&&(n=n.add(t))})),this.qe.forEach(((e,n)=>n.setReadTime(t)));const r=new Ya(t,e,this.Ke,this.qe,n);return this.qe=Yo(),this.Qe=sc(),this.Ke=new ki(oi),r}Ue(t,e){if(!this.je(t))return;const n=this.st(t,e.key)?2:0;this.ze(t).Me(e.key,n),this.qe=this.qe.insert(e.key,e),this.Qe=this.Qe.insert(e.key,this.ot(e.key).add(t))}We(t,e,n){if(!this.je(t))return;const r=this.ze(t);this.st(t,e)?r.Me(e,1):r.xe(e),this.Qe=this.Qe.insert(e,this.ot(e).delete(t)),n&&(this.qe=this.qe.insert(e,n))}removeTarget(t){this.ke.delete(t)}Ze(t){const e=this.ze(t).ve();return this.Le.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Oe(t){this.ze(t).Oe()}ze(t){let e=this.ke.get(t);return e||(e=new nc,this.ke.set(t,e)),e}ot(t){let e=this.Qe.get(t);return e||(e=new xi(oi),this.Qe=this.Qe.insert(t,e)),e}je(t){const e=null!==this.Ye(t);return e||Bs("WatchChangeAggregator","Detected inactive target",t),e}Ye(t){const e=this.ke.get(t);return e&&e.be?null:this.Le._t(t)}He(t){this.ke.set(t,new nc),this.Le.getRemoteKeysForTarget(t).forEach((e=>{this.We(t,e,null)}))}st(t,e){return this.Le.getRemoteKeysForTarget(t).has(e)}}function sc(){return new ki(pi.comparator)}function ic(){return new ki(pi.comparator)}const oc={asc:"ASCENDING",desc:"DESCENDING"},ac={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},cc={and:"AND",or:"OR"};class uc{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function hc(t,e){return t.useProto3Json||Si(e)?e:{value:e}}function lc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function dc(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function fc(t,e){return lc(t,e.toTimestamp())}function pc(t){return Hs(!!t),ui.fromTimestamp(function(t){const e=Vi(t);return new ci(e.seconds,e.nanos)}(t))}function gc(t,e){return function(t){return new li(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function mc(t){const e=li.fromString(t);return Hs(Lc(e)),e}function yc(t,e){return gc(t.databaseId,e.path)}function vc(t,e){const n=mc(e);if(n.get(1)!==t.databaseId.projectId)throw new Qs(Gs.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Qs(Gs.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new pi(bc(n))}function wc(t,e){return gc(t.databaseId,e)}function Ec(t){return new li(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function bc(t){return Hs(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function _c(t,e,n){return{name:yc(t,e),fields:n.value.mapValue.fields}}function Tc(t,e){return{documents:[wc(t,e.path)]}}function Sc(t,e){const n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=wc(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=wc(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(t){if(0!==t.length)return xc(vo.create(t,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const i=function(t){if(0!==t.length)return t.map((t=>function(t){return{field:Nc(t.field),direction:Ac(t.dir)}}(t)))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const o=hc(t,e.limit);return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(t){return{before:t.inclusive,values:t.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(t){return{before:!t.inclusive,values:t.position}}(e.endAt)),n}function Ic(t){let e=function(t){const e=mc(t);return 4===e.length?li.emptyPath():bc(e)}(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Hs(1===r);const t=n.from[0];t.allDescendants?s=t.collectionId:e=e.child(t.collectionId)}let i=[];n.where&&(i=function(t){const e=Cc(t);return e instanceof vo&&Eo(e)?e.getFilters():[e]}(n.where));let o=[];n.orderBy&&(o=function(t){return t.map((t=>function(t){return new po(Rc(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)))}(n.orderBy));let a=null;n.limit&&(a=function(t){let e;return e="object"==typeof t?t.value:t,Si(e)?null:e}(n.limit));let c=null;n.startAt&&(c=function(t){const e=!!t.before,n=t.values||[];return new ho(n,e)}(n.startAt));let u=null;return n.endAt&&(u=function(t){const e=!t.before,n=t.values||[];return new ho(n,e)}(n.endAt)),function(t,e,n,r,s,i,o,a){return new Fo(t,e,n,r,s,i,o,a)}(e,s,o,i,a,"F",c,u)}function Cc(t){return void 0!==t.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const e=Rc(t.unaryFilter.field);return yo.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=Rc(t.unaryFilter.field);return yo.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Rc(t.unaryFilter.field);return yo.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Rc(t.unaryFilter.field);return yo.create(s,"!=",{nullValue:"NULL_VALUE"});default:return zs()}}(t):void 0!==t.fieldFilter?function(t){return yo.create(Rc(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return zs()}}(t.fieldFilter.op),t.fieldFilter.value)}(t):void 0!==t.compositeFilter?function(t){return vo.create(t.compositeFilter.filters.map((t=>Cc(t))),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return zs()}}(t.compositeFilter.op))}(t):zs()}function Ac(t){return oc[t]}function Dc(t){return ac[t]}function kc(t){return cc[t]}function Nc(t){return{fieldPath:t.canonicalString()}}function Rc(t){return fi.fromServerFormat(t.fieldPath)}function xc(t){return t instanceof yo?function(t){if("=="===t.op){if(ro(t.value))return{unaryFilter:{field:Nc(t.field),op:"IS_NAN"}};if(no(t.value))return{unaryFilter:{field:Nc(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(ro(t.value))return{unaryFilter:{field:Nc(t.field),op:"IS_NOT_NAN"}};if(no(t.value))return{unaryFilter:{field:Nc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Nc(t.field),op:Dc(t.op),value:t.value}}}(t):t instanceof vo?function(t){const e=t.getFilters().map((t=>xc(t)));return 1===e.length?e[0]:{compositeFilter:{op:kc(t.op),filters:e}}}(t):zs()}function Oc(t){const e=[];return t.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Lc(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class Mc{constructor(t,e,n,r,s=ui.min(),i=ui.min(),o=Pi.EMPTY_BYTE_STRING,a=null){this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(t){return new Mc(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Mc(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Mc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Mc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class Pc{constructor(t){this.ut=t}}function Fc(t){const e=Ic({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?qo(e,e.limit,"L"):e}class Vc{constructor(){}ht(t,e){this.Pt(t,e),e.It()}Pt(t,e){if("nullValue"in t)this.Tt(e,5);else if("booleanValue"in t)this.Tt(e,10),e.Et(t.booleanValue?1:0);else if("integerValue"in t)this.Tt(e,15),e.Et(Ui(t.integerValue));else if("doubleValue"in t){const n=Ui(t.doubleValue);isNaN(n)?this.Tt(e,13):(this.Tt(e,15),Ii(n)?e.Et(0):e.Et(n))}else if("timestampValue"in t){const n=t.timestampValue;this.Tt(e,20),"string"==typeof n?e.dt(n):(e.dt(`${n.seconds||""}`),e.Et(n.nanos||0))}else if("stringValue"in t)this.At(t.stringValue,e),this.Rt(e);else if("bytesValue"in t)this.Tt(e,30),e.Vt(Bi(t.bytesValue)),this.Rt(e);else if("referenceValue"in t)this.ft(t.referenceValue,e);else if("geoPointValue"in t){const n=t.geoPointValue;this.Tt(e,45),e.Et(n.latitude||0),e.Et(n.longitude||0)}else"mapValue"in t?oo(t)?this.Tt(e,Number.MAX_SAFE_INTEGER):(this.gt(t.mapValue,e),this.Rt(e)):"arrayValue"in t?(this.yt(t.arrayValue,e),this.Rt(e)):zs()}At(t,e){this.Tt(e,25),this.wt(t,e)}wt(t,e){e.dt(t)}gt(t,e){const n=t.fields||{};this.Tt(e,55);for(const t of Object.keys(n))this.At(t,e),this.Pt(n[t],e)}yt(t,e){const n=t.values||[];this.Tt(e,50);for(const t of n)this.Pt(t,e)}ft(t,e){this.Tt(e,37),pi.fromName(t).path.forEach((t=>{this.Tt(e,60),this.wt(t,e)}))}Tt(t,e){t.Et(e)}Rt(t){t.Et(2)}}Vc.St=new Vc;class Uc{constructor(){this.on=new Bc}addToCollectionParentIndex(t,e){return this.on.add(e),bi.resolve()}getCollectionParents(t,e){return bi.resolve(this.on.getEntries(e))}addFieldIndex(t,e){return bi.resolve()}deleteFieldIndex(t,e){return bi.resolve()}deleteAllFieldIndexes(t){return bi.resolve()}createTargetIndexes(t,e){return bi.resolve()}getDocumentsMatchingTarget(t,e){return bi.resolve(null)}getIndexType(t,e){return bi.resolve(0)}getFieldIndexes(t,e){return bi.resolve([])}getNextCollectionGroupToUpdate(t){return bi.resolve(null)}getMinOffset(t,e){return bi.resolve(mi.min())}getMinOffsetFromCollectionGroup(t,e){return bi.resolve(mi.min())}updateCollectionGroup(t,e,n){return bi.resolve()}updateIndexEntries(t,e){return bi.resolve()}}class Bc{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new xi(li.comparator),s=!r.has(n);return this.index[e]=r.add(n),s}has(t){const e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)}getEntries(t){return(this.index[t]||new xi(li.comparator)).toArray()}}new Uint8Array(0);class jc{constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new jc(t,jc.DEFAULT_COLLECTION_PERCENTILE,jc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}jc.DEFAULT_COLLECTION_PERCENTILE=10,jc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,jc.DEFAULT=new jc(41943040,jc.DEFAULT_COLLECTION_PERCENTILE,jc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),jc.DISABLED=new jc(-1,0,0);class qc{constructor(t){this.xn=t}next(){return this.xn+=2,this.xn}static On(){return new qc(0)}static Nn(){return new qc(-1)}}class $c{constructor(){this.changes=new Wo((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,uo.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return void 0!==n?bi.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class zc{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class Hc{constructor(t,e,n,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=r}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next((r=>(n=r,this.remoteDocumentCache.getEntry(t,e)))).next((t=>(null!==n&&ka(n.mutation,t,Li.empty(),ci.now()),t)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.getLocalViewOfDocuments(t,e,oa()).next((()=>e))))}getLocalViewOfDocuments(t,e,n=oa()){const r=ea();return this.populateOverlays(t,r,e).next((()=>this.computeViews(t,e,r,n).next((t=>{let e=Zo();return t.forEach(((t,n)=>{e=e.insert(t,n.overlayedDocument)})),e}))))}getOverlayedDocuments(t,e){const n=ea();return this.populateOverlays(t,n,e).next((()=>this.computeViews(t,e,n,oa())))}populateOverlays(t,e,n){const r=[];return n.forEach((t=>{e.has(t)||r.push(t)})),this.documentOverlayCache.getOverlays(t,r).next((t=>{t.forEach(((t,n)=>{e.set(t,n)}))}))}computeViews(t,e,n,r){let s=Yo();const i=ra(),o=ra();return e.forEach(((t,e)=>{const o=n.get(e.key);r.has(e.key)&&(void 0===o||o.mutation instanceof Oa)?s=s.insert(e.key,e):void 0!==o?(i.set(e.key,o.mutation.getFieldMask()),ka(o.mutation,e,o.mutation.getFieldMask(),ci.now())):i.set(e.key,Li.empty())})),this.recalculateAndSaveOverlays(t,s).next((t=>(t.forEach(((t,e)=>i.set(t,e))),e.forEach(((t,e)=>{var n;return o.set(t,new zc(e,null!==(n=i.get(t))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(t,e){const n=ra();let r=new ki(((t,e)=>t-e)),s=oa();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((t=>{for(const s of t)s.keys().forEach((t=>{const i=e.get(t);if(null===i)return;let o=n.get(t)||Li.empty();o=s.applyToLocalView(i,o),n.set(t,o);const a=(r.get(s.batchId)||oa()).add(t);r=r.insert(s.batchId,a)}))})).next((()=>{const i=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,c=r.value,u=na();c.forEach((t=>{if(!s.has(t)){const r=Aa(e.get(t),n.get(t));null!==r&&u.set(t,r),s=s.add(t)}})),i.push(this.documentOverlayCache.saveOverlays(t,a,u))}return bi.waitFor(i)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.recalculateAndSaveOverlays(t,e)))}getDocumentsMatchingQuery(t,e,n,r){return function(t){return pi.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):function(t){return null!==t.collectionGroup}(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n,r):this.getDocumentsMatchingCollectionQuery(t,e,n,r)}getNextDocuments(t,e,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,r).next((s=>{const i=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,r-s.size):bi.resolve(ea());let o=-1,a=s;return i.next((e=>bi.forEach(e,((e,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),s.get(e)?bi.resolve():this.remoteDocumentCache.getEntry(t,e).next((t=>{a=a.insert(e,t)}))))).next((()=>this.populateOverlays(t,e,s))).next((()=>this.computeViews(t,a,e,oa()))).next((t=>({batchId:o,changes:ta(t)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new pi(e)).next((t=>{let e=Zo();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))}getDocumentsMatchingCollectionGroupQuery(t,e,n,r){const s=e.collectionGroup;let i=Zo();return this.indexManager.getCollectionParents(t,s).next((o=>bi.forEach(o,(o=>{const a=function(t,e){return new Fo(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,o.child(s));return this.getDocumentsMatchingCollectionQuery(t,a,n,r).next((t=>{t.forEach(((t,e)=>{i=i.insert(t,e)}))}))})).next((()=>i))))}getDocumentsMatchingCollectionQuery(t,e,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next((i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,s,r)))).next((t=>{s.forEach(((e,n)=>{const r=n.getKey();null===t.get(r)&&(t=t.insert(r,uo.newInvalidDocument(r)))}));let n=Zo();return t.forEach(((t,r)=>{const i=s.get(t);void 0!==i&&ka(i.mutation,r,Li.empty(),ci.now()),Ko(e,r)&&(n=n.insert(t,r))})),n}))}}class Kc{constructor(t){this.serializer=t,this.ur=new Map,this.cr=new Map}getBundleMetadata(t,e){return bi.resolve(this.ur.get(e))}saveBundleMetadata(t,e){return this.ur.set(e.id,function(t){return{id:t.id,version:t.version,createTime:pc(t.createTime)}}(e)),bi.resolve()}getNamedQuery(t,e){return bi.resolve(this.cr.get(e))}saveNamedQuery(t,e){return this.cr.set(e.name,function(t){return{name:t.name,query:Fc(t.bundledQuery),readTime:pc(t.readTime)}}(e)),bi.resolve()}}class Gc{constructor(){this.overlays=new ki(pi.comparator),this.lr=new Map}getOverlay(t,e){return bi.resolve(this.overlays.get(e))}getOverlays(t,e){const n=ea();return bi.forEach(e,(e=>this.getOverlay(t,e).next((t=>{null!==t&&n.set(e,t)})))).next((()=>n))}saveOverlays(t,e,n){return n.forEach(((n,r)=>{this.lt(t,e,r)})),bi.resolve()}removeOverlaysForBatchId(t,e,n){const r=this.lr.get(n);return void 0!==r&&(r.forEach((t=>this.overlays=this.overlays.remove(t))),this.lr.delete(n)),bi.resolve()}getOverlaysForCollection(t,e,n){const r=ea(),s=e.length+1,i=new pi(e.child("")),o=this.overlays.getIteratorFrom(i);for(;o.hasNext();){const t=o.getNext().value,i=t.getKey();if(!e.isPrefixOf(i.path))break;i.path.length===s&&t.largestBatchId>n&&r.set(t.getKey(),t)}return bi.resolve(r)}getOverlaysForCollectionGroup(t,e,n,r){let s=new ki(((t,e)=>t-e));const i=this.overlays.getIterator();for(;i.hasNext();){const t=i.getNext().value;if(t.getKey().getCollectionGroup()===e&&t.largestBatchId>n){let e=s.get(t.largestBatchId);null===e&&(e=ea(),s=s.insert(t.largestBatchId,e)),e.set(t.getKey(),t)}}const o=ea(),a=s.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((t,e)=>o.set(t,e))),!(o.size()>=r)););return bi.resolve(o)}lt(t,e,n){const r=this.overlays.get(n.key);if(null!==r){const t=this.lr.get(r.largestBatchId).delete(n.key);this.lr.set(r.largestBatchId,t)}this.overlays=this.overlays.insert(n.key,new ja(e,n));let s=this.lr.get(e);void 0===s&&(s=oa(),this.lr.set(e,s)),this.lr.set(e,s.add(n.key))}}class Qc{constructor(){this.hr=new xi(Wc.Pr),this.Ir=new xi(Wc.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(t,e){const n=new Wc(t,e);this.hr=this.hr.add(n),this.Ir=this.Ir.add(n)}Er(t,e){t.forEach((t=>this.addReference(t,e)))}removeReference(t,e){this.dr(new Wc(t,e))}Ar(t,e){t.forEach((t=>this.removeReference(t,e)))}Rr(t){const e=new pi(new li([])),n=new Wc(e,t),r=new Wc(e,t+1),s=[];return this.Ir.forEachInRange([n,r],(t=>{this.dr(t),s.push(t.key)})),s}Vr(){this.hr.forEach((t=>this.dr(t)))}dr(t){this.hr=this.hr.delete(t),this.Ir=this.Ir.delete(t)}mr(t){const e=new pi(new li([])),n=new Wc(e,t),r=new Wc(e,t+1);let s=oa();return this.Ir.forEachInRange([n,r],(t=>{s=s.add(t.key)})),s}containsKey(t){const e=new Wc(t,0),n=this.hr.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}class Wc{constructor(t,e){this.key=t,this.gr=e}static Pr(t,e){return pi.comparator(t.key,e.key)||oi(t.gr,e.gr)}static Tr(t,e){return oi(t.gr,e.gr)||pi.comparator(t.key,e.key)}}class Xc{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.pr=1,this.yr=new xi(Wc.Pr)}checkEmpty(t){return bi.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,n,r){const s=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new Ua(s,e,n,r);this.mutationQueue.push(i);for(const e of r)this.yr=this.yr.add(new Wc(e.key,s)),this.indexManager.addToCollectionParentIndex(t,e.key.path.popLast());return bi.resolve(i)}lookupMutationBatch(t,e){return bi.resolve(this.wr(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,r=this.Sr(n),s=r<0?0:r;return bi.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return bi.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(t){return bi.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new Wc(e,0),r=new Wc(e,Number.POSITIVE_INFINITY),s=[];return this.yr.forEachInRange([n,r],(t=>{const e=this.wr(t.gr);s.push(e)})),bi.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new xi(oi);return e.forEach((t=>{const e=new Wc(t,0),r=new Wc(t,Number.POSITIVE_INFINITY);this.yr.forEachInRange([e,r],(t=>{n=n.add(t.gr)}))})),bi.resolve(this.br(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,r=n.length+1;let s=n;pi.isDocumentKey(s)||(s=s.child(""));const i=new Wc(new pi(s),0);let o=new xi(oi);return this.yr.forEachWhile((t=>{const e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(o=o.add(t.gr)),!0)}),i),bi.resolve(this.br(o))}br(t){const e=[];return t.forEach((t=>{const n=this.wr(t);null!==n&&e.push(n)})),e}removeMutationBatch(t,e){Hs(0===this.Dr(e.batchId,"removed")),this.mutationQueue.shift();let n=this.yr;return bi.forEach(e.mutations,(r=>{const s=new Wc(r.key,e.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)})).next((()=>{this.yr=n}))}Fn(t){}containsKey(t,e){const n=new Wc(e,0),r=this.yr.firstAfterOrEqual(n);return bi.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,bi.resolve()}Dr(t,e){return this.Sr(t)}Sr(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}wr(t){const e=this.Sr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class Yc{constructor(t){this.Cr=t,this.docs=new ki(pi.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const n=e.key,r=this.docs.get(n),s=r?r.size:0,i=this.Cr(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return bi.resolve(n?n.document.mutableCopy():uo.newInvalidDocument(e))}getEntries(t,e){let n=Yo();return e.forEach((t=>{const e=this.docs.get(t);n=n.insert(t,e?e.document.mutableCopy():uo.newInvalidDocument(t))})),bi.resolve(n)}getDocumentsMatchingQuery(t,e,n,r){let s=Yo();const i=e.path,o=new pi(i.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:t,value:{document:o}}=a.getNext();if(!i.isPrefixOf(t.path))break;t.path.length>i.length+1||yi(gi(o),n)<=0||(r.has(o.key)||Ko(e,o))&&(s=s.insert(o.key,o.mutableCopy()))}return bi.resolve(s)}getAllFromCollectionGroup(t,e,n,r){zs()}vr(t,e){return bi.forEach(this.docs,(t=>e(t)))}newChangeBuffer(t){return new Jc(this)}getSize(t){return bi.resolve(this.size)}}class Jc extends $c{constructor(t){super(),this._r=t}applyChanges(t){const e=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?e.push(this._r.addEntry(t,r)):this._r.removeEntry(n)})),bi.waitFor(e)}getFromCache(t,e){return this._r.getEntry(t,e)}getAllFromCache(t,e){return this._r.getEntries(t,e)}}class Zc{constructor(t){this.persistence=t,this.Fr=new Wo((t=>Lo(t)),Mo),this.lastRemoteSnapshotVersion=ui.min(),this.highestTargetId=0,this.Mr=0,this.Or=new Qc,this.targetCount=0,this.Nr=qc.On()}forEachTarget(t,e){return this.Fr.forEach(((t,n)=>e(n))),bi.resolve()}getLastRemoteSnapshotVersion(t){return bi.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return bi.resolve(this.Mr)}allocateTargetId(t){return this.highestTargetId=this.Nr.next(),bi.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Mr&&(this.Mr=e),bi.resolve()}kn(t){this.Fr.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Nr=new qc(e),this.highestTargetId=e),t.sequenceNumber>this.Mr&&(this.Mr=t.sequenceNumber)}addTargetData(t,e){return this.kn(e),this.targetCount+=1,bi.resolve()}updateTargetData(t,e){return this.kn(e),bi.resolve()}removeTargetData(t,e){return this.Fr.delete(e.target),this.Or.Rr(e.targetId),this.targetCount-=1,bi.resolve()}removeTargets(t,e,n){let r=0;const s=[];return this.Fr.forEach(((i,o)=>{o.sequenceNumber<=e&&null===n.get(o.targetId)&&(this.Fr.delete(i),s.push(this.removeMatchingKeysForTargetId(t,o.targetId)),r++)})),bi.waitFor(s).next((()=>r))}getTargetCount(t){return bi.resolve(this.targetCount)}getTargetData(t,e){const n=this.Fr.get(e)||null;return bi.resolve(n)}addMatchingKeys(t,e,n){return this.Or.Er(e,n),bi.resolve()}removeMatchingKeys(t,e,n){this.Or.Ar(e,n);const r=this.persistence.referenceDelegate,s=[];return r&&e.forEach((e=>{s.push(r.markPotentiallyOrphaned(t,e))})),bi.waitFor(s)}removeMatchingKeysForTargetId(t,e){return this.Or.Rr(e),bi.resolve()}getMatchingKeysForTargetId(t,e){const n=this.Or.mr(e);return bi.resolve(n)}containsKey(t,e){return bi.resolve(this.Or.containsKey(e))}}class tu{constructor(t,e){this.Br={},this.overlays={},this.Lr=new Ti(0),this.kr=!1,this.kr=!0,this.referenceDelegate=t(this),this.qr=new Zc(this),this.indexManager=new Uc,this.remoteDocumentCache=function(t){return new Yc(t)}((t=>this.referenceDelegate.Qr(t))),this.serializer=new Pc(e),this.Kr=new Kc(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new Gc,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.Br[t.toKey()];return n||(n=new Xc(e,this.referenceDelegate),this.Br[t.toKey()]=n),n}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(t,e,n){Bs("MemoryPersistence","Starting transaction:",t);const r=new eu(this.Lr.next());return this.referenceDelegate.$r(),n(r).next((t=>this.referenceDelegate.Ur(r).next((()=>t)))).toPromise().then((t=>(r.raiseOnCommittedEvent(),t)))}Wr(t,e){return bi.or(Object.values(this.Br).map((n=>()=>n.containsKey(t,e))))}}class eu extends wi{constructor(t){super(),this.currentSequenceNumber=t}}class nu{constructor(t){this.persistence=t,this.Gr=new Qc,this.zr=null}static jr(t){return new nu(t)}get Hr(){if(this.zr)return this.zr;throw zs()}addReference(t,e,n){return this.Gr.addReference(n,e),this.Hr.delete(n.toString()),bi.resolve()}removeReference(t,e,n){return this.Gr.removeReference(n,e),this.Hr.add(n.toString()),bi.resolve()}markPotentiallyOrphaned(t,e){return this.Hr.add(e.toString()),bi.resolve()}removeTarget(t,e){this.Gr.Rr(e.targetId).forEach((t=>this.Hr.add(t.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next((t=>{t.forEach((t=>this.Hr.add(t.toString())))})).next((()=>n.removeTargetData(t,e)))}$r(){this.zr=new Set}Ur(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return bi.forEach(this.Hr,(n=>{const r=pi.fromPath(n);return this.Jr(t,r).next((t=>{t||e.removeEntry(r,ui.min())}))})).next((()=>(this.zr=null,e.apply(t))))}updateLimboDocument(t,e){return this.Jr(t,e).next((t=>{t?this.Hr.delete(e.toString()):this.Hr.add(e.toString())}))}Qr(t){return 0}Jr(t,e){return bi.or([()=>bi.resolve(this.Gr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Wr(t,e)])}}class ru{constructor(t,e,n,r){this.targetId=t,this.fromCache=e,this.ki=n,this.qi=r}static Qi(t,e){let n=oa(),r=oa();for(const t of e.docChanges)switch(t.type){case 0:n=n.add(t.doc.key);break;case 1:r=r.add(t.doc.key)}return new ru(t,e.fromCache,n,r)}}class su{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class iu{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(t,e){this.Gi=t,this.indexManager=e,this.Ki=!0}getDocumentsMatchingQuery(t,e,n,r){const s={result:null};return this.zi(t,e).next((t=>{s.result=t})).next((()=>{if(!s.result)return this.ji(t,e,r,n).next((t=>{s.result=t}))})).next((()=>{if(s.result)return;const n=new su;return this.Hi(t,e,n).next((r=>{if(s.result=r,this.$i)return this.Ji(t,e,n,r.size)}))})).next((()=>s.result))}Ji(t,e,n,r){return n.documentReadCount<this.Ui?(Us()<=b.DEBUG&&Bs("QueryEngine","SDK will not create cache indexes for query:",Ho(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),bi.resolve()):(Us()<=b.DEBUG&&Bs("QueryEngine","Query:",Ho(e),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Wi*r?(Us()<=b.DEBUG&&Bs("QueryEngine","The SDK decides to create cache indexes for query:",Ho(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,jo(e))):bi.resolve())}zi(t,e){if(Uo(e))return bi.resolve(null);let n=jo(e);return this.indexManager.getIndexType(t,n).next((r=>0===r?null:(null!==e.limit&&1===r&&(e=qo(e,null,"F"),n=jo(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next((r=>{const s=oa(...r);return this.Gi.getDocuments(t,s).next((r=>this.indexManager.getMinOffset(t,n).next((n=>{const i=this.Yi(e,r);return this.Zi(e,i,s,n.readTime)?this.zi(t,qo(e,null,"F")):this.Xi(t,i,e,n)}))))})))))}ji(t,e,n,r){return Uo(e)||r.isEqual(ui.min())?bi.resolve(null):this.Gi.getDocuments(t,n).next((s=>{const i=this.Yi(e,s);return this.Zi(e,i,n,r)?bi.resolve(null):(Us()<=b.DEBUG&&Bs("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ho(e)),this.Xi(t,i,e,function(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ui.fromTimestamp(1e9===r?new ci(n+1,0):new ci(n,r));return new mi(s,pi.empty(),e)}(r,-1)).next((t=>t)))}))}Yi(t,e){let n=new xi(Go(t));return e.forEach(((e,r)=>{Ko(t,r)&&(n=n.add(r))})),n}Zi(t,e,n,r){if(null===t.limit)return!1;if(n.size!==e.size)return!0;const s="F"===t.limitType?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Hi(t,e,n){return Us()<=b.DEBUG&&Bs("QueryEngine","Using full collection scan to execute query:",Ho(e)),this.Gi.getDocumentsMatchingQuery(t,e,mi.min(),n)}Xi(t,e,n,r){return this.Gi.getDocumentsMatchingQuery(t,n,r).next((t=>(e.forEach((e=>{t=t.insert(e.key,e)})),t)))}}class ou{constructor(t,e,n,r){this.persistence=t,this.es=e,this.serializer=r,this.ts=new ki(oi),this.ns=new Wo((t=>Lo(t)),Mo),this.rs=new Map,this.ss=t.getRemoteDocumentCache(),this.qr=t.getTargetCache(),this.Kr=t.getBundleCache(),this.os(n)}os(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Hc(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.ts)))}}async function au(t,e){const n=Ks(t);return await n.persistence.runTransaction("Handle user change","readonly",(t=>{let r;return n.mutationQueue.getAllMutationBatches(t).next((s=>(r=s,n.os(e),n.mutationQueue.getAllMutationBatches(t)))).next((e=>{const s=[],i=[];let o=oa();for(const t of r){s.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}for(const t of e){i.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}return n.localDocuments.getDocuments(t,o).next((t=>({_s:t,removedBatchIds:s,addedBatchIds:i})))}))}))}function cu(t){const e=Ks(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.qr.getLastRemoteSnapshotVersion(t)))}function uu(t,e){const n=Ks(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(t=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(t,e))))}async function hu(t,e,n){const r=Ks(t),s=r.ts.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,(t=>r.persistence.referenceDelegate.removeTarget(t,s)))}catch(t){if(!_i(t))throw t;Bs("LocalStore",`Failed to update sequence numbers for target ${e}: ${t}`)}r.ts=r.ts.remove(e),r.ns.delete(s.target)}function lu(t,e,n){const r=Ks(t);let s=ui.min(),i=oa();return r.persistence.runTransaction("Execute query","readwrite",(t=>function(t,e,n){const r=Ks(t),s=r.ns.get(n);return void 0!==s?bi.resolve(r.ts.get(s)):r.qr.getTargetData(e,n)}(r,t,jo(e)).next((e=>{if(e)return s=e.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(t,e.targetId).next((t=>{i=t}))})).next((()=>r.es.getDocumentsMatchingQuery(t,e,n?s:ui.min(),n?i:oa()))).next((t=>(function(t,e,n){let r=t.rs.get(e)||ui.min();n.forEach(((t,e)=>{e.readTime.compareTo(r)>0&&(r=e.readTime)})),t.rs.set(e,r)}(r,function(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}(e),t),{documents:t,ls:i})))))}class du{constructor(){this.activeTargetIds=aa}ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}As(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Es(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class fu{constructor(){this.eo=new du,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t){return this.eo.ds(t),this.no[t]||"not-current"}updateQueryState(t,e,n){this.no[t]=e}removeLocalQueryTarget(t){this.eo.As(t)}isLocalQueryTarget(t){return this.eo.activeTargetIds.has(t)}clearQueryState(t){delete this.no[t]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(t){return this.eo.activeTargetIds.has(t)}start(){return this.eo=new du,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class pu{ro(t){}shutdown(){}}class gu{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(t){this.ao.push(t)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){Bs("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.ao)t(0)}_o(){Bs("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.ao)t(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let mu=null;function yu(){return null===mu?mu=268435456+Math.round(2147483648*Math.random()):mu++,"0x"+mu.toString(16)}const vu={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class wu{constructor(t){this.co=t.co,this.lo=t.lo}ho(t){this.Po=t}Io(t){this.To=t}onMessage(t){this.Eo=t}close(){this.lo()}send(t){this.co(t)}Ao(){this.Po()}Ro(t){this.To(t)}Vo(t){this.Eo(t)}}const Eu="WebChannelConnection";class bu extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.mo=e+"://"+t.host,this.fo=`projects/${n}/databases/${r}`,this.po="(default)"===this.databaseId.database?`project_id=${n}`:`project_id=${n}&database_id=${r}`}get yo(){return!1}wo(t,e,n,r,s){const i=yu(),o=this.So(t,e);Bs("RestConnection",`Sending RPC '${t}' ${i}:`,o,n);const a={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(a,r,s),this.Do(t,o,a,n).then((e=>(Bs("RestConnection",`Received RPC '${t}' ${i}: `,e),e)),(e=>{throw qs("RestConnection",`RPC '${t}' ${i} failed with error: `,e,"url: ",o,"request:",n),e}))}Co(t,e,n,r,s,i){return this.wo(t,e,n,r,s)}bo(t,e,n){t["X-Goog-Api-Client"]="gl-js/ fire/"+Fs,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((e,n)=>t[n]=e)),n&&n.headers.forEach(((e,n)=>t[n]=e))}So(t,e){const n=vu[t];return`${this.mo}/v1/${e}:${n}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Do(t,e,n,r){const s=yu();return new Promise(((i,o)=>{const a=new xs;a.setWithCredentials(!0),a.listenOnce(Ds.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case As.NO_ERROR:const e=a.getResponseJson();Bs(Eu,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(e)),i(e);break;case As.TIMEOUT:Bs(Eu,`RPC '${t}' ${s} timed out`),o(new Qs(Gs.DEADLINE_EXCEEDED,"Request time out"));break;case As.HTTP_ERROR:const n=a.getStatus();if(Bs(Eu,`RPC '${t}' ${s} failed with status:`,n,"response text:",a.getResponseText()),n>0){let t=a.getResponseJson();Array.isArray(t)&&(t=t[0]);const e=null==t?void 0:t.error;if(e&&e.status&&e.message){const t=function(t){const e=t.toLowerCase().replace(/_/g,"-");return Object.values(Gs).indexOf(e)>=0?e:Gs.UNKNOWN}(e.status);o(new Qs(t,e.message))}else o(new Qs(Gs.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Qs(Gs.UNAVAILABLE,"Connection failed."));break;default:zs()}}finally{Bs(Eu,`RPC '${t}' ${s} completed.`)}}));const c=JSON.stringify(r);Bs(Eu,`RPC '${t}' ${s} sending request:`,r),a.send(e,"POST",c,n,15)}))}vo(t,e,n){const r=yu(),s=[this.mo,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=Is(),o=Cs(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.useFetchStreams=!0),this.bo(a.initMessageHeaders,e,n),a.encodeInitMessageHeaders=!0;const u=s.join("");Bs(Eu,`Creating RPC '${t}' stream ${r}: ${u}`,a);const h=i.createWebChannel(u,a);let l=!1,d=!1;const f=new wu({co:e=>{d?Bs(Eu,`Not sending because RPC '${t}' stream ${r} is closed:`,e):(l||(Bs(Eu,`Opening RPC '${t}' stream ${r} transport.`),h.open(),l=!0),Bs(Eu,`RPC '${t}' stream ${r} sending:`,e),h.send(e))},lo:()=>h.close()}),p=(t,e,n)=>{t.listen(e,(t=>{try{n(t)}catch(t){setTimeout((()=>{throw t}),0)}}))};return p(h,Rs.EventType.OPEN,(()=>{d||Bs(Eu,`RPC '${t}' stream ${r} transport opened.`)})),p(h,Rs.EventType.CLOSE,(()=>{d||(d=!0,Bs(Eu,`RPC '${t}' stream ${r} transport closed`),f.Ro())})),p(h,Rs.EventType.ERROR,(e=>{d||(d=!0,qs(Eu,`RPC '${t}' stream ${r} transport errored:`,e),f.Ro(new Qs(Gs.UNAVAILABLE,"The operation could not be completed")))})),p(h,Rs.EventType.MESSAGE,(e=>{var n;if(!d){const s=e.data[0];Hs(!!s);const i=s,o=i.error||(null===(n=i[0])||void 0===n?void 0:n.error);if(o){Bs(Eu,`RPC '${t}' stream ${r} received error:`,o);const e=o.status;let n=function(t){const e=$a[t];if(void 0!==e)return Ha(e)}(e),s=o.message;void 0===n&&(n=Gs.INTERNAL,s="Unknown error status: "+e+" with message "+o.message),d=!0,f.Ro(new Qs(n,s)),h.close()}else Bs(Eu,`RPC '${t}' stream ${r} received:`,s),f.Vo(s)}})),p(o,ks.STAT_EVENT,(e=>{e.stat===Ns.PROXY?Bs(Eu,`RPC '${t}' stream ${r} detected buffering proxy`):e.stat===Ns.NOPROXY&&Bs(Eu,`RPC '${t}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{f.Ao()}),0),f}}function _u(){return"undefined"!=typeof document?document:null}function Tu(t){return new uc(t,!0)}class Su{constructor(t,e,n=1e3,r=1.5,s=6e4){this.si=t,this.timerId=e,this.Fo=n,this.Mo=r,this.xo=s,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(t){this.cancel();const e=Math.floor(this.Oo+this.qo()),n=Math.max(0,Date.now()-this.Bo),r=Math.max(0,e-n);r>0&&Bs("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Oo} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,r,(()=>(this.Bo=Date.now(),t()))),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){null!==this.No&&(this.No.skipDelay(),this.No=null)}cancel(){null!==this.No&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}class Iu{constructor(t,e,n,r,s,i,o,a){this.si=t,this.Ko=n,this.$o=r,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new Su(t,e)}jo(){return 1===this.state||5===this.state||this.Ho()}Ho(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Jo()}async stop(){this.jo()&&await this.close(0)}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&null===this.Wo&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,(()=>this.Xo())))}e_(t){this.t_(),this.stream.send(t)}async Xo(){if(this.Ho())return this.close(0)}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}async close(t,e){this.t_(),this.n_(),this.zo.cancel(),this.Uo++,4!==t?this.zo.reset():e&&e.code===Gs.RESOURCE_EXHAUSTED?(js(e.toString()),js("Using maximum backoff delay to prevent overloading the backend."),this.zo.Lo()):e&&e.code===Gs.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.r_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Io(e)}r_(){}auth(){this.state=1;const t=this.i_(this.Uo),e=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([t,n])=>{this.Uo===e&&this.s_(t,n)}),(e=>{t((()=>{const t=new Qs(Gs.UNKNOWN,"Fetching auth token failed: "+e.message);return this.o_(t)}))}))}s_(t,e){const n=this.i_(this.Uo);this.stream=this.__(t,e),this.stream.ho((()=>{n((()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,(()=>(this.Ho()&&(this.state=3),Promise.resolve()))),this.listener.ho())))})),this.stream.Io((t=>{n((()=>this.o_(t)))})),this.stream.onMessage((t=>{n((()=>this.onMessage(t)))}))}Jo(){this.state=5,this.zo.ko((async()=>{this.state=0,this.start()}))}o_(t){return Bs("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}i_(t){return e=>{this.si.enqueueAndForget((()=>this.Uo===t?e():(Bs("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Cu extends Iu{constructor(t,e,n,r,s,i){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,r,i),this.serializer=s}__(t,e){return this.connection.vo("Listen",t,e)}onMessage(t){this.zo.reset();const e=function(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:zs()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(t,e){return t.useProto3Json?(Hs(void 0===e||"string"==typeof e),Pi.fromBase64String(e||"")):(Hs(void 0===e||e instanceof Uint8Array),Pi.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(t){const e=void 0===t.code?Gs.UNKNOWN:Ha(t.code);return new Qs(e,t.message||"")}(o);n=new ec(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=vc(t,r.document.name),i=pc(r.document.updateTime),o=r.document.createTime?pc(r.document.createTime):ui.min(),a=new ao({mapValue:{fields:r.document.fields}}),c=uo.newFoundDocument(s,i,o,a),u=r.targetIds||[],h=r.removedTargetIds||[];n=new Za(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=vc(t,r.document),i=r.readTime?pc(r.readTime):ui.min(),o=uo.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Za([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=vc(t,r.document),i=r.removedTargetIds||[];n=new Za([],i,s,null)}else{if(!("filter"in e))return zs();{e.filter;const t=e.filter;t.targetId;const{count:r=0,unchangedNames:s}=t,i=new qa(r,s),o=t.targetId;n=new tc(o,i)}}return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return ui.min();const e=t.targetChange;return e.targetIds&&e.targetIds.length?ui.min():e.readTime?pc(e.readTime):ui.min()}(t);return this.listener.a_(e,n)}u_(t){const e={};e.database=Ec(this.serializer),e.addTarget=function(t,e){let n;const r=e.target;if(n=Po(r)?{documents:Tc(t,r)}:{query:Sc(t,r)},n.targetId=e.targetId,e.resumeToken.approximateByteSize()>0){n.resumeToken=dc(t,e.resumeToken);const r=hc(t,e.expectedCount);null!==r&&(n.expectedCount=r)}else if(e.snapshotVersion.compareTo(ui.min())>0){n.readTime=lc(t,e.snapshotVersion.toTimestamp());const r=hc(t,e.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,t);const n=function(t,e){const n=function(t){switch(t){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return zs()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,t);n&&(e.labels=n),this.e_(e)}c_(t){const e={};e.database=Ec(this.serializer),e.removeTarget=t,this.e_(e)}}class Au extends Iu{constructor(t,e,n,r,s,i){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,r,i),this.serializer=s,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(t,e){return this.connection.vo("Write",t,e)}onMessage(t){if(Hs(!!t.streamToken),this.lastStreamToken=t.streamToken,this.l_){this.zo.reset();const e=function(t,e){return t&&t.length>0?(Hs(void 0!==e),t.map((t=>function(t,e){let n=t.updateTime?pc(t.updateTime):pc(e);return n.isEqual(ui.min())&&(n=pc(e)),new Ta(n,t.transformResults||[])}(t,e)))):[]}(t.writeResults,t.commitTime),n=pc(t.commitTime);return this.listener.I_(n,e)}return Hs(!t.writeResults||0===t.writeResults.length),this.l_=!0,this.listener.T_()}E_(){const t={};t.database=Ec(this.serializer),this.e_(t)}P_(t){const e={streamToken:this.lastStreamToken,writes:t.map((t=>function(t,e){let n;if(e instanceof xa)n={update:_c(t,e.key,e.value)};else if(e instanceof Fa)n={delete:yc(t,e.key)};else if(e instanceof Oa)n={update:_c(t,e.key,e.data),updateMask:Oc(e.fieldMask)};else{if(!(e instanceof Va))return zs();n={verify:yc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((t=>function(t,e){const n=e.transform;if(n instanceof ga)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ma)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof va)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ea)return{fieldPath:e.field.canonicalString(),increment:n.Ie};throw zs()}(0,t)))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:fc(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:zs()}(t,e.precondition)),n}(this.serializer,t)))};this.e_(e)}}class Du extends class{}{constructor(t,e,n,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.serializer=r,this.d_=!1}A_(){if(this.d_)throw new Qs(Gs.FAILED_PRECONDITION,"The client has already been terminated.")}wo(t,e,n){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,s])=>this.connection.wo(t,e,n,r,s))).catch((t=>{throw"FirebaseError"===t.name?(t.code===Gs.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new Qs(Gs.UNKNOWN,t.toString())}))}Co(t,e,n,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,i])=>this.connection.Co(t,e,n,s,i,r))).catch((t=>{throw"FirebaseError"===t.name?(t.code===Gs.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new Qs(Gs.UNKNOWN,t.toString())}))}terminate(){this.d_=!0}}class ku{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){0===this.V_&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve()))))}w_(t){"Online"===this.state?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.p_("Offline")))}set(t){this.S_(),this.V_=0,"Online"===t&&(this.f_=!1),this.p_(t)}p_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}y_(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(js(e),this.f_=!1):Bs("OnlineStateTracker",e)}S_(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}}class Nu{constructor(t,e,n,r,s){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=s,this.F_.ro((t=>{n.enqueueAndForget((async()=>{Uu(this)&&(Bs("RemoteStore","Restarting streams for network reachability change."),await async function(t){const e=Ks(t);e.C_.add(4),await xu(e),e.M_.set("Unknown"),e.C_.delete(4),await Ru(e)}(this))}))})),this.M_=new ku(n,r)}}async function Ru(t){if(Uu(t))for(const e of t.v_)await e(!0)}async function xu(t){for(const e of t.v_)await e(!1)}function Ou(t,e){const n=Ks(t);n.D_.has(e.targetId)||(n.D_.set(e.targetId,e),Vu(n)?Fu(n):nh(n).Ho()&&Mu(n,e))}function Lu(t,e){const n=Ks(t),r=nh(n);n.D_.delete(e),r.Ho()&&Pu(n,e),0===n.D_.size&&(r.Ho()?r.Zo():Uu(n)&&n.M_.set("Unknown"))}function Mu(t,e){if(t.x_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ui.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}nh(t).u_(e)}function Pu(t,e){t.x_.Oe(e),nh(t).c_(e)}function Fu(t){t.x_=new rc({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.D_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),nh(t).start(),t.M_.g_()}function Vu(t){return Uu(t)&&!nh(t).jo()&&t.D_.size>0}function Uu(t){return 0===Ks(t).C_.size}function Bu(t){t.x_=void 0}async function ju(t){t.D_.forEach(((e,n)=>{Mu(t,e)}))}async function qu(t,e){Bu(t),Vu(t)?(t.M_.w_(e),Fu(t)):t.M_.set("Unknown")}async function $u(t,e,n){if(t.M_.set("Online"),e instanceof ec&&2===e.state&&e.cause)try{await async function(t,e){const n=e.cause;for(const r of e.targetIds)t.D_.has(r)&&(await t.remoteSyncer.rejectListen(r,n),t.D_.delete(r),t.x_.removeTarget(r))}(t,e)}catch(n){Bs("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await zu(t,n)}else if(e instanceof Za?t.x_.$e(e):e instanceof tc?t.x_.Je(e):t.x_.Ge(e),!n.isEqual(ui.min()))try{const e=await cu(t.localStore);n.compareTo(e)>=0&&await function(t,e){const n=t.x_.it(e);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const s=t.D_.get(r);s&&t.D_.set(r,s.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach(((e,n)=>{const r=t.D_.get(e);if(!r)return;t.D_.set(e,r.withResumeToken(Pi.EMPTY_BYTE_STRING,r.snapshotVersion)),Pu(t,e);const s=new Mc(r.target,e,n,r.sequenceNumber);Mu(t,s)})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)}catch(e){Bs("RemoteStore","Failed to raise snapshot:",e),await zu(t,e)}}async function zu(t,e,n){if(!_i(e))throw e;t.C_.add(1),await xu(t),t.M_.set("Offline"),n||(n=()=>cu(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Bs("RemoteStore","Retrying IndexedDB access"),await n(),t.C_.delete(1),await Ru(t)}))}function Hu(t,e){return e().catch((n=>zu(t,n,e)))}async function Ku(t){const e=Ks(t),n=rh(e);let r=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;Gu(e);)try{const t=await uu(e.localStore,r);if(null===t){0===e.b_.length&&n.Zo();break}r=t.batchId,Qu(e,t)}catch(t){await zu(e,t)}Wu(e)&&Xu(e)}function Gu(t){return Uu(t)&&t.b_.length<10}function Qu(t,e){t.b_.push(e);const n=rh(t);n.Ho()&&n.h_&&n.P_(e.mutations)}function Wu(t){return Uu(t)&&!rh(t).jo()&&t.b_.length>0}function Xu(t){rh(t).start()}async function Yu(t){rh(t).E_()}async function Ju(t){const e=rh(t);for(const n of t.b_)e.P_(n.mutations)}async function Zu(t,e,n){const r=t.b_.shift(),s=Ba.from(r,e,n);await Hu(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await Ku(t)}async function th(t,e){e&&rh(t).h_&&await async function(t,e){if(function(t){return function(t){switch(t){default:return zs();case Gs.CANCELLED:case Gs.UNKNOWN:case Gs.DEADLINE_EXCEEDED:case Gs.RESOURCE_EXHAUSTED:case Gs.INTERNAL:case Gs.UNAVAILABLE:case Gs.UNAUTHENTICATED:return!1;case Gs.INVALID_ARGUMENT:case Gs.NOT_FOUND:case Gs.ALREADY_EXISTS:case Gs.PERMISSION_DENIED:case Gs.FAILED_PRECONDITION:case Gs.ABORTED:case Gs.OUT_OF_RANGE:case Gs.UNIMPLEMENTED:case Gs.DATA_LOSS:return!0}}(t)&&t!==Gs.ABORTED}(e.code)){const n=t.b_.shift();rh(t).Yo(),await Hu(t,(()=>t.remoteSyncer.rejectFailedWrite(n.batchId,e))),await Ku(t)}}(t,e),Wu(t)&&Xu(t)}async function eh(t,e){const n=Ks(t);n.asyncQueue.verifyOperationInProgress(),Bs("RemoteStore","RemoteStore received new credentials");const r=Uu(n);n.C_.add(3),await xu(n),r&&n.M_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.C_.delete(3),await Ru(n)}function nh(t){return t.O_||(t.O_=function(t,e,n){const r=Ks(t);return r.A_(),new Cu(e,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(t.datastore,t.asyncQueue,{ho:ju.bind(null,t),Io:qu.bind(null,t),a_:$u.bind(null,t)}),t.v_.push((async e=>{e?(t.O_.Yo(),Vu(t)?Fu(t):t.M_.set("Unknown")):(await t.O_.stop(),Bu(t))}))),t.O_}function rh(t){return t.N_||(t.N_=function(t,e,n){const r=Ks(t);return r.A_(),new Au(e,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(t.datastore,t.asyncQueue,{ho:Yu.bind(null,t),Io:th.bind(null,t),T_:Ju.bind(null,t),I_:Zu.bind(null,t)}),t.v_.push((async e=>{e?(t.N_.Yo(),await Ku(t)):(await t.N_.stop(),t.b_.length>0&&(Bs("RemoteStore",`Stopping write stream with ${t.b_.length} pending writes`),t.b_=[]))}))),t.N_}class sh{constructor(t,e,n,r,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new Ws,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((t=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,n,r,s){const i=Date.now()+n,o=new sh(t,e,i,r,s);return o.start(n),o}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Qs(Gs.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ih(t,e){if(js("AsyncQueue",`${e}: ${t}`),_i(t))return new Qs(Gs.UNAVAILABLE,`${e}: ${t}`);throw t}class oh{constructor(t){this.comparator=t?(e,n)=>t(e,n)||pi.comparator(e.key,n.key):(t,e)=>pi.comparator(t.key,e.key),this.keyedMap=Zo(),this.sortedSet=new ki(this.comparator)}static emptySet(t){return new oh(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,n)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof oh))return!1;if(this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const t=e.getNext().key,r=n.getNext().key;if(!t.isEqual(r))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const n=new oh;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}class ah{constructor(){this.B_=new ki(pi.comparator)}track(t){const e=t.doc.key,n=this.B_.get(e);n?0!==t.type&&3===n.type?this.B_=this.B_.insert(e,t):3===t.type&&1!==n.type?this.B_=this.B_.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.B_=this.B_.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.B_=this.B_.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.B_=this.B_.remove(e):1===t.type&&2===n.type?this.B_=this.B_.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.B_=this.B_.insert(e,{type:2,doc:t.doc}):zs():this.B_=this.B_.insert(e,t)}L_(){const t=[];return this.B_.inorderTraversal(((e,n)=>{t.push(n)})),t}}class ch{constructor(t,e,n,r,s,i,o,a,c){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(t,e,n,r,s){const i=[];return e.forEach((t=>{i.push({type:0,doc:t})})),new ch(t,e,oh.emptySet(e),i,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&$o(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let t=0;t<e.length;t++)if(e[t].type!==n[t].type||!e[t].doc.isEqual(n[t].doc))return!1;return!0}}class uh{constructor(){this.k_=void 0,this.listeners=[]}}class hh{constructor(){this.queries=new Wo((t=>zo(t)),$o),this.onlineState="Unknown",this.q_=new Set}}function lh(t,e){const n=Ks(t);let r=!1;for(const t of e){const e=t.query,s=n.queries.get(e);if(s){for(const e of s.listeners)e.K_(t)&&(r=!0);s.k_=t}}r&&fh(n)}function dh(t,e,n){const r=Ks(t),s=r.queries.get(e);if(s)for(const t of s.listeners)t.onError(n);r.queries.delete(e)}function fh(t){t.q_.forEach((t=>{t.next()}))}class ph{constructor(t,e,n){this.query=t,this.U_=e,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=n||{}}K_(t){if(!this.options.includeMetadataChanges){const e=[];for(const n of t.docChanges)3!==n.type&&e.push(n);t=new ch(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.W_?this.z_(t)&&(this.U_.next(t),e=!0):this.j_(t,this.onlineState)&&(this.H_(t),e=!0),this.G_=t,e}onError(t){this.U_.error(t)}Q_(t){this.onlineState=t;let e=!1;return this.G_&&!this.W_&&this.j_(this.G_,t)&&(this.H_(this.G_),e=!0),e}j_(t,e){if(!t.fromCache)return!0;const n="Offline"!==e;return(!this.options.J_||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===e)}z_(t){if(t.docChanges.length>0)return!0;const e=this.G_&&this.G_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges}H_(t){t=ch.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.W_=!0,this.U_.next(t)}}class gh{constructor(t){this.key=t}}class mh{constructor(t){this.key=t}}class yh{constructor(t,e){this.query=t,this.ia=e,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=oa(),this.mutatedKeys=oa(),this._a=Go(t),this.aa=new oh(this._a)}get ua(){return this.ia}ca(t,e){const n=e?e.la:new ah,r=e?e.aa:this.aa;let s=e?e.mutatedKeys:this.mutatedKeys,i=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,c="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal(((t,e)=>{const u=r.get(t),h=Ko(this.query,e)?e:null,l=!!u&&this.mutatedKeys.has(u.key),d=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let f=!1;u&&h?u.data.isEqual(h.data)?l!==d&&(n.track({type:3,doc:h}),f=!0):this.ha(u,h)||(n.track({type:2,doc:h}),f=!0,(a&&this._a(h,a)>0||c&&this._a(h,c)<0)&&(o=!0)):!u&&h?(n.track({type:0,doc:h}),f=!0):u&&!h&&(n.track({type:1,doc:u}),f=!0,(a||c)&&(o=!0)),f&&(h?(i=i.add(h),s=d?s.add(t):s.delete(t)):(i=i.delete(t),s=s.delete(t)))})),null!==this.query.limit)for(;i.size>this.query.limit;){const t="F"===this.query.limitType?i.last():i.first();i=i.delete(t.key),s=s.delete(t.key),n.track({type:1,doc:t})}return{aa:i,la:n,Zi:o,mutatedKeys:s}}ha(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n,r){const s=this.aa;this.aa=t.aa,this.mutatedKeys=t.mutatedKeys;const i=t.la.L_();i.sort(((t,e)=>function(t,e){const n=t=>{switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return zs()}};return n(t)-n(e)}(t.type,e.type)||this._a(t.doc,e.doc))),this.Pa(n),r=null!=r&&r;const o=e&&!r?this.Ia():[],a=0===this.oa.size&&this.current&&!r?1:0,c=a!==this.sa;return this.sa=a,0!==i.length||c?{snapshot:new ch(this.query,t.aa,s,i,t.mutatedKeys,0===a,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ta:o}:{Ta:o}}Q_(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({aa:this.aa,la:new ah,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(t){return!this.ia.has(t)&&!!this.aa.has(t)&&!this.aa.get(t).hasLocalMutations}Pa(t){t&&(t.addedDocuments.forEach((t=>this.ia=this.ia.add(t))),t.modifiedDocuments.forEach((t=>{})),t.removedDocuments.forEach((t=>this.ia=this.ia.delete(t))),this.current=t.current)}Ia(){if(!this.current)return[];const t=this.oa;this.oa=oa(),this.aa.forEach((t=>{this.Ea(t.key)&&(this.oa=this.oa.add(t.key))}));const e=[];return t.forEach((t=>{this.oa.has(t)||e.push(new mh(t))})),this.oa.forEach((n=>{t.has(n)||e.push(new gh(n))})),e}da(t){this.ia=t.ls,this.oa=oa();const e=this.ca(t.documents);return this.applyChanges(e,!0)}Aa(){return ch.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,0===this.sa,this.hasCachedResults)}}class vh{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class wh{constructor(t){this.key=t,this.Ra=!1}}class Eh{constructor(t,e,n,r,s,i){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.Va={},this.ma=new Wo((t=>zo(t)),$o),this.fa=new Map,this.ga=new Set,this.pa=new ki(pi.comparator),this.ya=new Map,this.wa=new Qc,this.Sa={},this.ba=new Map,this.Da=qc.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return!0===this.Ca}}async function bh(t,e){const n=function(t){const e=Ks(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Th.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Fh.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ih.bind(null,e),e.Va.a_=lh.bind(null,e.eventManager),e.Va.Fa=dh.bind(null,e.eventManager),e}(t);let r,s;const i=n.ma.get(e);if(i)r=i.targetId,n.sharedClientState.addLocalQueryTarget(r),s=i.view.Aa();else{const t=await function(t,e){const n=Ks(t);return n.persistence.runTransaction("Allocate target","readwrite",(t=>{let r;return n.qr.getTargetData(t,e).next((s=>s?(r=s,bi.resolve(r)):n.qr.allocateTargetId(t).next((s=>(r=new Mc(e,s,"TargetPurposeListen",t.currentSequenceNumber),n.qr.addTargetData(t,r).next((()=>r)))))))})).then((t=>{const r=n.ts.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ts=n.ts.insert(t.targetId,t),n.ns.set(e,t.targetId)),t}))}(n.localStore,jo(e)),i=n.sharedClientState.addLocalQueryTarget(t.targetId);r=t.targetId,s=await async function(t,e,n,r,s){t.va=(e,n,r)=>async function(t,e,n,r){let s=e.view.ca(n);s.Zi&&(s=await lu(t.localStore,e.query,!1).then((({documents:t})=>e.view.ca(t,s))));const i=r&&r.targetChanges.get(e.targetId),o=r&&null!=r.targetMismatches.get(e.targetId),a=e.view.applyChanges(s,t.isPrimaryClient,i,o);return xh(t,e.targetId,a.Ta),a.snapshot}(t,e,n,r);const i=await lu(t.localStore,e,!0),o=new yh(e,i.ls),a=o.ca(i.documents),c=Ja.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState,s),u=o.applyChanges(a,t.isPrimaryClient,c);xh(t,n,u.Ta);const h=new vh(e,n,o);return t.ma.set(e,h),t.fa.has(n)?t.fa.get(n).push(e):t.fa.set(n,[e]),u.snapshot}(n,e,r,"current"===i,t.resumeToken),n.isPrimaryClient&&Ou(n.remoteStore,t)}return s}async function _h(t,e){const n=Ks(t),r=n.ma.get(e),s=n.fa.get(r.targetId);if(s.length>1)return n.fa.set(r.targetId,s.filter((t=>!$o(t,e)))),void n.ma.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await hu(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),Lu(n.remoteStore,r.targetId),Nh(n,r.targetId)})).catch(Ei)):(Nh(n,r.targetId),await hu(n.localStore,r.targetId,!0))}async function Th(t,e){const n=Ks(t);try{const t=await function(t,e){const n=Ks(t),r=e.snapshotVersion;let s=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(t=>{const i=n.ss.newChangeBuffer({trackRemovals:!0});s=n.ts;const o=[];e.targetChanges.forEach(((i,a)=>{const c=s.get(a);if(!c)return;o.push(n.qr.removeMatchingKeys(t,i.removedDocuments,a).next((()=>n.qr.addMatchingKeys(t,i.addedDocuments,a))));let u=c.withSequenceNumber(t.currentSequenceNumber);null!==e.targetMismatches.get(a)?u=u.withResumeToken(Pi.EMPTY_BYTE_STRING,ui.min()).withLastLimboFreeSnapshotVersion(ui.min()):i.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(i.resumeToken,r)),s=s.insert(a,u),function(t,e,n){return 0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,u,i)&&o.push(n.qr.updateTargetData(t,u))}));let a=Yo(),c=oa();if(e.documentUpdates.forEach((r=>{e.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),o.push(function(t,e,n){let r=oa(),s=oa();return n.forEach((t=>r=r.add(t))),e.getEntries(t,r).next((t=>{let r=Yo();return n.forEach(((n,i)=>{const o=t.get(n);i.isFoundDocument()!==o.isFoundDocument()&&(s=s.add(n)),i.isNoDocument()&&i.version.isEqual(ui.min())?(e.removeEntry(n,i.readTime),r=r.insert(n,i)):!o.isValidDocument()||i.version.compareTo(o.version)>0||0===i.version.compareTo(o.version)&&o.hasPendingWrites?(e.addEntry(i),r=r.insert(n,i)):Bs("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",i.version)})),{us:r,cs:s}}))}(t,i,e.documentUpdates).next((t=>{a=t.us,c=t.cs}))),!r.isEqual(ui.min())){const e=n.qr.getLastRemoteSnapshotVersion(t).next((e=>n.qr.setTargetsMetadata(t,t.currentSequenceNumber,r)));o.push(e)}return bi.waitFor(o).next((()=>i.apply(t))).next((()=>n.localDocuments.getLocalViewOfDocuments(t,a,c))).next((()=>a))})).then((t=>(n.ts=s,t)))}(n.localStore,e);e.targetChanges.forEach(((t,e)=>{const r=n.ya.get(e);r&&(Hs(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.Ra=!0:t.modifiedDocuments.size>0?Hs(r.Ra):t.removedDocuments.size>0&&(Hs(r.Ra),r.Ra=!1))})),await Mh(n,t,e)}catch(t){await Ei(t)}}function Sh(t,e,n){const r=Ks(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const t=[];r.ma.forEach(((n,r)=>{const s=r.view.Q_(e);s.snapshot&&t.push(s.snapshot)})),function(t,e){const n=Ks(t);n.onlineState=e;let r=!1;n.queries.forEach(((t,n)=>{for(const t of n.listeners)t.Q_(e)&&(r=!0)})),r&&fh(n)}(r.eventManager,e),t.length&&r.Va.a_(t),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Ih(t,e,n){const r=Ks(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.ya.get(e),i=s&&s.key;if(i){let t=new ki(pi.comparator);t=t.insert(i,uo.newNoDocument(i,ui.min()));const n=oa().add(i),s=new Ya(ui.min(),new Map,new ki(oi),t,n);await Th(r,s),r.pa=r.pa.remove(i),r.ya.delete(e),Lh(r)}else await hu(r.localStore,e,!1).then((()=>Nh(r,e,n))).catch(Ei)}async function Ch(t,e){const n=Ks(t),r=e.batch.batchId;try{const t=await function(t,e){const n=Ks(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(t=>{const r=e.batch.keys(),s=n.ss.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){const s=n.batch,i=s.keys();let o=bi.resolve();return i.forEach((t=>{o=o.next((()=>r.getEntry(e,t))).next((e=>{const i=n.docVersions.get(t);Hs(null!==i),e.version.compareTo(i)<0&&(s.applyToRemoteDocument(e,n),e.isValidDocument()&&(e.setReadTime(n.commitVersion),r.addEntry(e)))}))})),o.next((()=>t.mutationQueue.removeMutationBatch(e,s)))}(n,t,e,s).next((()=>s.apply(t))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,r,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,function(t){let e=oa();for(let n=0;n<t.mutationResults.length;++n)t.mutationResults[n].transformResults.length>0&&(e=e.add(t.batch.mutations[n].key));return e}(e)))).next((()=>n.localDocuments.getDocuments(t,r)))}))}(n.localStore,e);kh(n,r,null),Dh(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Mh(n,t)}catch(t){await Ei(t)}}async function Ah(t,e,n){const r=Ks(t);try{const t=await function(t,e){const n=Ks(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(t=>{let r;return n.mutationQueue.lookupMutationBatch(t,e).next((e=>(Hs(null!==e),r=e.keys(),n.mutationQueue.removeMutationBatch(t,e)))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,r,e))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,r))).next((()=>n.localDocuments.getDocuments(t,r)))}))}(r.localStore,e);kh(r,e,n),Dh(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Mh(r,t)}catch(n){await Ei(n)}}function Dh(t,e){(t.ba.get(e)||[]).forEach((t=>{t.resolve()})),t.ba.delete(e)}function kh(t,e,n){const r=Ks(t);let s=r.Sa[r.currentUser.toKey()];if(s){const t=s.get(e);t&&(n?t.reject(n):t.resolve(),s=s.remove(e)),r.Sa[r.currentUser.toKey()]=s}}function Nh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.fa.get(e))t.ma.delete(r),n&&t.Va.Fa(r,n);t.fa.delete(e),t.isPrimaryClient&&t.wa.Rr(e).forEach((e=>{t.wa.containsKey(e)||Rh(t,e)}))}function Rh(t,e){t.ga.delete(e.path.canonicalString());const n=t.pa.get(e);null!==n&&(Lu(t.remoteStore,n),t.pa=t.pa.remove(e),t.ya.delete(n),Lh(t))}function xh(t,e,n){for(const r of n)r instanceof gh?(t.wa.addReference(r.key,e),Oh(t,r)):r instanceof mh?(Bs("SyncEngine","Document no longer in limbo: "+r.key),t.wa.removeReference(r.key,e),t.wa.containsKey(r.key)||Rh(t,r.key)):zs()}function Oh(t,e){const n=e.key,r=n.path.canonicalString();t.pa.get(n)||t.ga.has(r)||(Bs("SyncEngine","New document in limbo: "+n),t.ga.add(r),Lh(t))}function Lh(t){for(;t.ga.size>0&&t.pa.size<t.maxConcurrentLimboResolutions;){const e=t.ga.values().next().value;t.ga.delete(e);const n=new pi(li.fromString(e)),r=t.Da.next();t.ya.set(r,new wh(n)),t.pa=t.pa.insert(n,r),Ou(t.remoteStore,new Mc(jo(Vo(n.path)),r,"TargetPurposeLimboResolution",Ti._e))}}async function Mh(t,e,n){const r=Ks(t),s=[],i=[],o=[];r.ma.isEmpty()||(r.ma.forEach(((t,a)=>{o.push(r.va(a,e,n).then((t=>{if((t||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==t?void 0:t.fromCache)?"not-current":"current"),t){s.push(t);const e=ru.Qi(a.targetId,t);i.push(e)}})))})),await Promise.all(o),r.Va.a_(s),await async function(t,e){const n=Ks(t);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(t=>bi.forEach(e,(e=>bi.forEach(e.ki,(r=>n.persistence.referenceDelegate.addReference(t,e.targetId,r))).next((()=>bi.forEach(e.qi,(r=>n.persistence.referenceDelegate.removeReference(t,e.targetId,r)))))))))}catch(t){if(!_i(t))throw t;Bs("LocalStore","Failed to update sequence numbers: "+t)}for(const t of e){const e=t.targetId;if(!t.fromCache){const t=n.ts.get(e),r=t.snapshotVersion,s=t.withLastLimboFreeSnapshotVersion(r);n.ts=n.ts.insert(e,s)}}}(r.localStore,i))}async function Ph(t,e){const n=Ks(t);if(!n.currentUser.isEqual(e)){Bs("SyncEngine","User change. New user:",e.toKey());const t=await au(n.localStore,e);n.currentUser=e,function(t,e){t.ba.forEach((t=>{t.forEach((t=>{t.reject(new Qs(Gs.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.ba.clear()}(n),n.sharedClientState.handleUserChange(e,t.removedBatchIds,t.addedBatchIds),await Mh(n,t._s)}}function Fh(t,e){const n=Ks(t),r=n.ya.get(e);if(r&&r.Ra)return oa().add(r.key);{let t=oa();const r=n.fa.get(e);if(!r)return t;for(const e of r){const r=n.ma.get(e);t=t.unionWith(r.view.ua)}return t}}function Vh(t){const e=Ks(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Ch.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Ah.bind(null,e),e}class Uh{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=Tu(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,e){return null}createIndexBackfillerScheduler(t,e){return null}createLocalStore(t){return function(t,e,n,r){return new ou(t,e,n,r)}(this.persistence,new iu,t.initialUser,this.serializer)}createPersistence(t){return new tu(nu.jr,this.serializer)}createSharedClientState(t){return new fu}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Bh{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=t=>Sh(this.syncEngine,t,1),this.remoteStore.remoteSyncer.handleCredentialChange=Ph.bind(null,this.syncEngine),await async function(t,e){const n=Ks(t);e?(n.C_.delete(2),await Ru(n)):e||(n.C_.add(2),await xu(n),n.M_.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return new hh}createDatastore(t){const e=Tu(t.databaseInfo.databaseId),n=function(t){return new bu(t)}(t.databaseInfo);return function(t,e,n,r){return new Du(t,e,n,r)}(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return function(t,e,n,r,s){return new Nu(t,e,n,r,s)}(this.localStore,this.datastore,t.asyncQueue,(t=>Sh(this.syncEngine,t,0)),gu.D()?new gu:new pu)}createSyncEngine(t,e){return function(t,e,n,r,s,i,o){const a=new Eh(t,e,n,r,s,i);return o&&(a.Ca=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return async function(t){const e=Ks(t);Bs("RemoteStore","RemoteStore shutting down."),e.C_.add(5),await xu(e),e.F_.shutdown(),e.M_.set("Unknown")}(this.remoteStore)}}class jh{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Oa(this.observer.next,t)}error(t){this.observer.error?this.Oa(this.observer.error,t):js("Uncaught Error in snapshot listener:",t.toString())}Na(){this.muted=!0}Oa(t,e){this.muted||setTimeout((()=>{this.muted||t(e)}),0)}}class qh{constructor(t,e,n,r){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=r,this.user=Ps.UNAUTHENTICATED,this.clientId=ii.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async t=>{Bs("FirestoreClient","Received user=",t.uid),await this.authCredentialListener(t),this.user=t})),this.appCheckCredentials.start(n,(t=>(Bs("FirestoreClient","Received new app check token=",t),this.appCheckCredentialListener(t,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Qs(Gs.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Ws;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const n=ih(e,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}async function $h(t,e){t.asyncQueue.verifyOperationInProgress(),Bs("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async t=>{r.isEqual(t)||(await au(e.localStore,t),r=t)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function zh(t,e){t.asyncQueue.verifyOperationInProgress();const n=await async function(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Bs("FirestoreClient","Using user provided OfflineComponentProvider");try{await $h(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(t){return"FirebaseError"===t.name?t.code===Gs.FAILED_PRECONDITION||t.code===Gs.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(n))throw n;qs("Error using user provided cache. Falling back to memory cache: "+n),await $h(t,new Uh)}}else Bs("FirestoreClient","Using default OfflineComponentProvider"),await $h(t,new Uh);return t._offlineComponents}(t);Bs("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener((t=>eh(e.remoteStore,t))),t.setAppCheckTokenChangeListener(((t,n)=>eh(e.remoteStore,n))),t._onlineComponents=e}async function Hh(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Bs("FirestoreClient","Using user provided OnlineComponentProvider"),await zh(t,t._uninitializedComponentsProvider._online)):(Bs("FirestoreClient","Using default OnlineComponentProvider"),await zh(t,new Bh))),t._onlineComponents}async function Kh(t){const e=await Hh(t),n=e.eventManager;return n.onListen=bh.bind(null,e.syncEngine),n.onUnlisten=_h.bind(null,e.syncEngine),n}function Gh(t,e,n={}){const r=new Ws;return t.asyncQueue.enqueueAndForget((async()=>function(t,e,n,r,s){const i=new jh({next:n=>{e.enqueueAndForget((()=>async function(t,e){const n=Ks(t),r=e.query;let s=!1;const i=n.queries.get(r);if(i){const t=i.listeners.indexOf(e);t>=0&&(i.listeners.splice(t,1),s=0===i.listeners.length)}if(s)return n.queries.delete(r),n.onUnlisten(r)}(t,o))),n.fromCache&&"server"===r.source?s.reject(new Qs(Gs.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):s.resolve(n)},error:t=>s.reject(t)}),o=new ph(n,i,{includeMetadataChanges:!0,J_:!0});return async function(t,e){const n=Ks(t),r=e.query;let s=!1,i=n.queries.get(r);if(i||(s=!0,i=new uh),s)try{i.k_=await n.onListen(r)}catch(t){const n=ih(t,`Initialization of query '${Ho(e.query)}' failed`);return void e.onError(n)}n.queries.set(r,i),i.listeners.push(e),e.Q_(n.onlineState),i.k_&&e.K_(i.k_)&&fh(n)}(t,o)}(await Kh(t),t.asyncQueue,e,n,r))),r.promise}function Qh(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const Wh=new Map;function Xh(t,e,n){if(!n)throw new Qs(Gs.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Yh(t){if(!pi.isDocumentKey(t))throw new Qs(Gs.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Jh(t){if(pi.isDocumentKey(t))throw new Qs(Gs.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Zh(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=function(t){return t.constructor?t.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return"function"==typeof t?"a function":zs()}function tl(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Qs(Gs.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Zh(t);throw new Qs(Gs.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}class el{constructor(t){var e,n;if(void 0===t.host){if(void 0!==t.ssl)throw new Qs(Gs.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Qs(Gs.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}(function(t,e,n,r){if(!0===e&&!0===r)throw new Qs(Gs.INVALID_ARGUMENT,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")})(0,t.experimentalForceLongPolling,0,t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Qh(null!==(n=t.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(t){if(void 0!==t.timeoutSeconds){if(isNaN(t.timeoutSeconds))throw new Qs(Gs.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (must not be NaN)`);if(t.timeoutSeconds<5)throw new Qs(Gs.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (minimum allowed value is 5)`);if(t.timeoutSeconds>30)throw new Qs(Gs.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(t,e){return t.timeoutSeconds===e.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class nl{constructor(t,e,n,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new el({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Qs(Gs.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Qs(Gs.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new el(t),void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new Ys;switch(t.type){case"firstParty":return new ei(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Qs(Gs.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=Wh.get(t);e&&(Bs("ComponentProvider","Removing Datastore"),Wh.delete(t),e.terminate())}(this),Promise.resolve()}}class rl{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new rl(this.firestore,t,this._query)}}class sl{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new il(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new sl(this.firestore,t,this._key)}}class il extends rl{constructor(t,e,n){super(t,e,Vo(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new sl(this.firestore,null,new pi(t))}withConverter(t){return new il(this.firestore,t,this._path)}}function ol(t,e,...n){if(t=g(t),Xh("collection","path",e),t instanceof nl){const r=li.fromString(e,...n);return Jh(r),new il(t,null,r)}{if(!(t instanceof sl||t instanceof il))throw new Qs(Gs.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(li.fromString(e,...n));return Jh(r),new il(t.firestore,null,r)}}class al{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new Su(this,"async_queue_retry"),this.iu=()=>{const t=_u();t&&Bs("AsyncQueue","Visibility state changed to "+t.visibilityState),this.zo.Qo()};const t=_u();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.su(),this.ou(t)}enterRestrictedMode(t){if(!this.Za){this.Za=!0,this.nu=t||!1;const e=_u();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.iu)}}enqueue(t){if(this.su(),this.Za)return new Promise((()=>{}));const e=new Ws;return this.ou((()=>this.Za&&this.nu?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Ya.push(t),this._u())))}async _u(){if(0!==this.Ya.length){try{await this.Ya[0](),this.Ya.shift(),this.zo.reset()}catch(t){if(!_i(t))throw t;Bs("AsyncQueue","Operation failed with retryable error: "+t)}this.Ya.length>0&&this.zo.ko((()=>this._u()))}}ou(t){const e=this.Ja.then((()=>(this.tu=!0,t().catch((t=>{this.eu=t,this.tu=!1;const e=function(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t);throw js("INTERNAL UNHANDLED ERROR: ",e),t})).then((t=>(this.tu=!1,t))))));return this.Ja=e,e}enqueueAfterDelay(t,e,n){this.su(),this.ru.indexOf(t)>-1&&(e=0);const r=sh.createAndSchedule(this,t,e,n,(t=>this.au(t)));return this.Xa.push(r),r}su(){this.eu&&zs()}verifyOperationInProgress(){}async uu(){let t;do{t=this.Ja,await t}while(t!==this.Ja)}cu(t){for(const e of this.Xa)if(e.timerId===t)return!0;return!1}lu(t){return this.uu().then((()=>{this.Xa.sort(((t,e)=>t.targetTimeMs-e.targetTimeMs));for(const e of this.Xa)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.uu()}))}hu(t){this.ru.push(t)}au(t){const e=this.Xa.indexOf(t);this.Xa.splice(e,1)}}class cl extends nl{constructor(t,e,n,r){super(t,e,n,r),this.type="firestore",this._queue=new al,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||hl(this),this._firestoreClient.terminate()}}function ul(t){return t._firestoreClient||hl(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function hl(t){var e,n,r;const s=t._freezeSettings(),i=function(t,e,n,r){return new zi(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Qh(r.experimentalLongPollingOptions),r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new qh(t._authCredentials,t._appCheckCredentials,t._queue,i),(null===(n=s.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=s.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}class ll{constructor(t){this._byteString=t}static fromBase64String(t){try{return new ll(Pi.fromBase64String(t))}catch(t){throw new Qs(Gs.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(t){return new ll(Pi.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class dl{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new Qs(Gs.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fi(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class fl{constructor(t){this._methodName=t}}class pl{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Qs(Gs.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Qs(Gs.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return oi(this._lat,t._lat)||oi(this._long,t._long)}}const gl=/^__.*__$/;class ml{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return null!==this.fieldMask?new Oa(t,this.data,this.fieldMask,e,this.fieldTransforms):new xa(t,this.data,e,this.fieldTransforms)}}function yl(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw zs()}}class vl{constructor(t,e,n,r,s,i){this.settings=t,this.databaseId=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===s&&this.Pu(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(t){return new vl(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Tu({path:n,du:!1});return r.Au(t),r}Ru(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Tu({path:n,du:!1});return r.Pu(),r}Vu(t){return this.Tu({path:void 0,du:!0})}mu(t){return kl(t,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(t){return void 0!==this.fieldMask.find((e=>t.isPrefixOf(e)))||void 0!==this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))}Pu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Au(this.path.get(t))}Au(t){if(0===t.length)throw this.mu("Document fields must not be empty");if(yl(this.Iu)&&gl.test(t))throw this.mu('Document fields cannot begin and end with "__"')}}class wl{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=n||Tu(t)}pu(t,e,n,r=!1){return new vl({Iu:t,methodName:e,gu:n,path:fi.emptyPath(),du:!1,fu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function El(t){const e=t._freezeSettings(),n=Tu(t._databaseId);return new wl(t._databaseId,!!e.ignoreUndefinedProperties,n)}function bl(t,e,n,r,s,i={}){const o=t.pu(i.merge||i.mergeFields?2:0,e,n,s);Il("Data must be an object, but it was:",o,r);const a=Tl(r,o);let c,u;if(i.merge)c=new Li(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const t=[];for(const r of i.mergeFields){const s=Cl(e,r,n);if(!o.contains(s))throw new Qs(Gs.INVALID_ARGUMENT,`Field '${s}' is specified in your field mask but missing from your input data.`);Nl(t,s)||t.push(s)}c=new Li(t),u=o.fieldTransforms.filter((t=>c.covers(t.field)))}else c=null,u=o.fieldTransforms;return new ml(new ao(a),c,u)}function _l(t,e){if(Sl(t=g(t)))return Il("Unsupported field value:",e,t),Tl(t,e);if(t instanceof fl)return function(t,e){if(!yl(e.Iu))throw e.mu(`${t._methodName}() can only be used with update() and set()`);if(!e.path)throw e.mu(`${t._methodName}() is not currently supported inside arrays`);const n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.du&&4!==e.Iu)throw e.mu("Nested arrays are not supported");return function(t,e){const n=[];let r=0;for(const s of t){let t=_l(s,e.Vu(r));null==t&&(t={nullValue:"NULL_VALUE"}),n.push(t),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=g(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return ha(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const n=ci.fromDate(t);return{timestampValue:lc(e.serializer,n)}}if(t instanceof ci){const n=new ci(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:lc(e.serializer,n)}}if(t instanceof pl)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ll)return{bytesValue:dc(e.serializer,t._byteString)};if(t instanceof sl){const n=e.databaseId,r=t.firestore._databaseId;if(!r.isEqual(n))throw e.mu(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:gc(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.mu(`Unsupported field value: ${Zh(t)}`)}(t,e)}function Tl(t,e){const n={};return Di(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ai(t,((t,r)=>{const s=_l(r,e.Eu(t));null!=s&&(n[t]=s)})),{mapValue:{fields:n}}}function Sl(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof ci||t instanceof pl||t instanceof ll||t instanceof sl||t instanceof fl)}function Il(t,e,n){if(!Sl(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){const r=Zh(n);throw"an object"===r?e.mu(t+" a custom object"):e.mu(t+" "+r)}}function Cl(t,e,n){if((e=g(e))instanceof dl)return e._internalPath;if("string"==typeof e)return Dl(t,e);throw kl("Field path arguments must be of type string or ",t,!1,void 0,n)}const Al=new RegExp("[~\\*/\\[\\]]");function Dl(t,e,n){if(e.search(Al)>=0)throw kl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new dl(...e.split("."))._internalPath}catch(r){throw kl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function kl(t,e,n,r,s){const i=r&&!r.isEmpty(),o=void 0!==s;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new Qs(Gs.INVALID_ARGUMENT,a+t+c)}function Nl(t,e){return t.some((t=>t.isEqual(e)))}class Rl{constructor(t,e,n,r,s){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new sl(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new xl(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(Ol("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class xl extends Rl{data(){return super.data()}}function Ol(t,e){return"string"==typeof e?Dl(t,e):e instanceof dl?e._internalPath:e._delegate._internalPath}class Ll{convertValue(t,e="none"){switch(Gi(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ui(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Bi(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw zs()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const n={};return Ai(t,((t,r)=>{n[t]=this.convertValue(r,e)})),n}convertGeoPoint(t){return new pl(Ui(t.latitude),Ui(t.longitude))}convertArray(t,e){return(t.values||[]).map((t=>this.convertValue(t,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const n=qi(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp($i(t));default:return null}}convertTimestamp(t){const e=Vi(t);return new ci(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=li.fromString(t);Hs(Lc(n));const r=new Hi(n.get(1),n.get(3)),s=new pi(n.popFirst(5));return r.isEqual(e)||js(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),s}}class Ml{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Pl extends Rl{constructor(t,e,n,r,s,i){super(t,e,n,r,i),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Fl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const n=this._document.data.field(Ol("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}}class Fl extends Pl{data(t={}){return super.data(t)}}class Vl{constructor(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Ml(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach((n=>{t.call(e,new Fl(this._firestore,this._userDataWriter,n.key,n,new Ml(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Qs(Gs.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){let e=0;return t._snapshot.docChanges.map((n=>{const r=new Fl(t._firestore,t._userDataWriter,n.doc.key,n.doc,new Ml(t._snapshot.mutatedKeys.has(n.doc.key),t._snapshot.fromCache),t.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:e++}}))}{let n=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((t=>e||3!==t.type)).map((e=>{const r=new Fl(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Ml(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter);let s=-1,i=-1;return 0!==e.type&&(s=n.indexOf(e.doc.key),n=n.delete(e.doc.key)),1!==e.type&&(n=n.add(e.doc),i=n.indexOf(e.doc.key)),{type:Ul(e.type),doc:r,oldIndex:s,newIndex:i}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Ul(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return zs()}}class Bl extends Ll{constructor(t){super(),this.firestore=t}convertBytes(t){return new ll(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new sl(this.firestore,null,e)}}function jl(t){t=tl(t,rl);const e=tl(t.firestore,cl),n=ul(e),r=new Bl(e);return function(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new Qs(Gs.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(t._query),Gh(n,t._query).then((n=>new Vl(e,r,t,n)))}function ql(t,e){return function(t,e){const n=new Ws;return t.asyncQueue.enqueueAndForget((async()=>async function(t,e,n){const r=Vh(t);try{const t=await function(t,e){const n=Ks(t),r=ci.now(),s=e.reduce(((t,e)=>t.add(e.key)),oa());let i,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(t=>{let a=Yo(),c=oa();return n.ss.getEntries(t,s).next((t=>{a=t,a.forEach(((t,e)=>{e.isValidDocument()||(c=c.add(t))}))})).next((()=>n.localDocuments.getOverlayedDocuments(t,a))).next((s=>{i=s;const o=[];for(const t of e){const e=Na(t,i.get(t.key).overlayedDocument);null!=e&&o.push(new Oa(t.key,e,co(e.value.mapValue),Sa.exists(!0)))}return n.mutationQueue.addMutationBatch(t,r,o,e)})).next((e=>{o=e;const r=e.applyToLocalDocumentSet(i,c);return n.documentOverlayCache.saveOverlays(t,e.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:ta(i)})))}(r.localStore,e);r.sharedClientState.addPendingMutation(t.batchId),function(t,e,n){let r=t.Sa[t.currentUser.toKey()];r||(r=new ki(oi)),r=r.insert(e,n),t.Sa[t.currentUser.toKey()]=r}(r,t.batchId,n),await Mh(r,t.changes),await Ku(r.remoteStore)}catch(t){const e=ih(t,"Failed to persist write");n.reject(e)}}(await function(t){return Hh(t).then((t=>t.syncEngine))}(t),e,n))),n.promise}(ul(t),e)}new WeakMap,function(t,e=!0){Fs="10.7.0",tt(new m("firestore",((t,{instanceIdentifier:n,options:r})=>{const s=t.getProvider("app").getImmediate(),i=new cl(new Zs(t.getProvider("auth-internal")),new ri(t.getProvider("app-check-internal")),function(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Qs(Gs.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hi(t.options.projectId,e)}(s,n),s);return r=Object.assign({useFetchStreams:e},r),i._setSettings(r),i}),"PUBLIC").setMultipleInstances(!0)),st(Ms,"4.4.0",t),st(Ms,"4.4.0","esm2017")}(),st("firebase","10.7.0","app");const $l=function(t,e){const n="string"==typeof t?t:"(default)",r=function(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}("object"==typeof t?t:function(t=W){const e=Y.get(t);if(!e&&t===W&&c())return rt();if(!e)throw et.create("no-app",{appName:t});return e}(),"firestore").getImmediate({identifier:n});if(!r._initialized){const t=(t=>{const e=(t=>{var e,n;return null===(n=null===(e=a())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]})(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),r]:[e.substring(0,n),r]})("firestore");t&&function(t,e,n,r={}){var s;const i=(t=tl(t,nl))._getSettings(),a=`${e}:${n}`;if("firestore.googleapis.com"!==i.host&&i.host!==a&&qs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),r.mockUserToken){let e,n;if("string"==typeof r.mockUserToken)e=r.mockUserToken,n=Ps.MOCK_USER;else{e=function(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[o(JSON.stringify({alg:"none",type:"JWT"})),o(JSON.stringify(i)),""].join(".")}(r.mockUserToken,null===(s=t._app)||void 0===s?void 0:s.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new Qs(Gs.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Ps(i)}t._authCredentials=new Js(new Xs(e,n))}}(r,...t)}return r}(rt({apiKey:"AIzaSyDKZKeg6K2sigOpadWaKUCdOesIl22aPHk",authDomain:"chat-app-cf4e2.firebaseapp.com",projectId:"chat-app-cf4e2",storageBucket:"chat-app-cf4e2.appspot.com",messagingSenderId:"736647861908",appId:"1:736647861908:web:48ba916fac13d38aed0681",measurementId:"G-6QYB0Q1XR2"})),zl="SEND_MESSAGE",Hl="CLEAR_CHAT",Kl="INCREMENT_UNREAD_COUNT",Gl="RESET_UNREAD_COUNT",Ql="SET_CURRENT_SENDER",Wl="FETCH_MESSAGES_SUCCESS",Xl=t=>({type:Gl,payload:t}),Yl={messages:[],ivanUnread:localStorage.getItem("ivanUnread")?parseInt(localStorage.getItem("ivanUnread"),10):0,maryaUnread:localStorage.getItem("maryaUnread")?parseInt(localStorage.getItem("maryaUnread"),10):0,currentSender:"Иван"},Jl=new class{listeners=[];constructor(t){this.state=t}getState=()=>this.state;dispatch=t=>{this.state=((t,e)=>{const n=t||Yl;switch(e.type){case zl:return{...t,messages:[...t.messages,e.payload]};case Hl:return{...t,messages:[]};case Kl:{const n="Иван"===e.payload?t.ivanUnread+1:t.ivanUnread,r="Мария"===e.payload?t.maryaUnread+1:t.maryaUnread;return"Иван"===e.payload?(localStorage.setItem("ivanUnread",n.toString()),{...t,ivanUnread:n}):"Мария"===e.payload?(localStorage.setItem("maryaUnread",r.toString()),{...t,maryaUnread:r}):t}case Gl:return"Иван"===e.payload?(localStorage.setItem("ivanUnread","0"),{...t,ivanUnread:0}):"Мария"===e.payload?(localStorage.setItem("maryaUnread","0"),{...t,maryaUnread:0}):t;case Ql:return{...t,currentSender:e.payload};case Wl:return{...t,messages:e.payload};default:return n}})(this.state,t),this.listeners.forEach((t=>t()))};subscribe=t=>(this.listeners.push(t),()=>{this.listeners=this.listeners.filter((e=>e!==t))})}(Yl),Zl=Jl,td=document.getElementById("ivan-selector"),ed=document.getElementById("marya-selector"),nd=document.querySelector(".chat-input-form"),rd=document.querySelector(".chat-input"),sd=document.querySelector(".chat-messages"),id=document.querySelector(".clear-chat-button"),od=document.getElementById("ivan-unread"),ad=document.getElementById("marya-unread"),cd=document.querySelector(".emoji-button"),ud=document.querySelector(".emoji-panel");if(!(td&&ed&&nd&&rd&&sd&&id&&cd&&ud))throw new Error("Some HTML elements are missing.");const hd=()=>{sd.scrollTop=sd.scrollHeight};function ld(t,e,n){Zl.dispatch({type:Ql,payload:t}),e.classList.add("active-person"),n.classList.remove("active-person"),Zl.dispatch(Xl(t)),localStorage.setItem("Иван"===t?"ivanUnread":"maryaUnread","0"),localStorage.setItem("currentSender",t);const r=document.querySelector(".chat-header"),s=document.querySelector(".chat-input");"Иван"===t?(r.textContent="Мария пишет...",s.placeholder="Здесь пишет, Иван..."):(r.textContent="Иван пишет...",s.placeholder="Здесь пишет, Мария...")}async function dd(){const t=rd.value.trim();if(t){const e=(new Date).toISOString(),{currentSender:n}=Zl.getState(),r={sender:n,text:t,timestamp:e};Zl.dispatch((t=>({type:zl,payload:t}))(r));try{await function(t,e){const n=tl(t.firestore,cl),r=function(t,e,...n){if(t=g(t),1===arguments.length&&(e=ii.newId()),Xh("doc","path",e),t instanceof nl){const r=li.fromString(e,...n);return Yh(r),new sl(t,null,new pi(r))}{if(!(t instanceof sl||t instanceof il))throw new Qs(Gs.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(li.fromString(e,...n));return Yh(r),new sl(t.firestore,t instanceof il?t.converter:null,new pi(r))}}(t),s=function(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}(t.converter,e);return ql(n,[bl(El(t.firestore),"addDoc",r._key,s,null!==t.converter,{}).toMutation(r._key,Sa.exists(!1))]).then((()=>r))}(ol($l,"messages"),r)}catch(t){console.error("Ошибка при добавлении сообщения: ",t)}rd.value="";const s="Иван"===n?"Мария":"Иван";Zl.dispatch({type:Kl,payload:s});const i=Zl.getState()["Иван"===s?"ivanUnread":"maryaUnread"];localStorage.setItem("Иван"===s?"ivanUnread":"maryaUnread",i.toString()),hd()}}td.addEventListener("click",(()=>ld("Иван",td,ed))),ed.addEventListener("click",(()=>ld("Мария",ed,td))),rd.addEventListener("keydown",(async t=>{"Enter"!==t.key||t.shiftKey||(t.preventDefault(),await dd())})),nd.addEventListener("submit",(async t=>{t.preventDefault(),await dd()}));const fd=()=>{ud.style.display="none";const t=Zl.getState();sd.innerHTML="",t.messages.forEach((e=>{const n=((t,e)=>{const n=t.sender===e?"blue-bg":"gray-bg",r=new Date(t.timestamp).toLocaleString("ru-RU");return`\n    <div class="message ${n}">\n      <div class="message-sender">${t.sender}</div>\n      <div class="message-text">${t.text}</div>\n      <div class="message-timestamp">${r}</div>\n    </div>\n  `})(e,t.currentSender);sd.innerHTML+=n})),hd(),od.textContent=t.ivanUnread>0?t.ivanUnread.toString():"",ad.textContent=t.maryaUnread>0?t.maryaUnread.toString():"",od.style.display=t.ivanUnread>0?"inline":"none",ad.style.display=t.maryaUnread>0?"inline":"none"};id.addEventListener("click",(async()=>{Zl.dispatch({type:Hl}),Zl.dispatch(Xl("Иван")),Zl.dispatch(Xl("Мария")),localStorage.setItem("ivanUnread","0"),localStorage.setItem("maryaUnread","0");const t=ol($l,"messages");(await jl(t)).forEach((t=>{var e;ql(tl((e=t.ref).firestore,cl),[new Fa(e._key,Sa.none())])})),rd.value="",fd()})),cd.addEventListener("click",(()=>{const t="block"===ud.style.display;ud.style.display=t?"none":"block",id.style.display=t?"block":"none"})),document.querySelectorAll(".emoji").forEach((t=>{t.addEventListener("click",(t=>{const e=t.target.textContent;e&&((t=>{const e=rd.selectionStart,n=rd.selectionEnd,r=rd.value,s=r.substring(0,e),i=r.substring(n,r.length);rd.value=s+t+i,rd.selectionStart=e+t.length,rd.selectionEnd=e+t.length,rd.focus()})(e),ud.style.display="none",id.style.display="block")}))})),document.addEventListener("DOMContentLoaded",(async()=>{const t=localStorage.getItem("currentSender");t&&ld(t,"Иван"===t?td:ed,"Иван"===t?ed:td),ud&&(ud.style.display="none"),await(async t=>{try{const e=(await jl(ol($l,"messages"))).docs.map((t=>t.data()));e.sort(((t,e)=>t.timestamp.localeCompare(e.timestamp))),t((t=>({type:Wl,payload:t}))(e))}catch(t){console.error("Ошибка при получении сообщений: ",t)}})(Zl.dispatch),Zl.subscribe(fd),fd()}))},783:(t,e,n)=>{var r=n(618),s=Object.create(null),i="undefined"==typeof document,o=Array.prototype.forEach;function a(){}function c(t,e){if(!e){if(!t.href)return;e=t.href.split("?")[0]}if(h(e)&&!1!==t.isLoaded&&e&&e.indexOf(".css")>-1){t.visited=!0;var n=t.cloneNode();n.isLoaded=!1,n.addEventListener("load",(function(){n.isLoaded||(n.isLoaded=!0,t.parentNode.removeChild(t))})),n.addEventListener("error",(function(){n.isLoaded||(n.isLoaded=!0,t.parentNode.removeChild(t))})),n.href="".concat(e,"?").concat(Date.now()),t.nextSibling?t.parentNode.insertBefore(n,t.nextSibling):t.parentNode.appendChild(n)}}function u(){var t=document.querySelectorAll("link");o.call(t,(function(t){!0!==t.visited&&c(t)}))}function h(t){return!!/^[a-zA-Z][a-zA-Z\d+\-.]*:/.test(t)}t.exports=function(t,e){if(i)return console.log("no window.document found, will not HMR CSS"),a;var n,l,d=function(t){var e=s[t];if(!e){if(document.currentScript)e=document.currentScript.src;else{var n=document.getElementsByTagName("script"),i=n[n.length-1];i&&(e=i.src)}s[t]=e}return function(t){if(!e)return null;var n=e.split(/([^\\/]+)\.js$/),s=n&&n[1];return s&&t?t.split(",").map((function(t){var n=new RegExp("".concat(s,"\\.js$"),"g");return r(e.replace(n,"".concat(t.replace(/{fileName}/g,s),".css")))})):[e.replace(".js",".css")]}}(t);return n=function(){var t=d(e.filename),n=function(t){if(!t)return!1;var e=document.querySelectorAll("link"),n=!1;return o.call(e,(function(e){if(e.href){var s=function(t,e){var n;return t=r(t),e.some((function(r){t.indexOf(e)>-1&&(n=r)})),n}(e.href,t);h(s)&&!0!==e.visited&&s&&(c(e,s),n=!0)}})),n}(t);if(e.locals)return console.log("[HMR] Detected local css modules. Reload all css"),void u();n?console.log("[HMR] css reload %s",t.join(" ")):(console.log("[HMR] Reload all css"),u())},50,l=0,function(){var t=this,e=arguments;clearTimeout(l),l=setTimeout((function(){return n.apply(t,e)}),50)}}},618:t=>{t.exports=function(t){if(t=t.trim(),/^data:/i.test(t))return t;var e=-1!==t.indexOf("//")?t.split("//")[0]+"//":"",n=t.replace(new RegExp(e,"i"),"").split("/"),r=n[0].toLowerCase().replace(/\.$/,"");return n[0]="",e+r+n.reduce((function(t,e){switch(e){case"..":t.pop();break;case".":break;default:t.push(e)}return t}),[]).join("/")}},307:(t,e,n)=>{var r=n(783)(t.id,{locals:!1});t.hot.dispose(r),t.hot.accept(void 0,r)}},r={};function s(t){var e=r[t];if(void 0!==e){if(void 0!==e.error)throw e.error;return e.exports}var i=r[t]={id:t,exports:{}};try{var o={id:t,module:i,factory:n[t],require:s};s.i.forEach((function(t){t(o)})),i=o.module,o.factory.call(i.exports,i,i.exports,o.require)}catch(t){throw i.error=t,t}return i.exports}s.m=n,s.c=r,s.i=[],s.hu=t=>t+"."+s.h()+".hot-update.js",s.miniCssF=t=>{},s.hmrF=()=>"main."+s.h()+".hot-update.json",s.h=()=>"defef49967e9f32fb809",s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),t={},e="chat-app:",s.l=(n,r,i,o)=>{if(t[n])t[n].push(r);else{var a,c;if(void 0!==i)for(var u=document.getElementsByTagName("script"),h=0;h<u.length;h++){var l=u[h];if(l.getAttribute("src")==n||l.getAttribute("data-webpack")==e+i){a=l;break}}a||(c=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,s.nc&&a.setAttribute("nonce",s.nc),a.setAttribute("data-webpack",e+i),a.src=n),t[n]=[r];var d=(e,r)=>{a.onerror=a.onload=null,clearTimeout(f);var s=t[n];if(delete t[n],a.parentNode&&a.parentNode.removeChild(a),s&&s.forEach((t=>t(r))),e)return e(r)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),c&&document.head.appendChild(a)}},(()=>{var t,e,n,r={},i=s.c,o=[],a=[],c="idle",u=0,h=[];function l(t){c=t;for(var e=[],n=0;n<a.length;n++)e[n]=a[n].call(null,t);return Promise.all(e)}function d(){0==--u&&l("ready").then((function(){if(0===u){var t=h;h=[];for(var e=0;e<t.length;e++)t[e]()}}))}function f(t){if("idle"!==c)throw new Error("check() is only allowed in idle status");return l("check").then(s.hmrM).then((function(n){return n?l("prepare").then((function(){var r=[];return e=[],Promise.all(Object.keys(s.hmrC).reduce((function(t,i){return s.hmrC[i](n.c,n.r,n.m,t,e,r),t}),[])).then((function(){return e=function(){return t?g(t):l("ready").then((function(){return r}))},0===u?e():new Promise((function(t){h.push((function(){t(e())}))}));var e}))})):l(m()?"ready":"idle").then((function(){return null}))}))}function p(t){return"ready"!==c?Promise.resolve().then((function(){throw new Error("apply() is only allowed in ready status (state: "+c+")")})):g(t)}function g(t){t=t||{},m();var r=e.map((function(e){return e(t)}));e=void 0;var s=r.map((function(t){return t.error})).filter(Boolean);if(s.length>0)return l("abort").then((function(){throw s[0]}));var i=l("dispose");r.forEach((function(t){t.dispose&&t.dispose()}));var o,a=l("apply"),c=function(t){o||(o=t)},u=[];return r.forEach((function(t){if(t.apply){var e=t.apply(c);if(e)for(var n=0;n<e.length;n++)u.push(e[n])}})),Promise.all([i,a]).then((function(){return o?l("fail").then((function(){throw o})):n?g(t).then((function(t){return u.forEach((function(e){t.indexOf(e)<0&&t.push(e)})),t})):l("idle").then((function(){return u}))}))}function m(){if(n)return e||(e=[]),Object.keys(s.hmrI).forEach((function(t){n.forEach((function(n){s.hmrI[t](n,e)}))})),n=void 0,!0}s.hmrD=r,s.i.push((function(h){var g,m,y,v,w=h.module,E=function(e,n){var r=i[n];if(!r)return e;var s=function(s){if(r.hot.active){if(i[s]){var a=i[s].parents;-1===a.indexOf(n)&&a.push(n)}else o=[n],t=s;-1===r.children.indexOf(s)&&r.children.push(s)}else console.warn("[HMR] unexpected require("+s+") from disposed module "+n),o=[];return e(s)},a=function(t){return{configurable:!0,enumerable:!0,get:function(){return e[t]},set:function(n){e[t]=n}}};for(var h in e)Object.prototype.hasOwnProperty.call(e,h)&&"e"!==h&&Object.defineProperty(s,h,a(h));return s.e=function(t){return function(t){switch(c){case"ready":l("prepare");case"prepare":return u++,t.then(d,d),t;default:return t}}(e.e(t))},s}(h.require,h.id);w.hot=(g=h.id,m=w,v={_acceptedDependencies:{},_acceptedErrorHandlers:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_selfInvalidated:!1,_disposeHandlers:[],_main:y=t!==g,_requireSelf:function(){o=m.parents.slice(),t=y?void 0:g,s(g)},active:!0,accept:function(t,e,n){if(void 0===t)v._selfAccepted=!0;else if("function"==typeof t)v._selfAccepted=t;else if("object"==typeof t&&null!==t)for(var r=0;r<t.length;r++)v._acceptedDependencies[t[r]]=e||function(){},v._acceptedErrorHandlers[t[r]]=n;else v._acceptedDependencies[t]=e||function(){},v._acceptedErrorHandlers[t]=n},decline:function(t){if(void 0===t)v._selfDeclined=!0;else if("object"==typeof t&&null!==t)for(var e=0;e<t.length;e++)v._declinedDependencies[t[e]]=!0;else v._declinedDependencies[t]=!0},dispose:function(t){v._disposeHandlers.push(t)},addDisposeHandler:function(t){v._disposeHandlers.push(t)},removeDisposeHandler:function(t){var e=v._disposeHandlers.indexOf(t);e>=0&&v._disposeHandlers.splice(e,1)},invalidate:function(){switch(this._selfInvalidated=!0,c){case"idle":e=[],Object.keys(s.hmrI).forEach((function(t){s.hmrI[t](g,e)})),l("ready");break;case"ready":Object.keys(s.hmrI).forEach((function(t){s.hmrI[t](g,e)}));break;case"prepare":case"check":case"dispose":case"apply":(n=n||[]).push(g)}},check:f,apply:p,status:function(t){if(!t)return c;a.push(t)},addStatusHandler:function(t){a.push(t)},removeStatusHandler:function(t){var e=a.indexOf(t);e>=0&&a.splice(e,1)},data:r[g]},t=void 0,v),w.parents=o,w.children=[],o=[],h.require=E})),s.hmrC={},s.hmrI={}})(),(()=>{var t;s.g.importScripts&&(t=s.g.location+"");var e=s.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");if(n.length)for(var r=n.length-1;r>-1&&!t;)t=n[r--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=t})(),(()=>{if("undefined"!=typeof document){var t=[],e=[],n=n=>({dispose:()=>{for(var e=0;e<t.length;e++){var n=t[e];n.parentNode&&n.parentNode.removeChild(n)}t.length=0},apply:()=>{for(var t=0;t<e.length;t++)e[t].rel="stylesheet";e.length=0}});s.hmrC.miniCss=(r,i,o,a,c,u)=>{c.push(n),r.forEach((n=>{var r=s.miniCssF(n),i=s.p+r,o=((t,e)=>{for(var n=document.getElementsByTagName("link"),r=0;r<n.length;r++){var s=(o=n[r]).getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(s===t||s===e))return o}var i=document.getElementsByTagName("style");for(r=0;r<i.length;r++){var o;if((s=(o=i[r]).getAttribute("data-href"))===t||s===e)return o}})(r,i);o&&a.push(new Promise(((r,s)=>{var a=((t,e,n,r,s)=>{var i=document.createElement("link");return i.rel="stylesheet",i.type="text/css",i.onerror=i.onload=n=>{if(i.onerror=i.onload=null,"load"===n.type)r();else{var o=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.href||e,c=new Error("Loading CSS chunk "+t+" failed.\n("+a+")");c.code="CSS_CHUNK_LOAD_FAILED",c.type=o,c.request=a,i.parentNode&&i.parentNode.removeChild(i),s(c)}},i.href=e,n?n.parentNode.insertBefore(i,n.nextSibling):document.head.appendChild(i),i})(n,i,o,(()=>{a.as="style",a.rel="preload",r()}),s);t.push(o),e.push(a)})))}))}}})(),(()=>{var t,e,n,r,i,o=s.hmrS_jsonp=s.hmrS_jsonp||{179:0},a={};function c(e,n){return t=n,new Promise(((t,n)=>{a[e]=t;var r=s.p+s.hu(e),i=new Error;s.l(r,(t=>{if(a[e]){a[e]=void 0;var r=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;i.message="Loading hot update chunk "+e+" failed.\n("+r+": "+s+")",i.name="ChunkLoadError",i.type=r,i.request=s,n(i)}}))}))}function u(t){function a(t){for(var e=[t],n={},r=e.map((function(t){return{chain:[t],id:t}}));r.length>0;){var i=r.pop(),o=i.id,a=i.chain,u=s.c[o];if(u&&(!u.hot._selfAccepted||u.hot._selfInvalidated)){if(u.hot._selfDeclined)return{type:"self-declined",chain:a,moduleId:o};if(u.hot._main)return{type:"unaccepted",chain:a,moduleId:o};for(var h=0;h<u.parents.length;h++){var l=u.parents[h],d=s.c[l];if(d){if(d.hot._declinedDependencies[o])return{type:"declined",chain:a.concat([l]),moduleId:o,parentId:l};-1===e.indexOf(l)&&(d.hot._acceptedDependencies[o]?(n[l]||(n[l]=[]),c(n[l],[o])):(delete n[l],e.push(l),r.push({chain:a.concat([l]),id:l})))}}}}return{type:"accepted",moduleId:t,outdatedModules:e,outdatedDependencies:n}}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];-1===t.indexOf(r)&&t.push(r)}}s.f&&delete s.f.jsonpHmr,e=void 0;var u={},h=[],l={},d=function(t){console.warn("[HMR] unexpected require("+t.id+") to disposed module")};for(var f in n)if(s.o(n,f)){var p,g=n[f],m=!1,y=!1,v=!1,w="";switch((p=g?a(f):{type:"disposed",moduleId:f}).chain&&(w="\nUpdate propagation: "+p.chain.join(" -> ")),p.type){case"self-declined":t.onDeclined&&t.onDeclined(p),t.ignoreDeclined||(m=new Error("Aborted because of self decline: "+p.moduleId+w));break;case"declined":t.onDeclined&&t.onDeclined(p),t.ignoreDeclined||(m=new Error("Aborted because of declined dependency: "+p.moduleId+" in "+p.parentId+w));break;case"unaccepted":t.onUnaccepted&&t.onUnaccepted(p),t.ignoreUnaccepted||(m=new Error("Aborted because "+f+" is not accepted"+w));break;case"accepted":t.onAccepted&&t.onAccepted(p),y=!0;break;case"disposed":t.onDisposed&&t.onDisposed(p),v=!0;break;default:throw new Error("Unexception type "+p.type)}if(m)return{error:m};if(y)for(f in l[f]=g,c(h,p.outdatedModules),p.outdatedDependencies)s.o(p.outdatedDependencies,f)&&(u[f]||(u[f]=[]),c(u[f],p.outdatedDependencies[f]));v&&(c(h,[p.moduleId]),l[f]=d)}n=void 0;for(var E,b=[],_=0;_<h.length;_++){var T=h[_],S=s.c[T];S&&(S.hot._selfAccepted||S.hot._main)&&l[T]!==d&&!S.hot._selfInvalidated&&b.push({module:T,require:S.hot._requireSelf,errorHandler:S.hot._selfAccepted})}return{dispose:function(){var t;r.forEach((function(t){delete o[t]})),r=void 0;for(var e,n=h.slice();n.length>0;){var i=n.pop(),a=s.c[i];if(a){var c={},l=a.hot._disposeHandlers;for(_=0;_<l.length;_++)l[_].call(null,c);for(s.hmrD[i]=c,a.hot.active=!1,delete s.c[i],delete u[i],_=0;_<a.children.length;_++){var d=s.c[a.children[_]];d&&(t=d.parents.indexOf(i))>=0&&d.parents.splice(t,1)}}}for(var f in u)if(s.o(u,f)&&(a=s.c[f]))for(E=u[f],_=0;_<E.length;_++)e=E[_],(t=a.children.indexOf(e))>=0&&a.children.splice(t,1)},apply:function(e){for(var n in l)s.o(l,n)&&(s.m[n]=l[n]);for(var r=0;r<i.length;r++)i[r](s);for(var o in u)if(s.o(u,o)){var a=s.c[o];if(a){E=u[o];for(var c=[],d=[],f=[],p=0;p<E.length;p++){var g=E[p],m=a.hot._acceptedDependencies[g],y=a.hot._acceptedErrorHandlers[g];if(m){if(-1!==c.indexOf(m))continue;c.push(m),d.push(y),f.push(g)}}for(var v=0;v<c.length;v++)try{c[v].call(null,E)}catch(n){if("function"==typeof d[v])try{d[v](n,{moduleId:o,dependencyId:f[v]})}catch(r){t.onErrored&&t.onErrored({type:"accept-error-handler-errored",moduleId:o,dependencyId:f[v],error:r,originalError:n}),t.ignoreErrored||(e(r),e(n))}else t.onErrored&&t.onErrored({type:"accept-errored",moduleId:o,dependencyId:f[v],error:n}),t.ignoreErrored||e(n)}}}for(var w=0;w<b.length;w++){var _=b[w],T=_.module;try{_.require(T)}catch(n){if("function"==typeof _.errorHandler)try{_.errorHandler(n,{moduleId:T,module:s.c[T]})}catch(r){t.onErrored&&t.onErrored({type:"self-accept-error-handler-errored",moduleId:T,error:r,originalError:n}),t.ignoreErrored||(e(r),e(n))}else t.onErrored&&t.onErrored({type:"self-accept-errored",moduleId:T,error:n}),t.ignoreErrored||e(n)}}return h}}}self.webpackHotUpdatechat_app=(e,r,o)=>{for(var c in r)s.o(r,c)&&(n[c]=r[c],t&&t.push(c));o&&i.push(o),a[e]&&(a[e](),a[e]=void 0)},s.hmrI.jsonp=function(t,e){n||(n={},i=[],r=[],e.push(u)),s.o(n,t)||(n[t]=s.m[t])},s.hmrC.jsonp=function(t,a,h,l,d,f){d.push(u),e={},r=a,n=h.reduce((function(t,e){return t[e]=!1,t}),{}),i=[],t.forEach((function(t){s.o(o,t)&&void 0!==o[t]?(l.push(c(t,f)),e[t]=!0):e[t]=!1})),s.f&&(s.f.jsonpHmr=function(t,n){e&&s.o(e,t)&&!e[t]&&(n.push(c(t)),e[t]=!0)})},s.hmrM=()=>{if("undefined"==typeof fetch)throw new Error("No browser support: need fetch API");return fetch(s.p+s.hmrF()).then((t=>{if(404!==t.status){if(!t.ok)throw new Error("Failed to fetch update manifest "+t.statusText);return t.json()}}))}})(),s(132)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Z0J6RyxJQUM5QmtHLEVBQW9CbEcsSUFBVyxFQUVqQyxFQUVGLEVBRUFQLEVBQW9Cc0MsS0FBTyxLQUMxQixHQUFxQixvQkFBVjdtRCxNQUF1QixNQUFNLElBQUkvckIsTUFBTSxzQ0FDbEQsT0FBTytyQixNQUFNdWtELEVBQW9CM3hFLEVBQUkyeEUsRUFBb0JTLFFBQVFoaEUsTUFBTW1iLElBQ3RFLEdBQXVCLE1BQXBCQSxFQUFTSCxPQUFaLENBQ0EsSUFBSUcsRUFBUzR1RCxHQUFJLE1BQU0sSUFBSTk1RSxNQUFNLG1DQUFxQ2tyQixFQUFTQyxZQUMvRSxPQUFPRCxFQUFTNnVELE1BRmtCLENBRVosR0FDckIsTUN0ZnVCekosRUFBb0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaGF0LWFwcC93ZWJwYWNrL3J1bnRpbWUvbG9hZCBzY3JpcHQiLCJ3ZWJwYWNrOi8vY2hhdC1hcHAvLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL3V0aWwvZGlzdC9pbmRleC5lc20yMDE3LmpzIiwid2VicGFjazovL2NoYXQtYXBwLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9jb21wb25lbnQvZGlzdC9lc20vaW5kZXguZXNtMjAxNy5qcyIsIndlYnBhY2s6Ly9jaGF0LWFwcC8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvbG9nZ2VyL2Rpc3QvZXNtL2luZGV4LmVzbTIwMTcuanMiLCJ3ZWJwYWNrOi8vY2hhdC1hcHAvLi9ub2RlX21vZHVsZXMvaWRiL2J1aWxkL3dyYXAtaWRiLXZhbHVlLmpzIiwid2VicGFjazovL2NoYXQtYXBwLy4vbm9kZV9tb2R1bGVzL2lkYi9idWlsZC9pbmRleC5qcyIsIndlYnBhY2s6Ly9jaGF0LWFwcC8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvYXBwL2Rpc3QvZXNtL2luZGV4LmVzbTIwMTcuanMiLCJ3ZWJwYWNrOi8vY2hhdC1hcHAvLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL3dlYmNoYW5uZWwtd3JhcHBlci9kaXN0L2VzbS9pbmRleC5lc20yMDE3LmpzIiwid2VicGFjazovL2NoYXQtYXBwLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9maXJlc3RvcmUvZGlzdC9pbmRleC5lc20yMDE3LmpzIiwid2VicGFjazovL2NoYXQtYXBwLy4vbm9kZV9tb2R1bGVzL2ZpcmViYXNlL2FwcC9kaXN0L2VzbS9pbmRleC5lc20uanMiLCJ3ZWJwYWNrOi8vY2hhdC1hcHAvLi9zcmMvZmlyZWJhc2VDb25maWcudHMiLCJ3ZWJwYWNrOi8vY2hhdC1hcHAvLi9zcmMvcmVkdXgvYWN0aW9ucy50cyIsIndlYnBhY2s6Ly9jaGF0LWFwcC8uL3NyYy9yZWR1eC9yZWR1Y2VyLnRzIiwid2VicGFjazovL2NoYXQtYXBwLy4vc3JjL3JlZHV4L3N0b3JlLnRzIiwid2VicGFjazovL2NoYXQtYXBwLy4vc3JjL2luZGV4LnRzIiwid2VicGFjazovL2NoYXQtYXBwLy4vbm9kZV9tb2R1bGVzL21pbmktY3NzLWV4dHJhY3QtcGx1Z2luL2Rpc3QvaG1yL2hvdE1vZHVsZVJlcGxhY2VtZW50LmpzIiwid2VicGFjazovL2NoYXQtYXBwLy4vbm9kZV9tb2R1bGVzL21pbmktY3NzLWV4dHJhY3QtcGx1Z2luL2Rpc3QvaG1yL25vcm1hbGl6ZS11cmwuanMiLCJ3ZWJwYWNrOi8vY2hhdC1hcHAvLi9zcmMvc3R5bGUuY3NzP2UzMjAiLCJ3ZWJwYWNrOi8vY2hhdC1hcHAvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vY2hhdC1hcHAvd2VicGFjay9ydW50aW1lL2dldCBqYXZhc2NyaXB0IHVwZGF0ZSBjaHVuayBmaWxlbmFtZSIsIndlYnBhY2s6Ly9jaGF0LWFwcC93ZWJwYWNrL3J1bnRpbWUvZ2V0IG1pbmktY3NzIGNodW5rIGZpbGVuYW1lIiwid2VicGFjazovL2NoYXQtYXBwL3dlYnBhY2svcnVudGltZS9nZXQgdXBkYXRlIG1hbmlmZXN0IGZpbGVuYW1lIiwid2VicGFjazovL2NoYXQtYXBwL3dlYnBhY2svcnVudGltZS9nZXRGdWxsSGFzaCIsIndlYnBhY2s6Ly9jaGF0LWFwcC93ZWJwYWNrL3J1bnRpbWUvZ2xvYmFsIiwid2VicGFjazovL2NoYXQtYXBwL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vY2hhdC1hcHAvd2VicGFjay9ydW50aW1lL2hvdCBtb2R1bGUgcmVwbGFjZW1lbnQiLCJ3ZWJwYWNrOi8vY2hhdC1hcHAvd2VicGFjay9ydW50aW1lL3B1YmxpY1BhdGgiLCJ3ZWJwYWNrOi8vY2hhdC1hcHAvd2VicGFjay9ydW50aW1lL2NzcyBsb2FkaW5nIiwid2VicGFjazovL2NoYXQtYXBwL3dlYnBhY2svcnVudGltZS9qc29ucCBjaHVuayBsb2FkaW5nIiwid2VicGFjazovL2NoYXQtYXBwL3dlYnBhY2svc3RhcnR1cCJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgaW5Qcm9ncmVzcyA9IHt9O1xudmFyIGRhdGFXZWJwYWNrUHJlZml4ID0gXCJjaGF0LWFwcDpcIjtcbi8vIGxvYWRTY3JpcHQgZnVuY3Rpb24gdG8gbG9hZCBhIHNjcmlwdCB2aWEgc2NyaXB0IHRhZ1xuX193ZWJwYWNrX3JlcXVpcmVfXy5sID0gKHVybCwgZG9uZSwga2V5LCBjaHVua0lkKSA9PiB7XG5cdGlmKGluUHJvZ3Jlc3NbdXJsXSkgeyBpblByb2dyZXNzW3VybF0ucHVzaChkb25lKTsgcmV0dXJuOyB9XG5cdHZhciBzY3JpcHQsIG5lZWRBdHRhY2g7XG5cdGlmKGtleSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0dmFyIHNjcmlwdHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNjcmlwdFwiKTtcblx0XHRmb3IodmFyIGkgPSAwOyBpIDwgc2NyaXB0cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIHMgPSBzY3JpcHRzW2ldO1xuXHRcdFx0aWYocy5nZXRBdHRyaWJ1dGUoXCJzcmNcIikgPT0gdXJsIHx8IHMuZ2V0QXR0cmlidXRlKFwiZGF0YS13ZWJwYWNrXCIpID09IGRhdGFXZWJwYWNrUHJlZml4ICsga2V5KSB7IHNjcmlwdCA9IHM7IGJyZWFrOyB9XG5cdFx0fVxuXHR9XG5cdGlmKCFzY3JpcHQpIHtcblx0XHRuZWVkQXR0YWNoID0gdHJ1ZTtcblx0XHRzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcblxuXHRcdHNjcmlwdC5jaGFyc2V0ID0gJ3V0Zi04Jztcblx0XHRzY3JpcHQudGltZW91dCA9IDEyMDtcblx0XHRpZiAoX193ZWJwYWNrX3JlcXVpcmVfXy5uYykge1xuXHRcdFx0c2NyaXB0LnNldEF0dHJpYnV0ZShcIm5vbmNlXCIsIF9fd2VicGFja19yZXF1aXJlX18ubmMpO1xuXHRcdH1cblx0XHRzY3JpcHQuc2V0QXR0cmlidXRlKFwiZGF0YS13ZWJwYWNrXCIsIGRhdGFXZWJwYWNrUHJlZml4ICsga2V5KTtcblxuXHRcdHNjcmlwdC5zcmMgPSB1cmw7XG5cdH1cblx0aW5Qcm9ncmVzc1t1cmxdID0gW2RvbmVdO1xuXHR2YXIgb25TY3JpcHRDb21wbGV0ZSA9IChwcmV2LCBldmVudCkgPT4ge1xuXHRcdC8vIGF2b2lkIG1lbSBsZWFrcyBpbiBJRS5cblx0XHRzY3JpcHQub25lcnJvciA9IHNjcmlwdC5vbmxvYWQgPSBudWxsO1xuXHRcdGNsZWFyVGltZW91dCh0aW1lb3V0KTtcblx0XHR2YXIgZG9uZUZucyA9IGluUHJvZ3Jlc3NbdXJsXTtcblx0XHRkZWxldGUgaW5Qcm9ncmVzc1t1cmxdO1xuXHRcdHNjcmlwdC5wYXJlbnROb2RlICYmIHNjcmlwdC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHNjcmlwdCk7XG5cdFx0ZG9uZUZucyAmJiBkb25lRm5zLmZvckVhY2goKGZuKSA9PiAoZm4oZXZlbnQpKSk7XG5cdFx0aWYocHJldikgcmV0dXJuIHByZXYoZXZlbnQpO1xuXHR9XG5cdHZhciB0aW1lb3V0ID0gc2V0VGltZW91dChvblNjcmlwdENvbXBsZXRlLmJpbmQobnVsbCwgdW5kZWZpbmVkLCB7IHR5cGU6ICd0aW1lb3V0JywgdGFyZ2V0OiBzY3JpcHQgfSksIDEyMDAwMCk7XG5cdHNjcmlwdC5vbmVycm9yID0gb25TY3JpcHRDb21wbGV0ZS5iaW5kKG51bGwsIHNjcmlwdC5vbmVycm9yKTtcblx0c2NyaXB0Lm9ubG9hZCA9IG9uU2NyaXB0Q29tcGxldGUuYmluZChudWxsLCBzY3JpcHQub25sb2FkKTtcblx0bmVlZEF0dGFjaCAmJiBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHNjcmlwdCk7XG59OyIsIi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBAZmlsZW92ZXJ2aWV3IEZpcmViYXNlIGNvbnN0YW50cy4gIFNvbWUgb2YgdGhlc2UgKEBkZWZpbmVzKSBjYW4gYmUgb3ZlcnJpZGRlbiBhdCBjb21waWxlLXRpbWUuXHJcbiAqL1xyXG5jb25zdCBDT05TVEFOVFMgPSB7XHJcbiAgICAvKipcclxuICAgICAqIEBkZWZpbmUge2Jvb2xlYW59IFdoZXRoZXIgdGhpcyBpcyB0aGUgY2xpZW50IE5vZGUuanMgU0RLLlxyXG4gICAgICovXHJcbiAgICBOT0RFX0NMSUVOVDogZmFsc2UsXHJcbiAgICAvKipcclxuICAgICAqIEBkZWZpbmUge2Jvb2xlYW59IFdoZXRoZXIgdGhpcyBpcyB0aGUgQWRtaW4gTm9kZS5qcyBTREsuXHJcbiAgICAgKi9cclxuICAgIE5PREVfQURNSU46IGZhbHNlLFxyXG4gICAgLyoqXHJcbiAgICAgKiBGaXJlYmFzZSBTREsgVmVyc2lvblxyXG4gICAgICovXHJcbiAgICBTREtfVkVSU0lPTjogJyR7SlNDT1JFX1ZFUlNJT059J1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVGhyb3dzIGFuIGVycm9yIGlmIHRoZSBwcm92aWRlZCBhc3NlcnRpb24gaXMgZmFsc3lcclxuICovXHJcbmNvbnN0IGFzc2VydCA9IGZ1bmN0aW9uIChhc3NlcnRpb24sIG1lc3NhZ2UpIHtcclxuICAgIGlmICghYXNzZXJ0aW9uKSB7XHJcbiAgICAgICAgdGhyb3cgYXNzZXJ0aW9uRXJyb3IobWVzc2FnZSk7XHJcbiAgICB9XHJcbn07XHJcbi8qKlxyXG4gKiBSZXR1cm5zIGFuIEVycm9yIG9iamVjdCBzdWl0YWJsZSBmb3IgdGhyb3dpbmcuXHJcbiAqL1xyXG5jb25zdCBhc3NlcnRpb25FcnJvciA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XHJcbiAgICByZXR1cm4gbmV3IEVycm9yKCdGaXJlYmFzZSBEYXRhYmFzZSAoJyArXHJcbiAgICAgICAgQ09OU1RBTlRTLlNES19WRVJTSU9OICtcclxuICAgICAgICAnKSBJTlRFUk5BTCBBU1NFUlQgRkFJTEVEOiAnICtcclxuICAgICAgICBtZXNzYWdlKTtcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3Qgc3RyaW5nVG9CeXRlQXJyYXkkMSA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgIC8vIFRPRE8odXNlcik6IFVzZSBuYXRpdmUgaW1wbGVtZW50YXRpb25zIGlmL3doZW4gYXZhaWxhYmxlXHJcbiAgICBjb25zdCBvdXQgPSBbXTtcclxuICAgIGxldCBwID0gMDtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgbGV0IGMgPSBzdHIuY2hhckNvZGVBdChpKTtcclxuICAgICAgICBpZiAoYyA8IDEyOCkge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IGM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMgPCAyMDQ4KSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gNikgfCAxOTI7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKChjICYgMHhmYzAwKSA9PT0gMHhkODAwICYmXHJcbiAgICAgICAgICAgIGkgKyAxIDwgc3RyLmxlbmd0aCAmJlxyXG4gICAgICAgICAgICAoc3RyLmNoYXJDb2RlQXQoaSArIDEpICYgMHhmYzAwKSA9PT0gMHhkYzAwKSB7XHJcbiAgICAgICAgICAgIC8vIFN1cnJvZ2F0ZSBQYWlyXHJcbiAgICAgICAgICAgIGMgPSAweDEwMDAwICsgKChjICYgMHgwM2ZmKSA8PCAxMCkgKyAoc3RyLmNoYXJDb2RlQXQoKytpKSAmIDB4MDNmZik7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gMTgpIHwgMjQwO1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiAxMikgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDYpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyA+PiAxMikgfCAyMjQ7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDYpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBvdXQ7XHJcbn07XHJcbi8qKlxyXG4gKiBUdXJucyBhbiBhcnJheSBvZiBudW1iZXJzIGludG8gdGhlIHN0cmluZyBnaXZlbiBieSB0aGUgY29uY2F0ZW5hdGlvbiBvZiB0aGVcclxuICogY2hhcmFjdGVycyB0byB3aGljaCB0aGUgbnVtYmVycyBjb3JyZXNwb25kLlxyXG4gKiBAcGFyYW0gYnl0ZXMgQXJyYXkgb2YgbnVtYmVycyByZXByZXNlbnRpbmcgY2hhcmFjdGVycy5cclxuICogQHJldHVybiBTdHJpbmdpZmljYXRpb24gb2YgdGhlIGFycmF5LlxyXG4gKi9cclxuY29uc3QgYnl0ZUFycmF5VG9TdHJpbmcgPSBmdW5jdGlvbiAoYnl0ZXMpIHtcclxuICAgIC8vIFRPRE8odXNlcik6IFVzZSBuYXRpdmUgaW1wbGVtZW50YXRpb25zIGlmL3doZW4gYXZhaWxhYmxlXHJcbiAgICBjb25zdCBvdXQgPSBbXTtcclxuICAgIGxldCBwb3MgPSAwLCBjID0gMDtcclxuICAgIHdoaWxlIChwb3MgPCBieXRlcy5sZW5ndGgpIHtcclxuICAgICAgICBjb25zdCBjMSA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICBpZiAoYzEgPCAxMjgpIHtcclxuICAgICAgICAgICAgb3V0W2MrK10gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGMxKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYzEgPiAxOTEgJiYgYzEgPCAyMjQpIHtcclxuICAgICAgICAgICAgY29uc3QgYzIgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIG91dFtjKytdID0gU3RyaW5nLmZyb21DaGFyQ29kZSgoKGMxICYgMzEpIDw8IDYpIHwgKGMyICYgNjMpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYzEgPiAyMzkgJiYgYzEgPCAzNjUpIHtcclxuICAgICAgICAgICAgLy8gU3Vycm9nYXRlIFBhaXJcclxuICAgICAgICAgICAgY29uc3QgYzIgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIGNvbnN0IGMzID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgICAgICBjb25zdCBjNCA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICAgICAgY29uc3QgdSA9ICgoKGMxICYgNykgPDwgMTgpIHwgKChjMiAmIDYzKSA8PCAxMikgfCAoKGMzICYgNjMpIDw8IDYpIHwgKGM0ICYgNjMpKSAtXHJcbiAgICAgICAgICAgICAgICAweDEwMDAwO1xyXG4gICAgICAgICAgICBvdXRbYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoMHhkODAwICsgKHUgPj4gMTApKTtcclxuICAgICAgICAgICAgb3V0W2MrK10gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4ZGMwMCArICh1ICYgMTAyMykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgYzIgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIGNvbnN0IGMzID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgICAgICBvdXRbYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoKChjMSAmIDE1KSA8PCAxMikgfCAoKGMyICYgNjMpIDw8IDYpIHwgKGMzICYgNjMpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb3V0LmpvaW4oJycpO1xyXG59O1xyXG4vLyBXZSBkZWZpbmUgaXQgYXMgYW4gb2JqZWN0IGxpdGVyYWwgaW5zdGVhZCBvZiBhIGNsYXNzIGJlY2F1c2UgYSBjbGFzcyBjb21waWxlZCBkb3duIHRvIGVzNSBjYW4ndFxyXG4vLyBiZSB0cmVlc2hha2VkLiBodHRwczovL2dpdGh1Yi5jb20vcm9sbHVwL3JvbGx1cC9pc3N1ZXMvMTY5MVxyXG4vLyBTdGF0aWMgbG9va3VwIG1hcHMsIGxhemlseSBwb3B1bGF0ZWQgYnkgaW5pdF8oKVxyXG5jb25zdCBiYXNlNjQgPSB7XHJcbiAgICAvKipcclxuICAgICAqIE1hcHMgYnl0ZXMgdG8gY2hhcmFjdGVycy5cclxuICAgICAqL1xyXG4gICAgYnl0ZVRvQ2hhck1hcF86IG51bGwsXHJcbiAgICAvKipcclxuICAgICAqIE1hcHMgY2hhcmFjdGVycyB0byBieXRlcy5cclxuICAgICAqL1xyXG4gICAgY2hhclRvQnl0ZU1hcF86IG51bGwsXHJcbiAgICAvKipcclxuICAgICAqIE1hcHMgYnl0ZXMgdG8gd2Vic2FmZSBjaGFyYWN0ZXJzLlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgYnl0ZVRvQ2hhck1hcFdlYlNhZmVfOiBudWxsLFxyXG4gICAgLyoqXHJcbiAgICAgKiBNYXBzIHdlYnNhZmUgY2hhcmFjdGVycyB0byBieXRlcy5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIGNoYXJUb0J5dGVNYXBXZWJTYWZlXzogbnVsbCxcclxuICAgIC8qKlxyXG4gICAgICogT3VyIGRlZmF1bHQgYWxwaGFiZXQsIHNoYXJlZCBiZXR3ZWVuXHJcbiAgICAgKiBFTkNPREVEX1ZBTFMgYW5kIEVOQ09ERURfVkFMU19XRUJTQUZFXHJcbiAgICAgKi9cclxuICAgIEVOQ09ERURfVkFMU19CQVNFOiAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVonICsgJ2FiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6JyArICcwMTIzNDU2Nzg5JyxcclxuICAgIC8qKlxyXG4gICAgICogT3VyIGRlZmF1bHQgYWxwaGFiZXQuIFZhbHVlIDY0ICg9KSBpcyBzcGVjaWFsOyBpdCBtZWFucyBcIm5vdGhpbmcuXCJcclxuICAgICAqL1xyXG4gICAgZ2V0IEVOQ09ERURfVkFMUygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5FTkNPREVEX1ZBTFNfQkFTRSArICcrLz0nO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogT3VyIHdlYnNhZmUgYWxwaGFiZXQuXHJcbiAgICAgKi9cclxuICAgIGdldCBFTkNPREVEX1ZBTFNfV0VCU0FGRSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5FTkNPREVEX1ZBTFNfQkFTRSArICctXy4nO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogV2hldGhlciB0aGlzIGJyb3dzZXIgc3VwcG9ydHMgdGhlIGF0b2IgYW5kIGJ0b2EgZnVuY3Rpb25zLiBUaGlzIGV4dGVuc2lvblxyXG4gICAgICogc3RhcnRlZCBhdCBNb3ppbGxhIGJ1dCBpcyBub3cgaW1wbGVtZW50ZWQgYnkgbWFueSBicm93c2Vycy4gV2UgdXNlIHRoZVxyXG4gICAgICogQVNTVU1FXyogdmFyaWFibGVzIHRvIGF2b2lkIHB1bGxpbmcgaW4gdGhlIGZ1bGwgdXNlcmFnZW50IGRldGVjdGlvbiBsaWJyYXJ5XHJcbiAgICAgKiBidXQgc3RpbGwgYWxsb3dpbmcgdGhlIHN0YW5kYXJkIHBlci1icm93c2VyIGNvbXBpbGF0aW9ucy5cclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIEhBU19OQVRJVkVfU1VQUE9SVDogdHlwZW9mIGF0b2IgPT09ICdmdW5jdGlvbicsXHJcbiAgICAvKipcclxuICAgICAqIEJhc2U2NC1lbmNvZGUgYW4gYXJyYXkgb2YgYnl0ZXMuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGlucHV0IEFuIGFycmF5IG9mIGJ5dGVzIChudW1iZXJzIHdpdGhcclxuICAgICAqICAgICB2YWx1ZSBpbiBbMCwgMjU1XSkgdG8gZW5jb2RlLlxyXG4gICAgICogQHBhcmFtIHdlYlNhZmUgQm9vbGVhbiBpbmRpY2F0aW5nIHdlIHNob3VsZCB1c2UgdGhlXHJcbiAgICAgKiAgICAgYWx0ZXJuYXRpdmUgYWxwaGFiZXQuXHJcbiAgICAgKiBAcmV0dXJuIFRoZSBiYXNlNjQgZW5jb2RlZCBzdHJpbmcuXHJcbiAgICAgKi9cclxuICAgIGVuY29kZUJ5dGVBcnJheShpbnB1dCwgd2ViU2FmZSkge1xyXG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ2VuY29kZUJ5dGVBcnJheSB0YWtlcyBhbiBhcnJheSBhcyBhIHBhcmFtZXRlcicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmluaXRfKCk7XHJcbiAgICAgICAgY29uc3QgYnl0ZVRvQ2hhck1hcCA9IHdlYlNhZmVcclxuICAgICAgICAgICAgPyB0aGlzLmJ5dGVUb0NoYXJNYXBXZWJTYWZlX1xyXG4gICAgICAgICAgICA6IHRoaXMuYnl0ZVRvQ2hhck1hcF87XHJcbiAgICAgICAgY29uc3Qgb3V0cHV0ID0gW107XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbnB1dC5sZW5ndGg7IGkgKz0gMykge1xyXG4gICAgICAgICAgICBjb25zdCBieXRlMSA9IGlucHV0W2ldO1xyXG4gICAgICAgICAgICBjb25zdCBoYXZlQnl0ZTIgPSBpICsgMSA8IGlucHV0Lmxlbmd0aDtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTIgPSBoYXZlQnl0ZTIgPyBpbnB1dFtpICsgMV0gOiAwO1xyXG4gICAgICAgICAgICBjb25zdCBoYXZlQnl0ZTMgPSBpICsgMiA8IGlucHV0Lmxlbmd0aDtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTMgPSBoYXZlQnl0ZTMgPyBpbnB1dFtpICsgMl0gOiAwO1xyXG4gICAgICAgICAgICBjb25zdCBvdXRCeXRlMSA9IGJ5dGUxID4+IDI7XHJcbiAgICAgICAgICAgIGNvbnN0IG91dEJ5dGUyID0gKChieXRlMSAmIDB4MDMpIDw8IDQpIHwgKGJ5dGUyID4+IDQpO1xyXG4gICAgICAgICAgICBsZXQgb3V0Qnl0ZTMgPSAoKGJ5dGUyICYgMHgwZikgPDwgMikgfCAoYnl0ZTMgPj4gNik7XHJcbiAgICAgICAgICAgIGxldCBvdXRCeXRlNCA9IGJ5dGUzICYgMHgzZjtcclxuICAgICAgICAgICAgaWYgKCFoYXZlQnl0ZTMpIHtcclxuICAgICAgICAgICAgICAgIG91dEJ5dGU0ID0gNjQ7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWhhdmVCeXRlMikge1xyXG4gICAgICAgICAgICAgICAgICAgIG91dEJ5dGUzID0gNjQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3V0cHV0LnB1c2goYnl0ZVRvQ2hhck1hcFtvdXRCeXRlMV0sIGJ5dGVUb0NoYXJNYXBbb3V0Qnl0ZTJdLCBieXRlVG9DaGFyTWFwW291dEJ5dGUzXSwgYnl0ZVRvQ2hhck1hcFtvdXRCeXRlNF0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb3V0cHV0LmpvaW4oJycpO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogQmFzZTY0LWVuY29kZSBhIHN0cmluZy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gaW5wdXQgQSBzdHJpbmcgdG8gZW5jb2RlLlxyXG4gICAgICogQHBhcmFtIHdlYlNhZmUgSWYgdHJ1ZSwgd2Ugc2hvdWxkIHVzZSB0aGVcclxuICAgICAqICAgICBhbHRlcm5hdGl2ZSBhbHBoYWJldC5cclxuICAgICAqIEByZXR1cm4gVGhlIGJhc2U2NCBlbmNvZGVkIHN0cmluZy5cclxuICAgICAqL1xyXG4gICAgZW5jb2RlU3RyaW5nKGlucHV0LCB3ZWJTYWZlKSB7XHJcbiAgICAgICAgLy8gU2hvcnRjdXQgZm9yIE1vemlsbGEgYnJvd3NlcnMgdGhhdCBpbXBsZW1lbnRcclxuICAgICAgICAvLyBhIG5hdGl2ZSBiYXNlNjQgZW5jb2RlciBpbiB0aGUgZm9ybSBvZiBcImJ0b2EvYXRvYlwiXHJcbiAgICAgICAgaWYgKHRoaXMuSEFTX05BVElWRV9TVVBQT1JUICYmICF3ZWJTYWZlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBidG9hKGlucHV0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlQnl0ZUFycmF5KHN0cmluZ1RvQnl0ZUFycmF5JDEoaW5wdXQpLCB3ZWJTYWZlKTtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIEJhc2U2NC1kZWNvZGUgYSBzdHJpbmcuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGlucHV0IHRvIGRlY29kZS5cclxuICAgICAqIEBwYXJhbSB3ZWJTYWZlIFRydWUgaWYgd2Ugc2hvdWxkIHVzZSB0aGVcclxuICAgICAqICAgICBhbHRlcm5hdGl2ZSBhbHBoYWJldC5cclxuICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgZGVjb2RlZCB2YWx1ZS5cclxuICAgICAqL1xyXG4gICAgZGVjb2RlU3RyaW5nKGlucHV0LCB3ZWJTYWZlKSB7XHJcbiAgICAgICAgLy8gU2hvcnRjdXQgZm9yIE1vemlsbGEgYnJvd3NlcnMgdGhhdCBpbXBsZW1lbnRcclxuICAgICAgICAvLyBhIG5hdGl2ZSBiYXNlNjQgZW5jb2RlciBpbiB0aGUgZm9ybSBvZiBcImJ0b2EvYXRvYlwiXHJcbiAgICAgICAgaWYgKHRoaXMuSEFTX05BVElWRV9TVVBQT1JUICYmICF3ZWJTYWZlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhdG9iKGlucHV0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGJ5dGVBcnJheVRvU3RyaW5nKHRoaXMuZGVjb2RlU3RyaW5nVG9CeXRlQXJyYXkoaW5wdXQsIHdlYlNhZmUpKTtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIEJhc2U2NC1kZWNvZGUgYSBzdHJpbmcuXHJcbiAgICAgKlxyXG4gICAgICogSW4gYmFzZS02NCBkZWNvZGluZywgZ3JvdXBzIG9mIGZvdXIgY2hhcmFjdGVycyBhcmUgY29udmVydGVkIGludG8gdGhyZWVcclxuICAgICAqIGJ5dGVzLiAgSWYgdGhlIGVuY29kZXIgZGlkIG5vdCBhcHBseSBwYWRkaW5nLCB0aGUgaW5wdXQgbGVuZ3RoIG1heSBub3RcclxuICAgICAqIGJlIGEgbXVsdGlwbGUgb2YgNC5cclxuICAgICAqXHJcbiAgICAgKiBJbiB0aGlzIGNhc2UsIHRoZSBsYXN0IGdyb3VwIHdpbGwgaGF2ZSBmZXdlciB0aGFuIDQgY2hhcmFjdGVycywgYW5kXHJcbiAgICAgKiBwYWRkaW5nIHdpbGwgYmUgaW5mZXJyZWQuICBJZiB0aGUgZ3JvdXAgaGFzIG9uZSBvciB0d28gY2hhcmFjdGVycywgaXQgZGVjb2Rlc1xyXG4gICAgICogdG8gb25lIGJ5dGUuICBJZiB0aGUgZ3JvdXAgaGFzIHRocmVlIGNoYXJhY3RlcnMsIGl0IGRlY29kZXMgdG8gdHdvIGJ5dGVzLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpbnB1dCBJbnB1dCB0byBkZWNvZGUuXHJcbiAgICAgKiBAcGFyYW0gd2ViU2FmZSBUcnVlIGlmIHdlIHNob3VsZCB1c2UgdGhlIHdlYi1zYWZlIGFscGhhYmV0LlxyXG4gICAgICogQHJldHVybiBieXRlcyByZXByZXNlbnRpbmcgdGhlIGRlY29kZWQgdmFsdWUuXHJcbiAgICAgKi9cclxuICAgIGRlY29kZVN0cmluZ1RvQnl0ZUFycmF5KGlucHV0LCB3ZWJTYWZlKSB7XHJcbiAgICAgICAgdGhpcy5pbml0XygpO1xyXG4gICAgICAgIGNvbnN0IGNoYXJUb0J5dGVNYXAgPSB3ZWJTYWZlXHJcbiAgICAgICAgICAgID8gdGhpcy5jaGFyVG9CeXRlTWFwV2ViU2FmZV9cclxuICAgICAgICAgICAgOiB0aGlzLmNoYXJUb0J5dGVNYXBfO1xyXG4gICAgICAgIGNvbnN0IG91dHB1dCA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5wdXQubGVuZ3RoOykge1xyXG4gICAgICAgICAgICBjb25zdCBieXRlMSA9IGNoYXJUb0J5dGVNYXBbaW5wdXQuY2hhckF0KGkrKyldO1xyXG4gICAgICAgICAgICBjb25zdCBoYXZlQnl0ZTIgPSBpIDwgaW5wdXQubGVuZ3RoO1xyXG4gICAgICAgICAgICBjb25zdCBieXRlMiA9IGhhdmVCeXRlMiA/IGNoYXJUb0J5dGVNYXBbaW5wdXQuY2hhckF0KGkpXSA6IDA7XHJcbiAgICAgICAgICAgICsraTtcclxuICAgICAgICAgICAgY29uc3QgaGF2ZUJ5dGUzID0gaSA8IGlucHV0Lmxlbmd0aDtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTMgPSBoYXZlQnl0ZTMgPyBjaGFyVG9CeXRlTWFwW2lucHV0LmNoYXJBdChpKV0gOiA2NDtcclxuICAgICAgICAgICAgKytpO1xyXG4gICAgICAgICAgICBjb25zdCBoYXZlQnl0ZTQgPSBpIDwgaW5wdXQubGVuZ3RoO1xyXG4gICAgICAgICAgICBjb25zdCBieXRlNCA9IGhhdmVCeXRlNCA/IGNoYXJUb0J5dGVNYXBbaW5wdXQuY2hhckF0KGkpXSA6IDY0O1xyXG4gICAgICAgICAgICArK2k7XHJcbiAgICAgICAgICAgIGlmIChieXRlMSA9PSBudWxsIHx8IGJ5dGUyID09IG51bGwgfHwgYnl0ZTMgPT0gbnVsbCB8fCBieXRlNCA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRGVjb2RlQmFzZTY0U3RyaW5nRXJyb3IoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBvdXRCeXRlMSA9IChieXRlMSA8PCAyKSB8IChieXRlMiA+PiA0KTtcclxuICAgICAgICAgICAgb3V0cHV0LnB1c2gob3V0Qnl0ZTEpO1xyXG4gICAgICAgICAgICBpZiAoYnl0ZTMgIT09IDY0KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBvdXRCeXRlMiA9ICgoYnl0ZTIgPDwgNCkgJiAweGYwKSB8IChieXRlMyA+PiAyKTtcclxuICAgICAgICAgICAgICAgIG91dHB1dC5wdXNoKG91dEJ5dGUyKTtcclxuICAgICAgICAgICAgICAgIGlmIChieXRlNCAhPT0gNjQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBvdXRCeXRlMyA9ICgoYnl0ZTMgPDwgNikgJiAweGMwKSB8IGJ5dGU0O1xyXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dC5wdXNoKG91dEJ5dGUzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb3V0cHV0O1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogTGF6eSBzdGF0aWMgaW5pdGlhbGl6YXRpb24gZnVuY3Rpb24uIENhbGxlZCBiZWZvcmVcclxuICAgICAqIGFjY2Vzc2luZyBhbnkgb2YgdGhlIHN0YXRpYyBtYXAgdmFyaWFibGVzLlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgaW5pdF8oKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmJ5dGVUb0NoYXJNYXBfKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYnl0ZVRvQ2hhck1hcF8gPSB7fTtcclxuICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwXyA9IHt9O1xyXG4gICAgICAgICAgICB0aGlzLmJ5dGVUb0NoYXJNYXBXZWJTYWZlXyA9IHt9O1xyXG4gICAgICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBXZWJTYWZlXyA9IHt9O1xyXG4gICAgICAgICAgICAvLyBXZSB3YW50IHF1aWNrIG1hcHBpbmdzIGJhY2sgYW5kIGZvcnRoLCBzbyB3ZSBwcmVjb21wdXRlIHR3byBtYXBzLlxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuRU5DT0RFRF9WQUxTLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJ5dGVUb0NoYXJNYXBfW2ldID0gdGhpcy5FTkNPREVEX1ZBTFMuY2hhckF0KGkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwX1t0aGlzLmJ5dGVUb0NoYXJNYXBfW2ldXSA9IGk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJ5dGVUb0NoYXJNYXBXZWJTYWZlX1tpXSA9IHRoaXMuRU5DT0RFRF9WQUxTX1dFQlNBRkUuY2hhckF0KGkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwV2ViU2FmZV9bdGhpcy5ieXRlVG9DaGFyTWFwV2ViU2FmZV9baV1dID0gaTtcclxuICAgICAgICAgICAgICAgIC8vIEJlIGZvcmdpdmluZyB3aGVuIGRlY29kaW5nIGFuZCBjb3JyZWN0bHkgZGVjb2RlIGJvdGggZW5jb2RpbmdzLlxyXG4gICAgICAgICAgICAgICAgaWYgKGkgPj0gdGhpcy5FTkNPREVEX1ZBTFNfQkFTRS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBfW3RoaXMuRU5DT0RFRF9WQUxTX1dFQlNBRkUuY2hhckF0KGkpXSA9IGk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwV2ViU2FmZV9bdGhpcy5FTkNPREVEX1ZBTFMuY2hhckF0KGkpXSA9IGk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcbi8qKlxyXG4gKiBBbiBlcnJvciBlbmNvdW50ZXJlZCB3aGlsZSBkZWNvZGluZyBiYXNlNjQgc3RyaW5nLlxyXG4gKi9cclxuY2xhc3MgRGVjb2RlQmFzZTY0U3RyaW5nRXJyb3IgZXh0ZW5kcyBFcnJvciB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xyXG4gICAgICAgIHRoaXMubmFtZSA9ICdEZWNvZGVCYXNlNjRTdHJpbmdFcnJvcic7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFVSTC1zYWZlIGJhc2U2NCBlbmNvZGluZ1xyXG4gKi9cclxuY29uc3QgYmFzZTY0RW5jb2RlID0gZnVuY3Rpb24gKHN0cikge1xyXG4gICAgY29uc3QgdXRmOEJ5dGVzID0gc3RyaW5nVG9CeXRlQXJyYXkkMShzdHIpO1xyXG4gICAgcmV0dXJuIGJhc2U2NC5lbmNvZGVCeXRlQXJyYXkodXRmOEJ5dGVzLCB0cnVlKTtcclxufTtcclxuLyoqXHJcbiAqIFVSTC1zYWZlIGJhc2U2NCBlbmNvZGluZyAod2l0aG91dCBcIi5cIiBwYWRkaW5nIGluIHRoZSBlbmQpLlxyXG4gKiBlLmcuIFVzZWQgaW4gSlNPTiBXZWIgVG9rZW4gKEpXVCkgcGFydHMuXHJcbiAqL1xyXG5jb25zdCBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZyA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgIC8vIFVzZSBiYXNlNjR1cmwgZW5jb2RpbmcgYW5kIHJlbW92ZSBwYWRkaW5nIGluIHRoZSBlbmQgKGRvdCBjaGFyYWN0ZXJzKS5cclxuICAgIHJldHVybiBiYXNlNjRFbmNvZGUoc3RyKS5yZXBsYWNlKC9cXC4vZywgJycpO1xyXG59O1xyXG4vKipcclxuICogVVJMLXNhZmUgYmFzZTY0IGRlY29kaW5nXHJcbiAqXHJcbiAqIE5PVEU6IERPIE5PVCB1c2UgdGhlIGdsb2JhbCBhdG9iKCkgZnVuY3Rpb24gLSBpdCBkb2VzIE5PVCBzdXBwb3J0IHRoZVxyXG4gKiBiYXNlNjRVcmwgdmFyaWFudCBlbmNvZGluZy5cclxuICpcclxuICogQHBhcmFtIHN0ciBUbyBiZSBkZWNvZGVkXHJcbiAqIEByZXR1cm4gRGVjb2RlZCByZXN1bHQsIGlmIHBvc3NpYmxlXHJcbiAqL1xyXG5jb25zdCBiYXNlNjREZWNvZGUgPSBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHJldHVybiBiYXNlNjQuZGVjb2RlU3RyaW5nKHN0ciwgdHJ1ZSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ2Jhc2U2NERlY29kZSBmYWlsZWQ6ICcsIGUpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBEbyBhIGRlZXAtY29weSBvZiBiYXNpYyBKYXZhU2NyaXB0IE9iamVjdHMgb3IgQXJyYXlzLlxyXG4gKi9cclxuZnVuY3Rpb24gZGVlcENvcHkodmFsdWUpIHtcclxuICAgIHJldHVybiBkZWVwRXh0ZW5kKHVuZGVmaW5lZCwgdmFsdWUpO1xyXG59XHJcbi8qKlxyXG4gKiBDb3B5IHByb3BlcnRpZXMgZnJvbSBzb3VyY2UgdG8gdGFyZ2V0IChyZWN1cnNpdmVseSBhbGxvd3MgZXh0ZW5zaW9uXHJcbiAqIG9mIE9iamVjdHMgYW5kIEFycmF5cykuICBTY2FsYXIgdmFsdWVzIGluIHRoZSB0YXJnZXQgYXJlIG92ZXItd3JpdHRlbi5cclxuICogSWYgdGFyZ2V0IGlzIHVuZGVmaW5lZCwgYW4gb2JqZWN0IG9mIHRoZSBhcHByb3ByaWF0ZSB0eXBlIHdpbGwgYmUgY3JlYXRlZFxyXG4gKiAoYW5kIHJldHVybmVkKS5cclxuICpcclxuICogV2UgcmVjdXJzaXZlbHkgY29weSBhbGwgY2hpbGQgcHJvcGVydGllcyBvZiBwbGFpbiBPYmplY3RzIGluIHRoZSBzb3VyY2UtIHNvXHJcbiAqIHRoYXQgbmFtZXNwYWNlLSBsaWtlIGRpY3Rpb25hcmllcyBhcmUgbWVyZ2VkLlxyXG4gKlxyXG4gKiBOb3RlIHRoYXQgdGhlIHRhcmdldCBjYW4gYmUgYSBmdW5jdGlvbiwgaW4gd2hpY2ggY2FzZSB0aGUgcHJvcGVydGllcyBpblxyXG4gKiB0aGUgc291cmNlIE9iamVjdCBhcmUgY29waWVkIG9udG8gaXQgYXMgc3RhdGljIHByb3BlcnRpZXMgb2YgdGhlIEZ1bmN0aW9uLlxyXG4gKlxyXG4gKiBOb3RlOiB3ZSBkb24ndCBtZXJnZSBfX3Byb3RvX18gdG8gcHJldmVudCBwcm90b3R5cGUgcG9sbHV0aW9uXHJcbiAqL1xyXG5mdW5jdGlvbiBkZWVwRXh0ZW5kKHRhcmdldCwgc291cmNlKSB7XHJcbiAgICBpZiAoIShzb3VyY2UgaW5zdGFuY2VvZiBPYmplY3QpKSB7XHJcbiAgICAgICAgcmV0dXJuIHNvdXJjZTtcclxuICAgIH1cclxuICAgIHN3aXRjaCAoc291cmNlLmNvbnN0cnVjdG9yKSB7XHJcbiAgICAgICAgY2FzZSBEYXRlOlxyXG4gICAgICAgICAgICAvLyBUcmVhdCBEYXRlcyBsaWtlIHNjYWxhcnM7IGlmIHRoZSB0YXJnZXQgZGF0ZSBvYmplY3QgaGFkIGFueSBjaGlsZFxyXG4gICAgICAgICAgICAvLyBwcm9wZXJ0aWVzIC0gdGhleSB3aWxsIGJlIGxvc3QhXHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGVWYWx1ZSA9IHNvdXJjZTtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGRhdGVWYWx1ZS5nZXRUaW1lKCkpO1xyXG4gICAgICAgIGNhc2UgT2JqZWN0OlxyXG4gICAgICAgICAgICBpZiAodGFyZ2V0ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHRhcmdldCA9IHt9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgQXJyYXk6XHJcbiAgICAgICAgICAgIC8vIEFsd2F5cyBjb3B5IHRoZSBhcnJheSBzb3VyY2UgYW5kIG92ZXJ3cml0ZSB0aGUgdGFyZ2V0LlxyXG4gICAgICAgICAgICB0YXJnZXQgPSBbXTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgLy8gTm90IGEgcGxhaW4gT2JqZWN0IC0gdHJlYXQgaXQgYXMgYSBzY2FsYXIuXHJcbiAgICAgICAgICAgIHJldHVybiBzb3VyY2U7XHJcbiAgICB9XHJcbiAgICBmb3IgKGNvbnN0IHByb3AgaW4gc291cmNlKSB7XHJcbiAgICAgICAgLy8gdXNlIGlzVmFsaWRLZXkgdG8gZ3VhcmQgYWdhaW5zdCBwcm90b3R5cGUgcG9sbHV0aW9uLiBTZWUgaHR0cHM6Ly9zbnlrLmlvL3Z1bG4vU05ZSy1KUy1MT0RBU0gtNDUwMjAyXHJcbiAgICAgICAgaWYgKCFzb3VyY2UuaGFzT3duUHJvcGVydHkocHJvcCkgfHwgIWlzVmFsaWRLZXkocHJvcCkpIHtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRhcmdldFtwcm9wXSA9IGRlZXBFeHRlbmQodGFyZ2V0W3Byb3BdLCBzb3VyY2VbcHJvcF0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRhcmdldDtcclxufVxyXG5mdW5jdGlvbiBpc1ZhbGlkS2V5KGtleSkge1xyXG4gICAgcmV0dXJuIGtleSAhPT0gJ19fcHJvdG9fXyc7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFBvbHlmaWxsIGZvciBgZ2xvYmFsVGhpc2Agb2JqZWN0LlxyXG4gKiBAcmV0dXJucyB0aGUgYGdsb2JhbFRoaXNgIG9iamVjdCBmb3IgdGhlIGdpdmVuIGVudmlyb25tZW50LlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRHbG9iYWwoKSB7XHJcbiAgICBpZiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgcmV0dXJuIHNlbGY7XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICByZXR1cm4gd2luZG93O1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgcmV0dXJuIGdsb2JhbDtcclxuICAgIH1cclxuICAgIHRocm93IG5ldyBFcnJvcignVW5hYmxlIHRvIGxvY2F0ZSBnbG9iYWwgb2JqZWN0LicpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IGdldERlZmF1bHRzRnJvbUdsb2JhbCA9ICgpID0+IGdldEdsb2JhbCgpLl9fRklSRUJBU0VfREVGQVVMVFNfXztcclxuLyoqXHJcbiAqIEF0dGVtcHQgdG8gcmVhZCBkZWZhdWx0cyBmcm9tIGEgSlNPTiBzdHJpbmcgcHJvdmlkZWQgdG9cclxuICogcHJvY2VzcyguKWVudiguKV9fRklSRUJBU0VfREVGQVVMVFNfXyBvciBhIEpTT04gZmlsZSB3aG9zZSBwYXRoIGlzIGluXHJcbiAqIHByb2Nlc3MoLillbnYoLilfX0ZJUkVCQVNFX0RFRkFVTFRTX1BBVEhfX1xyXG4gKiBUaGUgZG90cyBhcmUgaW4gcGFyZW5zIGJlY2F1c2UgY2VydGFpbiBjb21waWxlcnMgKFZpdGU/KSBjYW5ub3RcclxuICogaGFuZGxlIHNlZWluZyB0aGF0IHZhcmlhYmxlIGluIGNvbW1lbnRzLlxyXG4gKiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2ZpcmViYXNlL2ZpcmViYXNlLWpzLXNkay9pc3N1ZXMvNjgzOFxyXG4gKi9cclxuY29uc3QgZ2V0RGVmYXVsdHNGcm9tRW52VmFyaWFibGUgPSAoKSA9PiB7XHJcbiAgICBpZiAodHlwZW9mIHByb2Nlc3MgPT09ICd1bmRlZmluZWQnIHx8IHR5cGVvZiBwcm9jZXNzLmVudiA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCBkZWZhdWx0c0pzb25TdHJpbmcgPSBwcm9jZXNzLmVudi5fX0ZJUkVCQVNFX0RFRkFVTFRTX187XHJcbiAgICBpZiAoZGVmYXVsdHNKc29uU3RyaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoZGVmYXVsdHNKc29uU3RyaW5nKTtcclxuICAgIH1cclxufTtcclxuY29uc3QgZ2V0RGVmYXVsdHNGcm9tQ29va2llID0gKCkgPT4ge1xyXG4gICAgaWYgKHR5cGVvZiBkb2N1bWVudCA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBsZXQgbWF0Y2g7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIG1hdGNoID0gZG9jdW1lbnQuY29va2llLm1hdGNoKC9fX0ZJUkVCQVNFX0RFRkFVTFRTX189KFteO10rKS8pO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAvLyBTb21lIGVudmlyb25tZW50cyBzdWNoIGFzIEFuZ3VsYXIgVW5pdmVyc2FsIFNTUiBoYXZlIGFcclxuICAgICAgICAvLyBgZG9jdW1lbnRgIG9iamVjdCBidXQgZXJyb3Igb24gYWNjZXNzaW5nIGBkb2N1bWVudC5jb29raWVgLlxyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IGRlY29kZWQgPSBtYXRjaCAmJiBiYXNlNjREZWNvZGUobWF0Y2hbMV0pO1xyXG4gICAgcmV0dXJuIGRlY29kZWQgJiYgSlNPTi5wYXJzZShkZWNvZGVkKTtcclxufTtcclxuLyoqXHJcbiAqIEdldCB0aGUgX19GSVJFQkFTRV9ERUZBVUxUU19fIG9iamVjdC4gSXQgY2hlY2tzIGluIG9yZGVyOlxyXG4gKiAoMSkgaWYgc3VjaCBhbiBvYmplY3QgZXhpc3RzIGFzIGEgcHJvcGVydHkgb2YgYGdsb2JhbFRoaXNgXHJcbiAqICgyKSBpZiBzdWNoIGFuIG9iamVjdCB3YXMgcHJvdmlkZWQgb24gYSBzaGVsbCBlbnZpcm9ubWVudCB2YXJpYWJsZVxyXG4gKiAoMykgaWYgc3VjaCBhbiBvYmplY3QgZXhpc3RzIGluIGEgY29va2llXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IGdldERlZmF1bHRzID0gKCkgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICByZXR1cm4gKGdldERlZmF1bHRzRnJvbUdsb2JhbCgpIHx8XHJcbiAgICAgICAgICAgIGdldERlZmF1bHRzRnJvbUVudlZhcmlhYmxlKCkgfHxcclxuICAgICAgICAgICAgZ2V0RGVmYXVsdHNGcm9tQ29va2llKCkpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDYXRjaC1hbGwgZm9yIGJlaW5nIHVuYWJsZSB0byBnZXQgX19GSVJFQkFTRV9ERUZBVUxUU19fIGR1ZVxyXG4gICAgICAgICAqIHRvIGFueSBlbnZpcm9ubWVudCBjYXNlIHdlIGhhdmUgbm90IGFjY291bnRlZCBmb3IuIExvZyB0b1xyXG4gICAgICAgICAqIGluZm8gaW5zdGVhZCBvZiBzd2FsbG93aW5nIHNvIHdlIGNhbiBmaW5kIHRoZXNlIHVua25vd24gY2FzZXNcclxuICAgICAgICAgKiBhbmQgYWRkIHBhdGhzIGZvciB0aGVtIGlmIG5lZWRlZC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBjb25zb2xlLmluZm8oYFVuYWJsZSB0byBnZXQgX19GSVJFQkFTRV9ERUZBVUxUU19fIGR1ZSB0bzogJHtlfWApO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxufTtcclxuLyoqXHJcbiAqIFJldHVybnMgZW11bGF0b3IgaG9zdCBzdG9yZWQgaW4gdGhlIF9fRklSRUJBU0VfREVGQVVMVFNfXyBvYmplY3RcclxuICogZm9yIHRoZSBnaXZlbiBwcm9kdWN0LlxyXG4gKiBAcmV0dXJucyBhIFVSTCBob3N0IGZvcm1hdHRlZCBsaWtlIGAxMjcuMC4wLjE6OTk5OWAgb3IgYFs6OjFdOjQwMDBgIGlmIGF2YWlsYWJsZVxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBnZXREZWZhdWx0RW11bGF0b3JIb3N0ID0gKHByb2R1Y3ROYW1lKSA9PiB7IHZhciBfYSwgX2I7IHJldHVybiAoX2IgPSAoX2EgPSBnZXREZWZhdWx0cygpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZW11bGF0b3JIb3N0cykgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iW3Byb2R1Y3ROYW1lXTsgfTtcclxuLyoqXHJcbiAqIFJldHVybnMgZW11bGF0b3IgaG9zdG5hbWUgYW5kIHBvcnQgc3RvcmVkIGluIHRoZSBfX0ZJUkVCQVNFX0RFRkFVTFRTX18gb2JqZWN0XHJcbiAqIGZvciB0aGUgZ2l2ZW4gcHJvZHVjdC5cclxuICogQHJldHVybnMgYSBwYWlyIG9mIGhvc3RuYW1lIGFuZCBwb3J0IGxpa2UgYFtcIjo6MVwiLCA0MDAwXWAgaWYgYXZhaWxhYmxlXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IGdldERlZmF1bHRFbXVsYXRvckhvc3RuYW1lQW5kUG9ydCA9IChwcm9kdWN0TmFtZSkgPT4ge1xyXG4gICAgY29uc3QgaG9zdCA9IGdldERlZmF1bHRFbXVsYXRvckhvc3QocHJvZHVjdE5hbWUpO1xyXG4gICAgaWYgKCFob3N0KSB7XHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxuICAgIGNvbnN0IHNlcGFyYXRvckluZGV4ID0gaG9zdC5sYXN0SW5kZXhPZignOicpOyAvLyBGaW5kaW5nIHRoZSBsYXN0IHNpbmNlIElQdjYgYWRkciBhbHNvIGhhcyBjb2xvbnMuXHJcbiAgICBpZiAoc2VwYXJhdG9ySW5kZXggPD0gMCB8fCBzZXBhcmF0b3JJbmRleCArIDEgPT09IGhvc3QubGVuZ3RoKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGhvc3QgJHtob3N0fSB3aXRoIG5vIHNlcGFyYXRlIGhvc3RuYW1lIGFuZCBwb3J0IWApO1xyXG4gICAgfVxyXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtZ2xvYmFsc1xyXG4gICAgY29uc3QgcG9ydCA9IHBhcnNlSW50KGhvc3Quc3Vic3RyaW5nKHNlcGFyYXRvckluZGV4ICsgMSksIDEwKTtcclxuICAgIGlmIChob3N0WzBdID09PSAnWycpIHtcclxuICAgICAgICAvLyBCcmFja2V0LXF1b3RlZCBgW2lwdjZhZGRyXTpwb3J0YCA9PiByZXR1cm4gXCJpcHY2YWRkclwiICh3aXRob3V0IGJyYWNrZXRzKS5cclxuICAgICAgICByZXR1cm4gW2hvc3Quc3Vic3RyaW5nKDEsIHNlcGFyYXRvckluZGV4IC0gMSksIHBvcnRdO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIFtob3N0LnN1YnN0cmluZygwLCBzZXBhcmF0b3JJbmRleCksIHBvcnRdO1xyXG4gICAgfVxyXG59O1xyXG4vKipcclxuICogUmV0dXJucyBGaXJlYmFzZSBhcHAgY29uZmlnIHN0b3JlZCBpbiB0aGUgX19GSVJFQkFTRV9ERUZBVUxUU19fIG9iamVjdC5cclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgZ2V0RGVmYXVsdEFwcENvbmZpZyA9ICgpID0+IHsgdmFyIF9hOyByZXR1cm4gKF9hID0gZ2V0RGVmYXVsdHMoKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNvbmZpZzsgfTtcclxuLyoqXHJcbiAqIFJldHVybnMgYW4gZXhwZXJpbWVudGFsIHNldHRpbmcgb24gdGhlIF9fRklSRUJBU0VfREVGQVVMVFNfXyBvYmplY3QgKHByb3BlcnRpZXNcclxuICogcHJlZml4ZWQgYnkgXCJfXCIpXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IGdldEV4cGVyaW1lbnRhbFNldHRpbmcgPSAobmFtZSkgPT4geyB2YXIgX2E7IHJldHVybiAoX2EgPSBnZXREZWZhdWx0cygpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FbYF8ke25hbWV9YF07IH07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIERlZmVycmVkIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMucmVqZWN0ID0gKCkgPT4geyB9O1xyXG4gICAgICAgIHRoaXMucmVzb2x2ZSA9ICgpID0+IHsgfTtcclxuICAgICAgICB0aGlzLnByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZSA9IHJlc29sdmU7XHJcbiAgICAgICAgICAgIHRoaXMucmVqZWN0ID0gcmVqZWN0O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBPdXIgQVBJIGludGVybmFscyBhcmUgbm90IHByb21pc2VpZmllZCBhbmQgY2Fubm90IGJlY2F1c2Ugb3VyIGNhbGxiYWNrIEFQSXMgaGF2ZSBzdWJ0bGUgZXhwZWN0YXRpb25zIGFyb3VuZFxyXG4gICAgICogaW52b2tpbmcgcHJvbWlzZXMgaW5saW5lLCB3aGljaCBQcm9taXNlcyBhcmUgZm9yYmlkZGVuIHRvIGRvLiBUaGlzIG1ldGhvZCBhY2NlcHRzIGFuIG9wdGlvbmFsIG5vZGUtc3R5bGUgY2FsbGJhY2tcclxuICAgICAqIGFuZCByZXR1cm5zIGEgbm9kZS1zdHlsZSBjYWxsYmFjayB3aGljaCB3aWxsIHJlc29sdmUgb3IgcmVqZWN0IHRoZSBEZWZlcnJlZCdzIHByb21pc2UuXHJcbiAgICAgKi9cclxuICAgIHdyYXBDYWxsYmFjayhjYWxsYmFjaykge1xyXG4gICAgICAgIHJldHVybiAoZXJyb3IsIHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNvbHZlKHZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBBdHRhY2hpbmcgbm9vcCBoYW5kbGVyIGp1c3QgaW4gY2FzZSBkZXZlbG9wZXIgd2Fzbid0IGV4cGVjdGluZ1xyXG4gICAgICAgICAgICAgICAgLy8gcHJvbWlzZXNcclxuICAgICAgICAgICAgICAgIHRoaXMucHJvbWlzZS5jYXRjaCgoKSA9PiB7IH0pO1xyXG4gICAgICAgICAgICAgICAgLy8gU29tZSBvZiBvdXIgY2FsbGJhY2tzIGRvbid0IGV4cGVjdCBhIHZhbHVlIGFuZCBvdXIgb3duIHRlc3RzXHJcbiAgICAgICAgICAgICAgICAvLyBhc3NlcnQgdGhhdCB0aGUgcGFyYW1ldGVyIGxlbmd0aCBpcyAxXHJcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2subGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soZXJyb3IsIHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlTW9ja1VzZXJUb2tlbih0b2tlbiwgcHJvamVjdElkKSB7XHJcbiAgICBpZiAodG9rZW4udWlkKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgXCJ1aWRcIiBmaWVsZCBpcyBubyBsb25nZXIgc3VwcG9ydGVkIGJ5IG1vY2tVc2VyVG9rZW4uIFBsZWFzZSB1c2UgXCJzdWJcIiBpbnN0ZWFkIGZvciBGaXJlYmFzZSBBdXRoIFVzZXIgSUQuJyk7XHJcbiAgICB9XHJcbiAgICAvLyBVbnNlY3VyZWQgSldUcyB1c2UgXCJub25lXCIgYXMgdGhlIGFsZ29yaXRobS5cclxuICAgIGNvbnN0IGhlYWRlciA9IHtcclxuICAgICAgICBhbGc6ICdub25lJyxcclxuICAgICAgICB0eXBlOiAnSldUJ1xyXG4gICAgfTtcclxuICAgIGNvbnN0IHByb2plY3QgPSBwcm9qZWN0SWQgfHwgJ2RlbW8tcHJvamVjdCc7XHJcbiAgICBjb25zdCBpYXQgPSB0b2tlbi5pYXQgfHwgMDtcclxuICAgIGNvbnN0IHN1YiA9IHRva2VuLnN1YiB8fCB0b2tlbi51c2VyX2lkO1xyXG4gICAgaWYgKCFzdWIpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJtb2NrVXNlclRva2VuIG11c3QgY29udGFpbiAnc3ViJyBvciAndXNlcl9pZCcgZmllbGQhXCIpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgcGF5bG9hZCA9IE9iamVjdC5hc3NpZ24oeyBcclxuICAgICAgICAvLyBTZXQgYWxsIHJlcXVpcmVkIGZpZWxkcyB0byBkZWNlbnQgZGVmYXVsdHNcclxuICAgICAgICBpc3M6IGBodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20vJHtwcm9qZWN0fWAsIGF1ZDogcHJvamVjdCwgaWF0LCBleHA6IGlhdCArIDM2MDAsIGF1dGhfdGltZTogaWF0LCBzdWIsIHVzZXJfaWQ6IHN1YiwgZmlyZWJhc2U6IHtcclxuICAgICAgICAgICAgc2lnbl9pbl9wcm92aWRlcjogJ2N1c3RvbScsXHJcbiAgICAgICAgICAgIGlkZW50aXRpZXM6IHt9XHJcbiAgICAgICAgfSB9LCB0b2tlbik7XHJcbiAgICAvLyBVbnNlY3VyZWQgSldUcyB1c2UgdGhlIGVtcHR5IHN0cmluZyBhcyBhIHNpZ25hdHVyZS5cclxuICAgIGNvbnN0IHNpZ25hdHVyZSA9ICcnO1xyXG4gICAgcmV0dXJuIFtcclxuICAgICAgICBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZyhKU09OLnN0cmluZ2lmeShoZWFkZXIpKSxcclxuICAgICAgICBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZyhKU09OLnN0cmluZ2lmeShwYXlsb2FkKSksXHJcbiAgICAgICAgc2lnbmF0dXJlXHJcbiAgICBdLmpvaW4oJy4nKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUmV0dXJucyBuYXZpZ2F0b3IudXNlckFnZW50IHN0cmluZyBvciAnJyBpZiBpdCdzIG5vdCBkZWZpbmVkLlxyXG4gKiBAcmV0dXJuIHVzZXIgYWdlbnQgc3RyaW5nXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRVQSgpIHtcclxuICAgIGlmICh0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJlxyXG4gICAgICAgIHR5cGVvZiBuYXZpZ2F0b3JbJ3VzZXJBZ2VudCddID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgIHJldHVybiBuYXZpZ2F0b3JbJ3VzZXJBZ2VudCddO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBEZXRlY3QgQ29yZG92YSAvIFBob25lR2FwIC8gSW9uaWMgZnJhbWV3b3JrcyBvbiBhIG1vYmlsZSBkZXZpY2UuXHJcbiAqXHJcbiAqIERlbGliZXJhdGVseSBkb2VzIG5vdCByZWx5IG9uIGNoZWNraW5nIGBmaWxlOi8vYCBVUkxzIChhcyB0aGlzIGZhaWxzIFBob25lR2FwXHJcbiAqIGluIHRoZSBSaXBwbGUgZW11bGF0b3IpIG5vciBDb3Jkb3ZhIGBvbkRldmljZVJlYWR5YCwgd2hpY2ggd291bGQgbm9ybWFsbHlcclxuICogd2FpdCBmb3IgYSBjYWxsYmFjay5cclxuICovXHJcbmZ1bmN0aW9uIGlzTW9iaWxlQ29yZG92YSgpIHtcclxuICAgIHJldHVybiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiZcclxuICAgICAgICAvLyBAdHMtaWdub3JlIFNldHRpbmcgdXAgYW4gYnJvYWRseSBhcHBsaWNhYmxlIGluZGV4IHNpZ25hdHVyZSBmb3IgV2luZG93XHJcbiAgICAgICAgLy8ganVzdCB0byBkZWFsIHdpdGggdGhpcyBjYXNlIHdvdWxkIHByb2JhYmx5IGJlIGEgYmFkIGlkZWEuXHJcbiAgICAgICAgISEod2luZG93Wydjb3Jkb3ZhJ10gfHwgd2luZG93WydwaG9uZWdhcCddIHx8IHdpbmRvd1snUGhvbmVHYXAnXSkgJiZcclxuICAgICAgICAvaW9zfGlwaG9uZXxpcG9kfGlwYWR8YW5kcm9pZHxibGFja2JlcnJ5fGllbW9iaWxlL2kudGVzdChnZXRVQSgpKSk7XHJcbn1cclxuLyoqXHJcbiAqIERldGVjdCBOb2RlLmpzLlxyXG4gKlxyXG4gKiBAcmV0dXJuIHRydWUgaWYgTm9kZS5qcyBlbnZpcm9ubWVudCBpcyBkZXRlY3RlZCBvciBzcGVjaWZpZWQuXHJcbiAqL1xyXG4vLyBOb2RlIGRldGVjdGlvbiBsb2dpYyBmcm9tOiBodHRwczovL2dpdGh1Yi5jb20vaWxpYWthbi9kZXRlY3Qtbm9kZS9cclxuZnVuY3Rpb24gaXNOb2RlKCkge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgY29uc3QgZm9yY2VFbnZpcm9ubWVudCA9IChfYSA9IGdldERlZmF1bHRzKCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5mb3JjZUVudmlyb25tZW50O1xyXG4gICAgaWYgKGZvcmNlRW52aXJvbm1lbnQgPT09ICdub2RlJykge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoZm9yY2VFbnZpcm9ubWVudCA9PT0gJ2Jyb3dzZXInKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgdHJ5IHtcclxuICAgICAgICByZXR1cm4gKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChnbG9iYWwucHJvY2VzcykgPT09ICdbb2JqZWN0IHByb2Nlc3NdJyk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogRGV0ZWN0IEJyb3dzZXIgRW52aXJvbm1lbnRcclxuICovXHJcbmZ1bmN0aW9uIGlzQnJvd3NlcigpIHtcclxuICAgIHJldHVybiB0eXBlb2Ygc2VsZiA9PT0gJ29iamVjdCcgJiYgc2VsZi5zZWxmID09PSBzZWxmO1xyXG59XHJcbmZ1bmN0aW9uIGlzQnJvd3NlckV4dGVuc2lvbigpIHtcclxuICAgIGNvbnN0IHJ1bnRpbWUgPSB0eXBlb2YgY2hyb21lID09PSAnb2JqZWN0J1xyXG4gICAgICAgID8gY2hyb21lLnJ1bnRpbWVcclxuICAgICAgICA6IHR5cGVvZiBicm93c2VyID09PSAnb2JqZWN0J1xyXG4gICAgICAgICAgICA/IGJyb3dzZXIucnVudGltZVxyXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcclxuICAgIHJldHVybiB0eXBlb2YgcnVudGltZSA9PT0gJ29iamVjdCcgJiYgcnVudGltZS5pZCAhPT0gdW5kZWZpbmVkO1xyXG59XHJcbi8qKlxyXG4gKiBEZXRlY3QgUmVhY3QgTmF0aXZlLlxyXG4gKlxyXG4gKiBAcmV0dXJuIHRydWUgaWYgUmVhY3ROYXRpdmUgZW52aXJvbm1lbnQgaXMgZGV0ZWN0ZWQuXHJcbiAqL1xyXG5mdW5jdGlvbiBpc1JlYWN0TmF0aXZlKCkge1xyXG4gICAgcmV0dXJuICh0eXBlb2YgbmF2aWdhdG9yID09PSAnb2JqZWN0JyAmJiBuYXZpZ2F0b3JbJ3Byb2R1Y3QnXSA9PT0gJ1JlYWN0TmF0aXZlJyk7XHJcbn1cclxuLyoqIERldGVjdHMgRWxlY3Ryb24gYXBwcy4gKi9cclxuZnVuY3Rpb24gaXNFbGVjdHJvbigpIHtcclxuICAgIHJldHVybiBnZXRVQSgpLmluZGV4T2YoJ0VsZWN0cm9uLycpID49IDA7XHJcbn1cclxuLyoqIERldGVjdHMgSW50ZXJuZXQgRXhwbG9yZXIuICovXHJcbmZ1bmN0aW9uIGlzSUUoKSB7XHJcbiAgICBjb25zdCB1YSA9IGdldFVBKCk7XHJcbiAgICByZXR1cm4gdWEuaW5kZXhPZignTVNJRSAnKSA+PSAwIHx8IHVhLmluZGV4T2YoJ1RyaWRlbnQvJykgPj0gMDtcclxufVxyXG4vKiogRGV0ZWN0cyBVbml2ZXJzYWwgV2luZG93cyBQbGF0Zm9ybSBhcHBzLiAqL1xyXG5mdW5jdGlvbiBpc1VXUCgpIHtcclxuICAgIHJldHVybiBnZXRVQSgpLmluZGV4T2YoJ01TQXBwSG9zdC8nKSA+PSAwO1xyXG59XHJcbi8qKlxyXG4gKiBEZXRlY3Qgd2hldGhlciB0aGUgY3VycmVudCBTREsgYnVpbGQgaXMgdGhlIE5vZGUgdmVyc2lvbi5cclxuICpcclxuICogQHJldHVybiB0cnVlIGlmIGl0J3MgdGhlIE5vZGUgU0RLIGJ1aWxkLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNOb2RlU2RrKCkge1xyXG4gICAgcmV0dXJuIENPTlNUQU5UUy5OT0RFX0NMSUVOVCA9PT0gdHJ1ZSB8fCBDT05TVEFOVFMuTk9ERV9BRE1JTiA9PT0gdHJ1ZTtcclxufVxyXG4vKiogUmV0dXJucyB0cnVlIGlmIHdlIGFyZSBydW5uaW5nIGluIFNhZmFyaS4gKi9cclxuZnVuY3Rpb24gaXNTYWZhcmkoKSB7XHJcbiAgICByZXR1cm4gKCFpc05vZGUoKSAmJlxyXG4gICAgICAgIG5hdmlnYXRvci51c2VyQWdlbnQuaW5jbHVkZXMoJ1NhZmFyaScpICYmXHJcbiAgICAgICAgIW5hdmlnYXRvci51c2VyQWdlbnQuaW5jbHVkZXMoJ0Nocm9tZScpKTtcclxufVxyXG4vKipcclxuICogVGhpcyBtZXRob2QgY2hlY2tzIGlmIGluZGV4ZWREQiBpcyBzdXBwb3J0ZWQgYnkgY3VycmVudCBicm93c2VyL3NlcnZpY2Ugd29ya2VyIGNvbnRleHRcclxuICogQHJldHVybiB0cnVlIGlmIGluZGV4ZWREQiBpcyBzdXBwb3J0ZWQgYnkgY3VycmVudCBicm93c2VyL3NlcnZpY2Ugd29ya2VyIGNvbnRleHRcclxuICovXHJcbmZ1bmN0aW9uIGlzSW5kZXhlZERCQXZhaWxhYmxlKCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICByZXR1cm4gdHlwZW9mIGluZGV4ZWREQiA9PT0gJ29iamVjdCc7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogVGhpcyBtZXRob2QgdmFsaWRhdGVzIGJyb3dzZXIvc3cgY29udGV4dCBmb3IgaW5kZXhlZERCIGJ5IG9wZW5pbmcgYSBkdW1teSBpbmRleGVkREIgZGF0YWJhc2UgYW5kIHJlamVjdFxyXG4gKiBpZiBlcnJvcnMgb2NjdXIgZHVyaW5nIHRoZSBkYXRhYmFzZSBvcGVuIG9wZXJhdGlvbi5cclxuICpcclxuICogQHRocm93cyBleGNlcHRpb24gaWYgY3VycmVudCBicm93c2VyL3N3IGNvbnRleHQgY2FuJ3QgcnVuIGlkYi5vcGVuIChleDogU2FmYXJpIGlmcmFtZSwgRmlyZWZveFxyXG4gKiBwcml2YXRlIGJyb3dzaW5nKVxyXG4gKi9cclxuZnVuY3Rpb24gdmFsaWRhdGVJbmRleGVkREJPcGVuYWJsZSgpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgbGV0IHByZUV4aXN0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgY29uc3QgREJfQ0hFQ0tfTkFNRSA9ICd2YWxpZGF0ZS1icm93c2VyLWNvbnRleHQtZm9yLWluZGV4ZWRkYi1hbmFseXRpY3MtbW9kdWxlJztcclxuICAgICAgICAgICAgY29uc3QgcmVxdWVzdCA9IHNlbGYuaW5kZXhlZERCLm9wZW4oREJfQ0hFQ0tfTkFNRSk7XHJcbiAgICAgICAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmVxdWVzdC5yZXN1bHQuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgIC8vIGRlbGV0ZSBkYXRhYmFzZSBvbmx5IHdoZW4gaXQgZG9lc24ndCBwcmUtZXhpc3RcclxuICAgICAgICAgICAgICAgIGlmICghcHJlRXhpc3QpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmluZGV4ZWREQi5kZWxldGVEYXRhYmFzZShEQl9DSEVDS19OQU1FKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJlcXVlc3Qub251cGdyYWRlbmVlZGVkID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcHJlRXhpc3QgPSBmYWxzZTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgcmVxdWVzdC5vbmVycm9yID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KCgoX2EgPSByZXF1ZXN0LmVycm9yKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubWVzc2FnZSkgfHwgJycpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG4vKipcclxuICpcclxuICogVGhpcyBtZXRob2QgY2hlY2tzIHdoZXRoZXIgY29va2llIGlzIGVuYWJsZWQgd2l0aGluIGN1cnJlbnQgYnJvd3NlclxyXG4gKiBAcmV0dXJuIHRydWUgaWYgY29va2llIGlzIGVuYWJsZWQgd2l0aGluIGN1cnJlbnQgYnJvd3NlclxyXG4gKi9cclxuZnVuY3Rpb24gYXJlQ29va2llc0VuYWJsZWQoKSB7XHJcbiAgICBpZiAodHlwZW9mIG5hdmlnYXRvciA9PT0gJ3VuZGVmaW5lZCcgfHwgIW5hdmlnYXRvci5jb29raWVFbmFibGVkKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEBmaWxlb3ZlcnZpZXcgU3RhbmRhcmRpemVkIEZpcmViYXNlIEVycm9yLlxyXG4gKlxyXG4gKiBVc2FnZTpcclxuICpcclxuICogICAvLyBUeXBlc2NyaXB0IHN0cmluZyBsaXRlcmFscyBmb3IgdHlwZS1zYWZlIGNvZGVzXHJcbiAqICAgdHlwZSBFcnIgPVxyXG4gKiAgICAgJ3Vua25vd24nIHxcclxuICogICAgICdvYmplY3Qtbm90LWZvdW5kJ1xyXG4gKiAgICAgO1xyXG4gKlxyXG4gKiAgIC8vIENsb3N1cmUgZW51bSBmb3IgdHlwZS1zYWZlIGVycm9yIGNvZGVzXHJcbiAqICAgLy8gYXQtZW51bSB7c3RyaW5nfVxyXG4gKiAgIHZhciBFcnIgPSB7XHJcbiAqICAgICBVTktOT1dOOiAndW5rbm93bicsXHJcbiAqICAgICBPQkpFQ1RfTk9UX0ZPVU5EOiAnb2JqZWN0LW5vdC1mb3VuZCcsXHJcbiAqICAgfVxyXG4gKlxyXG4gKiAgIGxldCBlcnJvcnM6IE1hcDxFcnIsIHN0cmluZz4gPSB7XHJcbiAqICAgICAnZ2VuZXJpYy1lcnJvcic6IFwiVW5rbm93biBlcnJvclwiLFxyXG4gKiAgICAgJ2ZpbGUtbm90LWZvdW5kJzogXCJDb3VsZCBub3QgZmluZCBmaWxlOiB7JGZpbGV9XCIsXHJcbiAqICAgfTtcclxuICpcclxuICogICAvLyBUeXBlLXNhZmUgZnVuY3Rpb24gLSBtdXN0IHBhc3MgYSB2YWxpZCBlcnJvciBjb2RlIGFzIHBhcmFtLlxyXG4gKiAgIGxldCBlcnJvciA9IG5ldyBFcnJvckZhY3Rvcnk8RXJyPignc2VydmljZScsICdTZXJ2aWNlJywgZXJyb3JzKTtcclxuICpcclxuICogICAuLi5cclxuICogICB0aHJvdyBlcnJvci5jcmVhdGUoRXJyLkdFTkVSSUMpO1xyXG4gKiAgIC4uLlxyXG4gKiAgIHRocm93IGVycm9yLmNyZWF0ZShFcnIuRklMRV9OT1RfRk9VTkQsIHsnZmlsZSc6IGZpbGVOYW1lfSk7XHJcbiAqICAgLi4uXHJcbiAqICAgLy8gU2VydmljZTogQ291bGQgbm90IGZpbGUgZmlsZTogZm9vLnR4dCAoc2VydmljZS9maWxlLW5vdC1mb3VuZCkuXHJcbiAqXHJcbiAqICAgY2F0Y2ggKGUpIHtcclxuICogICAgIGFzc2VydChlLm1lc3NhZ2UgPT09IFwiQ291bGQgbm90IGZpbmQgZmlsZTogZm9vLnR4dC5cIik7XHJcbiAqICAgICBpZiAoKGUgYXMgRmlyZWJhc2VFcnJvcik/LmNvZGUgPT09ICdzZXJ2aWNlL2ZpbGUtbm90LWZvdW5kJykge1xyXG4gKiAgICAgICBjb25zb2xlLmxvZyhcIkNvdWxkIG5vdCByZWFkIGZpbGU6IFwiICsgZVsnZmlsZSddKTtcclxuICogICAgIH1cclxuICogICB9XHJcbiAqL1xyXG5jb25zdCBFUlJPUl9OQU1FID0gJ0ZpcmViYXNlRXJyb3InO1xyXG4vLyBCYXNlZCBvbiBjb2RlIGZyb206XHJcbi8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0Vycm9yI0N1c3RvbV9FcnJvcl9UeXBlc1xyXG5jbGFzcyBGaXJlYmFzZUVycm9yIGV4dGVuZHMgRXJyb3Ige1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAvKiogVGhlIGVycm9yIGNvZGUgZm9yIHRoaXMgZXJyb3IuICovXHJcbiAgICBjb2RlLCBtZXNzYWdlLCBcclxuICAgIC8qKiBDdXN0b20gZGF0YSBmb3IgdGhpcyBlcnJvci4gKi9cclxuICAgIGN1c3RvbURhdGEpIHtcclxuICAgICAgICBzdXBlcihtZXNzYWdlKTtcclxuICAgICAgICB0aGlzLmNvZGUgPSBjb2RlO1xyXG4gICAgICAgIHRoaXMuY3VzdG9tRGF0YSA9IGN1c3RvbURhdGE7XHJcbiAgICAgICAgLyoqIFRoZSBjdXN0b20gbmFtZSBmb3IgYWxsIEZpcmViYXNlRXJyb3JzLiAqL1xyXG4gICAgICAgIHRoaXMubmFtZSA9IEVSUk9SX05BTUU7XHJcbiAgICAgICAgLy8gRml4IEZvciBFUzVcclxuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vTWljcm9zb2Z0L1R5cGVTY3JpcHQtd2lraS9ibG9iL21hc3Rlci9CcmVha2luZy1DaGFuZ2VzLm1kI2V4dGVuZGluZy1idWlsdC1pbnMtbGlrZS1lcnJvci1hcnJheS1hbmQtbWFwLW1heS1uby1sb25nZXItd29ya1xyXG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBGaXJlYmFzZUVycm9yLnByb3RvdHlwZSk7XHJcbiAgICAgICAgLy8gTWFpbnRhaW5zIHByb3BlciBzdGFjayB0cmFjZSBmb3Igd2hlcmUgb3VyIGVycm9yIHdhcyB0aHJvd24uXHJcbiAgICAgICAgLy8gT25seSBhdmFpbGFibGUgb24gVjguXHJcbiAgICAgICAgaWYgKEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKSB7XHJcbiAgICAgICAgICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIEVycm9yRmFjdG9yeS5wcm90b3R5cGUuY3JlYXRlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuY2xhc3MgRXJyb3JGYWN0b3J5IHtcclxuICAgIGNvbnN0cnVjdG9yKHNlcnZpY2UsIHNlcnZpY2VOYW1lLCBlcnJvcnMpIHtcclxuICAgICAgICB0aGlzLnNlcnZpY2UgPSBzZXJ2aWNlO1xyXG4gICAgICAgIHRoaXMuc2VydmljZU5hbWUgPSBzZXJ2aWNlTmFtZTtcclxuICAgICAgICB0aGlzLmVycm9ycyA9IGVycm9ycztcclxuICAgIH1cclxuICAgIGNyZWF0ZShjb2RlLCAuLi5kYXRhKSB7XHJcbiAgICAgICAgY29uc3QgY3VzdG9tRGF0YSA9IGRhdGFbMF0gfHwge307XHJcbiAgICAgICAgY29uc3QgZnVsbENvZGUgPSBgJHt0aGlzLnNlcnZpY2V9LyR7Y29kZX1gO1xyXG4gICAgICAgIGNvbnN0IHRlbXBsYXRlID0gdGhpcy5lcnJvcnNbY29kZV07XHJcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IHRlbXBsYXRlID8gcmVwbGFjZVRlbXBsYXRlKHRlbXBsYXRlLCBjdXN0b21EYXRhKSA6ICdFcnJvcic7XHJcbiAgICAgICAgLy8gU2VydmljZSBOYW1lOiBFcnJvciBtZXNzYWdlIChzZXJ2aWNlL2NvZGUpLlxyXG4gICAgICAgIGNvbnN0IGZ1bGxNZXNzYWdlID0gYCR7dGhpcy5zZXJ2aWNlTmFtZX06ICR7bWVzc2FnZX0gKCR7ZnVsbENvZGV9KS5gO1xyXG4gICAgICAgIGNvbnN0IGVycm9yID0gbmV3IEZpcmViYXNlRXJyb3IoZnVsbENvZGUsIGZ1bGxNZXNzYWdlLCBjdXN0b21EYXRhKTtcclxuICAgICAgICByZXR1cm4gZXJyb3I7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gcmVwbGFjZVRlbXBsYXRlKHRlbXBsYXRlLCBkYXRhKSB7XHJcbiAgICByZXR1cm4gdGVtcGxhdGUucmVwbGFjZShQQVRURVJOLCAoXywga2V5KSA9PiB7XHJcbiAgICAgICAgY29uc3QgdmFsdWUgPSBkYXRhW2tleV07XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlICE9IG51bGwgPyBTdHJpbmcodmFsdWUpIDogYDwke2tleX0/PmA7XHJcbiAgICB9KTtcclxufVxyXG5jb25zdCBQQVRURVJOID0gL1xce1xcJChbXn1dKyl9L2c7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBFdmFsdWF0ZXMgYSBKU09OIHN0cmluZyBpbnRvIGEgamF2YXNjcmlwdCBvYmplY3QuXHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHIgQSBzdHJpbmcgY29udGFpbmluZyBKU09OLlxyXG4gKiBAcmV0dXJuIHsqfSBUaGUgamF2YXNjcmlwdCBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBzcGVjaWZpZWQgSlNPTi5cclxuICovXHJcbmZ1bmN0aW9uIGpzb25FdmFsKHN0cikge1xyXG4gICAgcmV0dXJuIEpTT04ucGFyc2Uoc3RyKTtcclxufVxyXG4vKipcclxuICogUmV0dXJucyBKU09OIHJlcHJlc2VudGluZyBhIGphdmFzY3JpcHQgb2JqZWN0LlxyXG4gKiBAcGFyYW0geyp9IGRhdGEgSmF2YXNjcmlwdCBvYmplY3QgdG8gYmUgc3RyaW5naWZpZWQuXHJcbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIEpTT04gY29udGVudHMgb2YgdGhlIG9iamVjdC5cclxuICovXHJcbmZ1bmN0aW9uIHN0cmluZ2lmeShkYXRhKSB7XHJcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIERlY29kZXMgYSBGaXJlYmFzZSBhdXRoLiB0b2tlbiBpbnRvIGNvbnN0aXR1ZW50IHBhcnRzLlxyXG4gKlxyXG4gKiBOb3RlczpcclxuICogLSBNYXkgcmV0dXJuIHdpdGggaW52YWxpZCAvIGluY29tcGxldGUgY2xhaW1zIGlmIHRoZXJlJ3Mgbm8gbmF0aXZlIGJhc2U2NCBkZWNvZGluZyBzdXBwb3J0LlxyXG4gKiAtIERvZXNuJ3QgY2hlY2sgaWYgdGhlIHRva2VuIGlzIGFjdHVhbGx5IHZhbGlkLlxyXG4gKi9cclxuY29uc3QgZGVjb2RlID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICBsZXQgaGVhZGVyID0ge30sIGNsYWltcyA9IHt9LCBkYXRhID0ge30sIHNpZ25hdHVyZSA9ICcnO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBwYXJ0cyA9IHRva2VuLnNwbGl0KCcuJyk7XHJcbiAgICAgICAgaGVhZGVyID0ganNvbkV2YWwoYmFzZTY0RGVjb2RlKHBhcnRzWzBdKSB8fCAnJyk7XHJcbiAgICAgICAgY2xhaW1zID0ganNvbkV2YWwoYmFzZTY0RGVjb2RlKHBhcnRzWzFdKSB8fCAnJyk7XHJcbiAgICAgICAgc2lnbmF0dXJlID0gcGFydHNbMl07XHJcbiAgICAgICAgZGF0YSA9IGNsYWltc1snZCddIHx8IHt9O1xyXG4gICAgICAgIGRlbGV0ZSBjbGFpbXNbJ2QnXTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7IH1cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaGVhZGVyLFxyXG4gICAgICAgIGNsYWltcyxcclxuICAgICAgICBkYXRhLFxyXG4gICAgICAgIHNpZ25hdHVyZVxyXG4gICAgfTtcclxufTtcclxuLyoqXHJcbiAqIERlY29kZXMgYSBGaXJlYmFzZSBhdXRoLiB0b2tlbiBhbmQgY2hlY2tzIHRoZSB2YWxpZGl0eSBvZiBpdHMgdGltZS1iYXNlZCBjbGFpbXMuIFdpbGwgcmV0dXJuIHRydWUgaWYgdGhlXHJcbiAqIHRva2VuIGlzIHdpdGhpbiB0aGUgdGltZSB3aW5kb3cgYXV0aG9yaXplZCBieSB0aGUgJ25iZicgKG5vdC1iZWZvcmUpIGFuZCAnaWF0JyAoaXNzdWVkLWF0KSBjbGFpbXMuXHJcbiAqXHJcbiAqIE5vdGVzOlxyXG4gKiAtIE1heSByZXR1cm4gYSBmYWxzZSBuZWdhdGl2ZSBpZiB0aGVyZSdzIG5vIG5hdGl2ZSBiYXNlNjQgZGVjb2Rpbmcgc3VwcG9ydC5cclxuICogLSBEb2Vzbid0IGNoZWNrIGlmIHRoZSB0b2tlbiBpcyBhY3R1YWxseSB2YWxpZC5cclxuICovXHJcbmNvbnN0IGlzVmFsaWRUaW1lc3RhbXAgPSBmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgIGNvbnN0IGNsYWltcyA9IGRlY29kZSh0b2tlbikuY2xhaW1zO1xyXG4gICAgY29uc3Qgbm93ID0gTWF0aC5mbG9vcihuZXcgRGF0ZSgpLmdldFRpbWUoKSAvIDEwMDApO1xyXG4gICAgbGV0IHZhbGlkU2luY2UgPSAwLCB2YWxpZFVudGlsID0gMDtcclxuICAgIGlmICh0eXBlb2YgY2xhaW1zID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgIGlmIChjbGFpbXMuaGFzT3duUHJvcGVydHkoJ25iZicpKSB7XHJcbiAgICAgICAgICAgIHZhbGlkU2luY2UgPSBjbGFpbXNbJ25iZiddO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjbGFpbXMuaGFzT3duUHJvcGVydHkoJ2lhdCcpKSB7XHJcbiAgICAgICAgICAgIHZhbGlkU2luY2UgPSBjbGFpbXNbJ2lhdCddO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY2xhaW1zLmhhc093blByb3BlcnR5KCdleHAnKSkge1xyXG4gICAgICAgICAgICB2YWxpZFVudGlsID0gY2xhaW1zWydleHAnXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIHRva2VuIHdpbGwgZXhwaXJlIGFmdGVyIDI0aCBieSBkZWZhdWx0XHJcbiAgICAgICAgICAgIHZhbGlkVW50aWwgPSB2YWxpZFNpbmNlICsgODY0MDA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuICghIW5vdyAmJlxyXG4gICAgICAgICEhdmFsaWRTaW5jZSAmJlxyXG4gICAgICAgICEhdmFsaWRVbnRpbCAmJlxyXG4gICAgICAgIG5vdyA+PSB2YWxpZFNpbmNlICYmXHJcbiAgICAgICAgbm93IDw9IHZhbGlkVW50aWwpO1xyXG59O1xyXG4vKipcclxuICogRGVjb2RlcyBhIEZpcmViYXNlIGF1dGguIHRva2VuIGFuZCByZXR1cm5zIGl0cyBpc3N1ZWQgYXQgdGltZSBpZiB2YWxpZCwgbnVsbCBvdGhlcndpc2UuXHJcbiAqXHJcbiAqIE5vdGVzOlxyXG4gKiAtIE1heSByZXR1cm4gbnVsbCBpZiB0aGVyZSdzIG5vIG5hdGl2ZSBiYXNlNjQgZGVjb2Rpbmcgc3VwcG9ydC5cclxuICogLSBEb2Vzbid0IGNoZWNrIGlmIHRoZSB0b2tlbiBpcyBhY3R1YWxseSB2YWxpZC5cclxuICovXHJcbmNvbnN0IGlzc3VlZEF0VGltZSA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgY29uc3QgY2xhaW1zID0gZGVjb2RlKHRva2VuKS5jbGFpbXM7XHJcbiAgICBpZiAodHlwZW9mIGNsYWltcyA9PT0gJ29iamVjdCcgJiYgY2xhaW1zLmhhc093blByb3BlcnR5KCdpYXQnKSkge1xyXG4gICAgICAgIHJldHVybiBjbGFpbXNbJ2lhdCddO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbn07XHJcbi8qKlxyXG4gKiBEZWNvZGVzIGEgRmlyZWJhc2UgYXV0aC4gdG9rZW4gYW5kIGNoZWNrcyB0aGUgdmFsaWRpdHkgb2YgaXRzIGZvcm1hdC4gRXhwZWN0cyBhIHZhbGlkIGlzc3VlZC1hdCB0aW1lLlxyXG4gKlxyXG4gKiBOb3RlczpcclxuICogLSBNYXkgcmV0dXJuIGEgZmFsc2UgbmVnYXRpdmUgaWYgdGhlcmUncyBubyBuYXRpdmUgYmFzZTY0IGRlY29kaW5nIHN1cHBvcnQuXHJcbiAqIC0gRG9lc24ndCBjaGVjayBpZiB0aGUgdG9rZW4gaXMgYWN0dWFsbHkgdmFsaWQuXHJcbiAqL1xyXG5jb25zdCBpc1ZhbGlkRm9ybWF0ID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICBjb25zdCBkZWNvZGVkID0gZGVjb2RlKHRva2VuKSwgY2xhaW1zID0gZGVjb2RlZC5jbGFpbXM7XHJcbiAgICByZXR1cm4gISFjbGFpbXMgJiYgdHlwZW9mIGNsYWltcyA9PT0gJ29iamVjdCcgJiYgY2xhaW1zLmhhc093blByb3BlcnR5KCdpYXQnKTtcclxufTtcclxuLyoqXHJcbiAqIEF0dGVtcHRzIHRvIHBlZXIgaW50byBhbiBhdXRoIHRva2VuIGFuZCBkZXRlcm1pbmUgaWYgaXQncyBhbiBhZG1pbiBhdXRoIHRva2VuIGJ5IGxvb2tpbmcgYXQgdGhlIGNsYWltcyBwb3J0aW9uLlxyXG4gKlxyXG4gKiBOb3RlczpcclxuICogLSBNYXkgcmV0dXJuIGEgZmFsc2UgbmVnYXRpdmUgaWYgdGhlcmUncyBubyBuYXRpdmUgYmFzZTY0IGRlY29kaW5nIHN1cHBvcnQuXHJcbiAqIC0gRG9lc24ndCBjaGVjayBpZiB0aGUgdG9rZW4gaXMgYWN0dWFsbHkgdmFsaWQuXHJcbiAqL1xyXG5jb25zdCBpc0FkbWluID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICBjb25zdCBjbGFpbXMgPSBkZWNvZGUodG9rZW4pLmNsYWltcztcclxuICAgIHJldHVybiB0eXBlb2YgY2xhaW1zID09PSAnb2JqZWN0JyAmJiBjbGFpbXNbJ2FkbWluJ10gPT09IHRydWU7XHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGNvbnRhaW5zKG9iaiwga2V5KSB7XHJcbiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KTtcclxufVxyXG5mdW5jdGlvbiBzYWZlR2V0KG9iaiwga2V5KSB7XHJcbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xyXG4gICAgICAgIHJldHVybiBvYmpba2V5XTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gaXNFbXB0eShvYmopIHtcclxuICAgIGZvciAoY29uc3Qga2V5IGluIG9iaikge1xyXG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG5mdW5jdGlvbiBtYXAob2JqLCBmbiwgY29udGV4dE9iaikge1xyXG4gICAgY29uc3QgcmVzID0ge307XHJcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBvYmopIHtcclxuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xyXG4gICAgICAgICAgICByZXNba2V5XSA9IGZuLmNhbGwoY29udGV4dE9iaiwgb2JqW2tleV0sIGtleSwgb2JqKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzO1xyXG59XHJcbi8qKlxyXG4gKiBEZWVwIGVxdWFsIHR3byBvYmplY3RzLiBTdXBwb3J0IEFycmF5cyBhbmQgT2JqZWN0cy5cclxuICovXHJcbmZ1bmN0aW9uIGRlZXBFcXVhbChhLCBiKSB7XHJcbiAgICBpZiAoYSA9PT0gYikge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgY29uc3QgYUtleXMgPSBPYmplY3Qua2V5cyhhKTtcclxuICAgIGNvbnN0IGJLZXlzID0gT2JqZWN0LmtleXMoYik7XHJcbiAgICBmb3IgKGNvbnN0IGsgb2YgYUtleXMpIHtcclxuICAgICAgICBpZiAoIWJLZXlzLmluY2x1ZGVzKGspKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgYVByb3AgPSBhW2tdO1xyXG4gICAgICAgIGNvbnN0IGJQcm9wID0gYltrXTtcclxuICAgICAgICBpZiAoaXNPYmplY3QoYVByb3ApICYmIGlzT2JqZWN0KGJQcm9wKSkge1xyXG4gICAgICAgICAgICBpZiAoIWRlZXBFcXVhbChhUHJvcCwgYlByb3ApKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYVByb3AgIT09IGJQcm9wKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBmb3IgKGNvbnN0IGsgb2YgYktleXMpIHtcclxuICAgICAgICBpZiAoIWFLZXlzLmluY2x1ZGVzKGspKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG5mdW5jdGlvbiBpc09iamVjdCh0aGluZykge1xyXG4gICAgcmV0dXJuIHRoaW5nICE9PSBudWxsICYmIHR5cGVvZiB0aGluZyA9PT0gJ29iamVjdCc7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFJlamVjdHMgaWYgdGhlIGdpdmVuIHByb21pc2UgZG9lc24ndCByZXNvbHZlIGluIHRpbWVJbk1TIG1pbGxpc2Vjb25kcy5cclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBwcm9taXNlV2l0aFRpbWVvdXQocHJvbWlzZSwgdGltZUluTVMgPSAyMDAwKSB7XHJcbiAgICBjb25zdCBkZWZlcnJlZFByb21pc2UgPSBuZXcgRGVmZXJyZWQoKTtcclxuICAgIHNldFRpbWVvdXQoKCkgPT4gZGVmZXJyZWRQcm9taXNlLnJlamVjdCgndGltZW91dCEnKSwgdGltZUluTVMpO1xyXG4gICAgcHJvbWlzZS50aGVuKGRlZmVycmVkUHJvbWlzZS5yZXNvbHZlLCBkZWZlcnJlZFByb21pc2UucmVqZWN0KTtcclxuICAgIHJldHVybiBkZWZlcnJlZFByb21pc2UucHJvbWlzZTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUmV0dXJucyBhIHF1ZXJ5c3RyaW5nLWZvcm1hdHRlZCBzdHJpbmcgKGUuZy4gJmFyZz12YWwmYXJnMj12YWwyKSBmcm9tIGFcclxuICogcGFyYW1zIG9iamVjdCAoZS5nLiB7YXJnOiAndmFsJywgYXJnMjogJ3ZhbDInfSlcclxuICogTm90ZTogWW91IG11c3QgcHJlcGVuZCBpdCB3aXRoID8gd2hlbiBhZGRpbmcgaXQgdG8gYSBVUkwuXHJcbiAqL1xyXG5mdW5jdGlvbiBxdWVyeXN0cmluZyhxdWVyeXN0cmluZ1BhcmFtcykge1xyXG4gICAgY29uc3QgcGFyYW1zID0gW107XHJcbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhxdWVyeXN0cmluZ1BhcmFtcykpIHtcclxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcclxuICAgICAgICAgICAgdmFsdWUuZm9yRWFjaChhcnJheVZhbCA9PiB7XHJcbiAgICAgICAgICAgICAgICBwYXJhbXMucHVzaChlbmNvZGVVUklDb21wb25lbnQoa2V5KSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudChhcnJheVZhbCkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHBhcmFtcy5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChrZXkpICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHBhcmFtcy5sZW5ndGggPyAnJicgKyBwYXJhbXMuam9pbignJicpIDogJyc7XHJcbn1cclxuLyoqXHJcbiAqIERlY29kZXMgYSBxdWVyeXN0cmluZyAoZS5nLiA/YXJnPXZhbCZhcmcyPXZhbDIpIGludG8gYSBwYXJhbXMgb2JqZWN0XHJcbiAqIChlLmcuIHthcmc6ICd2YWwnLCBhcmcyOiAndmFsMid9KVxyXG4gKi9cclxuZnVuY3Rpb24gcXVlcnlzdHJpbmdEZWNvZGUocXVlcnlzdHJpbmcpIHtcclxuICAgIGNvbnN0IG9iaiA9IHt9O1xyXG4gICAgY29uc3QgdG9rZW5zID0gcXVlcnlzdHJpbmcucmVwbGFjZSgvXlxcPy8sICcnKS5zcGxpdCgnJicpO1xyXG4gICAgdG9rZW5zLmZvckVhY2godG9rZW4gPT4ge1xyXG4gICAgICAgIGlmICh0b2tlbikge1xyXG4gICAgICAgICAgICBjb25zdCBba2V5LCB2YWx1ZV0gPSB0b2tlbi5zcGxpdCgnPScpO1xyXG4gICAgICAgICAgICBvYmpbZGVjb2RlVVJJQ29tcG9uZW50KGtleSldID0gZGVjb2RlVVJJQ29tcG9uZW50KHZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBvYmo7XHJcbn1cclxuLyoqXHJcbiAqIEV4dHJhY3QgdGhlIHF1ZXJ5IHN0cmluZyBwYXJ0IG9mIGEgVVJMLCBpbmNsdWRpbmcgdGhlIGxlYWRpbmcgcXVlc3Rpb24gbWFyayAoaWYgcHJlc2VudCkuXHJcbiAqL1xyXG5mdW5jdGlvbiBleHRyYWN0UXVlcnlzdHJpbmcodXJsKSB7XHJcbiAgICBjb25zdCBxdWVyeVN0YXJ0ID0gdXJsLmluZGV4T2YoJz8nKTtcclxuICAgIGlmICghcXVlcnlTdGFydCkge1xyXG4gICAgICAgIHJldHVybiAnJztcclxuICAgIH1cclxuICAgIGNvbnN0IGZyYWdtZW50U3RhcnQgPSB1cmwuaW5kZXhPZignIycsIHF1ZXJ5U3RhcnQpO1xyXG4gICAgcmV0dXJuIHVybC5zdWJzdHJpbmcocXVlcnlTdGFydCwgZnJhZ21lbnRTdGFydCA+IDAgPyBmcmFnbWVudFN0YXJ0IDogdW5kZWZpbmVkKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQGZpbGVvdmVydmlldyBTSEEtMSBjcnlwdG9ncmFwaGljIGhhc2guXHJcbiAqIFZhcmlhYmxlIG5hbWVzIGZvbGxvdyB0aGUgbm90YXRpb24gaW4gRklQUyBQVUIgMTgwLTM6XHJcbiAqIGh0dHA6Ly9jc3JjLm5pc3QuZ292L3B1YmxpY2F0aW9ucy9maXBzL2ZpcHMxODAtMy9maXBzMTgwLTNfZmluYWwucGRmLlxyXG4gKlxyXG4gKiBVc2FnZTpcclxuICogICB2YXIgc2hhMSA9IG5ldyBzaGExKCk7XHJcbiAqICAgc2hhMS51cGRhdGUoYnl0ZXMpO1xyXG4gKiAgIHZhciBoYXNoID0gc2hhMS5kaWdlc3QoKTtcclxuICpcclxuICogUGVyZm9ybWFuY2U6XHJcbiAqICAgQ2hyb21lIDIzOiAgIH40MDAgTWJpdC9zXHJcbiAqICAgRmlyZWZveCAxNjogIH4yNTAgTWJpdC9zXHJcbiAqXHJcbiAqL1xyXG4vKipcclxuICogU0hBLTEgY3J5cHRvZ3JhcGhpYyBoYXNoIGNvbnN0cnVjdG9yLlxyXG4gKlxyXG4gKiBUaGUgcHJvcGVydGllcyBkZWNsYXJlZCBoZXJlIGFyZSBkaXNjdXNzZWQgaW4gdGhlIGFib3ZlIGFsZ29yaXRobSBkb2N1bWVudC5cclxuICogQGNvbnN0cnVjdG9yXHJcbiAqIEBmaW5hbFxyXG4gKiBAc3RydWN0XHJcbiAqL1xyXG5jbGFzcyBTaGExIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEhvbGRzIHRoZSBwcmV2aW91cyB2YWx1ZXMgb2YgYWNjdW11bGF0ZWQgdmFyaWFibGVzIGEtZSBpbiB0aGUgY29tcHJlc3NfXHJcbiAgICAgICAgICogZnVuY3Rpb24uXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmNoYWluXyA9IFtdO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEEgYnVmZmVyIGhvbGRpbmcgdGhlIHBhcnRpYWxseSBjb21wdXRlZCBoYXNoIHJlc3VsdC5cclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuYnVmXyA9IFtdO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEFuIGFycmF5IG9mIDgwIGJ5dGVzLCBlYWNoIGEgcGFydCBvZiB0aGUgbWVzc2FnZSB0byBiZSBoYXNoZWQuICBSZWZlcnJlZCB0b1xyXG4gICAgICAgICAqIGFzIHRoZSBtZXNzYWdlIHNjaGVkdWxlIGluIHRoZSBkb2NzLlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5XXyA9IFtdO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENvbnRhaW5zIGRhdGEgbmVlZGVkIHRvIHBhZCBtZXNzYWdlcyBsZXNzIHRoYW4gNjQgYnl0ZXMuXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnBhZF8gPSBbXTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAcHJpdmF0ZSB7bnVtYmVyfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuaW5idWZfID0gMDtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAcHJpdmF0ZSB7bnVtYmVyfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMudG90YWxfID0gMDtcclxuICAgICAgICB0aGlzLmJsb2NrU2l6ZSA9IDUxMiAvIDg7XHJcbiAgICAgICAgdGhpcy5wYWRfWzBdID0gMTI4O1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgdGhpcy5ibG9ja1NpemU7ICsraSkge1xyXG4gICAgICAgICAgICB0aGlzLnBhZF9baV0gPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnJlc2V0KCk7XHJcbiAgICB9XHJcbiAgICByZXNldCgpIHtcclxuICAgICAgICB0aGlzLmNoYWluX1swXSA9IDB4Njc0NTIzMDE7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bMV0gPSAweGVmY2RhYjg5O1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzJdID0gMHg5OGJhZGNmZTtcclxuICAgICAgICB0aGlzLmNoYWluX1szXSA9IDB4MTAzMjU0NzY7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bNF0gPSAweGMzZDJlMWYwO1xyXG4gICAgICAgIHRoaXMuaW5idWZfID0gMDtcclxuICAgICAgICB0aGlzLnRvdGFsXyA9IDA7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEludGVybmFsIGNvbXByZXNzIGhlbHBlciBmdW5jdGlvbi5cclxuICAgICAqIEBwYXJhbSBidWYgQmxvY2sgdG8gY29tcHJlc3MuXHJcbiAgICAgKiBAcGFyYW0gb2Zmc2V0IE9mZnNldCBvZiB0aGUgYmxvY2sgaW4gdGhlIGJ1ZmZlci5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIGNvbXByZXNzXyhidWYsIG9mZnNldCkge1xyXG4gICAgICAgIGlmICghb2Zmc2V0KSB7XHJcbiAgICAgICAgICAgIG9mZnNldCA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IFcgPSB0aGlzLldfO1xyXG4gICAgICAgIC8vIGdldCAxNiBiaWcgZW5kaWFuIHdvcmRzXHJcbiAgICAgICAgaWYgKHR5cGVvZiBidWYgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTY7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgLy8gVE9ETyh1c2VyKTogW2J1ZyA4MTQwMTIyXSBSZWNlbnQgdmVyc2lvbnMgb2YgU2FmYXJpIGZvciBNYWMgT1MgYW5kIGlPU1xyXG4gICAgICAgICAgICAgICAgLy8gaGF2ZSBhIGJ1ZyB0aGF0IHR1cm5zIHRoZSBwb3N0LWluY3JlbWVudCArKyBvcGVyYXRvciBpbnRvIHByZS1pbmNyZW1lbnRcclxuICAgICAgICAgICAgICAgIC8vIGR1cmluZyBKSVQgY29tcGlsYXRpb24uICBXZSBoYXZlIGNvZGUgdGhhdCBkZXBlbmRzIGhlYXZpbHkgb24gU0hBLTEgZm9yXHJcbiAgICAgICAgICAgICAgICAvLyBjb3JyZWN0bmVzcyBhbmQgd2hpY2ggaXMgYWZmZWN0ZWQgYnkgdGhpcyBidWcsIHNvIEkndmUgcmVtb3ZlZCBhbGwgdXNlc1xyXG4gICAgICAgICAgICAgICAgLy8gb2YgcG9zdC1pbmNyZW1lbnQgKysgaW4gd2hpY2ggdGhlIHJlc3VsdCB2YWx1ZSBpcyB1c2VkLiAgV2UgY2FuIHJldmVydFxyXG4gICAgICAgICAgICAgICAgLy8gdGhpcyBjaGFuZ2Ugb25jZSB0aGUgU2FmYXJpIGJ1Z1xyXG4gICAgICAgICAgICAgICAgLy8gKGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xMDkwMzYpIGhhcyBiZWVuIGZpeGVkIGFuZFxyXG4gICAgICAgICAgICAgICAgLy8gbW9zdCBjbGllbnRzIGhhdmUgYmVlbiB1cGRhdGVkLlxyXG4gICAgICAgICAgICAgICAgV1tpXSA9XHJcbiAgICAgICAgICAgICAgICAgICAgKGJ1Zi5jaGFyQ29kZUF0KG9mZnNldCkgPDwgMjQpIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKGJ1Zi5jaGFyQ29kZUF0KG9mZnNldCArIDEpIDw8IDE2KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChidWYuY2hhckNvZGVBdChvZmZzZXQgKyAyKSA8PCA4KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1Zi5jaGFyQ29kZUF0KG9mZnNldCArIDMpO1xyXG4gICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTY7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgV1tpXSA9XHJcbiAgICAgICAgICAgICAgICAgICAgKGJ1ZltvZmZzZXRdIDw8IDI0KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChidWZbb2Zmc2V0ICsgMV0gPDwgMTYpIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKGJ1ZltvZmZzZXQgKyAyXSA8PCA4KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZltvZmZzZXQgKyAzXTtcclxuICAgICAgICAgICAgICAgIG9mZnNldCArPSA0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGV4cGFuZCB0byA4MCB3b3Jkc1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAxNjsgaSA8IDgwOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgdCA9IFdbaSAtIDNdIF4gV1tpIC0gOF0gXiBXW2kgLSAxNF0gXiBXW2kgLSAxNl07XHJcbiAgICAgICAgICAgIFdbaV0gPSAoKHQgPDwgMSkgfCAodCA+Pj4gMzEpKSAmIDB4ZmZmZmZmZmY7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBhID0gdGhpcy5jaGFpbl9bMF07XHJcbiAgICAgICAgbGV0IGIgPSB0aGlzLmNoYWluX1sxXTtcclxuICAgICAgICBsZXQgYyA9IHRoaXMuY2hhaW5fWzJdO1xyXG4gICAgICAgIGxldCBkID0gdGhpcy5jaGFpbl9bM107XHJcbiAgICAgICAgbGV0IGUgPSB0aGlzLmNoYWluX1s0XTtcclxuICAgICAgICBsZXQgZiwgaztcclxuICAgICAgICAvLyBUT0RPKHVzZXIpOiBUcnkgdG8gdW5yb2xsIHRoaXMgbG9vcCB0byBzcGVlZCB1cCB0aGUgY29tcHV0YXRpb24uXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA4MDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChpIDwgNDApIHtcclxuICAgICAgICAgICAgICAgIGlmIChpIDwgMjApIHtcclxuICAgICAgICAgICAgICAgICAgICBmID0gZCBeIChiICYgKGMgXiBkKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgayA9IDB4NWE4Mjc5OTk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBmID0gYiBeIGMgXiBkO1xyXG4gICAgICAgICAgICAgICAgICAgIGsgPSAweDZlZDllYmExO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKGkgPCA2MCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGYgPSAoYiAmIGMpIHwgKGQgJiAoYiB8IGMpKTtcclxuICAgICAgICAgICAgICAgICAgICBrID0gMHg4ZjFiYmNkYztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGYgPSBiIF4gYyBeIGQ7XHJcbiAgICAgICAgICAgICAgICAgICAgayA9IDB4Y2E2MmMxZDY7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgdCA9ICgoKGEgPDwgNSkgfCAoYSA+Pj4gMjcpKSArIGYgKyBlICsgayArIFdbaV0pICYgMHhmZmZmZmZmZjtcclxuICAgICAgICAgICAgZSA9IGQ7XHJcbiAgICAgICAgICAgIGQgPSBjO1xyXG4gICAgICAgICAgICBjID0gKChiIDw8IDMwKSB8IChiID4+PiAyKSkgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgICAgICBiID0gYTtcclxuICAgICAgICAgICAgYSA9IHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY2hhaW5fWzBdID0gKHRoaXMuY2hhaW5fWzBdICsgYSkgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzFdID0gKHRoaXMuY2hhaW5fWzFdICsgYikgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzJdID0gKHRoaXMuY2hhaW5fWzJdICsgYykgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzNdID0gKHRoaXMuY2hhaW5fWzNdICsgZCkgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzRdID0gKHRoaXMuY2hhaW5fWzRdICsgZSkgJiAweGZmZmZmZmZmO1xyXG4gICAgfVxyXG4gICAgdXBkYXRlKGJ5dGVzLCBsZW5ndGgpIHtcclxuICAgICAgICAvLyBUT0RPKGpvaG5sZW56KTogdGlnaHRlbiB0aGUgZnVuY3Rpb24gc2lnbmF0dXJlIGFuZCByZW1vdmUgdGhpcyBjaGVja1xyXG4gICAgICAgIGlmIChieXRlcyA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGxlbmd0aCA9IGJ5dGVzLmxlbmd0aDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgbGVuZ3RoTWludXNCbG9jayA9IGxlbmd0aCAtIHRoaXMuYmxvY2tTaXplO1xyXG4gICAgICAgIGxldCBuID0gMDtcclxuICAgICAgICAvLyBVc2luZyBsb2NhbCBpbnN0ZWFkIG9mIG1lbWJlciB2YXJpYWJsZXMgZ2l2ZXMgfjUlIHNwZWVkdXAgb24gRmlyZWZveCAxNi5cclxuICAgICAgICBjb25zdCBidWYgPSB0aGlzLmJ1Zl87XHJcbiAgICAgICAgbGV0IGluYnVmID0gdGhpcy5pbmJ1Zl87XHJcbiAgICAgICAgLy8gVGhlIG91dGVyIHdoaWxlIGxvb3Agc2hvdWxkIGV4ZWN1dGUgYXQgbW9zdCB0d2ljZS5cclxuICAgICAgICB3aGlsZSAobiA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAvLyBXaGVuIHdlIGhhdmUgbm8gZGF0YSBpbiB0aGUgYmxvY2sgdG8gdG9wIHVwLCB3ZSBjYW4gZGlyZWN0bHkgcHJvY2VzcyB0aGVcclxuICAgICAgICAgICAgLy8gaW5wdXQgYnVmZmVyIChhc3N1bWluZyBpdCBjb250YWlucyBzdWZmaWNpZW50IGRhdGEpLiBUaGlzIGdpdmVzIH4yNSVcclxuICAgICAgICAgICAgLy8gc3BlZWR1cCBvbiBDaHJvbWUgMjMgYW5kIH4xNSUgc3BlZWR1cCBvbiBGaXJlZm94IDE2LCBidXQgcmVxdWlyZXMgdGhhdFxyXG4gICAgICAgICAgICAvLyB0aGUgZGF0YSBpcyBwcm92aWRlZCBpbiBsYXJnZSBjaHVua3MgKG9yIGluIG11bHRpcGxlcyBvZiA2NCBieXRlcykuXHJcbiAgICAgICAgICAgIGlmIChpbmJ1ZiA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKG4gPD0gbGVuZ3RoTWludXNCbG9jaykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcHJlc3NfKGJ5dGVzLCBuKTtcclxuICAgICAgICAgICAgICAgICAgICBuICs9IHRoaXMuYmxvY2tTaXplO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgYnl0ZXMgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAobiA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1ZltpbmJ1Zl0gPSBieXRlcy5jaGFyQ29kZUF0KG4pO1xyXG4gICAgICAgICAgICAgICAgICAgICsraW5idWY7XHJcbiAgICAgICAgICAgICAgICAgICAgKytuO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmJ1ZiA9PT0gdGhpcy5ibG9ja1NpemUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wcmVzc18oYnVmKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5idWYgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBKdW1wIHRvIHRoZSBvdXRlciBsb29wIHNvIHdlIHVzZSB0aGUgZnVsbC1ibG9jayBvcHRpbWl6YXRpb24uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChuIDwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnVmW2luYnVmXSA9IGJ5dGVzW25dO1xyXG4gICAgICAgICAgICAgICAgICAgICsraW5idWY7XHJcbiAgICAgICAgICAgICAgICAgICAgKytuO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmJ1ZiA9PT0gdGhpcy5ibG9ja1NpemUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wcmVzc18oYnVmKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5idWYgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBKdW1wIHRvIHRoZSBvdXRlciBsb29wIHNvIHdlIHVzZSB0aGUgZnVsbC1ibG9jayBvcHRpbWl6YXRpb24uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmluYnVmXyA9IGluYnVmO1xyXG4gICAgICAgIHRoaXMudG90YWxfICs9IGxlbmd0aDtcclxuICAgIH1cclxuICAgIC8qKiBAb3ZlcnJpZGUgKi9cclxuICAgIGRpZ2VzdCgpIHtcclxuICAgICAgICBjb25zdCBkaWdlc3QgPSBbXTtcclxuICAgICAgICBsZXQgdG90YWxCaXRzID0gdGhpcy50b3RhbF8gKiA4O1xyXG4gICAgICAgIC8vIEFkZCBwYWQgMHg4MCAweDAwKi5cclxuICAgICAgICBpZiAodGhpcy5pbmJ1Zl8gPCA1Nikge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZSh0aGlzLnBhZF8sIDU2IC0gdGhpcy5pbmJ1Zl8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGUodGhpcy5wYWRfLCB0aGlzLmJsb2NrU2l6ZSAtICh0aGlzLmluYnVmXyAtIDU2KSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEFkZCAjIGJpdHMuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMuYmxvY2tTaXplIC0gMTsgaSA+PSA1NjsgaS0tKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYnVmX1tpXSA9IHRvdGFsQml0cyAmIDI1NTtcclxuICAgICAgICAgICAgdG90YWxCaXRzIC89IDI1NjsgLy8gRG9uJ3QgdXNlIGJpdC1zaGlmdGluZyBoZXJlIVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNvbXByZXNzXyh0aGlzLmJ1Zl8pO1xyXG4gICAgICAgIGxldCBuID0gMDtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDU7IGkrKykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMjQ7IGogPj0gMDsgaiAtPSA4KSB7XHJcbiAgICAgICAgICAgICAgICBkaWdlc3Rbbl0gPSAodGhpcy5jaGFpbl9baV0gPj4gaikgJiAyNTU7XHJcbiAgICAgICAgICAgICAgICArK247XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGRpZ2VzdDtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogSGVscGVyIHRvIG1ha2UgYSBTdWJzY3JpYmUgZnVuY3Rpb24gKGp1c3QgbGlrZSBQcm9taXNlIGhlbHBzIG1ha2UgYVxyXG4gKiBUaGVuYWJsZSkuXHJcbiAqXHJcbiAqIEBwYXJhbSBleGVjdXRvciBGdW5jdGlvbiB3aGljaCBjYW4gbWFrZSBjYWxscyB0byBhIHNpbmdsZSBPYnNlcnZlclxyXG4gKiAgICAgYXMgYSBwcm94eS5cclxuICogQHBhcmFtIG9uTm9PYnNlcnZlcnMgQ2FsbGJhY2sgd2hlbiBjb3VudCBvZiBPYnNlcnZlcnMgZ29lcyB0byB6ZXJvLlxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlU3Vic2NyaWJlKGV4ZWN1dG9yLCBvbk5vT2JzZXJ2ZXJzKSB7XHJcbiAgICBjb25zdCBwcm94eSA9IG5ldyBPYnNlcnZlclByb3h5KGV4ZWN1dG9yLCBvbk5vT2JzZXJ2ZXJzKTtcclxuICAgIHJldHVybiBwcm94eS5zdWJzY3JpYmUuYmluZChwcm94eSk7XHJcbn1cclxuLyoqXHJcbiAqIEltcGxlbWVudCBmYW4tb3V0IGZvciBhbnkgbnVtYmVyIG9mIE9ic2VydmVycyBhdHRhY2hlZCB2aWEgYSBzdWJzY3JpYmVcclxuICogZnVuY3Rpb24uXHJcbiAqL1xyXG5jbGFzcyBPYnNlcnZlclByb3h5IHtcclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIGV4ZWN1dG9yIEZ1bmN0aW9uIHdoaWNoIGNhbiBtYWtlIGNhbGxzIHRvIGEgc2luZ2xlIE9ic2VydmVyXHJcbiAgICAgKiAgICAgYXMgYSBwcm94eS5cclxuICAgICAqIEBwYXJhbSBvbk5vT2JzZXJ2ZXJzIENhbGxiYWNrIHdoZW4gY291bnQgb2YgT2JzZXJ2ZXJzIGdvZXMgdG8gemVyby5cclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoZXhlY3V0b3IsIG9uTm9PYnNlcnZlcnMpIHtcclxuICAgICAgICB0aGlzLm9ic2VydmVycyA9IFtdO1xyXG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmVzID0gW107XHJcbiAgICAgICAgdGhpcy5vYnNlcnZlckNvdW50ID0gMDtcclxuICAgICAgICAvLyBNaWNyby10YXNrIHNjaGVkdWxpbmcgYnkgY2FsbGluZyB0YXNrLnRoZW4oKS5cclxuICAgICAgICB0aGlzLnRhc2sgPSBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICB0aGlzLmZpbmFsaXplZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMub25Ob09ic2VydmVycyA9IG9uTm9PYnNlcnZlcnM7XHJcbiAgICAgICAgLy8gQ2FsbCB0aGUgZXhlY3V0b3IgYXN5bmNocm9ub3VzbHkgc28gc3Vic2NyaWJlcnMgdGhhdCBhcmUgY2FsbGVkXHJcbiAgICAgICAgLy8gc3luY2hyb25vdXNseSBhZnRlciB0aGUgY3JlYXRpb24gb2YgdGhlIHN1YnNjcmliZSBmdW5jdGlvblxyXG4gICAgICAgIC8vIGNhbiBzdGlsbCByZWNlaXZlIHRoZSB2ZXJ5IGZpcnN0IHZhbHVlIGdlbmVyYXRlZCBpbiB0aGUgZXhlY3V0b3IuXHJcbiAgICAgICAgdGhpcy50YXNrXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgZXhlY3V0b3IodGhpcyk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKGUgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmVycm9yKGUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgbmV4dCh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuZm9yRWFjaE9ic2VydmVyKChvYnNlcnZlcikgPT4ge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5uZXh0KHZhbHVlKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGVycm9yKGVycm9yKSB7XHJcbiAgICAgICAgdGhpcy5mb3JFYWNoT2JzZXJ2ZXIoKG9ic2VydmVyKSA9PiB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLmVycm9yKGVycm9yKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmNsb3NlKGVycm9yKTtcclxuICAgIH1cclxuICAgIGNvbXBsZXRlKCkge1xyXG4gICAgICAgIHRoaXMuZm9yRWFjaE9ic2VydmVyKChvYnNlcnZlcikgPT4ge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogU3Vic2NyaWJlIGZ1bmN0aW9uIHRoYXQgY2FuIGJlIHVzZWQgdG8gYWRkIGFuIE9ic2VydmVyIHRvIHRoZSBmYW4tb3V0IGxpc3QuXHJcbiAgICAgKlxyXG4gICAgICogLSBXZSByZXF1aXJlIHRoYXQgbm8gZXZlbnQgaXMgc2VudCB0byBhIHN1YnNjcmliZXIgc3ljaHJvbm91c2x5IHRvIHRoZWlyXHJcbiAgICAgKiAgIGNhbGwgdG8gc3Vic2NyaWJlKCkuXHJcbiAgICAgKi9cclxuICAgIHN1YnNjcmliZShuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlKSB7XHJcbiAgICAgICAgbGV0IG9ic2VydmVyO1xyXG4gICAgICAgIGlmIChuZXh0T3JPYnNlcnZlciA9PT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgICAgIGVycm9yID09PSB1bmRlZmluZWQgJiZcclxuICAgICAgICAgICAgY29tcGxldGUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgT2JzZXJ2ZXIuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEFzc2VtYmxlIGFuIE9ic2VydmVyIG9iamVjdCB3aGVuIHBhc3NlZCBhcyBjYWxsYmFjayBmdW5jdGlvbnMuXHJcbiAgICAgICAgaWYgKGltcGxlbWVudHNBbnlNZXRob2RzKG5leHRPck9ic2VydmVyLCBbXHJcbiAgICAgICAgICAgICduZXh0JyxcclxuICAgICAgICAgICAgJ2Vycm9yJyxcclxuICAgICAgICAgICAgJ2NvbXBsZXRlJ1xyXG4gICAgICAgIF0pKSB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyID0gbmV4dE9yT2JzZXJ2ZXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBvYnNlcnZlciA9IHtcclxuICAgICAgICAgICAgICAgIG5leHQ6IG5leHRPck9ic2VydmVyLFxyXG4gICAgICAgICAgICAgICAgZXJyb3IsXHJcbiAgICAgICAgICAgICAgICBjb21wbGV0ZVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob2JzZXJ2ZXIubmV4dCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLm5leHQgPSBub29wO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob2JzZXJ2ZXIuZXJyb3IgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5lcnJvciA9IG5vb3A7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvYnNlcnZlci5jb21wbGV0ZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLmNvbXBsZXRlID0gbm9vcDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgdW5zdWIgPSB0aGlzLnVuc3Vic2NyaWJlT25lLmJpbmQodGhpcywgdGhpcy5vYnNlcnZlcnMubGVuZ3RoKTtcclxuICAgICAgICAvLyBBdHRlbXB0IHRvIHN1YnNjcmliZSB0byBhIHRlcm1pbmF0ZWQgT2JzZXJ2YWJsZSAtIHdlXHJcbiAgICAgICAgLy8ganVzdCByZXNwb25kIHRvIHRoZSBPYnNlcnZlciB3aXRoIHRoZSBmaW5hbCBlcnJvciBvciBjb21wbGV0ZVxyXG4gICAgICAgIC8vIGV2ZW50LlxyXG4gICAgICAgIGlmICh0aGlzLmZpbmFsaXplZCkge1xyXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXHJcbiAgICAgICAgICAgIHRoaXMudGFzay50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZmluYWxFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYnNlcnZlci5lcnJvcih0aGlzLmZpbmFsRXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIG5vdGhpbmdcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzLnB1c2gob2JzZXJ2ZXIpO1xyXG4gICAgICAgIHJldHVybiB1bnN1YjtcclxuICAgIH1cclxuICAgIC8vIFVuc3Vic2NyaWJlIGlzIHN5bmNocm9ub3VzIC0gd2UgZ3VhcmFudGVlIHRoYXQgbm8gZXZlbnRzIGFyZSBzZW50IHRvXHJcbiAgICAvLyBhbnkgdW5zdWJzY3JpYmVkIE9ic2VydmVyLlxyXG4gICAgdW5zdWJzY3JpYmVPbmUoaSkge1xyXG4gICAgICAgIGlmICh0aGlzLm9ic2VydmVycyA9PT0gdW5kZWZpbmVkIHx8IHRoaXMub2JzZXJ2ZXJzW2ldID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkZWxldGUgdGhpcy5vYnNlcnZlcnNbaV07XHJcbiAgICAgICAgdGhpcy5vYnNlcnZlckNvdW50IC09IDE7XHJcbiAgICAgICAgaWYgKHRoaXMub2JzZXJ2ZXJDb3VudCA9PT0gMCAmJiB0aGlzLm9uTm9PYnNlcnZlcnMgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLm9uTm9PYnNlcnZlcnModGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZm9yRWFjaE9ic2VydmVyKGZuKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZmluYWxpemVkKSB7XHJcbiAgICAgICAgICAgIC8vIEFscmVhZHkgY2xvc2VkIGJ5IHByZXZpb3VzIGV2ZW50Li4uLmp1c3QgZWF0IHRoZSBhZGRpdGlvbmFsIHZhbHVlcy5cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBTaW5jZSBzZW5kT25lIGNhbGxzIGFzeW5jaHJvbm91c2x5IC0gdGhlcmUgaXMgbm8gY2hhbmNlIHRoYXRcclxuICAgICAgICAvLyB0aGlzLm9ic2VydmVycyB3aWxsIGJlY29tZSB1bmRlZmluZWQuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm9ic2VydmVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLnNlbmRPbmUoaSwgZm4pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIENhbGwgdGhlIE9ic2VydmVyIHZpYSBvbmUgb2YgaXQncyBjYWxsYmFjayBmdW5jdGlvbi4gV2UgYXJlIGNhcmVmdWwgdG9cclxuICAgIC8vIGNvbmZpcm0gdGhhdCB0aGUgb2JzZXJ2ZSBoYXMgbm90IGJlZW4gdW5zdWJzY3JpYmVkIHNpbmNlIHRoaXMgYXN5bmNocm9ub3VzXHJcbiAgICAvLyBmdW5jdGlvbiBoYWQgYmVlbiBxdWV1ZWQuXHJcbiAgICBzZW5kT25lKGksIGZuKSB7XHJcbiAgICAgICAgLy8gRXhlY3V0ZSB0aGUgY2FsbGJhY2sgYXN5bmNocm9ub3VzbHlcclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXHJcbiAgICAgICAgdGhpcy50YXNrLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5vYnNlcnZlcnMgIT09IHVuZGVmaW5lZCAmJiB0aGlzLm9ic2VydmVyc1tpXSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZuKHRoaXMub2JzZXJ2ZXJzW2ldKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSWdub3JlIGV4Y2VwdGlvbnMgcmFpc2VkIGluIE9ic2VydmVycyBvciBtaXNzaW5nIG1ldGhvZHMgb2YgYW5cclxuICAgICAgICAgICAgICAgICAgICAvLyBPYnNlcnZlci5cclxuICAgICAgICAgICAgICAgICAgICAvLyBMb2cgZXJyb3IgdG8gY29uc29sZS4gYi8zMTQwNDgwNlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcgJiYgY29uc29sZS5lcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgY2xvc2UoZXJyKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZmluYWxpemVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5maW5hbGl6ZWQgPSB0cnVlO1xyXG4gICAgICAgIGlmIChlcnIgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLmZpbmFsRXJyb3IgPSBlcnI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFByb3h5IGlzIG5vIGxvbmdlciBuZWVkZWQgLSBnYXJiYWdlIGNvbGxlY3QgcmVmZXJlbmNlc1xyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcclxuICAgICAgICB0aGlzLnRhc2sudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMub2JzZXJ2ZXJzID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB0aGlzLm9uTm9PYnNlcnZlcnMgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuLyoqIFR1cm4gc3luY2hyb25vdXMgZnVuY3Rpb24gaW50byBvbmUgY2FsbGVkIGFzeW5jaHJvbm91c2x5LiAqL1xyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10eXBlc1xyXG5mdW5jdGlvbiBhc3luYyhmbiwgb25FcnJvcikge1xyXG4gICAgcmV0dXJuICguLi5hcmdzKSA9PiB7XHJcbiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKHRydWUpXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgZm4oLi4uYXJncyk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICBpZiAob25FcnJvcikge1xyXG4gICAgICAgICAgICAgICAgb25FcnJvcihlcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbn1cclxuLyoqXHJcbiAqIFJldHVybiB0cnVlIGlmIHRoZSBvYmplY3QgcGFzc2VkIGluIGltcGxlbWVudHMgYW55IG9mIHRoZSBuYW1lZCBtZXRob2RzLlxyXG4gKi9cclxuZnVuY3Rpb24gaW1wbGVtZW50c0FueU1ldGhvZHMob2JqLCBtZXRob2RzKSB7XHJcbiAgICBpZiAodHlwZW9mIG9iaiAhPT0gJ29iamVjdCcgfHwgb2JqID09PSBudWxsKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgZm9yIChjb25zdCBtZXRob2Qgb2YgbWV0aG9kcykge1xyXG4gICAgICAgIGlmIChtZXRob2QgaW4gb2JqICYmIHR5cGVvZiBvYmpbbWV0aG9kXSA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbn1cclxuZnVuY3Rpb24gbm9vcCgpIHtcclxuICAgIC8vIGRvIG5vdGhpbmdcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQ2hlY2sgdG8gbWFrZSBzdXJlIHRoZSBhcHByb3ByaWF0ZSBudW1iZXIgb2YgYXJndW1lbnRzIGFyZSBwcm92aWRlZCBmb3IgYSBwdWJsaWMgZnVuY3Rpb24uXHJcbiAqIFRocm93cyBhbiBlcnJvciBpZiBpdCBmYWlscy5cclxuICpcclxuICogQHBhcmFtIGZuTmFtZSBUaGUgZnVuY3Rpb24gbmFtZVxyXG4gKiBAcGFyYW0gbWluQ291bnQgVGhlIG1pbmltdW0gbnVtYmVyIG9mIGFyZ3VtZW50cyB0byBhbGxvdyBmb3IgdGhlIGZ1bmN0aW9uIGNhbGxcclxuICogQHBhcmFtIG1heENvdW50IFRoZSBtYXhpbXVtIG51bWJlciBvZiBhcmd1bWVudCB0byBhbGxvdyBmb3IgdGhlIGZ1bmN0aW9uIGNhbGxcclxuICogQHBhcmFtIGFyZ0NvdW50IFRoZSBhY3R1YWwgbnVtYmVyIG9mIGFyZ3VtZW50cyBwcm92aWRlZC5cclxuICovXHJcbmNvbnN0IHZhbGlkYXRlQXJnQ291bnQgPSBmdW5jdGlvbiAoZm5OYW1lLCBtaW5Db3VudCwgbWF4Q291bnQsIGFyZ0NvdW50KSB7XHJcbiAgICBsZXQgYXJnRXJyb3I7XHJcbiAgICBpZiAoYXJnQ291bnQgPCBtaW5Db3VudCkge1xyXG4gICAgICAgIGFyZ0Vycm9yID0gJ2F0IGxlYXN0ICcgKyBtaW5Db3VudDtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGFyZ0NvdW50ID4gbWF4Q291bnQpIHtcclxuICAgICAgICBhcmdFcnJvciA9IG1heENvdW50ID09PSAwID8gJ25vbmUnIDogJ25vIG1vcmUgdGhhbiAnICsgbWF4Q291bnQ7XHJcbiAgICB9XHJcbiAgICBpZiAoYXJnRXJyb3IpIHtcclxuICAgICAgICBjb25zdCBlcnJvciA9IGZuTmFtZSArXHJcbiAgICAgICAgICAgICcgZmFpbGVkOiBXYXMgY2FsbGVkIHdpdGggJyArXHJcbiAgICAgICAgICAgIGFyZ0NvdW50ICtcclxuICAgICAgICAgICAgKGFyZ0NvdW50ID09PSAxID8gJyBhcmd1bWVudC4nIDogJyBhcmd1bWVudHMuJykgK1xyXG4gICAgICAgICAgICAnIEV4cGVjdHMgJyArXHJcbiAgICAgICAgICAgIGFyZ0Vycm9yICtcclxuICAgICAgICAgICAgJy4nO1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvcik7XHJcbiAgICB9XHJcbn07XHJcbi8qKlxyXG4gKiBHZW5lcmF0ZXMgYSBzdHJpbmcgdG8gcHJlZml4IGFuIGVycm9yIG1lc3NhZ2UgYWJvdXQgZmFpbGVkIGFyZ3VtZW50IHZhbGlkYXRpb25cclxuICpcclxuICogQHBhcmFtIGZuTmFtZSBUaGUgZnVuY3Rpb24gbmFtZVxyXG4gKiBAcGFyYW0gYXJnTmFtZSBUaGUgbmFtZSBvZiB0aGUgYXJndW1lbnRcclxuICogQHJldHVybiBUaGUgcHJlZml4IHRvIGFkZCB0byB0aGUgZXJyb3IgdGhyb3duIGZvciB2YWxpZGF0aW9uLlxyXG4gKi9cclxuZnVuY3Rpb24gZXJyb3JQcmVmaXgoZm5OYW1lLCBhcmdOYW1lKSB7XHJcbiAgICByZXR1cm4gYCR7Zm5OYW1lfSBmYWlsZWQ6ICR7YXJnTmFtZX0gYXJndW1lbnQgYDtcclxufVxyXG4vKipcclxuICogQHBhcmFtIGZuTmFtZVxyXG4gKiBAcGFyYW0gYXJndW1lbnROdW1iZXJcclxuICogQHBhcmFtIG5hbWVzcGFjZVxyXG4gKiBAcGFyYW0gb3B0aW9uYWxcclxuICovXHJcbmZ1bmN0aW9uIHZhbGlkYXRlTmFtZXNwYWNlKGZuTmFtZSwgbmFtZXNwYWNlLCBvcHRpb25hbCkge1xyXG4gICAgaWYgKG9wdGlvbmFsICYmICFuYW1lc3BhY2UpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIG5hbWVzcGFjZSAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICAvL1RPRE86IEkgc2hvdWxkIGRvIG1vcmUgdmFsaWRhdGlvbiBoZXJlLiBXZSBvbmx5IGFsbG93IGNlcnRhaW4gY2hhcnMgaW4gbmFtZXNwYWNlcy5cclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JQcmVmaXgoZm5OYW1lLCAnbmFtZXNwYWNlJykgKyAnbXVzdCBiZSBhIHZhbGlkIGZpcmViYXNlIG5hbWVzcGFjZS4nKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiB2YWxpZGF0ZUNhbGxiYWNrKGZuTmFtZSwgYXJndW1lbnROYW1lLCBcclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHlwZXNcclxuY2FsbGJhY2ssIG9wdGlvbmFsKSB7XHJcbiAgICBpZiAob3B0aW9uYWwgJiYgIWNhbGxiYWNrKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvclByZWZpeChmbk5hbWUsIGFyZ3VtZW50TmFtZSkgKyAnbXVzdCBiZSBhIHZhbGlkIGZ1bmN0aW9uLicpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHZhbGlkYXRlQ29udGV4dE9iamVjdChmbk5hbWUsIGFyZ3VtZW50TmFtZSwgY29udGV4dCwgb3B0aW9uYWwpIHtcclxuICAgIGlmIChvcHRpb25hbCAmJiAhY29udGV4dCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2YgY29udGV4dCAhPT0gJ29iamVjdCcgfHwgY29udGV4dCA9PT0gbnVsbCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvclByZWZpeChmbk5hbWUsIGFyZ3VtZW50TmFtZSkgKyAnbXVzdCBiZSBhIHZhbGlkIGNvbnRleHQgb2JqZWN0LicpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8vIENvZGUgb3JpZ2luYWxseSBjYW1lIGZyb20gZ29vZy5jcnlwdC5zdHJpbmdUb1V0ZjhCeXRlQXJyYXksIGJ1dCBmb3Igc29tZSByZWFzb24gdGhleVxyXG4vLyBhdXRvbWF0aWNhbGx5IHJlcGxhY2VkICdcXHJcXG4nIHdpdGggJ1xcbicsIGFuZCB0aGV5IGRpZG4ndCBoYW5kbGUgc3Vycm9nYXRlIHBhaXJzLFxyXG4vLyBzbyBpdCdzIGJlZW4gbW9kaWZpZWQuXHJcbi8vIE5vdGUgdGhhdCBub3QgYWxsIFVuaWNvZGUgY2hhcmFjdGVycyBhcHBlYXIgYXMgc2luZ2xlIGNoYXJhY3RlcnMgaW4gSmF2YVNjcmlwdCBzdHJpbmdzLlxyXG4vLyBmcm9tQ2hhckNvZGUgcmV0dXJucyB0aGUgVVRGLTE2IGVuY29kaW5nIG9mIGEgY2hhcmFjdGVyIC0gc28gc29tZSBVbmljb2RlIGNoYXJhY3RlcnNcclxuLy8gdXNlIDIgY2hhcmFjdGVycyBpbiBKYXZhc2NyaXB0LiAgQWxsIDQtYnl0ZSBVVEYtOCBjaGFyYWN0ZXJzIGJlZ2luIHdpdGggYSBmaXJzdFxyXG4vLyBjaGFyYWN0ZXIgaW4gdGhlIHJhbmdlIDB4RDgwMCAtIDB4REJGRiAodGhlIGZpcnN0IGNoYXJhY3RlciBvZiBhIHNvLWNhbGxlZCBzdXJyb2dhdGVcclxuLy8gcGFpcikuXHJcbi8vIFNlZSBodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNS4xLyNzZWMtMTUuMS4zXHJcbi8qKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyXHJcbiAqIEByZXR1cm4ge0FycmF5fVxyXG4gKi9cclxuY29uc3Qgc3RyaW5nVG9CeXRlQXJyYXkgPSBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICBjb25zdCBvdXQgPSBbXTtcclxuICAgIGxldCBwID0gMDtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgbGV0IGMgPSBzdHIuY2hhckNvZGVBdChpKTtcclxuICAgICAgICAvLyBJcyB0aGlzIHRoZSBsZWFkIHN1cnJvZ2F0ZSBpbiBhIHN1cnJvZ2F0ZSBwYWlyP1xyXG4gICAgICAgIGlmIChjID49IDB4ZDgwMCAmJiBjIDw9IDB4ZGJmZikge1xyXG4gICAgICAgICAgICBjb25zdCBoaWdoID0gYyAtIDB4ZDgwMDsgLy8gdGhlIGhpZ2ggMTAgYml0cy5cclxuICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICBhc3NlcnQoaSA8IHN0ci5sZW5ndGgsICdTdXJyb2dhdGUgcGFpciBtaXNzaW5nIHRyYWlsIHN1cnJvZ2F0ZS4nKTtcclxuICAgICAgICAgICAgY29uc3QgbG93ID0gc3RyLmNoYXJDb2RlQXQoaSkgLSAweGRjMDA7IC8vIHRoZSBsb3cgMTAgYml0cy5cclxuICAgICAgICAgICAgYyA9IDB4MTAwMDAgKyAoaGlnaCA8PCAxMCkgKyBsb3c7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjIDwgMTI4KSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gYztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYyA8IDIwNDgpIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyA+PiA2KSB8IDE5MjtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYyA8IDY1NTM2KSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gMTIpIHwgMjI0O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiA2KSAmIDYzKSB8IDEyODtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gMTgpIHwgMjQwO1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiAxMikgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDYpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBvdXQ7XHJcbn07XHJcbi8qKlxyXG4gKiBDYWxjdWxhdGUgbGVuZ3RoIHdpdGhvdXQgYWN0dWFsbHkgY29udmVydGluZzsgdXNlZnVsIGZvciBkb2luZyBjaGVhcGVyIHZhbGlkYXRpb24uXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJcclxuICogQHJldHVybiB7bnVtYmVyfVxyXG4gKi9cclxuY29uc3Qgc3RyaW5nTGVuZ3RoID0gZnVuY3Rpb24gKHN0cikge1xyXG4gICAgbGV0IHAgPSAwO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjb25zdCBjID0gc3RyLmNoYXJDb2RlQXQoaSk7XHJcbiAgICAgICAgaWYgKGMgPCAxMjgpIHtcclxuICAgICAgICAgICAgcCsrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjIDwgMjA0OCkge1xyXG4gICAgICAgICAgICBwICs9IDI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMgPj0gMHhkODAwICYmIGMgPD0gMHhkYmZmKSB7XHJcbiAgICAgICAgICAgIC8vIExlYWQgc3Vycm9nYXRlIG9mIGEgc3Vycm9nYXRlIHBhaXIuICBUaGUgcGFpciB0b2dldGhlciB3aWxsIHRha2UgNCBieXRlcyB0byByZXByZXNlbnQuXHJcbiAgICAgICAgICAgIHAgKz0gNDtcclxuICAgICAgICAgICAgaSsrOyAvLyBza2lwIHRyYWlsIHN1cnJvZ2F0ZS5cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHAgKz0gMztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcDtcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIENvcGllZCBmcm9tIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yMTE3NTIzXHJcbiAqIEdlbmVyYXRlcyBhIG5ldyB1dWlkLlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCB1dWlkdjQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4gJ3h4eHh4eHh4LXh4eHgtNHh4eC15eHh4LXh4eHh4eHh4eHh4eCcucmVwbGFjZSgvW3h5XS9nLCBjID0+IHtcclxuICAgICAgICBjb25zdCByID0gKE1hdGgucmFuZG9tKCkgKiAxNikgfCAwLCB2ID0gYyA9PT0gJ3gnID8gciA6IChyICYgMHgzKSB8IDB4ODtcclxuICAgICAgICByZXR1cm4gdi50b1N0cmluZygxNik7XHJcbiAgICB9KTtcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFRoZSBhbW91bnQgb2YgbWlsbGlzZWNvbmRzIHRvIGV4cG9uZW50aWFsbHkgaW5jcmVhc2UuXHJcbiAqL1xyXG5jb25zdCBERUZBVUxUX0lOVEVSVkFMX01JTExJUyA9IDEwMDA7XHJcbi8qKlxyXG4gKiBUaGUgZmFjdG9yIHRvIGJhY2tvZmYgYnkuXHJcbiAqIFNob3VsZCBiZSBhIG51bWJlciBncmVhdGVyIHRoYW4gMS5cclxuICovXHJcbmNvbnN0IERFRkFVTFRfQkFDS09GRl9GQUNUT1IgPSAyO1xyXG4vKipcclxuICogVGhlIG1heGltdW0gbWlsbGlzZWNvbmRzIHRvIGluY3JlYXNlIHRvLlxyXG4gKlxyXG4gKiA8cD5WaXNpYmxlIGZvciB0ZXN0aW5nXHJcbiAqL1xyXG5jb25zdCBNQVhfVkFMVUVfTUlMTElTID0gNCAqIDYwICogNjAgKiAxMDAwOyAvLyBGb3VyIGhvdXJzLCBsaWtlIGlPUyBhbmQgQW5kcm9pZC5cclxuLyoqXHJcbiAqIFRoZSBwZXJjZW50YWdlIG9mIGJhY2tvZmYgdGltZSB0byByYW5kb21pemUgYnkuXHJcbiAqIFNlZVxyXG4gKiBodHRwOi8vZ28vc2FmZS1jbGllbnQtYmVoYXZpb3Ijc3RlcC0xLWRldGVybWluZS10aGUtYXBwcm9wcmlhdGUtcmV0cnktaW50ZXJ2YWwtdG8taGFuZGxlLXNwaWtlLXRyYWZmaWNcclxuICogZm9yIGNvbnRleHQuXHJcbiAqXHJcbiAqIDxwPlZpc2libGUgZm9yIHRlc3RpbmdcclxuICovXHJcbmNvbnN0IFJBTkRPTV9GQUNUT1IgPSAwLjU7XHJcbi8qKlxyXG4gKiBCYXNlZCBvbiB0aGUgYmFja29mZiBtZXRob2QgZnJvbVxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlL2Nsb3N1cmUtbGlicmFyeS9ibG9iL21hc3Rlci9jbG9zdXJlL2dvb2cvbWF0aC9leHBvbmVudGlhbGJhY2tvZmYuanMuXHJcbiAqIEV4dHJhY3RlZCBoZXJlIHNvIHdlIGRvbid0IG5lZWQgdG8gcGFzcyBtZXRhZGF0YSBhbmQgYSBzdGF0ZWZ1bCBFeHBvbmVudGlhbEJhY2tvZmYgb2JqZWN0IGFyb3VuZC5cclxuICovXHJcbmZ1bmN0aW9uIGNhbGN1bGF0ZUJhY2tvZmZNaWxsaXMoYmFja29mZkNvdW50LCBpbnRlcnZhbE1pbGxpcyA9IERFRkFVTFRfSU5URVJWQUxfTUlMTElTLCBiYWNrb2ZmRmFjdG9yID0gREVGQVVMVF9CQUNLT0ZGX0ZBQ1RPUikge1xyXG4gICAgLy8gQ2FsY3VsYXRlcyBhbiBleHBvbmVudGlhbGx5IGluY3JlYXNpbmcgdmFsdWUuXHJcbiAgICAvLyBEZXZpYXRpb246IGNhbGN1bGF0ZXMgdmFsdWUgZnJvbSBjb3VudCBhbmQgYSBjb25zdGFudCBpbnRlcnZhbCwgc28gd2Ugb25seSBuZWVkIHRvIHNhdmUgdmFsdWVcclxuICAgIC8vIGFuZCBjb3VudCB0byByZXN0b3JlIHN0YXRlLlxyXG4gICAgY29uc3QgY3VyckJhc2VWYWx1ZSA9IGludGVydmFsTWlsbGlzICogTWF0aC5wb3coYmFja29mZkZhY3RvciwgYmFja29mZkNvdW50KTtcclxuICAgIC8vIEEgcmFuZG9tIFwiZnV6elwiIHRvIGF2b2lkIHdhdmVzIG9mIHJldHJpZXMuXHJcbiAgICAvLyBEZXZpYXRpb246IHJhbmRvbUZhY3RvciBpcyByZXF1aXJlZC5cclxuICAgIGNvbnN0IHJhbmRvbVdhaXQgPSBNYXRoLnJvdW5kKFxyXG4gICAgLy8gQSBmcmFjdGlvbiBvZiB0aGUgYmFja29mZiB2YWx1ZSB0byBhZGQvc3VidHJhY3QuXHJcbiAgICAvLyBEZXZpYXRpb246IGNoYW5nZXMgbXVsdGlwbGljYXRpb24gb3JkZXIgdG8gaW1wcm92ZSByZWFkYWJpbGl0eS5cclxuICAgIFJBTkRPTV9GQUNUT1IgKlxyXG4gICAgICAgIGN1cnJCYXNlVmFsdWUgKlxyXG4gICAgICAgIC8vIEEgcmFuZG9tIGZsb2F0IChyb3VuZGVkIHRvIGludCBieSBNYXRoLnJvdW5kIGFib3ZlKSBpbiB0aGUgcmFuZ2UgWy0xLCAxXS4gRGV0ZXJtaW5lc1xyXG4gICAgICAgIC8vIGlmIHdlIGFkZCBvciBzdWJ0cmFjdC5cclxuICAgICAgICAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKlxyXG4gICAgICAgIDIpO1xyXG4gICAgLy8gTGltaXRzIGJhY2tvZmYgdG8gbWF4IHRvIGF2b2lkIGVmZmVjdGl2ZWx5IHBlcm1hbmVudCBiYWNrb2ZmLlxyXG4gICAgcmV0dXJuIE1hdGgubWluKE1BWF9WQUxVRV9NSUxMSVMsIGN1cnJCYXNlVmFsdWUgKyByYW5kb21XYWl0KTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUHJvdmlkZSBFbmdsaXNoIG9yZGluYWwgbGV0dGVycyBhZnRlciBhIG51bWJlclxyXG4gKi9cclxuZnVuY3Rpb24gb3JkaW5hbChpKSB7XHJcbiAgICBpZiAoIU51bWJlci5pc0Zpbml0ZShpKSkge1xyXG4gICAgICAgIHJldHVybiBgJHtpfWA7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gaSArIGluZGljYXRvcihpKTtcclxufVxyXG5mdW5jdGlvbiBpbmRpY2F0b3IoaSkge1xyXG4gICAgaSA9IE1hdGguYWJzKGkpO1xyXG4gICAgY29uc3QgY2VudCA9IGkgJSAxMDA7XHJcbiAgICBpZiAoY2VudCA+PSAxMCAmJiBjZW50IDw9IDIwKSB7XHJcbiAgICAgICAgcmV0dXJuICd0aCc7XHJcbiAgICB9XHJcbiAgICBjb25zdCBkZWMgPSBpICUgMTA7XHJcbiAgICBpZiAoZGVjID09PSAxKSB7XHJcbiAgICAgICAgcmV0dXJuICdzdCc7XHJcbiAgICB9XHJcbiAgICBpZiAoZGVjID09PSAyKSB7XHJcbiAgICAgICAgcmV0dXJuICduZCc7XHJcbiAgICB9XHJcbiAgICBpZiAoZGVjID09PSAzKSB7XHJcbiAgICAgICAgcmV0dXJuICdyZCc7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gJ3RoJztcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRNb2R1bGFySW5zdGFuY2Uoc2VydmljZSkge1xyXG4gICAgaWYgKHNlcnZpY2UgJiYgc2VydmljZS5fZGVsZWdhdGUpIHtcclxuICAgICAgICByZXR1cm4gc2VydmljZS5fZGVsZWdhdGU7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gc2VydmljZTtcclxuICAgIH1cclxufVxuXG5leHBvcnQgeyBDT05TVEFOVFMsIERlY29kZUJhc2U2NFN0cmluZ0Vycm9yLCBEZWZlcnJlZCwgRXJyb3JGYWN0b3J5LCBGaXJlYmFzZUVycm9yLCBNQVhfVkFMVUVfTUlMTElTLCBSQU5ET01fRkFDVE9SLCBTaGExLCBhcmVDb29raWVzRW5hYmxlZCwgYXNzZXJ0LCBhc3NlcnRpb25FcnJvciwgYXN5bmMsIGJhc2U2NCwgYmFzZTY0RGVjb2RlLCBiYXNlNjRFbmNvZGUsIGJhc2U2NHVybEVuY29kZVdpdGhvdXRQYWRkaW5nLCBjYWxjdWxhdGVCYWNrb2ZmTWlsbGlzLCBjb250YWlucywgY3JlYXRlTW9ja1VzZXJUb2tlbiwgY3JlYXRlU3Vic2NyaWJlLCBkZWNvZGUsIGRlZXBDb3B5LCBkZWVwRXF1YWwsIGRlZXBFeHRlbmQsIGVycm9yUHJlZml4LCBleHRyYWN0UXVlcnlzdHJpbmcsIGdldERlZmF1bHRBcHBDb25maWcsIGdldERlZmF1bHRFbXVsYXRvckhvc3QsIGdldERlZmF1bHRFbXVsYXRvckhvc3RuYW1lQW5kUG9ydCwgZ2V0RGVmYXVsdHMsIGdldEV4cGVyaW1lbnRhbFNldHRpbmcsIGdldEdsb2JhbCwgZ2V0TW9kdWxhckluc3RhbmNlLCBnZXRVQSwgaXNBZG1pbiwgaXNCcm93c2VyLCBpc0Jyb3dzZXJFeHRlbnNpb24sIGlzRWxlY3Ryb24sIGlzRW1wdHksIGlzSUUsIGlzSW5kZXhlZERCQXZhaWxhYmxlLCBpc01vYmlsZUNvcmRvdmEsIGlzTm9kZSwgaXNOb2RlU2RrLCBpc1JlYWN0TmF0aXZlLCBpc1NhZmFyaSwgaXNVV1AsIGlzVmFsaWRGb3JtYXQsIGlzVmFsaWRUaW1lc3RhbXAsIGlzc3VlZEF0VGltZSwganNvbkV2YWwsIG1hcCwgb3JkaW5hbCwgcHJvbWlzZVdpdGhUaW1lb3V0LCBxdWVyeXN0cmluZywgcXVlcnlzdHJpbmdEZWNvZGUsIHNhZmVHZXQsIHN0cmluZ0xlbmd0aCwgc3RyaW5nVG9CeXRlQXJyYXksIHN0cmluZ2lmeSwgdXVpZHY0LCB2YWxpZGF0ZUFyZ0NvdW50LCB2YWxpZGF0ZUNhbGxiYWNrLCB2YWxpZGF0ZUNvbnRleHRPYmplY3QsIHZhbGlkYXRlSW5kZXhlZERCT3BlbmFibGUsIHZhbGlkYXRlTmFtZXNwYWNlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20yMDE3LmpzLm1hcFxuIiwiaW1wb3J0IHsgRGVmZXJyZWQgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5cbi8qKlxyXG4gKiBDb21wb25lbnQgZm9yIHNlcnZpY2UgbmFtZSBULCBlLmcuIGBhdXRoYCwgYGF1dGgtaW50ZXJuYWxgXHJcbiAqL1xyXG5jbGFzcyBDb21wb25lbnQge1xyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIG5hbWUgVGhlIHB1YmxpYyBzZXJ2aWNlIG5hbWUsIGUuZy4gYXBwLCBhdXRoLCBmaXJlc3RvcmUsIGRhdGFiYXNlXHJcbiAgICAgKiBAcGFyYW0gaW5zdGFuY2VGYWN0b3J5IFNlcnZpY2UgZmFjdG9yeSByZXNwb25zaWJsZSBmb3IgY3JlYXRpbmcgdGhlIHB1YmxpYyBpbnRlcmZhY2VcclxuICAgICAqIEBwYXJhbSB0eXBlIHdoZXRoZXIgdGhlIHNlcnZpY2UgcHJvdmlkZWQgYnkgdGhlIGNvbXBvbmVudCBpcyBwdWJsaWMgb3IgcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lLCBpbnN0YW5jZUZhY3RvcnksIHR5cGUpIHtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VGYWN0b3J5ID0gaW5zdGFuY2VGYWN0b3J5O1xyXG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XHJcbiAgICAgICAgdGhpcy5tdWx0aXBsZUluc3RhbmNlcyA9IGZhbHNlO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFByb3BlcnRpZXMgdG8gYmUgYWRkZWQgdG8gdGhlIHNlcnZpY2UgbmFtZXNwYWNlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5zZXJ2aWNlUHJvcHMgPSB7fTtcclxuICAgICAgICB0aGlzLmluc3RhbnRpYXRpb25Nb2RlID0gXCJMQVpZXCIgLyogSW5zdGFudGlhdGlvbk1vZGUuTEFaWSAqLztcclxuICAgICAgICB0aGlzLm9uSW5zdGFuY2VDcmVhdGVkID0gbnVsbDtcclxuICAgIH1cclxuICAgIHNldEluc3RhbnRpYXRpb25Nb2RlKG1vZGUpIHtcclxuICAgICAgICB0aGlzLmluc3RhbnRpYXRpb25Nb2RlID0gbW9kZTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIHNldE11bHRpcGxlSW5zdGFuY2VzKG11bHRpcGxlSW5zdGFuY2VzKSB7XHJcbiAgICAgICAgdGhpcy5tdWx0aXBsZUluc3RhbmNlcyA9IG11bHRpcGxlSW5zdGFuY2VzO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgc2V0U2VydmljZVByb3BzKHByb3BzKSB7XHJcbiAgICAgICAgdGhpcy5zZXJ2aWNlUHJvcHMgPSBwcm9wcztcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIHNldEluc3RhbmNlQ3JlYXRlZENhbGxiYWNrKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdGhpcy5vbkluc3RhbmNlQ3JlYXRlZCA9IGNhbGxiYWNrO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IERFRkFVTFRfRU5UUllfTkFNRSA9ICdbREVGQVVMVF0nO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUHJvdmlkZXIgZm9yIGluc3RhbmNlIGZvciBzZXJ2aWNlIG5hbWUgVCwgZS5nLiAnYXV0aCcsICdhdXRoLWludGVybmFsJ1xyXG4gKiBOYW1lU2VydmljZU1hcHBpbmdbVF0gaXMgYW4gYWxpYXMgZm9yIHRoZSB0eXBlIG9mIHRoZSBpbnN0YW5jZVxyXG4gKi9cclxuY2xhc3MgUHJvdmlkZXIge1xyXG4gICAgY29uc3RydWN0b3IobmFtZSwgY29udGFpbmVyKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuICAgICAgICB0aGlzLmNvbXBvbmVudCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZXMgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZXNEZWZlcnJlZCA9IG5ldyBNYXAoKTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlc09wdGlvbnMgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgdGhpcy5vbkluaXRDYWxsYmFja3MgPSBuZXcgTWFwKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSBpZGVudGlmaWVyIEEgcHJvdmlkZXIgY2FuIHByb3ZpZGUgbXVsaXRwbGUgaW5zdGFuY2VzIG9mIGEgc2VydmljZVxyXG4gICAgICogaWYgdGhpcy5jb21wb25lbnQubXVsdGlwbGVJbnN0YW5jZXMgaXMgdHJ1ZS5cclxuICAgICAqL1xyXG4gICAgZ2V0KGlkZW50aWZpZXIpIHtcclxuICAgICAgICAvLyBpZiBtdWx0aXBsZUluc3RhbmNlcyBpcyBub3Qgc3VwcG9ydGVkLCB1c2UgdGhlIGRlZmF1bHQgbmFtZVxyXG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIoaWRlbnRpZmllcik7XHJcbiAgICAgICAgaWYgKCF0aGlzLmluc3RhbmNlc0RlZmVycmVkLmhhcyhub3JtYWxpemVkSWRlbnRpZmllcikpIHtcclxuICAgICAgICAgICAgY29uc3QgZGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQoKTtcclxuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5zZXQobm9ybWFsaXplZElkZW50aWZpZXIsIGRlZmVycmVkKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNJbml0aWFsaXplZChub3JtYWxpemVkSWRlbnRpZmllcikgfHxcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvdWxkQXV0b0luaXRpYWxpemUoKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gaW5pdGlhbGl6ZSB0aGUgc2VydmljZSBpZiBpdCBjYW4gYmUgYXV0by1pbml0aWFsaXplZFxyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnN0YW5jZSA9IHRoaXMuZ2V0T3JJbml0aWFsaXplU2VydmljZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlSWRlbnRpZmllcjogbm9ybWFsaXplZElkZW50aWZpZXJcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyB3aGVuIHRoZSBpbnN0YW5jZSBmYWN0b3J5IHRocm93cyBhbiBleGNlcHRpb24gZHVyaW5nIGdldCgpLCBpdCBzaG91bGQgbm90IGNhdXNlXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYSBmYXRhbCBlcnJvci4gV2UganVzdCByZXR1cm4gdGhlIHVucmVzb2x2ZWQgcHJvbWlzZSBpbiB0aGlzIGNhc2UuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuZ2V0KG5vcm1hbGl6ZWRJZGVudGlmaWVyKS5wcm9taXNlO1xyXG4gICAgfVxyXG4gICAgZ2V0SW1tZWRpYXRlKG9wdGlvbnMpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgLy8gaWYgbXVsdGlwbGVJbnN0YW5jZXMgaXMgbm90IHN1cHBvcnRlZCwgdXNlIHRoZSBkZWZhdWx0IG5hbWVcclxuICAgICAgICBjb25zdCBub3JtYWxpemVkSWRlbnRpZmllciA9IHRoaXMubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5pZGVudGlmaWVyKTtcclxuICAgICAgICBjb25zdCBvcHRpb25hbCA9IChfYSA9IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5vcHRpb25hbCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogZmFsc2U7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNJbml0aWFsaXplZChub3JtYWxpemVkSWRlbnRpZmllcikgfHxcclxuICAgICAgICAgICAgdGhpcy5zaG91bGRBdXRvSW5pdGlhbGl6ZSgpKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRPckluaXRpYWxpemVTZXJ2aWNlKHtcclxuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZUlkZW50aWZpZXI6IG5vcm1hbGl6ZWRJZGVudGlmaWVyXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbmFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBJbiBjYXNlIGEgY29tcG9uZW50IGlzIG5vdCBpbml0aWFsaXplZCBhbmQgc2hvdWxkL2NhbiBub3QgYmUgYXV0by1pbml0aWFsaXplZCBhdCB0aGUgbW9tZW50LCByZXR1cm4gbnVsbCBpZiB0aGUgb3B0aW9uYWwgZmxhZyBpcyBzZXQsIG9yIHRocm93XHJcbiAgICAgICAgICAgIGlmIChvcHRpb25hbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcihgU2VydmljZSAke3RoaXMubmFtZX0gaXMgbm90IGF2YWlsYWJsZWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0Q29tcG9uZW50KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbXBvbmVudDtcclxuICAgIH1cclxuICAgIHNldENvbXBvbmVudChjb21wb25lbnQpIHtcclxuICAgICAgICBpZiAoY29tcG9uZW50Lm5hbWUgIT09IHRoaXMubmFtZSkge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihgTWlzbWF0Y2hpbmcgQ29tcG9uZW50ICR7Y29tcG9uZW50Lm5hbWV9IGZvciBQcm92aWRlciAke3RoaXMubmFtZX0uYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmNvbXBvbmVudCkge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihgQ29tcG9uZW50IGZvciAke3RoaXMubmFtZX0gaGFzIGFscmVhZHkgYmVlbiBwcm92aWRlZGApO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNvbXBvbmVudCA9IGNvbXBvbmVudDtcclxuICAgICAgICAvLyByZXR1cm4gZWFybHkgd2l0aG91dCBhdHRlbXB0aW5nIHRvIGluaXRpYWxpemUgdGhlIGNvbXBvbmVudCBpZiB0aGUgY29tcG9uZW50IHJlcXVpcmVzIGV4cGxpY2l0IGluaXRpYWxpemF0aW9uIChjYWxsaW5nIGBQcm92aWRlci5pbml0aWFsaXplKClgKVxyXG4gICAgICAgIGlmICghdGhpcy5zaG91bGRBdXRvSW5pdGlhbGl6ZSgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gaWYgdGhlIHNlcnZpY2UgaXMgZWFnZXIsIGluaXRpYWxpemUgdGhlIGRlZmF1bHQgaW5zdGFuY2VcclxuICAgICAgICBpZiAoaXNDb21wb25lbnRFYWdlcihjb21wb25lbnQpKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdldE9ySW5pdGlhbGl6ZVNlcnZpY2UoeyBpbnN0YW5jZUlkZW50aWZpZXI6IERFRkFVTFRfRU5UUllfTkFNRSB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gd2hlbiB0aGUgaW5zdGFuY2UgZmFjdG9yeSBmb3IgYW4gZWFnZXIgQ29tcG9uZW50IHRocm93cyBhbiBleGNlcHRpb24gZHVyaW5nIHRoZSBlYWdlclxyXG4gICAgICAgICAgICAgICAgLy8gaW5pdGlhbGl6YXRpb24sIGl0IHNob3VsZCBub3QgY2F1c2UgYSBmYXRhbCBlcnJvci5cclxuICAgICAgICAgICAgICAgIC8vIFRPRE86IEludmVzdGlnYXRlIGlmIHdlIG5lZWQgdG8gbWFrZSBpdCBjb25maWd1cmFibGUsIGJlY2F1c2Ugc29tZSBjb21wb25lbnQgbWF5IHdhbnQgdG8gY2F1c2VcclxuICAgICAgICAgICAgICAgIC8vIGEgZmF0YWwgZXJyb3IgaW4gdGhpcyBjYXNlP1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIENyZWF0ZSBzZXJ2aWNlIGluc3RhbmNlcyBmb3IgdGhlIHBlbmRpbmcgcHJvbWlzZXMgYW5kIHJlc29sdmUgdGhlbVxyXG4gICAgICAgIC8vIE5PVEU6IGlmIHRoaXMubXVsdGlwbGVJbnN0YW5jZXMgaXMgZmFsc2UsIG9ubHkgdGhlIGRlZmF1bHQgaW5zdGFuY2Ugd2lsbCBiZSBjcmVhdGVkXHJcbiAgICAgICAgLy8gYW5kIGFsbCBwcm9taXNlcyB3aXRoIHJlc29sdmUgd2l0aCBpdCByZWdhcmRsZXNzIG9mIHRoZSBpZGVudGlmaWVyLlxyXG4gICAgICAgIGZvciAoY29uc3QgW2luc3RhbmNlSWRlbnRpZmllciwgaW5zdGFuY2VEZWZlcnJlZF0gb2YgdGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5lbnRyaWVzKCkpIHtcclxuICAgICAgICAgICAgY29uc3Qgbm9ybWFsaXplZElkZW50aWZpZXIgPSB0aGlzLm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihpbnN0YW5jZUlkZW50aWZpZXIpO1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgLy8gYGdldE9ySW5pdGlhbGl6ZVNlcnZpY2UoKWAgc2hvdWxkIGFsd2F5cyByZXR1cm4gYSB2YWxpZCBpbnN0YW5jZSBzaW5jZSBhIGNvbXBvbmVudCBpcyBndWFyYW50ZWVkLiB1c2UgISB0byBtYWtlIHR5cGVzY3JpcHQgaGFwcHkuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbnN0YW5jZSA9IHRoaXMuZ2V0T3JJbml0aWFsaXplU2VydmljZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VJZGVudGlmaWVyOiBub3JtYWxpemVkSWRlbnRpZmllclxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZURlZmVycmVkLnJlc29sdmUoaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyB3aGVuIHRoZSBpbnN0YW5jZSBmYWN0b3J5IHRocm93cyBhbiBleGNlcHRpb24sIGl0IHNob3VsZCBub3QgY2F1c2VcclxuICAgICAgICAgICAgICAgIC8vIGEgZmF0YWwgZXJyb3IuIFdlIGp1c3QgbGVhdmUgdGhlIHByb21pc2UgdW5yZXNvbHZlZC5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNsZWFySW5zdGFuY2UoaWRlbnRpZmllciA9IERFRkFVTFRfRU5UUllfTkFNRSkge1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuZGVsZXRlKGlkZW50aWZpZXIpO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VzT3B0aW9ucy5kZWxldGUoaWRlbnRpZmllcik7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZXMuZGVsZXRlKGlkZW50aWZpZXIpO1xyXG4gICAgfVxyXG4gICAgLy8gYXBwLmRlbGV0ZSgpIHdpbGwgY2FsbCB0aGlzIG1ldGhvZCBvbiBldmVyeSBwcm92aWRlciB0byBkZWxldGUgdGhlIHNlcnZpY2VzXHJcbiAgICAvLyBUT0RPOiBzaG91bGQgd2UgbWFyayB0aGUgcHJvdmlkZXIgYXMgZGVsZXRlZD9cclxuICAgIGFzeW5jIGRlbGV0ZSgpIHtcclxuICAgICAgICBjb25zdCBzZXJ2aWNlcyA9IEFycmF5LmZyb20odGhpcy5pbnN0YW5jZXMudmFsdWVzKCkpO1xyXG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKFtcclxuICAgICAgICAgICAgLi4uc2VydmljZXNcclxuICAgICAgICAgICAgICAgIC5maWx0ZXIoc2VydmljZSA9PiAnSU5URVJOQUwnIGluIHNlcnZpY2UpIC8vIGxlZ2FjeSBzZXJ2aWNlc1xyXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICAgICAgICAgIC5tYXAoc2VydmljZSA9PiBzZXJ2aWNlLklOVEVSTkFMLmRlbGV0ZSgpKSxcclxuICAgICAgICAgICAgLi4uc2VydmljZXNcclxuICAgICAgICAgICAgICAgIC5maWx0ZXIoc2VydmljZSA9PiAnX2RlbGV0ZScgaW4gc2VydmljZSkgLy8gbW9kdWxhcml6ZWQgc2VydmljZXNcclxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgICAgICAgICAubWFwKHNlcnZpY2UgPT4gc2VydmljZS5fZGVsZXRlKCkpXHJcbiAgICAgICAgXSk7XHJcbiAgICB9XHJcbiAgICBpc0NvbXBvbmVudFNldCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb21wb25lbnQgIT0gbnVsbDtcclxuICAgIH1cclxuICAgIGlzSW5pdGlhbGl6ZWQoaWRlbnRpZmllciA9IERFRkFVTFRfRU5UUllfTkFNRSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlcy5oYXMoaWRlbnRpZmllcik7XHJcbiAgICB9XHJcbiAgICBnZXRPcHRpb25zKGlkZW50aWZpZXIgPSBERUZBVUxUX0VOVFJZX05BTUUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pbnN0YW5jZXNPcHRpb25zLmdldChpZGVudGlmaWVyKSB8fCB7fTtcclxuICAgIH1cclxuICAgIGluaXRpYWxpemUob3B0cyA9IHt9KSB7XHJcbiAgICAgICAgY29uc3QgeyBvcHRpb25zID0ge30gfSA9IG9wdHM7XHJcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZElkZW50aWZpZXIgPSB0aGlzLm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihvcHRzLmluc3RhbmNlSWRlbnRpZmllcik7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNJbml0aWFsaXplZChub3JtYWxpemVkSWRlbnRpZmllcikpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoYCR7dGhpcy5uYW1lfSgke25vcm1hbGl6ZWRJZGVudGlmaWVyfSkgaGFzIGFscmVhZHkgYmVlbiBpbml0aWFsaXplZGApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXRoaXMuaXNDb21wb25lbnRTZXQoKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihgQ29tcG9uZW50ICR7dGhpcy5uYW1lfSBoYXMgbm90IGJlZW4gcmVnaXN0ZXJlZCB5ZXRgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgaW5zdGFuY2UgPSB0aGlzLmdldE9ySW5pdGlhbGl6ZVNlcnZpY2Uoe1xyXG4gICAgICAgICAgICBpbnN0YW5jZUlkZW50aWZpZXI6IG5vcm1hbGl6ZWRJZGVudGlmaWVyLFxyXG4gICAgICAgICAgICBvcHRpb25zXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gcmVzb2x2ZSBhbnkgcGVuZGluZyBwcm9taXNlIHdhaXRpbmcgZm9yIHRoZSBzZXJ2aWNlIGluc3RhbmNlXHJcbiAgICAgICAgZm9yIChjb25zdCBbaW5zdGFuY2VJZGVudGlmaWVyLCBpbnN0YW5jZURlZmVycmVkXSBvZiB0aGlzLmluc3RhbmNlc0RlZmVycmVkLmVudHJpZXMoKSkge1xyXG4gICAgICAgICAgICBjb25zdCBub3JtYWxpemVkRGVmZXJyZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIoaW5zdGFuY2VJZGVudGlmaWVyKTtcclxuICAgICAgICAgICAgaWYgKG5vcm1hbGl6ZWRJZGVudGlmaWVyID09PSBub3JtYWxpemVkRGVmZXJyZWRJZGVudGlmaWVyKSB7XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZURlZmVycmVkLnJlc29sdmUoaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpbnN0YW5jZTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBjYWxsYmFjayAtIGEgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGludm9rZWQgIGFmdGVyIHRoZSBwcm92aWRlciBoYXMgYmVlbiBpbml0aWFsaXplZCBieSBjYWxsaW5nIHByb3ZpZGVyLmluaXRpYWxpemUoKS5cclxuICAgICAqIFRoZSBmdW5jdGlvbiBpcyBpbnZva2VkIFNZTkNIUk9OT1VTTFksIHNvIGl0IHNob3VsZCBub3QgZXhlY3V0ZSBhbnkgbG9uZ3J1bm5pbmcgdGFza3MgaW4gb3JkZXIgdG8gbm90IGJsb2NrIHRoZSBwcm9ncmFtLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpZGVudGlmaWVyIEFuIG9wdGlvbmFsIGluc3RhbmNlIGlkZW50aWZpZXJcclxuICAgICAqIEByZXR1cm5zIGEgZnVuY3Rpb24gdG8gdW5yZWdpc3RlciB0aGUgY2FsbGJhY2tcclxuICAgICAqL1xyXG4gICAgb25Jbml0KGNhbGxiYWNrLCBpZGVudGlmaWVyKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIoaWRlbnRpZmllcik7XHJcbiAgICAgICAgY29uc3QgZXhpc3RpbmdDYWxsYmFja3MgPSAoX2EgPSB0aGlzLm9uSW5pdENhbGxiYWNrcy5nZXQobm9ybWFsaXplZElkZW50aWZpZXIpKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBuZXcgU2V0KCk7XHJcbiAgICAgICAgZXhpc3RpbmdDYWxsYmFja3MuYWRkKGNhbGxiYWNrKTtcclxuICAgICAgICB0aGlzLm9uSW5pdENhbGxiYWNrcy5zZXQobm9ybWFsaXplZElkZW50aWZpZXIsIGV4aXN0aW5nQ2FsbGJhY2tzKTtcclxuICAgICAgICBjb25zdCBleGlzdGluZ0luc3RhbmNlID0gdGhpcy5pbnN0YW5jZXMuZ2V0KG5vcm1hbGl6ZWRJZGVudGlmaWVyKTtcclxuICAgICAgICBpZiAoZXhpc3RpbmdJbnN0YW5jZSkge1xyXG4gICAgICAgICAgICBjYWxsYmFjayhleGlzdGluZ0luc3RhbmNlLCBub3JtYWxpemVkSWRlbnRpZmllcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgICAgICAgIGV4aXN0aW5nQ2FsbGJhY2tzLmRlbGV0ZShjYWxsYmFjayk7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogSW52b2tlIG9uSW5pdCBjYWxsYmFja3Mgc3luY2hyb25vdXNseVxyXG4gICAgICogQHBhcmFtIGluc3RhbmNlIHRoZSBzZXJ2aWNlIGluc3RhbmNlYFxyXG4gICAgICovXHJcbiAgICBpbnZva2VPbkluaXRDYWxsYmFja3MoaW5zdGFuY2UsIGlkZW50aWZpZXIpIHtcclxuICAgICAgICBjb25zdCBjYWxsYmFja3MgPSB0aGlzLm9uSW5pdENhbGxiYWNrcy5nZXQoaWRlbnRpZmllcik7XHJcbiAgICAgICAgaWYgKCFjYWxsYmFja3MpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGNvbnN0IGNhbGxiYWNrIG9mIGNhbGxiYWNrcykge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soaW5zdGFuY2UsIGlkZW50aWZpZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChfYSkge1xyXG4gICAgICAgICAgICAgICAgLy8gaWdub3JlIGVycm9ycyBpbiB0aGUgb25Jbml0IGNhbGxiYWNrXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXRPckluaXRpYWxpemVTZXJ2aWNlKHsgaW5zdGFuY2VJZGVudGlmaWVyLCBvcHRpb25zID0ge30gfSkge1xyXG4gICAgICAgIGxldCBpbnN0YW5jZSA9IHRoaXMuaW5zdGFuY2VzLmdldChpbnN0YW5jZUlkZW50aWZpZXIpO1xyXG4gICAgICAgIGlmICghaW5zdGFuY2UgJiYgdGhpcy5jb21wb25lbnQpIHtcclxuICAgICAgICAgICAgaW5zdGFuY2UgPSB0aGlzLmNvbXBvbmVudC5pbnN0YW5jZUZhY3RvcnkodGhpcy5jb250YWluZXIsIHtcclxuICAgICAgICAgICAgICAgIGluc3RhbmNlSWRlbnRpZmllcjogbm9ybWFsaXplSWRlbnRpZmllckZvckZhY3RvcnkoaW5zdGFuY2VJZGVudGlmaWVyKSxcclxuICAgICAgICAgICAgICAgIG9wdGlvbnNcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VzLnNldChpbnN0YW5jZUlkZW50aWZpZXIsIGluc3RhbmNlKTtcclxuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZXNPcHRpb25zLnNldChpbnN0YW5jZUlkZW50aWZpZXIsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogSW52b2tlIG9uSW5pdCBsaXN0ZW5lcnMuXHJcbiAgICAgICAgICAgICAqIE5vdGUgdGhpcy5jb21wb25lbnQub25JbnN0YW5jZUNyZWF0ZWQgaXMgZGlmZmVyZW50LCB3aGljaCBpcyB1c2VkIGJ5IHRoZSBjb21wb25lbnQgY3JlYXRvcixcclxuICAgICAgICAgICAgICogd2hpbGUgb25Jbml0IGxpc3RlbmVycyBhcmUgcmVnaXN0ZXJlZCBieSBjb25zdW1lcnMgb2YgdGhlIHByb3ZpZGVyLlxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgdGhpcy5pbnZva2VPbkluaXRDYWxsYmFja3MoaW5zdGFuY2UsIGluc3RhbmNlSWRlbnRpZmllcik7XHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBPcmRlciBpcyBpbXBvcnRhbnRcclxuICAgICAgICAgICAgICogb25JbnN0YW5jZUNyZWF0ZWQoKSBzaG91bGQgYmUgY2FsbGVkIGFmdGVyIHRoaXMuaW5zdGFuY2VzLnNldChpbnN0YW5jZUlkZW50aWZpZXIsIGluc3RhbmNlKTsgd2hpY2hcclxuICAgICAgICAgICAgICogbWFrZXMgYGlzSW5pdGlhbGl6ZWQoKWAgcmV0dXJuIHRydWUuXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jb21wb25lbnQub25JbnN0YW5jZUNyZWF0ZWQpIHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wb25lbnQub25JbnN0YW5jZUNyZWF0ZWQodGhpcy5jb250YWluZXIsIGluc3RhbmNlSWRlbnRpZmllciwgaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKF9hKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaWdub3JlIGVycm9ycyBpbiB0aGUgb25JbnN0YW5jZUNyZWF0ZWRDYWxsYmFja1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpbnN0YW5jZSB8fCBudWxsO1xyXG4gICAgfVxyXG4gICAgbm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKGlkZW50aWZpZXIgPSBERUZBVUxUX0VOVFJZX05BTUUpIHtcclxuICAgICAgICBpZiAodGhpcy5jb21wb25lbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29tcG9uZW50Lm11bHRpcGxlSW5zdGFuY2VzID8gaWRlbnRpZmllciA6IERFRkFVTFRfRU5UUllfTkFNRTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBpZGVudGlmaWVyOyAvLyBhc3N1bWUgbXVsdGlwbGUgaW5zdGFuY2VzIGFyZSBzdXBwb3J0ZWQgYmVmb3JlIHRoZSBjb21wb25lbnQgaXMgcHJvdmlkZWQuXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgc2hvdWxkQXV0b0luaXRpYWxpemUoKSB7XHJcbiAgICAgICAgcmV0dXJuICghIXRoaXMuY29tcG9uZW50ICYmXHJcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50Lmluc3RhbnRpYXRpb25Nb2RlICE9PSBcIkVYUExJQ0lUXCIgLyogSW5zdGFudGlhdGlvbk1vZGUuRVhQTElDSVQgKi8pO1xyXG4gICAgfVxyXG59XHJcbi8vIHVuZGVmaW5lZCBzaG91bGQgYmUgcGFzc2VkIHRvIHRoZSBzZXJ2aWNlIGZhY3RvcnkgZm9yIHRoZSBkZWZhdWx0IGluc3RhbmNlXHJcbmZ1bmN0aW9uIG5vcm1hbGl6ZUlkZW50aWZpZXJGb3JGYWN0b3J5KGlkZW50aWZpZXIpIHtcclxuICAgIHJldHVybiBpZGVudGlmaWVyID09PSBERUZBVUxUX0VOVFJZX05BTUUgPyB1bmRlZmluZWQgOiBpZGVudGlmaWVyO1xyXG59XHJcbmZ1bmN0aW9uIGlzQ29tcG9uZW50RWFnZXIoY29tcG9uZW50KSB7XHJcbiAgICByZXR1cm4gY29tcG9uZW50Lmluc3RhbnRpYXRpb25Nb2RlID09PSBcIkVBR0VSXCIgLyogSW5zdGFudGlhdGlvbk1vZGUuRUFHRVIgKi87XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIENvbXBvbmVudENvbnRhaW5lciB0aGF0IHByb3ZpZGVzIFByb3ZpZGVycyBmb3Igc2VydmljZSBuYW1lIFQsIGUuZy4gYGF1dGhgLCBgYXV0aC1pbnRlcm5hbGBcclxuICovXHJcbmNsYXNzIENvbXBvbmVudENvbnRhaW5lciB7XHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgICB0aGlzLnByb3ZpZGVycyA9IG5ldyBNYXAoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBjb21wb25lbnQgQ29tcG9uZW50IGJlaW5nIGFkZGVkXHJcbiAgICAgKiBAcGFyYW0gb3ZlcndyaXRlIFdoZW4gYSBjb21wb25lbnQgd2l0aCB0aGUgc2FtZSBuYW1lIGhhcyBhbHJlYWR5IGJlZW4gcmVnaXN0ZXJlZCxcclxuICAgICAqIGlmIG92ZXJ3cml0ZSBpcyB0cnVlOiBvdmVyd3JpdGUgdGhlIGV4aXN0aW5nIGNvbXBvbmVudCB3aXRoIHRoZSBuZXcgY29tcG9uZW50IGFuZCBjcmVhdGUgYSBuZXdcclxuICAgICAqIHByb3ZpZGVyIHdpdGggdGhlIG5ldyBjb21wb25lbnQuIEl0IGNhbiBiZSB1c2VmdWwgaW4gdGVzdHMgd2hlcmUgeW91IHdhbnQgdG8gdXNlIGRpZmZlcmVudCBtb2Nrc1xyXG4gICAgICogZm9yIGRpZmZlcmVudCB0ZXN0cy5cclxuICAgICAqIGlmIG92ZXJ3cml0ZSBpcyBmYWxzZTogdGhyb3cgYW4gZXhjZXB0aW9uXHJcbiAgICAgKi9cclxuICAgIGFkZENvbXBvbmVudChjb21wb25lbnQpIHtcclxuICAgICAgICBjb25zdCBwcm92aWRlciA9IHRoaXMuZ2V0UHJvdmlkZXIoY29tcG9uZW50Lm5hbWUpO1xyXG4gICAgICAgIGlmIChwcm92aWRlci5pc0NvbXBvbmVudFNldCgpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ29tcG9uZW50ICR7Y29tcG9uZW50Lm5hbWV9IGhhcyBhbHJlYWR5IGJlZW4gcmVnaXN0ZXJlZCB3aXRoICR7dGhpcy5uYW1lfWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwcm92aWRlci5zZXRDb21wb25lbnQoY29tcG9uZW50KTtcclxuICAgIH1cclxuICAgIGFkZE9yT3ZlcndyaXRlQ29tcG9uZW50KGNvbXBvbmVudCkge1xyXG4gICAgICAgIGNvbnN0IHByb3ZpZGVyID0gdGhpcy5nZXRQcm92aWRlcihjb21wb25lbnQubmFtZSk7XHJcbiAgICAgICAgaWYgKHByb3ZpZGVyLmlzQ29tcG9uZW50U2V0KCkpIHtcclxuICAgICAgICAgICAgLy8gZGVsZXRlIHRoZSBleGlzdGluZyBwcm92aWRlciBmcm9tIHRoZSBjb250YWluZXIsIHNvIHdlIGNhbiByZWdpc3RlciB0aGUgbmV3IGNvbXBvbmVudFxyXG4gICAgICAgICAgICB0aGlzLnByb3ZpZGVycy5kZWxldGUoY29tcG9uZW50Lm5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmFkZENvbXBvbmVudChjb21wb25lbnQpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBnZXRQcm92aWRlciBwcm92aWRlcyBhIHR5cGUgc2FmZSBpbnRlcmZhY2Ugd2hlcmUgaXQgY2FuIG9ubHkgYmUgY2FsbGVkIHdpdGggYSBmaWVsZCBuYW1lXHJcbiAgICAgKiBwcmVzZW50IGluIE5hbWVTZXJ2aWNlTWFwcGluZyBpbnRlcmZhY2UuXHJcbiAgICAgKlxyXG4gICAgICogRmlyZWJhc2UgU0RLcyBwcm92aWRpbmcgc2VydmljZXMgc2hvdWxkIGV4dGVuZCBOYW1lU2VydmljZU1hcHBpbmcgaW50ZXJmYWNlIHRvIHJlZ2lzdGVyXHJcbiAgICAgKiB0aGVtc2VsdmVzLlxyXG4gICAgICovXHJcbiAgICBnZXRQcm92aWRlcihuYW1lKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucHJvdmlkZXJzLmhhcyhuYW1lKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm92aWRlcnMuZ2V0KG5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBjcmVhdGUgYSBQcm92aWRlciBmb3IgYSBzZXJ2aWNlIHRoYXQgaGFzbid0IHJlZ2lzdGVyZWQgd2l0aCBGaXJlYmFzZVxyXG4gICAgICAgIGNvbnN0IHByb3ZpZGVyID0gbmV3IFByb3ZpZGVyKG5hbWUsIHRoaXMpO1xyXG4gICAgICAgIHRoaXMucHJvdmlkZXJzLnNldChuYW1lLCBwcm92aWRlcik7XHJcbiAgICAgICAgcmV0dXJuIHByb3ZpZGVyO1xyXG4gICAgfVxyXG4gICAgZ2V0UHJvdmlkZXJzKCkge1xyXG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMucHJvdmlkZXJzLnZhbHVlcygpKTtcclxuICAgIH1cclxufVxuXG5leHBvcnQgeyBDb21wb25lbnQsIENvbXBvbmVudENvbnRhaW5lciwgUHJvdmlkZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbTIwMTcuanMubWFwXG4iLCIvKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQSBjb250YWluZXIgZm9yIGFsbCBvZiB0aGUgTG9nZ2VyIGluc3RhbmNlc1xyXG4gKi9cclxuY29uc3QgaW5zdGFuY2VzID0gW107XHJcbi8qKlxyXG4gKiBUaGUgSlMgU0RLIHN1cHBvcnRzIDUgbG9nIGxldmVscyBhbmQgYWxzbyBhbGxvd3MgYSB1c2VyIHRoZSBhYmlsaXR5IHRvXHJcbiAqIHNpbGVuY2UgdGhlIGxvZ3MgYWx0b2dldGhlci5cclxuICpcclxuICogVGhlIG9yZGVyIGlzIGEgZm9sbG93czpcclxuICogREVCVUcgPCBWRVJCT1NFIDwgSU5GTyA8IFdBUk4gPCBFUlJPUlxyXG4gKlxyXG4gKiBBbGwgb2YgdGhlIGxvZyB0eXBlcyBhYm92ZSB0aGUgY3VycmVudCBsb2cgbGV2ZWwgd2lsbCBiZSBjYXB0dXJlZCAoaS5lLiBpZlxyXG4gKiB5b3Ugc2V0IHRoZSBsb2cgbGV2ZWwgdG8gYElORk9gLCBlcnJvcnMgd2lsbCBzdGlsbCBiZSBsb2dnZWQsIGJ1dCBgREVCVUdgIGFuZFxyXG4gKiBgVkVSQk9TRWAgbG9ncyB3aWxsIG5vdClcclxuICovXHJcbnZhciBMb2dMZXZlbDtcclxuKGZ1bmN0aW9uIChMb2dMZXZlbCkge1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJERUJVR1wiXSA9IDBdID0gXCJERUJVR1wiO1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJWRVJCT1NFXCJdID0gMV0gPSBcIlZFUkJPU0VcIjtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiSU5GT1wiXSA9IDJdID0gXCJJTkZPXCI7XHJcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIldBUk5cIl0gPSAzXSA9IFwiV0FSTlwiO1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJFUlJPUlwiXSA9IDRdID0gXCJFUlJPUlwiO1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJTSUxFTlRcIl0gPSA1XSA9IFwiU0lMRU5UXCI7XHJcbn0pKExvZ0xldmVsIHx8IChMb2dMZXZlbCA9IHt9KSk7XHJcbmNvbnN0IGxldmVsU3RyaW5nVG9FbnVtID0ge1xyXG4gICAgJ2RlYnVnJzogTG9nTGV2ZWwuREVCVUcsXHJcbiAgICAndmVyYm9zZSc6IExvZ0xldmVsLlZFUkJPU0UsXHJcbiAgICAnaW5mbyc6IExvZ0xldmVsLklORk8sXHJcbiAgICAnd2Fybic6IExvZ0xldmVsLldBUk4sXHJcbiAgICAnZXJyb3InOiBMb2dMZXZlbC5FUlJPUixcclxuICAgICdzaWxlbnQnOiBMb2dMZXZlbC5TSUxFTlRcclxufTtcclxuLyoqXHJcbiAqIFRoZSBkZWZhdWx0IGxvZyBsZXZlbFxyXG4gKi9cclxuY29uc3QgZGVmYXVsdExvZ0xldmVsID0gTG9nTGV2ZWwuSU5GTztcclxuLyoqXHJcbiAqIEJ5IGRlZmF1bHQsIGBjb25zb2xlLmRlYnVnYCBpcyBub3QgZGlzcGxheWVkIGluIHRoZSBkZXZlbG9wZXIgY29uc29sZSAoaW5cclxuICogY2hyb21lKS4gVG8gYXZvaWQgZm9yY2luZyB1c2VycyB0byBoYXZlIHRvIG9wdC1pbiB0byB0aGVzZSBsb2dzIHR3aWNlXHJcbiAqIChpLmUuIG9uY2UgZm9yIGZpcmViYXNlLCBhbmQgb25jZSBpbiB0aGUgY29uc29sZSksIHdlIGFyZSBzZW5kaW5nIGBERUJVR2BcclxuICogbG9ncyB0byB0aGUgYGNvbnNvbGUubG9nYCBmdW5jdGlvbi5cclxuICovXHJcbmNvbnN0IENvbnNvbGVNZXRob2QgPSB7XHJcbiAgICBbTG9nTGV2ZWwuREVCVUddOiAnbG9nJyxcclxuICAgIFtMb2dMZXZlbC5WRVJCT1NFXTogJ2xvZycsXHJcbiAgICBbTG9nTGV2ZWwuSU5GT106ICdpbmZvJyxcclxuICAgIFtMb2dMZXZlbC5XQVJOXTogJ3dhcm4nLFxyXG4gICAgW0xvZ0xldmVsLkVSUk9SXTogJ2Vycm9yJ1xyXG59O1xyXG4vKipcclxuICogVGhlIGRlZmF1bHQgbG9nIGhhbmRsZXIgd2lsbCBmb3J3YXJkIERFQlVHLCBWRVJCT1NFLCBJTkZPLCBXQVJOLCBhbmQgRVJST1JcclxuICogbWVzc2FnZXMgb24gdG8gdGhlaXIgY29ycmVzcG9uZGluZyBjb25zb2xlIGNvdW50ZXJwYXJ0cyAoaWYgdGhlIGxvZyBtZXRob2RcclxuICogaXMgc3VwcG9ydGVkIGJ5IHRoZSBjdXJyZW50IGxvZyBsZXZlbClcclxuICovXHJcbmNvbnN0IGRlZmF1bHRMb2dIYW5kbGVyID0gKGluc3RhbmNlLCBsb2dUeXBlLCAuLi5hcmdzKSA9PiB7XHJcbiAgICBpZiAobG9nVHlwZSA8IGluc3RhbmNlLmxvZ0xldmVsKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xyXG4gICAgY29uc3QgbWV0aG9kID0gQ29uc29sZU1ldGhvZFtsb2dUeXBlXTtcclxuICAgIGlmIChtZXRob2QpIHtcclxuICAgICAgICBjb25zb2xlW21ldGhvZF0oYFske25vd31dICAke2luc3RhbmNlLm5hbWV9OmAsIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBBdHRlbXB0ZWQgdG8gbG9nIGEgbWVzc2FnZSB3aXRoIGFuIGludmFsaWQgbG9nVHlwZSAodmFsdWU6ICR7bG9nVHlwZX0pYCk7XHJcbiAgICB9XHJcbn07XHJcbmNsYXNzIExvZ2dlciB7XHJcbiAgICAvKipcclxuICAgICAqIEdpdmVzIHlvdSBhbiBpbnN0YW5jZSBvZiBhIExvZ2dlciB0byBjYXB0dXJlIG1lc3NhZ2VzIGFjY29yZGluZyB0b1xyXG4gICAgICogRmlyZWJhc2UncyBsb2dnaW5nIHNjaGVtZS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gbmFtZSBUaGUgbmFtZSB0aGF0IHRoZSBsb2dzIHdpbGwgYmUgYXNzb2NpYXRlZCB3aXRoXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKG5hbWUpIHtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBsb2cgbGV2ZWwgb2YgdGhlIGdpdmVuIExvZ2dlciBpbnN0YW5jZS5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLl9sb2dMZXZlbCA9IGRlZmF1bHRMb2dMZXZlbDtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgbWFpbiAoaW50ZXJuYWwpIGxvZyBoYW5kbGVyIGZvciB0aGUgTG9nZ2VyIGluc3RhbmNlLlxyXG4gICAgICAgICAqIENhbiBiZSBzZXQgdG8gYSBuZXcgZnVuY3Rpb24gaW4gaW50ZXJuYWwgcGFja2FnZSBjb2RlIGJ1dCBub3QgYnkgdXNlci5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyID0gZGVmYXVsdExvZ0hhbmRsZXI7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIG9wdGlvbmFsLCBhZGRpdGlvbmFsLCB1c2VyLWRlZmluZWQgbG9nIGhhbmRsZXIgZm9yIHRoZSBMb2dnZXIgaW5zdGFuY2UuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgPSBudWxsO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENhcHR1cmUgdGhlIGN1cnJlbnQgaW5zdGFuY2UgZm9yIGxhdGVyIHVzZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGluc3RhbmNlcy5wdXNoKHRoaXMpO1xyXG4gICAgfVxyXG4gICAgZ2V0IGxvZ0xldmVsKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9sb2dMZXZlbDtcclxuICAgIH1cclxuICAgIHNldCBsb2dMZXZlbCh2YWwpIHtcclxuICAgICAgICBpZiAoISh2YWwgaW4gTG9nTGV2ZWwpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYEludmFsaWQgdmFsdWUgXCIke3ZhbH1cIiBhc3NpZ25lZCB0byBcXGBsb2dMZXZlbFxcYGApO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9sb2dMZXZlbCA9IHZhbDtcclxuICAgIH1cclxuICAgIC8vIFdvcmthcm91bmQgZm9yIHNldHRlci9nZXR0ZXIgaGF2aW5nIHRvIGJlIHRoZSBzYW1lIHR5cGUuXHJcbiAgICBzZXRMb2dMZXZlbCh2YWwpIHtcclxuICAgICAgICB0aGlzLl9sb2dMZXZlbCA9IHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnID8gbGV2ZWxTdHJpbmdUb0VudW1bdmFsXSA6IHZhbDtcclxuICAgIH1cclxuICAgIGdldCBsb2dIYW5kbGVyKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9sb2dIYW5kbGVyO1xyXG4gICAgfVxyXG4gICAgc2V0IGxvZ0hhbmRsZXIodmFsKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiB2YWwgIT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVmFsdWUgYXNzaWduZWQgdG8gYGxvZ0hhbmRsZXJgIG11c3QgYmUgYSBmdW5jdGlvbicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyID0gdmFsO1xyXG4gICAgfVxyXG4gICAgZ2V0IHVzZXJMb2dIYW5kbGVyKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl91c2VyTG9nSGFuZGxlcjtcclxuICAgIH1cclxuICAgIHNldCB1c2VyTG9nSGFuZGxlcih2YWwpIHtcclxuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciA9IHZhbDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVGhlIGZ1bmN0aW9ucyBiZWxvdyBhcmUgYWxsIGJhc2VkIG9uIHRoZSBgY29uc29sZWAgaW50ZXJmYWNlXHJcbiAgICAgKi9cclxuICAgIGRlYnVnKC4uLmFyZ3MpIHtcclxuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciAmJiB0aGlzLl91c2VyTG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5ERUJVRywgLi4uYXJncyk7XHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5ERUJVRywgLi4uYXJncyk7XHJcbiAgICB9XHJcbiAgICBsb2coLi4uYXJncykge1xyXG4gICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyICYmXHJcbiAgICAgICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLlZFUkJPU0UsIC4uLmFyZ3MpO1xyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuVkVSQk9TRSwgLi4uYXJncyk7XHJcbiAgICB9XHJcbiAgICBpbmZvKC4uLmFyZ3MpIHtcclxuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciAmJiB0aGlzLl91c2VyTG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5JTkZPLCAuLi5hcmdzKTtcclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLklORk8sIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG4gICAgd2FybiguLi5hcmdzKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgJiYgdGhpcy5fdXNlckxvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuV0FSTiwgLi4uYXJncyk7XHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5XQVJOLCAuLi5hcmdzKTtcclxuICAgIH1cclxuICAgIGVycm9yKC4uLmFyZ3MpIHtcclxuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciAmJiB0aGlzLl91c2VyTG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5FUlJPUiwgLi4uYXJncyk7XHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5FUlJPUiwgLi4uYXJncyk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gc2V0TG9nTGV2ZWwobGV2ZWwpIHtcclxuICAgIGluc3RhbmNlcy5mb3JFYWNoKGluc3QgPT4ge1xyXG4gICAgICAgIGluc3Quc2V0TG9nTGV2ZWwobGV2ZWwpO1xyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gc2V0VXNlckxvZ0hhbmRsZXIobG9nQ2FsbGJhY2ssIG9wdGlvbnMpIHtcclxuICAgIGZvciAoY29uc3QgaW5zdGFuY2Ugb2YgaW5zdGFuY2VzKSB7XHJcbiAgICAgICAgbGV0IGN1c3RvbUxvZ0xldmVsID0gbnVsbDtcclxuICAgICAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmxldmVsKSB7XHJcbiAgICAgICAgICAgIGN1c3RvbUxvZ0xldmVsID0gbGV2ZWxTdHJpbmdUb0VudW1bb3B0aW9ucy5sZXZlbF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChsb2dDYWxsYmFjayA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICBpbnN0YW5jZS51c2VyTG9nSGFuZGxlciA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBpbnN0YW5jZS51c2VyTG9nSGFuZGxlciA9IChpbnN0YW5jZSwgbGV2ZWwsIC4uLmFyZ3MpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhcmdzXHJcbiAgICAgICAgICAgICAgICAgICAgLm1hcChhcmcgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhcmcgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGFyZyA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFyZztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGFyZyA9PT0gJ251bWJlcicgfHwgdHlwZW9mIGFyZyA9PT0gJ2Jvb2xlYW4nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhcmcudG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoYXJnIGluc3RhbmNlb2YgRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFyZy5tZXNzYWdlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShhcmcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChpZ25vcmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihhcmcgPT4gYXJnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5qb2luKCcgJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAobGV2ZWwgPj0gKGN1c3RvbUxvZ0xldmVsICE9PSBudWxsICYmIGN1c3RvbUxvZ0xldmVsICE9PSB2b2lkIDAgPyBjdXN0b21Mb2dMZXZlbCA6IGluc3RhbmNlLmxvZ0xldmVsKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxvZ0NhbGxiYWNrKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV2ZWw6IExvZ0xldmVsW2xldmVsXS50b0xvd2VyQ2FzZSgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmdzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBpbnN0YW5jZS5uYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XG5cbmV4cG9ydCB7IExvZ0xldmVsLCBMb2dnZXIsIHNldExvZ0xldmVsLCBzZXRVc2VyTG9nSGFuZGxlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtMjAxNy5qcy5tYXBcbiIsImNvbnN0IGluc3RhbmNlT2ZBbnkgPSAob2JqZWN0LCBjb25zdHJ1Y3RvcnMpID0+IGNvbnN0cnVjdG9ycy5zb21lKChjKSA9PiBvYmplY3QgaW5zdGFuY2VvZiBjKTtcblxubGV0IGlkYlByb3h5YWJsZVR5cGVzO1xubGV0IGN1cnNvckFkdmFuY2VNZXRob2RzO1xuLy8gVGhpcyBpcyBhIGZ1bmN0aW9uIHRvIHByZXZlbnQgaXQgdGhyb3dpbmcgdXAgaW4gbm9kZSBlbnZpcm9ubWVudHMuXG5mdW5jdGlvbiBnZXRJZGJQcm94eWFibGVUeXBlcygpIHtcbiAgICByZXR1cm4gKGlkYlByb3h5YWJsZVR5cGVzIHx8XG4gICAgICAgIChpZGJQcm94eWFibGVUeXBlcyA9IFtcbiAgICAgICAgICAgIElEQkRhdGFiYXNlLFxuICAgICAgICAgICAgSURCT2JqZWN0U3RvcmUsXG4gICAgICAgICAgICBJREJJbmRleCxcbiAgICAgICAgICAgIElEQkN1cnNvcixcbiAgICAgICAgICAgIElEQlRyYW5zYWN0aW9uLFxuICAgICAgICBdKSk7XG59XG4vLyBUaGlzIGlzIGEgZnVuY3Rpb24gdG8gcHJldmVudCBpdCB0aHJvd2luZyB1cCBpbiBub2RlIGVudmlyb25tZW50cy5cbmZ1bmN0aW9uIGdldEN1cnNvckFkdmFuY2VNZXRob2RzKCkge1xuICAgIHJldHVybiAoY3Vyc29yQWR2YW5jZU1ldGhvZHMgfHxcbiAgICAgICAgKGN1cnNvckFkdmFuY2VNZXRob2RzID0gW1xuICAgICAgICAgICAgSURCQ3Vyc29yLnByb3RvdHlwZS5hZHZhbmNlLFxuICAgICAgICAgICAgSURCQ3Vyc29yLnByb3RvdHlwZS5jb250aW51ZSxcbiAgICAgICAgICAgIElEQkN1cnNvci5wcm90b3R5cGUuY29udGludWVQcmltYXJ5S2V5LFxuICAgICAgICBdKSk7XG59XG5jb25zdCBjdXJzb3JSZXF1ZXN0TWFwID0gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IHRyYW5zYWN0aW9uRG9uZU1hcCA9IG5ldyBXZWFrTWFwKCk7XG5jb25zdCB0cmFuc2FjdGlvblN0b3JlTmFtZXNNYXAgPSBuZXcgV2Vha01hcCgpO1xuY29uc3QgdHJhbnNmb3JtQ2FjaGUgPSBuZXcgV2Vha01hcCgpO1xuY29uc3QgcmV2ZXJzZVRyYW5zZm9ybUNhY2hlID0gbmV3IFdlYWtNYXAoKTtcbmZ1bmN0aW9uIHByb21pc2lmeVJlcXVlc3QocmVxdWVzdCkge1xuICAgIGNvbnN0IHByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGNvbnN0IHVubGlzdGVuID0gKCkgPT4ge1xuICAgICAgICAgICAgcmVxdWVzdC5yZW1vdmVFdmVudExpc3RlbmVyKCdzdWNjZXNzJywgc3VjY2Vzcyk7XG4gICAgICAgICAgICByZXF1ZXN0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZXJyb3IpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBzdWNjZXNzID0gKCkgPT4ge1xuICAgICAgICAgICAgcmVzb2x2ZSh3cmFwKHJlcXVlc3QucmVzdWx0KSk7XG4gICAgICAgICAgICB1bmxpc3RlbigpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBlcnJvciA9ICgpID0+IHtcbiAgICAgICAgICAgIHJlamVjdChyZXF1ZXN0LmVycm9yKTtcbiAgICAgICAgICAgIHVubGlzdGVuKCk7XG4gICAgICAgIH07XG4gICAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcignc3VjY2VzcycsIHN1Y2Nlc3MpO1xuICAgICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZXJyb3IpO1xuICAgIH0pO1xuICAgIHByb21pc2VcbiAgICAgICAgLnRoZW4oKHZhbHVlKSA9PiB7XG4gICAgICAgIC8vIFNpbmNlIGN1cnNvcmluZyByZXVzZXMgdGhlIElEQlJlcXVlc3QgKCpzaWdoKiksIHdlIGNhY2hlIGl0IGZvciBsYXRlciByZXRyaWV2YWxcbiAgICAgICAgLy8gKHNlZSB3cmFwRnVuY3Rpb24pLlxuICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBJREJDdXJzb3IpIHtcbiAgICAgICAgICAgIGN1cnNvclJlcXVlc3RNYXAuc2V0KHZhbHVlLCByZXF1ZXN0KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBDYXRjaGluZyB0byBhdm9pZCBcIlVuY2F1Z2h0IFByb21pc2UgZXhjZXB0aW9uc1wiXG4gICAgfSlcbiAgICAgICAgLmNhdGNoKCgpID0+IHsgfSk7XG4gICAgLy8gVGhpcyBtYXBwaW5nIGV4aXN0cyBpbiByZXZlcnNlVHJhbnNmb3JtQ2FjaGUgYnV0IGRvZXNuJ3QgZG9lc24ndCBleGlzdCBpbiB0cmFuc2Zvcm1DYWNoZS4gVGhpc1xuICAgIC8vIGlzIGJlY2F1c2Ugd2UgY3JlYXRlIG1hbnkgcHJvbWlzZXMgZnJvbSBhIHNpbmdsZSBJREJSZXF1ZXN0LlxuICAgIHJldmVyc2VUcmFuc2Zvcm1DYWNoZS5zZXQocHJvbWlzZSwgcmVxdWVzdCk7XG4gICAgcmV0dXJuIHByb21pc2U7XG59XG5mdW5jdGlvbiBjYWNoZURvbmVQcm9taXNlRm9yVHJhbnNhY3Rpb24odHgpIHtcbiAgICAvLyBFYXJseSBiYWlsIGlmIHdlJ3ZlIGFscmVhZHkgY3JlYXRlZCBhIGRvbmUgcHJvbWlzZSBmb3IgdGhpcyB0cmFuc2FjdGlvbi5cbiAgICBpZiAodHJhbnNhY3Rpb25Eb25lTWFwLmhhcyh0eCkpXG4gICAgICAgIHJldHVybjtcbiAgICBjb25zdCBkb25lID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBjb25zdCB1bmxpc3RlbiA9ICgpID0+IHtcbiAgICAgICAgICAgIHR4LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NvbXBsZXRlJywgY29tcGxldGUpO1xuICAgICAgICAgICAgdHgucmVtb3ZlRXZlbnRMaXN0ZW5lcignZXJyb3InLCBlcnJvcik7XG4gICAgICAgICAgICB0eC5yZW1vdmVFdmVudExpc3RlbmVyKCdhYm9ydCcsIGVycm9yKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgY29tcGxldGUgPSAoKSA9PiB7XG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICB1bmxpc3RlbigpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBlcnJvciA9ICgpID0+IHtcbiAgICAgICAgICAgIHJlamVjdCh0eC5lcnJvciB8fCBuZXcgRE9NRXhjZXB0aW9uKCdBYm9ydEVycm9yJywgJ0Fib3J0RXJyb3InKSk7XG4gICAgICAgICAgICB1bmxpc3RlbigpO1xuICAgICAgICB9O1xuICAgICAgICB0eC5hZGRFdmVudExpc3RlbmVyKCdjb21wbGV0ZScsIGNvbXBsZXRlKTtcbiAgICAgICAgdHguYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBlcnJvcik7XG4gICAgICAgIHR4LmFkZEV2ZW50TGlzdGVuZXIoJ2Fib3J0JywgZXJyb3IpO1xuICAgIH0pO1xuICAgIC8vIENhY2hlIGl0IGZvciBsYXRlciByZXRyaWV2YWwuXG4gICAgdHJhbnNhY3Rpb25Eb25lTWFwLnNldCh0eCwgZG9uZSk7XG59XG5sZXQgaWRiUHJveHlUcmFwcyA9IHtcbiAgICBnZXQodGFyZ2V0LCBwcm9wLCByZWNlaXZlcikge1xuICAgICAgICBpZiAodGFyZ2V0IGluc3RhbmNlb2YgSURCVHJhbnNhY3Rpb24pIHtcbiAgICAgICAgICAgIC8vIFNwZWNpYWwgaGFuZGxpbmcgZm9yIHRyYW5zYWN0aW9uLmRvbmUuXG4gICAgICAgICAgICBpZiAocHJvcCA9PT0gJ2RvbmUnKVxuICAgICAgICAgICAgICAgIHJldHVybiB0cmFuc2FjdGlvbkRvbmVNYXAuZ2V0KHRhcmdldCk7XG4gICAgICAgICAgICAvLyBQb2x5ZmlsbCBmb3Igb2JqZWN0U3RvcmVOYW1lcyBiZWNhdXNlIG9mIEVkZ2UuXG4gICAgICAgICAgICBpZiAocHJvcCA9PT0gJ29iamVjdFN0b3JlTmFtZXMnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldC5vYmplY3RTdG9yZU5hbWVzIHx8IHRyYW5zYWN0aW9uU3RvcmVOYW1lc01hcC5nZXQodGFyZ2V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIE1ha2UgdHguc3RvcmUgcmV0dXJuIHRoZSBvbmx5IHN0b3JlIGluIHRoZSB0cmFuc2FjdGlvbiwgb3IgdW5kZWZpbmVkIGlmIHRoZXJlIGFyZSBtYW55LlxuICAgICAgICAgICAgaWYgKHByb3AgPT09ICdzdG9yZScpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVjZWl2ZXIub2JqZWN0U3RvcmVOYW1lc1sxXVxuICAgICAgICAgICAgICAgICAgICA/IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICA6IHJlY2VpdmVyLm9iamVjdFN0b3JlKHJlY2VpdmVyLm9iamVjdFN0b3JlTmFtZXNbMF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIEVsc2UgdHJhbnNmb3JtIHdoYXRldmVyIHdlIGdldCBiYWNrLlxuICAgICAgICByZXR1cm4gd3JhcCh0YXJnZXRbcHJvcF0pO1xuICAgIH0sXG4gICAgc2V0KHRhcmdldCwgcHJvcCwgdmFsdWUpIHtcbiAgICAgICAgdGFyZ2V0W3Byb3BdID0gdmFsdWU7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0sXG4gICAgaGFzKHRhcmdldCwgcHJvcCkge1xuICAgICAgICBpZiAodGFyZ2V0IGluc3RhbmNlb2YgSURCVHJhbnNhY3Rpb24gJiZcbiAgICAgICAgICAgIChwcm9wID09PSAnZG9uZScgfHwgcHJvcCA9PT0gJ3N0b3JlJykpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwcm9wIGluIHRhcmdldDtcbiAgICB9LFxufTtcbmZ1bmN0aW9uIHJlcGxhY2VUcmFwcyhjYWxsYmFjaykge1xuICAgIGlkYlByb3h5VHJhcHMgPSBjYWxsYmFjayhpZGJQcm94eVRyYXBzKTtcbn1cbmZ1bmN0aW9uIHdyYXBGdW5jdGlvbihmdW5jKSB7XG4gICAgLy8gRHVlIHRvIGV4cGVjdGVkIG9iamVjdCBlcXVhbGl0eSAod2hpY2ggaXMgZW5mb3JjZWQgYnkgdGhlIGNhY2hpbmcgaW4gYHdyYXBgKSwgd2VcbiAgICAvLyBvbmx5IGNyZWF0ZSBvbmUgbmV3IGZ1bmMgcGVyIGZ1bmMuXG4gICAgLy8gRWRnZSBkb2Vzbid0IHN1cHBvcnQgb2JqZWN0U3RvcmVOYW1lcyAoYm9vbyksIHNvIHdlIHBvbHlmaWxsIGl0IGhlcmUuXG4gICAgaWYgKGZ1bmMgPT09IElEQkRhdGFiYXNlLnByb3RvdHlwZS50cmFuc2FjdGlvbiAmJlxuICAgICAgICAhKCdvYmplY3RTdG9yZU5hbWVzJyBpbiBJREJUcmFuc2FjdGlvbi5wcm90b3R5cGUpKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoc3RvcmVOYW1lcywgLi4uYXJncykge1xuICAgICAgICAgICAgY29uc3QgdHggPSBmdW5jLmNhbGwodW53cmFwKHRoaXMpLCBzdG9yZU5hbWVzLCAuLi5hcmdzKTtcbiAgICAgICAgICAgIHRyYW5zYWN0aW9uU3RvcmVOYW1lc01hcC5zZXQodHgsIHN0b3JlTmFtZXMuc29ydCA/IHN0b3JlTmFtZXMuc29ydCgpIDogW3N0b3JlTmFtZXNdKTtcbiAgICAgICAgICAgIHJldHVybiB3cmFwKHR4KTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLy8gQ3Vyc29yIG1ldGhvZHMgYXJlIHNwZWNpYWwsIGFzIHRoZSBiZWhhdmlvdXIgaXMgYSBsaXR0bGUgbW9yZSBkaWZmZXJlbnQgdG8gc3RhbmRhcmQgSURCLiBJblxuICAgIC8vIElEQiwgeW91IGFkdmFuY2UgdGhlIGN1cnNvciBhbmQgd2FpdCBmb3IgYSBuZXcgJ3N1Y2Nlc3MnIG9uIHRoZSBJREJSZXF1ZXN0IHRoYXQgZ2F2ZSB5b3UgdGhlXG4gICAgLy8gY3Vyc29yLiBJdCdzIGtpbmRhIGxpa2UgYSBwcm9taXNlIHRoYXQgY2FuIHJlc29sdmUgd2l0aCBtYW55IHZhbHVlcy4gVGhhdCBkb2Vzbid0IG1ha2Ugc2Vuc2VcbiAgICAvLyB3aXRoIHJlYWwgcHJvbWlzZXMsIHNvIGVhY2ggYWR2YW5jZSBtZXRob2RzIHJldHVybnMgYSBuZXcgcHJvbWlzZSBmb3IgdGhlIGN1cnNvciBvYmplY3QsIG9yXG4gICAgLy8gdW5kZWZpbmVkIGlmIHRoZSBlbmQgb2YgdGhlIGN1cnNvciBoYXMgYmVlbiByZWFjaGVkLlxuICAgIGlmIChnZXRDdXJzb3JBZHZhbmNlTWV0aG9kcygpLmluY2x1ZGVzKGZ1bmMpKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoLi4uYXJncykge1xuICAgICAgICAgICAgLy8gQ2FsbGluZyB0aGUgb3JpZ2luYWwgZnVuY3Rpb24gd2l0aCB0aGUgcHJveHkgYXMgJ3RoaXMnIGNhdXNlcyBJTExFR0FMIElOVk9DQVRJT04sIHNvIHdlIHVzZVxuICAgICAgICAgICAgLy8gdGhlIG9yaWdpbmFsIG9iamVjdC5cbiAgICAgICAgICAgIGZ1bmMuYXBwbHkodW53cmFwKHRoaXMpLCBhcmdzKTtcbiAgICAgICAgICAgIHJldHVybiB3cmFwKGN1cnNvclJlcXVlc3RNYXAuZ2V0KHRoaXMpKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgICAgIC8vIENhbGxpbmcgdGhlIG9yaWdpbmFsIGZ1bmN0aW9uIHdpdGggdGhlIHByb3h5IGFzICd0aGlzJyBjYXVzZXMgSUxMRUdBTCBJTlZPQ0FUSU9OLCBzbyB3ZSB1c2VcbiAgICAgICAgLy8gdGhlIG9yaWdpbmFsIG9iamVjdC5cbiAgICAgICAgcmV0dXJuIHdyYXAoZnVuYy5hcHBseSh1bndyYXAodGhpcyksIGFyZ3MpKTtcbiAgICB9O1xufVxuZnVuY3Rpb24gdHJhbnNmb3JtQ2FjaGFibGVWYWx1ZSh2YWx1ZSkge1xuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicpXG4gICAgICAgIHJldHVybiB3cmFwRnVuY3Rpb24odmFsdWUpO1xuICAgIC8vIFRoaXMgZG9lc24ndCByZXR1cm4sIGl0IGp1c3QgY3JlYXRlcyBhICdkb25lJyBwcm9taXNlIGZvciB0aGUgdHJhbnNhY3Rpb24sXG4gICAgLy8gd2hpY2ggaXMgbGF0ZXIgcmV0dXJuZWQgZm9yIHRyYW5zYWN0aW9uLmRvbmUgKHNlZSBpZGJPYmplY3RIYW5kbGVyKS5cbiAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBJREJUcmFuc2FjdGlvbilcbiAgICAgICAgY2FjaGVEb25lUHJvbWlzZUZvclRyYW5zYWN0aW9uKHZhbHVlKTtcbiAgICBpZiAoaW5zdGFuY2VPZkFueSh2YWx1ZSwgZ2V0SWRiUHJveHlhYmxlVHlwZXMoKSkpXG4gICAgICAgIHJldHVybiBuZXcgUHJveHkodmFsdWUsIGlkYlByb3h5VHJhcHMpO1xuICAgIC8vIFJldHVybiB0aGUgc2FtZSB2YWx1ZSBiYWNrIGlmIHdlJ3JlIG5vdCBnb2luZyB0byB0cmFuc2Zvcm0gaXQuXG4gICAgcmV0dXJuIHZhbHVlO1xufVxuZnVuY3Rpb24gd3JhcCh2YWx1ZSkge1xuICAgIC8vIFdlIHNvbWV0aW1lcyBnZW5lcmF0ZSBtdWx0aXBsZSBwcm9taXNlcyBmcm9tIGEgc2luZ2xlIElEQlJlcXVlc3QgKGVnIHdoZW4gY3Vyc29yaW5nKSwgYmVjYXVzZVxuICAgIC8vIElEQiBpcyB3ZWlyZCBhbmQgYSBzaW5nbGUgSURCUmVxdWVzdCBjYW4geWllbGQgbWFueSByZXNwb25zZXMsIHNvIHRoZXNlIGNhbid0IGJlIGNhY2hlZC5cbiAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBJREJSZXF1ZXN0KVxuICAgICAgICByZXR1cm4gcHJvbWlzaWZ5UmVxdWVzdCh2YWx1ZSk7XG4gICAgLy8gSWYgd2UndmUgYWxyZWFkeSB0cmFuc2Zvcm1lZCB0aGlzIHZhbHVlIGJlZm9yZSwgcmV1c2UgdGhlIHRyYW5zZm9ybWVkIHZhbHVlLlxuICAgIC8vIFRoaXMgaXMgZmFzdGVyLCBidXQgaXQgYWxzbyBwcm92aWRlcyBvYmplY3QgZXF1YWxpdHkuXG4gICAgaWYgKHRyYW5zZm9ybUNhY2hlLmhhcyh2YWx1ZSkpXG4gICAgICAgIHJldHVybiB0cmFuc2Zvcm1DYWNoZS5nZXQodmFsdWUpO1xuICAgIGNvbnN0IG5ld1ZhbHVlID0gdHJhbnNmb3JtQ2FjaGFibGVWYWx1ZSh2YWx1ZSk7XG4gICAgLy8gTm90IGFsbCB0eXBlcyBhcmUgdHJhbnNmb3JtZWQuXG4gICAgLy8gVGhlc2UgbWF5IGJlIHByaW1pdGl2ZSB0eXBlcywgc28gdGhleSBjYW4ndCBiZSBXZWFrTWFwIGtleXMuXG4gICAgaWYgKG5ld1ZhbHVlICE9PSB2YWx1ZSkge1xuICAgICAgICB0cmFuc2Zvcm1DYWNoZS5zZXQodmFsdWUsIG5ld1ZhbHVlKTtcbiAgICAgICAgcmV2ZXJzZVRyYW5zZm9ybUNhY2hlLnNldChuZXdWYWx1ZSwgdmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3VmFsdWU7XG59XG5jb25zdCB1bndyYXAgPSAodmFsdWUpID0+IHJldmVyc2VUcmFuc2Zvcm1DYWNoZS5nZXQodmFsdWUpO1xuXG5leHBvcnQgeyByZXZlcnNlVHJhbnNmb3JtQ2FjaGUgYXMgYSwgaW5zdGFuY2VPZkFueSBhcyBpLCByZXBsYWNlVHJhcHMgYXMgciwgdW53cmFwIGFzIHUsIHdyYXAgYXMgdyB9O1xuIiwiaW1wb3J0IHsgdyBhcyB3cmFwLCByIGFzIHJlcGxhY2VUcmFwcyB9IGZyb20gJy4vd3JhcC1pZGItdmFsdWUuanMnO1xuZXhwb3J0IHsgdSBhcyB1bndyYXAsIHcgYXMgd3JhcCB9IGZyb20gJy4vd3JhcC1pZGItdmFsdWUuanMnO1xuXG4vKipcbiAqIE9wZW4gYSBkYXRhYmFzZS5cbiAqXG4gKiBAcGFyYW0gbmFtZSBOYW1lIG9mIHRoZSBkYXRhYmFzZS5cbiAqIEBwYXJhbSB2ZXJzaW9uIFNjaGVtYSB2ZXJzaW9uLlxuICogQHBhcmFtIGNhbGxiYWNrcyBBZGRpdGlvbmFsIGNhbGxiYWNrcy5cbiAqL1xuZnVuY3Rpb24gb3BlbkRCKG5hbWUsIHZlcnNpb24sIHsgYmxvY2tlZCwgdXBncmFkZSwgYmxvY2tpbmcsIHRlcm1pbmF0ZWQgfSA9IHt9KSB7XG4gICAgY29uc3QgcmVxdWVzdCA9IGluZGV4ZWREQi5vcGVuKG5hbWUsIHZlcnNpb24pO1xuICAgIGNvbnN0IG9wZW5Qcm9taXNlID0gd3JhcChyZXF1ZXN0KTtcbiAgICBpZiAodXBncmFkZSkge1xuICAgICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ3VwZ3JhZGVuZWVkZWQnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHVwZ3JhZGUod3JhcChyZXF1ZXN0LnJlc3VsdCksIGV2ZW50Lm9sZFZlcnNpb24sIGV2ZW50Lm5ld1ZlcnNpb24sIHdyYXAocmVxdWVzdC50cmFuc2FjdGlvbiksIGV2ZW50KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChibG9ja2VkKSB7XG4gICAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcignYmxvY2tlZCcsIChldmVudCkgPT4gYmxvY2tlZChcbiAgICAgICAgLy8gQ2FzdGluZyBkdWUgdG8gaHR0cHM6Ly9naXRodWIuY29tL21pY3Jvc29mdC9UeXBlU2NyaXB0LURPTS1saWItZ2VuZXJhdG9yL3B1bGwvMTQwNVxuICAgICAgICBldmVudC5vbGRWZXJzaW9uLCBldmVudC5uZXdWZXJzaW9uLCBldmVudCkpO1xuICAgIH1cbiAgICBvcGVuUHJvbWlzZVxuICAgICAgICAudGhlbigoZGIpID0+IHtcbiAgICAgICAgaWYgKHRlcm1pbmF0ZWQpXG4gICAgICAgICAgICBkYi5hZGRFdmVudExpc3RlbmVyKCdjbG9zZScsICgpID0+IHRlcm1pbmF0ZWQoKSk7XG4gICAgICAgIGlmIChibG9ja2luZykge1xuICAgICAgICAgICAgZGIuYWRkRXZlbnRMaXN0ZW5lcigndmVyc2lvbmNoYW5nZScsIChldmVudCkgPT4gYmxvY2tpbmcoZXZlbnQub2xkVmVyc2lvbiwgZXZlbnQubmV3VmVyc2lvbiwgZXZlbnQpKTtcbiAgICAgICAgfVxuICAgIH0pXG4gICAgICAgIC5jYXRjaCgoKSA9PiB7IH0pO1xuICAgIHJldHVybiBvcGVuUHJvbWlzZTtcbn1cbi8qKlxuICogRGVsZXRlIGEgZGF0YWJhc2UuXG4gKlxuICogQHBhcmFtIG5hbWUgTmFtZSBvZiB0aGUgZGF0YWJhc2UuXG4gKi9cbmZ1bmN0aW9uIGRlbGV0ZURCKG5hbWUsIHsgYmxvY2tlZCB9ID0ge30pIHtcbiAgICBjb25zdCByZXF1ZXN0ID0gaW5kZXhlZERCLmRlbGV0ZURhdGFiYXNlKG5hbWUpO1xuICAgIGlmIChibG9ja2VkKSB7XG4gICAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcignYmxvY2tlZCcsIChldmVudCkgPT4gYmxvY2tlZChcbiAgICAgICAgLy8gQ2FzdGluZyBkdWUgdG8gaHR0cHM6Ly9naXRodWIuY29tL21pY3Jvc29mdC9UeXBlU2NyaXB0LURPTS1saWItZ2VuZXJhdG9yL3B1bGwvMTQwNVxuICAgICAgICBldmVudC5vbGRWZXJzaW9uLCBldmVudCkpO1xuICAgIH1cbiAgICByZXR1cm4gd3JhcChyZXF1ZXN0KS50aGVuKCgpID0+IHVuZGVmaW5lZCk7XG59XG5cbmNvbnN0IHJlYWRNZXRob2RzID0gWydnZXQnLCAnZ2V0S2V5JywgJ2dldEFsbCcsICdnZXRBbGxLZXlzJywgJ2NvdW50J107XG5jb25zdCB3cml0ZU1ldGhvZHMgPSBbJ3B1dCcsICdhZGQnLCAnZGVsZXRlJywgJ2NsZWFyJ107XG5jb25zdCBjYWNoZWRNZXRob2RzID0gbmV3IE1hcCgpO1xuZnVuY3Rpb24gZ2V0TWV0aG9kKHRhcmdldCwgcHJvcCkge1xuICAgIGlmICghKHRhcmdldCBpbnN0YW5jZW9mIElEQkRhdGFiYXNlICYmXG4gICAgICAgICEocHJvcCBpbiB0YXJnZXQpICYmXG4gICAgICAgIHR5cGVvZiBwcm9wID09PSAnc3RyaW5nJykpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoY2FjaGVkTWV0aG9kcy5nZXQocHJvcCkpXG4gICAgICAgIHJldHVybiBjYWNoZWRNZXRob2RzLmdldChwcm9wKTtcbiAgICBjb25zdCB0YXJnZXRGdW5jTmFtZSA9IHByb3AucmVwbGFjZSgvRnJvbUluZGV4JC8sICcnKTtcbiAgICBjb25zdCB1c2VJbmRleCA9IHByb3AgIT09IHRhcmdldEZ1bmNOYW1lO1xuICAgIGNvbnN0IGlzV3JpdGUgPSB3cml0ZU1ldGhvZHMuaW5jbHVkZXModGFyZ2V0RnVuY05hbWUpO1xuICAgIGlmIChcbiAgICAvLyBCYWlsIGlmIHRoZSB0YXJnZXQgZG9lc24ndCBleGlzdCBvbiB0aGUgdGFyZ2V0LiBFZywgZ2V0QWxsIGlzbid0IGluIEVkZ2UuXG4gICAgISh0YXJnZXRGdW5jTmFtZSBpbiAodXNlSW5kZXggPyBJREJJbmRleCA6IElEQk9iamVjdFN0b3JlKS5wcm90b3R5cGUpIHx8XG4gICAgICAgICEoaXNXcml0ZSB8fCByZWFkTWV0aG9kcy5pbmNsdWRlcyh0YXJnZXRGdW5jTmFtZSkpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgbWV0aG9kID0gYXN5bmMgZnVuY3Rpb24gKHN0b3JlTmFtZSwgLi4uYXJncykge1xuICAgICAgICAvLyBpc1dyaXRlID8gJ3JlYWR3cml0ZScgOiB1bmRlZmluZWQgZ3ppcHBzIGJldHRlciwgYnV0IGZhaWxzIGluIEVkZ2UgOihcbiAgICAgICAgY29uc3QgdHggPSB0aGlzLnRyYW5zYWN0aW9uKHN0b3JlTmFtZSwgaXNXcml0ZSA/ICdyZWFkd3JpdGUnIDogJ3JlYWRvbmx5Jyk7XG4gICAgICAgIGxldCB0YXJnZXQgPSB0eC5zdG9yZTtcbiAgICAgICAgaWYgKHVzZUluZGV4KVxuICAgICAgICAgICAgdGFyZ2V0ID0gdGFyZ2V0LmluZGV4KGFyZ3Muc2hpZnQoKSk7XG4gICAgICAgIC8vIE11c3QgcmVqZWN0IGlmIG9wIHJlamVjdHMuXG4gICAgICAgIC8vIElmIGl0J3MgYSB3cml0ZSBvcGVyYXRpb24sIG11c3QgcmVqZWN0IGlmIHR4LmRvbmUgcmVqZWN0cy5cbiAgICAgICAgLy8gTXVzdCByZWplY3Qgd2l0aCBvcCByZWplY3Rpb24gZmlyc3QuXG4gICAgICAgIC8vIE11c3QgcmVzb2x2ZSB3aXRoIG9wIHZhbHVlLlxuICAgICAgICAvLyBNdXN0IGhhbmRsZSBib3RoIHByb21pc2VzIChubyB1bmhhbmRsZWQgcmVqZWN0aW9ucylcbiAgICAgICAgcmV0dXJuIChhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICB0YXJnZXRbdGFyZ2V0RnVuY05hbWVdKC4uLmFyZ3MpLFxuICAgICAgICAgICAgaXNXcml0ZSAmJiB0eC5kb25lLFxuICAgICAgICBdKSlbMF07XG4gICAgfTtcbiAgICBjYWNoZWRNZXRob2RzLnNldChwcm9wLCBtZXRob2QpO1xuICAgIHJldHVybiBtZXRob2Q7XG59XG5yZXBsYWNlVHJhcHMoKG9sZFRyYXBzKSA9PiAoe1xuICAgIC4uLm9sZFRyYXBzLFxuICAgIGdldDogKHRhcmdldCwgcHJvcCwgcmVjZWl2ZXIpID0+IGdldE1ldGhvZCh0YXJnZXQsIHByb3ApIHx8IG9sZFRyYXBzLmdldCh0YXJnZXQsIHByb3AsIHJlY2VpdmVyKSxcbiAgICBoYXM6ICh0YXJnZXQsIHByb3ApID0+ICEhZ2V0TWV0aG9kKHRhcmdldCwgcHJvcCkgfHwgb2xkVHJhcHMuaGFzKHRhcmdldCwgcHJvcCksXG59KSk7XG5cbmV4cG9ydCB7IGRlbGV0ZURCLCBvcGVuREIgfTtcbiIsImltcG9ydCB7IENvbXBvbmVudCwgQ29tcG9uZW50Q29udGFpbmVyIH0gZnJvbSAnQGZpcmViYXNlL2NvbXBvbmVudCc7XG5pbXBvcnQgeyBMb2dnZXIsIHNldFVzZXJMb2dIYW5kbGVyLCBzZXRMb2dMZXZlbCBhcyBzZXRMb2dMZXZlbCQxIH0gZnJvbSAnQGZpcmViYXNlL2xvZ2dlcic7XG5pbXBvcnQgeyBFcnJvckZhY3RvcnksIGdldERlZmF1bHRBcHBDb25maWcsIGRlZXBFcXVhbCwgRmlyZWJhc2VFcnJvciwgYmFzZTY0dXJsRW5jb2RlV2l0aG91dFBhZGRpbmcsIGlzSW5kZXhlZERCQXZhaWxhYmxlLCB2YWxpZGF0ZUluZGV4ZWREQk9wZW5hYmxlIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuZXhwb3J0IHsgRmlyZWJhc2VFcnJvciB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IG9wZW5EQiB9IGZyb20gJ2lkYic7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIFBsYXRmb3JtTG9nZ2VyU2VydmljZUltcGwge1xyXG4gICAgY29uc3RydWN0b3IoY29udGFpbmVyKSB7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICB9XHJcbiAgICAvLyBJbiBpbml0aWFsIGltcGxlbWVudGF0aW9uLCB0aGlzIHdpbGwgYmUgY2FsbGVkIGJ5IGluc3RhbGxhdGlvbnMgb25cclxuICAgIC8vIGF1dGggdG9rZW4gcmVmcmVzaCwgYW5kIGluc3RhbGxhdGlvbnMgd2lsbCBzZW5kIHRoaXMgc3RyaW5nLlxyXG4gICAgZ2V0UGxhdGZvcm1JbmZvU3RyaW5nKCkge1xyXG4gICAgICAgIGNvbnN0IHByb3ZpZGVycyA9IHRoaXMuY29udGFpbmVyLmdldFByb3ZpZGVycygpO1xyXG4gICAgICAgIC8vIExvb3AgdGhyb3VnaCBwcm92aWRlcnMgYW5kIGdldCBsaWJyYXJ5L3ZlcnNpb24gcGFpcnMgZnJvbSBhbnkgdGhhdCBhcmVcclxuICAgICAgICAvLyB2ZXJzaW9uIGNvbXBvbmVudHMuXHJcbiAgICAgICAgcmV0dXJuIHByb3ZpZGVyc1xyXG4gICAgICAgICAgICAubWFwKHByb3ZpZGVyID0+IHtcclxuICAgICAgICAgICAgaWYgKGlzVmVyc2lvblNlcnZpY2VQcm92aWRlcihwcm92aWRlcikpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNlcnZpY2UgPSBwcm92aWRlci5nZXRJbW1lZGlhdGUoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBgJHtzZXJ2aWNlLmxpYnJhcnl9LyR7c2VydmljZS52ZXJzaW9ufWA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5maWx0ZXIobG9nU3RyaW5nID0+IGxvZ1N0cmluZylcclxuICAgICAgICAgICAgLmpvaW4oJyAnKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICpcclxuICogQHBhcmFtIHByb3ZpZGVyIGNoZWNrIGlmIHRoaXMgcHJvdmlkZXIgcHJvdmlkZXMgYSBWZXJzaW9uU2VydmljZVxyXG4gKlxyXG4gKiBOT1RFOiBVc2luZyBQcm92aWRlcjwnYXBwLXZlcnNpb24nPiBpcyBhIGhhY2sgdG8gaW5kaWNhdGUgdGhhdCB0aGUgcHJvdmlkZXJcclxuICogcHJvdmlkZXMgVmVyc2lvblNlcnZpY2UuIFRoZSBwcm92aWRlciBpcyBub3QgbmVjZXNzYXJpbHkgYSAnYXBwLXZlcnNpb24nXHJcbiAqIHByb3ZpZGVyLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNWZXJzaW9uU2VydmljZVByb3ZpZGVyKHByb3ZpZGVyKSB7XHJcbiAgICBjb25zdCBjb21wb25lbnQgPSBwcm92aWRlci5nZXRDb21wb25lbnQoKTtcclxuICAgIHJldHVybiAoY29tcG9uZW50ID09PSBudWxsIHx8IGNvbXBvbmVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogY29tcG9uZW50LnR5cGUpID09PSBcIlZFUlNJT05cIiAvKiBDb21wb25lbnRUeXBlLlZFUlNJT04gKi87XHJcbn1cblxuY29uc3QgbmFtZSRvID0gXCJAZmlyZWJhc2UvYXBwXCI7XG5jb25zdCB2ZXJzaW9uJDEgPSBcIjAuOS4yNFwiO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBsb2dnZXIgPSBuZXcgTG9nZ2VyKCdAZmlyZWJhc2UvYXBwJyk7XG5cbmNvbnN0IG5hbWUkbiA9IFwiQGZpcmViYXNlL2FwcC1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRtID0gXCJAZmlyZWJhc2UvYW5hbHl0aWNzLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGwgPSBcIkBmaXJlYmFzZS9hbmFseXRpY3NcIjtcblxuY29uc3QgbmFtZSRrID0gXCJAZmlyZWJhc2UvYXBwLWNoZWNrLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGogPSBcIkBmaXJlYmFzZS9hcHAtY2hlY2tcIjtcblxuY29uc3QgbmFtZSRpID0gXCJAZmlyZWJhc2UvYXV0aFwiO1xuXG5jb25zdCBuYW1lJGggPSBcIkBmaXJlYmFzZS9hdXRoLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGcgPSBcIkBmaXJlYmFzZS9kYXRhYmFzZVwiO1xuXG5jb25zdCBuYW1lJGYgPSBcIkBmaXJlYmFzZS9kYXRhYmFzZS1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRlID0gXCJAZmlyZWJhc2UvZnVuY3Rpb25zXCI7XG5cbmNvbnN0IG5hbWUkZCA9IFwiQGZpcmViYXNlL2Z1bmN0aW9ucy1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRjID0gXCJAZmlyZWJhc2UvaW5zdGFsbGF0aW9uc1wiO1xuXG5jb25zdCBuYW1lJGIgPSBcIkBmaXJlYmFzZS9pbnN0YWxsYXRpb25zLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGEgPSBcIkBmaXJlYmFzZS9tZXNzYWdpbmdcIjtcblxuY29uc3QgbmFtZSQ5ID0gXCJAZmlyZWJhc2UvbWVzc2FnaW5nLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJDggPSBcIkBmaXJlYmFzZS9wZXJmb3JtYW5jZVwiO1xuXG5jb25zdCBuYW1lJDcgPSBcIkBmaXJlYmFzZS9wZXJmb3JtYW5jZS1jb21wYXRcIjtcblxuY29uc3QgbmFtZSQ2ID0gXCJAZmlyZWJhc2UvcmVtb3RlLWNvbmZpZ1wiO1xuXG5jb25zdCBuYW1lJDUgPSBcIkBmaXJlYmFzZS9yZW1vdGUtY29uZmlnLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJDQgPSBcIkBmaXJlYmFzZS9zdG9yYWdlXCI7XG5cbmNvbnN0IG5hbWUkMyA9IFwiQGZpcmViYXNlL3N0b3JhZ2UtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkMiA9IFwiQGZpcmViYXNlL2ZpcmVzdG9yZVwiO1xuXG5jb25zdCBuYW1lJDEgPSBcIkBmaXJlYmFzZS9maXJlc3RvcmUtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUgPSBcImZpcmViYXNlXCI7XG5jb25zdCB2ZXJzaW9uID0gXCIxMC43LjBcIjtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFRoZSBkZWZhdWx0IGFwcCBuYW1lXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuY29uc3QgREVGQVVMVF9FTlRSWV9OQU1FID0gJ1tERUZBVUxUXSc7XHJcbmNvbnN0IFBMQVRGT1JNX0xPR19TVFJJTkcgPSB7XHJcbiAgICBbbmFtZSRvXTogJ2ZpcmUtY29yZScsXHJcbiAgICBbbmFtZSRuXTogJ2ZpcmUtY29yZS1jb21wYXQnLFxyXG4gICAgW25hbWUkbF06ICdmaXJlLWFuYWx5dGljcycsXHJcbiAgICBbbmFtZSRtXTogJ2ZpcmUtYW5hbHl0aWNzLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRqXTogJ2ZpcmUtYXBwLWNoZWNrJyxcclxuICAgIFtuYW1lJGtdOiAnZmlyZS1hcHAtY2hlY2stY29tcGF0JyxcclxuICAgIFtuYW1lJGldOiAnZmlyZS1hdXRoJyxcclxuICAgIFtuYW1lJGhdOiAnZmlyZS1hdXRoLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRnXTogJ2ZpcmUtcnRkYicsXHJcbiAgICBbbmFtZSRmXTogJ2ZpcmUtcnRkYi1jb21wYXQnLFxyXG4gICAgW25hbWUkZV06ICdmaXJlLWZuJyxcclxuICAgIFtuYW1lJGRdOiAnZmlyZS1mbi1jb21wYXQnLFxyXG4gICAgW25hbWUkY106ICdmaXJlLWlpZCcsXHJcbiAgICBbbmFtZSRiXTogJ2ZpcmUtaWlkLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRhXTogJ2ZpcmUtZmNtJyxcclxuICAgIFtuYW1lJDldOiAnZmlyZS1mY20tY29tcGF0JyxcclxuICAgIFtuYW1lJDhdOiAnZmlyZS1wZXJmJyxcclxuICAgIFtuYW1lJDddOiAnZmlyZS1wZXJmLWNvbXBhdCcsXHJcbiAgICBbbmFtZSQ2XTogJ2ZpcmUtcmMnLFxyXG4gICAgW25hbWUkNV06ICdmaXJlLXJjLWNvbXBhdCcsXHJcbiAgICBbbmFtZSQ0XTogJ2ZpcmUtZ2NzJyxcclxuICAgIFtuYW1lJDNdOiAnZmlyZS1nY3MtY29tcGF0JyxcclxuICAgIFtuYW1lJDJdOiAnZmlyZS1mc3QnLFxyXG4gICAgW25hbWUkMV06ICdmaXJlLWZzdC1jb21wYXQnLFxyXG4gICAgJ2ZpcmUtanMnOiAnZmlyZS1qcycsXHJcbiAgICBbbmFtZV06ICdmaXJlLWpzLWFsbCdcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuY29uc3QgX2FwcHMgPSBuZXcgTWFwKCk7XHJcbi8qKlxyXG4gKiBSZWdpc3RlcmVkIGNvbXBvbmVudHMuXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuY29uc3QgX2NvbXBvbmVudHMgPSBuZXcgTWFwKCk7XHJcbi8qKlxyXG4gKiBAcGFyYW0gY29tcG9uZW50IC0gdGhlIGNvbXBvbmVudCBiZWluZyBhZGRlZCB0byB0aGlzIGFwcCdzIGNvbnRhaW5lclxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIF9hZGRDb21wb25lbnQoYXBwLCBjb21wb25lbnQpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgYXBwLmNvbnRhaW5lci5hZGRDb21wb25lbnQoY29tcG9uZW50KTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgbG9nZ2VyLmRlYnVnKGBDb21wb25lbnQgJHtjb21wb25lbnQubmFtZX0gZmFpbGVkIHRvIHJlZ2lzdGVyIHdpdGggRmlyZWJhc2VBcHAgJHthcHAubmFtZX1gLCBlKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBfYWRkT3JPdmVyd3JpdGVDb21wb25lbnQoYXBwLCBjb21wb25lbnQpIHtcclxuICAgIGFwcC5jb250YWluZXIuYWRkT3JPdmVyd3JpdGVDb21wb25lbnQoY29tcG9uZW50KTtcclxufVxyXG4vKipcclxuICpcclxuICogQHBhcmFtIGNvbXBvbmVudCAtIHRoZSBjb21wb25lbnQgdG8gcmVnaXN0ZXJcclxuICogQHJldHVybnMgd2hldGhlciBvciBub3QgdGhlIGNvbXBvbmVudCBpcyByZWdpc3RlcmVkIHN1Y2Nlc3NmdWxseVxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIF9yZWdpc3RlckNvbXBvbmVudChjb21wb25lbnQpIHtcclxuICAgIGNvbnN0IGNvbXBvbmVudE5hbWUgPSBjb21wb25lbnQubmFtZTtcclxuICAgIGlmIChfY29tcG9uZW50cy5oYXMoY29tcG9uZW50TmFtZSkpIHtcclxuICAgICAgICBsb2dnZXIuZGVidWcoYFRoZXJlIHdlcmUgbXVsdGlwbGUgYXR0ZW1wdHMgdG8gcmVnaXN0ZXIgY29tcG9uZW50ICR7Y29tcG9uZW50TmFtZX0uYCk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgX2NvbXBvbmVudHMuc2V0KGNvbXBvbmVudE5hbWUsIGNvbXBvbmVudCk7XHJcbiAgICAvLyBhZGQgdGhlIGNvbXBvbmVudCB0byBleGlzdGluZyBhcHAgaW5zdGFuY2VzXHJcbiAgICBmb3IgKGNvbnN0IGFwcCBvZiBfYXBwcy52YWx1ZXMoKSkge1xyXG4gICAgICAgIF9hZGRDb21wb25lbnQoYXBwLCBjb21wb25lbnQpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuLyoqXHJcbiAqXHJcbiAqIEBwYXJhbSBhcHAgLSBGaXJlYmFzZUFwcCBpbnN0YW5jZVxyXG4gKiBAcGFyYW0gbmFtZSAtIHNlcnZpY2UgbmFtZVxyXG4gKlxyXG4gKiBAcmV0dXJucyB0aGUgcHJvdmlkZXIgZm9yIHRoZSBzZXJ2aWNlIHdpdGggdGhlIG1hdGNoaW5nIG5hbWVcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBfZ2V0UHJvdmlkZXIoYXBwLCBuYW1lKSB7XHJcbiAgICBjb25zdCBoZWFydGJlYXRDb250cm9sbGVyID0gYXBwLmNvbnRhaW5lclxyXG4gICAgICAgIC5nZXRQcm92aWRlcignaGVhcnRiZWF0JylcclxuICAgICAgICAuZ2V0SW1tZWRpYXRlKHsgb3B0aW9uYWw6IHRydWUgfSk7XHJcbiAgICBpZiAoaGVhcnRiZWF0Q29udHJvbGxlcikge1xyXG4gICAgICAgIHZvaWQgaGVhcnRiZWF0Q29udHJvbGxlci50cmlnZ2VySGVhcnRiZWF0KCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXBwLmNvbnRhaW5lci5nZXRQcm92aWRlcihuYW1lKTtcclxufVxyXG4vKipcclxuICpcclxuICogQHBhcmFtIGFwcCAtIEZpcmViYXNlQXBwIGluc3RhbmNlXHJcbiAqIEBwYXJhbSBuYW1lIC0gc2VydmljZSBuYW1lXHJcbiAqIEBwYXJhbSBpbnN0YW5jZUlkZW50aWZpZXIgLSBzZXJ2aWNlIGluc3RhbmNlIGlkZW50aWZpZXIgaW4gY2FzZSB0aGUgc2VydmljZSBzdXBwb3J0cyBtdWx0aXBsZSBpbnN0YW5jZXNcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBfcmVtb3ZlU2VydmljZUluc3RhbmNlKGFwcCwgbmFtZSwgaW5zdGFuY2VJZGVudGlmaWVyID0gREVGQVVMVF9FTlRSWV9OQU1FKSB7XHJcbiAgICBfZ2V0UHJvdmlkZXIoYXBwLCBuYW1lKS5jbGVhckluc3RhbmNlKGluc3RhbmNlSWRlbnRpZmllcik7XHJcbn1cclxuLyoqXHJcbiAqIFRlc3Qgb25seVxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIF9jbGVhckNvbXBvbmVudHMoKSB7XHJcbiAgICBfY29tcG9uZW50cy5jbGVhcigpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IEVSUk9SUyA9IHtcclxuICAgIFtcIm5vLWFwcFwiIC8qIEFwcEVycm9yLk5PX0FQUCAqL106IFwiTm8gRmlyZWJhc2UgQXBwICd7JGFwcE5hbWV9JyBoYXMgYmVlbiBjcmVhdGVkIC0gXCIgK1xyXG4gICAgICAgICdjYWxsIGluaXRpYWxpemVBcHAoKSBmaXJzdCcsXHJcbiAgICBbXCJiYWQtYXBwLW5hbWVcIiAvKiBBcHBFcnJvci5CQURfQVBQX05BTUUgKi9dOiBcIklsbGVnYWwgQXBwIG5hbWU6ICd7JGFwcE5hbWV9XCIsXHJcbiAgICBbXCJkdXBsaWNhdGUtYXBwXCIgLyogQXBwRXJyb3IuRFVQTElDQVRFX0FQUCAqL106IFwiRmlyZWJhc2UgQXBwIG5hbWVkICd7JGFwcE5hbWV9JyBhbHJlYWR5IGV4aXN0cyB3aXRoIGRpZmZlcmVudCBvcHRpb25zIG9yIGNvbmZpZ1wiLFxyXG4gICAgW1wiYXBwLWRlbGV0ZWRcIiAvKiBBcHBFcnJvci5BUFBfREVMRVRFRCAqL106IFwiRmlyZWJhc2UgQXBwIG5hbWVkICd7JGFwcE5hbWV9JyBhbHJlYWR5IGRlbGV0ZWRcIixcclxuICAgIFtcIm5vLW9wdGlvbnNcIiAvKiBBcHBFcnJvci5OT19PUFRJT05TICovXTogJ05lZWQgdG8gcHJvdmlkZSBvcHRpb25zLCB3aGVuIG5vdCBiZWluZyBkZXBsb3llZCB0byBob3N0aW5nIHZpYSBzb3VyY2UuJyxcclxuICAgIFtcImludmFsaWQtYXBwLWFyZ3VtZW50XCIgLyogQXBwRXJyb3IuSU5WQUxJRF9BUFBfQVJHVU1FTlQgKi9dOiAnZmlyZWJhc2UueyRhcHBOYW1lfSgpIHRha2VzIGVpdGhlciBubyBhcmd1bWVudCBvciBhICcgK1xyXG4gICAgICAgICdGaXJlYmFzZSBBcHAgaW5zdGFuY2UuJyxcclxuICAgIFtcImludmFsaWQtbG9nLWFyZ3VtZW50XCIgLyogQXBwRXJyb3IuSU5WQUxJRF9MT0dfQVJHVU1FTlQgKi9dOiAnRmlyc3QgYXJndW1lbnQgdG8gYG9uTG9nYCBtdXN0IGJlIG51bGwgb3IgYSBmdW5jdGlvbi4nLFxyXG4gICAgW1wiaWRiLW9wZW5cIiAvKiBBcHBFcnJvci5JREJfT1BFTiAqL106ICdFcnJvciB0aHJvd24gd2hlbiBvcGVuaW5nIEluZGV4ZWREQi4gT3JpZ2luYWwgZXJyb3I6IHskb3JpZ2luYWxFcnJvck1lc3NhZ2V9LicsXHJcbiAgICBbXCJpZGItZ2V0XCIgLyogQXBwRXJyb3IuSURCX0dFVCAqL106ICdFcnJvciB0aHJvd24gd2hlbiByZWFkaW5nIGZyb20gSW5kZXhlZERCLiBPcmlnaW5hbCBlcnJvcjogeyRvcmlnaW5hbEVycm9yTWVzc2FnZX0uJyxcclxuICAgIFtcImlkYi1zZXRcIiAvKiBBcHBFcnJvci5JREJfV1JJVEUgKi9dOiAnRXJyb3IgdGhyb3duIHdoZW4gd3JpdGluZyB0byBJbmRleGVkREIuIE9yaWdpbmFsIGVycm9yOiB7JG9yaWdpbmFsRXJyb3JNZXNzYWdlfS4nLFxyXG4gICAgW1wiaWRiLWRlbGV0ZVwiIC8qIEFwcEVycm9yLklEQl9ERUxFVEUgKi9dOiAnRXJyb3IgdGhyb3duIHdoZW4gZGVsZXRpbmcgZnJvbSBJbmRleGVkREIuIE9yaWdpbmFsIGVycm9yOiB7JG9yaWdpbmFsRXJyb3JNZXNzYWdlfS4nXHJcbn07XHJcbmNvbnN0IEVSUk9SX0ZBQ1RPUlkgPSBuZXcgRXJyb3JGYWN0b3J5KCdhcHAnLCAnRmlyZWJhc2UnLCBFUlJPUlMpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBGaXJlYmFzZUFwcEltcGwge1xyXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucywgY29uZmlnLCBjb250YWluZXIpIHtcclxuICAgICAgICB0aGlzLl9pc0RlbGV0ZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9vcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgb3B0aW9ucyk7XHJcbiAgICAgICAgdGhpcy5fY29uZmlnID0gT2JqZWN0LmFzc2lnbih7fSwgY29uZmlnKTtcclxuICAgICAgICB0aGlzLl9uYW1lID0gY29uZmlnLm5hbWU7XHJcbiAgICAgICAgdGhpcy5fYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkID1cclxuICAgICAgICAgICAgY29uZmlnLmF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZDtcclxuICAgICAgICB0aGlzLl9jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIuYWRkQ29tcG9uZW50KG5ldyBDb21wb25lbnQoJ2FwcCcsICgpID0+IHRoaXMsIFwiUFVCTElDXCIgLyogQ29tcG9uZW50VHlwZS5QVUJMSUMgKi8pKTtcclxuICAgIH1cclxuICAgIGdldCBhdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQoKSB7XHJcbiAgICAgICAgdGhpcy5jaGVja0Rlc3Ryb3llZCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9hdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQ7XHJcbiAgICB9XHJcbiAgICBzZXQgYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkKHZhbCkge1xyXG4gICAgICAgIHRoaXMuY2hlY2tEZXN0cm95ZWQoKTtcclxuICAgICAgICB0aGlzLl9hdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQgPSB2YWw7XHJcbiAgICB9XHJcbiAgICBnZXQgbmFtZSgpIHtcclxuICAgICAgICB0aGlzLmNoZWNrRGVzdHJveWVkKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX25hbWU7XHJcbiAgICB9XHJcbiAgICBnZXQgb3B0aW9ucygpIHtcclxuICAgICAgICB0aGlzLmNoZWNrRGVzdHJveWVkKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX29wdGlvbnM7XHJcbiAgICB9XHJcbiAgICBnZXQgY29uZmlnKCkge1xyXG4gICAgICAgIHRoaXMuY2hlY2tEZXN0cm95ZWQoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY29uZmlnO1xyXG4gICAgfVxyXG4gICAgZ2V0IGNvbnRhaW5lcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY29udGFpbmVyO1xyXG4gICAgfVxyXG4gICAgZ2V0IGlzRGVsZXRlZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5faXNEZWxldGVkO1xyXG4gICAgfVxyXG4gICAgc2V0IGlzRGVsZXRlZCh2YWwpIHtcclxuICAgICAgICB0aGlzLl9pc0RlbGV0ZWQgPSB2YWw7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgZnVuY3Rpb24gd2lsbCB0aHJvdyBhbiBFcnJvciBpZiB0aGUgQXBwIGhhcyBhbHJlYWR5IGJlZW4gZGVsZXRlZCAtXHJcbiAgICAgKiB1c2UgYmVmb3JlIHBlcmZvcm1pbmcgQVBJIGFjdGlvbnMgb24gdGhlIEFwcC5cclxuICAgICAqL1xyXG4gICAgY2hlY2tEZXN0cm95ZWQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNEZWxldGVkKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiYXBwLWRlbGV0ZWRcIiAvKiBBcHBFcnJvci5BUFBfREVMRVRFRCAqLywgeyBhcHBOYW1lOiB0aGlzLl9uYW1lIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVGhlIGN1cnJlbnQgU0RLIHZlcnNpb24uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IFNES19WRVJTSU9OID0gdmVyc2lvbjtcclxuZnVuY3Rpb24gaW5pdGlhbGl6ZUFwcChfb3B0aW9ucywgcmF3Q29uZmlnID0ge30pIHtcclxuICAgIGxldCBvcHRpb25zID0gX29wdGlvbnM7XHJcbiAgICBpZiAodHlwZW9mIHJhd0NvbmZpZyAhPT0gJ29iamVjdCcpIHtcclxuICAgICAgICBjb25zdCBuYW1lID0gcmF3Q29uZmlnO1xyXG4gICAgICAgIHJhd0NvbmZpZyA9IHsgbmFtZSB9O1xyXG4gICAgfVxyXG4gICAgY29uc3QgY29uZmlnID0gT2JqZWN0LmFzc2lnbih7IG5hbWU6IERFRkFVTFRfRU5UUllfTkFNRSwgYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkOiBmYWxzZSB9LCByYXdDb25maWcpO1xyXG4gICAgY29uc3QgbmFtZSA9IGNvbmZpZy5uYW1lO1xyXG4gICAgaWYgKHR5cGVvZiBuYW1lICE9PSAnc3RyaW5nJyB8fCAhbmFtZSkge1xyXG4gICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiYmFkLWFwcC1uYW1lXCIgLyogQXBwRXJyb3IuQkFEX0FQUF9OQU1FICovLCB7XHJcbiAgICAgICAgICAgIGFwcE5hbWU6IFN0cmluZyhuYW1lKVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgb3B0aW9ucyB8fCAob3B0aW9ucyA9IGdldERlZmF1bHRBcHBDb25maWcoKSk7XHJcbiAgICBpZiAoIW9wdGlvbnMpIHtcclxuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcIm5vLW9wdGlvbnNcIiAvKiBBcHBFcnJvci5OT19PUFRJT05TICovKTtcclxuICAgIH1cclxuICAgIGNvbnN0IGV4aXN0aW5nQXBwID0gX2FwcHMuZ2V0KG5hbWUpO1xyXG4gICAgaWYgKGV4aXN0aW5nQXBwKSB7XHJcbiAgICAgICAgLy8gcmV0dXJuIHRoZSBleGlzdGluZyBhcHAgaWYgb3B0aW9ucyBhbmQgY29uZmlnIGRlZXAgZXF1YWwgdGhlIG9uZXMgaW4gdGhlIGV4aXN0aW5nIGFwcC5cclxuICAgICAgICBpZiAoZGVlcEVxdWFsKG9wdGlvbnMsIGV4aXN0aW5nQXBwLm9wdGlvbnMpICYmXHJcbiAgICAgICAgICAgIGRlZXBFcXVhbChjb25maWcsIGV4aXN0aW5nQXBwLmNvbmZpZykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGV4aXN0aW5nQXBwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJkdXBsaWNhdGUtYXBwXCIgLyogQXBwRXJyb3IuRFVQTElDQVRFX0FQUCAqLywgeyBhcHBOYW1lOiBuYW1lIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnN0IGNvbnRhaW5lciA9IG5ldyBDb21wb25lbnRDb250YWluZXIobmFtZSk7XHJcbiAgICBmb3IgKGNvbnN0IGNvbXBvbmVudCBvZiBfY29tcG9uZW50cy52YWx1ZXMoKSkge1xyXG4gICAgICAgIGNvbnRhaW5lci5hZGRDb21wb25lbnQoY29tcG9uZW50KTtcclxuICAgIH1cclxuICAgIGNvbnN0IG5ld0FwcCA9IG5ldyBGaXJlYmFzZUFwcEltcGwob3B0aW9ucywgY29uZmlnLCBjb250YWluZXIpO1xyXG4gICAgX2FwcHMuc2V0KG5hbWUsIG5ld0FwcCk7XHJcbiAgICByZXR1cm4gbmV3QXBwO1xyXG59XHJcbi8qKlxyXG4gKiBSZXRyaWV2ZXMgYSB7QGxpbmsgQGZpcmViYXNlL2FwcCNGaXJlYmFzZUFwcH0gaW5zdGFuY2UuXHJcbiAqXHJcbiAqIFdoZW4gY2FsbGVkIHdpdGggbm8gYXJndW1lbnRzLCB0aGUgZGVmYXVsdCBhcHAgaXMgcmV0dXJuZWQuIFdoZW4gYW4gYXBwIG5hbWVcclxuICogaXMgcHJvdmlkZWQsIHRoZSBhcHAgY29ycmVzcG9uZGluZyB0byB0aGF0IG5hbWUgaXMgcmV0dXJuZWQuXHJcbiAqXHJcbiAqIEFuIGV4Y2VwdGlvbiBpcyB0aHJvd24gaWYgdGhlIGFwcCBiZWluZyByZXRyaWV2ZWQgaGFzIG5vdCB5ZXQgYmVlblxyXG4gKiBpbml0aWFsaXplZC5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBSZXR1cm4gdGhlIGRlZmF1bHQgYXBwXHJcbiAqIGNvbnN0IGFwcCA9IGdldEFwcCgpO1xyXG4gKiBgYGBcclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBSZXR1cm4gYSBuYW1lZCBhcHBcclxuICogY29uc3Qgb3RoZXJBcHAgPSBnZXRBcHAoXCJvdGhlckFwcFwiKTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSBuYW1lIC0gT3B0aW9uYWwgbmFtZSBvZiB0aGUgYXBwIHRvIHJldHVybi4gSWYgbm8gbmFtZSBpc1xyXG4gKiAgIHByb3ZpZGVkLCB0aGUgZGVmYXVsdCBpcyBgXCJbREVGQVVMVF1cImAuXHJcbiAqXHJcbiAqIEByZXR1cm5zIFRoZSBhcHAgY29ycmVzcG9uZGluZyB0byB0aGUgcHJvdmlkZWQgYXBwIG5hbWUuXHJcbiAqICAgSWYgbm8gYXBwIG5hbWUgaXMgcHJvdmlkZWQsIHRoZSBkZWZhdWx0IGFwcCBpcyByZXR1cm5lZC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gZ2V0QXBwKG5hbWUgPSBERUZBVUxUX0VOVFJZX05BTUUpIHtcclxuICAgIGNvbnN0IGFwcCA9IF9hcHBzLmdldChuYW1lKTtcclxuICAgIGlmICghYXBwICYmIG5hbWUgPT09IERFRkFVTFRfRU5UUllfTkFNRSAmJiBnZXREZWZhdWx0QXBwQ29uZmlnKCkpIHtcclxuICAgICAgICByZXR1cm4gaW5pdGlhbGl6ZUFwcCgpO1xyXG4gICAgfVxyXG4gICAgaWYgKCFhcHApIHtcclxuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcIm5vLWFwcFwiIC8qIEFwcEVycm9yLk5PX0FQUCAqLywgeyBhcHBOYW1lOiBuYW1lIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFwcDtcclxufVxyXG4vKipcclxuICogQSAocmVhZC1vbmx5KSBhcnJheSBvZiBhbGwgaW5pdGlhbGl6ZWQgYXBwcy5cclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gZ2V0QXBwcygpIHtcclxuICAgIHJldHVybiBBcnJheS5mcm9tKF9hcHBzLnZhbHVlcygpKTtcclxufVxyXG4vKipcclxuICogUmVuZGVycyB0aGlzIGFwcCB1bnVzYWJsZSBhbmQgZnJlZXMgdGhlIHJlc291cmNlcyBvZiBhbGwgYXNzb2NpYXRlZFxyXG4gKiBzZXJ2aWNlcy5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiBkZWxldGVBcHAoYXBwKVxyXG4gKiAgIC50aGVuKGZ1bmN0aW9uKCkge1xyXG4gKiAgICAgY29uc29sZS5sb2coXCJBcHAgZGVsZXRlZCBzdWNjZXNzZnVsbHlcIik7XHJcbiAqICAgfSlcclxuICogICAuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcclxuICogICAgIGNvbnNvbGUubG9nKFwiRXJyb3IgZGVsZXRpbmcgYXBwOlwiLCBlcnJvcik7XHJcbiAqICAgfSk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBkZWxldGVBcHAoYXBwKSB7XHJcbiAgICBjb25zdCBuYW1lID0gYXBwLm5hbWU7XHJcbiAgICBpZiAoX2FwcHMuaGFzKG5hbWUpKSB7XHJcbiAgICAgICAgX2FwcHMuZGVsZXRlKG5hbWUpO1xyXG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKGFwcC5jb250YWluZXJcclxuICAgICAgICAgICAgLmdldFByb3ZpZGVycygpXHJcbiAgICAgICAgICAgIC5tYXAocHJvdmlkZXIgPT4gcHJvdmlkZXIuZGVsZXRlKCkpKTtcclxuICAgICAgICBhcHAuaXNEZWxldGVkID0gdHJ1ZTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogUmVnaXN0ZXJzIGEgbGlicmFyeSdzIG5hbWUgYW5kIHZlcnNpb24gZm9yIHBsYXRmb3JtIGxvZ2dpbmcgcHVycG9zZXMuXHJcbiAqIEBwYXJhbSBsaWJyYXJ5IC0gTmFtZSBvZiAxcCBvciAzcCBsaWJyYXJ5IChlLmcuIGZpcmVzdG9yZSwgYW5ndWxhcmZpcmUpXHJcbiAqIEBwYXJhbSB2ZXJzaW9uIC0gQ3VycmVudCB2ZXJzaW9uIG9mIHRoYXQgbGlicmFyeS5cclxuICogQHBhcmFtIHZhcmlhbnQgLSBCdW5kbGUgdmFyaWFudCwgZS5nLiwgbm9kZSwgcm4sIGV0Yy5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gcmVnaXN0ZXJWZXJzaW9uKGxpYnJhcnlLZXlPck5hbWUsIHZlcnNpb24sIHZhcmlhbnQpIHtcclxuICAgIHZhciBfYTtcclxuICAgIC8vIFRPRE86IFdlIGNhbiB1c2UgdGhpcyBjaGVjayB0byB3aGl0ZWxpc3Qgc3RyaW5ncyB3aGVuL2lmIHdlIHNldCB1cFxyXG4gICAgLy8gYSBnb29kIHdoaXRlbGlzdCBzeXN0ZW0uXHJcbiAgICBsZXQgbGlicmFyeSA9IChfYSA9IFBMQVRGT1JNX0xPR19TVFJJTkdbbGlicmFyeUtleU9yTmFtZV0pICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IGxpYnJhcnlLZXlPck5hbWU7XHJcbiAgICBpZiAodmFyaWFudCkge1xyXG4gICAgICAgIGxpYnJhcnkgKz0gYC0ke3ZhcmlhbnR9YDtcclxuICAgIH1cclxuICAgIGNvbnN0IGxpYnJhcnlNaXNtYXRjaCA9IGxpYnJhcnkubWF0Y2goL1xcc3xcXC8vKTtcclxuICAgIGNvbnN0IHZlcnNpb25NaXNtYXRjaCA9IHZlcnNpb24ubWF0Y2goL1xcc3xcXC8vKTtcclxuICAgIGlmIChsaWJyYXJ5TWlzbWF0Y2ggfHwgdmVyc2lvbk1pc21hdGNoKSB7XHJcbiAgICAgICAgY29uc3Qgd2FybmluZyA9IFtcclxuICAgICAgICAgICAgYFVuYWJsZSB0byByZWdpc3RlciBsaWJyYXJ5IFwiJHtsaWJyYXJ5fVwiIHdpdGggdmVyc2lvbiBcIiR7dmVyc2lvbn1cIjpgXHJcbiAgICAgICAgXTtcclxuICAgICAgICBpZiAobGlicmFyeU1pc21hdGNoKSB7XHJcbiAgICAgICAgICAgIHdhcm5pbmcucHVzaChgbGlicmFyeSBuYW1lIFwiJHtsaWJyYXJ5fVwiIGNvbnRhaW5zIGlsbGVnYWwgY2hhcmFjdGVycyAod2hpdGVzcGFjZSBvciBcIi9cIilgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGxpYnJhcnlNaXNtYXRjaCAmJiB2ZXJzaW9uTWlzbWF0Y2gpIHtcclxuICAgICAgICAgICAgd2FybmluZy5wdXNoKCdhbmQnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHZlcnNpb25NaXNtYXRjaCkge1xyXG4gICAgICAgICAgICB3YXJuaW5nLnB1c2goYHZlcnNpb24gbmFtZSBcIiR7dmVyc2lvbn1cIiBjb250YWlucyBpbGxlZ2FsIGNoYXJhY3RlcnMgKHdoaXRlc3BhY2Ugb3IgXCIvXCIpYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxvZ2dlci53YXJuKHdhcm5pbmcuam9pbignICcpKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBfcmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudChgJHtsaWJyYXJ5fS12ZXJzaW9uYCwgKCkgPT4gKHsgbGlicmFyeSwgdmVyc2lvbiB9KSwgXCJWRVJTSU9OXCIgLyogQ29tcG9uZW50VHlwZS5WRVJTSU9OICovKSk7XHJcbn1cclxuLyoqXHJcbiAqIFNldHMgbG9nIGhhbmRsZXIgZm9yIGFsbCBGaXJlYmFzZSBTREtzLlxyXG4gKiBAcGFyYW0gbG9nQ2FsbGJhY2sgLSBBbiBvcHRpb25hbCBjdXN0b20gbG9nIGhhbmRsZXIgdGhhdCBleGVjdXRlcyB1c2VyIGNvZGUgd2hlbmV2ZXJcclxuICogdGhlIEZpcmViYXNlIFNESyBtYWtlcyBhIGxvZ2dpbmcgY2FsbC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gb25Mb2cobG9nQ2FsbGJhY2ssIG9wdGlvbnMpIHtcclxuICAgIGlmIChsb2dDYWxsYmFjayAhPT0gbnVsbCAmJiB0eXBlb2YgbG9nQ2FsbGJhY2sgIT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImludmFsaWQtbG9nLWFyZ3VtZW50XCIgLyogQXBwRXJyb3IuSU5WQUxJRF9MT0dfQVJHVU1FTlQgKi8pO1xyXG4gICAgfVxyXG4gICAgc2V0VXNlckxvZ0hhbmRsZXIobG9nQ2FsbGJhY2ssIG9wdGlvbnMpO1xyXG59XHJcbi8qKlxyXG4gKiBTZXRzIGxvZyBsZXZlbCBmb3IgYWxsIEZpcmViYXNlIFNES3MuXHJcbiAqXHJcbiAqIEFsbCBvZiB0aGUgbG9nIHR5cGVzIGFib3ZlIHRoZSBjdXJyZW50IGxvZyBsZXZlbCBhcmUgY2FwdHVyZWQgKGkuZS4gaWZcclxuICogeW91IHNldCB0aGUgbG9nIGxldmVsIHRvIGBpbmZvYCwgZXJyb3JzIGFyZSBsb2dnZWQsIGJ1dCBgZGVidWdgIGFuZFxyXG4gKiBgdmVyYm9zZWAgbG9ncyBhcmUgbm90KS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gc2V0TG9nTGV2ZWwobG9nTGV2ZWwpIHtcclxuICAgIHNldExvZ0xldmVsJDEobG9nTGV2ZWwpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IERCX05BTUUgPSAnZmlyZWJhc2UtaGVhcnRiZWF0LWRhdGFiYXNlJztcclxuY29uc3QgREJfVkVSU0lPTiA9IDE7XHJcbmNvbnN0IFNUT1JFX05BTUUgPSAnZmlyZWJhc2UtaGVhcnRiZWF0LXN0b3JlJztcclxubGV0IGRiUHJvbWlzZSA9IG51bGw7XHJcbmZ1bmN0aW9uIGdldERiUHJvbWlzZSgpIHtcclxuICAgIGlmICghZGJQcm9taXNlKSB7XHJcbiAgICAgICAgZGJQcm9taXNlID0gb3BlbkRCKERCX05BTUUsIERCX1ZFUlNJT04sIHtcclxuICAgICAgICAgICAgdXBncmFkZTogKGRiLCBvbGRWZXJzaW9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyBXZSBkb24ndCB1c2UgJ2JyZWFrJyBpbiB0aGlzIHN3aXRjaCBzdGF0ZW1lbnQsIHRoZSBmYWxsLXRocm91Z2hcclxuICAgICAgICAgICAgICAgIC8vIGJlaGF2aW9yIGlzIHdoYXQgd2Ugd2FudCwgYmVjYXVzZSBpZiB0aGVyZSBhcmUgbXVsdGlwbGUgdmVyc2lvbnMgYmV0d2VlblxyXG4gICAgICAgICAgICAgICAgLy8gdGhlIG9sZCB2ZXJzaW9uIGFuZCB0aGUgY3VycmVudCB2ZXJzaW9uLCB3ZSB3YW50IEFMTCB0aGUgbWlncmF0aW9uc1xyXG4gICAgICAgICAgICAgICAgLy8gdGhhdCBjb3JyZXNwb25kIHRvIHRob3NlIHZlcnNpb25zIHRvIHJ1biwgbm90IG9ubHkgdGhlIGxhc3Qgb25lLlxyXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlZmF1bHQtY2FzZVxyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChvbGRWZXJzaW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYi5jcmVhdGVPYmplY3RTdG9yZShTVE9SRV9OQU1FKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pLmNhdGNoKGUgPT4ge1xyXG4gICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImlkYi1vcGVuXCIgLyogQXBwRXJyb3IuSURCX09QRU4gKi8sIHtcclxuICAgICAgICAgICAgICAgIG9yaWdpbmFsRXJyb3JNZXNzYWdlOiBlLm1lc3NhZ2VcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZGJQcm9taXNlO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIHJlYWRIZWFydGJlYXRzRnJvbUluZGV4ZWREQihhcHApIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgZGIgPSBhd2FpdCBnZXREYlByb21pc2UoKTtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYlxyXG4gICAgICAgICAgICAudHJhbnNhY3Rpb24oU1RPUkVfTkFNRSlcclxuICAgICAgICAgICAgLm9iamVjdFN0b3JlKFNUT1JFX05BTUUpXHJcbiAgICAgICAgICAgIC5nZXQoY29tcHV0ZUtleShhcHApKTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEZpcmViYXNlRXJyb3IpIHtcclxuICAgICAgICAgICAgbG9nZ2VyLndhcm4oZS5tZXNzYWdlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGlkYkdldEVycm9yID0gRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJpZGItZ2V0XCIgLyogQXBwRXJyb3IuSURCX0dFVCAqLywge1xyXG4gICAgICAgICAgICAgICAgb3JpZ2luYWxFcnJvck1lc3NhZ2U6IGUgPT09IG51bGwgfHwgZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZS5tZXNzYWdlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBsb2dnZXIud2FybihpZGJHZXRFcnJvci5tZXNzYWdlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gd3JpdGVIZWFydGJlYXRzVG9JbmRleGVkREIoYXBwLCBoZWFydGJlYXRPYmplY3QpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgZGIgPSBhd2FpdCBnZXREYlByb21pc2UoKTtcclxuICAgICAgICBjb25zdCB0eCA9IGRiLnRyYW5zYWN0aW9uKFNUT1JFX05BTUUsICdyZWFkd3JpdGUnKTtcclxuICAgICAgICBjb25zdCBvYmplY3RTdG9yZSA9IHR4Lm9iamVjdFN0b3JlKFNUT1JFX05BTUUpO1xyXG4gICAgICAgIGF3YWl0IG9iamVjdFN0b3JlLnB1dChoZWFydGJlYXRPYmplY3QsIGNvbXB1dGVLZXkoYXBwKSk7XHJcbiAgICAgICAgYXdhaXQgdHguZG9uZTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBGaXJlYmFzZUVycm9yKSB7XHJcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKGUubWVzc2FnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBpZGJHZXRFcnJvciA9IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiaWRiLXNldFwiIC8qIEFwcEVycm9yLklEQl9XUklURSAqLywge1xyXG4gICAgICAgICAgICAgICAgb3JpZ2luYWxFcnJvck1lc3NhZ2U6IGUgPT09IG51bGwgfHwgZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZS5tZXNzYWdlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBsb2dnZXIud2FybihpZGJHZXRFcnJvci5tZXNzYWdlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gY29tcHV0ZUtleShhcHApIHtcclxuICAgIHJldHVybiBgJHthcHAubmFtZX0hJHthcHAub3B0aW9ucy5hcHBJZH1gO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IE1BWF9IRUFERVJfQllURVMgPSAxMDI0O1xyXG4vLyAzMCBkYXlzXHJcbmNvbnN0IFNUT1JFRF9IRUFSVEJFQVRfUkVURU5USU9OX01BWF9NSUxMSVMgPSAzMCAqIDI0ICogNjAgKiA2MCAqIDEwMDA7XHJcbmNsYXNzIEhlYXJ0YmVhdFNlcnZpY2VJbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKGNvbnRhaW5lcikge1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEluLW1lbW9yeSBjYWNoZSBmb3IgaGVhcnRiZWF0cywgdXNlZCBieSBnZXRIZWFydGJlYXRzSGVhZGVyKCkgdG8gZ2VuZXJhdGVcclxuICAgICAgICAgKiB0aGUgaGVhZGVyIHN0cmluZy5cclxuICAgICAgICAgKiBTdG9yZXMgb25lIHJlY29yZCBwZXIgZGF0ZS4gVGhpcyB3aWxsIGJlIGNvbnNvbGlkYXRlZCBpbnRvIHRoZSBzdGFuZGFyZFxyXG4gICAgICAgICAqIGZvcm1hdCBvZiBvbmUgcmVjb3JkIHBlciB1c2VyIGFnZW50IHN0cmluZyBiZWZvcmUgYmVpbmcgc2VudCBhcyBhIGhlYWRlci5cclxuICAgICAgICAgKiBQb3B1bGF0ZWQgZnJvbSBpbmRleGVkREIgd2hlbiB0aGUgY29udHJvbGxlciBpcyBpbnN0YW50aWF0ZWQgYW5kIHNob3VsZFxyXG4gICAgICAgICAqIGJlIGtlcHQgaW4gc3luYyB3aXRoIGluZGV4ZWREQi5cclxuICAgICAgICAgKiBMZWF2ZSBwdWJsaWMgZm9yIGVhc2llciB0ZXN0aW5nLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSA9IG51bGw7XHJcbiAgICAgICAgY29uc3QgYXBwID0gdGhpcy5jb250YWluZXIuZ2V0UHJvdmlkZXIoJ2FwcCcpLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgICAgIHRoaXMuX3N0b3JhZ2UgPSBuZXcgSGVhcnRiZWF0U3RvcmFnZUltcGwoYXBwKTtcclxuICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGVQcm9taXNlID0gdGhpcy5fc3RvcmFnZS5yZWFkKCkudGhlbihyZXN1bHQgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUgPSByZXN1bHQ7XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIENhbGxlZCB0byByZXBvcnQgYSBoZWFydGJlYXQuIFRoZSBmdW5jdGlvbiB3aWxsIGdlbmVyYXRlXHJcbiAgICAgKiBhIEhlYXJ0YmVhdHNCeVVzZXJBZ2VudCBvYmplY3QsIHVwZGF0ZSBoZWFydGJlYXRzQ2FjaGUsIGFuZCBwZXJzaXN0IGl0XHJcbiAgICAgKiB0byBJbmRleGVkREIuXHJcbiAgICAgKiBOb3RlIHRoYXQgd2Ugb25seSBzdG9yZSBvbmUgaGVhcnRiZWF0IHBlciBkYXkuIFNvIGlmIGEgaGVhcnRiZWF0IGZvciB0b2RheSBpc1xyXG4gICAgICogYWxyZWFkeSBsb2dnZWQsIHN1YnNlcXVlbnQgY2FsbHMgdG8gdGhpcyBmdW5jdGlvbiBpbiB0aGUgc2FtZSBkYXkgd2lsbCBiZSBpZ25vcmVkLlxyXG4gICAgICovXHJcbiAgICBhc3luYyB0cmlnZ2VySGVhcnRiZWF0KCkge1xyXG4gICAgICAgIHZhciBfYSwgX2I7XHJcbiAgICAgICAgY29uc3QgcGxhdGZvcm1Mb2dnZXIgPSB0aGlzLmNvbnRhaW5lclxyXG4gICAgICAgICAgICAuZ2V0UHJvdmlkZXIoJ3BsYXRmb3JtLWxvZ2dlcicpXHJcbiAgICAgICAgICAgIC5nZXRJbW1lZGlhdGUoKTtcclxuICAgICAgICAvLyBUaGlzIGlzIHRoZSBcIkZpcmViYXNlIHVzZXIgYWdlbnRcIiBzdHJpbmcgZnJvbSB0aGUgcGxhdGZvcm0gbG9nZ2VyXHJcbiAgICAgICAgLy8gc2VydmljZSwgbm90IHRoZSBicm93c2VyIHVzZXIgYWdlbnQuXHJcbiAgICAgICAgY29uc3QgYWdlbnQgPSBwbGF0Zm9ybUxvZ2dlci5nZXRQbGF0Zm9ybUluZm9TdHJpbmcoKTtcclxuICAgICAgICBjb25zdCBkYXRlID0gZ2V0VVRDRGF0ZVN0cmluZygpO1xyXG4gICAgICAgIGlmICgoKF9hID0gdGhpcy5faGVhcnRiZWF0c0NhY2hlKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuaGVhcnRiZWF0cykgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUgPSBhd2FpdCB0aGlzLl9oZWFydGJlYXRzQ2FjaGVQcm9taXNlO1xyXG4gICAgICAgICAgICAvLyBJZiB3ZSBmYWlsZWQgdG8gY29uc3RydWN0IGEgaGVhcnRiZWF0cyBjYWNoZSwgdGhlbiByZXR1cm4gaW1tZWRpYXRlbHkuXHJcbiAgICAgICAgICAgIGlmICgoKF9iID0gdGhpcy5faGVhcnRiZWF0c0NhY2hlKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuaGVhcnRiZWF0cykgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIERvIG5vdCBzdG9yZSBhIGhlYXJ0YmVhdCBpZiBvbmUgaXMgYWxyZWFkeSBzdG9yZWQgZm9yIHRoaXMgZGF5XHJcbiAgICAgICAgLy8gb3IgaWYgYSBoZWFkZXIgaGFzIGFscmVhZHkgYmVlbiBzZW50IHRvZGF5LlxyXG4gICAgICAgIGlmICh0aGlzLl9oZWFydGJlYXRzQ2FjaGUubGFzdFNlbnRIZWFydGJlYXREYXRlID09PSBkYXRlIHx8XHJcbiAgICAgICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5oZWFydGJlYXRzLnNvbWUoc2luZ2xlRGF0ZUhlYXJ0YmVhdCA9PiBzaW5nbGVEYXRlSGVhcnRiZWF0LmRhdGUgPT09IGRhdGUpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFRoZXJlIGlzIG5vIGVudHJ5IGZvciB0aGlzIGRhdGUuIENyZWF0ZSBvbmUuXHJcbiAgICAgICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5oZWFydGJlYXRzLnB1c2goeyBkYXRlLCBhZ2VudCB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gUmVtb3ZlIGVudHJpZXMgb2xkZXIgdGhhbiAzMCBkYXlzLlxyXG4gICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5oZWFydGJlYXRzID0gdGhpcy5faGVhcnRiZWF0c0NhY2hlLmhlYXJ0YmVhdHMuZmlsdGVyKHNpbmdsZURhdGVIZWFydGJlYXQgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBoYlRpbWVzdGFtcCA9IG5ldyBEYXRlKHNpbmdsZURhdGVIZWFydGJlYXQuZGF0ZSkudmFsdWVPZigpO1xyXG4gICAgICAgICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgICAgICByZXR1cm4gbm93IC0gaGJUaW1lc3RhbXAgPD0gU1RPUkVEX0hFQVJUQkVBVF9SRVRFTlRJT05fTUFYX01JTExJUztcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc3RvcmFnZS5vdmVyd3JpdGUodGhpcy5faGVhcnRiZWF0c0NhY2hlKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIGJhc2U2NCBlbmNvZGVkIHN0cmluZyB3aGljaCBjYW4gYmUgYXR0YWNoZWQgdG8gdGhlIGhlYXJ0YmVhdC1zcGVjaWZpYyBoZWFkZXIgZGlyZWN0bHkuXHJcbiAgICAgKiBJdCBhbHNvIGNsZWFycyBhbGwgaGVhcnRiZWF0cyBmcm9tIG1lbW9yeSBhcyB3ZWxsIGFzIGluIEluZGV4ZWREQi5cclxuICAgICAqXHJcbiAgICAgKiBOT1RFOiBDb25zdW1pbmcgcHJvZHVjdCBTREtzIHNob3VsZCBub3Qgc2VuZCB0aGUgaGVhZGVyIGlmIHRoaXMgbWV0aG9kXHJcbiAgICAgKiByZXR1cm5zIGFuIGVtcHR5IHN0cmluZy5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgZ2V0SGVhcnRiZWF0c0hlYWRlcigpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgaWYgKHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9oZWFydGJlYXRzQ2FjaGVQcm9taXNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBJZiBpdCdzIHN0aWxsIG51bGwgb3IgdGhlIGFycmF5IGlzIGVtcHR5LCB0aGVyZSBpcyBubyBkYXRhIHRvIHNlbmQuXHJcbiAgICAgICAgaWYgKCgoX2EgPSB0aGlzLl9oZWFydGJlYXRzQ2FjaGUpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5oZWFydGJlYXRzKSA9PSBudWxsIHx8XHJcbiAgICAgICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5oZWFydGJlYXRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGRhdGUgPSBnZXRVVENEYXRlU3RyaW5nKCk7XHJcbiAgICAgICAgLy8gRXh0cmFjdCBhcyBtYW55IGhlYXJ0YmVhdHMgZnJvbSB0aGUgY2FjaGUgYXMgd2lsbCBmaXQgdW5kZXIgdGhlIHNpemUgbGltaXQuXHJcbiAgICAgICAgY29uc3QgeyBoZWFydGJlYXRzVG9TZW5kLCB1bnNlbnRFbnRyaWVzIH0gPSBleHRyYWN0SGVhcnRiZWF0c0ZvckhlYWRlcih0aGlzLl9oZWFydGJlYXRzQ2FjaGUuaGVhcnRiZWF0cyk7XHJcbiAgICAgICAgY29uc3QgaGVhZGVyU3RyaW5nID0gYmFzZTY0dXJsRW5jb2RlV2l0aG91dFBhZGRpbmcoSlNPTi5zdHJpbmdpZnkoeyB2ZXJzaW9uOiAyLCBoZWFydGJlYXRzOiBoZWFydGJlYXRzVG9TZW5kIH0pKTtcclxuICAgICAgICAvLyBTdG9yZSBsYXN0IHNlbnQgZGF0ZSB0byBwcmV2ZW50IGFub3RoZXIgYmVpbmcgbG9nZ2VkL3NlbnQgZm9yIHRoZSBzYW1lIGRheS5cclxuICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUubGFzdFNlbnRIZWFydGJlYXREYXRlID0gZGF0ZTtcclxuICAgICAgICBpZiAodW5zZW50RW50cmllcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIC8vIFN0b3JlIGFueSB1bnNlbnQgZW50cmllcyBpZiB0aGV5IGV4aXN0LlxyXG4gICAgICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUuaGVhcnRiZWF0cyA9IHVuc2VudEVudHJpZXM7XHJcbiAgICAgICAgICAgIC8vIFRoaXMgc2VlbXMgbW9yZSBsaWtlbHkgdGhhbiBlbXB0eWluZyB0aGUgYXJyYXkgKGJlbG93KSB0byBsZWFkIHRvIHNvbWUgb2RkIHN0YXRlXHJcbiAgICAgICAgICAgIC8vIHNpbmNlIHRoZSBjYWNoZSBpc24ndCBlbXB0eSBhbmQgdGhpcyB3aWxsIGJlIGNhbGxlZCBhZ2FpbiBvbiB0aGUgbmV4dCByZXF1ZXN0LFxyXG4gICAgICAgICAgICAvLyBhbmQgaXMgcHJvYmFibHkgc2FmZXN0IGlmIHdlIGF3YWl0IGl0LlxyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9zdG9yYWdlLm92ZXJ3cml0ZSh0aGlzLl9oZWFydGJlYXRzQ2FjaGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlLmhlYXJ0YmVhdHMgPSBbXTtcclxuICAgICAgICAgICAgLy8gRG8gbm90IHdhaXQgZm9yIHRoaXMsIHRvIHJlZHVjZSBsYXRlbmN5LlxyXG4gICAgICAgICAgICB2b2lkIHRoaXMuX3N0b3JhZ2Uub3ZlcndyaXRlKHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBoZWFkZXJTdHJpbmc7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gZ2V0VVRDRGF0ZVN0cmluZygpIHtcclxuICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKTtcclxuICAgIC8vIFJldHVybnMgZGF0ZSBmb3JtYXQgJ1lZWVktTU0tREQnXHJcbiAgICByZXR1cm4gdG9kYXkudG9JU09TdHJpbmcoKS5zdWJzdHJpbmcoMCwgMTApO1xyXG59XHJcbmZ1bmN0aW9uIGV4dHJhY3RIZWFydGJlYXRzRm9ySGVhZGVyKGhlYXJ0YmVhdHNDYWNoZSwgbWF4U2l6ZSA9IE1BWF9IRUFERVJfQllURVMpIHtcclxuICAgIC8vIEhlYXJ0YmVhdHMgZ3JvdXBlZCBieSB1c2VyIGFnZW50IGluIHRoZSBzdGFuZGFyZCBmb3JtYXQgdG8gYmUgc2VudCBpblxyXG4gICAgLy8gdGhlIGhlYWRlci5cclxuICAgIGNvbnN0IGhlYXJ0YmVhdHNUb1NlbmQgPSBbXTtcclxuICAgIC8vIFNpbmdsZSBkYXRlIGZvcm1hdCBoZWFydGJlYXRzIHRoYXQgYXJlIG5vdCBzZW50LlxyXG4gICAgbGV0IHVuc2VudEVudHJpZXMgPSBoZWFydGJlYXRzQ2FjaGUuc2xpY2UoKTtcclxuICAgIGZvciAoY29uc3Qgc2luZ2xlRGF0ZUhlYXJ0YmVhdCBvZiBoZWFydGJlYXRzQ2FjaGUpIHtcclxuICAgICAgICAvLyBMb29rIGZvciBhbiBleGlzdGluZyBlbnRyeSB3aXRoIHRoZSBzYW1lIHVzZXIgYWdlbnQuXHJcbiAgICAgICAgY29uc3QgaGVhcnRiZWF0RW50cnkgPSBoZWFydGJlYXRzVG9TZW5kLmZpbmQoaGIgPT4gaGIuYWdlbnQgPT09IHNpbmdsZURhdGVIZWFydGJlYXQuYWdlbnQpO1xyXG4gICAgICAgIGlmICghaGVhcnRiZWF0RW50cnkpIHtcclxuICAgICAgICAgICAgLy8gSWYgbm8gZW50cnkgZm9yIHRoaXMgdXNlciBhZ2VudCBleGlzdHMsIGNyZWF0ZSBvbmUuXHJcbiAgICAgICAgICAgIGhlYXJ0YmVhdHNUb1NlbmQucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBhZ2VudDogc2luZ2xlRGF0ZUhlYXJ0YmVhdC5hZ2VudCxcclxuICAgICAgICAgICAgICAgIGRhdGVzOiBbc2luZ2xlRGF0ZUhlYXJ0YmVhdC5kYXRlXVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaWYgKGNvdW50Qnl0ZXMoaGVhcnRiZWF0c1RvU2VuZCkgPiBtYXhTaXplKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgaGVhZGVyIHdvdWxkIGV4Y2VlZCBtYXggc2l6ZSwgcmVtb3ZlIHRoZSBhZGRlZCBoZWFydGJlYXRcclxuICAgICAgICAgICAgICAgIC8vIGVudHJ5IGFuZCBzdG9wIGFkZGluZyB0byB0aGUgaGVhZGVyLlxyXG4gICAgICAgICAgICAgICAgaGVhcnRiZWF0c1RvU2VuZC5wb3AoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBoZWFydGJlYXRFbnRyeS5kYXRlcy5wdXNoKHNpbmdsZURhdGVIZWFydGJlYXQuZGF0ZSk7XHJcbiAgICAgICAgICAgIC8vIElmIHRoZSBoZWFkZXIgd291bGQgZXhjZWVkIG1heCBzaXplLCByZW1vdmUgdGhlIGFkZGVkIGRhdGVcclxuICAgICAgICAgICAgLy8gYW5kIHN0b3AgYWRkaW5nIHRvIHRoZSBoZWFkZXIuXHJcbiAgICAgICAgICAgIGlmIChjb3VudEJ5dGVzKGhlYXJ0YmVhdHNUb1NlbmQpID4gbWF4U2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgaGVhcnRiZWF0RW50cnkuZGF0ZXMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBQb3AgdW5zZW50IGVudHJ5IGZyb20gcXVldWUuIChTa2lwcGVkIGlmIGFkZGluZyB0aGUgZW50cnkgZXhjZWVkZWRcclxuICAgICAgICAvLyBxdW90YSBhbmQgdGhlIGxvb3AgYnJlYWtzIGVhcmx5LilcclxuICAgICAgICB1bnNlbnRFbnRyaWVzID0gdW5zZW50RW50cmllcy5zbGljZSgxKTtcclxuICAgIH1cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaGVhcnRiZWF0c1RvU2VuZCxcclxuICAgICAgICB1bnNlbnRFbnRyaWVzXHJcbiAgICB9O1xyXG59XHJcbmNsYXNzIEhlYXJ0YmVhdFN0b3JhZ2VJbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKGFwcCkge1xyXG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xyXG4gICAgICAgIHRoaXMuX2NhblVzZUluZGV4ZWREQlByb21pc2UgPSB0aGlzLnJ1bkluZGV4ZWREQkVudmlyb25tZW50Q2hlY2soKTtcclxuICAgIH1cclxuICAgIGFzeW5jIHJ1bkluZGV4ZWREQkVudmlyb25tZW50Q2hlY2soKSB7XHJcbiAgICAgICAgaWYgKCFpc0luZGV4ZWREQkF2YWlsYWJsZSgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWxpZGF0ZUluZGV4ZWREQk9wZW5hYmxlKClcclxuICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHRydWUpXHJcbiAgICAgICAgICAgICAgICAuY2F0Y2goKCkgPT4gZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUmVhZCBhbGwgaGVhcnRiZWF0cy5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgcmVhZCgpIHtcclxuICAgICAgICBjb25zdCBjYW5Vc2VJbmRleGVkREIgPSBhd2FpdCB0aGlzLl9jYW5Vc2VJbmRleGVkREJQcm9taXNlO1xyXG4gICAgICAgIGlmICghY2FuVXNlSW5kZXhlZERCKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IGhlYXJ0YmVhdHM6IFtdIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBpZGJIZWFydGJlYXRPYmplY3QgPSBhd2FpdCByZWFkSGVhcnRiZWF0c0Zyb21JbmRleGVkREIodGhpcy5hcHApO1xyXG4gICAgICAgICAgICBpZiAoaWRiSGVhcnRiZWF0T2JqZWN0ID09PSBudWxsIHx8IGlkYkhlYXJ0YmVhdE9iamVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogaWRiSGVhcnRiZWF0T2JqZWN0LmhlYXJ0YmVhdHMpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBpZGJIZWFydGJlYXRPYmplY3Q7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4geyBoZWFydGJlYXRzOiBbXSB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gb3ZlcndyaXRlIHRoZSBzdG9yYWdlIHdpdGggdGhlIHByb3ZpZGVkIGhlYXJ0YmVhdHNcclxuICAgIGFzeW5jIG92ZXJ3cml0ZShoZWFydGJlYXRzT2JqZWN0KSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIGNvbnN0IGNhblVzZUluZGV4ZWREQiA9IGF3YWl0IHRoaXMuX2NhblVzZUluZGV4ZWREQlByb21pc2U7XHJcbiAgICAgICAgaWYgKCFjYW5Vc2VJbmRleGVkREIpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdIZWFydGJlYXRzT2JqZWN0ID0gYXdhaXQgdGhpcy5yZWFkKCk7XHJcbiAgICAgICAgICAgIHJldHVybiB3cml0ZUhlYXJ0YmVhdHNUb0luZGV4ZWREQih0aGlzLmFwcCwge1xyXG4gICAgICAgICAgICAgICAgbGFzdFNlbnRIZWFydGJlYXREYXRlOiAoX2EgPSBoZWFydGJlYXRzT2JqZWN0Lmxhc3RTZW50SGVhcnRiZWF0RGF0ZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogZXhpc3RpbmdIZWFydGJlYXRzT2JqZWN0Lmxhc3RTZW50SGVhcnRiZWF0RGF0ZSxcclxuICAgICAgICAgICAgICAgIGhlYXJ0YmVhdHM6IGhlYXJ0YmVhdHNPYmplY3QuaGVhcnRiZWF0c1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBhZGQgaGVhcnRiZWF0c1xyXG4gICAgYXN5bmMgYWRkKGhlYXJ0YmVhdHNPYmplY3QpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgY29uc3QgY2FuVXNlSW5kZXhlZERCID0gYXdhaXQgdGhpcy5fY2FuVXNlSW5kZXhlZERCUHJvbWlzZTtcclxuICAgICAgICBpZiAoIWNhblVzZUluZGV4ZWREQikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ0hlYXJ0YmVhdHNPYmplY3QgPSBhd2FpdCB0aGlzLnJlYWQoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHdyaXRlSGVhcnRiZWF0c1RvSW5kZXhlZERCKHRoaXMuYXBwLCB7XHJcbiAgICAgICAgICAgICAgICBsYXN0U2VudEhlYXJ0YmVhdERhdGU6IChfYSA9IGhlYXJ0YmVhdHNPYmplY3QubGFzdFNlbnRIZWFydGJlYXREYXRlKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBleGlzdGluZ0hlYXJ0YmVhdHNPYmplY3QubGFzdFNlbnRIZWFydGJlYXREYXRlLFxyXG4gICAgICAgICAgICAgICAgaGVhcnRiZWF0czogW1xyXG4gICAgICAgICAgICAgICAgICAgIC4uLmV4aXN0aW5nSGVhcnRiZWF0c09iamVjdC5oZWFydGJlYXRzLFxyXG4gICAgICAgICAgICAgICAgICAgIC4uLmhlYXJ0YmVhdHNPYmplY3QuaGVhcnRiZWF0c1xyXG4gICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIENhbGN1bGF0ZSBieXRlcyBvZiBhIEhlYXJ0YmVhdHNCeVVzZXJBZ2VudCBhcnJheSBhZnRlciBiZWluZyB3cmFwcGVkXHJcbiAqIGluIGEgcGxhdGZvcm0gbG9nZ2luZyBoZWFkZXIgSlNPTiBvYmplY3QsIHN0cmluZ2lmaWVkLCBhbmQgY29udmVydGVkXHJcbiAqIHRvIGJhc2UgNjQuXHJcbiAqL1xyXG5mdW5jdGlvbiBjb3VudEJ5dGVzKGhlYXJ0YmVhdHNDYWNoZSkge1xyXG4gICAgLy8gYmFzZTY0IGhhcyBhIHJlc3RyaWN0ZWQgc2V0IG9mIGNoYXJhY3RlcnMsIGFsbCBvZiB3aGljaCBzaG91bGQgYmUgMSBieXRlLlxyXG4gICAgcmV0dXJuIGJhc2U2NHVybEVuY29kZVdpdGhvdXRQYWRkaW5nKFxyXG4gICAgLy8gaGVhcnRiZWF0c0NhY2hlIHdyYXBwZXIgcHJvcGVydGllc1xyXG4gICAgSlNPTi5zdHJpbmdpZnkoeyB2ZXJzaW9uOiAyLCBoZWFydGJlYXRzOiBoZWFydGJlYXRzQ2FjaGUgfSkpLmxlbmd0aDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiByZWdpc3RlckNvcmVDb21wb25lbnRzKHZhcmlhbnQpIHtcclxuICAgIF9yZWdpc3RlckNvbXBvbmVudChuZXcgQ29tcG9uZW50KCdwbGF0Zm9ybS1sb2dnZXInLCBjb250YWluZXIgPT4gbmV3IFBsYXRmb3JtTG9nZ2VyU2VydmljZUltcGwoY29udGFpbmVyKSwgXCJQUklWQVRFXCIgLyogQ29tcG9uZW50VHlwZS5QUklWQVRFICovKSk7XHJcbiAgICBfcmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudCgnaGVhcnRiZWF0JywgY29udGFpbmVyID0+IG5ldyBIZWFydGJlYXRTZXJ2aWNlSW1wbChjb250YWluZXIpLCBcIlBSSVZBVEVcIiAvKiBDb21wb25lbnRUeXBlLlBSSVZBVEUgKi8pKTtcclxuICAgIC8vIFJlZ2lzdGVyIGBhcHBgIHBhY2thZ2UuXHJcbiAgICByZWdpc3RlclZlcnNpb24obmFtZSRvLCB2ZXJzaW9uJDEsIHZhcmlhbnQpO1xyXG4gICAgLy8gQlVJTERfVEFSR0VUIHdpbGwgYmUgcmVwbGFjZWQgYnkgdmFsdWVzIGxpa2UgZXNtNSwgZXNtMjAxNywgY2pzNSwgZXRjIGR1cmluZyB0aGUgY29tcGlsYXRpb25cclxuICAgIHJlZ2lzdGVyVmVyc2lvbihuYW1lJG8sIHZlcnNpb24kMSwgJ2VzbTIwMTcnKTtcclxuICAgIC8vIFJlZ2lzdGVyIHBsYXRmb3JtIFNESyBpZGVudGlmaWVyIChubyB2ZXJzaW9uKS5cclxuICAgIHJlZ2lzdGVyVmVyc2lvbignZmlyZS1qcycsICcnKTtcclxufVxuXG4vKipcclxuICogRmlyZWJhc2UgQXBwXHJcbiAqXHJcbiAqIEByZW1hcmtzIFRoaXMgcGFja2FnZSBjb29yZGluYXRlcyB0aGUgY29tbXVuaWNhdGlvbiBiZXR3ZWVuIHRoZSBkaWZmZXJlbnQgRmlyZWJhc2UgY29tcG9uZW50c1xyXG4gKiBAcGFja2FnZURvY3VtZW50YXRpb25cclxuICovXHJcbnJlZ2lzdGVyQ29yZUNvbXBvbmVudHMoJycpO1xuXG5leHBvcnQgeyBTREtfVkVSU0lPTiwgREVGQVVMVF9FTlRSWV9OQU1FIGFzIF9ERUZBVUxUX0VOVFJZX05BTUUsIF9hZGRDb21wb25lbnQsIF9hZGRPck92ZXJ3cml0ZUNvbXBvbmVudCwgX2FwcHMsIF9jbGVhckNvbXBvbmVudHMsIF9jb21wb25lbnRzLCBfZ2V0UHJvdmlkZXIsIF9yZWdpc3RlckNvbXBvbmVudCwgX3JlbW92ZVNlcnZpY2VJbnN0YW5jZSwgZGVsZXRlQXBwLCBnZXRBcHAsIGdldEFwcHMsIGluaXRpYWxpemVBcHAsIG9uTG9nLCByZWdpc3RlclZlcnNpb24sIHNldExvZ0xldmVsIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20yMDE3LmpzLm1hcFxuIiwidmFyIGNvbW1vbmpzR2xvYmFsID0gdHlwZW9mIGdsb2JhbFRoaXMgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsVGhpcyA6IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93IDogdHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgPyBzZWxmIDoge307XG5cbnZhciBlc20gPSB7fTtcblxuLypcblxuIENvcHlyaWdodCBUaGUgQ2xvc3VyZSBMaWJyYXJ5IEF1dGhvcnMuXG4gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcbiovXG5cbnZhciBrLGdvb2c9Z29vZ3x8e30sbD1jb21tb25qc0dsb2JhbHx8c2VsZjtmdW5jdGlvbiBhYShhKXt2YXIgYj10eXBlb2YgYTtiPVwib2JqZWN0XCIhPWI/YjphP0FycmF5LmlzQXJyYXkoYSk/XCJhcnJheVwiOmI6XCJudWxsXCI7cmV0dXJuIFwiYXJyYXlcIj09Ynx8XCJvYmplY3RcIj09YiYmXCJudW1iZXJcIj09dHlwZW9mIGEubGVuZ3RofWZ1bmN0aW9uIHAoYSl7dmFyIGI9dHlwZW9mIGE7cmV0dXJuIFwib2JqZWN0XCI9PWImJm51bGwhPWF8fFwiZnVuY3Rpb25cIj09Yn1mdW5jdGlvbiBiYShhKXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGEsY2EpJiZhW2NhXXx8KGFbY2FdPSsrZGEpfXZhciBjYT1cImNsb3N1cmVfdWlkX1wiKygxRTkqTWF0aC5yYW5kb20oKT4+PjApLGRhPTA7ZnVuY3Rpb24gZWEoYSxiLGMpe3JldHVybiBhLmNhbGwuYXBwbHkoYS5iaW5kLGFyZ3VtZW50cyl9XG5mdW5jdGlvbiBmYShhLGIsYyl7aWYoIWEpdGhyb3cgRXJyb3IoKTtpZigyPGFyZ3VtZW50cy5sZW5ndGgpe3ZhciBkPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywyKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO0FycmF5LnByb3RvdHlwZS51bnNoaWZ0LmFwcGx5KGUsZCk7cmV0dXJuIGEuYXBwbHkoYixlKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGEuYXBwbHkoYixhcmd1bWVudHMpfX1mdW5jdGlvbiBxKGEsYixjKXtGdW5jdGlvbi5wcm90b3R5cGUuYmluZCYmLTEhPUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLnRvU3RyaW5nKCkuaW5kZXhPZihcIm5hdGl2ZSBjb2RlXCIpP3E9ZWE6cT1mYTtyZXR1cm4gcS5hcHBseShudWxsLGFyZ3VtZW50cyl9XG5mdW5jdGlvbiBoYShhLGIpe3ZhciBjPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZD1jLnNsaWNlKCk7ZC5wdXNoLmFwcGx5KGQsYXJndW1lbnRzKTtyZXR1cm4gYS5hcHBseSh0aGlzLGQpfX1mdW5jdGlvbiByKGEsYil7ZnVuY3Rpb24gYygpe31jLnByb3RvdHlwZT1iLnByb3RvdHlwZTthLiQ9Yi5wcm90b3R5cGU7YS5wcm90b3R5cGU9bmV3IGM7YS5wcm90b3R5cGUuY29uc3RydWN0b3I9YTthLmFjPWZ1bmN0aW9uKGQsZSxmKXtmb3IodmFyIGg9QXJyYXkoYXJndW1lbnRzLmxlbmd0aC0yKSxuPTI7bjxhcmd1bWVudHMubGVuZ3RoO24rKyloW24tMl09YXJndW1lbnRzW25dO3JldHVybiBiLnByb3RvdHlwZVtlXS5hcHBseShkLGgpfTt9ZnVuY3Rpb24gdigpe3RoaXMucz10aGlzLnM7dGhpcy5vPXRoaXMubzt9dmFyIGlhPTA7di5wcm90b3R5cGUucz0hMTt2LnByb3RvdHlwZS5zYT1mdW5jdGlvbigpe2lmKCF0aGlzLnMmJih0aGlzLnM9ITAsdGhpcy5OKCksMCE9aWEpKXtiYSh0aGlzKTt9fTt2LnByb3RvdHlwZS5OPWZ1bmN0aW9uKCl7aWYodGhpcy5vKWZvcig7dGhpcy5vLmxlbmd0aDspdGhpcy5vLnNoaWZ0KCkoKTt9O2NvbnN0IGthPUFycmF5LnByb3RvdHlwZS5pbmRleE9mP2Z1bmN0aW9uKGEsYil7cmV0dXJuIEFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwoYSxiLHZvaWQgMCl9OmZ1bmN0aW9uKGEsYil7aWYoXCJzdHJpbmdcIj09PXR5cGVvZiBhKXJldHVybiBcInN0cmluZ1wiIT09dHlwZW9mIGJ8fDEhPWIubGVuZ3RoPy0xOmEuaW5kZXhPZihiLDApO2ZvcihsZXQgYz0wO2M8YS5sZW5ndGg7YysrKWlmKGMgaW4gYSYmYVtjXT09PWIpcmV0dXJuIGM7cmV0dXJuIC0xfTtmdW5jdGlvbiBtYShhKXtjb25zdCBiPWEubGVuZ3RoO2lmKDA8Yil7Y29uc3QgYz1BcnJheShiKTtmb3IobGV0IGQ9MDtkPGI7ZCsrKWNbZF09YVtkXTtyZXR1cm4gY31yZXR1cm4gW119XG5mdW5jdGlvbiBuYShhLGIpe2ZvcihsZXQgYz0xO2M8YXJndW1lbnRzLmxlbmd0aDtjKyspe2NvbnN0IGQ9YXJndW1lbnRzW2NdO2lmKGFhKGQpKXtjb25zdCBlPWEubGVuZ3RofHwwLGY9ZC5sZW5ndGh8fDA7YS5sZW5ndGg9ZStmO2ZvcihsZXQgaD0wO2g8ZjtoKyspYVtlK2hdPWRbaF07fWVsc2UgYS5wdXNoKGQpO319ZnVuY3Rpb24gdyhhLGIpe3RoaXMudHlwZT1hO3RoaXMuZz10aGlzLnRhcmdldD1iO3RoaXMuZGVmYXVsdFByZXZlbnRlZD0hMTt9dy5wcm90b3R5cGUuaD1mdW5jdGlvbigpe3RoaXMuZGVmYXVsdFByZXZlbnRlZD0hMDt9O3ZhciBvYT1mdW5jdGlvbigpe2lmKCFsLmFkZEV2ZW50TGlzdGVuZXJ8fCFPYmplY3QuZGVmaW5lUHJvcGVydHkpcmV0dXJuICExO3ZhciBhPSExLGI9T2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LFwicGFzc2l2ZVwiLHtnZXQ6ZnVuY3Rpb24oKXthPSEwO319KTt0cnl7Y29uc3QgYz0oKT0+e307bC5hZGRFdmVudExpc3RlbmVyKFwidGVzdFwiLGMsYik7bC5yZW1vdmVFdmVudExpc3RlbmVyKFwidGVzdFwiLGMsYik7fWNhdGNoKGMpe31yZXR1cm4gYX0oKTtmdW5jdGlvbiB4KGEpe3JldHVybiAvXltcXHNcXHhhMF0qJC8udGVzdChhKX1mdW5jdGlvbiBwYSgpe3ZhciBhPWwubmF2aWdhdG9yO3JldHVybiBhJiYoYT1hLnVzZXJBZ2VudCk/YTpcIlwifWZ1bmN0aW9uIHkoYSl7cmV0dXJuIC0xIT1wYSgpLmluZGV4T2YoYSl9ZnVuY3Rpb24gcWEoYSl7cWFbXCIgXCJdKGEpO3JldHVybiBhfXFhW1wiIFwiXT1mdW5jdGlvbigpe307ZnVuY3Rpb24gcmEoYSxiKXt2YXIgYz1zYTtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGMsYSk/Y1thXTpjW2FdPWIoYSl9dmFyIHRhPXkoXCJPcGVyYVwiKSx6PXkoXCJUcmlkZW50XCIpfHx5KFwiTVNJRVwiKSx1YT15KFwiRWRnZVwiKSx2YT11YXx8eix3YT15KFwiR2Vja29cIikmJiEoLTEhPXBhKCkudG9Mb3dlckNhc2UoKS5pbmRleE9mKFwid2Via2l0XCIpJiYheShcIkVkZ2VcIikpJiYhKHkoXCJUcmlkZW50XCIpfHx5KFwiTVNJRVwiKSkmJiF5KFwiRWRnZVwiKSx4YT0tMSE9cGEoKS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoXCJ3ZWJraXRcIikmJiF5KFwiRWRnZVwiKTtmdW5jdGlvbiB5YSgpe3ZhciBhPWwuZG9jdW1lbnQ7cmV0dXJuIGE/YS5kb2N1bWVudE1vZGU6dm9pZCAwfXZhciB6YTtcbmE6e3ZhciBBYT1cIlwiLEJhPWZ1bmN0aW9uKCl7dmFyIGE9cGEoKTtpZih3YSlyZXR1cm4gL3J2OihbXlxcKTtdKykoXFwpfDspLy5leGVjKGEpO2lmKHVhKXJldHVybiAvRWRnZVxcLyhbXFxkXFwuXSspLy5leGVjKGEpO2lmKHopcmV0dXJuIC9cXGIoPzpNU0lFfHJ2KVs6IF0oW15cXCk7XSspKFxcKXw7KS8uZXhlYyhhKTtpZih4YSlyZXR1cm4gL1dlYktpdFxcLyhcXFMrKS8uZXhlYyhhKTtpZih0YSlyZXR1cm4gLyg/OlZlcnNpb24pWyBcXC9dPyhcXFMrKS8uZXhlYyhhKX0oKTtCYSYmKEFhPUJhP0JhWzFdOlwiXCIpO2lmKHope3ZhciBDYT15YSgpO2lmKG51bGwhPUNhJiZDYT5wYXJzZUZsb2F0KEFhKSl7emE9U3RyaW5nKENhKTticmVhayBhfX16YT1BYTt9dmFyIERhO2lmKGwuZG9jdW1lbnQmJnope3ZhciBFYT15YSgpO0RhPUVhP0VhOnBhcnNlSW50KHphLDEwKXx8dm9pZCAwO31lbHNlIERhPXZvaWQgMDt2YXIgRmE9RGE7ZnVuY3Rpb24gQShhLGIpe3cuY2FsbCh0aGlzLGE/YS50eXBlOlwiXCIpO3RoaXMucmVsYXRlZFRhcmdldD10aGlzLmc9dGhpcy50YXJnZXQ9bnVsbDt0aGlzLmJ1dHRvbj10aGlzLnNjcmVlblk9dGhpcy5zY3JlZW5YPXRoaXMuY2xpZW50WT10aGlzLmNsaWVudFg9MDt0aGlzLmtleT1cIlwiO3RoaXMubWV0YUtleT10aGlzLnNoaWZ0S2V5PXRoaXMuYWx0S2V5PXRoaXMuY3RybEtleT0hMTt0aGlzLnN0YXRlPW51bGw7dGhpcy5wb2ludGVySWQ9MDt0aGlzLnBvaW50ZXJUeXBlPVwiXCI7dGhpcy5pPW51bGw7aWYoYSl7dmFyIGM9dGhpcy50eXBlPWEudHlwZSxkPWEuY2hhbmdlZFRvdWNoZXMmJmEuY2hhbmdlZFRvdWNoZXMubGVuZ3RoP2EuY2hhbmdlZFRvdWNoZXNbMF06bnVsbDt0aGlzLnRhcmdldD1hLnRhcmdldHx8YS5zcmNFbGVtZW50O3RoaXMuZz1iO2lmKGI9YS5yZWxhdGVkVGFyZ2V0KXtpZih3YSl7YTp7dHJ5e3FhKGIubm9kZU5hbWUpO3ZhciBlPSEwO2JyZWFrIGF9Y2F0Y2goZil7fWU9XG4hMTt9ZXx8KGI9bnVsbCk7fX1lbHNlIFwibW91c2VvdmVyXCI9PWM/Yj1hLmZyb21FbGVtZW50OlwibW91c2VvdXRcIj09YyYmKGI9YS50b0VsZW1lbnQpO3RoaXMucmVsYXRlZFRhcmdldD1iO2Q/KHRoaXMuY2xpZW50WD12b2lkIDAhPT1kLmNsaWVudFg/ZC5jbGllbnRYOmQucGFnZVgsdGhpcy5jbGllbnRZPXZvaWQgMCE9PWQuY2xpZW50WT9kLmNsaWVudFk6ZC5wYWdlWSx0aGlzLnNjcmVlblg9ZC5zY3JlZW5YfHwwLHRoaXMuc2NyZWVuWT1kLnNjcmVlbll8fDApOih0aGlzLmNsaWVudFg9dm9pZCAwIT09YS5jbGllbnRYP2EuY2xpZW50WDphLnBhZ2VYLHRoaXMuY2xpZW50WT12b2lkIDAhPT1hLmNsaWVudFk/YS5jbGllbnRZOmEucGFnZVksdGhpcy5zY3JlZW5YPWEuc2NyZWVuWHx8MCx0aGlzLnNjcmVlblk9YS5zY3JlZW5ZfHwwKTt0aGlzLmJ1dHRvbj1hLmJ1dHRvbjt0aGlzLmtleT1hLmtleXx8XCJcIjt0aGlzLmN0cmxLZXk9YS5jdHJsS2V5O3RoaXMuYWx0S2V5PWEuYWx0S2V5O3RoaXMuc2hpZnRLZXk9XG5hLnNoaWZ0S2V5O3RoaXMubWV0YUtleT1hLm1ldGFLZXk7dGhpcy5wb2ludGVySWQ9YS5wb2ludGVySWR8fDA7dGhpcy5wb2ludGVyVHlwZT1cInN0cmluZ1wiPT09dHlwZW9mIGEucG9pbnRlclR5cGU/YS5wb2ludGVyVHlwZTpHYVthLnBvaW50ZXJUeXBlXXx8XCJcIjt0aGlzLnN0YXRlPWEuc3RhdGU7dGhpcy5pPWE7YS5kZWZhdWx0UHJldmVudGVkJiZBLiQuaC5jYWxsKHRoaXMpO319cihBLHcpO3ZhciBHYT17MjpcInRvdWNoXCIsMzpcInBlblwiLDQ6XCJtb3VzZVwifTtBLnByb3RvdHlwZS5oPWZ1bmN0aW9uKCl7QS4kLmguY2FsbCh0aGlzKTt2YXIgYT10aGlzLmk7YS5wcmV2ZW50RGVmYXVsdD9hLnByZXZlbnREZWZhdWx0KCk6YS5yZXR1cm5WYWx1ZT0hMTt9O3ZhciBIYT1cImNsb3N1cmVfbGlzdGVuYWJsZV9cIisoMUU2Kk1hdGgucmFuZG9tKCl8MCk7dmFyIElhPTA7ZnVuY3Rpb24gSmEoYSxiLGMsZCxlKXt0aGlzLmxpc3RlbmVyPWE7dGhpcy5wcm94eT1udWxsO3RoaXMuc3JjPWI7dGhpcy50eXBlPWM7dGhpcy5jYXB0dXJlPSEhZDt0aGlzLmxhPWU7dGhpcy5rZXk9KytJYTt0aGlzLmZhPXRoaXMuaWE9ITE7fWZ1bmN0aW9uIE1hKGEpe2EuZmE9ITA7YS5saXN0ZW5lcj1udWxsO2EucHJveHk9bnVsbDthLnNyYz1udWxsO2EubGE9bnVsbDt9ZnVuY3Rpb24gTmEoYSxiLGMpe2Zvcihjb25zdCBkIGluIGEpYi5jYWxsKGMsYVtkXSxkLGEpO31mdW5jdGlvbiBPYShhLGIpe2Zvcihjb25zdCBjIGluIGEpYi5jYWxsKHZvaWQgMCxhW2NdLGMsYSk7fWZ1bmN0aW9uIFBhKGEpe2NvbnN0IGI9e307Zm9yKGNvbnN0IGMgaW4gYSliW2NdPWFbY107cmV0dXJuIGJ9Y29uc3QgUWE9XCJjb25zdHJ1Y3RvciBoYXNPd25Qcm9wZXJ0eSBpc1Byb3RvdHlwZU9mIHByb3BlcnR5SXNFbnVtZXJhYmxlIHRvTG9jYWxlU3RyaW5nIHRvU3RyaW5nIHZhbHVlT2ZcIi5zcGxpdChcIiBcIik7ZnVuY3Rpb24gUmEoYSxiKXtsZXQgYyxkO2ZvcihsZXQgZT0xO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspe2Q9YXJndW1lbnRzW2VdO2ZvcihjIGluIGQpYVtjXT1kW2NdO2ZvcihsZXQgZj0wO2Y8UWEubGVuZ3RoO2YrKyljPVFhW2ZdLE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChkLGMpJiYoYVtjXT1kW2NdKTt9fWZ1bmN0aW9uIFNhKGEpe3RoaXMuc3JjPWE7dGhpcy5nPXt9O3RoaXMuaD0wO31TYS5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGY9YS50b1N0cmluZygpO2E9dGhpcy5nW2ZdO2F8fChhPXRoaXMuZ1tmXT1bXSx0aGlzLmgrKyk7dmFyIGg9VGEoYSxiLGQsZSk7LTE8aD8oYj1hW2hdLGN8fChiLmlhPSExKSk6KGI9bmV3IEphKGIsdGhpcy5zcmMsZiwhIWQsZSksYi5pYT1jLGEucHVzaChiKSk7cmV0dXJuIGJ9O2Z1bmN0aW9uIFVhKGEsYil7dmFyIGM9Yi50eXBlO2lmKGMgaW4gYS5nKXt2YXIgZD1hLmdbY10sZT1rYShkLGIpLGY7KGY9MDw9ZSkmJkFycmF5LnByb3RvdHlwZS5zcGxpY2UuY2FsbChkLGUsMSk7ZiYmKE1hKGIpLDA9PWEuZ1tjXS5sZW5ndGgmJihkZWxldGUgYS5nW2NdLGEuaC0tKSk7fX1cbmZ1bmN0aW9uIFRhKGEsYixjLGQpe2Zvcih2YXIgZT0wO2U8YS5sZW5ndGg7KytlKXt2YXIgZj1hW2VdO2lmKCFmLmZhJiZmLmxpc3RlbmVyPT1iJiZmLmNhcHR1cmU9PSEhYyYmZi5sYT09ZClyZXR1cm4gZX1yZXR1cm4gLTF9dmFyIFZhPVwiY2xvc3VyZV9sbV9cIisoMUU2Kk1hdGgucmFuZG9tKCl8MCksV2E9e307ZnVuY3Rpb24gWWEoYSxiLGMsZCxlKXtpZihkJiZkLm9uY2UpcmV0dXJuIFphKGEsYixjLGQsZSk7aWYoQXJyYXkuaXNBcnJheShiKSl7Zm9yKHZhciBmPTA7ZjxiLmxlbmd0aDtmKyspWWEoYSxiW2ZdLGMsZCxlKTtyZXR1cm4gbnVsbH1jPSRhKGMpO3JldHVybiBhJiZhW0hhXT9hLk8oYixjLHAoZCk/ISFkLmNhcHR1cmU6ISFkLGUpOmFiKGEsYixjLCExLGQsZSl9XG5mdW5jdGlvbiBhYihhLGIsYyxkLGUsZil7aWYoIWIpdGhyb3cgRXJyb3IoXCJJbnZhbGlkIGV2ZW50IHR5cGVcIik7dmFyIGg9cChlKT8hIWUuY2FwdHVyZTohIWUsbj1iYihhKTtufHwoYVtWYV09bj1uZXcgU2EoYSkpO2M9bi5hZGQoYixjLGQsaCxmKTtpZihjLnByb3h5KXJldHVybiBjO2Q9Y2IoKTtjLnByb3h5PWQ7ZC5zcmM9YTtkLmxpc3RlbmVyPWM7aWYoYS5hZGRFdmVudExpc3RlbmVyKW9hfHwoZT1oKSx2b2lkIDA9PT1lJiYoZT0hMSksYS5hZGRFdmVudExpc3RlbmVyKGIudG9TdHJpbmcoKSxkLGUpO2Vsc2UgaWYoYS5hdHRhY2hFdmVudClhLmF0dGFjaEV2ZW50KGRiKGIudG9TdHJpbmcoKSksZCk7ZWxzZSBpZihhLmFkZExpc3RlbmVyJiZhLnJlbW92ZUxpc3RlbmVyKWEuYWRkTGlzdGVuZXIoZCk7ZWxzZSB0aHJvdyBFcnJvcihcImFkZEV2ZW50TGlzdGVuZXIgYW5kIGF0dGFjaEV2ZW50IGFyZSB1bmF2YWlsYWJsZS5cIik7cmV0dXJuIGN9XG5mdW5jdGlvbiBjYigpe2Z1bmN0aW9uIGEoYyl7cmV0dXJuIGIuY2FsbChhLnNyYyxhLmxpc3RlbmVyLGMpfWNvbnN0IGI9ZWI7cmV0dXJuIGF9ZnVuY3Rpb24gWmEoYSxiLGMsZCxlKXtpZihBcnJheS5pc0FycmF5KGIpKXtmb3IodmFyIGY9MDtmPGIubGVuZ3RoO2YrKylaYShhLGJbZl0sYyxkLGUpO3JldHVybiBudWxsfWM9JGEoYyk7cmV0dXJuIGEmJmFbSGFdP2EuUChiLGMscChkKT8hIWQuY2FwdHVyZTohIWQsZSk6YWIoYSxiLGMsITAsZCxlKX1cbmZ1bmN0aW9uIGZiKGEsYixjLGQsZSl7aWYoQXJyYXkuaXNBcnJheShiKSlmb3IodmFyIGY9MDtmPGIubGVuZ3RoO2YrKylmYihhLGJbZl0sYyxkLGUpO2Vsc2UgKGQ9cChkKT8hIWQuY2FwdHVyZTohIWQsYz0kYShjKSxhJiZhW0hhXSk/KGE9YS5pLGI9U3RyaW5nKGIpLnRvU3RyaW5nKCksYiBpbiBhLmcmJihmPWEuZ1tiXSxjPVRhKGYsYyxkLGUpLC0xPGMmJihNYShmW2NdKSxBcnJheS5wcm90b3R5cGUuc3BsaWNlLmNhbGwoZixjLDEpLDA9PWYubGVuZ3RoJiYoZGVsZXRlIGEuZ1tiXSxhLmgtLSkpKSk6YSYmKGE9YmIoYSkpJiYoYj1hLmdbYi50b1N0cmluZygpXSxhPS0xLGImJihhPVRhKGIsYyxkLGUpKSwoYz0tMTxhP2JbYV06bnVsbCkmJmdiKGMpKTt9XG5mdW5jdGlvbiBnYihhKXtpZihcIm51bWJlclwiIT09dHlwZW9mIGEmJmEmJiFhLmZhKXt2YXIgYj1hLnNyYztpZihiJiZiW0hhXSlVYShiLmksYSk7ZWxzZSB7dmFyIGM9YS50eXBlLGQ9YS5wcm94eTtiLnJlbW92ZUV2ZW50TGlzdGVuZXI/Yi5yZW1vdmVFdmVudExpc3RlbmVyKGMsZCxhLmNhcHR1cmUpOmIuZGV0YWNoRXZlbnQ/Yi5kZXRhY2hFdmVudChkYihjKSxkKTpiLmFkZExpc3RlbmVyJiZiLnJlbW92ZUxpc3RlbmVyJiZiLnJlbW92ZUxpc3RlbmVyKGQpOyhjPWJiKGIpKT8oVWEoYyxhKSwwPT1jLmgmJihjLnNyYz1udWxsLGJbVmFdPW51bGwpKTpNYShhKTt9fX1mdW5jdGlvbiBkYihhKXtyZXR1cm4gYSBpbiBXYT9XYVthXTpXYVthXT1cIm9uXCIrYX1mdW5jdGlvbiBlYihhLGIpe2lmKGEuZmEpYT0hMDtlbHNlIHtiPW5ldyBBKGIsdGhpcyk7dmFyIGM9YS5saXN0ZW5lcixkPWEubGF8fGEuc3JjO2EuaWEmJmdiKGEpO2E9Yy5jYWxsKGQsYik7fXJldHVybiBhfVxuZnVuY3Rpb24gYmIoYSl7YT1hW1ZhXTtyZXR1cm4gYSBpbnN0YW5jZW9mIFNhP2E6bnVsbH12YXIgaGI9XCJfX2Nsb3N1cmVfZXZlbnRzX2ZuX1wiKygxRTkqTWF0aC5yYW5kb20oKT4+PjApO2Z1bmN0aW9uICRhKGEpe2lmKFwiZnVuY3Rpb25cIj09PXR5cGVvZiBhKXJldHVybiBhO2FbaGJdfHwoYVtoYl09ZnVuY3Rpb24oYil7cmV0dXJuIGEuaGFuZGxlRXZlbnQoYil9KTtyZXR1cm4gYVtoYl19ZnVuY3Rpb24gQigpe3YuY2FsbCh0aGlzKTt0aGlzLmk9bmV3IFNhKHRoaXMpO3RoaXMuUz10aGlzO3RoaXMuSj1udWxsO31yKEIsdik7Qi5wcm90b3R5cGVbSGFdPSEwO0IucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXI9ZnVuY3Rpb24oYSxiLGMsZCl7ZmIodGhpcyxhLGIsYyxkKTt9O1xuZnVuY3Rpb24gQyhhLGIpe3ZhciBjLGQ9YS5KO2lmKGQpZm9yKGM9W107ZDtkPWQuSiljLnB1c2goZCk7YT1hLlM7ZD1iLnR5cGV8fGI7aWYoXCJzdHJpbmdcIj09PXR5cGVvZiBiKWI9bmV3IHcoYixhKTtlbHNlIGlmKGIgaW5zdGFuY2VvZiB3KWIudGFyZ2V0PWIudGFyZ2V0fHxhO2Vsc2Uge3ZhciBlPWI7Yj1uZXcgdyhkLGEpO1JhKGIsZSk7fWU9ITA7aWYoYylmb3IodmFyIGY9Yy5sZW5ndGgtMTswPD1mO2YtLSl7dmFyIGg9Yi5nPWNbZl07ZT1pYihoLGQsITAsYikmJmU7fWg9Yi5nPWE7ZT1pYihoLGQsITAsYikmJmU7ZT1pYihoLGQsITEsYikmJmU7aWYoYylmb3IoZj0wO2Y8Yy5sZW5ndGg7ZisrKWg9Yi5nPWNbZl0sZT1pYihoLGQsITEsYikmJmU7fVxuQi5wcm90b3R5cGUuTj1mdW5jdGlvbigpe0IuJC5OLmNhbGwodGhpcyk7aWYodGhpcy5pKXt2YXIgYT10aGlzLmksYztmb3IoYyBpbiBhLmcpe2Zvcih2YXIgZD1hLmdbY10sZT0wO2U8ZC5sZW5ndGg7ZSsrKU1hKGRbZV0pO2RlbGV0ZSBhLmdbY107YS5oLS07fX10aGlzLko9bnVsbDt9O0IucHJvdG90eXBlLk89ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIHRoaXMuaS5hZGQoU3RyaW5nKGEpLGIsITEsYyxkKX07Qi5wcm90b3R5cGUuUD1mdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gdGhpcy5pLmFkZChTdHJpbmcoYSksYiwhMCxjLGQpfTtcbmZ1bmN0aW9uIGliKGEsYixjLGQpe2I9YS5pLmdbU3RyaW5nKGIpXTtpZighYilyZXR1cm4gITA7Yj1iLmNvbmNhdCgpO2Zvcih2YXIgZT0hMCxmPTA7ZjxiLmxlbmd0aDsrK2Ype3ZhciBoPWJbZl07aWYoaCYmIWguZmEmJmguY2FwdHVyZT09Yyl7dmFyIG49aC5saXN0ZW5lcix0PWgubGF8fGguc3JjO2guaWEmJlVhKGEuaSxoKTtlPSExIT09bi5jYWxsKHQsZCkmJmU7fX1yZXR1cm4gZSYmIWQuZGVmYXVsdFByZXZlbnRlZH12YXIgamI9bC5KU09OLnN0cmluZ2lmeTtjbGFzcyBrYntjb25zdHJ1Y3RvcihhLGIpe3RoaXMuaT1hO3RoaXMuaj1iO3RoaXMuaD0wO3RoaXMuZz1udWxsO31nZXQoKXtsZXQgYTswPHRoaXMuaD8odGhpcy5oLS0sYT10aGlzLmcsdGhpcy5nPWEubmV4dCxhLm5leHQ9bnVsbCk6YT10aGlzLmkoKTtyZXR1cm4gYX19ZnVuY3Rpb24gbGIoKXt2YXIgYT1tYjtsZXQgYj1udWxsO2EuZyYmKGI9YS5nLGEuZz1hLmcubmV4dCxhLmd8fChhLmg9bnVsbCksYi5uZXh0PW51bGwpO3JldHVybiBifWNsYXNzIG5ie2NvbnN0cnVjdG9yKCl7dGhpcy5oPXRoaXMuZz1udWxsO31hZGQoYSxiKXtjb25zdCBjPW9iLmdldCgpO2Muc2V0KGEsYik7dGhpcy5oP3RoaXMuaC5uZXh0PWM6dGhpcy5nPWM7dGhpcy5oPWM7fX12YXIgb2I9bmV3IGtiKCgpPT5uZXcgcGIsYT0+YS5yZXNldCgpKTtjbGFzcyBwYntjb25zdHJ1Y3Rvcigpe3RoaXMubmV4dD10aGlzLmc9dGhpcy5oPW51bGw7fXNldChhLGIpe3RoaXMuaD1hO3RoaXMuZz1iO3RoaXMubmV4dD1udWxsO31yZXNldCgpe3RoaXMubmV4dD10aGlzLmc9dGhpcy5oPW51bGw7fX1mdW5jdGlvbiBxYihhKXt2YXIgYj0xO2E9YS5zcGxpdChcIjpcIik7Y29uc3QgYz1bXTtmb3IoOzA8YiYmYS5sZW5ndGg7KWMucHVzaChhLnNoaWZ0KCkpLGItLTthLmxlbmd0aCYmYy5wdXNoKGEuam9pbihcIjpcIikpO3JldHVybiBjfWZ1bmN0aW9uIHJiKGEpe2wuc2V0VGltZW91dCgoKT0+e3Rocm93IGE7fSwwKTt9bGV0IHNiLHRiPSExLG1iPW5ldyBuYix2Yj0oKT0+e2NvbnN0IGE9bC5Qcm9taXNlLnJlc29sdmUodm9pZCAwKTtzYj0oKT0+e2EudGhlbih1Yik7fTt9O3ZhciB1Yj0oKT0+e2Zvcih2YXIgYTthPWxiKCk7KXt0cnl7YS5oLmNhbGwoYS5nKTt9Y2F0Y2goYyl7cmIoYyk7fXZhciBiPW9iO2IuaihhKTsxMDA+Yi5oJiYoYi5oKyssYS5uZXh0PWIuZyxiLmc9YSk7fXRiPSExO307ZnVuY3Rpb24gd2IoYSxiKXtCLmNhbGwodGhpcyk7dGhpcy5oPWF8fDE7dGhpcy5nPWJ8fGw7dGhpcy5qPXEodGhpcy5xYix0aGlzKTt0aGlzLmw9RGF0ZS5ub3coKTt9cih3YixCKTtrPXdiLnByb3RvdHlwZTtrLmdhPSExO2suVD1udWxsO2sucWI9ZnVuY3Rpb24oKXtpZih0aGlzLmdhKXt2YXIgYT1EYXRlLm5vdygpLXRoaXMubDswPGEmJmE8LjgqdGhpcy5oP3RoaXMuVD10aGlzLmcuc2V0VGltZW91dCh0aGlzLmosdGhpcy5oLWEpOih0aGlzLlQmJih0aGlzLmcuY2xlYXJUaW1lb3V0KHRoaXMuVCksdGhpcy5UPW51bGwpLEModGhpcyxcInRpY2tcIiksdGhpcy5nYSYmKHhiKHRoaXMpLHRoaXMuc3RhcnQoKSkpO319O2suc3RhcnQ9ZnVuY3Rpb24oKXt0aGlzLmdhPSEwO3RoaXMuVHx8KHRoaXMuVD10aGlzLmcuc2V0VGltZW91dCh0aGlzLmosdGhpcy5oKSx0aGlzLmw9RGF0ZS5ub3coKSk7fTtcbmZ1bmN0aW9uIHhiKGEpe2EuZ2E9ITE7YS5UJiYoYS5nLmNsZWFyVGltZW91dChhLlQpLGEuVD1udWxsKTt9ay5OPWZ1bmN0aW9uKCl7d2IuJC5OLmNhbGwodGhpcyk7eGIodGhpcyk7ZGVsZXRlIHRoaXMuZzt9O2Z1bmN0aW9uIHliKGEsYixjKXtpZihcImZ1bmN0aW9uXCI9PT10eXBlb2YgYSljJiYoYT1xKGEsYykpO2Vsc2UgaWYoYSYmXCJmdW5jdGlvblwiPT10eXBlb2YgYS5oYW5kbGVFdmVudClhPXEoYS5oYW5kbGVFdmVudCxhKTtlbHNlIHRocm93IEVycm9yKFwiSW52YWxpZCBsaXN0ZW5lciBhcmd1bWVudFwiKTtyZXR1cm4gMjE0NzQ4MzY0NzxOdW1iZXIoYik/LTE6bC5zZXRUaW1lb3V0KGEsYnx8MCl9ZnVuY3Rpb24gemIoYSl7YS5nPXliKCgpPT57YS5nPW51bGw7YS5pJiYoYS5pPSExLHpiKGEpKTt9LGEuaik7Y29uc3QgYj1hLmg7YS5oPW51bGw7YS5tLmFwcGx5KG51bGwsYik7fWNsYXNzIEFiIGV4dGVuZHMgdntjb25zdHJ1Y3RvcihhLGIpe3N1cGVyKCk7dGhpcy5tPWE7dGhpcy5qPWI7dGhpcy5oPW51bGw7dGhpcy5pPSExO3RoaXMuZz1udWxsO31sKGEpe3RoaXMuaD1hcmd1bWVudHM7dGhpcy5nP3RoaXMuaT0hMDp6Yih0aGlzKTt9Tigpe3N1cGVyLk4oKTt0aGlzLmcmJihsLmNsZWFyVGltZW91dCh0aGlzLmcpLHRoaXMuZz1udWxsLHRoaXMuaT0hMSx0aGlzLmg9bnVsbCk7fX1mdW5jdGlvbiBCYihhKXt2LmNhbGwodGhpcyk7dGhpcy5oPWE7dGhpcy5nPXt9O31yKEJiLHYpO3ZhciBDYj1bXTtmdW5jdGlvbiBFYihhLGIsYyxkKXtBcnJheS5pc0FycmF5KGMpfHwoYyYmKENiWzBdPWMudG9TdHJpbmcoKSksYz1DYik7Zm9yKHZhciBlPTA7ZTxjLmxlbmd0aDtlKyspe3ZhciBmPVlhKGIsY1tlXSxkfHxhLmhhbmRsZUV2ZW50LCExLGEuaHx8YSk7aWYoIWYpYnJlYWs7YS5nW2Yua2V5XT1mO319ZnVuY3Rpb24gRmIoYSl7TmEoYS5nLGZ1bmN0aW9uKGIsYyl7dGhpcy5nLmhhc093blByb3BlcnR5KGMpJiZnYihiKTt9LGEpO2EuZz17fTt9QmIucHJvdG90eXBlLk49ZnVuY3Rpb24oKXtCYi4kLk4uY2FsbCh0aGlzKTtGYih0aGlzKTt9O0JiLnByb3RvdHlwZS5oYW5kbGVFdmVudD1mdW5jdGlvbigpe3Rocm93IEVycm9yKFwiRXZlbnRIYW5kbGVyLmhhbmRsZUV2ZW50IG5vdCBpbXBsZW1lbnRlZFwiKTt9O2Z1bmN0aW9uIEdiKCl7dGhpcy5nPSEwO31HYi5wcm90b3R5cGUuRWE9ZnVuY3Rpb24oKXt0aGlzLmc9ITE7fTtmdW5jdGlvbiBIYihhLGIsYyxkLGUsZil7YS5pbmZvKGZ1bmN0aW9uKCl7aWYoYS5nKWlmKGYpe3ZhciBoPVwiXCI7Zm9yKHZhciBuPWYuc3BsaXQoXCImXCIpLHQ9MDt0PG4ubGVuZ3RoO3QrKyl7dmFyIG09blt0XS5zcGxpdChcIj1cIik7aWYoMTxtLmxlbmd0aCl7dmFyIHU9bVswXTttPW1bMV07dmFyIEw9dS5zcGxpdChcIl9cIik7aD0yPD1MLmxlbmd0aCYmXCJ0eXBlXCI9PUxbMV0/aCsodStcIj1cIittK1wiJlwiKTpoKyh1K1wiPXJlZGFjdGVkJlwiKTt9fX1lbHNlIGg9bnVsbDtlbHNlIGg9ZjtyZXR1cm4gXCJYTUxIVFRQIFJFUSAoXCIrZCtcIikgW2F0dGVtcHQgXCIrZStcIl06IFwiK2IrXCJcXG5cIitjK1wiXFxuXCIraH0pO31cbmZ1bmN0aW9uIEliKGEsYixjLGQsZSxmLGgpe2EuaW5mbyhmdW5jdGlvbigpe3JldHVybiBcIlhNTEhUVFAgUkVTUCAoXCIrZCtcIikgWyBhdHRlbXB0IFwiK2UrXCJdOiBcIitiK1wiXFxuXCIrYytcIlxcblwiK2YrXCIgXCIraH0pO31mdW5jdGlvbiBEKGEsYixjLGQpe2EuaW5mbyhmdW5jdGlvbigpe3JldHVybiBcIlhNTEhUVFAgVEVYVCAoXCIrYitcIik6IFwiK0piKGEsYykrKGQ/XCIgXCIrZDpcIlwiKX0pO31mdW5jdGlvbiBLYihhLGIpe2EuaW5mbyhmdW5jdGlvbigpe3JldHVybiBcIlRJTUVPVVQ6IFwiK2J9KTt9R2IucHJvdG90eXBlLmluZm89ZnVuY3Rpb24oKXt9O1xuZnVuY3Rpb24gSmIoYSxiKXtpZighYS5nKXJldHVybiBiO2lmKCFiKXJldHVybiBudWxsO3RyeXt2YXIgYz1KU09OLnBhcnNlKGIpO2lmKGMpZm9yKGE9MDthPGMubGVuZ3RoO2ErKylpZihBcnJheS5pc0FycmF5KGNbYV0pKXt2YXIgZD1jW2FdO2lmKCEoMj5kLmxlbmd0aCkpe3ZhciBlPWRbMV07aWYoQXJyYXkuaXNBcnJheShlKSYmISgxPmUubGVuZ3RoKSl7dmFyIGY9ZVswXTtpZihcIm5vb3BcIiE9ZiYmXCJzdG9wXCIhPWYmJlwiY2xvc2VcIiE9Zilmb3IodmFyIGg9MTtoPGUubGVuZ3RoO2grKyllW2hdPVwiXCI7fX19cmV0dXJuIGpiKGMpfWNhdGNoKG4pe3JldHVybiBifX12YXIgRT17fSxMYj1udWxsO2Z1bmN0aW9uIE1iKCl7cmV0dXJuIExiPUxifHxuZXcgQn1FLlRhPVwic2VydmVycmVhY2hhYmlsaXR5XCI7ZnVuY3Rpb24gTmIoYSl7dy5jYWxsKHRoaXMsRS5UYSxhKTt9cihOYix3KTtmdW5jdGlvbiBPYihhKXtjb25zdCBiPU1iKCk7QyhiLG5ldyBOYihiKSk7fUUuU1RBVF9FVkVOVD1cInN0YXRldmVudFwiO2Z1bmN0aW9uIFBiKGEsYil7dy5jYWxsKHRoaXMsRS5TVEFUX0VWRU5ULGEpO3RoaXMuc3RhdD1iO31yKFBiLHcpO2Z1bmN0aW9uIEYoYSl7Y29uc3QgYj1NYigpO0MoYixuZXcgUGIoYixhKSk7fUUuVWE9XCJ0aW1pbmdldmVudFwiO2Z1bmN0aW9uIFFiKGEsYil7dy5jYWxsKHRoaXMsRS5VYSxhKTt0aGlzLnNpemU9Yjt9cihRYix3KTtcbmZ1bmN0aW9uIFJiKGEsYil7aWYoXCJmdW5jdGlvblwiIT09dHlwZW9mIGEpdGhyb3cgRXJyb3IoXCJGbiBtdXN0IG5vdCBiZSBudWxsIGFuZCBtdXN0IGJlIGEgZnVuY3Rpb25cIik7cmV0dXJuIGwuc2V0VGltZW91dChmdW5jdGlvbigpe2EoKTt9LGIpfXZhciBTYj17Tk9fRVJST1I6MCxyYjoxLEViOjIsRGI6Myx5Yjo0LENiOjUsRmI6NixRYTo3LFRJTUVPVVQ6OCxJYjo5fTt2YXIgVGI9e3diOlwiY29tcGxldGVcIixTYjpcInN1Y2Nlc3NcIixSYTpcImVycm9yXCIsUWE6XCJhYm9ydFwiLEtiOlwicmVhZHlcIixMYjpcInJlYWR5c3RhdGVjaGFuZ2VcIixUSU1FT1VUOlwidGltZW91dFwiLEdiOlwiaW5jcmVtZW50YWxkYXRhXCIsSmI6XCJwcm9ncmVzc1wiLHpiOlwiZG93bmxvYWRwcm9ncmVzc1wiLCRiOlwidXBsb2FkcHJvZ3Jlc3NcIn07ZnVuY3Rpb24gVWIoKXt9VWIucHJvdG90eXBlLmg9bnVsbDtmdW5jdGlvbiBWYihhKXtyZXR1cm4gYS5ofHwoYS5oPWEuaSgpKX1mdW5jdGlvbiBXYigpe312YXIgWGI9e09QRU46XCJhXCIsdmI6XCJiXCIsUmE6XCJjXCIsSGI6XCJkXCJ9O2Z1bmN0aW9uIFliKCl7dy5jYWxsKHRoaXMsXCJkXCIpO31yKFliLHcpO2Z1bmN0aW9uIFpiKCl7dy5jYWxsKHRoaXMsXCJjXCIpO31yKFpiLHcpO3ZhciAkYjtmdW5jdGlvbiBhYygpe31yKGFjLFViKTthYy5wcm90b3R5cGUuZz1mdW5jdGlvbigpe3JldHVybiBuZXcgWE1MSHR0cFJlcXVlc3R9O2FjLnByb3RvdHlwZS5pPWZ1bmN0aW9uKCl7cmV0dXJuIHt9fTskYj1uZXcgYWM7ZnVuY3Rpb24gYmMoYSxiLGMsZCl7dGhpcy5sPWE7dGhpcy5qPWI7dGhpcy5tPWM7dGhpcy5XPWR8fDE7dGhpcy5VPW5ldyBCYih0aGlzKTt0aGlzLlA9Y2M7YT12YT8xMjU6dm9pZCAwO3RoaXMuVj1uZXcgd2IoYSk7dGhpcy5JPW51bGw7dGhpcy5pPSExO3RoaXMudT10aGlzLkI9dGhpcy5BPXRoaXMuTD10aGlzLkc9dGhpcy5ZPXRoaXMuQz1udWxsO3RoaXMuRj1bXTt0aGlzLmc9bnVsbDt0aGlzLm89MDt0aGlzLnM9dGhpcy52PW51bGw7dGhpcy5jYT0tMTt0aGlzLko9ITE7dGhpcy5PPTA7dGhpcy5NPW51bGw7dGhpcy5iYT10aGlzLks9dGhpcy5hYT10aGlzLlM9ITE7dGhpcy5oPW5ldyBkYzt9ZnVuY3Rpb24gZGMoKXt0aGlzLmk9bnVsbDt0aGlzLmc9XCJcIjt0aGlzLmg9ITE7fXZhciBjYz00NUUzLGVjPXt9LGZjPXt9O2s9YmMucHJvdG90eXBlO2suc2V0VGltZW91dD1mdW5jdGlvbihhKXt0aGlzLlA9YTt9O1xuZnVuY3Rpb24gZ2MoYSxiLGMpe2EuTD0xO2EuQT1oYyhHKGIpKTthLnU9YzthLlM9ITA7aWMoYSxudWxsKTt9ZnVuY3Rpb24gaWMoYSxiKXthLkc9RGF0ZS5ub3coKTtqYyhhKTthLkI9RyhhLkEpO3ZhciBjPWEuQixkPWEuVztBcnJheS5pc0FycmF5KGQpfHwoZD1bU3RyaW5nKGQpXSk7a2MoYy5pLFwidFwiLGQpO2Eubz0wO2M9YS5sLko7YS5oPW5ldyBkYzthLmc9bGMoYS5sLGM/YjpudWxsLCFhLnUpOzA8YS5PJiYoYS5NPW5ldyBBYihxKGEuUGEsYSxhLmcpLGEuTykpO0ViKGEuVSxhLmcsXCJyZWFkeXN0YXRlY2hhbmdlXCIsYS5uYik7Yj1hLkk/UGEoYS5JKTp7fTthLnU/KGEudnx8KGEudj1cIlBPU1RcIiksYltcIkNvbnRlbnQtVHlwZVwiXT1cImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiLGEuZy5oYShhLkIsYS52LGEudSxiKSk6KGEudj1cIkdFVFwiLGEuZy5oYShhLkIsYS52LG51bGwsYikpO09iKCk7SGIoYS5qLGEudixhLkIsYS5tLGEuVyxhLnUpO31cbmsubmI9ZnVuY3Rpb24oYSl7YT1hLnRhcmdldDtjb25zdCBiPXRoaXMuTTtiJiYzPT1IKGEpP2IubCgpOnRoaXMuUGEoYSk7fTtcbmsuUGE9ZnVuY3Rpb24oYSl7dHJ5e2lmKGE9PXRoaXMuZylhOntjb25zdCB1PUgodGhpcy5nKTt2YXIgYj10aGlzLmcuSWEoKTtjb25zdCBMPXRoaXMuZy5kYSgpO2lmKCEoMz51KSYmKDMhPXV8fHZhfHx0aGlzLmcmJih0aGlzLmguaHx8dGhpcy5nLmphKCl8fG1jKHRoaXMuZykpKSl7dGhpcy5KfHw0IT11fHw3PT1ifHwoOD09Ynx8MD49TD9PYigzKTpPYigyKSk7bmModGhpcyk7dmFyIGM9dGhpcy5nLmRhKCk7dGhpcy5jYT1jO2I6aWYob2ModGhpcykpe3ZhciBkPW1jKHRoaXMuZyk7YT1cIlwiO3ZhciBlPWQubGVuZ3RoLGY9ND09SCh0aGlzLmcpO2lmKCF0aGlzLmguaSl7aWYoXCJ1bmRlZmluZWRcIj09PXR5cGVvZiBUZXh0RGVjb2Rlcil7SSh0aGlzKTtwYyh0aGlzKTt2YXIgaD1cIlwiO2JyZWFrIGJ9dGhpcy5oLmk9bmV3IGwuVGV4dERlY29kZXI7fWZvcihiPTA7YjxlO2IrKyl0aGlzLmguaD0hMCxhKz10aGlzLmguaS5kZWNvZGUoZFtiXSx7c3RyZWFtOmYmJmI9PWUtMX0pO2QubGVuZ3RoPVxuMDt0aGlzLmguZys9YTt0aGlzLm89MDtoPXRoaXMuaC5nO31lbHNlIGg9dGhpcy5nLmphKCk7dGhpcy5pPTIwMD09YztJYih0aGlzLmosdGhpcy52LHRoaXMuQix0aGlzLm0sdGhpcy5XLHUsYyk7aWYodGhpcy5pKXtpZih0aGlzLmFhJiYhdGhpcy5LKXtiOntpZih0aGlzLmcpe3ZhciBuLHQ9dGhpcy5nO2lmKChuPXQuZz90LmcuZ2V0UmVzcG9uc2VIZWFkZXIoXCJYLUhUVFAtSW5pdGlhbC1SZXNwb25zZVwiKTpudWxsKSYmIXgobikpe3ZhciBtPW47YnJlYWsgYn19bT1udWxsO31pZihjPW0pRCh0aGlzLmosdGhpcy5tLGMsXCJJbml0aWFsIGhhbmRzaGFrZSByZXNwb25zZSB2aWEgWC1IVFRQLUluaXRpYWwtUmVzcG9uc2VcIiksdGhpcy5LPSEwLHFjKHRoaXMsYyk7ZWxzZSB7dGhpcy5pPSExO3RoaXMucz0zO0YoMTIpO0kodGhpcyk7cGModGhpcyk7YnJlYWsgYX19dGhpcy5TPyhyYyh0aGlzLHUsaCksdmEmJnRoaXMuaSYmMz09dSYmKEViKHRoaXMuVSx0aGlzLlYsXCJ0aWNrXCIsdGhpcy5tYiksXG50aGlzLlYuc3RhcnQoKSkpOihEKHRoaXMuaix0aGlzLm0saCxudWxsKSxxYyh0aGlzLGgpKTs0PT11JiZJKHRoaXMpO3RoaXMuaSYmIXRoaXMuSiYmKDQ9PXU/c2ModGhpcy5sLHRoaXMpOih0aGlzLmk9ITEsamModGhpcykpKTt9ZWxzZSB0Yyh0aGlzLmcpLDQwMD09YyYmMDxoLmluZGV4T2YoXCJVbmtub3duIFNJRFwiKT8odGhpcy5zPTMsRigxMikpOih0aGlzLnM9MCxGKDEzKSksSSh0aGlzKSxwYyh0aGlzKTt9fX1jYXRjaCh1KXt9ZmluYWxseXt9fTtmdW5jdGlvbiBvYyhhKXtyZXR1cm4gYS5nP1wiR0VUXCI9PWEudiYmMiE9YS5MJiZhLmwuSGE6ITF9XG5mdW5jdGlvbiByYyhhLGIsYyl7bGV0IGQ9ITAsZTtmb3IoOyFhLkomJmEubzxjLmxlbmd0aDspaWYoZT11YyhhLGMpLGU9PWZjKXs0PT1iJiYoYS5zPTQsRigxNCksZD0hMSk7RChhLmosYS5tLG51bGwsXCJbSW5jb21wbGV0ZSBSZXNwb25zZV1cIik7YnJlYWt9ZWxzZSBpZihlPT1lYyl7YS5zPTQ7RigxNSk7RChhLmosYS5tLGMsXCJbSW52YWxpZCBDaHVua11cIik7ZD0hMTticmVha31lbHNlIEQoYS5qLGEubSxlLG51bGwpLHFjKGEsZSk7b2MoYSkmJjAhPWEubyYmKGEuaC5nPWEuaC5nLnNsaWNlKGEubyksYS5vPTApOzQhPWJ8fDAhPWMubGVuZ3RofHxhLmguaHx8KGEucz0xLEYoMTYpLGQ9ITEpO2EuaT1hLmkmJmQ7ZD8wPGMubGVuZ3RoJiYhYS5iYSYmKGEuYmE9ITAsYj1hLmwsYi5nPT1hJiZiLmNhJiYhYi5NJiYoYi5sLmluZm8oXCJHcmVhdCwgbm8gYnVmZmVyaW5nIHByb3h5IGRldGVjdGVkLiBCeXRlcyByZWNlaXZlZDogXCIrYy5sZW5ndGgpLHZjKGIpLGIuTT0hMCxGKDExKSkpOihEKGEuaixcbmEubSxjLFwiW0ludmFsaWQgQ2h1bmtlZCBSZXNwb25zZV1cIiksSShhKSxwYyhhKSk7fWsubWI9ZnVuY3Rpb24oKXtpZih0aGlzLmcpe3ZhciBhPUgodGhpcy5nKSxiPXRoaXMuZy5qYSgpO3RoaXMubzxiLmxlbmd0aCYmKG5jKHRoaXMpLHJjKHRoaXMsYSxiKSx0aGlzLmkmJjQhPWEmJmpjKHRoaXMpKTt9fTtmdW5jdGlvbiB1YyhhLGIpe3ZhciBjPWEubyxkPWIuaW5kZXhPZihcIlxcblwiLGMpO2lmKC0xPT1kKXJldHVybiBmYztjPU51bWJlcihiLnN1YnN0cmluZyhjLGQpKTtpZihpc05hTihjKSlyZXR1cm4gZWM7ZCs9MTtpZihkK2M+Yi5sZW5ndGgpcmV0dXJuIGZjO2I9Yi5zbGljZShkLGQrYyk7YS5vPWQrYztyZXR1cm4gYn1rLmNhbmNlbD1mdW5jdGlvbigpe3RoaXMuSj0hMDtJKHRoaXMpO307ZnVuY3Rpb24gamMoYSl7YS5ZPURhdGUubm93KCkrYS5QO3djKGEsYS5QKTt9XG5mdW5jdGlvbiB3YyhhLGIpe2lmKG51bGwhPWEuQyl0aHJvdyBFcnJvcihcIldhdGNoRG9nIHRpbWVyIG5vdCBudWxsXCIpO2EuQz1SYihxKGEubGIsYSksYik7fWZ1bmN0aW9uIG5jKGEpe2EuQyYmKGwuY2xlYXJUaW1lb3V0KGEuQyksYS5DPW51bGwpO31rLmxiPWZ1bmN0aW9uKCl7dGhpcy5DPW51bGw7Y29uc3QgYT1EYXRlLm5vdygpOzA8PWEtdGhpcy5ZPyhLYih0aGlzLmosdGhpcy5CKSwyIT10aGlzLkwmJihPYigpLEYoMTcpKSxJKHRoaXMpLHRoaXMucz0yLHBjKHRoaXMpKTp3Yyh0aGlzLHRoaXMuWS1hKTt9O2Z1bmN0aW9uIHBjKGEpezA9PWEubC5IfHxhLkp8fHNjKGEubCxhKTt9ZnVuY3Rpb24gSShhKXtuYyhhKTt2YXIgYj1hLk07YiYmXCJmdW5jdGlvblwiPT10eXBlb2YgYi5zYSYmYi5zYSgpO2EuTT1udWxsO3hiKGEuVik7RmIoYS5VKTthLmcmJihiPWEuZyxhLmc9bnVsbCxiLmFib3J0KCksYi5zYSgpKTt9XG5mdW5jdGlvbiBxYyhhLGIpe3RyeXt2YXIgYz1hLmw7aWYoMCE9Yy5IJiYoYy5nPT1hfHx4YyhjLmksYSkpKWlmKCFhLksmJnhjKGMuaSxhKSYmMz09Yy5IKXt0cnl7dmFyIGQ9Yy5KYS5nLnBhcnNlKGIpO31jYXRjaChtKXtkPW51bGw7fWlmKEFycmF5LmlzQXJyYXkoZCkmJjM9PWQubGVuZ3RoKXt2YXIgZT1kO2lmKDA9PWVbMF0pYTp7aWYoIWMudSl7aWYoYy5nKWlmKGMuZy5HKzNFMzxhLkcpeWMoYyksemMoYyk7ZWxzZSBicmVhayBhO0FjKGMpO0YoMTgpO319ZWxzZSBjLkZhPWVbMV0sMDxjLkZhLWMuViYmMzc1MDA+ZVsyXSYmYy5HJiYwPT1jLkEmJiFjLnYmJihjLnY9UmIocShjLmliLGMpLDZFMykpO2lmKDE+PUJjKGMuaSkmJmMub2Epe3RyeXtjLm9hKCk7fWNhdGNoKG0pe31jLm9hPXZvaWQgMDt9fWVsc2UgSihjLDExKTt9ZWxzZSBpZigoYS5LfHxjLmc9PWEpJiZ5YyhjKSwheChiKSlmb3IoZT1jLkphLmcucGFyc2UoYiksYj0wO2I8ZS5sZW5ndGg7YisrKXtsZXQgbT1lW2JdO2MuVj1cbm1bMF07bT1tWzFdO2lmKDI9PWMuSClpZihcImNcIj09bVswXSl7Yy5LPW1bMV07Yy5wYT1tWzJdO2NvbnN0IHU9bVszXTtudWxsIT11JiYoYy5yYT11LGMubC5pbmZvKFwiVkVSPVwiK2MucmEpKTtjb25zdCBMPW1bNF07bnVsbCE9TCYmKGMuR2E9TCxjLmwuaW5mbyhcIlNWRVI9XCIrYy5HYSkpO2NvbnN0IEthPW1bNV07bnVsbCE9S2EmJlwibnVtYmVyXCI9PT10eXBlb2YgS2EmJjA8S2EmJihkPTEuNSpLYSxjLkw9ZCxjLmwuaW5mbyhcImJhY2tDaGFubmVsUmVxdWVzdFRpbWVvdXRNc189XCIrZCkpO2Q9Yztjb25zdCBsYT1hLmc7aWYobGEpe2NvbnN0IExhPWxhLmc/bGEuZy5nZXRSZXNwb25zZUhlYWRlcihcIlgtQ2xpZW50LVdpcmUtUHJvdG9jb2xcIik6bnVsbDtpZihMYSl7dmFyIGY9ZC5pO2YuZ3x8LTE9PUxhLmluZGV4T2YoXCJzcGR5XCIpJiYtMT09TGEuaW5kZXhPZihcInF1aWNcIikmJi0xPT1MYS5pbmRleE9mKFwiaDJcIil8fChmLmo9Zi5sLGYuZz1uZXcgU2V0LGYuaCYmKENjKGYsZi5oKSxmLmg9bnVsbCkpO31pZihkLkYpe2NvbnN0IERiPVxubGEuZz9sYS5nLmdldFJlc3BvbnNlSGVhZGVyKFwiWC1IVFRQLVNlc3Npb24tSWRcIik6bnVsbDtEYiYmKGQuRGE9RGIsSyhkLkksZC5GLERiKSk7fX1jLkg9MztjLmgmJmMuaC5CYSgpO2MuY2EmJihjLlM9RGF0ZS5ub3coKS1hLkcsYy5sLmluZm8oXCJIYW5kc2hha2UgUlRUOiBcIitjLlMrXCJtc1wiKSk7ZD1jO3ZhciBoPWE7ZC53YT1EYyhkLGQuSj9kLnBhOm51bGwsZC5ZKTtpZihoLkspe0VjKGQuaSxoKTt2YXIgbj1oLHQ9ZC5MO3QmJm4uc2V0VGltZW91dCh0KTtuLkMmJihuYyhuKSxqYyhuKSk7ZC5nPWg7fWVsc2UgRmMoZCk7MDxjLmoubGVuZ3RoJiZHYyhjKTt9ZWxzZSBcInN0b3BcIiE9bVswXSYmXCJjbG9zZVwiIT1tWzBdfHxKKGMsNyk7ZWxzZSAzPT1jLkgmJihcInN0b3BcIj09bVswXXx8XCJjbG9zZVwiPT1tWzBdP1wic3RvcFwiPT1tWzBdP0ooYyw3KTpIYyhjKTpcIm5vb3BcIiE9bVswXSYmYy5oJiZjLmguQWEobSksYy5BPTApO31PYig0KTt9Y2F0Y2gobSl7fX1mdW5jdGlvbiBJYyhhKXtpZihhLlomJlwiZnVuY3Rpb25cIj09dHlwZW9mIGEuWilyZXR1cm4gYS5aKCk7aWYoXCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBNYXAmJmEgaW5zdGFuY2VvZiBNYXB8fFwidW5kZWZpbmVkXCIhPT10eXBlb2YgU2V0JiZhIGluc3RhbmNlb2YgU2V0KXJldHVybiBBcnJheS5mcm9tKGEudmFsdWVzKCkpO2lmKFwic3RyaW5nXCI9PT10eXBlb2YgYSlyZXR1cm4gYS5zcGxpdChcIlwiKTtpZihhYShhKSl7Zm9yKHZhciBiPVtdLGM9YS5sZW5ndGgsZD0wO2Q8YztkKyspYi5wdXNoKGFbZF0pO3JldHVybiBifWI9W107Yz0wO2ZvcihkIGluIGEpYltjKytdPWFbZF07cmV0dXJuIGJ9XG5mdW5jdGlvbiBKYyhhKXtpZihhLnRhJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhLnRhKXJldHVybiBhLnRhKCk7aWYoIWEuWnx8XCJmdW5jdGlvblwiIT10eXBlb2YgYS5aKXtpZihcInVuZGVmaW5lZFwiIT09dHlwZW9mIE1hcCYmYSBpbnN0YW5jZW9mIE1hcClyZXR1cm4gQXJyYXkuZnJvbShhLmtleXMoKSk7aWYoIShcInVuZGVmaW5lZFwiIT09dHlwZW9mIFNldCYmYSBpbnN0YW5jZW9mIFNldCkpe2lmKGFhKGEpfHxcInN0cmluZ1wiPT09dHlwZW9mIGEpe3ZhciBiPVtdO2E9YS5sZW5ndGg7Zm9yKHZhciBjPTA7YzxhO2MrKyliLnB1c2goYyk7cmV0dXJuIGJ9Yj1bXTtjPTA7Zm9yKGNvbnN0IGQgaW4gYSliW2MrK109ZDtyZXR1cm4gYn19fVxuZnVuY3Rpb24gS2MoYSxiKXtpZihhLmZvckVhY2gmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGEuZm9yRWFjaClhLmZvckVhY2goYix2b2lkIDApO2Vsc2UgaWYoYWEoYSl8fFwic3RyaW5nXCI9PT10eXBlb2YgYSlBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGEsYix2b2lkIDApO2Vsc2UgZm9yKHZhciBjPUpjKGEpLGQ9SWMoYSksZT1kLmxlbmd0aCxmPTA7ZjxlO2YrKyliLmNhbGwodm9pZCAwLGRbZl0sYyYmY1tmXSxhKTt9dmFyIExjPVJlZ0V4cChcIl4oPzooW146Lz8jLl0rKTopPyg/Oi8vKD86KFteXFxcXFxcXFwvPyNdKilAKT8oW15cXFxcXFxcXC8/I10qPykoPzo6KFswLTldKykpPyg/PVtcXFxcXFxcXC8/I118JCkpPyhbXj8jXSspPyg/OlxcXFw/KFteI10qKSk/KD86IyhbXFxcXHNcXFxcU10qKSk/JFwiKTtmdW5jdGlvbiBNYyhhLGIpe2lmKGEpe2E9YS5zcGxpdChcIiZcIik7Zm9yKHZhciBjPTA7YzxhLmxlbmd0aDtjKyspe3ZhciBkPWFbY10uaW5kZXhPZihcIj1cIiksZT1udWxsO2lmKDA8PWQpe3ZhciBmPWFbY10uc3Vic3RyaW5nKDAsZCk7ZT1hW2NdLnN1YnN0cmluZyhkKzEpO31lbHNlIGY9YVtjXTtiKGYsZT9kZWNvZGVVUklDb21wb25lbnQoZS5yZXBsYWNlKC9cXCsvZyxcIiBcIikpOlwiXCIpO319fWZ1bmN0aW9uIE0oYSl7dGhpcy5nPXRoaXMucz10aGlzLmo9XCJcIjt0aGlzLm09bnVsbDt0aGlzLm89dGhpcy5sPVwiXCI7dGhpcy5oPSExO2lmKGEgaW5zdGFuY2VvZiBNKXt0aGlzLmg9YS5oO05jKHRoaXMsYS5qKTt0aGlzLnM9YS5zO3RoaXMuZz1hLmc7T2ModGhpcyxhLm0pO3RoaXMubD1hLmw7dmFyIGI9YS5pO3ZhciBjPW5ldyBQYztjLmk9Yi5pO2IuZyYmKGMuZz1uZXcgTWFwKGIuZyksYy5oPWIuaCk7UWModGhpcyxjKTt0aGlzLm89YS5vO31lbHNlIGEmJihiPVN0cmluZyhhKS5tYXRjaChMYykpPyh0aGlzLmg9ITEsTmModGhpcyxiWzFdfHxcIlwiLCEwKSx0aGlzLnM9UmMoYlsyXXx8XCJcIiksdGhpcy5nPVJjKGJbM118fFwiXCIsITApLE9jKHRoaXMsYls0XSksdGhpcy5sPVJjKGJbNV18fFwiXCIsITApLFFjKHRoaXMsYls2XXx8XCJcIiwhMCksdGhpcy5vPVJjKGJbN118fFwiXCIpKToodGhpcy5oPSExLHRoaXMuaT1uZXcgUGMobnVsbCx0aGlzLmgpKTt9XG5NLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3ZhciBhPVtdLGI9dGhpcy5qO2ImJmEucHVzaChTYyhiLFRjLCEwKSxcIjpcIik7dmFyIGM9dGhpcy5nO2lmKGN8fFwiZmlsZVwiPT1iKWEucHVzaChcIi8vXCIpLChiPXRoaXMucykmJmEucHVzaChTYyhiLFRjLCEwKSxcIkBcIiksYS5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoYykpLnJlcGxhY2UoLyUyNShbMC05YS1mQS1GXXsyfSkvZyxcIiUkMVwiKSksYz10aGlzLm0sbnVsbCE9YyYmYS5wdXNoKFwiOlwiLFN0cmluZyhjKSk7aWYoYz10aGlzLmwpdGhpcy5nJiZcIi9cIiE9Yy5jaGFyQXQoMCkmJmEucHVzaChcIi9cIiksYS5wdXNoKFNjKGMsXCIvXCI9PWMuY2hhckF0KDApP1VjOlZjLCEwKSk7KGM9dGhpcy5pLnRvU3RyaW5nKCkpJiZhLnB1c2goXCI/XCIsYyk7KGM9dGhpcy5vKSYmYS5wdXNoKFwiI1wiLFNjKGMsV2MpKTtyZXR1cm4gYS5qb2luKFwiXCIpfTtmdW5jdGlvbiBHKGEpe3JldHVybiBuZXcgTShhKX1cbmZ1bmN0aW9uIE5jKGEsYixjKXthLmo9Yz9SYyhiLCEwKTpiO2EuaiYmKGEuaj1hLmoucmVwbGFjZSgvOiQvLFwiXCIpKTt9ZnVuY3Rpb24gT2MoYSxiKXtpZihiKXtiPU51bWJlcihiKTtpZihpc05hTihiKXx8MD5iKXRocm93IEVycm9yKFwiQmFkIHBvcnQgbnVtYmVyIFwiK2IpO2EubT1iO31lbHNlIGEubT1udWxsO31mdW5jdGlvbiBRYyhhLGIsYyl7YiBpbnN0YW5jZW9mIFBjPyhhLmk9YixYYyhhLmksYS5oKSk6KGN8fChiPVNjKGIsWWMpKSxhLmk9bmV3IFBjKGIsYS5oKSk7fWZ1bmN0aW9uIEsoYSxiLGMpe2EuaS5zZXQoYixjKTt9ZnVuY3Rpb24gaGMoYSl7SyhhLFwienhcIixNYXRoLmZsb29yKDIxNDc0ODM2NDgqTWF0aC5yYW5kb20oKSkudG9TdHJpbmcoMzYpK01hdGguYWJzKE1hdGguZmxvb3IoMjE0NzQ4MzY0OCpNYXRoLnJhbmRvbSgpKV5EYXRlLm5vdygpKS50b1N0cmluZygzNikpO3JldHVybiBhfVxuZnVuY3Rpb24gUmMoYSxiKXtyZXR1cm4gYT9iP2RlY29kZVVSSShhLnJlcGxhY2UoLyUyNS9nLFwiJTI1MjVcIikpOmRlY29kZVVSSUNvbXBvbmVudChhKTpcIlwifWZ1bmN0aW9uIFNjKGEsYixjKXtyZXR1cm4gXCJzdHJpbmdcIj09PXR5cGVvZiBhPyhhPWVuY29kZVVSSShhKS5yZXBsYWNlKGIsWmMpLGMmJihhPWEucmVwbGFjZSgvJTI1KFswLTlhLWZBLUZdezJ9KS9nLFwiJSQxXCIpKSxhKTpudWxsfWZ1bmN0aW9uIFpjKGEpe2E9YS5jaGFyQ29kZUF0KDApO3JldHVybiBcIiVcIisoYT4+NCYxNSkudG9TdHJpbmcoMTYpKyhhJjE1KS50b1N0cmluZygxNil9dmFyIFRjPS9bI1xcL1xcP0BdL2csVmM9L1sjXFw/Ol0vZyxVYz0vWyNcXD9dL2csWWM9L1sjXFw/QF0vZyxXYz0vIy9nO2Z1bmN0aW9uIFBjKGEsYil7dGhpcy5oPXRoaXMuZz1udWxsO3RoaXMuaT1hfHxudWxsO3RoaXMuaj0hIWI7fVxuZnVuY3Rpb24gTihhKXthLmd8fChhLmc9bmV3IE1hcCxhLmg9MCxhLmkmJk1jKGEuaSxmdW5jdGlvbihiLGMpe2EuYWRkKGRlY29kZVVSSUNvbXBvbmVudChiLnJlcGxhY2UoL1xcKy9nLFwiIFwiKSksYyk7fSkpO31rPVBjLnByb3RvdHlwZTtrLmFkZD1mdW5jdGlvbihhLGIpe04odGhpcyk7dGhpcy5pPW51bGw7YT1PKHRoaXMsYSk7dmFyIGM9dGhpcy5nLmdldChhKTtjfHx0aGlzLmcuc2V0KGEsYz1bXSk7Yy5wdXNoKGIpO3RoaXMuaCs9MTtyZXR1cm4gdGhpc307ZnVuY3Rpb24gJGMoYSxiKXtOKGEpO2I9TyhhLGIpO2EuZy5oYXMoYikmJihhLmk9bnVsbCxhLmgtPWEuZy5nZXQoYikubGVuZ3RoLGEuZy5kZWxldGUoYikpO31mdW5jdGlvbiBhZChhLGIpe04oYSk7Yj1PKGEsYik7cmV0dXJuIGEuZy5oYXMoYil9XG5rLmZvckVhY2g9ZnVuY3Rpb24oYSxiKXtOKHRoaXMpO3RoaXMuZy5mb3JFYWNoKGZ1bmN0aW9uKGMsZCl7Yy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2EuY2FsbChiLGUsZCx0aGlzKTt9LHRoaXMpO30sdGhpcyk7fTtrLnRhPWZ1bmN0aW9uKCl7Tih0aGlzKTtjb25zdCBhPUFycmF5LmZyb20odGhpcy5nLnZhbHVlcygpKSxiPUFycmF5LmZyb20odGhpcy5nLmtleXMoKSksYz1bXTtmb3IobGV0IGQ9MDtkPGIubGVuZ3RoO2QrKyl7Y29uc3QgZT1hW2RdO2ZvcihsZXQgZj0wO2Y8ZS5sZW5ndGg7ZisrKWMucHVzaChiW2RdKTt9cmV0dXJuIGN9O2suWj1mdW5jdGlvbihhKXtOKHRoaXMpO2xldCBiPVtdO2lmKFwic3RyaW5nXCI9PT10eXBlb2YgYSlhZCh0aGlzLGEpJiYoYj1iLmNvbmNhdCh0aGlzLmcuZ2V0KE8odGhpcyxhKSkpKTtlbHNlIHthPUFycmF5LmZyb20odGhpcy5nLnZhbHVlcygpKTtmb3IobGV0IGM9MDtjPGEubGVuZ3RoO2MrKyliPWIuY29uY2F0KGFbY10pO31yZXR1cm4gYn07XG5rLnNldD1mdW5jdGlvbihhLGIpe04odGhpcyk7dGhpcy5pPW51bGw7YT1PKHRoaXMsYSk7YWQodGhpcyxhKSYmKHRoaXMuaC09dGhpcy5nLmdldChhKS5sZW5ndGgpO3RoaXMuZy5zZXQoYSxbYl0pO3RoaXMuaCs9MTtyZXR1cm4gdGhpc307ay5nZXQ9ZnVuY3Rpb24oYSxiKXtpZighYSlyZXR1cm4gYjthPXRoaXMuWihhKTtyZXR1cm4gMDxhLmxlbmd0aD9TdHJpbmcoYVswXSk6Yn07ZnVuY3Rpb24ga2MoYSxiLGMpeyRjKGEsYik7MDxjLmxlbmd0aCYmKGEuaT1udWxsLGEuZy5zZXQoTyhhLGIpLG1hKGMpKSxhLmgrPWMubGVuZ3RoKTt9XG5rLnRvU3RyaW5nPWZ1bmN0aW9uKCl7aWYodGhpcy5pKXJldHVybiB0aGlzLmk7aWYoIXRoaXMuZylyZXR1cm4gXCJcIjtjb25zdCBhPVtdLGI9QXJyYXkuZnJvbSh0aGlzLmcua2V5cygpKTtmb3IodmFyIGM9MDtjPGIubGVuZ3RoO2MrKyl7dmFyIGQ9YltjXTtjb25zdCBmPWVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoZCkpLGg9dGhpcy5aKGQpO2ZvcihkPTA7ZDxoLmxlbmd0aDtkKyspe3ZhciBlPWY7XCJcIiE9PWhbZF0mJihlKz1cIj1cIitlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGhbZF0pKSk7YS5wdXNoKGUpO319cmV0dXJuIHRoaXMuaT1hLmpvaW4oXCImXCIpfTtmdW5jdGlvbiBPKGEsYil7Yj1TdHJpbmcoYik7YS5qJiYoYj1iLnRvTG93ZXJDYXNlKCkpO3JldHVybiBifVxuZnVuY3Rpb24gWGMoYSxiKXtiJiYhYS5qJiYoTihhKSxhLmk9bnVsbCxhLmcuZm9yRWFjaChmdW5jdGlvbihjLGQpe3ZhciBlPWQudG9Mb3dlckNhc2UoKTtkIT1lJiYoJGModGhpcyxkKSxrYyh0aGlzLGUsYykpO30sYSkpO2Euaj1iO312YXIgYmQ9Y2xhc3N7Y29uc3RydWN0b3IoYSxiKXt0aGlzLmc9YTt0aGlzLm1hcD1iO319O2Z1bmN0aW9uIGNkKGEpe3RoaXMubD1hfHxkZDtsLlBlcmZvcm1hbmNlTmF2aWdhdGlvblRpbWluZz8oYT1sLnBlcmZvcm1hbmNlLmdldEVudHJpZXNCeVR5cGUoXCJuYXZpZ2F0aW9uXCIpLGE9MDxhLmxlbmd0aCYmKFwiaHFcIj09YVswXS5uZXh0SG9wUHJvdG9jb2x8fFwiaDJcIj09YVswXS5uZXh0SG9wUHJvdG9jb2wpKTphPSEhKGwuZyYmbC5nLkthJiZsLmcuS2EoKSYmbC5nLkthKCkuZGMpO3RoaXMuaj1hP3RoaXMubDoxO3RoaXMuZz1udWxsOzE8dGhpcy5qJiYodGhpcy5nPW5ldyBTZXQpO3RoaXMuaD1udWxsO3RoaXMuaT1bXTt9dmFyIGRkPTEwO2Z1bmN0aW9uIGVkKGEpe3JldHVybiBhLmg/ITA6YS5nP2EuZy5zaXplPj1hLmo6ITF9ZnVuY3Rpb24gQmMoYSl7cmV0dXJuIGEuaD8xOmEuZz9hLmcuc2l6ZTowfWZ1bmN0aW9uIHhjKGEsYil7cmV0dXJuIGEuaD9hLmg9PWI6YS5nP2EuZy5oYXMoYik6ITF9ZnVuY3Rpb24gQ2MoYSxiKXthLmc/YS5nLmFkZChiKTphLmg9Yjt9XG5mdW5jdGlvbiBFYyhhLGIpe2EuaCYmYS5oPT1iP2EuaD1udWxsOmEuZyYmYS5nLmhhcyhiKSYmYS5nLmRlbGV0ZShiKTt9Y2QucHJvdG90eXBlLmNhbmNlbD1mdW5jdGlvbigpe3RoaXMuaT1mZCh0aGlzKTtpZih0aGlzLmgpdGhpcy5oLmNhbmNlbCgpLHRoaXMuaD1udWxsO2Vsc2UgaWYodGhpcy5nJiYwIT09dGhpcy5nLnNpemUpe2Zvcihjb25zdCBhIG9mIHRoaXMuZy52YWx1ZXMoKSlhLmNhbmNlbCgpO3RoaXMuZy5jbGVhcigpO319O2Z1bmN0aW9uIGZkKGEpe2lmKG51bGwhPWEuaClyZXR1cm4gYS5pLmNvbmNhdChhLmguRik7aWYobnVsbCE9YS5nJiYwIT09YS5nLnNpemUpe2xldCBiPWEuaTtmb3IoY29uc3QgYyBvZiBhLmcudmFsdWVzKCkpYj1iLmNvbmNhdChjLkYpO3JldHVybiBifXJldHVybiBtYShhLmkpfXZhciBnZD1jbGFzc3tzdHJpbmdpZnkoYSl7cmV0dXJuIGwuSlNPTi5zdHJpbmdpZnkoYSx2b2lkIDApfXBhcnNlKGEpe3JldHVybiBsLkpTT04ucGFyc2UoYSx2b2lkIDApfX07ZnVuY3Rpb24gaGQoKXt0aGlzLmc9bmV3IGdkO31mdW5jdGlvbiBpZChhLGIsYyl7Y29uc3QgZD1jfHxcIlwiO3RyeXtLYyhhLGZ1bmN0aW9uKGUsZil7bGV0IGg9ZTtwKGUpJiYoaD1qYihlKSk7Yi5wdXNoKGQrZitcIj1cIitlbmNvZGVVUklDb21wb25lbnQoaCkpO30pO31jYXRjaChlKXt0aHJvdyBiLnB1c2goZCtcInR5cGU9XCIrZW5jb2RlVVJJQ29tcG9uZW50KFwiX2JhZG1hcFwiKSksZTt9fWZ1bmN0aW9uIGpkKGEsYil7Y29uc3QgYz1uZXcgR2I7aWYobC5JbWFnZSl7Y29uc3QgZD1uZXcgSW1hZ2U7ZC5vbmxvYWQ9aGEoa2QsYyxkLFwiVGVzdExvYWRJbWFnZTogbG9hZGVkXCIsITAsYik7ZC5vbmVycm9yPWhhKGtkLGMsZCxcIlRlc3RMb2FkSW1hZ2U6IGVycm9yXCIsITEsYik7ZC5vbmFib3J0PWhhKGtkLGMsZCxcIlRlc3RMb2FkSW1hZ2U6IGFib3J0XCIsITEsYik7ZC5vbnRpbWVvdXQ9aGEoa2QsYyxkLFwiVGVzdExvYWRJbWFnZTogdGltZW91dFwiLCExLGIpO2wuc2V0VGltZW91dChmdW5jdGlvbigpe2lmKGQub250aW1lb3V0KWQub250aW1lb3V0KCk7fSwxRTQpO2Quc3JjPWE7fWVsc2UgYighMSk7fWZ1bmN0aW9uIGtkKGEsYixjLGQsZSl7dHJ5e2Iub25sb2FkPW51bGwsYi5vbmVycm9yPW51bGwsYi5vbmFib3J0PW51bGwsYi5vbnRpbWVvdXQ9bnVsbCxlKGQpO31jYXRjaChmKXt9fWZ1bmN0aW9uIGxkKGEpe3RoaXMubD1hLmVjfHxudWxsO3RoaXMuaj1hLm9ifHwhMTt9cihsZCxVYik7bGQucHJvdG90eXBlLmc9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IG1kKHRoaXMubCx0aGlzLmopfTtsZC5wcm90b3R5cGUuaT1mdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYX19KHt9KTtmdW5jdGlvbiBtZChhLGIpe0IuY2FsbCh0aGlzKTt0aGlzLkY9YTt0aGlzLnU9Yjt0aGlzLm09dm9pZCAwO3RoaXMucmVhZHlTdGF0ZT1uZDt0aGlzLnN0YXR1cz0wO3RoaXMucmVzcG9uc2VUeXBlPXRoaXMucmVzcG9uc2VUZXh0PXRoaXMucmVzcG9uc2U9dGhpcy5zdGF0dXNUZXh0PVwiXCI7dGhpcy5vbnJlYWR5c3RhdGVjaGFuZ2U9bnVsbDt0aGlzLnY9bmV3IEhlYWRlcnM7dGhpcy5oPW51bGw7dGhpcy5DPVwiR0VUXCI7dGhpcy5CPVwiXCI7dGhpcy5nPSExO3RoaXMuQT10aGlzLmo9dGhpcy5sPW51bGw7fXIobWQsQik7dmFyIG5kPTA7az1tZC5wcm90b3R5cGU7XG5rLm9wZW49ZnVuY3Rpb24oYSxiKXtpZih0aGlzLnJlYWR5U3RhdGUhPW5kKXRocm93IHRoaXMuYWJvcnQoKSxFcnJvcihcIkVycm9yIHJlb3BlbmluZyBhIGNvbm5lY3Rpb25cIik7dGhpcy5DPWE7dGhpcy5CPWI7dGhpcy5yZWFkeVN0YXRlPTE7b2QodGhpcyk7fTtrLnNlbmQ9ZnVuY3Rpb24oYSl7aWYoMSE9dGhpcy5yZWFkeVN0YXRlKXRocm93IHRoaXMuYWJvcnQoKSxFcnJvcihcIm5lZWQgdG8gY2FsbCBvcGVuKCkgZmlyc3QuIFwiKTt0aGlzLmc9ITA7Y29uc3QgYj17aGVhZGVyczp0aGlzLnYsbWV0aG9kOnRoaXMuQyxjcmVkZW50aWFsczp0aGlzLm0sY2FjaGU6dm9pZCAwfTthJiYoYi5ib2R5PWEpOyh0aGlzLkZ8fGwpLmZldGNoKG5ldyBSZXF1ZXN0KHRoaXMuQixiKSkudGhlbih0aGlzLiRhLmJpbmQodGhpcyksdGhpcy5rYS5iaW5kKHRoaXMpKTt9O1xuay5hYm9ydD1mdW5jdGlvbigpe3RoaXMucmVzcG9uc2U9dGhpcy5yZXNwb25zZVRleHQ9XCJcIjt0aGlzLnY9bmV3IEhlYWRlcnM7dGhpcy5zdGF0dXM9MDt0aGlzLmomJnRoaXMuai5jYW5jZWwoXCJSZXF1ZXN0IHdhcyBhYm9ydGVkLlwiKS5jYXRjaCgoKT0+e30pOzE8PXRoaXMucmVhZHlTdGF0ZSYmdGhpcy5nJiY0IT10aGlzLnJlYWR5U3RhdGUmJih0aGlzLmc9ITEscGQodGhpcykpO3RoaXMucmVhZHlTdGF0ZT1uZDt9O1xuay4kYT1mdW5jdGlvbihhKXtpZih0aGlzLmcmJih0aGlzLmw9YSx0aGlzLmh8fCh0aGlzLnN0YXR1cz10aGlzLmwuc3RhdHVzLHRoaXMuc3RhdHVzVGV4dD10aGlzLmwuc3RhdHVzVGV4dCx0aGlzLmg9YS5oZWFkZXJzLHRoaXMucmVhZHlTdGF0ZT0yLG9kKHRoaXMpKSx0aGlzLmcmJih0aGlzLnJlYWR5U3RhdGU9MyxvZCh0aGlzKSx0aGlzLmcpKSlpZihcImFycmF5YnVmZmVyXCI9PT10aGlzLnJlc3BvbnNlVHlwZSlhLmFycmF5QnVmZmVyKCkudGhlbih0aGlzLllhLmJpbmQodGhpcyksdGhpcy5rYS5iaW5kKHRoaXMpKTtlbHNlIGlmKFwidW5kZWZpbmVkXCIhPT10eXBlb2YgbC5SZWFkYWJsZVN0cmVhbSYmXCJib2R5XCJpbiBhKXt0aGlzLmo9YS5ib2R5LmdldFJlYWRlcigpO2lmKHRoaXMudSl7aWYodGhpcy5yZXNwb25zZVR5cGUpdGhyb3cgRXJyb3IoJ3Jlc3BvbnNlVHlwZSBtdXN0IGJlIGVtcHR5IGZvciBcInN0cmVhbUJpbmFyeUNodW5rc1wiIG1vZGUgcmVzcG9uc2VzLicpO3RoaXMucmVzcG9uc2U9XG5bXTt9ZWxzZSB0aGlzLnJlc3BvbnNlPXRoaXMucmVzcG9uc2VUZXh0PVwiXCIsdGhpcy5BPW5ldyBUZXh0RGVjb2RlcjtxZCh0aGlzKTt9ZWxzZSBhLnRleHQoKS50aGVuKHRoaXMuWmEuYmluZCh0aGlzKSx0aGlzLmthLmJpbmQodGhpcykpO307ZnVuY3Rpb24gcWQoYSl7YS5qLnJlYWQoKS50aGVuKGEuWGEuYmluZChhKSkuY2F0Y2goYS5rYS5iaW5kKGEpKTt9ay5YYT1mdW5jdGlvbihhKXtpZih0aGlzLmcpe2lmKHRoaXMudSYmYS52YWx1ZSl0aGlzLnJlc3BvbnNlLnB1c2goYS52YWx1ZSk7ZWxzZSBpZighdGhpcy51KXt2YXIgYj1hLnZhbHVlP2EudmFsdWU6bmV3IFVpbnQ4QXJyYXkoMCk7aWYoYj10aGlzLkEuZGVjb2RlKGIse3N0cmVhbTohYS5kb25lfSkpdGhpcy5yZXNwb25zZT10aGlzLnJlc3BvbnNlVGV4dCs9Yjt9YS5kb25lP3BkKHRoaXMpOm9kKHRoaXMpOzM9PXRoaXMucmVhZHlTdGF0ZSYmcWQodGhpcyk7fX07XG5rLlphPWZ1bmN0aW9uKGEpe3RoaXMuZyYmKHRoaXMucmVzcG9uc2U9dGhpcy5yZXNwb25zZVRleHQ9YSxwZCh0aGlzKSk7fTtrLllhPWZ1bmN0aW9uKGEpe3RoaXMuZyYmKHRoaXMucmVzcG9uc2U9YSxwZCh0aGlzKSk7fTtrLmthPWZ1bmN0aW9uKCl7dGhpcy5nJiZwZCh0aGlzKTt9O2Z1bmN0aW9uIHBkKGEpe2EucmVhZHlTdGF0ZT00O2EubD1udWxsO2Euaj1udWxsO2EuQT1udWxsO29kKGEpO31rLnNldFJlcXVlc3RIZWFkZXI9ZnVuY3Rpb24oYSxiKXt0aGlzLnYuYXBwZW5kKGEsYik7fTtrLmdldFJlc3BvbnNlSGVhZGVyPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmg/dGhpcy5oLmdldChhLnRvTG93ZXJDYXNlKCkpfHxcIlwiOlwiXCJ9O1xuay5nZXRBbGxSZXNwb25zZUhlYWRlcnM9ZnVuY3Rpb24oKXtpZighdGhpcy5oKXJldHVybiBcIlwiO2NvbnN0IGE9W10sYj10aGlzLmguZW50cmllcygpO2Zvcih2YXIgYz1iLm5leHQoKTshYy5kb25lOyljPWMudmFsdWUsYS5wdXNoKGNbMF0rXCI6IFwiK2NbMV0pLGM9Yi5uZXh0KCk7cmV0dXJuIGEuam9pbihcIlxcclxcblwiKX07ZnVuY3Rpb24gb2QoYSl7YS5vbnJlYWR5c3RhdGVjaGFuZ2UmJmEub25yZWFkeXN0YXRlY2hhbmdlLmNhbGwoYSk7fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShtZC5wcm90b3R5cGUsXCJ3aXRoQ3JlZGVudGlhbHNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFwiaW5jbHVkZVwiPT09dGhpcy5tfSxzZXQ6ZnVuY3Rpb24oYSl7dGhpcy5tPWE/XCJpbmNsdWRlXCI6XCJzYW1lLW9yaWdpblwiO319KTt2YXIgcmQ9bC5KU09OLnBhcnNlO2Z1bmN0aW9uIFAoYSl7Qi5jYWxsKHRoaXMpO3RoaXMuaGVhZGVycz1uZXcgTWFwO3RoaXMudT1hfHxudWxsO3RoaXMuaD0hMTt0aGlzLkM9dGhpcy5nPW51bGw7dGhpcy5JPVwiXCI7dGhpcy5tPTA7dGhpcy5qPVwiXCI7dGhpcy5sPXRoaXMuRz10aGlzLnY9dGhpcy5GPSExO3RoaXMuQj0wO3RoaXMuQT1udWxsO3RoaXMuSz1zZDt0aGlzLkw9dGhpcy5NPSExO31yKFAsQik7dmFyIHNkPVwiXCIsdGQ9L15odHRwcz8kL2ksdWQ9W1wiUE9TVFwiLFwiUFVUXCJdO2s9UC5wcm90b3R5cGU7ay5PYT1mdW5jdGlvbihhKXt0aGlzLk09YTt9O1xuay5oYT1mdW5jdGlvbihhLGIsYyxkKXtpZih0aGlzLmcpdGhyb3cgRXJyb3IoXCJbZ29vZy5uZXQuWGhySW9dIE9iamVjdCBpcyBhY3RpdmUgd2l0aCBhbm90aGVyIHJlcXVlc3Q9XCIrdGhpcy5JK1wiOyBuZXdVcmk9XCIrYSk7Yj1iP2IudG9VcHBlckNhc2UoKTpcIkdFVFwiO3RoaXMuST1hO3RoaXMuaj1cIlwiO3RoaXMubT0wO3RoaXMuRj0hMTt0aGlzLmg9ITA7dGhpcy5nPXRoaXMudT90aGlzLnUuZygpOiRiLmcoKTt0aGlzLkM9dGhpcy51P1ZiKHRoaXMudSk6VmIoJGIpO3RoaXMuZy5vbnJlYWR5c3RhdGVjaGFuZ2U9cSh0aGlzLkxhLHRoaXMpO3RyeXt0aGlzLkc9ITAsdGhpcy5nLm9wZW4oYixTdHJpbmcoYSksITApLHRoaXMuRz0hMTt9Y2F0Y2goZil7dmQodGhpcyxmKTtyZXR1cm59YT1jfHxcIlwiO2M9bmV3IE1hcCh0aGlzLmhlYWRlcnMpO2lmKGQpaWYoT2JqZWN0LmdldFByb3RvdHlwZU9mKGQpPT09T2JqZWN0LnByb3RvdHlwZSlmb3IodmFyIGUgaW4gZCljLnNldChlLGRbZV0pO2Vsc2UgaWYoXCJmdW5jdGlvblwiPT09XG50eXBlb2YgZC5rZXlzJiZcImZ1bmN0aW9uXCI9PT10eXBlb2YgZC5nZXQpZm9yKGNvbnN0IGYgb2YgZC5rZXlzKCkpYy5zZXQoZixkLmdldChmKSk7ZWxzZSB0aHJvdyBFcnJvcihcIlVua25vd24gaW5wdXQgdHlwZSBmb3Igb3B0X2hlYWRlcnM6IFwiK1N0cmluZyhkKSk7ZD1BcnJheS5mcm9tKGMua2V5cygpKS5maW5kKGY9PlwiY29udGVudC10eXBlXCI9PWYudG9Mb3dlckNhc2UoKSk7ZT1sLkZvcm1EYXRhJiZhIGluc3RhbmNlb2YgbC5Gb3JtRGF0YTshKDA8PWthKHVkLGIpKXx8ZHx8ZXx8Yy5zZXQoXCJDb250ZW50LVR5cGVcIixcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDtjaGFyc2V0PXV0Zi04XCIpO2Zvcihjb25zdCBbZixoXW9mIGMpdGhpcy5nLnNldFJlcXVlc3RIZWFkZXIoZixoKTt0aGlzLksmJih0aGlzLmcucmVzcG9uc2VUeXBlPXRoaXMuSyk7XCJ3aXRoQ3JlZGVudGlhbHNcImluIHRoaXMuZyYmdGhpcy5nLndpdGhDcmVkZW50aWFscyE9PXRoaXMuTSYmKHRoaXMuZy53aXRoQ3JlZGVudGlhbHM9XG50aGlzLk0pO3RyeXt3ZCh0aGlzKSwwPHRoaXMuQiYmKCh0aGlzLkw9eGQodGhpcy5nKSk/KHRoaXMuZy50aW1lb3V0PXRoaXMuQix0aGlzLmcub250aW1lb3V0PXEodGhpcy51YSx0aGlzKSk6dGhpcy5BPXliKHRoaXMudWEsdGhpcy5CLHRoaXMpKSx0aGlzLnY9ITAsdGhpcy5nLnNlbmQoYSksdGhpcy52PSExO31jYXRjaChmKXt2ZCh0aGlzLGYpO319O2Z1bmN0aW9uIHhkKGEpe3JldHVybiB6JiZcIm51bWJlclwiPT09dHlwZW9mIGEudGltZW91dCYmdm9pZCAwIT09YS5vbnRpbWVvdXR9ay51YT1mdW5jdGlvbigpe1widW5kZWZpbmVkXCIhPXR5cGVvZiBnb29nJiZ0aGlzLmcmJih0aGlzLmo9XCJUaW1lZCBvdXQgYWZ0ZXIgXCIrdGhpcy5CK1wibXMsIGFib3J0aW5nXCIsdGhpcy5tPTgsQyh0aGlzLFwidGltZW91dFwiKSx0aGlzLmFib3J0KDgpKTt9O2Z1bmN0aW9uIHZkKGEsYil7YS5oPSExO2EuZyYmKGEubD0hMCxhLmcuYWJvcnQoKSxhLmw9ITEpO2Euaj1iO2EubT01O3lkKGEpO3pkKGEpO31cbmZ1bmN0aW9uIHlkKGEpe2EuRnx8KGEuRj0hMCxDKGEsXCJjb21wbGV0ZVwiKSxDKGEsXCJlcnJvclwiKSk7fWsuYWJvcnQ9ZnVuY3Rpb24oYSl7dGhpcy5nJiZ0aGlzLmgmJih0aGlzLmg9ITEsdGhpcy5sPSEwLHRoaXMuZy5hYm9ydCgpLHRoaXMubD0hMSx0aGlzLm09YXx8NyxDKHRoaXMsXCJjb21wbGV0ZVwiKSxDKHRoaXMsXCJhYm9ydFwiKSx6ZCh0aGlzKSk7fTtrLk49ZnVuY3Rpb24oKXt0aGlzLmcmJih0aGlzLmgmJih0aGlzLmg9ITEsdGhpcy5sPSEwLHRoaXMuZy5hYm9ydCgpLHRoaXMubD0hMSksemQodGhpcywhMCkpO1AuJC5OLmNhbGwodGhpcyk7fTtrLkxhPWZ1bmN0aW9uKCl7dGhpcy5zfHwodGhpcy5HfHx0aGlzLnZ8fHRoaXMubD9BZCh0aGlzKTp0aGlzLmtiKCkpO307ay5rYj1mdW5jdGlvbigpe0FkKHRoaXMpO307XG5mdW5jdGlvbiBBZChhKXtpZihhLmgmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBnb29nJiYoIWEuQ1sxXXx8NCE9SChhKXx8MiE9YS5kYSgpKSlpZihhLnYmJjQ9PUgoYSkpeWIoYS5MYSwwLGEpO2Vsc2UgaWYoQyhhLFwicmVhZHlzdGF0ZWNoYW5nZVwiKSw0PT1IKGEpKXthLmg9ITE7dHJ5e2NvbnN0IGg9YS5kYSgpO2E6c3dpdGNoKGgpe2Nhc2UgMjAwOmNhc2UgMjAxOmNhc2UgMjAyOmNhc2UgMjA0OmNhc2UgMjA2OmNhc2UgMzA0OmNhc2UgMTIyMzp2YXIgYj0hMDticmVhayBhO2RlZmF1bHQ6Yj0hMTt9dmFyIGM7aWYoIShjPWIpKXt2YXIgZDtpZihkPTA9PT1oKXt2YXIgZT1TdHJpbmcoYS5JKS5tYXRjaChMYylbMV18fG51bGw7IWUmJmwuc2VsZiYmbC5zZWxmLmxvY2F0aW9uJiYoZT1sLnNlbGYubG9jYXRpb24ucHJvdG9jb2wuc2xpY2UoMCwtMSkpO2Q9IXRkLnRlc3QoZT9lLnRvTG93ZXJDYXNlKCk6XCJcIik7fWM9ZDt9aWYoYylDKGEsXCJjb21wbGV0ZVwiKSxDKGEsXCJzdWNjZXNzXCIpO2Vsc2Uge2EubT1cbjY7dHJ5e3ZhciBmPTI8SChhKT9hLmcuc3RhdHVzVGV4dDpcIlwiO31jYXRjaChuKXtmPVwiXCI7fWEuaj1mK1wiIFtcIithLmRhKCkrXCJdXCI7eWQoYSk7fX1maW5hbGx5e3pkKGEpO319fWZ1bmN0aW9uIHpkKGEsYil7aWYoYS5nKXt3ZChhKTtjb25zdCBjPWEuZyxkPWEuQ1swXT8oKT0+e306bnVsbDthLmc9bnVsbDthLkM9bnVsbDtifHxDKGEsXCJyZWFkeVwiKTt0cnl7Yy5vbnJlYWR5c3RhdGVjaGFuZ2U9ZDt9Y2F0Y2goZSl7fX19ZnVuY3Rpb24gd2QoYSl7YS5nJiZhLkwmJihhLmcub250aW1lb3V0PW51bGwpO2EuQSYmKGwuY2xlYXJUaW1lb3V0KGEuQSksYS5BPW51bGwpO31rLmlzQWN0aXZlPWZ1bmN0aW9uKCl7cmV0dXJuICEhdGhpcy5nfTtmdW5jdGlvbiBIKGEpe3JldHVybiBhLmc/YS5nLnJlYWR5U3RhdGU6MH1rLmRhPWZ1bmN0aW9uKCl7dHJ5e3JldHVybiAyPEgodGhpcyk/dGhpcy5nLnN0YXR1czotMX1jYXRjaChhKXtyZXR1cm4gLTF9fTtcbmsuamE9ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIHRoaXMuZz90aGlzLmcucmVzcG9uc2VUZXh0OlwiXCJ9Y2F0Y2goYSl7cmV0dXJuIFwiXCJ9fTtrLldhPWZ1bmN0aW9uKGEpe2lmKHRoaXMuZyl7dmFyIGI9dGhpcy5nLnJlc3BvbnNlVGV4dDthJiYwPT1iLmluZGV4T2YoYSkmJihiPWIuc3Vic3RyaW5nKGEubGVuZ3RoKSk7cmV0dXJuIHJkKGIpfX07ZnVuY3Rpb24gbWMoYSl7dHJ5e2lmKCFhLmcpcmV0dXJuIG51bGw7aWYoXCJyZXNwb25zZVwiaW4gYS5nKXJldHVybiBhLmcucmVzcG9uc2U7c3dpdGNoKGEuSyl7Y2FzZSBzZDpjYXNlIFwidGV4dFwiOnJldHVybiBhLmcucmVzcG9uc2VUZXh0O2Nhc2UgXCJhcnJheWJ1ZmZlclwiOmlmKFwibW96UmVzcG9uc2VBcnJheUJ1ZmZlclwiaW4gYS5nKXJldHVybiBhLmcubW96UmVzcG9uc2VBcnJheUJ1ZmZlcn1yZXR1cm4gbnVsbH1jYXRjaChiKXtyZXR1cm4gbnVsbH19XG5mdW5jdGlvbiB0YyhhKXtjb25zdCBiPXt9O2E9KGEuZyYmMjw9SChhKT9hLmcuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCl8fFwiXCI6XCJcIikuc3BsaXQoXCJcXHJcXG5cIik7Zm9yKGxldCBkPTA7ZDxhLmxlbmd0aDtkKyspe2lmKHgoYVtkXSkpY29udGludWU7dmFyIGM9cWIoYVtkXSk7Y29uc3QgZT1jWzBdO2M9Y1sxXTtpZihcInN0cmluZ1wiIT09dHlwZW9mIGMpY29udGludWU7Yz1jLnRyaW0oKTtjb25zdCBmPWJbZV18fFtdO2JbZV09ZjtmLnB1c2goYyk7fU9hKGIsZnVuY3Rpb24oZCl7cmV0dXJuIGQuam9pbihcIiwgXCIpfSk7fWsuSWE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tfTtrLlNhPWZ1bmN0aW9uKCl7cmV0dXJuIFwic3RyaW5nXCI9PT10eXBlb2YgdGhpcy5qP3RoaXMuajpTdHJpbmcodGhpcy5qKX07ZnVuY3Rpb24gQmQoYSl7bGV0IGI9XCJcIjtOYShhLGZ1bmN0aW9uKGMsZCl7Yis9ZDtiKz1cIjpcIjtiKz1jO2IrPVwiXFxyXFxuXCI7fSk7cmV0dXJuIGJ9ZnVuY3Rpb24gQ2QoYSxiLGMpe2E6e2ZvcihkIGluIGMpe3ZhciBkPSExO2JyZWFrIGF9ZD0hMDt9ZHx8KGM9QmQoYyksXCJzdHJpbmdcIj09PXR5cGVvZiBhPyhudWxsIT1jJiZlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGMpKSk6SyhhLGIsYykpO31mdW5jdGlvbiBEZChhLGIsYyl7cmV0dXJuIGMmJmMuaW50ZXJuYWxDaGFubmVsUGFyYW1zP2MuaW50ZXJuYWxDaGFubmVsUGFyYW1zW2FdfHxiOmJ9XG5mdW5jdGlvbiBFZChhKXt0aGlzLkdhPTA7dGhpcy5qPVtdO3RoaXMubD1uZXcgR2I7dGhpcy5wYT10aGlzLndhPXRoaXMuST10aGlzLlk9dGhpcy5nPXRoaXMuRGE9dGhpcy5GPXRoaXMubmE9dGhpcy5vPXRoaXMuVT10aGlzLnM9bnVsbDt0aGlzLmZiPXRoaXMuVz0wO3RoaXMuY2I9RGQoXCJmYWlsRmFzdFwiLCExLGEpO3RoaXMuRz10aGlzLnY9dGhpcy51PXRoaXMubT10aGlzLmg9bnVsbDt0aGlzLmFhPSEwO3RoaXMuRmE9dGhpcy5WPS0xO3RoaXMuYmE9dGhpcy5BPXRoaXMuQz0wO3RoaXMuYWI9RGQoXCJiYXNlUmV0cnlEZWxheU1zXCIsNUUzLGEpO3RoaXMuaGI9RGQoXCJyZXRyeURlbGF5U2VlZE1zXCIsMUU0LGEpO3RoaXMuZWI9RGQoXCJmb3J3YXJkQ2hhbm5lbE1heFJldHJpZXNcIiwyLGEpO3RoaXMueGE9RGQoXCJmb3J3YXJkQ2hhbm5lbFJlcXVlc3RUaW1lb3V0TXNcIiwyRTQsYSk7dGhpcy52YT1hJiZhLnhtbEh0dHBGYWN0b3J5fHx2b2lkIDA7dGhpcy5IYT1hJiZhLnVzZUZldGNoU3RyZWFtc3x8XG4hMTt0aGlzLkw9dm9pZCAwO3RoaXMuSj1hJiZhLnN1cHBvcnRzQ3Jvc3NEb21haW5YaHJ8fCExO3RoaXMuSz1cIlwiO3RoaXMuaT1uZXcgY2QoYSYmYS5jb25jdXJyZW50UmVxdWVzdExpbWl0KTt0aGlzLkphPW5ldyBoZDt0aGlzLlA9YSYmYS5mYXN0SGFuZHNoYWtlfHwhMTt0aGlzLk89YSYmYS5lbmNvZGVJbml0TWVzc2FnZUhlYWRlcnN8fCExO3RoaXMuUCYmdGhpcy5PJiYodGhpcy5PPSExKTt0aGlzLmJiPWEmJmEuYmN8fCExO2EmJmEuRWEmJnRoaXMubC5FYSgpO2EmJmEuZm9yY2VMb25nUG9sbGluZyYmKHRoaXMuYWE9ITEpO3RoaXMuY2E9IXRoaXMuUCYmdGhpcy5hYSYmYSYmYS5kZXRlY3RCdWZmZXJpbmdQcm94eXx8ITE7dGhpcy5xYT12b2lkIDA7YSYmYS5sb25nUG9sbGluZ1RpbWVvdXQmJjA8YS5sb25nUG9sbGluZ1RpbWVvdXQmJih0aGlzLnFhPWEubG9uZ1BvbGxpbmdUaW1lb3V0KTt0aGlzLm9hPXZvaWQgMDt0aGlzLlM9MDt0aGlzLk09ITE7dGhpcy5tYT10aGlzLkI9bnVsbDt9XG5rPUVkLnByb3RvdHlwZTtrLnJhPTg7ay5IPTE7ZnVuY3Rpb24gSGMoYSl7RmQoYSk7aWYoMz09YS5IKXt2YXIgYj1hLlcrKyxjPUcoYS5JKTtLKGMsXCJTSURcIixhLkspO0soYyxcIlJJRFwiLGIpO0soYyxcIlRZUEVcIixcInRlcm1pbmF0ZVwiKTtHZChhLGMpO2I9bmV3IGJjKGEsYS5sLGIpO2IuTD0yO2IuQT1oYyhHKGMpKTtjPSExO2lmKGwubmF2aWdhdG9yJiZsLm5hdmlnYXRvci5zZW5kQmVhY29uKXRyeXtjPWwubmF2aWdhdG9yLnNlbmRCZWFjb24oYi5BLnRvU3RyaW5nKCksXCJcIik7fWNhdGNoKGQpe30hYyYmbC5JbWFnZSYmKChuZXcgSW1hZ2UpLnNyYz1iLkEsYz0hMCk7Y3x8KGIuZz1sYyhiLmwsbnVsbCksYi5nLmhhKGIuQSkpO2IuRz1EYXRlLm5vdygpO2pjKGIpO31IZChhKTt9ZnVuY3Rpb24gemMoYSl7YS5nJiYodmMoYSksYS5nLmNhbmNlbCgpLGEuZz1udWxsKTt9XG5mdW5jdGlvbiBGZChhKXt6YyhhKTthLnUmJihsLmNsZWFyVGltZW91dChhLnUpLGEudT1udWxsKTt5YyhhKTthLmkuY2FuY2VsKCk7YS5tJiYoXCJudW1iZXJcIj09PXR5cGVvZiBhLm0mJmwuY2xlYXJUaW1lb3V0KGEubSksYS5tPW51bGwpO31mdW5jdGlvbiBHYyhhKXtpZighZWQoYS5pKSYmIWEubSl7YS5tPSEwO3ZhciBiPWEuTmE7c2J8fHZiKCk7dGJ8fChzYigpLHRiPSEwKTttYi5hZGQoYixhKTthLkM9MDt9fWZ1bmN0aW9uIElkKGEsYil7aWYoQmMoYS5pKT49YS5pLmotKGEubT8xOjApKXJldHVybiAhMTtpZihhLm0pcmV0dXJuIGEuaj1iLkYuY29uY2F0KGEuaiksITA7aWYoMT09YS5IfHwyPT1hLkh8fGEuQz49KGEuY2I/MDphLmViKSlyZXR1cm4gITE7YS5tPVJiKHEoYS5OYSxhLGIpLEpkKGEsYS5DKSk7YS5DKys7cmV0dXJuICEwfVxuay5OYT1mdW5jdGlvbihhKXtpZih0aGlzLm0paWYodGhpcy5tPW51bGwsMT09dGhpcy5IKXtpZighYSl7dGhpcy5XPU1hdGguZmxvb3IoMUU1Kk1hdGgucmFuZG9tKCkpO2E9dGhpcy5XKys7Y29uc3QgZT1uZXcgYmModGhpcyx0aGlzLmwsYSk7bGV0IGY9dGhpcy5zO3RoaXMuVSYmKGY/KGY9UGEoZiksUmEoZix0aGlzLlUpKTpmPXRoaXMuVSk7bnVsbCE9PXRoaXMub3x8dGhpcy5PfHwoZS5JPWYsZj1udWxsKTtpZih0aGlzLlApYTp7dmFyIGI9MDtmb3IodmFyIGM9MDtjPHRoaXMuai5sZW5ndGg7YysrKXtiOnt2YXIgZD10aGlzLmpbY107aWYoXCJfX2RhdGFfX1wiaW4gZC5tYXAmJihkPWQubWFwLl9fZGF0YV9fLFwic3RyaW5nXCI9PT10eXBlb2YgZCkpe2Q9ZC5sZW5ndGg7YnJlYWsgYn1kPXZvaWQgMDt9aWYodm9pZCAwPT09ZClicmVhaztiKz1kO2lmKDQwOTY8Yil7Yj1jO2JyZWFrIGF9aWYoNDA5Nj09PWJ8fGM9PT10aGlzLmoubGVuZ3RoLTEpe2I9YysxO2JyZWFrIGF9fWI9MUUzO31lbHNlIGI9XG4xRTM7Yj1LZCh0aGlzLGUsYik7Yz1HKHRoaXMuSSk7SyhjLFwiUklEXCIsYSk7SyhjLFwiQ1ZFUlwiLDIyKTt0aGlzLkYmJksoYyxcIlgtSFRUUC1TZXNzaW9uLUlkXCIsdGhpcy5GKTtHZCh0aGlzLGMpO2YmJih0aGlzLk8/Yj1cImhlYWRlcnM9XCIrZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhCZChmKSkpK1wiJlwiK2I6dGhpcy5vJiZDZChjLHRoaXMubyxmKSk7Q2ModGhpcy5pLGUpO3RoaXMuYmImJksoYyxcIlRZUEVcIixcImluaXRcIik7dGhpcy5QPyhLKGMsXCIkcmVxXCIsYiksSyhjLFwiU0lEXCIsXCJudWxsXCIpLGUuYWE9ITAsZ2MoZSxjLG51bGwpKTpnYyhlLGMsYik7dGhpcy5IPTI7fX1lbHNlIDM9PXRoaXMuSCYmKGE/TGQodGhpcyxhKTowPT10aGlzLmoubGVuZ3RofHxlZCh0aGlzLmkpfHxMZCh0aGlzKSk7fTtcbmZ1bmN0aW9uIExkKGEsYil7dmFyIGM7Yj9jPWIubTpjPWEuVysrO2NvbnN0IGQ9RyhhLkkpO0soZCxcIlNJRFwiLGEuSyk7SyhkLFwiUklEXCIsYyk7SyhkLFwiQUlEXCIsYS5WKTtHZChhLGQpO2EubyYmYS5zJiZDZChkLGEubyxhLnMpO2M9bmV3IGJjKGEsYS5sLGMsYS5DKzEpO251bGw9PT1hLm8mJihjLkk9YS5zKTtiJiYoYS5qPWIuRi5jb25jYXQoYS5qKSk7Yj1LZChhLGMsMUUzKTtjLnNldFRpbWVvdXQoTWF0aC5yb3VuZCguNSphLnhhKStNYXRoLnJvdW5kKC41KmEueGEqTWF0aC5yYW5kb20oKSkpO0NjKGEuaSxjKTtnYyhjLGQsYik7fWZ1bmN0aW9uIEdkKGEsYil7YS5uYSYmTmEoYS5uYSxmdW5jdGlvbihjLGQpe0soYixkLGMpO30pO2EuaCYmS2Moe30sZnVuY3Rpb24oYyxkKXtLKGIsZCxjKTt9KTt9XG5mdW5jdGlvbiBLZChhLGIsYyl7Yz1NYXRoLm1pbihhLmoubGVuZ3RoLGMpO3ZhciBkPWEuaD9xKGEuaC5WYSxhLmgsYSk6bnVsbDthOnt2YXIgZT1hLmo7bGV0IGY9LTE7Zm9yKDs7KXtjb25zdCBoPVtcImNvdW50PVwiK2NdOy0xPT1mPzA8Yz8oZj1lWzBdLmcsaC5wdXNoKFwib2ZzPVwiK2YpKTpmPTA6aC5wdXNoKFwib2ZzPVwiK2YpO2xldCBuPSEwO2ZvcihsZXQgdD0wO3Q8Yzt0Kyspe2xldCBtPWVbdF0uZztjb25zdCB1PWVbdF0ubWFwO20tPWY7aWYoMD5tKWY9TWF0aC5tYXgoMCxlW3RdLmctMTAwKSxuPSExO2Vsc2UgdHJ5e2lkKHUsaCxcInJlcVwiK20rXCJfXCIpO31jYXRjaChMKXtkJiZkKHUpO319aWYobil7ZD1oLmpvaW4oXCImXCIpO2JyZWFrIGF9fX1hPWEuai5zcGxpY2UoMCxjKTtiLkY9YTtyZXR1cm4gZH1mdW5jdGlvbiBGYyhhKXtpZighYS5nJiYhYS51KXthLmJhPTE7dmFyIGI9YS5NYTtzYnx8dmIoKTt0Ynx8KHNiKCksdGI9ITApO21iLmFkZChiLGEpO2EuQT0wO319XG5mdW5jdGlvbiBBYyhhKXtpZihhLmd8fGEudXx8Mzw9YS5BKXJldHVybiAhMTthLmJhKys7YS51PVJiKHEoYS5NYSxhKSxKZChhLGEuQSkpO2EuQSsrO3JldHVybiAhMH1rLk1hPWZ1bmN0aW9uKCl7dGhpcy51PW51bGw7TWQodGhpcyk7aWYodGhpcy5jYSYmISh0aGlzLk18fG51bGw9PXRoaXMuZ3x8MD49dGhpcy5TKSl7dmFyIGE9Mip0aGlzLlM7dGhpcy5sLmluZm8oXCJCUCBkZXRlY3Rpb24gdGltZXIgZW5hYmxlZDogXCIrYSk7dGhpcy5CPVJiKHEodGhpcy5qYix0aGlzKSxhKTt9fTtrLmpiPWZ1bmN0aW9uKCl7dGhpcy5CJiYodGhpcy5CPW51bGwsdGhpcy5sLmluZm8oXCJCUCBkZXRlY3Rpb24gdGltZW91dCByZWFjaGVkLlwiKSx0aGlzLmwuaW5mbyhcIkJ1ZmZlcmluZyBwcm94eSBkZXRlY3RlZCBhbmQgc3dpdGNoIHRvIGxvbmctcG9sbGluZyFcIiksdGhpcy5HPSExLHRoaXMuTT0hMCxGKDEwKSx6Yyh0aGlzKSxNZCh0aGlzKSk7fTtcbmZ1bmN0aW9uIHZjKGEpe251bGwhPWEuQiYmKGwuY2xlYXJUaW1lb3V0KGEuQiksYS5CPW51bGwpO31mdW5jdGlvbiBNZChhKXthLmc9bmV3IGJjKGEsYS5sLFwicnBjXCIsYS5iYSk7bnVsbD09PWEubyYmKGEuZy5JPWEucyk7YS5nLk89MDt2YXIgYj1HKGEud2EpO0soYixcIlJJRFwiLFwicnBjXCIpO0soYixcIlNJRFwiLGEuSyk7SyhiLFwiQUlEXCIsYS5WKTtLKGIsXCJDSVwiLGEuRz9cIjBcIjpcIjFcIik7IWEuRyYmYS5xYSYmSyhiLFwiVE9cIixhLnFhKTtLKGIsXCJUWVBFXCIsXCJ4bWxodHRwXCIpO0dkKGEsYik7YS5vJiZhLnMmJkNkKGIsYS5vLGEucyk7YS5MJiZhLmcuc2V0VGltZW91dChhLkwpO3ZhciBjPWEuZzthPWEucGE7Yy5MPTE7Yy5BPWhjKEcoYikpO2MudT1udWxsO2MuUz0hMDtpYyhjLGEpO31rLmliPWZ1bmN0aW9uKCl7bnVsbCE9dGhpcy52JiYodGhpcy52PW51bGwsemModGhpcyksQWModGhpcyksRigxOSkpO307XG5mdW5jdGlvbiB5YyhhKXtudWxsIT1hLnYmJihsLmNsZWFyVGltZW91dChhLnYpLGEudj1udWxsKTt9ZnVuY3Rpb24gc2MoYSxiKXt2YXIgYz1udWxsO2lmKGEuZz09Yil7eWMoYSk7dmMoYSk7YS5nPW51bGw7dmFyIGQ9Mjt9ZWxzZSBpZih4YyhhLmksYikpYz1iLkYsRWMoYS5pLGIpLGQ9MTtlbHNlIHJldHVybjtpZigwIT1hLkgpaWYoYi5pKWlmKDE9PWQpe2M9Yi51P2IudS5sZW5ndGg6MDtiPURhdGUubm93KCktYi5HO3ZhciBlPWEuQztkPU1iKCk7QyhkLG5ldyBRYihkLGMpKTtHYyhhKTt9ZWxzZSBGYyhhKTtlbHNlIGlmKGU9Yi5zLDM9PWV8fDA9PWUmJjA8Yi5jYXx8ISgxPT1kJiZJZChhLGIpfHwyPT1kJiZBYyhhKSkpc3dpdGNoKGMmJjA8Yy5sZW5ndGgmJihiPWEuaSxiLmk9Yi5pLmNvbmNhdChjKSksZSl7Y2FzZSAxOkooYSw1KTticmVhaztjYXNlIDQ6SihhLDEwKTticmVhaztjYXNlIDM6SihhLDYpO2JyZWFrO2RlZmF1bHQ6SihhLDIpO319XG5mdW5jdGlvbiBKZChhLGIpe2xldCBjPWEuYWIrTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKmEuaGIpO2EuaXNBY3RpdmUoKXx8KGMqPTIpO3JldHVybiBjKmJ9ZnVuY3Rpb24gSihhLGIpe2EubC5pbmZvKFwiRXJyb3IgY29kZSBcIitiKTtpZigyPT1iKXt2YXIgYz1udWxsO2EuaCYmKGM9bnVsbCk7dmFyIGQ9cShhLnBiLGEpO2N8fChjPW5ldyBNKFwiLy93d3cuZ29vZ2xlLmNvbS9pbWFnZXMvY2xlYXJkb3QuZ2lmXCIpLGwubG9jYXRpb24mJlwiaHR0cFwiPT1sLmxvY2F0aW9uLnByb3RvY29sfHxOYyhjLFwiaHR0cHNcIiksaGMoYykpO2pkKGMudG9TdHJpbmcoKSxkKTt9ZWxzZSBGKDIpO2EuSD0wO2EuaCYmYS5oLnphKGIpO0hkKGEpO0ZkKGEpO31rLnBiPWZ1bmN0aW9uKGEpe2E/KHRoaXMubC5pbmZvKFwiU3VjY2Vzc2Z1bGx5IHBpbmdlZCBnb29nbGUuY29tXCIpLEYoMikpOih0aGlzLmwuaW5mbyhcIkZhaWxlZCB0byBwaW5nIGdvb2dsZS5jb21cIiksRigxKSk7fTtcbmZ1bmN0aW9uIEhkKGEpe2EuSD0wO2EubWE9W107aWYoYS5oKXtjb25zdCBiPWZkKGEuaSk7aWYoMCE9Yi5sZW5ndGh8fDAhPWEuai5sZW5ndGgpbmEoYS5tYSxiKSxuYShhLm1hLGEuaiksYS5pLmkubGVuZ3RoPTAsbWEoYS5qKSxhLmoubGVuZ3RoPTA7YS5oLnlhKCk7fX1mdW5jdGlvbiBEYyhhLGIsYyl7dmFyIGQ9YyBpbnN0YW5jZW9mIE0/RyhjKTpuZXcgTShjKTtpZihcIlwiIT1kLmcpYiYmKGQuZz1iK1wiLlwiK2QuZyksT2MoZCxkLm0pO2Vsc2Uge3ZhciBlPWwubG9jYXRpb247ZD1lLnByb3RvY29sO2I9Yj9iK1wiLlwiK2UuaG9zdG5hbWU6ZS5ob3N0bmFtZTtlPStlLnBvcnQ7dmFyIGY9bmV3IE0obnVsbCk7ZCYmTmMoZixkKTtiJiYoZi5nPWIpO2UmJk9jKGYsZSk7YyYmKGYubD1jKTtkPWY7fWM9YS5GO2I9YS5EYTtjJiZiJiZLKGQsYyxiKTtLKGQsXCJWRVJcIixhLnJhKTtHZChhLGQpO3JldHVybiBkfVxuZnVuY3Rpb24gbGMoYSxiLGMpe2lmKGImJiFhLkopdGhyb3cgRXJyb3IoXCJDYW4ndCBjcmVhdGUgc2Vjb25kYXJ5IGRvbWFpbiBjYXBhYmxlIFhocklvIG9iamVjdC5cIik7Yj1hLkhhJiYhYS52YT9uZXcgUChuZXcgbGQoe29iOmN9KSk6bmV3IFAoYS52YSk7Yi5PYShhLkopO3JldHVybiBifWsuaXNBY3RpdmU9ZnVuY3Rpb24oKXtyZXR1cm4gISF0aGlzLmgmJnRoaXMuaC5pc0FjdGl2ZSh0aGlzKX07ZnVuY3Rpb24gTmQoKXt9az1OZC5wcm90b3R5cGU7ay5CYT1mdW5jdGlvbigpe307ay5BYT1mdW5jdGlvbigpe307ay56YT1mdW5jdGlvbigpe307ay55YT1mdW5jdGlvbigpe307ay5pc0FjdGl2ZT1mdW5jdGlvbigpe3JldHVybiAhMH07ay5WYT1mdW5jdGlvbigpe307ZnVuY3Rpb24gT2QoKXtpZih6JiYhKDEwPD1OdW1iZXIoRmEpKSl0aHJvdyBFcnJvcihcIkVudmlyb25tZW50YWwgZXJyb3I6IG5vIGF2YWlsYWJsZSB0cmFuc3BvcnQuXCIpO31PZC5wcm90b3R5cGUuZz1mdW5jdGlvbihhLGIpe3JldHVybiBuZXcgUShhLGIpfTtcbmZ1bmN0aW9uIFEoYSxiKXtCLmNhbGwodGhpcyk7dGhpcy5nPW5ldyBFZChiKTt0aGlzLmw9YTt0aGlzLmg9YiYmYi5tZXNzYWdlVXJsUGFyYW1zfHxudWxsO2E9YiYmYi5tZXNzYWdlSGVhZGVyc3x8bnVsbDtiJiZiLmNsaWVudFByb3RvY29sSGVhZGVyUmVxdWlyZWQmJihhP2FbXCJYLUNsaWVudC1Qcm90b2NvbFwiXT1cIndlYmNoYW5uZWxcIjphPXtcIlgtQ2xpZW50LVByb3RvY29sXCI6XCJ3ZWJjaGFubmVsXCJ9KTt0aGlzLmcucz1hO2E9YiYmYi5pbml0TWVzc2FnZUhlYWRlcnN8fG51bGw7YiYmYi5tZXNzYWdlQ29udGVudFR5cGUmJihhP2FbXCJYLVdlYkNoYW5uZWwtQ29udGVudC1UeXBlXCJdPWIubWVzc2FnZUNvbnRlbnRUeXBlOmE9e1wiWC1XZWJDaGFubmVsLUNvbnRlbnQtVHlwZVwiOmIubWVzc2FnZUNvbnRlbnRUeXBlfSk7YiYmYi5DYSYmKGE/YVtcIlgtV2ViQ2hhbm5lbC1DbGllbnQtUHJvZmlsZVwiXT1iLkNhOmE9e1wiWC1XZWJDaGFubmVsLUNsaWVudC1Qcm9maWxlXCI6Yi5DYX0pO3RoaXMuZy5VPVxuYTsoYT1iJiZiLmNjKSYmIXgoYSkmJih0aGlzLmcubz1hKTt0aGlzLkE9YiYmYi5zdXBwb3J0c0Nyb3NzRG9tYWluWGhyfHwhMTt0aGlzLnY9YiYmYi5zZW5kUmF3SnNvbnx8ITE7KGI9YiYmYi5odHRwU2Vzc2lvbklkUGFyYW0pJiYheChiKSYmKHRoaXMuZy5GPWIsYT10aGlzLmgsbnVsbCE9PWEmJmIgaW4gYSYmKGE9dGhpcy5oLGIgaW4gYSYmZGVsZXRlIGFbYl0pKTt0aGlzLmo9bmV3IFIodGhpcyk7fXIoUSxCKTtRLnByb3RvdHlwZS5tPWZ1bmN0aW9uKCl7dGhpcy5nLmg9dGhpcy5qO3RoaXMuQSYmKHRoaXMuZy5KPSEwKTt2YXIgYT10aGlzLmcsYj10aGlzLmwsYz10aGlzLmh8fHZvaWQgMDtGKDApO2EuWT1iO2EubmE9Y3x8e307YS5HPWEuYWE7YS5JPURjKGEsbnVsbCxhLlkpO0djKGEpO307US5wcm90b3R5cGUuY2xvc2U9ZnVuY3Rpb24oKXtIYyh0aGlzLmcpO307XG5RLnByb3RvdHlwZS51PWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZztpZihcInN0cmluZ1wiPT09dHlwZW9mIGEpe3ZhciBjPXt9O2MuX19kYXRhX189YTthPWM7fWVsc2UgdGhpcy52JiYoYz17fSxjLl9fZGF0YV9fPWpiKGEpLGE9Yyk7Yi5qLnB1c2gobmV3IGJkKGIuZmIrKyxhKSk7Mz09Yi5IJiZHYyhiKTt9O1EucHJvdG90eXBlLk49ZnVuY3Rpb24oKXt0aGlzLmcuaD1udWxsO2RlbGV0ZSB0aGlzLmo7SGModGhpcy5nKTtkZWxldGUgdGhpcy5nO1EuJC5OLmNhbGwodGhpcyk7fTtcbmZ1bmN0aW9uIFBkKGEpe1liLmNhbGwodGhpcyk7YS5fX2hlYWRlcnNfXyYmKHRoaXMuaGVhZGVycz1hLl9faGVhZGVyc19fLHRoaXMuc3RhdHVzQ29kZT1hLl9fc3RhdHVzX18sZGVsZXRlIGEuX19oZWFkZXJzX18sZGVsZXRlIGEuX19zdGF0dXNfXyk7dmFyIGI9YS5fX3NtX187aWYoYil7YTp7Zm9yKGNvbnN0IGMgaW4gYil7YT1jO2JyZWFrIGF9YT12b2lkIDA7fWlmKHRoaXMuaT1hKWE9dGhpcy5pLGI9bnVsbCE9PWImJmEgaW4gYj9iW2FdOnZvaWQgMDt0aGlzLmRhdGE9Yjt9ZWxzZSB0aGlzLmRhdGE9YTt9cihQZCxZYik7ZnVuY3Rpb24gUWQoKXtaYi5jYWxsKHRoaXMpO3RoaXMuc3RhdHVzPTE7fXIoUWQsWmIpO2Z1bmN0aW9uIFIoYSl7dGhpcy5nPWE7fXIoUixOZCk7Ui5wcm90b3R5cGUuQmE9ZnVuY3Rpb24oKXtDKHRoaXMuZyxcImFcIik7fTtSLnByb3RvdHlwZS5BYT1mdW5jdGlvbihhKXtDKHRoaXMuZyxuZXcgUGQoYSkpO307XG5SLnByb3RvdHlwZS56YT1mdW5jdGlvbihhKXtDKHRoaXMuZyxuZXcgUWQoKSk7fTtSLnByb3RvdHlwZS55YT1mdW5jdGlvbigpe0ModGhpcy5nLFwiYlwiKTt9O2Z1bmN0aW9uIFJkKCl7dGhpcy5ibG9ja1NpemU9LTE7fWZ1bmN0aW9uIFMoKXt0aGlzLmJsb2NrU2l6ZT0tMTt0aGlzLmJsb2NrU2l6ZT02NDt0aGlzLmc9QXJyYXkoNCk7dGhpcy5tPUFycmF5KHRoaXMuYmxvY2tTaXplKTt0aGlzLmk9dGhpcy5oPTA7dGhpcy5yZXNldCgpO31yKFMsUmQpO1MucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7dGhpcy5nWzBdPTE3MzI1ODQxOTM7dGhpcy5nWzFdPTQwMjMyMzM0MTc7dGhpcy5nWzJdPTI1NjIzODMxMDI7dGhpcy5nWzNdPTI3MTczMzg3ODt0aGlzLmk9dGhpcy5oPTA7fTtcbmZ1bmN0aW9uIFNkKGEsYixjKXtjfHwoYz0wKTt2YXIgZD1BcnJheSgxNik7aWYoXCJzdHJpbmdcIj09PXR5cGVvZiBiKWZvcih2YXIgZT0wOzE2PmU7KytlKWRbZV09Yi5jaGFyQ29kZUF0KGMrKyl8Yi5jaGFyQ29kZUF0KGMrKyk8PDh8Yi5jaGFyQ29kZUF0KGMrKyk8PDE2fGIuY2hhckNvZGVBdChjKyspPDwyNDtlbHNlIGZvcihlPTA7MTY+ZTsrK2UpZFtlXT1iW2MrK118YltjKytdPDw4fGJbYysrXTw8MTZ8YltjKytdPDwyNDtiPWEuZ1swXTtjPWEuZ1sxXTtlPWEuZ1syXTt2YXIgZj1hLmdbM107dmFyIGg9YisoZl5jJihlXmYpKStkWzBdKzM2MTQwOTAzNjAmNDI5NDk2NzI5NTtiPWMrKGg8PDcmNDI5NDk2NzI5NXxoPj4+MjUpO2g9ZisoZV5iJihjXmUpKStkWzFdKzM5MDU0MDI3MTAmNDI5NDk2NzI5NTtmPWIrKGg8PDEyJjQyOTQ5NjcyOTV8aD4+PjIwKTtoPWUrKGNeZiYoYl5jKSkrZFsyXSs2MDYxMDU4MTkmNDI5NDk2NzI5NTtlPWYrKGg8PDE3JjQyOTQ5NjcyOTV8aD4+PjE1KTtcbmg9YysoYl5lJihmXmIpKStkWzNdKzMyNTA0NDE5NjYmNDI5NDk2NzI5NTtjPWUrKGg8PDIyJjQyOTQ5NjcyOTV8aD4+PjEwKTtoPWIrKGZeYyYoZV5mKSkrZFs0XSs0MTE4NTQ4Mzk5JjQyOTQ5NjcyOTU7Yj1jKyhoPDw3JjQyOTQ5NjcyOTV8aD4+PjI1KTtoPWYrKGVeYiYoY15lKSkrZFs1XSsxMjAwMDgwNDI2JjQyOTQ5NjcyOTU7Zj1iKyhoPDwxMiY0Mjk0OTY3Mjk1fGg+Pj4yMCk7aD1lKyhjXmYmKGJeYykpK2RbNl0rMjgyMTczNTk1NSY0Mjk0OTY3Mjk1O2U9ZisoaDw8MTcmNDI5NDk2NzI5NXxoPj4+MTUpO2g9YysoYl5lJihmXmIpKStkWzddKzQyNDkyNjEzMTMmNDI5NDk2NzI5NTtjPWUrKGg8PDIyJjQyOTQ5NjcyOTV8aD4+PjEwKTtoPWIrKGZeYyYoZV5mKSkrZFs4XSsxNzcwMDM1NDE2JjQyOTQ5NjcyOTU7Yj1jKyhoPDw3JjQyOTQ5NjcyOTV8aD4+PjI1KTtoPWYrKGVeYiYoY15lKSkrZFs5XSsyMzM2NTUyODc5JjQyOTQ5NjcyOTU7Zj1iKyhoPDwxMiY0Mjk0OTY3Mjk1fFxuaD4+PjIwKTtoPWUrKGNeZiYoYl5jKSkrZFsxMF0rNDI5NDkyNTIzMyY0Mjk0OTY3Mjk1O2U9ZisoaDw8MTcmNDI5NDk2NzI5NXxoPj4+MTUpO2g9YysoYl5lJihmXmIpKStkWzExXSsyMzA0NTYzMTM0JjQyOTQ5NjcyOTU7Yz1lKyhoPDwyMiY0Mjk0OTY3Mjk1fGg+Pj4xMCk7aD1iKyhmXmMmKGVeZikpK2RbMTJdKzE4MDQ2MDM2ODImNDI5NDk2NzI5NTtiPWMrKGg8PDcmNDI5NDk2NzI5NXxoPj4+MjUpO2g9ZisoZV5iJihjXmUpKStkWzEzXSs0MjU0NjI2MTk1JjQyOTQ5NjcyOTU7Zj1iKyhoPDwxMiY0Mjk0OTY3Mjk1fGg+Pj4yMCk7aD1lKyhjXmYmKGJeYykpK2RbMTRdKzI3OTI5NjUwMDYmNDI5NDk2NzI5NTtlPWYrKGg8PDE3JjQyOTQ5NjcyOTV8aD4+PjE1KTtoPWMrKGJeZSYoZl5iKSkrZFsxNV0rMTIzNjUzNTMyOSY0Mjk0OTY3Mjk1O2M9ZSsoaDw8MjImNDI5NDk2NzI5NXxoPj4+MTApO2g9YisoZV5mJihjXmUpKStkWzFdKzQxMjkxNzA3ODYmNDI5NDk2NzI5NTtiPWMrKGg8PFxuNSY0Mjk0OTY3Mjk1fGg+Pj4yNyk7aD1mKyhjXmUmKGJeYykpK2RbNl0rMzIyNTQ2NTY2NCY0Mjk0OTY3Mjk1O2Y9YisoaDw8OSY0Mjk0OTY3Mjk1fGg+Pj4yMyk7aD1lKyhiXmMmKGZeYikpK2RbMTFdKzY0MzcxNzcxMyY0Mjk0OTY3Mjk1O2U9ZisoaDw8MTQmNDI5NDk2NzI5NXxoPj4+MTgpO2g9YysoZl5iJihlXmYpKStkWzBdKzM5MjEwNjk5OTQmNDI5NDk2NzI5NTtjPWUrKGg8PDIwJjQyOTQ5NjcyOTV8aD4+PjEyKTtoPWIrKGVeZiYoY15lKSkrZFs1XSszNTkzNDA4NjA1JjQyOTQ5NjcyOTU7Yj1jKyhoPDw1JjQyOTQ5NjcyOTV8aD4+PjI3KTtoPWYrKGNeZSYoYl5jKSkrZFsxMF0rMzgwMTYwODMmNDI5NDk2NzI5NTtmPWIrKGg8PDkmNDI5NDk2NzI5NXxoPj4+MjMpO2g9ZSsoYl5jJihmXmIpKStkWzE1XSszNjM0NDg4OTYxJjQyOTQ5NjcyOTU7ZT1mKyhoPDwxNCY0Mjk0OTY3Mjk1fGg+Pj4xOCk7aD1jKyhmXmImKGVeZikpK2RbNF0rMzg4OTQyOTQ0OCY0Mjk0OTY3Mjk1O2M9XG5lKyhoPDwyMCY0Mjk0OTY3Mjk1fGg+Pj4xMik7aD1iKyhlXmYmKGNeZSkpK2RbOV0rNTY4NDQ2NDM4JjQyOTQ5NjcyOTU7Yj1jKyhoPDw1JjQyOTQ5NjcyOTV8aD4+PjI3KTtoPWYrKGNeZSYoYl5jKSkrZFsxNF0rMzI3NTE2MzYwNiY0Mjk0OTY3Mjk1O2Y9YisoaDw8OSY0Mjk0OTY3Mjk1fGg+Pj4yMyk7aD1lKyhiXmMmKGZeYikpK2RbM10rNDEwNzYwMzMzNSY0Mjk0OTY3Mjk1O2U9ZisoaDw8MTQmNDI5NDk2NzI5NXxoPj4+MTgpO2g9YysoZl5iJihlXmYpKStkWzhdKzExNjM1MzE1MDEmNDI5NDk2NzI5NTtjPWUrKGg8PDIwJjQyOTQ5NjcyOTV8aD4+PjEyKTtoPWIrKGVeZiYoY15lKSkrZFsxM10rMjg1MDI4NTgyOSY0Mjk0OTY3Mjk1O2I9YysoaDw8NSY0Mjk0OTY3Mjk1fGg+Pj4yNyk7aD1mKyhjXmUmKGJeYykpK2RbMl0rNDI0MzU2MzUxMiY0Mjk0OTY3Mjk1O2Y9YisoaDw8OSY0Mjk0OTY3Mjk1fGg+Pj4yMyk7aD1lKyhiXmMmKGZeYikpK2RbN10rMTczNTMyODQ3MyY0Mjk0OTY3Mjk1O1xuZT1mKyhoPDwxNCY0Mjk0OTY3Mjk1fGg+Pj4xOCk7aD1jKyhmXmImKGVeZikpK2RbMTJdKzIzNjgzNTk1NjImNDI5NDk2NzI5NTtjPWUrKGg8PDIwJjQyOTQ5NjcyOTV8aD4+PjEyKTtoPWIrKGNeZV5mKStkWzVdKzQyOTQ1ODg3MzgmNDI5NDk2NzI5NTtiPWMrKGg8PDQmNDI5NDk2NzI5NXxoPj4+MjgpO2g9ZisoYl5jXmUpK2RbOF0rMjI3MjM5MjgzMyY0Mjk0OTY3Mjk1O2Y9YisoaDw8MTEmNDI5NDk2NzI5NXxoPj4+MjEpO2g9ZSsoZl5iXmMpK2RbMTFdKzE4MzkwMzA1NjImNDI5NDk2NzI5NTtlPWYrKGg8PDE2JjQyOTQ5NjcyOTV8aD4+PjE2KTtoPWMrKGVeZl5iKStkWzE0XSs0MjU5NjU3NzQwJjQyOTQ5NjcyOTU7Yz1lKyhoPDwyMyY0Mjk0OTY3Mjk1fGg+Pj45KTtoPWIrKGNeZV5mKStkWzFdKzI3NjM5NzUyMzYmNDI5NDk2NzI5NTtiPWMrKGg8PDQmNDI5NDk2NzI5NXxoPj4+MjgpO2g9ZisoYl5jXmUpK2RbNF0rMTI3Mjg5MzM1MyY0Mjk0OTY3Mjk1O2Y9YisoaDw8MTEmNDI5NDk2NzI5NXxcbmg+Pj4yMSk7aD1lKyhmXmJeYykrZFs3XSs0MTM5NDY5NjY0JjQyOTQ5NjcyOTU7ZT1mKyhoPDwxNiY0Mjk0OTY3Mjk1fGg+Pj4xNik7aD1jKyhlXmZeYikrZFsxMF0rMzIwMDIzNjY1NiY0Mjk0OTY3Mjk1O2M9ZSsoaDw8MjMmNDI5NDk2NzI5NXxoPj4+OSk7aD1iKyhjXmVeZikrZFsxM10rNjgxMjc5MTc0JjQyOTQ5NjcyOTU7Yj1jKyhoPDw0JjQyOTQ5NjcyOTV8aD4+PjI4KTtoPWYrKGJeY15lKStkWzBdKzM5MzY0MzAwNzQmNDI5NDk2NzI5NTtmPWIrKGg8PDExJjQyOTQ5NjcyOTV8aD4+PjIxKTtoPWUrKGZeYl5jKStkWzNdKzM1NzI0NDUzMTcmNDI5NDk2NzI5NTtlPWYrKGg8PDE2JjQyOTQ5NjcyOTV8aD4+PjE2KTtoPWMrKGVeZl5iKStkWzZdKzc2MDI5MTg5JjQyOTQ5NjcyOTU7Yz1lKyhoPDwyMyY0Mjk0OTY3Mjk1fGg+Pj45KTtoPWIrKGNeZV5mKStkWzldKzM2NTQ2MDI4MDkmNDI5NDk2NzI5NTtiPWMrKGg8PDQmNDI5NDk2NzI5NXxoPj4+MjgpO2g9ZisoYl5jXmUpK2RbMTJdK1xuMzg3MzE1MTQ2MSY0Mjk0OTY3Mjk1O2Y9YisoaDw8MTEmNDI5NDk2NzI5NXxoPj4+MjEpO2g9ZSsoZl5iXmMpK2RbMTVdKzUzMDc0MjUyMCY0Mjk0OTY3Mjk1O2U9ZisoaDw8MTYmNDI5NDk2NzI5NXxoPj4+MTYpO2g9YysoZV5mXmIpK2RbMl0rMzI5OTYyODY0NSY0Mjk0OTY3Mjk1O2M9ZSsoaDw8MjMmNDI5NDk2NzI5NXxoPj4+OSk7aD1iKyhlXihjfH5mKSkrZFswXSs0MDk2MzM2NDUyJjQyOTQ5NjcyOTU7Yj1jKyhoPDw2JjQyOTQ5NjcyOTV8aD4+PjI2KTtoPWYrKGNeKGJ8fmUpKStkWzddKzExMjY4OTE0MTUmNDI5NDk2NzI5NTtmPWIrKGg8PDEwJjQyOTQ5NjcyOTV8aD4+PjIyKTtoPWUrKGJeKGZ8fmMpKStkWzE0XSsyODc4NjEyMzkxJjQyOTQ5NjcyOTU7ZT1mKyhoPDwxNSY0Mjk0OTY3Mjk1fGg+Pj4xNyk7aD1jKyhmXihlfH5iKSkrZFs1XSs0MjM3NTMzMjQxJjQyOTQ5NjcyOTU7Yz1lKyhoPDwyMSY0Mjk0OTY3Mjk1fGg+Pj4xMSk7aD1iKyhlXihjfH5mKSkrZFsxMl0rMTcwMDQ4NTU3MSZcbjQyOTQ5NjcyOTU7Yj1jKyhoPDw2JjQyOTQ5NjcyOTV8aD4+PjI2KTtoPWYrKGNeKGJ8fmUpKStkWzNdKzIzOTk5ODA2OTAmNDI5NDk2NzI5NTtmPWIrKGg8PDEwJjQyOTQ5NjcyOTV8aD4+PjIyKTtoPWUrKGJeKGZ8fmMpKStkWzEwXSs0MjkzOTE1NzczJjQyOTQ5NjcyOTU7ZT1mKyhoPDwxNSY0Mjk0OTY3Mjk1fGg+Pj4xNyk7aD1jKyhmXihlfH5iKSkrZFsxXSsyMjQwMDQ0NDk3JjQyOTQ5NjcyOTU7Yz1lKyhoPDwyMSY0Mjk0OTY3Mjk1fGg+Pj4xMSk7aD1iKyhlXihjfH5mKSkrZFs4XSsxODczMzEzMzU5JjQyOTQ5NjcyOTU7Yj1jKyhoPDw2JjQyOTQ5NjcyOTV8aD4+PjI2KTtoPWYrKGNeKGJ8fmUpKStkWzE1XSs0MjY0MzU1NTUyJjQyOTQ5NjcyOTU7Zj1iKyhoPDwxMCY0Mjk0OTY3Mjk1fGg+Pj4yMik7aD1lKyhiXihmfH5jKSkrZFs2XSsyNzM0NzY4OTE2JjQyOTQ5NjcyOTU7ZT1mKyhoPDwxNSY0Mjk0OTY3Mjk1fGg+Pj4xNyk7aD1jKyhmXihlfH5iKSkrZFsxM10rMTMwOTE1MTY0OSZcbjQyOTQ5NjcyOTU7Yz1lKyhoPDwyMSY0Mjk0OTY3Mjk1fGg+Pj4xMSk7aD1iKyhlXihjfH5mKSkrZFs0XSs0MTQ5NDQ0MjI2JjQyOTQ5NjcyOTU7Yj1jKyhoPDw2JjQyOTQ5NjcyOTV8aD4+PjI2KTtoPWYrKGNeKGJ8fmUpKStkWzExXSszMTc0NzU2OTE3JjQyOTQ5NjcyOTU7Zj1iKyhoPDwxMCY0Mjk0OTY3Mjk1fGg+Pj4yMik7aD1lKyhiXihmfH5jKSkrZFsyXSs3MTg3ODcyNTkmNDI5NDk2NzI5NTtlPWYrKGg8PDE1JjQyOTQ5NjcyOTV8aD4+PjE3KTtoPWMrKGZeKGV8fmIpKStkWzldKzM5NTE0ODE3NDUmNDI5NDk2NzI5NTthLmdbMF09YS5nWzBdK2ImNDI5NDk2NzI5NTthLmdbMV09YS5nWzFdKyhlKyhoPDwyMSY0Mjk0OTY3Mjk1fGg+Pj4xMSkpJjQyOTQ5NjcyOTU7YS5nWzJdPWEuZ1syXStlJjQyOTQ5NjcyOTU7YS5nWzNdPWEuZ1szXStmJjQyOTQ5NjcyOTU7fVxuUy5wcm90b3R5cGUuaj1mdW5jdGlvbihhLGIpe3ZvaWQgMD09PWImJihiPWEubGVuZ3RoKTtmb3IodmFyIGM9Yi10aGlzLmJsb2NrU2l6ZSxkPXRoaXMubSxlPXRoaXMuaCxmPTA7ZjxiOyl7aWYoMD09ZSlmb3IoO2Y8PWM7KVNkKHRoaXMsYSxmKSxmKz10aGlzLmJsb2NrU2l6ZTtpZihcInN0cmluZ1wiPT09dHlwZW9mIGEpZm9yKDtmPGI7KXtpZihkW2UrK109YS5jaGFyQ29kZUF0KGYrKyksZT09dGhpcy5ibG9ja1NpemUpe1NkKHRoaXMsZCk7ZT0wO2JyZWFrfX1lbHNlIGZvcig7ZjxiOylpZihkW2UrK109YVtmKytdLGU9PXRoaXMuYmxvY2tTaXplKXtTZCh0aGlzLGQpO2U9MDticmVha319dGhpcy5oPWU7dGhpcy5pKz1iO307XG5TLnByb3RvdHlwZS5sPWZ1bmN0aW9uKCl7dmFyIGE9QXJyYXkoKDU2PnRoaXMuaD90aGlzLmJsb2NrU2l6ZToyKnRoaXMuYmxvY2tTaXplKS10aGlzLmgpO2FbMF09MTI4O2Zvcih2YXIgYj0xO2I8YS5sZW5ndGgtODsrK2IpYVtiXT0wO3ZhciBjPTgqdGhpcy5pO2ZvcihiPWEubGVuZ3RoLTg7YjxhLmxlbmd0aDsrK2IpYVtiXT1jJjI1NSxjLz0yNTY7dGhpcy5qKGEpO2E9QXJyYXkoMTYpO2ZvcihiPWM9MDs0PmI7KytiKWZvcih2YXIgZD0wOzMyPmQ7ZCs9OClhW2MrK109dGhpcy5nW2JdPj4+ZCYyNTU7cmV0dXJuIGF9O2Z1bmN0aW9uIFQoYSxiKXt0aGlzLmg9Yjtmb3IodmFyIGM9W10sZD0hMCxlPWEubGVuZ3RoLTE7MDw9ZTtlLS0pe3ZhciBmPWFbZV18MDtkJiZmPT1ifHwoY1tlXT1mLGQ9ITEpO310aGlzLmc9Yzt9dmFyIHNhPXt9O2Z1bmN0aW9uIFRkKGEpe3JldHVybiAtMTI4PD1hJiYxMjg+YT9yYShhLGZ1bmN0aW9uKGIpe3JldHVybiBuZXcgVChbYnwwXSwwPmI/LTE6MCl9KTpuZXcgVChbYXwwXSwwPmE/LTE6MCl9ZnVuY3Rpb24gVShhKXtpZihpc05hTihhKXx8IWlzRmluaXRlKGEpKXJldHVybiBWO2lmKDA+YSlyZXR1cm4gVyhVKC1hKSk7Zm9yKHZhciBiPVtdLGM9MSxkPTA7YT49YztkKyspYltkXT1hL2N8MCxjKj1VZDtyZXR1cm4gbmV3IFQoYiwwKX1cbmZ1bmN0aW9uIFZkKGEsYil7aWYoMD09YS5sZW5ndGgpdGhyb3cgRXJyb3IoXCJudW1iZXIgZm9ybWF0IGVycm9yOiBlbXB0eSBzdHJpbmdcIik7Yj1ifHwxMDtpZigyPmJ8fDM2PGIpdGhyb3cgRXJyb3IoXCJyYWRpeCBvdXQgb2YgcmFuZ2U6IFwiK2IpO2lmKFwiLVwiPT1hLmNoYXJBdCgwKSlyZXR1cm4gVyhWZChhLnN1YnN0cmluZygxKSxiKSk7aWYoMDw9YS5pbmRleE9mKFwiLVwiKSl0aHJvdyBFcnJvcignbnVtYmVyIGZvcm1hdCBlcnJvcjogaW50ZXJpb3IgXCItXCIgY2hhcmFjdGVyJyk7Zm9yKHZhciBjPVUoTWF0aC5wb3coYiw4KSksZD1WLGU9MDtlPGEubGVuZ3RoO2UrPTgpe3ZhciBmPU1hdGgubWluKDgsYS5sZW5ndGgtZSksaD1wYXJzZUludChhLnN1YnN0cmluZyhlLGUrZiksYik7OD5mPyhmPVUoTWF0aC5wb3coYixmKSksZD1kLlIoZikuYWRkKFUoaCkpKTooZD1kLlIoYyksZD1kLmFkZChVKGgpKSk7fXJldHVybiBkfVxudmFyIFVkPTQyOTQ5NjcyOTYsVj1UZCgwKSxXZD1UZCgxKSxYZD1UZCgxNjc3NzIxNik7az1ULnByb3RvdHlwZTtrLmVhPWZ1bmN0aW9uKCl7aWYoWCh0aGlzKSlyZXR1cm4gLVcodGhpcykuZWEoKTtmb3IodmFyIGE9MCxiPTEsYz0wO2M8dGhpcy5nLmxlbmd0aDtjKyspe3ZhciBkPXRoaXMuRChjKTthKz0oMDw9ZD9kOlVkK2QpKmI7Yio9VWQ7fXJldHVybiBhfTtcbmsudG9TdHJpbmc9ZnVuY3Rpb24oYSl7YT1hfHwxMDtpZigyPmF8fDM2PGEpdGhyb3cgRXJyb3IoXCJyYWRpeCBvdXQgb2YgcmFuZ2U6IFwiK2EpO2lmKFkodGhpcykpcmV0dXJuIFwiMFwiO2lmKFgodGhpcykpcmV0dXJuIFwiLVwiK1codGhpcykudG9TdHJpbmcoYSk7Zm9yKHZhciBiPVUoTWF0aC5wb3coYSw2KSksYz10aGlzLGQ9XCJcIjs7KXt2YXIgZT1ZZChjLGIpLmc7Yz1aZChjLGUuUihiKSk7dmFyIGY9KCgwPGMuZy5sZW5ndGg/Yy5nWzBdOmMuaCk+Pj4wKS50b1N0cmluZyhhKTtjPWU7aWYoWShjKSlyZXR1cm4gZitkO2Zvcig7Nj5mLmxlbmd0aDspZj1cIjBcIitmO2Q9ZitkO319O2suRD1mdW5jdGlvbihhKXtyZXR1cm4gMD5hPzA6YTx0aGlzLmcubGVuZ3RoP3RoaXMuZ1thXTp0aGlzLmh9O2Z1bmN0aW9uIFkoYSl7aWYoMCE9YS5oKXJldHVybiAhMTtmb3IodmFyIGI9MDtiPGEuZy5sZW5ndGg7YisrKWlmKDAhPWEuZ1tiXSlyZXR1cm4gITE7cmV0dXJuICEwfVxuZnVuY3Rpb24gWChhKXtyZXR1cm4gLTE9PWEuaH1rLlg9ZnVuY3Rpb24oYSl7YT1aZCh0aGlzLGEpO3JldHVybiBYKGEpPy0xOlkoYSk/MDoxfTtmdW5jdGlvbiBXKGEpe2Zvcih2YXIgYj1hLmcubGVuZ3RoLGM9W10sZD0wO2Q8YjtkKyspY1tkXT1+YS5nW2RdO3JldHVybiAobmV3IFQoYyx+YS5oKSkuYWRkKFdkKX1rLmFicz1mdW5jdGlvbigpe3JldHVybiBYKHRoaXMpP1codGhpcyk6dGhpc307ay5hZGQ9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPU1hdGgubWF4KHRoaXMuZy5sZW5ndGgsYS5nLmxlbmd0aCksYz1bXSxkPTAsZT0wO2U8PWI7ZSsrKXt2YXIgZj1kKyh0aGlzLkQoZSkmNjU1MzUpKyhhLkQoZSkmNjU1MzUpLGg9KGY+Pj4xNikrKHRoaXMuRChlKT4+PjE2KSsoYS5EKGUpPj4+MTYpO2Q9aD4+PjE2O2YmPTY1NTM1O2gmPTY1NTM1O2NbZV09aDw8MTZ8Zjt9cmV0dXJuIG5ldyBUKGMsY1tjLmxlbmd0aC0xXSYtMjE0NzQ4MzY0OD8tMTowKX07XG5mdW5jdGlvbiBaZChhLGIpe3JldHVybiBhLmFkZChXKGIpKX1cbmsuUj1mdW5jdGlvbihhKXtpZihZKHRoaXMpfHxZKGEpKXJldHVybiBWO2lmKFgodGhpcykpcmV0dXJuIFgoYSk/Vyh0aGlzKS5SKFcoYSkpOlcoVyh0aGlzKS5SKGEpKTtpZihYKGEpKXJldHVybiBXKHRoaXMuUihXKGEpKSk7aWYoMD50aGlzLlgoWGQpJiYwPmEuWChYZCkpcmV0dXJuIFUodGhpcy5lYSgpKmEuZWEoKSk7Zm9yKHZhciBiPXRoaXMuZy5sZW5ndGgrYS5nLmxlbmd0aCxjPVtdLGQ9MDtkPDIqYjtkKyspY1tkXT0wO2ZvcihkPTA7ZDx0aGlzLmcubGVuZ3RoO2QrKylmb3IodmFyIGU9MDtlPGEuZy5sZW5ndGg7ZSsrKXt2YXIgZj10aGlzLkQoZCk+Pj4xNixoPXRoaXMuRChkKSY2NTUzNSxuPWEuRChlKT4+PjE2LHQ9YS5EKGUpJjY1NTM1O2NbMipkKzIqZV0rPWgqdDskZChjLDIqZCsyKmUpO2NbMipkKzIqZSsxXSs9Zip0OyRkKGMsMipkKzIqZSsxKTtjWzIqZCsyKmUrMV0rPWgqbjskZChjLDIqZCsyKmUrMSk7Y1syKmQrMiplKzJdKz1mKm47JGQoYywyKmQrMiplKzIpO31mb3IoZD1cbjA7ZDxiO2QrKyljW2RdPWNbMipkKzFdPDwxNnxjWzIqZF07Zm9yKGQ9YjtkPDIqYjtkKyspY1tkXT0wO3JldHVybiBuZXcgVChjLDApfTtmdW5jdGlvbiAkZChhLGIpe2Zvcig7KGFbYl0mNjU1MzUpIT1hW2JdOylhW2IrMV0rPWFbYl0+Pj4xNixhW2JdJj02NTUzNSxiKys7fWZ1bmN0aW9uIGFlKGEsYil7dGhpcy5nPWE7dGhpcy5oPWI7fVxuZnVuY3Rpb24gWWQoYSxiKXtpZihZKGIpKXRocm93IEVycm9yKFwiZGl2aXNpb24gYnkgemVyb1wiKTtpZihZKGEpKXJldHVybiBuZXcgYWUoVixWKTtpZihYKGEpKXJldHVybiBiPVlkKFcoYSksYiksbmV3IGFlKFcoYi5nKSxXKGIuaCkpO2lmKFgoYikpcmV0dXJuIGI9WWQoYSxXKGIpKSxuZXcgYWUoVyhiLmcpLGIuaCk7aWYoMzA8YS5nLmxlbmd0aCl7aWYoWChhKXx8WChiKSl0aHJvdyBFcnJvcihcInNsb3dEaXZpZGVfIG9ubHkgd29ya3Mgd2l0aCBwb3NpdGl2ZSBpbnRlZ2Vycy5cIik7Zm9yKHZhciBjPVdkLGQ9YjswPj1kLlgoYSk7KWM9YmUoYyksZD1iZShkKTt2YXIgZT1aKGMsMSksZj1aKGQsMSk7ZD1aKGQsMik7Zm9yKGM9WihjLDIpOyFZKGQpOyl7dmFyIGg9Zi5hZGQoZCk7MD49aC5YKGEpJiYoZT1lLmFkZChjKSxmPWgpO2Q9WihkLDEpO2M9WihjLDEpO31iPVpkKGEsZS5SKGIpKTtyZXR1cm4gbmV3IGFlKGUsYil9Zm9yKGU9VjswPD1hLlgoYik7KXtjPU1hdGgubWF4KDEsTWF0aC5mbG9vcihhLmVhKCkvXG5iLmVhKCkpKTtkPU1hdGguY2VpbChNYXRoLmxvZyhjKS9NYXRoLkxOMik7ZD00OD49ZD8xOk1hdGgucG93KDIsZC00OCk7Zj1VKGMpO2ZvcihoPWYuUihiKTtYKGgpfHwwPGguWChhKTspYy09ZCxmPVUoYyksaD1mLlIoYik7WShmKSYmKGY9V2QpO2U9ZS5hZGQoZik7YT1aZChhLGgpO31yZXR1cm4gbmV3IGFlKGUsYSl9ay5nYj1mdW5jdGlvbihhKXtyZXR1cm4gWWQodGhpcyxhKS5ofTtrLmFuZD1mdW5jdGlvbihhKXtmb3IodmFyIGI9TWF0aC5tYXgodGhpcy5nLmxlbmd0aCxhLmcubGVuZ3RoKSxjPVtdLGQ9MDtkPGI7ZCsrKWNbZF09dGhpcy5EKGQpJmEuRChkKTtyZXR1cm4gbmV3IFQoYyx0aGlzLmgmYS5oKX07ay5vcj1mdW5jdGlvbihhKXtmb3IodmFyIGI9TWF0aC5tYXgodGhpcy5nLmxlbmd0aCxhLmcubGVuZ3RoKSxjPVtdLGQ9MDtkPGI7ZCsrKWNbZF09dGhpcy5EKGQpfGEuRChkKTtyZXR1cm4gbmV3IFQoYyx0aGlzLmh8YS5oKX07XG5rLnhvcj1mdW5jdGlvbihhKXtmb3IodmFyIGI9TWF0aC5tYXgodGhpcy5nLmxlbmd0aCxhLmcubGVuZ3RoKSxjPVtdLGQ9MDtkPGI7ZCsrKWNbZF09dGhpcy5EKGQpXmEuRChkKTtyZXR1cm4gbmV3IFQoYyx0aGlzLmheYS5oKX07ZnVuY3Rpb24gYmUoYSl7Zm9yKHZhciBiPWEuZy5sZW5ndGgrMSxjPVtdLGQ9MDtkPGI7ZCsrKWNbZF09YS5EKGQpPDwxfGEuRChkLTEpPj4+MzE7cmV0dXJuIG5ldyBUKGMsYS5oKX1mdW5jdGlvbiBaKGEsYil7dmFyIGM9Yj4+NTtiJT0zMjtmb3IodmFyIGQ9YS5nLmxlbmd0aC1jLGU9W10sZj0wO2Y8ZDtmKyspZVtmXT0wPGI/YS5EKGYrYyk+Pj5ifGEuRChmK2MrMSk8PDMyLWI6YS5EKGYrYyk7cmV0dXJuIG5ldyBUKGUsYS5oKX1PZC5wcm90b3R5cGUuY3JlYXRlV2ViQ2hhbm5lbD1PZC5wcm90b3R5cGUuZztRLnByb3RvdHlwZS5zZW5kPVEucHJvdG90eXBlLnU7US5wcm90b3R5cGUub3Blbj1RLnByb3RvdHlwZS5tO1EucHJvdG90eXBlLmNsb3NlPVEucHJvdG90eXBlLmNsb3NlO1NiLk5PX0VSUk9SPTA7U2IuVElNRU9VVD04O1NiLkhUVFBfRVJST1I9NjtUYi5DT01QTEVURT1cImNvbXBsZXRlXCI7V2IuRXZlbnRUeXBlPVhiO1hiLk9QRU49XCJhXCI7WGIuQ0xPU0U9XCJiXCI7WGIuRVJST1I9XCJjXCI7WGIuTUVTU0FHRT1cImRcIjtCLnByb3RvdHlwZS5saXN0ZW49Qi5wcm90b3R5cGUuTztQLnByb3RvdHlwZS5saXN0ZW5PbmNlPVAucHJvdG90eXBlLlA7UC5wcm90b3R5cGUuZ2V0TGFzdEVycm9yPVAucHJvdG90eXBlLlNhO1AucHJvdG90eXBlLmdldExhc3RFcnJvckNvZGU9UC5wcm90b3R5cGUuSWE7UC5wcm90b3R5cGUuZ2V0U3RhdHVzPVAucHJvdG90eXBlLmRhO1AucHJvdG90eXBlLmdldFJlc3BvbnNlSnNvbj1QLnByb3RvdHlwZS5XYTtcblAucHJvdG90eXBlLmdldFJlc3BvbnNlVGV4dD1QLnByb3RvdHlwZS5qYTtQLnByb3RvdHlwZS5zZW5kPVAucHJvdG90eXBlLmhhO1AucHJvdG90eXBlLnNldFdpdGhDcmVkZW50aWFscz1QLnByb3RvdHlwZS5PYTtTLnByb3RvdHlwZS5kaWdlc3Q9Uy5wcm90b3R5cGUubDtTLnByb3RvdHlwZS5yZXNldD1TLnByb3RvdHlwZS5yZXNldDtTLnByb3RvdHlwZS51cGRhdGU9Uy5wcm90b3R5cGUuajtULnByb3RvdHlwZS5hZGQ9VC5wcm90b3R5cGUuYWRkO1QucHJvdG90eXBlLm11bHRpcGx5PVQucHJvdG90eXBlLlI7VC5wcm90b3R5cGUubW9kdWxvPVQucHJvdG90eXBlLmdiO1QucHJvdG90eXBlLmNvbXBhcmU9VC5wcm90b3R5cGUuWDtULnByb3RvdHlwZS50b051bWJlcj1ULnByb3RvdHlwZS5lYTtULnByb3RvdHlwZS50b1N0cmluZz1ULnByb3RvdHlwZS50b1N0cmluZztULnByb3RvdHlwZS5nZXRCaXRzPVQucHJvdG90eXBlLkQ7VC5mcm9tTnVtYmVyPVU7VC5mcm9tU3RyaW5nPVZkO1xudmFyIGNyZWF0ZVdlYkNoYW5uZWxUcmFuc3BvcnQgPSBlc20uY3JlYXRlV2ViQ2hhbm5lbFRyYW5zcG9ydD1mdW5jdGlvbigpe3JldHVybiBuZXcgT2R9O3ZhciBnZXRTdGF0RXZlbnRUYXJnZXQgPSBlc20uZ2V0U3RhdEV2ZW50VGFyZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIE1iKCl9O3ZhciBFcnJvckNvZGUgPSBlc20uRXJyb3JDb2RlPVNiO3ZhciBFdmVudFR5cGUgPSBlc20uRXZlbnRUeXBlPVRiO3ZhciBFdmVudCA9IGVzbS5FdmVudD1FO3ZhciBTdGF0ID0gZXNtLlN0YXQ9e3hiOjAsQWI6MSxCYjoyLFViOjMsWmI6NCxXYjo1LFhiOjYsVmI6NyxUYjo4LFliOjksUFJPWFk6MTAsTk9QUk9YWToxMSxSYjoxMixOYjoxMyxPYjoxNCxNYjoxNSxQYjoxNixRYjoxNyx0YjoxOCxzYjoxOSx1YjoyMH07dmFyIEZldGNoWG1sSHR0cEZhY3RvcnkgPSBlc20uRmV0Y2hYbWxIdHRwRmFjdG9yeT1sZDt2YXIgV2ViQ2hhbm5lbCA9IGVzbS5XZWJDaGFubmVsPVdiO3ZhciBYaHJJbyA9IGVzbS5YaHJJbz1QO3ZhciBNZDUgPSBlc20uTWQ1PVM7dmFyIEludGVnZXIgPSBlc20uSW50ZWdlcj1UO1xuXG5leHBvcnQgeyBFcnJvckNvZGUsIEV2ZW50LCBFdmVudFR5cGUsIEZldGNoWG1sSHR0cEZhY3RvcnksIEludGVnZXIsIE1kNSwgU3RhdCwgV2ViQ2hhbm5lbCwgWGhySW8sIGNyZWF0ZVdlYkNoYW5uZWxUcmFuc3BvcnQsIGVzbSBhcyBkZWZhdWx0LCBnZXRTdGF0RXZlbnRUYXJnZXQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbTIwMTcuanMubWFwXG4iLCJpbXBvcnQgeyBfcmVnaXN0ZXJDb21wb25lbnQsIHJlZ2lzdGVyVmVyc2lvbiwgX2dldFByb3ZpZGVyLCBnZXRBcHAsIF9yZW1vdmVTZXJ2aWNlSW5zdGFuY2UsIFNES19WRVJTSU9OIH0gZnJvbSAnQGZpcmViYXNlL2FwcCc7XG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICdAZmlyZWJhc2UvY29tcG9uZW50JztcbmltcG9ydCB7IExvZ2dlciwgTG9nTGV2ZWwgfSBmcm9tICdAZmlyZWJhc2UvbG9nZ2VyJztcbmltcG9ydCB7IEZpcmViYXNlRXJyb3IsIGNyZWF0ZU1vY2tVc2VyVG9rZW4sIGdldE1vZHVsYXJJbnN0YW5jZSwgZGVlcEVxdWFsLCBnZXREZWZhdWx0RW11bGF0b3JIb3N0bmFtZUFuZFBvcnQsIGdldFVBLCBpc0luZGV4ZWREQkF2YWlsYWJsZSwgaXNTYWZhcmkgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5pbXBvcnQgeyBJbnRlZ2VyLCBYaHJJbywgRXZlbnRUeXBlLCBFcnJvckNvZGUsIGNyZWF0ZVdlYkNoYW5uZWxUcmFuc3BvcnQsIGdldFN0YXRFdmVudFRhcmdldCwgV2ViQ2hhbm5lbCwgRXZlbnQsIFN0YXQsIE1kNSB9IGZyb20gJ0BmaXJlYmFzZS93ZWJjaGFubmVsLXdyYXBwZXInO1xuXG5jb25zdCB3ID0gXCJAZmlyZWJhc2UvZmlyZXN0b3JlXCI7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFNpbXBsZSB3cmFwcGVyIGFyb3VuZCBhIG51bGxhYmxlIFVJRC4gTW9zdGx5IGV4aXN0cyB0byBtYWtlIGNvZGUgbW9yZVxuICogcmVhZGFibGUuXG4gKi9cbmNsYXNzIFVzZXIge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy51aWQgPSBlO1xuICAgIH1cbiAgICBpc0F1dGhlbnRpY2F0ZWQoKSB7XG4gICAgICAgIHJldHVybiBudWxsICE9IHRoaXMudWlkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEga2V5IHJlcHJlc2VudGluZyB0aGlzIHVzZXIsIHN1aXRhYmxlIGZvciBpbmNsdXNpb24gaW4gYVxuICAgICAqIGRpY3Rpb25hcnkuXG4gICAgICovICAgIHRvS2V5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc0F1dGhlbnRpY2F0ZWQoKSA/IFwidWlkOlwiICsgdGhpcy51aWQgOiBcImFub255bW91cy11c2VyXCI7XG4gICAgfVxuICAgIGlzRXF1YWwoZSkge1xuICAgICAgICByZXR1cm4gZS51aWQgPT09IHRoaXMudWlkO1xuICAgIH1cbn1cblxuLyoqIEEgdXNlciB3aXRoIGEgbnVsbCBVSUQuICovIFVzZXIuVU5BVVRIRU5USUNBVEVEID0gbmV3IFVzZXIobnVsbCksIFxuLy8gVE9ETyhtaWtlbGVoZW4pOiBMb29rIGludG8gZ2V0dGluZyBhIHByb3BlciB1aWQtZXF1aXZhbGVudCBmb3Jcbi8vIG5vbi1GaXJlYmFzZUF1dGggcHJvdmlkZXJzLlxuVXNlci5HT09HTEVfQ1JFREVOVElBTFMgPSBuZXcgVXNlcihcImdvb2dsZS1jcmVkZW50aWFscy11aWRcIiksIFVzZXIuRklSU1RfUEFSVFkgPSBuZXcgVXNlcihcImZpcnN0LXBhcnR5LXVpZFwiKSwgXG5Vc2VyLk1PQ0tfVVNFUiA9IG5ldyBVc2VyKFwibW9jay11c2VyXCIpO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xubGV0IFMgPSBcIjEwLjcuMFwiO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY29uc3QgYiA9IG5ldyBMb2dnZXIoXCJAZmlyZWJhc2UvZmlyZXN0b3JlXCIpO1xuXG4vLyBIZWxwZXIgbWV0aG9kcyBhcmUgbmVlZGVkIGJlY2F1c2UgdmFyaWFibGVzIGNhbid0IGJlIGV4cG9ydGVkIGFzIHJlYWQvd3JpdGVcbmZ1bmN0aW9uIF9fUFJJVkFURV9nZXRMb2dMZXZlbCgpIHtcbiAgICByZXR1cm4gYi5sb2dMZXZlbDtcbn1cblxuLyoqXG4gKiBTZXRzIHRoZSB2ZXJib3NpdHkgb2YgQ2xvdWQgRmlyZXN0b3JlIGxvZ3MgKGRlYnVnLCBlcnJvciwgb3Igc2lsZW50KS5cbiAqXG4gKiBAcGFyYW0gbG9nTGV2ZWwgLSBUaGUgdmVyYm9zaXR5IHlvdSBzZXQgZm9yIGFjdGl2aXR5IGFuZCBlcnJvciBsb2dnaW5nLiBDYW5cbiAqICAgYmUgYW55IG9mIHRoZSBmb2xsb3dpbmcgdmFsdWVzOlxuICpcbiAqICAgPHVsPlxuICogICAgIDxsaT5gZGVidWdgIGZvciB0aGUgbW9zdCB2ZXJib3NlIGxvZ2dpbmcgbGV2ZWwsIHByaW1hcmlseSBmb3JcbiAqICAgICBkZWJ1Z2dpbmcuPC9saT5cbiAqICAgICA8bGk+YGVycm9yYCB0byBsb2cgZXJyb3JzIG9ubHkuPC9saT5cbiAqICAgICA8bGk+PGNvZGU+YHNpbGVudGAgdG8gdHVybiBvZmYgbG9nZ2luZy48L2xpPlxuICogICA8L3VsPlxuICovIGZ1bmN0aW9uIHNldExvZ0xldmVsKGUpIHtcbiAgICBiLnNldExvZ0xldmVsKGUpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfbG9nRGVidWcoZSwgLi4udCkge1xuICAgIGlmIChiLmxvZ0xldmVsIDw9IExvZ0xldmVsLkRFQlVHKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0Lm1hcChfX1BSSVZBVEVfYXJnVG9TdHJpbmcpO1xuICAgICAgICBiLmRlYnVnKGBGaXJlc3RvcmUgKCR7U30pOiAke2V9YCwgLi4ubik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfbG9nRXJyb3IoZSwgLi4udCkge1xuICAgIGlmIChiLmxvZ0xldmVsIDw9IExvZ0xldmVsLkVSUk9SKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0Lm1hcChfX1BSSVZBVEVfYXJnVG9TdHJpbmcpO1xuICAgICAgICBiLmVycm9yKGBGaXJlc3RvcmUgKCR7U30pOiAke2V9YCwgLi4ubik7XG4gICAgfVxufVxuXG4vKipcbiAqIEBpbnRlcm5hbFxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9sb2dXYXJuKGUsIC4uLnQpIHtcbiAgICBpZiAoYi5sb2dMZXZlbCA8PSBMb2dMZXZlbC5XQVJOKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0Lm1hcChfX1BSSVZBVEVfYXJnVG9TdHJpbmcpO1xuICAgICAgICBiLndhcm4oYEZpcmVzdG9yZSAoJHtTfSk6ICR7ZX1gLCAuLi5uKTtcbiAgICB9XG59XG5cbi8qKlxuICogQ29udmVydHMgYW4gYWRkaXRpb25hbCBsb2cgcGFyYW1ldGVyIHRvIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9hcmdUb1N0cmluZyhlKSB7XG4gICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIGUpIHJldHVybiBlO1xuICAgIHRyeSB7XG4gICAgICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4gICAgICAgIC8qKiBGb3JtYXRzIGFuIG9iamVjdCBhcyBhIEpTT04gc3RyaW5nLCBzdWl0YWJsZSBmb3IgbG9nZ2luZy4gKi9cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9mb3JtYXRKU09OKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShlKTtcbiAgICAgICAgfShlKTtcbiAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgIC8vIENvbnZlcnRpbmcgdG8gSlNPTiBmYWlsZWQsIGp1c3QgbG9nIHRoZSBvYmplY3QgZGlyZWN0bHlcbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBVbmNvbmRpdGlvbmFsbHkgZmFpbHMsIHRocm93aW5nIGFuIEVycm9yIHdpdGggdGhlIGdpdmVuIG1lc3NhZ2UuXG4gKiBNZXNzYWdlcyBhcmUgc3RyaXBwZWQgaW4gcHJvZHVjdGlvbiBidWlsZHMuXG4gKlxuICogUmV0dXJucyBgbmV2ZXJgIGFuZCBjYW4gYmUgdXNlZCBpbiBleHByZXNzaW9uczpcbiAqIEBleGFtcGxlXG4gKiBsZXQgZnV0dXJlVmFyID0gZmFpbCgnbm90IGltcGxlbWVudGVkIHlldCcpO1xuICovIGZ1bmN0aW9uIGZhaWwoZSA9IFwiVW5leHBlY3RlZCBzdGF0ZVwiKSB7XG4gICAgLy8gTG9nIHRoZSBmYWlsdXJlIGluIGFkZGl0aW9uIHRvIHRocm93IGFuIGV4Y2VwdGlvbiwganVzdCBpbiBjYXNlIHRoZVxuICAgIC8vIGV4Y2VwdGlvbiBpcyBzd2FsbG93ZWQuXG4gICAgY29uc3QgdCA9IGBGSVJFU1RPUkUgKCR7U30pIElOVEVSTkFMIEFTU0VSVElPTiBGQUlMRUQ6IGAgKyBlO1xuICAgIC8vIE5PVEU6IFdlIGRvbid0IHVzZSBGaXJlc3RvcmVFcnJvciBoZXJlIGJlY2F1c2UgdGhlc2UgYXJlIGludGVybmFsIGZhaWx1cmVzXG4gICAgLy8gdGhhdCBjYW5ub3QgYmUgaGFuZGxlZCBieSB0aGUgdXNlci4gKEFsc28gaXQgd291bGQgY3JlYXRlIGEgY2lyY3VsYXJcbiAgICAvLyBkZXBlbmRlbmN5IGJldHdlZW4gdGhlIGVycm9yIGFuZCBhc3NlcnQgbW9kdWxlcyB3aGljaCBkb2Vzbid0IHdvcmsuKVxuICAgIHRocm93IF9fUFJJVkFURV9sb2dFcnJvcih0KSwgbmV3IEVycm9yKHQpO1xufVxuXG4vKipcbiAqIEZhaWxzIGlmIHRoZSBnaXZlbiBhc3NlcnRpb24gY29uZGl0aW9uIGlzIGZhbHNlLCB0aHJvd2luZyBhbiBFcnJvciB3aXRoIHRoZVxuICogZ2l2ZW4gbWVzc2FnZSBpZiBpdCBkaWQuXG4gKlxuICogTWVzc2FnZXMgYXJlIHN0cmlwcGVkIGluIHByb2R1Y3Rpb24gYnVpbGRzLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9oYXJkQXNzZXJ0KGUsIHQpIHtcbiAgICBlIHx8IGZhaWwoKTtcbn1cblxuLyoqXG4gKiBGYWlscyBpZiB0aGUgZ2l2ZW4gYXNzZXJ0aW9uIGNvbmRpdGlvbiBpcyBmYWxzZSwgdGhyb3dpbmcgYW4gRXJyb3Igd2l0aCB0aGVcbiAqIGdpdmVuIG1lc3NhZ2UgaWYgaXQgZGlkLlxuICpcbiAqIFRoZSBjb2RlIG9mIGNhbGxzaXRlcyBpbnZva2luZyB0aGlzIGZ1bmN0aW9uIGFyZSBzdHJpcHBlZCBvdXQgaW4gcHJvZHVjdGlvblxuICogYnVpbGRzLiBBbnkgc2lkZS1lZmZlY3RzIG9mIGNvZGUgd2l0aGluIHRoZSBkZWJ1Z0Fzc2VydCgpIGludm9jYXRpb24gd2lsbCBub3RcbiAqIGhhcHBlbiBpbiB0aGlzIGNhc2UuXG4gKlxuICogQGludGVybmFsXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2RlYnVnQXNzZXJ0KGUsIHQpIHtcbiAgICBlIHx8IGZhaWwoKTtcbn1cblxuLyoqXG4gKiBDYXN0cyBgb2JqYCB0byBgVGAuIEluIG5vbi1wcm9kdWN0aW9uIGJ1aWxkcywgdmVyaWZpZXMgdGhhdCBgb2JqYCBpcyBhblxuICogaW5zdGFuY2Ugb2YgYFRgIGJlZm9yZSBjYXN0aW5nLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSwgXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxudCkge1xuICAgIHJldHVybiBlO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjb25zdCBEID0ge1xuICAgIC8vIENhdXNlcyBhcmUgY29waWVkIGZyb206XG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2dycGMvZ3JwYy9ibG9iL2JjZWVjOTRlYTRmYzVmMDA4NWQ4MTIzNWQ4ZTFjMDY3OThkYzM0MWEvaW5jbHVkZS9ncnBjJTJCJTJCL2ltcGwvY29kZWdlbi9zdGF0dXNfY29kZV9lbnVtLmhcbiAgICAvKiogTm90IGFuIGVycm9yOyByZXR1cm5lZCBvbiBzdWNjZXNzLiAqL1xuICAgIE9LOiBcIm9rXCIsXG4gICAgLyoqIFRoZSBvcGVyYXRpb24gd2FzIGNhbmNlbGxlZCAodHlwaWNhbGx5IGJ5IHRoZSBjYWxsZXIpLiAqL1xuICAgIENBTkNFTExFRDogXCJjYW5jZWxsZWRcIixcbiAgICAvKiogVW5rbm93biBlcnJvciBvciBhbiBlcnJvciBmcm9tIGEgZGlmZmVyZW50IGVycm9yIGRvbWFpbi4gKi9cbiAgICBVTktOT1dOOiBcInVua25vd25cIixcbiAgICAvKipcbiAgICAgKiBDbGllbnQgc3BlY2lmaWVkIGFuIGludmFsaWQgYXJndW1lbnQuIE5vdGUgdGhhdCB0aGlzIGRpZmZlcnMgZnJvbVxuICAgICAqIEZBSUxFRF9QUkVDT05ESVRJT04uIElOVkFMSURfQVJHVU1FTlQgaW5kaWNhdGVzIGFyZ3VtZW50cyB0aGF0IGFyZVxuICAgICAqIHByb2JsZW1hdGljIHJlZ2FyZGxlc3Mgb2YgdGhlIHN0YXRlIG9mIHRoZSBzeXN0ZW0gKGUuZy4sIGEgbWFsZm9ybWVkIGZpbGVcbiAgICAgKiBuYW1lKS5cbiAgICAgKi9cbiAgICBJTlZBTElEX0FSR1VNRU5UOiBcImludmFsaWQtYXJndW1lbnRcIixcbiAgICAvKipcbiAgICAgKiBEZWFkbGluZSBleHBpcmVkIGJlZm9yZSBvcGVyYXRpb24gY291bGQgY29tcGxldGUuIEZvciBvcGVyYXRpb25zIHRoYXRcbiAgICAgKiBjaGFuZ2UgdGhlIHN0YXRlIG9mIHRoZSBzeXN0ZW0sIHRoaXMgZXJyb3IgbWF5IGJlIHJldHVybmVkIGV2ZW4gaWYgdGhlXG4gICAgICogb3BlcmF0aW9uIGhhcyBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5LiBGb3IgZXhhbXBsZSwgYSBzdWNjZXNzZnVsIHJlc3BvbnNlXG4gICAgICogZnJvbSBhIHNlcnZlciBjb3VsZCBoYXZlIGJlZW4gZGVsYXllZCBsb25nIGVub3VnaCBmb3IgdGhlIGRlYWRsaW5lIHRvXG4gICAgICogZXhwaXJlLlxuICAgICAqL1xuICAgIERFQURMSU5FX0VYQ0VFREVEOiBcImRlYWRsaW5lLWV4Y2VlZGVkXCIsXG4gICAgLyoqIFNvbWUgcmVxdWVzdGVkIGVudGl0eSAoZS5nLiwgZmlsZSBvciBkaXJlY3RvcnkpIHdhcyBub3QgZm91bmQuICovXG4gICAgTk9UX0ZPVU5EOiBcIm5vdC1mb3VuZFwiLFxuICAgIC8qKlxuICAgICAqIFNvbWUgZW50aXR5IHRoYXQgd2UgYXR0ZW1wdGVkIHRvIGNyZWF0ZSAoZS5nLiwgZmlsZSBvciBkaXJlY3RvcnkpIGFscmVhZHlcbiAgICAgKiBleGlzdHMuXG4gICAgICovXG4gICAgQUxSRUFEWV9FWElTVFM6IFwiYWxyZWFkeS1leGlzdHNcIixcbiAgICAvKipcbiAgICAgKiBUaGUgY2FsbGVyIGRvZXMgbm90IGhhdmUgcGVybWlzc2lvbiB0byBleGVjdXRlIHRoZSBzcGVjaWZpZWQgb3BlcmF0aW9uLlxuICAgICAqIFBFUk1JU1NJT05fREVOSUVEIG11c3Qgbm90IGJlIHVzZWQgZm9yIHJlamVjdGlvbnMgY2F1c2VkIGJ5IGV4aGF1c3RpbmdcbiAgICAgKiBzb21lIHJlc291cmNlICh1c2UgUkVTT1VSQ0VfRVhIQVVTVEVEIGluc3RlYWQgZm9yIHRob3NlIGVycm9ycykuXG4gICAgICogUEVSTUlTU0lPTl9ERU5JRUQgbXVzdCBub3QgYmUgdXNlZCBpZiB0aGUgY2FsbGVyIGNhbiBub3QgYmUgaWRlbnRpZmllZFxuICAgICAqICh1c2UgVU5BVVRIRU5USUNBVEVEIGluc3RlYWQgZm9yIHRob3NlIGVycm9ycykuXG4gICAgICovXG4gICAgUEVSTUlTU0lPTl9ERU5JRUQ6IFwicGVybWlzc2lvbi1kZW5pZWRcIixcbiAgICAvKipcbiAgICAgKiBUaGUgcmVxdWVzdCBkb2VzIG5vdCBoYXZlIHZhbGlkIGF1dGhlbnRpY2F0aW9uIGNyZWRlbnRpYWxzIGZvciB0aGVcbiAgICAgKiBvcGVyYXRpb24uXG4gICAgICovXG4gICAgVU5BVVRIRU5USUNBVEVEOiBcInVuYXV0aGVudGljYXRlZFwiLFxuICAgIC8qKlxuICAgICAqIFNvbWUgcmVzb3VyY2UgaGFzIGJlZW4gZXhoYXVzdGVkLCBwZXJoYXBzIGEgcGVyLXVzZXIgcXVvdGEsIG9yIHBlcmhhcHMgdGhlXG4gICAgICogZW50aXJlIGZpbGUgc3lzdGVtIGlzIG91dCBvZiBzcGFjZS5cbiAgICAgKi9cbiAgICBSRVNPVVJDRV9FWEhBVVNURUQ6IFwicmVzb3VyY2UtZXhoYXVzdGVkXCIsXG4gICAgLyoqXG4gICAgICogT3BlcmF0aW9uIHdhcyByZWplY3RlZCBiZWNhdXNlIHRoZSBzeXN0ZW0gaXMgbm90IGluIGEgc3RhdGUgcmVxdWlyZWQgZm9yXG4gICAgICogdGhlIG9wZXJhdGlvbidzIGV4ZWN1dGlvbi4gRm9yIGV4YW1wbGUsIGRpcmVjdG9yeSB0byBiZSBkZWxldGVkIG1heSBiZVxuICAgICAqIG5vbi1lbXB0eSwgYW4gcm1kaXIgb3BlcmF0aW9uIGlzIGFwcGxpZWQgdG8gYSBub24tZGlyZWN0b3J5LCBldGMuXG4gICAgICpcbiAgICAgKiBBIGxpdG11cyB0ZXN0IHRoYXQgbWF5IGhlbHAgYSBzZXJ2aWNlIGltcGxlbWVudG9yIGluIGRlY2lkaW5nXG4gICAgICogYmV0d2VlbiBGQUlMRURfUFJFQ09ORElUSU9OLCBBQk9SVEVELCBhbmQgVU5BVkFJTEFCTEU6XG4gICAgICogIChhKSBVc2UgVU5BVkFJTEFCTEUgaWYgdGhlIGNsaWVudCBjYW4gcmV0cnkganVzdCB0aGUgZmFpbGluZyBjYWxsLlxuICAgICAqICAoYikgVXNlIEFCT1JURUQgaWYgdGhlIGNsaWVudCBzaG91bGQgcmV0cnkgYXQgYSBoaWdoZXItbGV2ZWxcbiAgICAgKiAgICAgIChlLmcuLCByZXN0YXJ0aW5nIGEgcmVhZC1tb2RpZnktd3JpdGUgc2VxdWVuY2UpLlxuICAgICAqICAoYykgVXNlIEZBSUxFRF9QUkVDT05ESVRJT04gaWYgdGhlIGNsaWVudCBzaG91bGQgbm90IHJldHJ5IHVudGlsXG4gICAgICogICAgICB0aGUgc3lzdGVtIHN0YXRlIGhhcyBiZWVuIGV4cGxpY2l0bHkgZml4ZWQuIEUuZy4sIGlmIGFuIFwicm1kaXJcIlxuICAgICAqICAgICAgZmFpbHMgYmVjYXVzZSB0aGUgZGlyZWN0b3J5IGlzIG5vbi1lbXB0eSwgRkFJTEVEX1BSRUNPTkRJVElPTlxuICAgICAqICAgICAgc2hvdWxkIGJlIHJldHVybmVkIHNpbmNlIHRoZSBjbGllbnQgc2hvdWxkIG5vdCByZXRyeSB1bmxlc3NcbiAgICAgKiAgICAgIHRoZXkgaGF2ZSBmaXJzdCBmaXhlZCB1cCB0aGUgZGlyZWN0b3J5IGJ5IGRlbGV0aW5nIGZpbGVzIGZyb20gaXQuXG4gICAgICogIChkKSBVc2UgRkFJTEVEX1BSRUNPTkRJVElPTiBpZiB0aGUgY2xpZW50IHBlcmZvcm1zIGNvbmRpdGlvbmFsXG4gICAgICogICAgICBSRVNUIEdldC9VcGRhdGUvRGVsZXRlIG9uIGEgcmVzb3VyY2UgYW5kIHRoZSByZXNvdXJjZSBvbiB0aGVcbiAgICAgKiAgICAgIHNlcnZlciBkb2VzIG5vdCBtYXRjaCB0aGUgY29uZGl0aW9uLiBFLmcuLCBjb25mbGljdGluZ1xuICAgICAqICAgICAgcmVhZC1tb2RpZnktd3JpdGUgb24gdGhlIHNhbWUgcmVzb3VyY2UuXG4gICAgICovXG4gICAgRkFJTEVEX1BSRUNPTkRJVElPTjogXCJmYWlsZWQtcHJlY29uZGl0aW9uXCIsXG4gICAgLyoqXG4gICAgICogVGhlIG9wZXJhdGlvbiB3YXMgYWJvcnRlZCwgdHlwaWNhbGx5IGR1ZSB0byBhIGNvbmN1cnJlbmN5IGlzc3VlIGxpa2VcbiAgICAgKiBzZXF1ZW5jZXIgY2hlY2sgZmFpbHVyZXMsIHRyYW5zYWN0aW9uIGFib3J0cywgZXRjLlxuICAgICAqXG4gICAgICogU2VlIGxpdG11cyB0ZXN0IGFib3ZlIGZvciBkZWNpZGluZyBiZXR3ZWVuIEZBSUxFRF9QUkVDT05ESVRJT04sIEFCT1JURUQsXG4gICAgICogYW5kIFVOQVZBSUxBQkxFLlxuICAgICAqL1xuICAgIEFCT1JURUQ6IFwiYWJvcnRlZFwiLFxuICAgIC8qKlxuICAgICAqIE9wZXJhdGlvbiB3YXMgYXR0ZW1wdGVkIHBhc3QgdGhlIHZhbGlkIHJhbmdlLiBFLmcuLCBzZWVraW5nIG9yIHJlYWRpbmdcbiAgICAgKiBwYXN0IGVuZCBvZiBmaWxlLlxuICAgICAqXG4gICAgICogVW5saWtlIElOVkFMSURfQVJHVU1FTlQsIHRoaXMgZXJyb3IgaW5kaWNhdGVzIGEgcHJvYmxlbSB0aGF0IG1heSBiZSBmaXhlZFxuICAgICAqIGlmIHRoZSBzeXN0ZW0gc3RhdGUgY2hhbmdlcy4gRm9yIGV4YW1wbGUsIGEgMzItYml0IGZpbGUgc3lzdGVtIHdpbGxcbiAgICAgKiBnZW5lcmF0ZSBJTlZBTElEX0FSR1VNRU5UIGlmIGFza2VkIHRvIHJlYWQgYXQgYW4gb2Zmc2V0IHRoYXQgaXMgbm90IGluIHRoZVxuICAgICAqIHJhbmdlIFswLDJeMzItMV0sIGJ1dCBpdCB3aWxsIGdlbmVyYXRlIE9VVF9PRl9SQU5HRSBpZiBhc2tlZCB0byByZWFkIGZyb21cbiAgICAgKiBhbiBvZmZzZXQgcGFzdCB0aGUgY3VycmVudCBmaWxlIHNpemUuXG4gICAgICpcbiAgICAgKiBUaGVyZSBpcyBhIGZhaXIgYml0IG9mIG92ZXJsYXAgYmV0d2VlbiBGQUlMRURfUFJFQ09ORElUSU9OIGFuZFxuICAgICAqIE9VVF9PRl9SQU5HRS4gV2UgcmVjb21tZW5kIHVzaW5nIE9VVF9PRl9SQU5HRSAodGhlIG1vcmUgc3BlY2lmaWMgZXJyb3IpXG4gICAgICogd2hlbiBpdCBhcHBsaWVzIHNvIHRoYXQgY2FsbGVycyB3aG8gYXJlIGl0ZXJhdGluZyB0aHJvdWdoIGEgc3BhY2UgY2FuXG4gICAgICogZWFzaWx5IGxvb2sgZm9yIGFuIE9VVF9PRl9SQU5HRSBlcnJvciB0byBkZXRlY3Qgd2hlbiB0aGV5IGFyZSBkb25lLlxuICAgICAqL1xuICAgIE9VVF9PRl9SQU5HRTogXCJvdXQtb2YtcmFuZ2VcIixcbiAgICAvKiogT3BlcmF0aW9uIGlzIG5vdCBpbXBsZW1lbnRlZCBvciBub3Qgc3VwcG9ydGVkL2VuYWJsZWQgaW4gdGhpcyBzZXJ2aWNlLiAqL1xuICAgIFVOSU1QTEVNRU5URUQ6IFwidW5pbXBsZW1lbnRlZFwiLFxuICAgIC8qKlxuICAgICAqIEludGVybmFsIGVycm9ycy4gTWVhbnMgc29tZSBpbnZhcmlhbnRzIGV4cGVjdGVkIGJ5IHVuZGVybHlpbmcgU3lzdGVtIGhhc1xuICAgICAqIGJlZW4gYnJva2VuLiBJZiB5b3Ugc2VlIG9uZSBvZiB0aGVzZSBlcnJvcnMsIFNvbWV0aGluZyBpcyB2ZXJ5IGJyb2tlbi5cbiAgICAgKi9cbiAgICBJTlRFUk5BTDogXCJpbnRlcm5hbFwiLFxuICAgIC8qKlxuICAgICAqIFRoZSBzZXJ2aWNlIGlzIGN1cnJlbnRseSB1bmF2YWlsYWJsZS4gVGhpcyBpcyBhIG1vc3QgbGlrZWx5IGEgdHJhbnNpZW50XG4gICAgICogY29uZGl0aW9uIGFuZCBtYXkgYmUgY29ycmVjdGVkIGJ5IHJldHJ5aW5nIHdpdGggYSBiYWNrb2ZmLlxuICAgICAqXG4gICAgICogU2VlIGxpdG11cyB0ZXN0IGFib3ZlIGZvciBkZWNpZGluZyBiZXR3ZWVuIEZBSUxFRF9QUkVDT05ESVRJT04sIEFCT1JURUQsXG4gICAgICogYW5kIFVOQVZBSUxBQkxFLlxuICAgICAqL1xuICAgIFVOQVZBSUxBQkxFOiBcInVuYXZhaWxhYmxlXCIsXG4gICAgLyoqIFVucmVjb3ZlcmFibGUgZGF0YSBsb3NzIG9yIGNvcnJ1cHRpb24uICovXG4gICAgREFUQV9MT1NTOiBcImRhdGEtbG9zc1wiXG59O1xuXG4vKiogQW4gZXJyb3IgcmV0dXJuZWQgYnkgYSBGaXJlc3RvcmUgb3BlcmF0aW9uLiAqLyBjbGFzcyBGaXJlc3RvcmVFcnJvciBleHRlbmRzIEZpcmViYXNlRXJyb3Ige1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIGJhY2tlbmQgZXJyb3IgY29kZSBhc3NvY2lhdGVkIHdpdGggdGhpcyBlcnJvci5cbiAgICAgKi9cbiAgICBlLCBcbiAgICAvKipcbiAgICAgKiBBIGN1c3RvbSBlcnJvciBkZXNjcmlwdGlvbi5cbiAgICAgKi9cbiAgICB0KSB7XG4gICAgICAgIHN1cGVyKGUsIHQpLCB0aGlzLmNvZGUgPSBlLCB0aGlzLm1lc3NhZ2UgPSB0LCBcbiAgICAgICAgLy8gSEFDSzogV2Ugd3JpdGUgYSB0b1N0cmluZyBwcm9wZXJ0eSBkaXJlY3RseSBiZWNhdXNlIEVycm9yIGlzIG5vdCBhIHJlYWxcbiAgICAgICAgLy8gY2xhc3MgYW5kIHNvIGluaGVyaXRhbmNlIGRvZXMgbm90IHdvcmsgY29ycmVjdGx5LiBXZSBjb3VsZCBhbHRlcm5hdGl2ZWx5XG4gICAgICAgIC8vIGRvIHRoZSBzYW1lIFwiYmFjay1kb29yIGluaGVyaXRhbmNlXCIgdHJpY2sgdGhhdCBGaXJlYmFzZUVycm9yIGRvZXMuXG4gICAgICAgIHRoaXMudG9TdHJpbmcgPSAoKSA9PiBgJHt0aGlzLm5hbWV9OiBbY29kZT0ke3RoaXMuY29kZX1dOiAke3RoaXMubWVzc2FnZX1gO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgX19QUklWQVRFX0RlZmVycmVkIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5wcm9taXNlID0gbmV3IFByb21pc2UoKChlLCB0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLnJlc29sdmUgPSBlLCB0aGlzLnJlamVjdCA9IHQ7XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIF9fUFJJVkFURV9PQXV0aFRva2VuIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMudXNlciA9IHQsIHRoaXMudHlwZSA9IFwiT0F1dGhcIiwgdGhpcy5oZWFkZXJzID0gbmV3IE1hcCwgdGhpcy5oZWFkZXJzLnNldChcIkF1dGhvcml6YXRpb25cIiwgYEJlYXJlciAke2V9YCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgQ3JlZGVudGlhbHNQcm92aWRlciB0aGF0IGFsd2F5cyB5aWVsZHMgYW4gZW1wdHkgdG9rZW4uXG4gKiBAaW50ZXJuYWxcbiAqLyBjbGFzcyBfX1BSSVZBVEVfRW1wdHlBdXRoQ3JlZGVudGlhbHNQcm92aWRlciB7XG4gICAgZ2V0VG9rZW4oKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobnVsbCk7XG4gICAgfVxuICAgIGludmFsaWRhdGVUb2tlbigpIHt9XG4gICAgc3RhcnQoZSwgdCkge1xuICAgICAgICAvLyBGaXJlIHdpdGggaW5pdGlhbCB1c2VyLlxuICAgICAgICBlLmVucXVldWVSZXRyeWFibGUoKCgpID0+IHQoVXNlci5VTkFVVEhFTlRJQ0FURUQpKSk7XG4gICAgfVxuICAgIHNodXRkb3duKCkge31cbn1cblxuLyoqXG4gKiBBIENyZWRlbnRpYWxzUHJvdmlkZXIgdGhhdCBhbHdheXMgcmV0dXJucyBhIGNvbnN0YW50IHRva2VuLiBVc2VkIGZvclxuICogZW11bGF0b3IgdG9rZW4gbW9ja2luZy5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfRW11bGF0b3JBdXRoQ3JlZGVudGlhbHNQcm92aWRlciB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLnRva2VuID0gZSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTdG9yZXMgdGhlIGxpc3RlbmVyIHJlZ2lzdGVyZWQgd2l0aCBzZXRDaGFuZ2VMaXN0ZW5lcigpXG4gICAgICAgICAqIFRoaXMgaXNuJ3QgYWN0dWFsbHkgbmVjZXNzYXJ5IHNpbmNlIHRoZSBVSUQgbmV2ZXIgY2hhbmdlcywgYnV0IHdlIHVzZSB0aGlzXG4gICAgICAgICAqIHRvIHZlcmlmeSB0aGUgbGlzdGVuIGNvbnRyYWN0IGlzIGFkaGVyZWQgdG8gaW4gdGVzdHMuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNoYW5nZUxpc3RlbmVyID0gbnVsbDtcbiAgICB9XG4gICAgZ2V0VG9rZW4oKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy50b2tlbik7XG4gICAgfVxuICAgIGludmFsaWRhdGVUb2tlbigpIHt9XG4gICAgc3RhcnQoZSwgdCkge1xuICAgICAgICB0aGlzLmNoYW5nZUxpc3RlbmVyID0gdCwgXG4gICAgICAgIC8vIEZpcmUgd2l0aCBpbml0aWFsIHVzZXIuXG4gICAgICAgIGUuZW5xdWV1ZVJldHJ5YWJsZSgoKCkgPT4gdCh0aGlzLnRva2VuLnVzZXIpKSk7XG4gICAgfVxuICAgIHNodXRkb3duKCkge1xuICAgICAgICB0aGlzLmNoYW5nZUxpc3RlbmVyID0gbnVsbDtcbiAgICB9XG59XG5cbmNsYXNzIF9fUFJJVkFURV9GaXJlYmFzZUF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMudCA9IGUsIFxuICAgICAgICAvKiogVHJhY2tzIHRoZSBjdXJyZW50IFVzZXIuICovXG4gICAgICAgIHRoaXMuY3VycmVudFVzZXIgPSBVc2VyLlVOQVVUSEVOVElDQVRFRCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb3VudGVyIHVzZWQgdG8gZGV0ZWN0IGlmIHRoZSB0b2tlbiBjaGFuZ2VkIHdoaWxlIGEgZ2V0VG9rZW4gcmVxdWVzdCB3YXNcbiAgICAgICAgICogb3V0c3RhbmRpbmcuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmkgPSAwLCB0aGlzLmZvcmNlUmVmcmVzaCA9ICExLCB0aGlzLmF1dGggPSBudWxsO1xuICAgIH1cbiAgICBzdGFydChlLCB0KSB7XG4gICAgICAgIGxldCBuID0gdGhpcy5pO1xuICAgICAgICAvLyBBIGNoYW5nZSBsaXN0ZW5lciB0aGF0IHByZXZlbnRzIGRvdWJsZS1maXJpbmcgZm9yIHRoZSBzYW1lIHRva2VuIGNoYW5nZS5cbiAgICAgICAgICAgICAgICBjb25zdCBfX1BSSVZBVEVfZ3VhcmRlZENoYW5nZUxpc3RlbmVyID0gZSA9PiB0aGlzLmkgIT09IG4gPyAobiA9IHRoaXMuaSwgXG4gICAgICAgIHQoZSkpIDogUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIC8vIEEgcHJvbWlzZSB0aGF0IGNhbiBiZSB3YWl0ZWQgb24gdG8gYmxvY2sgb24gdGhlIG5leHQgdG9rZW4gY2hhbmdlLlxuICAgICAgICAvLyBUaGlzIHByb21pc2UgaXMgcmUtY3JlYXRlZCBhZnRlciBlYWNoIGNoYW5nZS5cbiAgICAgICAgICAgICAgICBsZXQgciA9IG5ldyBfX1BSSVZBVEVfRGVmZXJyZWQ7XG4gICAgICAgIHRoaXMubyA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuaSsrLCB0aGlzLmN1cnJlbnRVc2VyID0gdGhpcy51KCksIHIucmVzb2x2ZSgpLCByID0gbmV3IF9fUFJJVkFURV9EZWZlcnJlZCwgXG4gICAgICAgICAgICBlLmVucXVldWVSZXRyeWFibGUoKCgpID0+IF9fUFJJVkFURV9ndWFyZGVkQ2hhbmdlTGlzdGVuZXIodGhpcy5jdXJyZW50VXNlcikpKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgX19QUklWQVRFX2F3YWl0TmV4dFRva2VuID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdCA9IHI7XG4gICAgICAgICAgICBlLmVucXVldWVSZXRyeWFibGUoKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0LnByb21pc2UsIGF3YWl0IF9fUFJJVkFURV9ndWFyZGVkQ2hhbmdlTGlzdGVuZXIodGhpcy5jdXJyZW50VXNlcik7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0sIF9fUFJJVkFURV9yZWdpc3RlckF1dGggPSBlID0+IHtcbiAgICAgICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkZpcmViYXNlQXV0aENyZWRlbnRpYWxzUHJvdmlkZXJcIiwgXCJBdXRoIGRldGVjdGVkXCIpLCB0aGlzLmF1dGggPSBlLCBcbiAgICAgICAgICAgIHRoaXMuYXV0aC5hZGRBdXRoVG9rZW5MaXN0ZW5lcih0aGlzLm8pLCBfX1BSSVZBVEVfYXdhaXROZXh0VG9rZW4oKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy50Lm9uSW5pdCgoZSA9PiBfX1BSSVZBVEVfcmVnaXN0ZXJBdXRoKGUpKSksIFxuICAgICAgICAvLyBPdXIgdXNlcnMgY2FuIGluaXRpYWxpemUgQXV0aCByaWdodCBhZnRlciBGaXJlc3RvcmUsIHNvIHdlIGdpdmUgaXRcbiAgICAgICAgLy8gYSBjaGFuY2UgdG8gcmVnaXN0ZXIgaXRzZWxmIHdpdGggdGhlIGNvbXBvbmVudCBmcmFtZXdvcmsgYmVmb3JlIHdlXG4gICAgICAgIC8vIGRldGVybWluZSB3aGV0aGVyIHRvIHN0YXJ0IHVwIGluIHVuYXV0aGVudGljYXRlZCBtb2RlLlxuICAgICAgICBzZXRUaW1lb3V0KCgoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuYXV0aCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLnQuZ2V0SW1tZWRpYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWw6ICEwXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZSA/IF9fUFJJVkFURV9yZWdpc3RlckF1dGgoZSkgOiAoXG4gICAgICAgICAgICAgICAgLy8gSWYgYXV0aCBpcyBzdGlsbCBub3QgYXZhaWxhYmxlLCBwcm9jZWVkIHdpdGggYG51bGxgIHVzZXJcbiAgICAgICAgICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoXCJGaXJlYmFzZUF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyXCIsIFwiQXV0aCBub3QgeWV0IGRldGVjdGVkXCIpLCBcbiAgICAgICAgICAgICAgICByLnJlc29sdmUoKSwgciA9IG5ldyBfX1BSSVZBVEVfRGVmZXJyZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSwgMCksIF9fUFJJVkFURV9hd2FpdE5leHRUb2tlbigpO1xuICAgIH1cbiAgICBnZXRUb2tlbigpIHtcbiAgICAgICAgLy8gVGFrZSBub3RlIG9mIHRoZSBjdXJyZW50IHZhbHVlIG9mIHRoZSB0b2tlbkNvdW50ZXIgc28gdGhhdCB0aGlzIG1ldGhvZFxuICAgICAgICAvLyBjYW4gZmFpbCAod2l0aCBhbiBBQk9SVEVEIGVycm9yKSBpZiB0aGVyZSBpcyBhIHRva2VuIGNoYW5nZSB3aGlsZSB0aGVcbiAgICAgICAgLy8gcmVxdWVzdCBpcyBvdXRzdGFuZGluZy5cbiAgICAgICAgY29uc3QgZSA9IHRoaXMuaSwgdCA9IHRoaXMuZm9yY2VSZWZyZXNoO1xuICAgICAgICByZXR1cm4gdGhpcy5mb3JjZVJlZnJlc2ggPSAhMSwgdGhpcy5hdXRoID8gdGhpcy5hdXRoLmdldFRva2VuKHQpLnRoZW4oKHQgPT4gXG4gICAgICAgIC8vIENhbmNlbCB0aGUgcmVxdWVzdCBzaW5jZSB0aGUgdG9rZW4gY2hhbmdlZCB3aGlsZSB0aGUgcmVxdWVzdCB3YXNcbiAgICAgICAgLy8gb3V0c3RhbmRpbmcgc28gdGhlIHJlc3BvbnNlIGlzIHBvdGVudGlhbGx5IGZvciBhIHByZXZpb3VzIHVzZXIgKHdoaWNoXG4gICAgICAgIC8vIHVzZXIsIHdlIGNhbid0IGJlIHN1cmUpLlxuICAgICAgICB0aGlzLmkgIT09IGUgPyAoX19QUklWQVRFX2xvZ0RlYnVnKFwiRmlyZWJhc2VBdXRoQ3JlZGVudGlhbHNQcm92aWRlclwiLCBcImdldFRva2VuIGFib3J0ZWQgZHVlIHRvIHRva2VuIGNoYW5nZS5cIiksIFxuICAgICAgICB0aGlzLmdldFRva2VuKCkpIDogdCA/IChfX1BSSVZBVEVfaGFyZEFzc2VydChcInN0cmluZ1wiID09IHR5cGVvZiB0LmFjY2Vzc1Rva2VuKSwgXG4gICAgICAgIG5ldyBfX1BSSVZBVEVfT0F1dGhUb2tlbih0LmFjY2Vzc1Rva2VuLCB0aGlzLmN1cnJlbnRVc2VyKSkgOiBudWxsKSkgOiBQcm9taXNlLnJlc29sdmUobnVsbCk7XG4gICAgfVxuICAgIGludmFsaWRhdGVUb2tlbigpIHtcbiAgICAgICAgdGhpcy5mb3JjZVJlZnJlc2ggPSAhMDtcbiAgICB9XG4gICAgc2h1dGRvd24oKSB7XG4gICAgICAgIHRoaXMuYXV0aCAmJiB0aGlzLmF1dGgucmVtb3ZlQXV0aFRva2VuTGlzdGVuZXIodGhpcy5vKTtcbiAgICB9XG4gICAgLy8gQXV0aC5nZXRVaWQoKSBjYW4gcmV0dXJuIG51bGwgZXZlbiB3aXRoIGEgdXNlciBsb2dnZWQgaW4uIEl0IGlzIGJlY2F1c2VcbiAgICAvLyBnZXRVaWQoKSBpcyBzeW5jaHJvbm91cywgYnV0IHRoZSBhdXRoIGNvZGUgcG9wdWxhdGluZyBVaWQgaXMgYXN5bmNocm9ub3VzLlxuICAgIC8vIFRoaXMgbWV0aG9kIHNob3VsZCBvbmx5IGJlIGNhbGxlZCBpbiB0aGUgQXV0aFRva2VuTGlzdGVuZXIgY2FsbGJhY2tcbiAgICAvLyB0byBndWFyYW50ZWUgdG8gZ2V0IHRoZSBhY3R1YWwgdXNlci5cbiAgICB1KCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5hdXRoICYmIHRoaXMuYXV0aC5nZXRVaWQoKTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9oYXJkQXNzZXJ0KG51bGwgPT09IGUgfHwgXCJzdHJpbmdcIiA9PSB0eXBlb2YgZSksIG5ldyBVc2VyKGUpO1xuICAgIH1cbn1cblxuLypcbiAqIEZpcnN0UGFydHlUb2tlbiBwcm92aWRlcyBhIGZyZXNoIHRva2VuIGVhY2ggdGltZSBpdHMgdmFsdWVcbiAqIGlzIHJlcXVlc3RlZCwgYmVjYXVzZSBpZiB0aGUgdG9rZW4gaXMgdG9vIG9sZCwgcmVxdWVzdHMgd2lsbCBiZSByZWplY3RlZC5cbiAqIFRlY2huaWNhbGx5IHRoaXMgbWF5IG5vIGxvbmdlciBiZSBuZWNlc3Nhcnkgc2luY2UgdGhlIFNESyBzaG91bGQgZ3JhY2VmdWxseVxuICogcmVjb3ZlciBmcm9tIHVuYXV0aGVudGljYXRlZCBlcnJvcnMgKHNlZSBiLzMzMTQ3ODE4IGZvciBjb250ZXh0KSwgYnV0IGl0J3NcbiAqIHNhZmVyIHRvIGtlZXAgdGhlIGltcGxlbWVudGF0aW9uIGFzLWlzLlxuICovIGNsYXNzIF9fUFJJVkFURV9GaXJzdFBhcnR5VG9rZW4ge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4pIHtcbiAgICAgICAgdGhpcy5sID0gZSwgdGhpcy5oID0gdCwgdGhpcy5QID0gbiwgdGhpcy50eXBlID0gXCJGaXJzdFBhcnR5XCIsIHRoaXMudXNlciA9IFVzZXIuRklSU1RfUEFSVFksIFxuICAgICAgICB0aGlzLkkgPSBuZXcgTWFwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIGFuIGF1dGhvcml6YXRpb24gdG9rZW4sIHVzaW5nIGEgcHJvdmlkZWQgZmFjdG9yeSBmdW5jdGlvbiwgb3IgcmV0dXJuXG4gICAgICogbnVsbC5cbiAgICAgKi8gICAgVCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuUCA/IHRoaXMuUCgpIDogbnVsbDtcbiAgICB9XG4gICAgZ2V0IGhlYWRlcnMoKSB7XG4gICAgICAgIHRoaXMuSS5zZXQoXCJYLUdvb2ctQXV0aFVzZXJcIiwgdGhpcy5sKTtcbiAgICAgICAgLy8gVXNlIGFycmF5IG5vdGF0aW9uIHRvIHByZXZlbnQgbWluaWZpY2F0aW9uXG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLlQoKTtcbiAgICAgICAgcmV0dXJuIGUgJiYgdGhpcy5JLnNldChcIkF1dGhvcml6YXRpb25cIiwgZSksIHRoaXMuaCAmJiB0aGlzLkkuc2V0KFwiWC1Hb29nLUlhbS1BdXRob3JpemF0aW9uLVRva2VuXCIsIHRoaXMuaCksIFxuICAgICAgICB0aGlzLkk7XG4gICAgfVxufVxuXG4vKlxuICogUHJvdmlkZXMgdXNlciBjcmVkZW50aWFscyByZXF1aXJlZCBmb3IgdGhlIEZpcmVzdG9yZSBKYXZhU2NyaXB0IFNES1xuICogdG8gYXV0aGVudGljYXRlIHRoZSB1c2VyLCB1c2luZyB0ZWNobmlxdWUgdGhhdCBpcyBvbmx5IGF2YWlsYWJsZVxuICogdG8gYXBwbGljYXRpb25zIGhvc3RlZCBieSBHb29nbGUuXG4gKi8gY2xhc3MgX19QUklWQVRFX0ZpcnN0UGFydHlBdXRoQ3JlZGVudGlhbHNQcm92aWRlciB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbikge1xuICAgICAgICB0aGlzLmwgPSBlLCB0aGlzLmggPSB0LCB0aGlzLlAgPSBuO1xuICAgIH1cbiAgICBnZXRUb2tlbigpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShuZXcgX19QUklWQVRFX0ZpcnN0UGFydHlUb2tlbih0aGlzLmwsIHRoaXMuaCwgdGhpcy5QKSk7XG4gICAgfVxuICAgIHN0YXJ0KGUsIHQpIHtcbiAgICAgICAgLy8gRmlyZSB3aXRoIGluaXRpYWwgdWlkLlxuICAgICAgICBlLmVucXVldWVSZXRyeWFibGUoKCgpID0+IHQoVXNlci5GSVJTVF9QQVJUWSkpKTtcbiAgICB9XG4gICAgc2h1dGRvd24oKSB7fVxuICAgIGludmFsaWRhdGVUb2tlbigpIHt9XG59XG5cbmNsYXNzIEFwcENoZWNrVG9rZW4ge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IGUsIHRoaXMudHlwZSA9IFwiQXBwQ2hlY2tcIiwgdGhpcy5oZWFkZXJzID0gbmV3IE1hcCwgZSAmJiBlLmxlbmd0aCA+IDAgJiYgdGhpcy5oZWFkZXJzLnNldChcIngtZmlyZWJhc2UtYXBwY2hlY2tcIiwgdGhpcy52YWx1ZSk7XG4gICAgfVxufVxuXG5jbGFzcyBfX1BSSVZBVEVfRmlyZWJhc2VBcHBDaGVja1Rva2VuUHJvdmlkZXIge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5BID0gZSwgdGhpcy5mb3JjZVJlZnJlc2ggPSAhMSwgdGhpcy5hcHBDaGVjayA9IG51bGwsIHRoaXMuUiA9IG51bGw7XG4gICAgfVxuICAgIHN0YXJ0KGUsIHQpIHtcbiAgICAgICAgY29uc3Qgb25Ub2tlbkNoYW5nZWQgPSBlID0+IHtcbiAgICAgICAgICAgIG51bGwgIT0gZS5lcnJvciAmJiBfX1BSSVZBVEVfbG9nRGVidWcoXCJGaXJlYmFzZUFwcENoZWNrVG9rZW5Qcm92aWRlclwiLCBgRXJyb3IgZ2V0dGluZyBBcHAgQ2hlY2sgdG9rZW47IHVzaW5nIHBsYWNlaG9sZGVyIHRva2VuIGluc3RlYWQuIEVycm9yOiAke2UuZXJyb3IubWVzc2FnZX1gKTtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBlLnRva2VuICE9PSB0aGlzLlI7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5SID0gZS50b2tlbiwgX19QUklWQVRFX2xvZ0RlYnVnKFwiRmlyZWJhc2VBcHBDaGVja1Rva2VuUHJvdmlkZXJcIiwgYFJlY2VpdmVkICR7biA/IFwibmV3XCIgOiBcImV4aXN0aW5nXCJ9IHRva2VuLmApLCBcbiAgICAgICAgICAgIG4gPyB0KGUudG9rZW4pIDogUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMubyA9IHQgPT4ge1xuICAgICAgICAgICAgZS5lbnF1ZXVlUmV0cnlhYmxlKCgoKSA9PiBvblRva2VuQ2hhbmdlZCh0KSkpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBfX1BSSVZBVEVfcmVnaXN0ZXJBcHBDaGVjayA9IGUgPT4ge1xuICAgICAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiRmlyZWJhc2VBcHBDaGVja1Rva2VuUHJvdmlkZXJcIiwgXCJBcHBDaGVjayBkZXRlY3RlZFwiKSwgdGhpcy5hcHBDaGVjayA9IGUsIFxuICAgICAgICAgICAgdGhpcy5hcHBDaGVjay5hZGRUb2tlbkxpc3RlbmVyKHRoaXMubyk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuQS5vbkluaXQoKGUgPT4gX19QUklWQVRFX3JlZ2lzdGVyQXBwQ2hlY2soZSkpKSwgXG4gICAgICAgIC8vIE91ciB1c2VycyBjYW4gaW5pdGlhbGl6ZSBBcHBDaGVjayBhZnRlciBGaXJlc3RvcmUsIHNvIHdlIGdpdmUgaXRcbiAgICAgICAgLy8gYSBjaGFuY2UgdG8gcmVnaXN0ZXIgaXRzZWxmIHdpdGggdGhlIGNvbXBvbmVudCBmcmFtZXdvcmsuXG4gICAgICAgIHNldFRpbWVvdXQoKCgpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5hcHBDaGVjaykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLkEuZ2V0SW1tZWRpYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWw6ICEwXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZSA/IF9fUFJJVkFURV9yZWdpc3RlckFwcENoZWNrKGUpIDogXG4gICAgICAgICAgICAgICAgLy8gSWYgQXBwQ2hlY2sgaXMgc3RpbGwgbm90IGF2YWlsYWJsZSwgcHJvY2VlZCB3aXRob3V0IGl0LlxuICAgICAgICAgICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkZpcmViYXNlQXBwQ2hlY2tUb2tlblByb3ZpZGVyXCIsIFwiQXBwQ2hlY2sgbm90IHlldCBkZXRlY3RlZFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSksIDApO1xuICAgIH1cbiAgICBnZXRUb2tlbigpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuZm9yY2VSZWZyZXNoO1xuICAgICAgICByZXR1cm4gdGhpcy5mb3JjZVJlZnJlc2ggPSAhMSwgdGhpcy5hcHBDaGVjayA/IHRoaXMuYXBwQ2hlY2suZ2V0VG9rZW4oZSkudGhlbigoZSA9PiBlID8gKF9fUFJJVkFURV9oYXJkQXNzZXJ0KFwic3RyaW5nXCIgPT0gdHlwZW9mIGUudG9rZW4pLCBcbiAgICAgICAgdGhpcy5SID0gZS50b2tlbiwgbmV3IEFwcENoZWNrVG9rZW4oZS50b2tlbikpIDogbnVsbCkpIDogUHJvbWlzZS5yZXNvbHZlKG51bGwpO1xuICAgIH1cbiAgICBpbnZhbGlkYXRlVG9rZW4oKSB7XG4gICAgICAgIHRoaXMuZm9yY2VSZWZyZXNoID0gITA7XG4gICAgfVxuICAgIHNodXRkb3duKCkge1xuICAgICAgICB0aGlzLmFwcENoZWNrICYmIHRoaXMuYXBwQ2hlY2sucmVtb3ZlVG9rZW5MaXN0ZW5lcih0aGlzLm8pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBbiBBcHBDaGVjayB0b2tlbiBwcm92aWRlciB0aGF0IGFsd2F5cyB5aWVsZHMgYW4gZW1wdHkgdG9rZW4uXG4gKiBAaW50ZXJuYWxcbiAqLyBjbGFzcyBfX1BSSVZBVEVfRW1wdHlBcHBDaGVja1Rva2VuUHJvdmlkZXIge1xuICAgIGdldFRva2VuKCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG5ldyBBcHBDaGVja1Rva2VuKFwiXCIpKTtcbiAgICB9XG4gICAgaW52YWxpZGF0ZVRva2VuKCkge31cbiAgICBzdGFydChlLCB0KSB7fVxuICAgIHNodXRkb3duKCkge31cbn1cblxuLyoqXG4gKiBCdWlsZHMgYSBDcmVkZW50aWFsc1Byb3ZpZGVyIGRlcGVuZGluZyBvbiB0aGUgdHlwZSBvZlxuICogdGhlIGNyZWRlbnRpYWxzIHBhc3NlZCBpbi5cbiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogR2VuZXJhdGVzIGBuQnl0ZXNgIG9mIHJhbmRvbSBieXRlcy5cbiAqXG4gKiBJZiBgbkJ5dGVzIDwgMGAgLCBhbiBlcnJvciB3aWxsIGJlIHRocm93bi5cbiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX3JhbmRvbUJ5dGVzKGUpIHtcbiAgICAvLyBQb2x5ZmlsbHMgZm9yIElFIGFuZCBXZWJXb3JrZXIgYnkgdXNpbmcgYHNlbGZgIGFuZCBgbXNDcnlwdG9gIHdoZW4gYGNyeXB0b2AgaXMgbm90IGF2YWlsYWJsZS5cbiAgICBjb25zdCB0ID0gXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBzZWxmICYmIChzZWxmLmNyeXB0byB8fCBzZWxmLm1zQ3J5cHRvKSwgbiA9IG5ldyBVaW50OEFycmF5KGUpO1xuICAgIGlmICh0ICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgdC5nZXRSYW5kb21WYWx1ZXMpIHQuZ2V0UmFuZG9tVmFsdWVzKG4pOyBlbHNlIFxuICAgIC8vIEZhbGxzIGJhY2sgdG8gTWF0aC5yYW5kb21cbiAgICBmb3IgKGxldCB0ID0gMDsgdCA8IGU7IHQrKykgblt0XSA9IE1hdGguZmxvb3IoMjU2ICogTWF0aC5yYW5kb20oKSk7XG4gICAgcmV0dXJuIG47XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgdXRpbGl0eSBjbGFzcyBmb3IgZ2VuZXJhdGluZyB1bmlxdWUgYWxwaGFudW1lcmljIElEcyBvZiBhIHNwZWNpZmllZCBsZW5ndGguXG4gKlxuICogQGludGVybmFsXG4gKiBFeHBvcnRlZCBpbnRlcm5hbGx5IGZvciB0ZXN0aW5nIHB1cnBvc2VzLlxuICovIGNsYXNzIF9fUFJJVkFURV9BdXRvSWQge1xuICAgIHN0YXRpYyBuZXdJZCgpIHtcbiAgICAgICAgLy8gQWxwaGFudW1lcmljIGNoYXJhY3RlcnNcbiAgICAgICAgY29uc3QgZSA9IFwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODlcIiwgdCA9IE1hdGguZmxvb3IoMjU2IC8gZS5sZW5ndGgpICogZS5sZW5ndGg7XG4gICAgICAgIC8vIFRoZSBsYXJnZXN0IGJ5dGUgdmFsdWUgdGhhdCBpcyBhIG11bHRpcGxlIG9mIGBjaGFyLmxlbmd0aGAuXG4gICAgICAgICAgICAgICAgbGV0IG4gPSBcIlwiO1xuICAgICAgICBmb3IgKDtuLmxlbmd0aCA8IDIwOyApIHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfcmFuZG9tQnl0ZXMoNDApO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByLmxlbmd0aDsgKytpKSBcbiAgICAgICAgICAgIC8vIE9ubHkgYWNjZXB0IHZhbHVlcyB0aGF0IGFyZSBbMCwgbWF4TXVsdGlwbGUpLCB0aGlzIGVuc3VyZXMgdGhleSBjYW5cbiAgICAgICAgICAgIC8vIGJlIGV2ZW5seSBtYXBwZWQgdG8gaW5kaWNlcyBvZiBgY2hhcnNgIHZpYSBhIG1vZHVsbyBvcGVyYXRpb24uXG4gICAgICAgICAgICBuLmxlbmd0aCA8IDIwICYmIHJbaV0gPCB0ICYmIChuICs9IGUuY2hhckF0KHJbaV0gJSBlLmxlbmd0aCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IoZSwgdCkge1xuICAgIHJldHVybiBlIDwgdCA/IC0xIDogZSA+IHQgPyAxIDogMDtcbn1cblxuLyoqIEhlbHBlciB0byBjb21wYXJlIGFycmF5cyB1c2luZyBpc0VxdWFsKCkuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9hcnJheUVxdWFscyhlLCB0LCBuKSB7XG4gICAgcmV0dXJuIGUubGVuZ3RoID09PSB0Lmxlbmd0aCAmJiBlLmV2ZXJ5KCgoZSwgcikgPT4gbihlLCB0W3JdKSkpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIGltbWVkaWF0ZSBsZXhpY29ncmFwaGljYWxseS1mb2xsb3dpbmcgc3RyaW5nLiBUaGlzIGlzIHVzZWZ1bCB0b1xuICogY29uc3RydWN0IGFuIGluY2x1c2l2ZSByYW5nZSBmb3IgaW5kZXhlZGRiIGl0ZXJhdG9ycy5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfaW1tZWRpYXRlU3VjY2Vzc29yKGUpIHtcbiAgICAvLyBSZXR1cm4gdGhlIGlucHV0IHN0cmluZywgd2l0aCBhbiBhZGRpdGlvbmFsIE5VTCBieXRlIGFwcGVuZGVkLlxuICAgIHJldHVybiBlICsgXCJcXDBcIjtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8vIFRoZSBlYXJsaWVzdCBkYXRlIHN1cHBvcnRlZCBieSBGaXJlc3RvcmUgdGltZXN0YW1wcyAoMDAwMS0wMS0wMVQwMDowMDowMFopLlxuLyoqXG4gKiBBIGBUaW1lc3RhbXBgIHJlcHJlc2VudHMgYSBwb2ludCBpbiB0aW1lIGluZGVwZW5kZW50IG9mIGFueSB0aW1lIHpvbmUgb3JcbiAqIGNhbGVuZGFyLCByZXByZXNlbnRlZCBhcyBzZWNvbmRzIGFuZCBmcmFjdGlvbnMgb2Ygc2Vjb25kcyBhdCBuYW5vc2Vjb25kXG4gKiByZXNvbHV0aW9uIGluIFVUQyBFcG9jaCB0aW1lLlxuICpcbiAqIEl0IGlzIGVuY29kZWQgdXNpbmcgdGhlIFByb2xlcHRpYyBHcmVnb3JpYW4gQ2FsZW5kYXIgd2hpY2ggZXh0ZW5kcyB0aGVcbiAqIEdyZWdvcmlhbiBjYWxlbmRhciBiYWNrd2FyZHMgdG8geWVhciBvbmUuIEl0IGlzIGVuY29kZWQgYXNzdW1pbmcgYWxsIG1pbnV0ZXNcbiAqIGFyZSA2MCBzZWNvbmRzIGxvbmcsIGkuZS4gbGVhcCBzZWNvbmRzIGFyZSBcInNtZWFyZWRcIiBzbyB0aGF0IG5vIGxlYXAgc2Vjb25kXG4gKiB0YWJsZSBpcyBuZWVkZWQgZm9yIGludGVycHJldGF0aW9uLiBSYW5nZSBpcyBmcm9tIDAwMDEtMDEtMDFUMDA6MDA6MDBaIHRvXG4gKiA5OTk5LTEyLTMxVDIzOjU5OjU5Ljk5OTk5OTk5OVouXG4gKlxuICogRm9yIGV4YW1wbGVzIGFuZCBmdXJ0aGVyIHNwZWNpZmljYXRpb25zLCByZWZlciB0byB0aGVcbiAqIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlL3Byb3RvYnVmL2Jsb2IvbWFzdGVyL3NyYy9nb29nbGUvcHJvdG9idWYvdGltZXN0YW1wLnByb3RvIHwgVGltZXN0YW1wIGRlZmluaXRpb259LlxuICovXG5jbGFzcyBUaW1lc3RhbXAge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgdGltZXN0YW1wLlxuICAgICAqXG4gICAgICogQHBhcmFtIHNlY29uZHMgLSBUaGUgbnVtYmVyIG9mIHNlY29uZHMgb2YgVVRDIHRpbWUgc2luY2UgVW5peCBlcG9jaFxuICAgICAqICAgICAxOTcwLTAxLTAxVDAwOjAwOjAwWi4gTXVzdCBiZSBmcm9tIDAwMDEtMDEtMDFUMDA6MDA6MDBaIHRvXG4gICAgICogICAgIDk5OTktMTItMzFUMjM6NTk6NTlaIGluY2x1c2l2ZS5cbiAgICAgKiBAcGFyYW0gbmFub3NlY29uZHMgLSBUaGUgbm9uLW5lZ2F0aXZlIGZyYWN0aW9ucyBvZiBhIHNlY29uZCBhdCBuYW5vc2Vjb25kXG4gICAgICogICAgIHJlc29sdXRpb24uIE5lZ2F0aXZlIHNlY29uZCB2YWx1ZXMgd2l0aCBmcmFjdGlvbnMgbXVzdCBzdGlsbCBoYXZlXG4gICAgICogICAgIG5vbi1uZWdhdGl2ZSBuYW5vc2Vjb25kcyB2YWx1ZXMgdGhhdCBjb3VudCBmb3J3YXJkIGluIHRpbWUuIE11c3QgYmVcbiAgICAgKiAgICAgZnJvbSAwIHRvIDk5OSw5OTksOTk5IGluY2x1c2l2ZS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgbnVtYmVyIG9mIHNlY29uZHMgb2YgVVRDIHRpbWUgc2luY2UgVW5peCBlcG9jaCAxOTcwLTAxLTAxVDAwOjAwOjAwWi5cbiAgICAgKi9cbiAgICBlLCBcbiAgICAvKipcbiAgICAgKiBUaGUgZnJhY3Rpb25zIG9mIGEgc2Vjb25kIGF0IG5hbm9zZWNvbmQgcmVzb2x1dGlvbi4qXG4gICAgICovXG4gICAgdCkge1xuICAgICAgICBpZiAodGhpcy5zZWNvbmRzID0gZSwgdGhpcy5uYW5vc2Vjb25kcyA9IHQsIHQgPCAwKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5JTlZBTElEX0FSR1VNRU5ULCBcIlRpbWVzdGFtcCBuYW5vc2Vjb25kcyBvdXQgb2YgcmFuZ2U6IFwiICsgdCk7XG4gICAgICAgIGlmICh0ID49IDFlOSkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgXCJUaW1lc3RhbXAgbmFub3NlY29uZHMgb3V0IG9mIHJhbmdlOiBcIiArIHQpO1xuICAgICAgICBpZiAoZSA8IC02MjEzNTU5NjgwMCkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgXCJUaW1lc3RhbXAgc2Vjb25kcyBvdXQgb2YgcmFuZ2U6IFwiICsgZSk7XG4gICAgICAgIC8vIFRoaXMgd2lsbCBicmVhayBpbiB0aGUgeWVhciAxMCwwMDAuXG4gICAgICAgICAgICAgICAgaWYgKGUgPj0gMjUzNDAyMzAwODAwKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5JTlZBTElEX0FSR1VNRU5ULCBcIlRpbWVzdGFtcCBzZWNvbmRzIG91dCBvZiByYW5nZTogXCIgKyBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyB0aW1lc3RhbXAgd2l0aCB0aGUgY3VycmVudCBkYXRlLCB3aXRoIG1pbGxpc2Vjb25kIHByZWNpc2lvbi5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIGEgbmV3IHRpbWVzdGFtcCByZXByZXNlbnRpbmcgdGhlIGN1cnJlbnQgZGF0ZS5cbiAgICAgKi8gICAgc3RhdGljIG5vdygpIHtcbiAgICAgICAgcmV0dXJuIFRpbWVzdGFtcC5mcm9tTWlsbGlzKERhdGUubm93KCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IHRpbWVzdGFtcCBmcm9tIHRoZSBnaXZlbiBkYXRlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGRhdGUgLSBUaGUgZGF0ZSB0byBpbml0aWFsaXplIHRoZSBgVGltZXN0YW1wYCBmcm9tLlxuICAgICAqIEByZXR1cm5zIEEgbmV3IGBUaW1lc3RhbXBgIHJlcHJlc2VudGluZyB0aGUgc2FtZSBwb2ludCBpbiB0aW1lIGFzIHRoZSBnaXZlblxuICAgICAqICAgICBkYXRlLlxuICAgICAqLyAgICBzdGF0aWMgZnJvbURhdGUoZSkge1xuICAgICAgICByZXR1cm4gVGltZXN0YW1wLmZyb21NaWxsaXMoZS5nZXRUaW1lKCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IHRpbWVzdGFtcCBmcm9tIHRoZSBnaXZlbiBudW1iZXIgb2YgbWlsbGlzZWNvbmRzLlxuICAgICAqXG4gICAgICogQHBhcmFtIG1pbGxpc2Vjb25kcyAtIE51bWJlciBvZiBtaWxsaXNlY29uZHMgc2luY2UgVW5peCBlcG9jaFxuICAgICAqICAgICAxOTcwLTAxLTAxVDAwOjAwOjAwWi5cbiAgICAgKiBAcmV0dXJucyBBIG5ldyBgVGltZXN0YW1wYCByZXByZXNlbnRpbmcgdGhlIHNhbWUgcG9pbnQgaW4gdGltZSBhcyB0aGUgZ2l2ZW5cbiAgICAgKiAgICAgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcy5cbiAgICAgKi8gICAgc3RhdGljIGZyb21NaWxsaXMoZSkge1xuICAgICAgICBjb25zdCB0ID0gTWF0aC5mbG9vcihlIC8gMWUzKSwgbiA9IE1hdGguZmxvb3IoMWU2ICogKGUgLSAxZTMgKiB0KSk7XG4gICAgICAgIHJldHVybiBuZXcgVGltZXN0YW1wKHQsIG4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyBhIGBUaW1lc3RhbXBgIHRvIGEgSmF2YVNjcmlwdCBgRGF0ZWAgb2JqZWN0LiBUaGlzIGNvbnZlcnNpb25cbiAgICAgKiBjYXVzZXMgYSBsb3NzIG9mIHByZWNpc2lvbiBzaW5jZSBgRGF0ZWAgb2JqZWN0cyBvbmx5IHN1cHBvcnQgbWlsbGlzZWNvbmRcbiAgICAgKiBwcmVjaXNpb24uXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBKYXZhU2NyaXB0IGBEYXRlYCBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBzYW1lIHBvaW50IGluIHRpbWUgYXNcbiAgICAgKiAgICAgdGhpcyBgVGltZXN0YW1wYCwgd2l0aCBtaWxsaXNlY29uZCBwcmVjaXNpb24uXG4gICAgICovICAgIHRvRGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKHRoaXMudG9NaWxsaXMoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGEgYFRpbWVzdGFtcGAgdG8gYSBudW1lcmljIHRpbWVzdGFtcCAoaW4gbWlsbGlzZWNvbmRzIHNpbmNlXG4gICAgICogZXBvY2gpLiBUaGlzIG9wZXJhdGlvbiBjYXVzZXMgYSBsb3NzIG9mIHByZWNpc2lvbi5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSBwb2ludCBpbiB0aW1lIGNvcnJlc3BvbmRpbmcgdG8gdGhpcyB0aW1lc3RhbXAsIHJlcHJlc2VudGVkIGFzXG4gICAgICogICAgIHRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHNpbmNlIFVuaXggZXBvY2ggMTk3MC0wMS0wMVQwMDowMDowMFouXG4gICAgICovICAgIHRvTWlsbGlzKCkge1xuICAgICAgICByZXR1cm4gMWUzICogdGhpcy5zZWNvbmRzICsgdGhpcy5uYW5vc2Vjb25kcyAvIDFlNjtcbiAgICB9XG4gICAgX2NvbXBhcmVUbyhlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlY29uZHMgPT09IGUuc2Vjb25kcyA/IF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKHRoaXMubmFub3NlY29uZHMsIGUubmFub3NlY29uZHMpIDogX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IodGhpcy5zZWNvbmRzLCBlLnNlY29uZHMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBgVGltZXN0YW1wYCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqXG4gICAgICogQHBhcmFtIG90aGVyIC0gVGhlIGBUaW1lc3RhbXBgIHRvIGNvbXBhcmUgYWdhaW5zdC5cbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoaXMgYFRpbWVzdGFtcGAgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKi8gICAgaXNFcXVhbChlKSB7XG4gICAgICAgIHJldHVybiBlLnNlY29uZHMgPT09IHRoaXMuc2Vjb25kcyAmJiBlLm5hbm9zZWNvbmRzID09PSB0aGlzLm5hbm9zZWNvbmRzO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhIHRleHR1YWwgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBgVGltZXN0YW1wYC4gKi8gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBcIlRpbWVzdGFtcChzZWNvbmRzPVwiICsgdGhpcy5zZWNvbmRzICsgXCIsIG5hbm9zZWNvbmRzPVwiICsgdGhpcy5uYW5vc2Vjb25kcyArIFwiKVwiO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhIEpTT04tc2VyaWFsaXphYmxlIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgYFRpbWVzdGFtcGAuICovICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHNlY29uZHM6IHRoaXMuc2Vjb25kcyxcbiAgICAgICAgICAgIG5hbm9zZWNvbmRzOiB0aGlzLm5hbm9zZWNvbmRzXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIHRoaXMgb2JqZWN0IHRvIGEgcHJpbWl0aXZlIHN0cmluZywgd2hpY2ggYWxsb3dzIGBUaW1lc3RhbXBgIG9iamVjdHNcbiAgICAgKiB0byBiZSBjb21wYXJlZCB1c2luZyB0aGUgYD5gLCBgPD1gLCBgPj1gIGFuZCBgPmAgb3BlcmF0b3JzLlxuICAgICAqLyAgICB2YWx1ZU9mKCkge1xuICAgICAgICAvLyBUaGlzIG1ldGhvZCByZXR1cm5zIGEgc3RyaW5nIG9mIHRoZSBmb3JtIDxzZWNvbmRzPi48bmFub3NlY29uZHM+IHdoZXJlXG4gICAgICAgIC8vIDxzZWNvbmRzPiBpcyB0cmFuc2xhdGVkIHRvIGhhdmUgYSBub24tbmVnYXRpdmUgdmFsdWUgYW5kIGJvdGggPHNlY29uZHM+XG4gICAgICAgIC8vIGFuZCA8bmFub3NlY29uZHM+IGFyZSBsZWZ0LXBhZGRlZCB3aXRoIHplcm9lcyB0byBiZSBhIGNvbnNpc3RlbnQgbGVuZ3RoLlxuICAgICAgICAvLyBTdHJpbmdzIHdpdGggdGhpcyBmb3JtYXQgdGhlbiBoYXZlIGEgbGV4aW9ncmFwaGljYWwgb3JkZXJpbmcgdGhhdCBtYXRjaGVzXG4gICAgICAgIC8vIHRoZSBleHBlY3RlZCBvcmRlcmluZy4gVGhlIDxzZWNvbmRzPiB0cmFuc2xhdGlvbiBpcyBkb25lIHRvIGF2b2lkIGhhdmluZ1xuICAgICAgICAvLyBhIGxlYWRpbmcgbmVnYXRpdmUgc2lnbiAoaS5lLiBhIGxlYWRpbmcgJy0nIGNoYXJhY3RlcikgaW4gaXRzIHN0cmluZ1xuICAgICAgICAvLyByZXByZXNlbnRhdGlvbiwgd2hpY2ggd291bGQgYWZmZWN0IGl0cyBsZXhpb2dyYXBoaWNhbCBvcmRlcmluZy5cbiAgICAgICAgY29uc3QgZSA9IHRoaXMuc2Vjb25kcyAtIC02MjEzNTU5NjgwMDtcbiAgICAgICAgLy8gTm90ZTogVXAgdG8gMTIgZGVjaW1hbCBkaWdpdHMgYXJlIHJlcXVpcmVkIHRvIHJlcHJlc2VudCBhbGwgdmFsaWRcbiAgICAgICAgLy8gJ3NlY29uZHMnIHZhbHVlcy5cbiAgICAgICAgICAgICAgICByZXR1cm4gU3RyaW5nKGUpLnBhZFN0YXJ0KDEyLCBcIjBcIikgKyBcIi5cIiArIFN0cmluZyh0aGlzLm5hbm9zZWNvbmRzKS5wYWRTdGFydCg5LCBcIjBcIik7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIHZlcnNpb24gb2YgYSBkb2N1bWVudCBpbiBGaXJlc3RvcmUuIFRoaXMgY29ycmVzcG9uZHMgdG8gdGhlIHZlcnNpb25cbiAqIHRpbWVzdGFtcCwgc3VjaCBhcyB1cGRhdGVfdGltZSBvciByZWFkX3RpbWUuXG4gKi8gY2xhc3MgU25hcHNob3RWZXJzaW9uIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMudGltZXN0YW1wID0gZTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21UaW1lc3RhbXAoZSkge1xuICAgICAgICByZXR1cm4gbmV3IFNuYXBzaG90VmVyc2lvbihlKTtcbiAgICB9XG4gICAgc3RhdGljIG1pbigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTbmFwc2hvdFZlcnNpb24obmV3IFRpbWVzdGFtcCgwLCAwKSk7XG4gICAgfVxuICAgIHN0YXRpYyBtYXgoKSB7XG4gICAgICAgIHJldHVybiBuZXcgU25hcHNob3RWZXJzaW9uKG5ldyBUaW1lc3RhbXAoMjUzNDAyMzAwNzk5LCA5OTk5OTk5OTkpKTtcbiAgICB9XG4gICAgY29tcGFyZVRvKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGltZXN0YW1wLl9jb21wYXJlVG8oZS50aW1lc3RhbXApO1xuICAgIH1cbiAgICBpc0VxdWFsKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGltZXN0YW1wLmlzRXF1YWwoZS50aW1lc3RhbXApO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhIG51bWJlciByZXByZXNlbnRhdGlvbiBvZiB0aGUgdmVyc2lvbiBmb3IgdXNlIGluIHNwZWMgdGVzdHMuICovICAgIHRvTWljcm9zZWNvbmRzKCkge1xuICAgICAgICAvLyBDb252ZXJ0IHRvIG1pY3Jvc2Vjb25kcy5cbiAgICAgICAgcmV0dXJuIDFlNiAqIHRoaXMudGltZXN0YW1wLnNlY29uZHMgKyB0aGlzLnRpbWVzdGFtcC5uYW5vc2Vjb25kcyAvIDFlMztcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBcIlNuYXBzaG90VmVyc2lvbihcIiArIHRoaXMudGltZXN0YW1wLnRvU3RyaW5nKCkgKyBcIilcIjtcbiAgICB9XG4gICAgdG9UaW1lc3RhbXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpbWVzdGFtcDtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFBhdGggcmVwcmVzZW50cyBhbiBvcmRlcmVkIHNlcXVlbmNlIG9mIHN0cmluZyBzZWdtZW50cy5cbiAqL1xuY2xhc3MgQmFzZVBhdGgge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4pIHtcbiAgICAgICAgdm9pZCAwID09PSB0ID8gdCA9IDAgOiB0ID4gZS5sZW5ndGggJiYgZmFpbCgpLCB2b2lkIDAgPT09IG4gPyBuID0gZS5sZW5ndGggLSB0IDogbiA+IGUubGVuZ3RoIC0gdCAmJiBmYWlsKCksIFxuICAgICAgICB0aGlzLnNlZ21lbnRzID0gZSwgdGhpcy5vZmZzZXQgPSB0LCB0aGlzLmxlbiA9IG47XG4gICAgfVxuICAgIGdldCBsZW5ndGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxlbjtcbiAgICB9XG4gICAgaXNFcXVhbChlKSB7XG4gICAgICAgIHJldHVybiAwID09PSBCYXNlUGF0aC5jb21wYXJhdG9yKHRoaXMsIGUpO1xuICAgIH1cbiAgICBjaGlsZChlKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLnNlZ21lbnRzLnNsaWNlKHRoaXMub2Zmc2V0LCB0aGlzLmxpbWl0KCkpO1xuICAgICAgICByZXR1cm4gZSBpbnN0YW5jZW9mIEJhc2VQYXRoID8gZS5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIHQucHVzaChlKTtcbiAgICAgICAgfSkpIDogdC5wdXNoKGUpLCB0aGlzLmNvbnN0cnVjdCh0KTtcbiAgICB9XG4gICAgLyoqIFRoZSBpbmRleCBvZiBvbmUgcGFzdCB0aGUgbGFzdCBzZWdtZW50IG9mIHRoZSBwYXRoLiAqLyAgICBsaW1pdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub2Zmc2V0ICsgdGhpcy5sZW5ndGg7XG4gICAgfVxuICAgIHBvcEZpcnN0KGUpIHtcbiAgICAgICAgcmV0dXJuIGUgPSB2b2lkIDAgPT09IGUgPyAxIDogZSwgdGhpcy5jb25zdHJ1Y3QodGhpcy5zZWdtZW50cywgdGhpcy5vZmZzZXQgKyBlLCB0aGlzLmxlbmd0aCAtIGUpO1xuICAgIH1cbiAgICBwb3BMYXN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3QodGhpcy5zZWdtZW50cywgdGhpcy5vZmZzZXQsIHRoaXMubGVuZ3RoIC0gMSk7XG4gICAgfVxuICAgIGZpcnN0U2VnbWVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VnbWVudHNbdGhpcy5vZmZzZXRdO1xuICAgIH1cbiAgICBsYXN0U2VnbWVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0KHRoaXMubGVuZ3RoIC0gMSk7XG4gICAgfVxuICAgIGdldChlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlZ21lbnRzW3RoaXMub2Zmc2V0ICsgZV07XG4gICAgfVxuICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiAwID09PSB0aGlzLmxlbmd0aDtcbiAgICB9XG4gICAgaXNQcmVmaXhPZihlKSB7XG4gICAgICAgIGlmIChlLmxlbmd0aCA8IHRoaXMubGVuZ3RoKSByZXR1cm4gITE7XG4gICAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgdGhpcy5sZW5ndGg7IHQrKykgaWYgKHRoaXMuZ2V0KHQpICE9PSBlLmdldCh0KSkgcmV0dXJuICExO1xuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxuICAgIGlzSW1tZWRpYXRlUGFyZW50T2YoZSkge1xuICAgICAgICBpZiAodGhpcy5sZW5ndGggKyAxICE9PSBlLmxlbmd0aCkgcmV0dXJuICExO1xuICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IHRoaXMubGVuZ3RoOyB0KyspIGlmICh0aGlzLmdldCh0KSAhPT0gZS5nZXQodCkpIHJldHVybiAhMTtcbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbiAgICBmb3JFYWNoKGUpIHtcbiAgICAgICAgZm9yIChsZXQgdCA9IHRoaXMub2Zmc2V0LCBuID0gdGhpcy5saW1pdCgpOyB0IDwgbjsgdCsrKSBlKHRoaXMuc2VnbWVudHNbdF0pO1xuICAgIH1cbiAgICB0b0FycmF5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZWdtZW50cy5zbGljZSh0aGlzLm9mZnNldCwgdGhpcy5saW1pdCgpKTtcbiAgICB9XG4gICAgc3RhdGljIGNvbXBhcmF0b3IoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gTWF0aC5taW4oZS5sZW5ndGgsIHQubGVuZ3RoKTtcbiAgICAgICAgZm9yIChsZXQgciA9IDA7IHIgPCBuOyByKyspIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBlLmdldChyKSwgaSA9IHQuZ2V0KHIpO1xuICAgICAgICAgICAgaWYgKG4gPCBpKSByZXR1cm4gLTE7XG4gICAgICAgICAgICBpZiAobiA+IGkpIHJldHVybiAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlLmxlbmd0aCA8IHQubGVuZ3RoID8gLTEgOiBlLmxlbmd0aCA+IHQubGVuZ3RoID8gMSA6IDA7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgc2xhc2gtc2VwYXJhdGVkIHBhdGggZm9yIG5hdmlnYXRpbmcgcmVzb3VyY2VzIChkb2N1bWVudHMgYW5kIGNvbGxlY3Rpb25zKVxuICogd2l0aGluIEZpcmVzdG9yZS5cbiAqXG4gKiBAaW50ZXJuYWxcbiAqLyBjbGFzcyBSZXNvdXJjZVBhdGggZXh0ZW5kcyBCYXNlUGF0aCB7XG4gICAgY29uc3RydWN0KGUsIHQsIG4pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZXNvdXJjZVBhdGgoZSwgdCwgbik7XG4gICAgfVxuICAgIGNhbm9uaWNhbFN0cmluZygpIHtcbiAgICAgICAgLy8gTk9URTogVGhlIGNsaWVudCBpcyBpZ25vcmFudCBvZiBhbnkgcGF0aCBzZWdtZW50cyBjb250YWluaW5nIGVzY2FwZVxuICAgICAgICAvLyBzZXF1ZW5jZXMgKGUuZy4gX19pZDEyM19fKSBhbmQganVzdCBwYXNzZXMgdGhlbSB0aHJvdWdoIHJhdyAodGhleSBleGlzdFxuICAgICAgICAvLyBmb3IgbGVnYWN5IHJlYXNvbnMgYW5kIHNob3VsZCBub3QgYmUgdXNlZCBmcmVxdWVudGx5KS5cbiAgICAgICAgcmV0dXJuIHRoaXMudG9BcnJheSgpLmpvaW4oXCIvXCIpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2Fub25pY2FsU3RyaW5nKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSByZXNvdXJjZSBwYXRoIGZyb20gdGhlIGdpdmVuIHNsYXNoLWRlbGltaXRlZCBzdHJpbmcuIElmIG11bHRpcGxlXG4gICAgICogYXJndW1lbnRzIGFyZSBwcm92aWRlZCwgYWxsIGNvbXBvbmVudHMgYXJlIGNvbWJpbmVkLiBMZWFkaW5nIGFuZCB0cmFpbGluZ1xuICAgICAqIHNsYXNoZXMgZnJvbSBhbGwgY29tcG9uZW50cyBhcmUgaWdub3JlZC5cbiAgICAgKi8gICAgc3RhdGljIGZyb21TdHJpbmcoLi4uZSkge1xuICAgICAgICAvLyBOT1RFOiBUaGUgY2xpZW50IGlzIGlnbm9yYW50IG9mIGFueSBwYXRoIHNlZ21lbnRzIGNvbnRhaW5pbmcgZXNjYXBlXG4gICAgICAgIC8vIHNlcXVlbmNlcyAoZS5nLiBfX2lkMTIzX18pIGFuZCBqdXN0IHBhc3NlcyB0aGVtIHRocm91Z2ggcmF3ICh0aGV5IGV4aXN0XG4gICAgICAgIC8vIGZvciBsZWdhY3kgcmVhc29ucyBhbmQgc2hvdWxkIG5vdCBiZSB1c2VkIGZyZXF1ZW50bHkpLlxuICAgICAgICBjb25zdCB0ID0gW107XG4gICAgICAgIGZvciAoY29uc3QgbiBvZiBlKSB7XG4gICAgICAgICAgICBpZiAobi5pbmRleE9mKFwiLy9cIikgPj0gMCkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgc2VnbWVudCAoJHtufSkuIFBhdGhzIG11c3Qgbm90IGNvbnRhaW4gLy8gaW4gdGhlbS5gKTtcbiAgICAgICAgICAgIC8vIFN0cmlwIGxlYWRpbmcgYW5kIHRyYWxpbmcgc2xhc2hlZC5cbiAgICAgICAgICAgICAgICAgICAgICAgIHQucHVzaCguLi5uLnNwbGl0KFwiL1wiKS5maWx0ZXIoKGUgPT4gZS5sZW5ndGggPiAwKSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgUmVzb3VyY2VQYXRoKHQpO1xuICAgIH1cbiAgICBzdGF0aWMgZW1wdHlQYXRoKCkge1xuICAgICAgICByZXR1cm4gbmV3IFJlc291cmNlUGF0aChbXSk7XG4gICAgfVxufVxuXG5jb25zdCBDID0gL15bX2EtekEtWl1bX2EtekEtWjAtOV0qJC87XG5cbi8qKlxuICogQSBkb3Qtc2VwYXJhdGVkIHBhdGggZm9yIG5hdmlnYXRpbmcgc3ViLW9iamVjdHMgd2l0aGluIGEgZG9jdW1lbnQuXG4gKiBAaW50ZXJuYWxcbiAqLyBjbGFzcyBGaWVsZFBhdGgkMSBleHRlbmRzIEJhc2VQYXRoIHtcbiAgICBjb25zdHJ1Y3QoZSwgdCwgbikge1xuICAgICAgICByZXR1cm4gbmV3IEZpZWxkUGF0aCQxKGUsIHQsIG4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIHN0cmluZyBjb3VsZCBiZSB1c2VkIGFzIGEgc2VnbWVudCBpbiBhIGZpZWxkIHBhdGhcbiAgICAgKiB3aXRob3V0IGVzY2FwaW5nLlxuICAgICAqLyAgICBzdGF0aWMgaXNWYWxpZElkZW50aWZpZXIoZSkge1xuICAgICAgICByZXR1cm4gQy50ZXN0KGUpO1xuICAgIH1cbiAgICBjYW5vbmljYWxTdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRvQXJyYXkoKS5tYXAoKGUgPT4gKGUgPSBlLnJlcGxhY2UoL1xcXFwvZywgXCJcXFxcXFxcXFwiKS5yZXBsYWNlKC9gL2csIFwiXFxcXGBcIiksIFxuICAgICAgICBGaWVsZFBhdGgkMS5pc1ZhbGlkSWRlbnRpZmllcihlKSB8fCAoZSA9IFwiYFwiICsgZSArIFwiYFwiKSwgZSkpKS5qb2luKFwiLlwiKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbm9uaWNhbFN0cmluZygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBmaWVsZCByZWZlcmVuY2VzIHRoZSBrZXkgb2YgYSBkb2N1bWVudC5cbiAgICAgKi8gICAgaXNLZXlGaWVsZCgpIHtcbiAgICAgICAgcmV0dXJuIDEgPT09IHRoaXMubGVuZ3RoICYmIFwiX19uYW1lX19cIiA9PT0gdGhpcy5nZXQoMCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBmaWVsZCBkZXNpZ25hdGluZyB0aGUga2V5IG9mIGEgZG9jdW1lbnQuXG4gICAgICovICAgIHN0YXRpYyBrZXlGaWVsZCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBGaWVsZFBhdGgkMShbIFwiX19uYW1lX19cIiBdKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGEgZmllbGQgc3RyaW5nIGZyb20gdGhlIGdpdmVuIHNlcnZlci1mb3JtYXR0ZWQgc3RyaW5nLlxuICAgICAqXG4gICAgICogLSBTcGxpdHRpbmcgdGhlIGVtcHR5IHN0cmluZyBpcyBub3QgYWxsb3dlZCAoZm9yIG5vdyBhdCBsZWFzdCkuXG4gICAgICogLSBFbXB0eSBzZWdtZW50cyB3aXRoaW4gdGhlIHN0cmluZyAoZS5nLiBpZiB0aGVyZSBhcmUgdHdvIGNvbnNlY3V0aXZlXG4gICAgICogICBzZXBhcmF0b3JzKSBhcmUgbm90IGFsbG93ZWQuXG4gICAgICpcbiAgICAgKiBUT0RPKGIvMzcyNDQxNTcpOiB3ZSBzaG91bGQgbWFrZSB0aGlzIG1vcmUgc3RyaWN0LiBSaWdodCBub3csIGl0IGFsbG93c1xuICAgICAqIG5vbi1pZGVudGlmaWVyIHBhdGggY29tcG9uZW50cywgZXZlbiBpZiB0aGV5IGFyZW4ndCBlc2NhcGVkLlxuICAgICAqLyAgICBzdGF0aWMgZnJvbVNlcnZlckZvcm1hdChlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgbGV0IG4gPSBcIlwiLCByID0gMDtcbiAgICAgICAgY29uc3QgX19QUklWQVRFX2FkZEN1cnJlbnRTZWdtZW50ID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKDAgPT09IG4ubGVuZ3RoKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBmaWVsZCBwYXRoICgke2V9KS4gUGF0aHMgbXVzdCBub3QgYmUgZW1wdHksIGJlZ2luIHdpdGggJy4nLCBlbmQgd2l0aCAnLicsIG9yIGNvbnRhaW4gJy4uJ2ApO1xuICAgICAgICAgICAgdC5wdXNoKG4pLCBuID0gXCJcIjtcbiAgICAgICAgfTtcbiAgICAgICAgbGV0IGkgPSAhMTtcbiAgICAgICAgZm9yICg7ciA8IGUubGVuZ3RoOyApIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBlW3JdO1xuICAgICAgICAgICAgaWYgKFwiXFxcXFwiID09PSB0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHIgKyAxID09PSBlLmxlbmd0aCkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgXCJQYXRoIGhhcyB0cmFpbGluZyBlc2NhcGUgY2hhcmFjdGVyOiBcIiArIGUpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBlW3IgKyAxXTtcbiAgICAgICAgICAgICAgICBpZiAoXCJcXFxcXCIgIT09IHQgJiYgXCIuXCIgIT09IHQgJiYgXCJgXCIgIT09IHQpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELklOVkFMSURfQVJHVU1FTlQsIFwiUGF0aCBoYXMgaW52YWxpZCBlc2NhcGUgc2VxdWVuY2U6IFwiICsgZSk7XG4gICAgICAgICAgICAgICAgbiArPSB0LCByICs9IDI7XG4gICAgICAgICAgICB9IGVsc2UgXCJgXCIgPT09IHQgPyAoaSA9ICFpLCByKyspIDogXCIuXCIgIT09IHQgfHwgaSA/IChuICs9IHQsIHIrKykgOiAoX19QUklWQVRFX2FkZEN1cnJlbnRTZWdtZW50KCksIFxuICAgICAgICAgICAgcisrKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoX19QUklWQVRFX2FkZEN1cnJlbnRTZWdtZW50KCksIGkpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELklOVkFMSURfQVJHVU1FTlQsIFwiVW50ZXJtaW5hdGVkIGAgaW4gcGF0aDogXCIgKyBlKTtcbiAgICAgICAgcmV0dXJuIG5ldyBGaWVsZFBhdGgkMSh0KTtcbiAgICB9XG4gICAgc3RhdGljIGVtcHR5UGF0aCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBGaWVsZFBhdGgkMShbXSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqLyBjbGFzcyBEb2N1bWVudEtleSB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLnBhdGggPSBlO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbVBhdGgoZSkge1xuICAgICAgICByZXR1cm4gbmV3IERvY3VtZW50S2V5KFJlc291cmNlUGF0aC5mcm9tU3RyaW5nKGUpKTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21OYW1lKGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudEtleShSZXNvdXJjZVBhdGguZnJvbVN0cmluZyhlKS5wb3BGaXJzdCg1KSk7XG4gICAgfVxuICAgIHN0YXRpYyBlbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudEtleShSZXNvdXJjZVBhdGguZW1wdHlQYXRoKCkpO1xuICAgIH1cbiAgICBnZXQgY29sbGVjdGlvbkdyb3VwKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXRoLnBvcExhc3QoKS5sYXN0U2VnbWVudCgpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB0cnVlIGlmIHRoZSBkb2N1bWVudCBpcyBpbiB0aGUgc3BlY2lmaWVkIGNvbGxlY3Rpb25JZC4gKi8gICAgaGFzQ29sbGVjdGlvbklkKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGF0aC5sZW5ndGggPj0gMiAmJiB0aGlzLnBhdGguZ2V0KHRoaXMucGF0aC5sZW5ndGggLSAyKSA9PT0gZTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgdGhlIGNvbGxlY3Rpb24gZ3JvdXAgKGkuZS4gdGhlIG5hbWUgb2YgdGhlIHBhcmVudCBjb2xsZWN0aW9uKSBmb3IgdGhpcyBrZXkuICovICAgIGdldENvbGxlY3Rpb25Hcm91cCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGF0aC5nZXQodGhpcy5wYXRoLmxlbmd0aCAtIDIpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB0aGUgZnVsbHkgcXVhbGlmaWVkIHBhdGggdG8gdGhlIHBhcmVudCBjb2xsZWN0aW9uLiAqLyAgICBnZXRDb2xsZWN0aW9uUGF0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGF0aC5wb3BMYXN0KCk7XG4gICAgfVxuICAgIGlzRXF1YWwoZSkge1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gZSAmJiAwID09PSBSZXNvdXJjZVBhdGguY29tcGFyYXRvcih0aGlzLnBhdGgsIGUucGF0aCk7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXRoLnRvU3RyaW5nKCk7XG4gICAgfVxuICAgIHN0YXRpYyBjb21wYXJhdG9yKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIFJlc291cmNlUGF0aC5jb21wYXJhdG9yKGUucGF0aCwgdC5wYXRoKTtcbiAgICB9XG4gICAgc3RhdGljIGlzRG9jdW1lbnRLZXkoZSkge1xuICAgICAgICByZXR1cm4gZS5sZW5ndGggJSAyID09IDA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW5kIHJldHVybnMgYSBuZXcgZG9jdW1lbnQga2V5IHdpdGggdGhlIGdpdmVuIHNlZ21lbnRzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHNlZ21lbnRzIC0gVGhlIHNlZ21lbnRzIG9mIHRoZSBwYXRoIHRvIHRoZSBkb2N1bWVudFxuICAgICAqIEByZXR1cm5zIEEgbmV3IGluc3RhbmNlIG9mIERvY3VtZW50S2V5XG4gICAgICovICAgIHN0YXRpYyBmcm9tU2VnbWVudHMoZSkge1xuICAgICAgICByZXR1cm4gbmV3IERvY3VtZW50S2V5KG5ldyBSZXNvdXJjZVBhdGgoZS5zbGljZSgpKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBUaGUgaW5pdGlhbCBtdXRhdGlvbiBiYXRjaCBpZCBmb3IgZWFjaCBpbmRleC4gR2V0cyB1cGRhdGVkIGR1cmluZyBpbmRleFxuICogYmFja2ZpbGwuXG4gKi9cbi8qKlxuICogQW4gaW5kZXggZGVmaW5pdGlvbiBmb3IgZmllbGQgaW5kZXhlcyBpbiBGaXJlc3RvcmUuXG4gKlxuICogRXZlcnkgaW5kZXggaXMgYXNzb2NpYXRlZCB3aXRoIGEgY29sbGVjdGlvbi4gVGhlIGRlZmluaXRpb24gY29udGFpbnMgYSBsaXN0XG4gKiBvZiBmaWVsZHMgYW5kIHRoZWlyIGluZGV4IGtpbmQgKHdoaWNoIGNhbiBiZSBgQVNDRU5ESU5HYCwgYERFU0NFTkRJTkdgIG9yXG4gKiBgQ09OVEFJTlNgIGZvciBBcnJheUNvbnRhaW5zL0FycmF5Q29udGFpbnNBbnkgcXVlcmllcykuXG4gKlxuICogVW5saWtlIHRoZSBiYWNrZW5kLCB0aGUgU0RLIGRvZXMgbm90IGRpZmZlcmVudGlhdGUgYmV0d2VlbiBjb2xsZWN0aW9uIG9yXG4gKiBjb2xsZWN0aW9uIGdyb3VwLXNjb3BlZCBpbmRpY2VzLiBFdmVyeSBpbmRleCBjYW4gYmUgdXNlZCBmb3IgYm90aCBzaW5nbGVcbiAqIGNvbGxlY3Rpb24gYW5kIGNvbGxlY3Rpb24gZ3JvdXAgcXVlcmllcy5cbiAqL1xuY2xhc3MgRmllbGRJbmRleCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIGluZGV4IElELiBSZXR1cm5zIC0xIGlmIHRoZSBpbmRleCBJRCBpcyBub3QgYXZhaWxhYmxlIChlLmcuIHRoZSBpbmRleFxuICAgICAqIGhhcyBub3QgeWV0IGJlZW4gcGVyc2lzdGVkKS5cbiAgICAgKi9cbiAgICBlLCBcbiAgICAvKiogVGhlIGNvbGxlY3Rpb24gSUQgdGhpcyBpbmRleCBhcHBsaWVzIHRvLiAqL1xuICAgIHQsIFxuICAgIC8qKiBUaGUgZmllbGQgc2VnbWVudHMgZm9yIHRoaXMgaW5kZXguICovXG4gICAgbiwgXG4gICAgLyoqIFNob3dzIGhvdyB1cC10by1kYXRlIHRoZSBpbmRleCBpcyBmb3IgdGhlIGN1cnJlbnQgdXNlci4gKi9cbiAgICByKSB7XG4gICAgICAgIHRoaXMuaW5kZXhJZCA9IGUsIHRoaXMuY29sbGVjdGlvbkdyb3VwID0gdCwgdGhpcy5maWVsZHMgPSBuLCB0aGlzLmluZGV4U3RhdGUgPSByO1xuICAgIH1cbn1cblxuLyoqIEFuIElEIGZvciBhbiBpbmRleCB0aGF0IGhhcyBub3QgeWV0IGJlZW4gYWRkZWQgdG8gcGVyc2lzdGVuY2UuICAqL1xuLyoqIFJldHVybnMgdGhlIEFycmF5Q29udGFpbnMvQXJyYXlDb250YWluc0FueSBzZWdtZW50IGZvciB0aGlzIGluZGV4LiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX2ZpZWxkSW5kZXhHZXRBcnJheVNlZ21lbnQoZSkge1xuICAgIHJldHVybiBlLmZpZWxkcy5maW5kKChlID0+IDIgLyogSW5kZXhLaW5kLkNPTlRBSU5TICovID09PSBlLmtpbmQpKTtcbn1cblxuLyoqIFJldHVybnMgYWxsIGRpcmVjdGlvbmFsIChhc2NlbmRpbmcvZGVzY2VuZGluZykgc2VnbWVudHMgZm9yIHRoaXMgaW5kZXguICovIGZ1bmN0aW9uIF9fUFJJVkFURV9maWVsZEluZGV4R2V0RGlyZWN0aW9uYWxTZWdtZW50cyhlKSB7XG4gICAgcmV0dXJuIGUuZmllbGRzLmZpbHRlcigoZSA9PiAyIC8qIEluZGV4S2luZC5DT05UQUlOUyAqLyAhPT0gZS5raW5kKSk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgb3JkZXIgb2YgdGhlIGRvY3VtZW50IGtleSBjb21wb25lbnQgZm9yIHRoZSBnaXZlbiBpbmRleC5cbiAqXG4gKiBQT1JUSU5HIE5PVEU6IFRoaXMgaXMgb25seSB1c2VkIGluIHRoZSBXZWIgSW5kZXhlZERiIGltcGxlbWVudGF0aW9uLlxuICovXG4vKipcbiAqIENvbXBhcmVzIGluZGV4ZXMgYnkgY29sbGVjdGlvbiBncm91cCBhbmQgc2VnbWVudHMuIElnbm9yZXMgdXBkYXRlIHRpbWUgYW5kXG4gKiBpbmRleCBJRC5cbiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX2ZpZWxkSW5kZXhTZW1hbnRpY0NvbXBhcmF0b3IoZSwgdCkge1xuICAgIGxldCBuID0gX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IoZS5jb2xsZWN0aW9uR3JvdXAsIHQuY29sbGVjdGlvbkdyb3VwKTtcbiAgICBpZiAoMCAhPT0gbikgcmV0dXJuIG47XG4gICAgZm9yIChsZXQgciA9IDA7IHIgPCBNYXRoLm1pbihlLmZpZWxkcy5sZW5ndGgsIHQuZmllbGRzLmxlbmd0aCk7ICsrcikgaWYgKG4gPSBfX1BSSVZBVEVfaW5kZXhTZWdtZW50Q29tcGFyYXRvcihlLmZpZWxkc1tyXSwgdC5maWVsZHNbcl0pLCBcbiAgICAwICE9PSBuKSByZXR1cm4gbjtcbiAgICByZXR1cm4gX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IoZS5maWVsZHMubGVuZ3RoLCB0LmZpZWxkcy5sZW5ndGgpO1xufVxuXG4vKiogUmV0dXJucyBhIGRlYnVnIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBmaWVsZCBpbmRleCAqLyBGaWVsZEluZGV4LlVOS05PV05fSUQgPSAtMTtcblxuLyoqIEFuIGluZGV4IGNvbXBvbmVudCBjb25zaXN0aW5nIG9mIGZpZWxkIHBhdGggYW5kIGluZGV4IHR5cGUuICAqL1xuY2xhc3MgSW5kZXhTZWdtZW50IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKiogVGhlIGZpZWxkIHBhdGggb2YgdGhlIGNvbXBvbmVudC4gKi9cbiAgICBlLCBcbiAgICAvKiogVGhlIGZpZWxkcyBzb3J0aW5nIG9yZGVyLiAqL1xuICAgIHQpIHtcbiAgICAgICAgdGhpcy5maWVsZFBhdGggPSBlLCB0aGlzLmtpbmQgPSB0O1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2luZGV4U2VnbWVudENvbXBhcmF0b3IoZSwgdCkge1xuICAgIGNvbnN0IG4gPSBGaWVsZFBhdGgkMS5jb21wYXJhdG9yKGUuZmllbGRQYXRoLCB0LmZpZWxkUGF0aCk7XG4gICAgcmV0dXJuIDAgIT09IG4gPyBuIDogX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IoZS5raW5kLCB0LmtpbmQpO1xufVxuXG4vKipcbiAqIFN0b3JlcyB0aGUgXCJoaWdoIHdhdGVyIG1hcmtcIiB0aGF0IGluZGljYXRlcyBob3cgdXBkYXRlZCB0aGUgSW5kZXggaXMgZm9yIHRoZVxuICogY3VycmVudCB1c2VyLlxuICovIGNsYXNzIEluZGV4U3RhdGUge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyB3aGVuIHRoZSBpbmRleCB3YXMgbGFzdCB1cGRhdGVkIChyZWxhdGl2ZSB0byBvdGhlciBpbmRleGVzKS5cbiAgICAgKi9cbiAgICBlLCBcbiAgICAvKiogVGhlIHRoZSBsYXRlc3QgaW5kZXhlZCByZWFkIHRpbWUsIGRvY3VtZW50IGFuZCBiYXRjaCBpZC4gKi9cbiAgICB0KSB7XG4gICAgICAgIHRoaXMuc2VxdWVuY2VOdW1iZXIgPSBlLCB0aGlzLm9mZnNldCA9IHQ7XG4gICAgfVxuICAgIC8qKiBUaGUgc3RhdGUgb2YgYW4gaW5kZXggdGhhdCBoYXMgbm90IHlldCBiZWVuIGJhY2tmaWxsZWQuICovICAgIHN0YXRpYyBlbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBJbmRleFN0YXRlKDAsIEluZGV4T2Zmc2V0Lm1pbigpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBvZmZzZXQgdGhhdCBtYXRjaGVzIGFsbCBkb2N1bWVudHMgd2l0aCBhIHJlYWQgdGltZSBoaWdoZXIgdGhhblxuICogYHJlYWRUaW1lYC5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfbmV3SW5kZXhPZmZzZXRTdWNjZXNzb3JGcm9tUmVhZFRpbWUoZSwgdCkge1xuICAgIC8vIFdlIHdhbnQgdG8gY3JlYXRlIGFuIG9mZnNldCB0aGF0IG1hdGNoZXMgYWxsIGRvY3VtZW50cyB3aXRoIGEgcmVhZCB0aW1lXG4gICAgLy8gZ3JlYXRlciB0aGFuIHRoZSBwcm92aWRlZCByZWFkIHRpbWUuIFRvIGRvIHNvLCB3ZSB0ZWNobmljYWxseSBuZWVkIHRvXG4gICAgLy8gY3JlYXRlIGFuIG9mZnNldCBmb3IgYChyZWFkVGltZSwgTUFYX0RPQ1VNRU5UX0tFWSlgLiBXaGlsZSB3ZSBjb3VsZCB1c2VcbiAgICAvLyBVbmljb2RlIGNvZGVwb2ludHMgdG8gZ2VuZXJhdGUgTUFYX0RPQ1VNRU5UX0tFWSwgaXQgaXMgbXVjaCBlYXNpZXIgdG8gdXNlXG4gICAgLy8gYChyZWFkVGltZSArIDEsIERvY3VtZW50S2V5LmVtcHR5KCkpYCBzaW5jZSBgPiBEb2N1bWVudEtleS5lbXB0eSgpYCBtYXRjaGVzXG4gICAgLy8gYWxsIHZhbGlkIGRvY3VtZW50IElEcy5cbiAgICBjb25zdCBuID0gZS50b1RpbWVzdGFtcCgpLnNlY29uZHMsIHIgPSBlLnRvVGltZXN0YW1wKCkubmFub3NlY29uZHMgKyAxLCBpID0gU25hcHNob3RWZXJzaW9uLmZyb21UaW1lc3RhbXAoMWU5ID09PSByID8gbmV3IFRpbWVzdGFtcChuICsgMSwgMCkgOiBuZXcgVGltZXN0YW1wKG4sIHIpKTtcbiAgICByZXR1cm4gbmV3IEluZGV4T2Zmc2V0KGksIERvY3VtZW50S2V5LmVtcHR5KCksIHQpO1xufVxuXG4vKiogQ3JlYXRlcyBhIG5ldyBvZmZzZXQgYmFzZWQgb24gdGhlIHByb3ZpZGVkIGRvY3VtZW50LiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfbmV3SW5kZXhPZmZzZXRGcm9tRG9jdW1lbnQoZSkge1xuICAgIHJldHVybiBuZXcgSW5kZXhPZmZzZXQoZS5yZWFkVGltZSwgZS5rZXksIC0xKTtcbn1cblxuLyoqXG4gKiBTdG9yZXMgdGhlIGxhdGVzdCByZWFkIHRpbWUsIGRvY3VtZW50IGFuZCBiYXRjaCBJRCB0aGF0IHdlcmUgcHJvY2Vzc2VkIGZvciBhblxuICogaW5kZXguXG4gKi8gY2xhc3MgSW5kZXhPZmZzZXQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBsYXRlc3QgcmVhZCB0aW1lIHZlcnNpb24gdGhhdCBoYXMgYmVlbiBpbmRleGVkIGJ5IEZpcmVzdG9yZSBmb3IgdGhpc1xuICAgICAqIGZpZWxkIGluZGV4LlxuICAgICAqL1xuICAgIGUsIFxuICAgIC8qKlxuICAgICAqIFRoZSBrZXkgb2YgdGhlIGxhc3QgZG9jdW1lbnQgdGhhdCB3YXMgaW5kZXhlZCBmb3IgdGhpcyBxdWVyeS4gVXNlXG4gICAgICogYERvY3VtZW50S2V5LmVtcHR5KClgIGlmIG5vIGRvY3VtZW50IGhhcyBiZWVuIGluZGV4ZWQuXG4gICAgICovXG4gICAgdCwgXG4gICAgLypcbiAgICAgKiBUaGUgbGFyZ2VzdCBtdXRhdGlvbiBiYXRjaCBpZCB0aGF0J3MgYmVlbiBwcm9jZXNzZWQgYnkgRmlyZXN0b3JlLlxuICAgICAqL1xuICAgIG4pIHtcbiAgICAgICAgdGhpcy5yZWFkVGltZSA9IGUsIHRoaXMuZG9jdW1lbnRLZXkgPSB0LCB0aGlzLmxhcmdlc3RCYXRjaElkID0gbjtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYW4gb2Zmc2V0IHRoYXQgc29ydHMgYmVmb3JlIGFsbCByZWd1bGFyIG9mZnNldHMuICovICAgIHN0YXRpYyBtaW4oKSB7XG4gICAgICAgIHJldHVybiBuZXcgSW5kZXhPZmZzZXQoU25hcHNob3RWZXJzaW9uLm1pbigpLCBEb2N1bWVudEtleS5lbXB0eSgpLCAtMSk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGFuIG9mZnNldCB0aGF0IHNvcnRzIGFmdGVyIGFsbCByZWd1bGFyIG9mZnNldHMuICovICAgIHN0YXRpYyBtYXgoKSB7XG4gICAgICAgIHJldHVybiBuZXcgSW5kZXhPZmZzZXQoU25hcHNob3RWZXJzaW9uLm1heCgpLCBEb2N1bWVudEtleS5lbXB0eSgpLCAtMSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfaW5kZXhPZmZzZXRDb21wYXJhdG9yKGUsIHQpIHtcbiAgICBsZXQgbiA9IGUucmVhZFRpbWUuY29tcGFyZVRvKHQucmVhZFRpbWUpO1xuICAgIHJldHVybiAwICE9PSBuID8gbiA6IChuID0gRG9jdW1lbnRLZXkuY29tcGFyYXRvcihlLmRvY3VtZW50S2V5LCB0LmRvY3VtZW50S2V5KSwgXG4gICAgMCAhPT0gbiA/IG4gOiBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcihlLmxhcmdlc3RCYXRjaElkLCB0Lmxhcmdlc3RCYXRjaElkKSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNvbnN0IHYgPSBcIlRoZSBjdXJyZW50IHRhYiBpcyBub3QgaW4gdGhlIHJlcXVpcmVkIHN0YXRlIHRvIHBlcmZvcm0gdGhpcyBvcGVyYXRpb24uIEl0IG1pZ2h0IGJlIG5lY2Vzc2FyeSB0byByZWZyZXNoIHRoZSBicm93c2VyIHRhYi5cIjtcblxuLyoqXG4gKiBBIGJhc2UgY2xhc3MgcmVwcmVzZW50aW5nIGEgcGVyc2lzdGVuY2UgdHJhbnNhY3Rpb24sIGVuY2Fwc3VsYXRpbmcgYm90aCB0aGVcbiAqIHRyYW5zYWN0aW9uJ3Mgc2VxdWVuY2UgbnVtYmVycyBhcyB3ZWxsIGFzIGEgbGlzdCBvZiBvbkNvbW1pdHRlZCBsaXN0ZW5lcnMuXG4gKlxuICogV2hlbiB5b3UgY2FsbCBQZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbigpLCBpdCB3aWxsIGNyZWF0ZSBhIHRyYW5zYWN0aW9uIGFuZFxuICogcGFzcyBpdCB0byB5b3VyIGNhbGxiYWNrLiBZb3UgdGhlbiBwYXNzIGl0IHRvIGFueSBtZXRob2QgdGhhdCBvcGVyYXRlc1xuICogb24gcGVyc2lzdGVuY2UuXG4gKi8gY2xhc3MgUGVyc2lzdGVuY2VUcmFuc2FjdGlvbiB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMub25Db21taXR0ZWRMaXN0ZW5lcnMgPSBbXTtcbiAgICB9XG4gICAgYWRkT25Db21taXR0ZWRMaXN0ZW5lcihlKSB7XG4gICAgICAgIHRoaXMub25Db21taXR0ZWRMaXN0ZW5lcnMucHVzaChlKTtcbiAgICB9XG4gICAgcmFpc2VPbkNvbW1pdHRlZEV2ZW50KCkge1xuICAgICAgICB0aGlzLm9uQ29tbWl0dGVkTGlzdGVuZXJzLmZvckVhY2goKGUgPT4gZSgpKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBWZXJpZmllcyB0aGUgZXJyb3IgdGhyb3duIGJ5IGEgTG9jYWxTdG9yZSBvcGVyYXRpb24uIElmIGEgTG9jYWxTdG9yZVxuICogb3BlcmF0aW9uIGZhaWxzIGJlY2F1c2UgdGhlIHByaW1hcnkgbGVhc2UgaGFzIGJlZW4gdGFrZW4gYnkgYW5vdGhlciBjbGllbnQsXG4gKiB3ZSBpZ25vcmUgdGhlIGVycm9yICh0aGUgcGVyc2lzdGVuY2UgbGF5ZXIgd2lsbCBpbW1lZGlhdGVseSBjYWxsXG4gKiBgYXBwbHlQcmltYXJ5TGVhc2VgIHRvIHByb3BhZ2F0ZSB0aGUgcHJpbWFyeSBzdGF0ZSBjaGFuZ2UpLiBBbGwgb3RoZXIgZXJyb3JzXG4gKiBhcmUgcmUtdGhyb3duLlxuICpcbiAqIEBwYXJhbSBlcnIgLSBBbiBlcnJvciByZXR1cm5lZCBieSBhIExvY2FsU3RvcmUgb3BlcmF0aW9uLlxuICogQHJldHVybnMgQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgYWZ0ZXIgd2UgcmVjb3ZlcmVkLCBvciB0aGUgb3JpZ2luYWwgZXJyb3IuXG4gKi8gYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX2lnbm9yZUlmUHJpbWFyeUxlYXNlTG9zcyhlKSB7XG4gICAgaWYgKGUuY29kZSAhPT0gRC5GQUlMRURfUFJFQ09ORElUSU9OIHx8IGUubWVzc2FnZSAhPT0gdikgdGhyb3cgZTtcbiAgICBfX1BSSVZBVEVfbG9nRGVidWcoXCJMb2NhbFN0b3JlXCIsIFwiVW5leHBlY3RlZGx5IGxvc3QgcHJpbWFyeSBsZWFzZVwiKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUGVyc2lzdGVuY2VQcm9taXNlIGlzIGVzc2VudGlhbGx5IGEgcmUtaW1wbGVtZW50YXRpb24gb2YgUHJvbWlzZSBleGNlcHRcbiAqIGl0IGhhcyBhIC5uZXh0KCkgbWV0aG9kIGluc3RlYWQgb2YgLnRoZW4oKSBhbmQgLm5leHQoKSBhbmQgLmNhdGNoKCkgY2FsbGJhY2tzXG4gKiBhcmUgZXhlY3V0ZWQgc3luY2hyb25vdXNseSB3aGVuIGEgUGVyc2lzdGVuY2VQcm9taXNlIHJlc29sdmVzIHJhdGhlciB0aGFuXG4gKiBhc3luY2hyb25vdXNseSAoUHJvbWlzZSBpbXBsZW1lbnRhdGlvbnMgdXNlIHNldEltbWVkaWF0ZSgpIG9yIHNpbWlsYXIpLlxuICpcbiAqIFRoaXMgaXMgbmVjZXNzYXJ5IHRvIGludGVyb3BlcmF0ZSB3aXRoIEluZGV4ZWREQiB3aGljaCB3aWxsIGF1dG9tYXRpY2FsbHlcbiAqIGNvbW1pdCB0cmFuc2FjdGlvbnMgaWYgY29udHJvbCBpcyByZXR1cm5lZCB0byB0aGUgZXZlbnQgbG9vcCB3aXRob3V0XG4gKiBzeW5jaHJvbm91c2x5IGluaXRpYXRpbmcgYW5vdGhlciBvcGVyYXRpb24gb24gdGhlIHRyYW5zYWN0aW9uLlxuICpcbiAqIE5PVEU6IC50aGVuKCkgYW5kIC5jYXRjaCgpIG9ubHkgYWxsb3cgYSBzaW5nbGUgY29uc3VtZXIsIHVubGlrZSBub3JtYWxcbiAqIFByb21pc2VzLlxuICovIGNsYXNzIFBlcnNpc3RlbmNlUHJvbWlzZSB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICAvLyBOT1RFOiBuZXh0L2NhdGNoQ2FsbGJhY2sgd2lsbCBhbHdheXMgcG9pbnQgdG8gb3VyIG93biB3cmFwcGVyIGZ1bmN0aW9ucyxcbiAgICAgICAgLy8gbm90IHRoZSB1c2VyJ3MgcmF3IG5leHQoKSBvciBjYXRjaCgpIGNhbGxiYWNrcy5cbiAgICAgICAgdGhpcy5uZXh0Q2FsbGJhY2sgPSBudWxsLCB0aGlzLmNhdGNoQ2FsbGJhY2sgPSBudWxsLCBcbiAgICAgICAgLy8gV2hlbiB0aGUgb3BlcmF0aW9uIHJlc29sdmVzLCB3ZSdsbCBzZXQgcmVzdWx0IG9yIGVycm9yIGFuZCBtYXJrIGlzRG9uZS5cbiAgICAgICAgdGhpcy5yZXN1bHQgPSB2b2lkIDAsIHRoaXMuZXJyb3IgPSB2b2lkIDAsIHRoaXMuaXNEb25lID0gITEsIFxuICAgICAgICAvLyBTZXQgdG8gdHJ1ZSB3aGVuIC50aGVuKCkgb3IgLmNhdGNoKCkgYXJlIGNhbGxlZCBhbmQgcHJldmVudHMgYWRkaXRpb25hbFxuICAgICAgICAvLyBjaGFpbmluZy5cbiAgICAgICAgdGhpcy5jYWxsYmFja0F0dGFjaGVkID0gITEsIGUoKGUgPT4ge1xuICAgICAgICAgICAgdGhpcy5pc0RvbmUgPSAhMCwgdGhpcy5yZXN1bHQgPSBlLCB0aGlzLm5leHRDYWxsYmFjayAmJiBcbiAgICAgICAgICAgIC8vIHZhbHVlIHNob3VsZCBiZSBkZWZpbmVkIHVubGVzcyBUIGlzIFZvaWQsIGJ1dCB3ZSBjYW4ndCBleHByZXNzXG4gICAgICAgICAgICAvLyB0aGF0IGluIHRoZSB0eXBlIHN5c3RlbS5cbiAgICAgICAgICAgIHRoaXMubmV4dENhbGxiYWNrKGUpO1xuICAgICAgICB9KSwgKGUgPT4ge1xuICAgICAgICAgICAgdGhpcy5pc0RvbmUgPSAhMCwgdGhpcy5lcnJvciA9IGUsIHRoaXMuY2F0Y2hDYWxsYmFjayAmJiB0aGlzLmNhdGNoQ2FsbGJhY2soZSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgY2F0Y2goZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5uZXh0KHZvaWQgMCwgZSk7XG4gICAgfVxuICAgIG5leHQoZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jYWxsYmFja0F0dGFjaGVkICYmIGZhaWwoKSwgdGhpcy5jYWxsYmFja0F0dGFjaGVkID0gITAsIHRoaXMuaXNEb25lID8gdGhpcy5lcnJvciA/IHRoaXMud3JhcEZhaWx1cmUodCwgdGhpcy5lcnJvcikgOiB0aGlzLndyYXBTdWNjZXNzKGUsIHRoaXMucmVzdWx0KSA6IG5ldyBQZXJzaXN0ZW5jZVByb21pc2UoKChuLCByKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm5leHRDYWxsYmFjayA9IHQgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMud3JhcFN1Y2Nlc3MoZSwgdCkubmV4dChuLCByKTtcbiAgICAgICAgICAgIH0sIHRoaXMuY2F0Y2hDYWxsYmFjayA9IGUgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMud3JhcEZhaWx1cmUodCwgZSkubmV4dChuLCByKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgdG9Qcm9taXNlKCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKChlLCB0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLm5leHQoZSwgdCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgd3JhcFVzZXJGdW5jdGlvbihlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gZSgpO1xuICAgICAgICAgICAgcmV0dXJuIHQgaW5zdGFuY2VvZiBQZXJzaXN0ZW5jZVByb21pc2UgPyB0IDogUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVqZWN0KGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHdyYXBTdWNjZXNzKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIGUgPyB0aGlzLndyYXBVc2VyRnVuY3Rpb24oKCgpID0+IGUodCkpKSA6IFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHQpO1xuICAgIH1cbiAgICB3cmFwRmFpbHVyZShlLCB0KSB7XG4gICAgICAgIHJldHVybiBlID8gdGhpcy53cmFwVXNlckZ1bmN0aW9uKCgoKSA9PiBlKHQpKSkgOiBQZXJzaXN0ZW5jZVByb21pc2UucmVqZWN0KHQpO1xuICAgIH1cbiAgICBzdGF0aWMgcmVzb2x2ZShlKSB7XG4gICAgICAgIHJldHVybiBuZXcgUGVyc2lzdGVuY2VQcm9taXNlKCgodCwgbikgPT4ge1xuICAgICAgICAgICAgdChlKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBzdGF0aWMgcmVqZWN0KGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQZXJzaXN0ZW5jZVByb21pc2UoKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICBuKGUpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHN0YXRpYyB3YWl0Rm9yKFxuICAgIC8vIEFjY2VwdCBhbGwgUHJvbWlzZSB0eXBlcyBpbiB3YWl0Rm9yKCkuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBlKSB7XG4gICAgICAgIHJldHVybiBuZXcgUGVyc2lzdGVuY2VQcm9taXNlKCgodCwgbikgPT4ge1xuICAgICAgICAgICAgbGV0IHIgPSAwLCBpID0gMCwgcyA9ICExO1xuICAgICAgICAgICAgZS5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgICAgICArK3IsIGUubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICArK2ksIHMgJiYgaSA9PT0gciAmJiB0KCk7XG4gICAgICAgICAgICAgICAgfSksIChlID0+IG4oZSkpKTtcbiAgICAgICAgICAgIH0pKSwgcyA9ICEwLCBpID09PSByICYmIHQoKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHaXZlbiBhbiBhcnJheSBvZiBwcmVkaWNhdGUgZnVuY3Rpb25zIHRoYXQgYXN5bmNocm9ub3VzbHkgZXZhbHVhdGUgdG8gYVxuICAgICAqIGJvb2xlYW4sIGltcGxlbWVudHMgYSBzaG9ydC1jaXJjdWl0aW5nIGBvcmAgYmV0d2VlbiB0aGUgcmVzdWx0cy4gUHJlZGljYXRlc1xuICAgICAqIHdpbGwgYmUgZXZhbHVhdGVkIHVudGlsIG9uZSBvZiB0aGVtIHJldHVybnMgYHRydWVgLCB0aGVuIHN0b3AuIFRoZSBmaW5hbFxuICAgICAqIHJlc3VsdCB3aWxsIGJlIHdoZXRoZXIgYW55IG9mIHRoZW0gcmV0dXJuZWQgYHRydWVgLlxuICAgICAqLyAgICBzdGF0aWMgb3IoZSkge1xuICAgICAgICBsZXQgdCA9IFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCExKTtcbiAgICAgICAgZm9yIChjb25zdCBuIG9mIGUpIHQgPSB0Lm5leHQoKGUgPT4gZSA/IFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKGUpIDogbigpKSk7XG4gICAgICAgIHJldHVybiB0O1xuICAgIH1cbiAgICBzdGF0aWMgZm9yRWFjaChlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBbXTtcbiAgICAgICAgcmV0dXJuIGUuZm9yRWFjaCgoKGUsIHIpID0+IHtcbiAgICAgICAgICAgIG4ucHVzaCh0LmNhbGwodGhpcywgZSwgcikpO1xuICAgICAgICB9KSksIHRoaXMud2FpdEZvcihuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29uY3VycmVudGx5IG1hcCBhbGwgYXJyYXkgZWxlbWVudHMgdGhyb3VnaCBhc3luY2hyb25vdXMgZnVuY3Rpb24uXG4gICAgICovICAgIHN0YXRpYyBtYXBBcnJheShlLCB0KSB7XG4gICAgICAgIHJldHVybiBuZXcgUGVyc2lzdGVuY2VQcm9taXNlKCgobiwgcikgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IGUubGVuZ3RoLCBzID0gbmV3IEFycmF5KGkpO1xuICAgICAgICAgICAgbGV0IG8gPSAwO1xuICAgICAgICAgICAgZm9yIChsZXQgXyA9IDA7IF8gPCBpOyBfKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhID0gXztcbiAgICAgICAgICAgICAgICB0KGVbYV0pLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzW2FdID0gZSwgKytvLCBvID09PSBpICYmIG4ocyk7XG4gICAgICAgICAgICAgICAgfSksIChlID0+IHIoZSkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBbiBhbHRlcm5hdGl2ZSB0byByZWN1cnNpdmUgUGVyc2lzdGVuY2VQcm9taXNlIGNhbGxzLCB0aGF0IGF2b2lkc1xuICAgICAqIHBvdGVudGlhbCBtZW1vcnkgcHJvYmxlbXMgZnJvbSB1bmJvdW5kZWQgY2hhaW5zIG9mIHByb21pc2VzLlxuICAgICAqXG4gICAgICogVGhlIGBhY3Rpb25gIHdpbGwgYmUgY2FsbGVkIHJlcGVhdGVkbHkgd2hpbGUgYGNvbmRpdGlvbmAgaXMgdHJ1ZS5cbiAgICAgKi8gICAgc3RhdGljIGRvV2hpbGUoZSwgdCkge1xuICAgICAgICByZXR1cm4gbmV3IFBlcnNpc3RlbmNlUHJvbWlzZSgoKG4sIHIpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHByb2Nlc3MgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgITAgPT09IGUoKSA/IHQoKS5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3MoKTtcbiAgICAgICAgICAgICAgICB9KSwgcikgOiBuKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcHJvY2VzcygpO1xuICAgICAgICB9KSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLy8gUmVmZXJlbmNlcyB0byBgd2luZG93YCBhcmUgZ3VhcmRlZCBieSBTaW1wbGVEYi5pc0F2YWlsYWJsZSgpXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1yZXN0cmljdGVkLWdsb2JhbHMgKi9cbi8qKlxuICogV3JhcHMgYW4gSURCVHJhbnNhY3Rpb24gYW5kIGV4cG9zZXMgYSBzdG9yZSgpIG1ldGhvZCB0byBnZXQgYSBoYW5kbGUgdG8gYVxuICogc3BlY2lmaWMgb2JqZWN0IHN0b3JlLlxuICovXG5jbGFzcyBfX1BSSVZBVEVfU2ltcGxlRGJUcmFuc2FjdGlvbiB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICB0aGlzLmFjdGlvbiA9IGUsIHRoaXMudHJhbnNhY3Rpb24gPSB0LCB0aGlzLmFib3J0ZWQgPSAhMSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGBQcm9taXNlYCB0aGF0IHJlc29sdmVzIHdpdGggdGhlIHJlc3VsdCBvZiB0aGUgSW5kZXhlZERiIHRyYW5zYWN0aW9uLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5WID0gbmV3IF9fUFJJVkFURV9EZWZlcnJlZCwgdGhpcy50cmFuc2FjdGlvbi5vbmNvbXBsZXRlID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5WLnJlc29sdmUoKTtcbiAgICAgICAgfSwgdGhpcy50cmFuc2FjdGlvbi5vbmFib3J0ID0gKCkgPT4ge1xuICAgICAgICAgICAgdC5lcnJvciA/IHRoaXMuVi5yZWplY3QobmV3IF9fUFJJVkFURV9JbmRleGVkRGJUcmFuc2FjdGlvbkVycm9yKGUsIHQuZXJyb3IpKSA6IHRoaXMuVi5yZXNvbHZlKCk7XG4gICAgICAgIH0sIHRoaXMudHJhbnNhY3Rpb24ub25lcnJvciA9IHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9jaGVja0ZvckFuZFJlcG9ydGlPU0Vycm9yKHQudGFyZ2V0LmVycm9yKTtcbiAgICAgICAgICAgIHRoaXMuVi5yZWplY3QobmV3IF9fUFJJVkFURV9JbmRleGVkRGJUcmFuc2FjdGlvbkVycm9yKGUsIG4pKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgc3RhdGljIG9wZW4oZSwgdCwgbiwgcikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfU2ltcGxlRGJUcmFuc2FjdGlvbih0LCBlLnRyYW5zYWN0aW9uKHIsIG4pKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IF9fUFJJVkFURV9JbmRleGVkRGJUcmFuc2FjdGlvbkVycm9yKHQsIGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBtKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5WLnByb21pc2U7XG4gICAgfVxuICAgIGFib3J0KGUpIHtcbiAgICAgICAgZSAmJiB0aGlzLlYucmVqZWN0KGUpLCB0aGlzLmFib3J0ZWQgfHwgKF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlNpbXBsZURiXCIsIFwiQWJvcnRpbmcgdHJhbnNhY3Rpb246XCIsIGUgPyBlLm1lc3NhZ2UgOiBcIkNsaWVudC1pbml0aWF0ZWQgYWJvcnRcIiksIFxuICAgICAgICB0aGlzLmFib3J0ZWQgPSAhMCwgdGhpcy50cmFuc2FjdGlvbi5hYm9ydCgpKTtcbiAgICB9XG4gICAgZygpIHtcbiAgICAgICAgLy8gSWYgdGhlIGJyb3dzZXIgc3VwcG9ydHMgVjMgSW5kZXhlZERCLCB3ZSBpbnZva2UgY29tbWl0KCkgZXhwbGljaXRseSB0b1xuICAgICAgICAvLyBzcGVlZCB1cCBpbmRleCBEQiBwcm9jZXNzaW5nIGlmIHRoZSBldmVudCBsb29wIHJlbWFpbnMgYmxvY2tzLlxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBjb25zdCBlID0gdGhpcy50cmFuc2FjdGlvbjtcbiAgICAgICAgdGhpcy5hYm9ydGVkIHx8IFwiZnVuY3Rpb25cIiAhPSB0eXBlb2YgZS5jb21taXQgfHwgZS5jb21taXQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIFNpbXBsZURiU3RvcmU8S2V5VHlwZSwgVmFsdWVUeXBlPiBmb3IgdGhlIHNwZWNpZmllZCBzdG9yZS4gQWxsXG4gICAgICogb3BlcmF0aW9ucyBwZXJmb3JtZWQgb24gdGhlIFNpbXBsZURiU3RvcmUgaGFwcGVuIHdpdGhpbiB0aGUgY29udGV4dCBvZiB0aGlzXG4gICAgICogdHJhbnNhY3Rpb24gYW5kIGl0IGNhbm5vdCBiZSB1c2VkIGFueW1vcmUgb25jZSB0aGUgdHJhbnNhY3Rpb24gaXNcbiAgICAgKiBjb21wbGV0ZWQuXG4gICAgICpcbiAgICAgKiBOb3RlIHRoYXQgd2UgY2FuJ3QgYWN0dWFsbHkgZW5mb3JjZSB0aGF0IHRoZSBLZXlUeXBlIGFuZCBWYWx1ZVR5cGUgYXJlXG4gICAgICogY29ycmVjdCwgYnV0IHRoZXkgYWxsb3cgdHlwZSBzYWZldHkgdGhyb3VnaCB0aGUgcmVzdCBvZiB0aGUgY29uc3VtaW5nIGNvZGUuXG4gICAgICovICAgIHN0b3JlKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMudHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUoZSk7XG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX1NpbXBsZURiU3RvcmUodCk7XG4gICAgfVxufVxuXG4vKipcbiAqIFByb3ZpZGVzIGEgd3JhcHBlciBhcm91bmQgSW5kZXhlZERiIHdpdGggYSBzaW1wbGlmaWVkIGludGVyZmFjZSB0aGF0IHVzZXNcbiAqIFByb21pc2UtbGlrZSByZXR1cm4gdmFsdWVzIHRvIGNoYWluIG9wZXJhdGlvbnMuIFJlYWwgcHJvbWlzZXMgY2Fubm90IGJlIHVzZWRcbiAqIHNpbmNlIC50aGVuKCkgY29udGludWF0aW9ucyBhcmUgZXhlY3V0ZWQgYXN5bmNocm9ub3VzbHkgKGUuZy4gdmlhXG4gKiAuc2V0SW1tZWRpYXRlKSwgd2hpY2ggd291bGQgY2F1c2UgSW5kZXhlZERCIHRvIGVuZCB0aGUgdHJhbnNhY3Rpb24uXG4gKiBTZWUgUGVyc2lzdGVuY2VQcm9taXNlIGZvciBtb3JlIGRldGFpbHMuXG4gKi8gY2xhc3MgX19QUklWQVRFX1NpbXBsZURiIHtcbiAgICAvKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgU2ltcGxlRGIgd3JhcHBlciBmb3IgSW5kZXhlZERiIGRhdGFiYXNlIGBuYW1lYC5cbiAgICAgKlxuICAgICAqIE5vdGUgdGhhdCBgdmVyc2lvbmAgbXVzdCBub3QgYmUgYSBkb3duZ3JhZGUuIEluZGV4ZWREQiBkb2VzIG5vdCBzdXBwb3J0XG4gICAgICogZG93bmdyYWRpbmcgdGhlIHNjaGVtYSB2ZXJzaW9uLiBXZSBjdXJyZW50bHkgZG8gbm90IHN1cHBvcnQgYW55IHdheSB0byBkb1xuICAgICAqIHZlcnNpb25pbmcgb3V0c2lkZSBvZiBJbmRleGVkREIncyB2ZXJzaW9uaW5nIG1lY2hhbmlzbSwgYXMgb25seVxuICAgICAqIHZlcnNpb24tdXBncmFkZSB0cmFuc2FjdGlvbnMgYXJlIGFsbG93ZWQgdG8gZG8gdGhpbmdzIGxpa2UgY3JlYXRlXG4gICAgICogb2JqZWN0c3RvcmVzLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4pIHtcbiAgICAgICAgdGhpcy5uYW1lID0gZSwgdGhpcy52ZXJzaW9uID0gdCwgdGhpcy5wID0gbjtcbiAgICAgICAgLy8gTk9URTogQWNjb3JkaW5nIHRvIGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xOTcwNTAsIHRoZVxuICAgICAgICAvLyBidWcgd2UncmUgY2hlY2tpbmcgZm9yIHNob3VsZCBleGlzdCBpbiBpT1MgPj0gMTIuMiBhbmQgPCAxMywgYnV0IGZvclxuICAgICAgICAvLyB3aGF0ZXZlciByZWFzb24gaXQncyBtdWNoIGhhcmRlciB0byBoaXQgYWZ0ZXIgMTIuMiBzbyB3ZSBvbmx5IHByb2FjdGl2ZWx5XG4gICAgICAgIC8vIGxvZyBvbiAxMi4yLlxuICAgICAgICAxMi4yID09PSBfX1BSSVZBVEVfU2ltcGxlRGIuUyhnZXRVQSgpKSAmJiBfX1BSSVZBVEVfbG9nRXJyb3IoXCJGaXJlc3RvcmUgcGVyc2lzdGVuY2Ugc3VmZmVycyBmcm9tIGEgYnVnIGluIGlPUyAxMi4yIFNhZmFyaSB0aGF0IG1heSBjYXVzZSB5b3VyIGFwcCB0byBzdG9wIHdvcmtpbmcuIFNlZSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3EvNTY0OTYyOTYvMTEwOTE1IGZvciBkZXRhaWxzIGFuZCBhIHBvdGVudGlhbCB3b3JrYXJvdW5kLlwiKTtcbiAgICB9XG4gICAgLyoqIERlbGV0ZXMgdGhlIHNwZWNpZmllZCBkYXRhYmFzZS4gKi8gICAgc3RhdGljIGRlbGV0ZShlKSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfbG9nRGVidWcoXCJTaW1wbGVEYlwiLCBcIlJlbW92aW5nIGRhdGFiYXNlOlwiLCBlKSwgX19QUklWQVRFX3dyYXBSZXF1ZXN0KHdpbmRvdy5pbmRleGVkREIuZGVsZXRlRGF0YWJhc2UoZSkpLnRvUHJvbWlzZSgpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB0cnVlIGlmIEluZGV4ZWREQiBpcyBhdmFpbGFibGUgaW4gdGhlIGN1cnJlbnQgZW52aXJvbm1lbnQuICovICAgIHN0YXRpYyBEKCkge1xuICAgICAgICBpZiAoIWlzSW5kZXhlZERCQXZhaWxhYmxlKCkpIHJldHVybiAhMTtcbiAgICAgICAgaWYgKF9fUFJJVkFURV9TaW1wbGVEYi5DKCkpIHJldHVybiAhMDtcbiAgICAgICAgLy8gV2UgZXh0ZW5zaXZlbHkgdXNlIGluZGV4ZWQgYXJyYXkgdmFsdWVzIGFuZCBjb21wb3VuZCBrZXlzLFxuICAgICAgICAvLyB3aGljaCBJRSBhbmQgRWRnZSBkbyBub3Qgc3VwcG9ydC4gSG93ZXZlciwgdGhleSBzdGlsbCBoYXZlIGluZGV4ZWREQlxuICAgICAgICAvLyBkZWZpbmVkIG9uIHRoZSB3aW5kb3csIHNvIHdlIG5lZWQgdG8gY2hlY2sgZm9yIHRoZW0gaGVyZSBhbmQgbWFrZSBzdXJlXG4gICAgICAgIC8vIHRvIHJldHVybiB0aGF0IHBlcnNpc3RlbmNlIGlzIG5vdCBlbmFibGVkIGZvciB0aG9zZSBicm93c2Vycy5cbiAgICAgICAgLy8gRm9yIHRyYWNraW5nIHN1cHBvcnQgb2YgdGhpcyBmZWF0dXJlLCBzZWUgaGVyZTpcbiAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubWljcm9zb2Z0LmNvbS9lbi11cy9taWNyb3NvZnQtZWRnZS9wbGF0Zm9ybS9zdGF0dXMvaW5kZXhlZGRiYXJyYXlzYW5kbXVsdGllbnRyeXN1cHBvcnQvXG4gICAgICAgIC8vIENoZWNrIHRoZSBVQSBzdHJpbmcgdG8gZmluZCBvdXQgdGhlIGJyb3dzZXIuXG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IGdldFVBKCksIHQgPSBfX1BSSVZBVEVfU2ltcGxlRGIuUyhlKSwgbiA9IDAgPCB0ICYmIHQgPCAxMCwgciA9IF9fUFJJVkFURV9TaW1wbGVEYi52KGUpLCBpID0gMCA8IHIgJiYgciA8IDQuNTtcbiAgICAgICAgLy8gSUUgMTBcbiAgICAgICAgLy8gdWEgPSAnTW96aWxsYS81LjAgKGNvbXBhdGlibGU7IE1TSUUgMTAuMDsgV2luZG93cyBOVCA2LjI7IFRyaWRlbnQvNi4wKSc7XG4gICAgICAgIC8vIElFIDExXG4gICAgICAgIC8vIHVhID0gJ01vemlsbGEvNS4wIChXaW5kb3dzIE5UIDYuMzsgVHJpZGVudC83LjA7IHJ2OjExLjApIGxpa2UgR2Vja28nO1xuICAgICAgICAvLyBFZGdlXG4gICAgICAgIC8vIHVhID0gJ01vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdPVzY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLFxuICAgICAgICAvLyBsaWtlIEdlY2tvKSBDaHJvbWUvMzkuMC4yMTcxLjcxIFNhZmFyaS81MzcuMzYgRWRnZS8xMi4wJztcbiAgICAgICAgLy8gaU9TIFNhZmFyaTogRGlzYWJsZSBmb3IgdXNlcnMgcnVubmluZyBpT1MgdmVyc2lvbiA8IDEwLlxuICAgICAgICAgICAgICAgIHJldHVybiAhKGUuaW5kZXhPZihcIk1TSUUgXCIpID4gMCB8fCBlLmluZGV4T2YoXCJUcmlkZW50L1wiKSA+IDAgfHwgZS5pbmRleE9mKFwiRWRnZS9cIikgPiAwIHx8IG4gfHwgaSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgYmFja2luZyBJbmRleGVkREIgc3RvcmUgaXMgdGhlIE5vZGUgSW5kZXhlZERCU2hpbVxuICAgICAqIChzZWUgaHR0cHM6Ly9naXRodWIuY29tL2F4ZW1jbGlvbi9JbmRleGVkREJTaGltKS5cbiAgICAgKi8gICAgc3RhdGljIEMoKSB7XG4gICAgICAgIHZhciBlO1xuICAgICAgICByZXR1cm4gXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgcHJvY2VzcyAmJiBcIllFU1wiID09PSAobnVsbCA9PT0gKGUgPSBwcm9jZXNzLmVudikgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS5GKTtcbiAgICB9XG4gICAgLyoqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZyb20gYSB0cmFuc2FjdGlvbi4gKi8gICAgc3RhdGljIE0oZSwgdCkge1xuICAgICAgICByZXR1cm4gZS5zdG9yZSh0KTtcbiAgICB9XG4gICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xuICAgIC8qKiBQYXJzZSBVc2VyIEFnZW50IHRvIGRldGVybWluZSBpT1MgdmVyc2lvbi4gUmV0dXJucyAtMSBpZiBub3QgZm91bmQuICovXG4gICAgc3RhdGljIFMoZSkge1xuICAgICAgICBjb25zdCB0ID0gZS5tYXRjaCgvaSg/OnBob25lfHBhZHxwb2QpIG9zIChbXFxkX10rKS9pKSwgbiA9IHQgPyB0WzFdLnNwbGl0KFwiX1wiKS5zbGljZSgwLCAyKS5qb2luKFwiLlwiKSA6IFwiLTFcIjtcbiAgICAgICAgcmV0dXJuIE51bWJlcihuKTtcbiAgICB9XG4gICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xuICAgIC8qKiBQYXJzZSBVc2VyIEFnZW50IHRvIGRldGVybWluZSBBbmRyb2lkIHZlcnNpb24uIFJldHVybnMgLTEgaWYgbm90IGZvdW5kLiAqL1xuICAgIHN0YXRpYyB2KGUpIHtcbiAgICAgICAgY29uc3QgdCA9IGUubWF0Y2goL0FuZHJvaWQgKFtcXGQuXSspL2kpLCBuID0gdCA/IHRbMV0uc3BsaXQoXCIuXCIpLnNsaWNlKDAsIDIpLmpvaW4oXCIuXCIpIDogXCItMVwiO1xuICAgICAgICByZXR1cm4gTnVtYmVyKG4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBPcGVucyB0aGUgc3BlY2lmaWVkIGRhdGFiYXNlLCBjcmVhdGluZyBvciB1cGdyYWRpbmcgaXQgaWYgbmVjZXNzYXJ5LlxuICAgICAqLyAgICBhc3luYyBPKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGIgfHwgKF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlNpbXBsZURiXCIsIFwiT3BlbmluZyBkYXRhYmFzZTpcIiwgdGhpcy5uYW1lKSwgXG4gICAgICAgIHRoaXMuZGIgPSBhd2FpdCBuZXcgUHJvbWlzZSgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgIC8vIFRPRE8obWlrZWxlaGVuKTogSW52ZXN0aWdhdGUgYnJvd3NlciBjb21wYXRpYmlsaXR5LlxuICAgICAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0luZGV4ZWREQl9BUEkvVXNpbmdfSW5kZXhlZERCXG4gICAgICAgICAgICAvLyBzdWdnZXN0cyBJRTkgYW5kIG9sZGVyIFdlYktpdCBicm93c2VycyBoYW5kbGUgdXBncmFkZVxuICAgICAgICAgICAgLy8gZGlmZmVyZW50bHkuIFRoZXkgZXhwZWN0IHNldFZlcnNpb24sIGFzIGRlc2NyaWJlZCBoZXJlOlxuICAgICAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0lEQlZlcnNpb25DaGFuZ2VSZXF1ZXN0L3NldFZlcnNpb25cbiAgICAgICAgICAgIGNvbnN0IHIgPSBpbmRleGVkREIub3Blbih0aGlzLm5hbWUsIHRoaXMudmVyc2lvbik7XG4gICAgICAgICAgICByLm9uc3VjY2VzcyA9IGUgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBlLnRhcmdldC5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgdChuKTtcbiAgICAgICAgICAgIH0sIHIub25ibG9ja2VkID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIG4obmV3IF9fUFJJVkFURV9JbmRleGVkRGJUcmFuc2FjdGlvbkVycm9yKGUsIFwiQ2Fubm90IHVwZ3JhZGUgSW5kZXhlZERCIHNjaGVtYSB3aGlsZSBhbm90aGVyIHRhYiBpcyBvcGVuLiBDbG9zZSBhbGwgdGFicyB0aGF0IGFjY2VzcyBGaXJlc3RvcmUgYW5kIHJlbG9hZCB0aGlzIHBhZ2UgdG8gcHJvY2VlZC5cIikpO1xuICAgICAgICAgICAgfSwgci5vbmVycm9yID0gdCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgciA9IHQudGFyZ2V0LmVycm9yO1xuICAgICAgICAgICAgICAgIFwiVmVyc2lvbkVycm9yXCIgPT09IHIubmFtZSA/IG4obmV3IEZpcmVzdG9yZUVycm9yKEQuRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJBIG5ld2VyIHZlcnNpb24gb2YgdGhlIEZpcmVzdG9yZSBTREsgd2FzIHByZXZpb3VzbHkgdXNlZCBhbmQgc28gdGhlIHBlcnNpc3RlZCBkYXRhIGlzIG5vdCBjb21wYXRpYmxlIHdpdGggdGhlIHZlcnNpb24gb2YgdGhlIFNESyB5b3UgYXJlIG5vdyB1c2luZy4gVGhlIFNESyB3aWxsIG9wZXJhdGUgd2l0aCBwZXJzaXN0ZW5jZSBkaXNhYmxlZC4gSWYgeW91IG5lZWQgcGVyc2lzdGVuY2UsIHBsZWFzZSByZS11cGdyYWRlIHRvIGEgbmV3ZXIgdmVyc2lvbiBvZiB0aGUgU0RLIG9yIGVsc2UgY2xlYXIgdGhlIHBlcnNpc3RlZCBJbmRleGVkREIgZGF0YSBmb3IgeW91ciBhcHAgdG8gc3RhcnQgZnJlc2guXCIpKSA6IFwiSW52YWxpZFN0YXRlRXJyb3JcIiA9PT0gci5uYW1lID8gbihuZXcgRmlyZXN0b3JlRXJyb3IoRC5GQUlMRURfUFJFQ09ORElUSU9OLCBcIlVuYWJsZSB0byBvcGVuIGFuIEluZGV4ZWREQiBjb25uZWN0aW9uLiBUaGlzIGNvdWxkIGJlIGR1ZSB0byBydW5uaW5nIGluIGEgcHJpdmF0ZSBicm93c2luZyBzZXNzaW9uIG9uIGEgYnJvd3NlciB3aG9zZSBwcml2YXRlIGJyb3dzaW5nIHNlc3Npb25zIGRvIG5vdCBzdXBwb3J0IEluZGV4ZWREQjogXCIgKyByKSkgOiBuKG5ldyBfX1BSSVZBVEVfSW5kZXhlZERiVHJhbnNhY3Rpb25FcnJvcihlLCByKSk7XG4gICAgICAgICAgICB9LCByLm9udXBncmFkZW5lZWRlZCA9IGUgPT4ge1xuICAgICAgICAgICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlNpbXBsZURiXCIsICdEYXRhYmFzZSBcIicgKyB0aGlzLm5hbWUgKyAnXCIgcmVxdWlyZXMgdXBncmFkZSBmcm9tIHZlcnNpb246JywgZS5vbGRWZXJzaW9uKTtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gZS50YXJnZXQucmVzdWx0O1xuICAgICAgICAgICAgICAgIHRoaXMucC5OKHQsIHIudHJhbnNhY3Rpb24sIGUub2xkVmVyc2lvbiwgdGhpcy52ZXJzaW9uKS5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlNpbXBsZURiXCIsIFwiRGF0YWJhc2UgdXBncmFkZSB0byB2ZXJzaW9uIFwiICsgdGhpcy52ZXJzaW9uICsgXCIgY29tcGxldGVcIik7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSkpKSwgdGhpcy5CICYmICh0aGlzLmRiLm9udmVyc2lvbmNoYW5nZSA9IGUgPT4gdGhpcy5CKGUpKSwgdGhpcy5kYjtcbiAgICB9XG4gICAgTChlKSB7XG4gICAgICAgIHRoaXMuQiA9IGUsIHRoaXMuZGIgJiYgKHRoaXMuZGIub252ZXJzaW9uY2hhbmdlID0gdCA9PiBlKHQpKTtcbiAgICB9XG4gICAgYXN5bmMgcnVuVHJhbnNhY3Rpb24oZSwgdCwgbiwgcikge1xuICAgICAgICBjb25zdCBpID0gXCJyZWFkb25seVwiID09PSB0O1xuICAgICAgICBsZXQgcyA9IDA7XG4gICAgICAgIGZvciAoOzspIHtcbiAgICAgICAgICAgICsrcztcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kYiA9IGF3YWl0IHRoaXMuTyhlKTtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX1NpbXBsZURiVHJhbnNhY3Rpb24ub3Blbih0aGlzLmRiLCBlLCBpID8gXCJyZWFkb25seVwiIDogXCJyZWFkd3JpdGVcIiwgbiksIHMgPSByKHQpLm5leHQoKGUgPT4gKHQuZygpLCBcbiAgICAgICAgICAgICAgICBlKSkpLmNhdGNoKChlID0+IChcbiAgICAgICAgICAgICAgICAvLyBBYm9ydCB0aGUgdHJhbnNhY3Rpb24gaWYgdGhlcmUgd2FzIGFuIGVycm9yLlxuICAgICAgICAgICAgICAgIHQuYWJvcnQoZSksIFBlcnNpc3RlbmNlUHJvbWlzZS5yZWplY3QoZSkpKSkudG9Qcm9taXNlKCk7XG4gICAgICAgICAgICAgICAgLy8gQXMgbm90ZWQgYWJvdmUsIGVycm9ycyBhcmUgcHJvcGFnYXRlZCBieSBhYm9ydGluZyB0aGUgdHJhbnNhY3Rpb24uIFNvXG4gICAgICAgICAgICAgICAgLy8gd2Ugc3dhbGxvdyBhbnkgZXJyb3IgaGVyZSB0byBhdm9pZCB0aGUgYnJvd3NlciBsb2dnaW5nIGl0IGFzIHVuaGFuZGxlZC5cbiAgICAgICAgICAgICAgICByZXR1cm4gcy5jYXRjaCgoKCkgPT4ge30pKSwgXG4gICAgICAgICAgICAgICAgLy8gV2FpdCBmb3IgdGhlIHRyYW5zYWN0aW9uIHRvIGNvbXBsZXRlIChpLmUuIEluZGV4ZWREYidzIG9uc3VjY2VzcyBldmVudCB0b1xuICAgICAgICAgICAgICAgIC8vIGZpcmUpLCBidXQgc3RpbGwgcmV0dXJuIHRoZSBvcmlnaW5hbCB0cmFuc2FjdGlvbkZuUmVzdWx0IGJhY2sgdG8gdGhlXG4gICAgICAgICAgICAgICAgLy8gY2FsbGVyLlxuICAgICAgICAgICAgICAgIGF3YWl0IHQubSwgcztcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gZSwgbiA9IFwiRmlyZWJhc2VFcnJvclwiICE9PSB0Lm5hbWUgJiYgcyA8IDM7XG4gICAgICAgICAgICAgICAgLy8gVE9ETyhzY2htaWR0LXNlYmFzdGlhbik6IFdlIGNvdWxkIHByb2JhYmx5IGJlIHNtYXJ0ZXIgYWJvdXQgdGhpcyBhbmRcbiAgICAgICAgICAgICAgICAvLyBub3QgcmV0cnkgZXhjZXB0aW9ucyB0aGF0IGFyZSBsaWtlbHkgdW5yZWNvdmVyYWJsZSAoc3VjaCBhcyBxdW90YVxuICAgICAgICAgICAgICAgIC8vIGV4Y2VlZGVkIGVycm9ycykuXG4gICAgICAgICAgICAgICAgLy8gTm90ZTogV2UgY2Fubm90IHVzZSBhbiBpbnN0YW5jZW9mIGNoZWNrIGZvciBGaXJlc3RvcmVFeGNlcHRpb24sIHNpbmNlIHRoZVxuICAgICAgICAgICAgICAgIC8vIGV4Y2VwdGlvbiBpcyB3cmFwcGVkIGluIGEgZ2VuZXJpYyBlcnJvciBieSBvdXIgYXN5bmMvYXdhaXQgaGFuZGxpbmcuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfX1BSSVZBVEVfbG9nRGVidWcoXCJTaW1wbGVEYlwiLCBcIlRyYW5zYWN0aW9uIGZhaWxlZCB3aXRoIGVycm9yOlwiLCB0Lm1lc3NhZ2UsIFwiUmV0cnlpbmc6XCIsIG4pLCBcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCksICFuKSByZXR1cm4gUHJvbWlzZS5yZWplY3QodCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMuZGIgJiYgdGhpcy5kYi5jbG9zZSgpLCB0aGlzLmRiID0gdm9pZCAwO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIGNvbnRyb2xsZXIgZm9yIGl0ZXJhdGluZyBvdmVyIGEga2V5IHJhbmdlIG9yIGluZGV4LiBJdCBhbGxvd3MgYW4gaXRlcmF0ZVxuICogY2FsbGJhY2sgdG8gZGVsZXRlIHRoZSBjdXJyZW50bHktcmVmZXJlbmNlZCBvYmplY3QsIG9yIGp1bXAgdG8gYSBuZXcga2V5XG4gKiB3aXRoaW4gdGhlIGtleSByYW5nZSBvciBpbmRleC5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfSXRlcmF0aW9uQ29udHJvbGxlciB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLmsgPSBlLCB0aGlzLnEgPSAhMSwgdGhpcy5LID0gbnVsbDtcbiAgICB9XG4gICAgZ2V0IGlzRG9uZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucTtcbiAgICB9XG4gICAgZ2V0ICQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLks7XG4gICAgfVxuICAgIHNldCBjdXJzb3IoZSkge1xuICAgICAgICB0aGlzLmsgPSBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIGNhbiBiZSBjYWxsZWQgdG8gc3RvcCBpdGVyYXRpb24gYXQgYW55IHBvaW50LlxuICAgICAqLyAgICBkb25lKCkge1xuICAgICAgICB0aGlzLnEgPSAhMDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhpcyBmdW5jdGlvbiBjYW4gYmUgY2FsbGVkIHRvIHNraXAgdG8gdGhhdCBuZXh0IGtleSwgd2hpY2ggY291bGQgYmVcbiAgICAgKiBhbiBpbmRleCBvciBhIHByaW1hcnkga2V5LlxuICAgICAqLyAgICBVKGUpIHtcbiAgICAgICAgdGhpcy5LID0gZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVsZXRlIHRoZSBjdXJyZW50IGN1cnNvciB2YWx1ZSBmcm9tIHRoZSBvYmplY3Qgc3RvcmUuXG4gICAgICpcbiAgICAgKiBOT1RFOiBZb3UgQ0FOTk9UIGRvIHRoaXMgd2l0aCBhIGtleXNPbmx5IHF1ZXJ5LlxuICAgICAqLyAgICBkZWxldGUoKSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfd3JhcFJlcXVlc3QodGhpcy5rLmRlbGV0ZSgpKTtcbiAgICB9XG59XG5cbi8qKiBBbiBlcnJvciB0aGF0IHdyYXBzIGV4Y2VwdGlvbnMgdGhhdCB0aHJvd24gZHVyaW5nIEluZGV4ZWREQiBleGVjdXRpb24uICovIGNsYXNzIF9fUFJJVkFURV9JbmRleGVkRGJUcmFuc2FjdGlvbkVycm9yIGV4dGVuZHMgRmlyZXN0b3JlRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgc3VwZXIoRC5VTkFWQUlMQUJMRSwgYEluZGV4ZWREQiB0cmFuc2FjdGlvbiAnJHtlfScgZmFpbGVkOiAke3R9YCksIHRoaXMubmFtZSA9IFwiSW5kZXhlZERiVHJhbnNhY3Rpb25FcnJvclwiO1xuICAgIH1cbn1cblxuLyoqIFZlcmlmaWVzIHdoZXRoZXIgYGVgIGlzIGFuIEluZGV4ZWREYlRyYW5zYWN0aW9uRXJyb3IuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9pc0luZGV4ZWREYlRyYW5zYWN0aW9uRXJyb3IoZSkge1xuICAgIC8vIFVzZSBuYW1lIGVxdWFsaXR5LCBhcyBpbnN0YW5jZW9mIGNoZWNrcyBvbiBlcnJvcnMgZG9uJ3Qgd29yayB3aXRoIGVycm9yc1xuICAgIC8vIHRoYXQgd3JhcCBvdGhlciBlcnJvcnMuXG4gICAgcmV0dXJuIFwiSW5kZXhlZERiVHJhbnNhY3Rpb25FcnJvclwiID09PSBlLm5hbWU7XG59XG5cbi8qKlxuICogQSB3cmFwcGVyIGFyb3VuZCBhbiBJREJPYmplY3RTdG9yZSBwcm92aWRpbmcgYW4gQVBJIHRoYXQ6XG4gKlxuICogMSkgSGFzIGdlbmVyaWMgS2V5VHlwZSAvIFZhbHVlVHlwZSBwYXJhbWV0ZXJzIHRvIHByb3ZpZGUgc3Ryb25nbHktdHlwZWRcbiAqIG1ldGhvZHMgZm9yIGFjdGluZyBhZ2FpbnN0IHRoZSBvYmplY3Qgc3RvcmUuXG4gKiAyKSBEZWFscyB3aXRoIEluZGV4ZWREQidzIG9uc3VjY2VzcyAvIG9uZXJyb3IgZXZlbnQgY2FsbGJhY2tzLCBtYWtpbmcgZXZlcnlcbiAqIG1ldGhvZCByZXR1cm4gYSBQZXJzaXN0ZW5jZVByb21pc2UgaW5zdGVhZC5cbiAqIDMpIFByb3ZpZGVzIGEgaGlnaGVyLWxldmVsIEFQSSB0byBhdm9pZCBuZWVkaW5nIHRvIGRvIGV4Y2Vzc2l2ZSB3cmFwcGluZyBvZlxuICogaW50ZXJtZWRpYXRlIEluZGV4ZWREQiB0eXBlcyAoSURCQ3Vyc29yV2l0aFZhbHVlLCBldGMuKVxuICovIGNsYXNzIF9fUFJJVkFURV9TaW1wbGVEYlN0b3JlIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMuc3RvcmUgPSBlO1xuICAgIH1cbiAgICBwdXQoZSwgdCkge1xuICAgICAgICBsZXQgbjtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gdCA/IChfX1BSSVZBVEVfbG9nRGVidWcoXCJTaW1wbGVEYlwiLCBcIlBVVFwiLCB0aGlzLnN0b3JlLm5hbWUsIGUsIHQpLCBcbiAgICAgICAgbiA9IHRoaXMuc3RvcmUucHV0KHQsIGUpKSA6IChfX1BSSVZBVEVfbG9nRGVidWcoXCJTaW1wbGVEYlwiLCBcIlBVVFwiLCB0aGlzLnN0b3JlLm5hbWUsIFwiPGF1dG8ta2V5PlwiLCBlKSwgXG4gICAgICAgIG4gPSB0aGlzLnN0b3JlLnB1dChlKSksIF9fUFJJVkFURV93cmFwUmVxdWVzdChuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyBhIG5ldyB2YWx1ZSBpbnRvIGFuIE9iamVjdCBTdG9yZSBhbmQgcmV0dXJucyB0aGUgbmV3IGtleS4gU2ltaWxhciB0b1xuICAgICAqIEluZGV4ZWREYidzIGBhZGQoKWAsIHRoaXMgbWV0aG9kIHdpbGwgZmFpbCBvbiBwcmltYXJ5IGtleSBjb2xsaXNpb25zLlxuICAgICAqXG4gICAgICogQHBhcmFtIHZhbHVlIC0gVGhlIG9iamVjdCB0byB3cml0ZS5cbiAgICAgKiBAcmV0dXJucyBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBhZGQuXG4gICAgICovICAgIGFkZChlKSB7XG4gICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlNpbXBsZURiXCIsIFwiQUREXCIsIHRoaXMuc3RvcmUubmFtZSwgZSwgZSk7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfd3JhcFJlcXVlc3QodGhpcy5zdG9yZS5hZGQoZSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBvYmplY3Qgd2l0aCB0aGUgc3BlY2lmaWVkIGtleSBmcm9tIHRoZSBzcGVjaWZpZWQgc3RvcmUsIG9yIG51bGxcbiAgICAgKiBpZiBubyBvYmplY3QgZXhpc3RzIHdpdGggdGhlIHNwZWNpZmllZCBrZXkuXG4gICAgICpcbiAgICAgKiBAa2V5IFRoZSBrZXkgb2YgdGhlIG9iamVjdCB0byBnZXQuXG4gICAgICogQHJldHVybnMgVGhlIG9iamVjdCB3aXRoIHRoZSBzcGVjaWZpZWQga2V5IG9yIG51bGwgaWYgbm8gb2JqZWN0IGV4aXN0cy5cbiAgICAgKi8gICAgZ2V0KGUpIHtcbiAgICAgICAgLy8gV2UncmUgZG9pbmcgYW4gdW5zYWZlIGNhc3QgdG8gVmFsdWVUeXBlLlxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICByZXR1cm4gX19QUklWQVRFX3dyYXBSZXF1ZXN0KHRoaXMuc3RvcmUuZ2V0KGUpKS5uZXh0KCh0ID0+IChcbiAgICAgICAgLy8gTm9ybWFsaXplIG5vbmV4aXN0ZW5jZSB0byBudWxsLlxuICAgICAgICB2b2lkIDAgPT09IHQgJiYgKHQgPSBudWxsKSwgX19QUklWQVRFX2xvZ0RlYnVnKFwiU2ltcGxlRGJcIiwgXCJHRVRcIiwgdGhpcy5zdG9yZS5uYW1lLCBlLCB0KSwgXG4gICAgICAgIHQpKSk7XG4gICAgfVxuICAgIGRlbGV0ZShlKSB7XG4gICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlNpbXBsZURiXCIsIFwiREVMRVRFXCIsIHRoaXMuc3RvcmUubmFtZSwgZSk7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfd3JhcFJlcXVlc3QodGhpcy5zdG9yZS5kZWxldGUoZSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJZiB3ZSBldmVyIG5lZWQgbW9yZSBvZiB0aGUgY291bnQgdmFyaWFudHMsIHdlIGNhbiBhZGQgb3ZlcmxvYWRzLiBGb3Igbm93LFxuICAgICAqIGFsbCB3ZSBuZWVkIGlzIHRvIGNvdW50IGV2ZXJ5dGhpbmcgaW4gYSBzdG9yZS5cbiAgICAgKlxuICAgICAqIFJldHVybnMgdGhlIG51bWJlciBvZiByb3dzIGluIHRoZSBzdG9yZS5cbiAgICAgKi8gICAgY291bnQoKSB7XG4gICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlNpbXBsZURiXCIsIFwiQ09VTlRcIiwgdGhpcy5zdG9yZS5uYW1lKTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV93cmFwUmVxdWVzdCh0aGlzLnN0b3JlLmNvdW50KCkpO1xuICAgIH1cbiAgICBXKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMub3B0aW9ucyhlLCB0KTtcbiAgICAgICAgLy8gVXNlIGBnZXRBbGwoKWAgaWYgdGhlIGJyb3dzZXIgc3VwcG9ydHMgSW5kZXhlZERCIHYzLCBhcyBpdCBpcyByb3VnaGx5XG4gICAgICAgIC8vIDIwJSBmYXN0ZXIuIFVuZm9ydHVuYXRlbHksIGdldEFsbCgpIGRvZXMgbm90IHN1cHBvcnQgY3VzdG9tIGluZGljZXMuXG4gICAgICAgICAgICAgICAgaWYgKG4uaW5kZXggfHwgXCJmdW5jdGlvblwiICE9IHR5cGVvZiB0aGlzLnN0b3JlLmdldEFsbCkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMuY3Vyc29yKG4pLCB0ID0gW107XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5HKGUsICgoZSwgbikgPT4ge1xuICAgICAgICAgICAgICAgIHQucHVzaChuKTtcbiAgICAgICAgICAgIH0pKS5uZXh0KCgoKSA9PiB0KSk7XG4gICAgICAgIH1cbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMuc3RvcmUuZ2V0QWxsKG4ucmFuZ2UpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQZXJzaXN0ZW5jZVByb21pc2UoKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICAgICAgZS5vbmVycm9yID0gZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIG4oZS50YXJnZXQuZXJyb3IpO1xuICAgICAgICAgICAgICAgIH0sIGUub25zdWNjZXNzID0gZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHQoZS50YXJnZXQucmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExvYWRzIHRoZSBmaXJzdCBgY291bnRgIGVsZW1lbnRzIGZyb20gdGhlIHByb3ZpZGVkIGluZGV4IHJhbmdlLiBMb2FkcyBhbGxcbiAgICAgKiBlbGVtZW50cyBpZiBubyBsaW1pdCBpcyBwcm92aWRlZC5cbiAgICAgKi8gICAgaihlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLnN0b3JlLmdldEFsbChlLCBudWxsID09PSB0ID8gdm9pZCAwIDogdCk7XG4gICAgICAgIHJldHVybiBuZXcgUGVyc2lzdGVuY2VQcm9taXNlKCgoZSwgdCkgPT4ge1xuICAgICAgICAgICAgbi5vbmVycm9yID0gZSA9PiB7XG4gICAgICAgICAgICAgICAgdChlLnRhcmdldC5lcnJvcik7XG4gICAgICAgICAgICB9LCBuLm9uc3VjY2VzcyA9IHQgPT4ge1xuICAgICAgICAgICAgICAgIGUodC50YXJnZXQucmVzdWx0KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgSChlLCB0KSB7XG4gICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlNpbXBsZURiXCIsIFwiREVMRVRFIEFMTFwiLCB0aGlzLnN0b3JlLm5hbWUpO1xuICAgICAgICBjb25zdCBuID0gdGhpcy5vcHRpb25zKGUsIHQpO1xuICAgICAgICBuLkogPSAhMTtcbiAgICAgICAgY29uc3QgciA9IHRoaXMuY3Vyc29yKG4pO1xuICAgICAgICByZXR1cm4gdGhpcy5HKHIsICgoZSwgdCwgbikgPT4gbi5kZWxldGUoKSkpO1xuICAgIH1cbiAgICBZKGUsIHQpIHtcbiAgICAgICAgbGV0IG47XG4gICAgICAgIHQgPyBuID0gZSA6IChuID0ge30sIHQgPSBlKTtcbiAgICAgICAgY29uc3QgciA9IHRoaXMuY3Vyc29yKG4pO1xuICAgICAgICByZXR1cm4gdGhpcy5HKHIsIHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJdGVyYXRlcyBvdmVyIGEgc3RvcmUsIGJ1dCB3YWl0cyBmb3IgdGhlIGdpdmVuIGNhbGxiYWNrIHRvIGNvbXBsZXRlIGZvclxuICAgICAqIGVhY2ggZW50cnkgYmVmb3JlIGl0ZXJhdGluZyB0aGUgbmV4dCBlbnRyeS4gVGhpcyBhbGxvd3MgdGhlIGNhbGxiYWNrIHRvIGRvXG4gICAgICogYXN5bmNocm9ub3VzIHdvcmsgdG8gZGV0ZXJtaW5lIGlmIHRoaXMgaXRlcmF0aW9uIHNob3VsZCBjb250aW51ZS5cbiAgICAgKlxuICAgICAqIFRoZSBwcm92aWRlZCBjYWxsYmFjayBzaG91bGQgcmV0dXJuIGB0cnVlYCB0byBjb250aW51ZSBpdGVyYXRpb24sIGFuZFxuICAgICAqIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICAgICAqLyAgICBaKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuY3Vyc29yKHt9KTtcbiAgICAgICAgcmV0dXJuIG5ldyBQZXJzaXN0ZW5jZVByb21pc2UoKChuLCByKSA9PiB7XG4gICAgICAgICAgICB0Lm9uZXJyb3IgPSBlID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX2NoZWNrRm9yQW5kUmVwb3J0aU9TRXJyb3IoZS50YXJnZXQuZXJyb3IpO1xuICAgICAgICAgICAgICAgIHIodCk7XG4gICAgICAgICAgICB9LCB0Lm9uc3VjY2VzcyA9IHQgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSB0LnRhcmdldC5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgciA/IGUoci5wcmltYXJ5S2V5LCByLnZhbHVlKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZSA/IHIuY29udGludWUoKSA6IG4oKTtcbiAgICAgICAgICAgICAgICB9KSkgOiBuKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIEcoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gW107XG4gICAgICAgIHJldHVybiBuZXcgUGVyc2lzdGVuY2VQcm9taXNlKCgociwgaSkgPT4ge1xuICAgICAgICAgICAgZS5vbmVycm9yID0gZSA9PiB7XG4gICAgICAgICAgICAgICAgaShlLnRhcmdldC5lcnJvcik7XG4gICAgICAgICAgICB9LCBlLm9uc3VjY2VzcyA9IGUgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGkgPSBlLnRhcmdldC5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgaWYgKCFpKSByZXR1cm4gdm9pZCByKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IG5ldyBfX1BSSVZBVEVfSXRlcmF0aW9uQ29udHJvbGxlcihpKSwgbyA9IHQoaS5wcmltYXJ5S2V5LCBpLnZhbHVlLCBzKTtcbiAgICAgICAgICAgICAgICBpZiAobyBpbnN0YW5jZW9mIFBlcnNpc3RlbmNlUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gby5jYXRjaCgoZSA9PiAocy5kb25lKCksIFBlcnNpc3RlbmNlUHJvbWlzZS5yZWplY3QoZSkpKSk7XG4gICAgICAgICAgICAgICAgICAgIG4ucHVzaChlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcy5pc0RvbmUgPyByKCkgOiBudWxsID09PSBzLiQgPyBpLmNvbnRpbnVlKCkgOiBpLmNvbnRpbnVlKHMuJCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gUGVyc2lzdGVuY2VQcm9taXNlLndhaXRGb3IobikpKTtcbiAgICB9XG4gICAgb3B0aW9ucyhlLCB0KSB7XG4gICAgICAgIGxldCBuO1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSBlICYmIChcInN0cmluZ1wiID09IHR5cGVvZiBlID8gbiA9IGUgOiB0ID0gZSksIHtcbiAgICAgICAgICAgIGluZGV4OiBuLFxuICAgICAgICAgICAgcmFuZ2U6IHRcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY3Vyc29yKGUpIHtcbiAgICAgICAgbGV0IHQgPSBcIm5leHRcIjtcbiAgICAgICAgaWYgKGUucmV2ZXJzZSAmJiAodCA9IFwicHJldlwiKSwgZS5pbmRleCkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMuc3RvcmUuaW5kZXgoZS5pbmRleCk7XG4gICAgICAgICAgICByZXR1cm4gZS5KID8gbi5vcGVuS2V5Q3Vyc29yKGUucmFuZ2UsIHQpIDogbi5vcGVuQ3Vyc29yKGUucmFuZ2UsIHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnN0b3JlLm9wZW5DdXJzb3IoZS5yYW5nZSwgdCk7XG4gICAgfVxufVxuXG4vKipcbiAqIFdyYXBzIGFuIElEQlJlcXVlc3QgaW4gYSBQZXJzaXN0ZW5jZVByb21pc2UsIHVzaW5nIHRoZSBvbnN1Y2Nlc3MgLyBvbmVycm9yXG4gKiBoYW5kbGVycyB0byByZXNvbHZlIC8gcmVqZWN0IHRoZSBQZXJzaXN0ZW5jZVByb21pc2UgYXMgYXBwcm9wcmlhdGUuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3dyYXBSZXF1ZXN0KGUpIHtcbiAgICByZXR1cm4gbmV3IFBlcnNpc3RlbmNlUHJvbWlzZSgoKHQsIG4pID0+IHtcbiAgICAgICAgZS5vbnN1Y2Nlc3MgPSBlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBlLnRhcmdldC5yZXN1bHQ7XG4gICAgICAgICAgICB0KG4pO1xuICAgICAgICB9LCBlLm9uZXJyb3IgPSBlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfY2hlY2tGb3JBbmRSZXBvcnRpT1NFcnJvcihlLnRhcmdldC5lcnJvcik7XG4gICAgICAgICAgICBuKHQpO1xuICAgICAgICB9O1xuICAgIH0pKTtcbn1cblxuLy8gR3VhcmQgc28gd2Ugb25seSByZXBvcnQgdGhlIGVycm9yIG9uY2UuXG5sZXQgRiA9ICExO1xuXG5mdW5jdGlvbiBfX1BSSVZBVEVfY2hlY2tGb3JBbmRSZXBvcnRpT1NFcnJvcihlKSB7XG4gICAgY29uc3QgdCA9IF9fUFJJVkFURV9TaW1wbGVEYi5TKGdldFVBKCkpO1xuICAgIGlmICh0ID49IDEyLjIgJiYgdCA8IDEzKSB7XG4gICAgICAgIGNvbnN0IHQgPSBcIkFuIGludGVybmFsIGVycm9yIHdhcyBlbmNvdW50ZXJlZCBpbiB0aGUgSW5kZXhlZCBEYXRhYmFzZSBzZXJ2ZXJcIjtcbiAgICAgICAgaWYgKGUubWVzc2FnZS5pbmRleE9mKHQpID49IDApIHtcbiAgICAgICAgICAgIC8vIFdyYXAgZXJyb3IgaW4gYSBtb3JlIGRlc2NyaXB0aXZlIG9uZS5cbiAgICAgICAgICAgIGNvbnN0IGUgPSBuZXcgRmlyZXN0b3JlRXJyb3IoXCJpbnRlcm5hbFwiLCBgSU9TX0lOREVYRUREQl9CVUcxOiBJbmRleGVkRGIgaGFzIHRocm93biAnJHt0fScuIFRoaXMgaXMgbGlrZWx5IGR1ZSB0byBhbiB1bmF2b2lkYWJsZSBidWcgaW4gaU9TLiBTZWUgaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xLzU2NDk2Mjk2LzExMDkxNSBmb3IgZGV0YWlscyBhbmQgYSBwb3RlbnRpYWwgd29ya2Fyb3VuZC5gKTtcbiAgICAgICAgICAgIHJldHVybiBGIHx8IChGID0gITAsIFxuICAgICAgICAgICAgLy8gVGhyb3cgYSBnbG9iYWwgZXhjZXB0aW9uIG91dHNpZGUgb2YgdGhpcyBwcm9taXNlIGNoYWluLCBmb3IgdGhlIHVzZXIgdG9cbiAgICAgICAgICAgIC8vIHBvdGVudGlhbGx5IGNhdGNoLlxuICAgICAgICAgICAgc2V0VGltZW91dCgoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICB9KSwgMCkpLCBlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBlO1xufVxuXG4vKiogVGhpcyBjbGFzcyBpcyByZXNwb25zaWJsZSBmb3IgdGhlIHNjaGVkdWxpbmcgb2YgSW5kZXggQmFja2ZpbGxlci4gKi9cbmNsYXNzIF9fUFJJVkFURV9JbmRleEJhY2tmaWxsZXJTY2hlZHVsZXIge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgdGhpcy5hc3luY1F1ZXVlID0gZSwgdGhpcy5YID0gdCwgdGhpcy50YXNrID0gbnVsbDtcbiAgICB9XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIHRoaXMuZWUoMTVlMyk7XG4gICAgfVxuICAgIHN0b3AoKSB7XG4gICAgICAgIHRoaXMudGFzayAmJiAodGhpcy50YXNrLmNhbmNlbCgpLCB0aGlzLnRhc2sgPSBudWxsKTtcbiAgICB9XG4gICAgZ2V0IHN0YXJ0ZWQoKSB7XG4gICAgICAgIHJldHVybiBudWxsICE9PSB0aGlzLnRhc2s7XG4gICAgfVxuICAgIGVlKGUpIHtcbiAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiSW5kZXhCYWNraWxsZXJcIiwgYFNjaGVkdWxlZCBpbiAke2V9bXNgKSwgdGhpcy50YXNrID0gdGhpcy5hc3luY1F1ZXVlLmVucXVldWVBZnRlckRlbGF5KFwiaW5kZXhfYmFja2ZpbGxcIiAvKiBUaW1lcklkLkluZGV4QmFja2ZpbGwgKi8gLCBlLCAoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy50YXNrID0gbnVsbDtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiSW5kZXhCYWNraWxsZXJcIiwgYERvY3VtZW50cyB3cml0dGVuOiAke2F3YWl0IHRoaXMuWC50ZSgpfWApO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIF9fUFJJVkFURV9pc0luZGV4ZWREYlRyYW5zYWN0aW9uRXJyb3IoZSkgPyBfX1BSSVZBVEVfbG9nRGVidWcoXCJJbmRleEJhY2tpbGxlclwiLCBcIklnbm9yaW5nIEluZGV4ZWREQiBlcnJvciBkdXJpbmcgaW5kZXggYmFja2ZpbGw6IFwiLCBlKSA6IGF3YWl0IF9fUFJJVkFURV9pZ25vcmVJZlByaW1hcnlMZWFzZUxvc3MoZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmVlKDZlNCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5cbi8qKiBJbXBsZW1lbnRzIHRoZSBzdGVwcyBmb3IgYmFja2ZpbGxpbmcgaW5kZXhlcy4gKi8gY2xhc3MgX19QUklWQVRFX0luZGV4QmFja2ZpbGxlciB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogTG9jYWxTdG9yZSBwcm92aWRlcyBhY2Nlc3MgdG8gSW5kZXhNYW5hZ2VyIGFuZCBMb2NhbERvY3VtZW50Vmlldy5cbiAgICAgKiBUaGVzZSBwcm9wZXJ0aWVzIHdpbGwgdXBkYXRlIHdoZW4gdGhlIHVzZXIgY2hhbmdlcy4gQ29uc2VxdWVudGx5LFxuICAgICAqIG1ha2luZyBhIGxvY2FsIGNvcHkgb2YgSW5kZXhNYW5hZ2VyIGFuZCBMb2NhbERvY3VtZW50VmlldyB3aWxsIHJlcXVpcmVcbiAgICAgKiB1cGRhdGVzIG92ZXIgdGltZS4gVGhlIHNpbXBsZXIgc29sdXRpb24gaXMgdG8gcmVseSBvbiBMb2NhbFN0b3JlIHRvIGhhdmVcbiAgICAgKiBhbiB1cC10by1kYXRlIHJlZmVyZW5jZXMgdG8gSW5kZXhNYW5hZ2VyIGFuZCBMb2NhbERvY3VtZW50U3RvcmUuXG4gICAgICovXG4gICAgZSwgdCkge1xuICAgICAgICB0aGlzLmxvY2FsU3RvcmUgPSBlLCB0aGlzLnBlcnNpc3RlbmNlID0gdDtcbiAgICB9XG4gICAgYXN5bmMgdGUoZSA9IDUwKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiQmFja2ZpbGwgSW5kZXhlc1wiLCBcInJlYWR3cml0ZS1wcmltYXJ5XCIsICh0ID0+IHRoaXMubmUodCwgZSkpKTtcbiAgICB9XG4gICAgLyoqIFdyaXRlcyBpbmRleCBlbnRyaWVzIHVudGlsIHRoZSBjYXAgaXMgcmVhY2hlZC4gUmV0dXJucyB0aGUgbnVtYmVyIG9mIGRvY3VtZW50cyBwcm9jZXNzZWQuICovICAgIG5lKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBTZXQ7XG4gICAgICAgIGxldCByID0gdCwgaSA9ICEwO1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLmRvV2hpbGUoKCgpID0+ICEwID09PSBpICYmIHIgPiAwKSwgKCgpID0+IHRoaXMubG9jYWxTdG9yZS5pbmRleE1hbmFnZXIuZ2V0TmV4dENvbGxlY3Rpb25Hcm91cFRvVXBkYXRlKGUpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgaWYgKG51bGwgIT09IHQgJiYgIW4uaGFzKHQpKSByZXR1cm4gX19QUklWQVRFX2xvZ0RlYnVnKFwiSW5kZXhCYWNraWxsZXJcIiwgYFByb2Nlc3NpbmcgY29sbGVjdGlvbjogJHt0fWApLCBcbiAgICAgICAgICAgIHRoaXMucmUoZSwgdCwgcikubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgciAtPSBlLCBuLmFkZCh0KTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIGkgPSAhMTtcbiAgICAgICAgfSkpKSkubmV4dCgoKCkgPT4gdCAtIHIpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV3JpdGVzIGVudHJpZXMgZm9yIHRoZSBwcm92aWRlZCBjb2xsZWN0aW9uIGdyb3VwLiBSZXR1cm5zIHRoZSBudW1iZXIgb2YgZG9jdW1lbnRzIHByb2Nlc3NlZC5cbiAgICAgKi8gICAgcmUoZSwgdCwgbikge1xuICAgICAgICAvLyBVc2UgdGhlIGVhcmxpZXN0IG9mZnNldCBvZiBhbGwgZmllbGQgaW5kZXhlcyB0byBxdWVyeSB0aGUgbG9jYWwgY2FjaGUuXG4gICAgICAgIHJldHVybiB0aGlzLmxvY2FsU3RvcmUuaW5kZXhNYW5hZ2VyLmdldE1pbk9mZnNldEZyb21Db2xsZWN0aW9uR3JvdXAoZSwgdCkubmV4dCgociA9PiB0aGlzLmxvY2FsU3RvcmUubG9jYWxEb2N1bWVudHMuZ2V0TmV4dERvY3VtZW50cyhlLCB0LCByLCBuKS5uZXh0KChuID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBuLmNoYW5nZXM7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sb2NhbFN0b3JlLmluZGV4TWFuYWdlci51cGRhdGVJbmRleEVudHJpZXMoZSwgaSkubmV4dCgoKCkgPT4gdGhpcy5pZShyLCBuKSkpLm5leHQoKG4gPT4gKF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkluZGV4QmFja2lsbGVyXCIsIGBVcGRhdGluZyBvZmZzZXQ6ICR7bn1gKSwgXG4gICAgICAgICAgICB0aGlzLmxvY2FsU3RvcmUuaW5kZXhNYW5hZ2VyLnVwZGF0ZUNvbGxlY3Rpb25Hcm91cChlLCB0LCBuKSkpKS5uZXh0KCgoKSA9PiBpLnNpemUpKTtcbiAgICAgICAgfSkpKSk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIHRoZSBuZXh0IG9mZnNldCBiYXNlZCBvbiB0aGUgcHJvdmlkZWQgZG9jdW1lbnRzLiAqLyAgICBpZShlLCB0KSB7XG4gICAgICAgIGxldCBuID0gZTtcbiAgICAgICAgcmV0dXJuIHQuY2hhbmdlcy5mb3JFYWNoKCgoZSwgdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV9uZXdJbmRleE9mZnNldEZyb21Eb2N1bWVudCh0KTtcbiAgICAgICAgICAgIF9fUFJJVkFURV9pbmRleE9mZnNldENvbXBhcmF0b3IociwgbikgPiAwICYmIChuID0gcik7XG4gICAgICAgIH0pKSwgbmV3IEluZGV4T2Zmc2V0KG4ucmVhZFRpbWUsIG4uZG9jdW1lbnRLZXksIE1hdGgubWF4KHQuYmF0Y2hJZCwgZS5sYXJnZXN0QmF0Y2hJZCkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogYExpc3RlblNlcXVlbmNlYCBpcyBhIG1vbm90b25pYyBzZXF1ZW5jZS4gSXQgaXMgaW5pdGlhbGl6ZWQgd2l0aCBhIG1pbmltdW0gdmFsdWUgdG9cbiAqIGV4Y2VlZC4gQWxsIHN1YnNlcXVlbnQgY2FsbHMgdG8gbmV4dCB3aWxsIHJldHVybiBpbmNyZWFzaW5nIHZhbHVlcy4gSWYgcHJvdmlkZWQgd2l0aCBhXG4gKiBgU2VxdWVuY2VOdW1iZXJTeW5jZXJgLCBpdCB3aWxsIGFkZGl0aW9uYWxseSBidW1wIGl0cyBuZXh0IHZhbHVlIHdoZW4gdG9sZCBvZiBhIG5ldyB2YWx1ZSwgYXNcbiAqIHdlbGwgYXMgd3JpdGUgb3V0IHNlcXVlbmNlIG51bWJlcnMgdGhhdCBpdCBwcm9kdWNlcyB2aWEgYG5leHQoKWAuXG4gKi8gY2xhc3MgX19QUklWQVRFX0xpc3RlblNlcXVlbmNlIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMucHJldmlvdXNWYWx1ZSA9IGUsIHQgJiYgKHQuc2VxdWVuY2VOdW1iZXJIYW5kbGVyID0gZSA9PiB0aGlzLnNlKGUpLCB0aGlzLm9lID0gZSA9PiB0LndyaXRlU2VxdWVuY2VOdW1iZXIoZSkpO1xuICAgIH1cbiAgICBzZShlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByZXZpb3VzVmFsdWUgPSBNYXRoLm1heChlLCB0aGlzLnByZXZpb3VzVmFsdWUpLCB0aGlzLnByZXZpb3VzVmFsdWU7XG4gICAgfVxuICAgIG5leHQoKSB7XG4gICAgICAgIGNvbnN0IGUgPSArK3RoaXMucHJldmlvdXNWYWx1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXMub2UgJiYgdGhpcy5vZShlKSwgZTtcbiAgICB9XG59XG5cbl9fUFJJVkFURV9MaXN0ZW5TZXF1ZW5jZS5fZSA9IC0xO1xuXG4vKipcbiAqIFJldHVybnMgd2hldGhlciBhIHZhcmlhYmxlIGlzIGVpdGhlciB1bmRlZmluZWQgb3IgbnVsbC5cbiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX2lzTnVsbE9yVW5kZWZpbmVkKGUpIHtcbiAgICByZXR1cm4gbnVsbCA9PSBlO1xufVxuXG4vKiogUmV0dXJucyB3aGV0aGVyIHRoZSB2YWx1ZSByZXByZXNlbnRzIC0wLiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfaXNOZWdhdGl2ZVplcm8oZSkge1xuICAgIC8vIERldGVjdCBpZiB0aGUgdmFsdWUgaXMgLTAuMC4gQmFzZWQgb24gcG9seWZpbGwgZnJvbVxuICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL09iamVjdC9pc1xuICAgIHJldHVybiAwID09PSBlICYmIDEgLyBlID09IC0xIC8gMDtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgYSB2YWx1ZSBpcyBhbiBpbnRlZ2VyIGFuZCBpbiB0aGUgc2FmZSBpbnRlZ2VyIHJhbmdlXG4gKiBAcGFyYW0gdmFsdWUgLSBUaGUgdmFsdWUgdG8gdGVzdCBmb3IgYmVpbmcgYW4gaW50ZWdlciBhbmQgaW4gdGhlIHNhZmUgcmFuZ2VcbiAqLyBmdW5jdGlvbiBpc1NhZmVJbnRlZ2VyKGUpIHtcbiAgICByZXR1cm4gXCJudW1iZXJcIiA9PSB0eXBlb2YgZSAmJiBOdW1iZXIuaXNJbnRlZ2VyKGUpICYmICFfX1BSSVZBVEVfaXNOZWdhdGl2ZVplcm8oZSkgJiYgZSA8PSBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUiAmJiBlID49IE51bWJlci5NSU5fU0FGRV9JTlRFR0VSO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBFbmNvZGVzIGEgcmVzb3VyY2UgcGF0aCBpbnRvIGEgSW5kZXhlZERiLWNvbXBhdGlibGUgc3RyaW5nIGZvcm0uXG4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV9lbmNvZGVSZXNvdXJjZVBhdGgoZSkge1xuICAgIGxldCB0ID0gXCJcIjtcbiAgICBmb3IgKGxldCBuID0gMDsgbiA8IGUubGVuZ3RoOyBuKyspIHQubGVuZ3RoID4gMCAmJiAodCA9IF9fUFJJVkFURV9lbmNvZGVTZXBhcmF0b3IodCkpLCBcbiAgICB0ID0gX19QUklWQVRFX2VuY29kZVNlZ21lbnQoZS5nZXQobiksIHQpO1xuICAgIHJldHVybiBfX1BSSVZBVEVfZW5jb2RlU2VwYXJhdG9yKHQpO1xufVxuXG4vKiogRW5jb2RlcyBhIHNpbmdsZSBzZWdtZW50IG9mIGEgcmVzb3VyY2UgcGF0aCBpbnRvIHRoZSBnaXZlbiByZXN1bHQgKi8gZnVuY3Rpb24gX19QUklWQVRFX2VuY29kZVNlZ21lbnQoZSwgdCkge1xuICAgIGxldCBuID0gdDtcbiAgICBjb25zdCByID0gZS5sZW5ndGg7XG4gICAgZm9yIChsZXQgdCA9IDA7IHQgPCByOyB0KyspIHtcbiAgICAgICAgY29uc3QgciA9IGUuY2hhckF0KHQpO1xuICAgICAgICBzd2l0Y2ggKHIpIHtcbiAgICAgICAgICBjYXNlIFwiXFwwXCI6XG4gICAgICAgICAgICBuICs9IFwiXHUwMDAxXHUwMDEwXCI7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgXCJcdTAwMDFcIjpcbiAgICAgICAgICAgIG4gKz0gXCJcdTAwMDFcdTAwMTFcIjtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIG4gKz0gcjtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbjtcbn1cblxuLyoqIEVuY29kZXMgYSBwYXRoIHNlcGFyYXRvciBpbnRvIHRoZSBnaXZlbiByZXN1bHQgKi8gZnVuY3Rpb24gX19QUklWQVRFX2VuY29kZVNlcGFyYXRvcihlKSB7XG4gICAgcmV0dXJuIGUgKyBcIlx1MDAwMVx1MDAwMVwiO1xufVxuXG4vKipcbiAqIERlY29kZXMgdGhlIGdpdmVuIEluZGV4ZWREYi1jb21wYXRpYmxlIHN0cmluZyBmb3JtIG9mIGEgcmVzb3VyY2UgcGF0aCBpbnRvXG4gKiBhIFJlc291cmNlUGF0aCBpbnN0YW5jZS4gTm90ZSB0aGF0IHRoaXMgbWV0aG9kIGlzIG5vdCBzdWl0YWJsZSBmb3IgdXNlIHdpdGhcbiAqIGRlY29kaW5nIHJlc291cmNlIG5hbWVzIGZyb20gdGhlIHNlcnZlcjsgdGhvc2UgYXJlIE9uZSBQbGF0Zm9ybSBmb3JtYXRcbiAqIHN0cmluZ3MuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2RlY29kZVJlc291cmNlUGF0aChlKSB7XG4gICAgLy8gRXZlbnQgdGhlIGVtcHR5IHBhdGggbXVzdCBlbmNvZGUgYXMgYSBwYXRoIG9mIGF0IGxlYXN0IGxlbmd0aCAyLiBBIHBhdGhcbiAgICAvLyB3aXRoIGV4YWN0bHkgMiBtdXN0IGJlIHRoZSBlbXB0eSBwYXRoLlxuICAgIGNvbnN0IHQgPSBlLmxlbmd0aDtcbiAgICBpZiAoX19QUklWQVRFX2hhcmRBc3NlcnQodCA+PSAyKSwgMiA9PT0gdCkgcmV0dXJuIF9fUFJJVkFURV9oYXJkQXNzZXJ0KFwiXHUwMDAxXCIgPT09IGUuY2hhckF0KDApICYmIFwiXHUwMDAxXCIgPT09IGUuY2hhckF0KDEpKSwgXG4gICAgUmVzb3VyY2VQYXRoLmVtcHR5UGF0aCgpO1xuICAgIC8vIEVzY2FwZSBjaGFyYWN0ZXJzIGNhbm5vdCBleGlzdCBwYXN0IHRoZSBzZWNvbmQtdG8tbGFzdCBwb3NpdGlvbiBpbiB0aGVcbiAgICAvLyBzb3VyY2UgdmFsdWUuXG4gICAgICAgIGNvbnN0IF9fUFJJVkFURV9sYXN0UmVhc29uYWJsZUVzY2FwZUluZGV4ID0gdCAtIDIsIG4gPSBbXTtcbiAgICBsZXQgciA9IFwiXCI7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0OyApIHtcbiAgICAgICAgLy8gVGhlIGxhc3QgdHdvIGNoYXJhY3RlcnMgb2YgYSB2YWxpZCBlbmNvZGVkIHBhdGggbXVzdCBiZSBhIHNlcGFyYXRvciwgc29cbiAgICAgICAgLy8gdGhlcmUgbXVzdCBiZSBhbiBlbmQgdG8gdGhpcyBzZWdtZW50LlxuICAgICAgICBjb25zdCB0ID0gZS5pbmRleE9mKFwiXHUwMDAxXCIsIGkpO1xuICAgICAgICAodCA8IDAgfHwgdCA+IF9fUFJJVkFURV9sYXN0UmVhc29uYWJsZUVzY2FwZUluZGV4KSAmJiBmYWlsKCk7XG4gICAgICAgIHN3aXRjaCAoZS5jaGFyQXQodCArIDEpKSB7XG4gICAgICAgICAgY2FzZSBcIlx1MDAwMVwiOlxuICAgICAgICAgICAgY29uc3QgcyA9IGUuc3Vic3RyaW5nKGksIHQpO1xuICAgICAgICAgICAgbGV0IG87XG4gICAgICAgICAgICAwID09PSByLmxlbmd0aCA/IFxuICAgICAgICAgICAgLy8gQXZvaWQgY29weWluZyBmb3IgdGhlIGNvbW1vbiBjYXNlIG9mIGEgc2VnbWVudCB0aGF0IGV4Y2x1ZGVzIFxcMFxuICAgICAgICAgICAgLy8gYW5kIFxcMDAxXG4gICAgICAgICAgICBvID0gcyA6IChyICs9IHMsIG8gPSByLCByID0gXCJcIiksIG4ucHVzaChvKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBcIlx1MDAxMFwiOlxuICAgICAgICAgICAgciArPSBlLnN1YnN0cmluZyhpLCB0KSwgciArPSBcIlxcMFwiO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIFwiXHUwMDExXCI6XG4gICAgICAgICAgICAvLyBUaGUgZXNjYXBlIGNoYXJhY3RlciBjYW4gYmUgdXNlZCBpbiB0aGUgb3V0cHV0IHRvIGVuY29kZSBpdHNlbGYuXG4gICAgICAgICAgICByICs9IGUuc3Vic3RyaW5nKGksIHQgKyAxKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGZhaWwoKTtcbiAgICAgICAgfVxuICAgICAgICBpID0gdCArIDI7XG4gICAgfVxuICAgIHJldHVybiBuZXcgUmVzb3VyY2VQYXRoKG4pO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjb25zdCBNID0gWyBcInVzZXJJZFwiLCBcImJhdGNoSWRcIiBdO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBOYW1lIG9mIHRoZSBJbmRleGVkRGIgb2JqZWN0IHN0b3JlLlxuICpcbiAqIE5vdGUgdGhhdCB0aGUgbmFtZSAnb3duZXInIGlzIGNob3NlbiB0byBlbnN1cmUgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkgd2l0aFxuICogb2xkZXIgY2xpZW50cyB0aGF0IG9ubHkgc3VwcG9ydGVkIHNpbmdsZSBsb2NrZWQgYWNjZXNzIHRvIHRoZSBwZXJzaXN0ZW5jZVxuICogbGF5ZXIuXG4gKi9cbi8qKlxuICogQ3JlYXRlcyBhIFt1c2VySWQsIGVuY29kZWRQYXRoXSBrZXkgZm9yIHVzZSBpbiB0aGUgRGJEb2N1bWVudE11dGF0aW9uc1xuICogaW5kZXggdG8gaXRlcmF0ZSBvdmVyIGFsbCBhdCBkb2N1bWVudCBtdXRhdGlvbnMgZm9yIGEgZ2l2ZW4gcGF0aCBvciBsb3dlci5cbiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX25ld0RiRG9jdW1lbnRNdXRhdGlvblByZWZpeEZvclBhdGgoZSwgdCkge1xuICAgIHJldHVybiBbIGUsIF9fUFJJVkFURV9lbmNvZGVSZXNvdXJjZVBhdGgodCkgXTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgZnVsbCBpbmRleCBrZXkgb2YgW3VzZXJJZCwgZW5jb2RlZFBhdGgsIGJhdGNoSWRdIGZvciBpbnNlcnRpbmdcbiAqIGFuZCBkZWxldGluZyBpbnRvIHRoZSBEYkRvY3VtZW50TXV0YXRpb25zIGluZGV4LlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdEYkRvY3VtZW50TXV0YXRpb25LZXkoZSwgdCwgbikge1xuICAgIHJldHVybiBbIGUsIF9fUFJJVkFURV9lbmNvZGVSZXNvdXJjZVBhdGgodCksIG4gXTtcbn1cblxuLyoqXG4gKiBCZWNhdXNlIHdlIHN0b3JlIGFsbCB0aGUgdXNlZnVsIGluZm9ybWF0aW9uIGZvciB0aGlzIHN0b3JlIGluIHRoZSBrZXksXG4gKiB0aGVyZSBpcyBubyB1c2VmdWwgaW5mb3JtYXRpb24gdG8gc3RvcmUgYXMgdGhlIHZhbHVlLiBUaGUgcmF3ICh1bmVuY29kZWQpXG4gKiBwYXRoIGNhbm5vdCBiZSBzdG9yZWQgYmVjYXVzZSBJbmRleGVkRGIgZG9lc24ndCBzdG9yZSBwcm90b3R5cGVcbiAqIGluZm9ybWF0aW9uLlxuICovIGNvbnN0IHggPSB7fSwgTyA9IFsgXCJwcmVmaXhQYXRoXCIsIFwiY29sbGVjdGlvbkdyb3VwXCIsIFwicmVhZFRpbWVcIiwgXCJkb2N1bWVudElkXCIgXSwgTiA9IFsgXCJwcmVmaXhQYXRoXCIsIFwiY29sbGVjdGlvbkdyb3VwXCIsIFwiZG9jdW1lbnRJZFwiIF0sIEIgPSBbIFwiY29sbGVjdGlvbkdyb3VwXCIsIFwicmVhZFRpbWVcIiwgXCJwcmVmaXhQYXRoXCIsIFwiZG9jdW1lbnRJZFwiIF0sIEwgPSBbIFwiY2Fub25pY2FsSWRcIiwgXCJ0YXJnZXRJZFwiIF0sIGsgPSBbIFwidGFyZ2V0SWRcIiwgXCJwYXRoXCIgXSwgcSA9IFsgXCJwYXRoXCIsIFwidGFyZ2V0SWRcIiBdLCBRID0gWyBcImNvbGxlY3Rpb25JZFwiLCBcInBhcmVudFwiIF0sIEsgPSBbIFwiaW5kZXhJZFwiLCBcInVpZFwiIF0sICQgPSBbIFwidWlkXCIsIFwic2VxdWVuY2VOdW1iZXJcIiBdLCBVID0gWyBcImluZGV4SWRcIiwgXCJ1aWRcIiwgXCJhcnJheVZhbHVlXCIsIFwiZGlyZWN0aW9uYWxWYWx1ZVwiLCBcIm9yZGVyZWREb2N1bWVudEtleVwiLCBcImRvY3VtZW50S2V5XCIgXSwgVyA9IFsgXCJpbmRleElkXCIsIFwidWlkXCIsIFwib3JkZXJlZERvY3VtZW50S2V5XCIgXSwgRyA9IFsgXCJ1c2VySWRcIiwgXCJjb2xsZWN0aW9uUGF0aFwiLCBcImRvY3VtZW50SWRcIiBdLCB6ID0gWyBcInVzZXJJZFwiLCBcImNvbGxlY3Rpb25QYXRoXCIsIFwibGFyZ2VzdEJhdGNoSWRcIiBdLCBqID0gWyBcInVzZXJJZFwiLCBcImNvbGxlY3Rpb25Hcm91cFwiLCBcImxhcmdlc3RCYXRjaElkXCIgXSwgSCA9IFsgLi4uWyAuLi5bIC4uLlsgLi4uWyBcIm11dGF0aW9uUXVldWVzXCIsIFwibXV0YXRpb25zXCIsIFwiZG9jdW1lbnRNdXRhdGlvbnNcIiwgXCJyZW1vdGVEb2N1bWVudHNcIiwgXCJ0YXJnZXRzXCIsIFwib3duZXJcIiwgXCJ0YXJnZXRHbG9iYWxcIiwgXCJ0YXJnZXREb2N1bWVudHNcIiBdLCBcImNsaWVudE1ldGFkYXRhXCIgXSwgXCJyZW1vdGVEb2N1bWVudEdsb2JhbFwiIF0sIFwiY29sbGVjdGlvblBhcmVudHNcIiBdLCBcImJ1bmRsZXNcIiwgXCJuYW1lZFF1ZXJpZXNcIiBdLCBKID0gWyAuLi5ILCBcImRvY3VtZW50T3ZlcmxheXNcIiBdLCBZID0gWyBcIm11dGF0aW9uUXVldWVzXCIsIFwibXV0YXRpb25zXCIsIFwiZG9jdW1lbnRNdXRhdGlvbnNcIiwgXCJyZW1vdGVEb2N1bWVudHNWMTRcIiwgXCJ0YXJnZXRzXCIsIFwib3duZXJcIiwgXCJ0YXJnZXRHbG9iYWxcIiwgXCJ0YXJnZXREb2N1bWVudHNcIiwgXCJjbGllbnRNZXRhZGF0YVwiLCBcInJlbW90ZURvY3VtZW50R2xvYmFsXCIsIFwiY29sbGVjdGlvblBhcmVudHNcIiwgXCJidW5kbGVzXCIsIFwibmFtZWRRdWVyaWVzXCIsIFwiZG9jdW1lbnRPdmVybGF5c1wiIF0sIFogPSBZLCBYID0gWyAuLi5aLCBcImluZGV4Q29uZmlndXJhdGlvblwiLCBcImluZGV4U3RhdGVcIiwgXCJpbmRleEVudHJpZXNcIiBdO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY2xhc3MgX19QUklWQVRFX0luZGV4ZWREYlRyYW5zYWN0aW9uIGV4dGVuZHMgUGVyc2lzdGVuY2VUcmFuc2FjdGlvbiB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmFlID0gZSwgdGhpcy5jdXJyZW50U2VxdWVuY2VOdW1iZXIgPSB0O1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2dldFN0b3JlKGUsIHQpIHtcbiAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICByZXR1cm4gX19QUklWQVRFX1NpbXBsZURiLk0obi5hZSwgdCk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9vYmplY3RTaXplKGUpIHtcbiAgICBsZXQgdCA9IDA7XG4gICAgZm9yIChjb25zdCBuIGluIGUpIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLCBuKSAmJiB0Kys7XG4gICAgcmV0dXJuIHQ7XG59XG5cbmZ1bmN0aW9uIGZvckVhY2goZSwgdCkge1xuICAgIGZvciAoY29uc3QgbiBpbiBlKSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSwgbikgJiYgdChuLCBlW25dKTtcbn1cblxuZnVuY3Rpb24gaXNFbXB0eShlKSB7XG4gICAgZm9yIChjb25zdCB0IGluIGUpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSwgdCkpIHJldHVybiAhMTtcbiAgICByZXR1cm4gITA7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBBbiBpbW11dGFibGUgc29ydGVkIG1hcCBpbXBsZW1lbnRhdGlvbiwgYmFzZWQgb24gYSBMZWZ0LWxlYW5pbmcgUmVkLUJsYWNrXG4vLyB0cmVlLlxuY2xhc3MgU29ydGVkTWFwIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMuY29tcGFyYXRvciA9IGUsIHRoaXMucm9vdCA9IHQgfHwgTExSQk5vZGUuRU1QVFk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgYSBjb3B5IG9mIHRoZSBtYXAsIHdpdGggdGhlIHNwZWNpZmllZCBrZXkvdmFsdWUgYWRkZWQgb3IgcmVwbGFjZWQuXG4gICAgaW5zZXJ0KGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTb3J0ZWRNYXAodGhpcy5jb21wYXJhdG9yLCB0aGlzLnJvb3QuaW5zZXJ0KGUsIHQsIHRoaXMuY29tcGFyYXRvcikuY29weShudWxsLCBudWxsLCBMTFJCTm9kZS5CTEFDSywgbnVsbCwgbnVsbCkpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIGEgY29weSBvZiB0aGUgbWFwLCB3aXRoIHRoZSBzcGVjaWZpZWQga2V5IHJlbW92ZWQuXG4gICAgcmVtb3ZlKGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTb3J0ZWRNYXAodGhpcy5jb21wYXJhdG9yLCB0aGlzLnJvb3QucmVtb3ZlKGUsIHRoaXMuY29tcGFyYXRvcikuY29weShudWxsLCBudWxsLCBMTFJCTm9kZS5CTEFDSywgbnVsbCwgbnVsbCkpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIHRoZSB2YWx1ZSBvZiB0aGUgbm9kZSB3aXRoIHRoZSBnaXZlbiBrZXksIG9yIG51bGwuXG4gICAgZ2V0KGUpIHtcbiAgICAgICAgbGV0IHQgPSB0aGlzLnJvb3Q7XG4gICAgICAgIGZvciAoOyF0LmlzRW1wdHkoKTsgKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdGhpcy5jb21wYXJhdG9yKGUsIHQua2V5KTtcbiAgICAgICAgICAgIGlmICgwID09PSBuKSByZXR1cm4gdC52YWx1ZTtcbiAgICAgICAgICAgIG4gPCAwID8gdCA9IHQubGVmdCA6IG4gPiAwICYmICh0ID0gdC5yaWdodCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIC8vIFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBlbGVtZW50IGluIHRoaXMgc29ydGVkIG1hcCwgb3IgLTEgaWYgaXQgZG9lc24ndFxuICAgIC8vIGV4aXN0LlxuICAgIGluZGV4T2YoZSkge1xuICAgICAgICAvLyBOdW1iZXIgb2Ygbm9kZXMgdGhhdCB3ZXJlIHBydW5lZCB3aGVuIGRlc2NlbmRpbmcgcmlnaHRcbiAgICAgICAgbGV0IHQgPSAwLCBuID0gdGhpcy5yb290O1xuICAgICAgICBmb3IgKDshbi5pc0VtcHR5KCk7ICkge1xuICAgICAgICAgICAgY29uc3QgciA9IHRoaXMuY29tcGFyYXRvcihlLCBuLmtleSk7XG4gICAgICAgICAgICBpZiAoMCA9PT0gcikgcmV0dXJuIHQgKyBuLmxlZnQuc2l6ZTtcbiAgICAgICAgICAgIHIgPCAwID8gbiA9IG4ubGVmdCA6IChcbiAgICAgICAgICAgIC8vIENvdW50IGFsbCBub2RlcyBsZWZ0IG9mIHRoZSBub2RlIHBsdXMgdGhlIG5vZGUgaXRzZWxmXG4gICAgICAgICAgICB0ICs9IG4ubGVmdC5zaXplICsgMSwgbiA9IG4ucmlnaHQpO1xuICAgICAgICB9XG4gICAgICAgIC8vIE5vZGUgbm90IGZvdW5kXG4gICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgIH1cbiAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yb290LmlzRW1wdHkoKTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyB0aGUgdG90YWwgbnVtYmVyIG9mIG5vZGVzIGluIHRoZSBtYXAuXG4gICAgZ2V0IHNpemUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJvb3Quc2l6ZTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyB0aGUgbWluaW11bSBrZXkgaW4gdGhlIG1hcC5cbiAgICBtaW5LZXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJvb3QubWluS2V5KCk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgdGhlIG1heGltdW0ga2V5IGluIHRoZSBtYXAuXG4gICAgbWF4S2V5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yb290Lm1heEtleSgpO1xuICAgIH1cbiAgICAvLyBUcmF2ZXJzZXMgdGhlIG1hcCBpbiBrZXkgb3JkZXIgYW5kIGNhbGxzIHRoZSBzcGVjaWZpZWQgYWN0aW9uIGZ1bmN0aW9uXG4gICAgLy8gZm9yIGVhY2gga2V5L3ZhbHVlIHBhaXIuIElmIGFjdGlvbiByZXR1cm5zIHRydWUsIHRyYXZlcnNhbCBpcyBhYm9ydGVkLlxuICAgIC8vIFJldHVybnMgdGhlIGZpcnN0IHRydXRoeSB2YWx1ZSByZXR1cm5lZCBieSBhY3Rpb24sIG9yIHRoZSBsYXN0IGZhbHNleVxuICAgIC8vIHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbi5cbiAgICBpbm9yZGVyVHJhdmVyc2FsKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucm9vdC5pbm9yZGVyVHJhdmVyc2FsKGUpO1xuICAgIH1cbiAgICBmb3JFYWNoKGUpIHtcbiAgICAgICAgdGhpcy5pbm9yZGVyVHJhdmVyc2FsKCgodCwgbikgPT4gKGUodCwgbiksICExKSkpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5pbm9yZGVyVHJhdmVyc2FsKCgodCwgbikgPT4gKGUucHVzaChgJHt0fToke259YCksICExKSkpLCBgeyR7ZS5qb2luKFwiLCBcIil9fWA7XG4gICAgfVxuICAgIC8vIFRyYXZlcnNlcyB0aGUgbWFwIGluIHJldmVyc2Uga2V5IG9yZGVyIGFuZCBjYWxscyB0aGUgc3BlY2lmaWVkIGFjdGlvblxuICAgIC8vIGZ1bmN0aW9uIGZvciBlYWNoIGtleS92YWx1ZSBwYWlyLiBJZiBhY3Rpb24gcmV0dXJucyB0cnVlLCB0cmF2ZXJzYWwgaXNcbiAgICAvLyBhYm9ydGVkLlxuICAgIC8vIFJldHVybnMgdGhlIGZpcnN0IHRydXRoeSB2YWx1ZSByZXR1cm5lZCBieSBhY3Rpb24sIG9yIHRoZSBsYXN0IGZhbHNleVxuICAgIC8vIHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbi5cbiAgICByZXZlcnNlVHJhdmVyc2FsKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucm9vdC5yZXZlcnNlVHJhdmVyc2FsKGUpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIGFuIGl0ZXJhdG9yIG92ZXIgdGhlIFNvcnRlZE1hcC5cbiAgICBnZXRJdGVyYXRvcigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTb3J0ZWRNYXBJdGVyYXRvcih0aGlzLnJvb3QsIG51bGwsIHRoaXMuY29tcGFyYXRvciwgITEpO1xuICAgIH1cbiAgICBnZXRJdGVyYXRvckZyb20oZSkge1xuICAgICAgICByZXR1cm4gbmV3IFNvcnRlZE1hcEl0ZXJhdG9yKHRoaXMucm9vdCwgZSwgdGhpcy5jb21wYXJhdG9yLCAhMSk7XG4gICAgfVxuICAgIGdldFJldmVyc2VJdGVyYXRvcigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTb3J0ZWRNYXBJdGVyYXRvcih0aGlzLnJvb3QsIG51bGwsIHRoaXMuY29tcGFyYXRvciwgITApO1xuICAgIH1cbiAgICBnZXRSZXZlcnNlSXRlcmF0b3JGcm9tKGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTb3J0ZWRNYXBJdGVyYXRvcih0aGlzLnJvb3QsIGUsIHRoaXMuY29tcGFyYXRvciwgITApO1xuICAgIH1cbn1cblxuIC8vIGVuZCBTb3J0ZWRNYXBcbi8vIEFuIGl0ZXJhdG9yIG92ZXIgYW4gTExSQk5vZGUuXG5jbGFzcyBTb3J0ZWRNYXBJdGVyYXRvciB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbiwgcikge1xuICAgICAgICB0aGlzLmlzUmV2ZXJzZSA9IHIsIHRoaXMubm9kZVN0YWNrID0gW107XG4gICAgICAgIGxldCBpID0gMTtcbiAgICAgICAgZm9yICg7IWUuaXNFbXB0eSgpOyApIGlmIChpID0gdCA/IG4oZS5rZXksIHQpIDogMSwgXG4gICAgICAgIC8vIGZsaXAgdGhlIGNvbXBhcmlzb24gaWYgd2UncmUgZ29pbmcgaW4gcmV2ZXJzZVxuICAgICAgICB0ICYmIHIgJiYgKGkgKj0gLTEpLCBpIDwgMCkgXG4gICAgICAgIC8vIFRoaXMgbm9kZSBpcyBsZXNzIHRoYW4gb3VyIHN0YXJ0IGtleS4gaWdub3JlIGl0XG4gICAgICAgIGUgPSB0aGlzLmlzUmV2ZXJzZSA/IGUubGVmdCA6IGUucmlnaHQ7IGVsc2Uge1xuICAgICAgICAgICAgaWYgKDAgPT09IGkpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGlzIG5vZGUgaXMgZXhhY3RseSBlcXVhbCB0byBvdXIgc3RhcnQga2V5LiBQdXNoIGl0IG9uIHRoZSBzdGFjayxcbiAgICAgICAgICAgICAgICAvLyBidXQgc3RvcCBpdGVyYXRpbmc7XG4gICAgICAgICAgICAgICAgdGhpcy5ub2RlU3RhY2sucHVzaChlKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFRoaXMgbm9kZSBpcyBncmVhdGVyIHRoYW4gb3VyIHN0YXJ0IGtleSwgYWRkIGl0IHRvIHRoZSBzdGFjayBhbmQgbW92ZVxuICAgICAgICAgICAgLy8gdG8gdGhlIG5leHQgb25lXG4gICAgICAgICAgICB0aGlzLm5vZGVTdGFjay5wdXNoKGUpLCBlID0gdGhpcy5pc1JldmVyc2UgPyBlLnJpZ2h0IDogZS5sZWZ0O1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldE5leHQoKSB7XG4gICAgICAgIGxldCBlID0gdGhpcy5ub2RlU3RhY2sucG9wKCk7XG4gICAgICAgIGNvbnN0IHQgPSB7XG4gICAgICAgICAgICBrZXk6IGUua2V5LFxuICAgICAgICAgICAgdmFsdWU6IGUudmFsdWVcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRoaXMuaXNSZXZlcnNlKSBmb3IgKGUgPSBlLmxlZnQ7ICFlLmlzRW1wdHkoKTsgKSB0aGlzLm5vZGVTdGFjay5wdXNoKGUpLCBlID0gZS5yaWdodDsgZWxzZSBmb3IgKGUgPSBlLnJpZ2h0OyAhZS5pc0VtcHR5KCk7ICkgdGhpcy5ub2RlU3RhY2sucHVzaChlKSwgXG4gICAgICAgIGUgPSBlLmxlZnQ7XG4gICAgICAgIHJldHVybiB0O1xuICAgIH1cbiAgICBoYXNOZXh0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ub2RlU3RhY2subGVuZ3RoID4gMDtcbiAgICB9XG4gICAgcGVlaygpIHtcbiAgICAgICAgaWYgKDAgPT09IHRoaXMubm9kZVN0YWNrLmxlbmd0aCkgcmV0dXJuIG51bGw7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLm5vZGVTdGFja1t0aGlzLm5vZGVTdGFjay5sZW5ndGggLSAxXTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGtleTogZS5rZXksXG4gICAgICAgICAgICB2YWx1ZTogZS52YWx1ZVxuICAgICAgICB9O1xuICAgIH1cbn1cblxuIC8vIGVuZCBTb3J0ZWRNYXBJdGVyYXRvclxuLy8gUmVwcmVzZW50cyBhIG5vZGUgaW4gYSBMZWZ0LWxlYW5pbmcgUmVkLUJsYWNrIHRyZWUuXG5jbGFzcyBMTFJCTm9kZSB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbiwgciwgaSkge1xuICAgICAgICB0aGlzLmtleSA9IGUsIHRoaXMudmFsdWUgPSB0LCB0aGlzLmNvbG9yID0gbnVsbCAhPSBuID8gbiA6IExMUkJOb2RlLlJFRCwgdGhpcy5sZWZ0ID0gbnVsbCAhPSByID8gciA6IExMUkJOb2RlLkVNUFRZLCBcbiAgICAgICAgdGhpcy5yaWdodCA9IG51bGwgIT0gaSA/IGkgOiBMTFJCTm9kZS5FTVBUWSwgdGhpcy5zaXplID0gdGhpcy5sZWZ0LnNpemUgKyAxICsgdGhpcy5yaWdodC5zaXplO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIGEgY29weSBvZiB0aGUgY3VycmVudCBub2RlLCBvcHRpb25hbGx5IHJlcGxhY2luZyBwaWVjZXMgb2YgaXQuXG4gICAgY29weShlLCB0LCBuLCByLCBpKSB7XG4gICAgICAgIHJldHVybiBuZXcgTExSQk5vZGUobnVsbCAhPSBlID8gZSA6IHRoaXMua2V5LCBudWxsICE9IHQgPyB0IDogdGhpcy52YWx1ZSwgbnVsbCAhPSBuID8gbiA6IHRoaXMuY29sb3IsIG51bGwgIT0gciA/IHIgOiB0aGlzLmxlZnQsIG51bGwgIT0gaSA/IGkgOiB0aGlzLnJpZ2h0KTtcbiAgICB9XG4gICAgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgICAvLyBUcmF2ZXJzZXMgdGhlIHRyZWUgaW4ga2V5IG9yZGVyIGFuZCBjYWxscyB0aGUgc3BlY2lmaWVkIGFjdGlvbiBmdW5jdGlvblxuICAgIC8vIGZvciBlYWNoIG5vZGUuIElmIGFjdGlvbiByZXR1cm5zIHRydWUsIHRyYXZlcnNhbCBpcyBhYm9ydGVkLlxuICAgIC8vIFJldHVybnMgdGhlIGZpcnN0IHRydXRoeSB2YWx1ZSByZXR1cm5lZCBieSBhY3Rpb24sIG9yIHRoZSBsYXN0IGZhbHNleVxuICAgIC8vIHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbi5cbiAgICBpbm9yZGVyVHJhdmVyc2FsKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGVmdC5pbm9yZGVyVHJhdmVyc2FsKGUpIHx8IGUodGhpcy5rZXksIHRoaXMudmFsdWUpIHx8IHRoaXMucmlnaHQuaW5vcmRlclRyYXZlcnNhbChlKTtcbiAgICB9XG4gICAgLy8gVHJhdmVyc2VzIHRoZSB0cmVlIGluIHJldmVyc2Uga2V5IG9yZGVyIGFuZCBjYWxscyB0aGUgc3BlY2lmaWVkIGFjdGlvblxuICAgIC8vIGZ1bmN0aW9uIGZvciBlYWNoIG5vZGUuIElmIGFjdGlvbiByZXR1cm5zIHRydWUsIHRyYXZlcnNhbCBpcyBhYm9ydGVkLlxuICAgIC8vIFJldHVybnMgdGhlIGZpcnN0IHRydXRoeSB2YWx1ZSByZXR1cm5lZCBieSBhY3Rpb24sIG9yIHRoZSBsYXN0IGZhbHNleVxuICAgIC8vIHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbi5cbiAgICByZXZlcnNlVHJhdmVyc2FsKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmlnaHQucmV2ZXJzZVRyYXZlcnNhbChlKSB8fCBlKHRoaXMua2V5LCB0aGlzLnZhbHVlKSB8fCB0aGlzLmxlZnQucmV2ZXJzZVRyYXZlcnNhbChlKTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyB0aGUgbWluaW11bSBub2RlIGluIHRoZSB0cmVlLlxuICAgIG1pbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGVmdC5pc0VtcHR5KCkgPyB0aGlzIDogdGhpcy5sZWZ0Lm1pbigpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIHRoZSBtYXhpbXVtIGtleSBpbiB0aGUgdHJlZS5cbiAgICBtaW5LZXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1pbigpLmtleTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyB0aGUgbWF4aW11bSBrZXkgaW4gdGhlIHRyZWUuXG4gICAgbWF4S2V5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yaWdodC5pc0VtcHR5KCkgPyB0aGlzLmtleSA6IHRoaXMucmlnaHQubWF4S2V5KCk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgbmV3IHRyZWUsIHdpdGggdGhlIGtleS92YWx1ZSBhZGRlZC5cbiAgICBpbnNlcnQoZSwgdCwgbikge1xuICAgICAgICBsZXQgciA9IHRoaXM7XG4gICAgICAgIGNvbnN0IGkgPSBuKGUsIHIua2V5KTtcbiAgICAgICAgcmV0dXJuIHIgPSBpIDwgMCA/IHIuY29weShudWxsLCBudWxsLCBudWxsLCByLmxlZnQuaW5zZXJ0KGUsIHQsIG4pLCBudWxsKSA6IDAgPT09IGkgPyByLmNvcHkobnVsbCwgdCwgbnVsbCwgbnVsbCwgbnVsbCkgOiByLmNvcHkobnVsbCwgbnVsbCwgbnVsbCwgbnVsbCwgci5yaWdodC5pbnNlcnQoZSwgdCwgbikpLCBcbiAgICAgICAgci5maXhVcCgpO1xuICAgIH1cbiAgICByZW1vdmVNaW4oKSB7XG4gICAgICAgIGlmICh0aGlzLmxlZnQuaXNFbXB0eSgpKSByZXR1cm4gTExSQk5vZGUuRU1QVFk7XG4gICAgICAgIGxldCBlID0gdGhpcztcbiAgICAgICAgcmV0dXJuIGUubGVmdC5pc1JlZCgpIHx8IGUubGVmdC5sZWZ0LmlzUmVkKCkgfHwgKGUgPSBlLm1vdmVSZWRMZWZ0KCkpLCBlID0gZS5jb3B5KG51bGwsIG51bGwsIG51bGwsIGUubGVmdC5yZW1vdmVNaW4oKSwgbnVsbCksIFxuICAgICAgICBlLmZpeFVwKCk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgbmV3IHRyZWUsIHdpdGggdGhlIHNwZWNpZmllZCBpdGVtIHJlbW92ZWQuXG4gICAgcmVtb3ZlKGUsIHQpIHtcbiAgICAgICAgbGV0IG4sIHIgPSB0aGlzO1xuICAgICAgICBpZiAodChlLCByLmtleSkgPCAwKSByLmxlZnQuaXNFbXB0eSgpIHx8IHIubGVmdC5pc1JlZCgpIHx8IHIubGVmdC5sZWZ0LmlzUmVkKCkgfHwgKHIgPSByLm1vdmVSZWRMZWZ0KCkpLCBcbiAgICAgICAgciA9IHIuY29weShudWxsLCBudWxsLCBudWxsLCByLmxlZnQucmVtb3ZlKGUsIHQpLCBudWxsKTsgZWxzZSB7XG4gICAgICAgICAgICBpZiAoci5sZWZ0LmlzUmVkKCkgJiYgKHIgPSByLnJvdGF0ZVJpZ2h0KCkpLCByLnJpZ2h0LmlzRW1wdHkoKSB8fCByLnJpZ2h0LmlzUmVkKCkgfHwgci5yaWdodC5sZWZ0LmlzUmVkKCkgfHwgKHIgPSByLm1vdmVSZWRSaWdodCgpKSwgXG4gICAgICAgICAgICAwID09PSB0KGUsIHIua2V5KSkge1xuICAgICAgICAgICAgICAgIGlmIChyLnJpZ2h0LmlzRW1wdHkoKSkgcmV0dXJuIExMUkJOb2RlLkVNUFRZO1xuICAgICAgICAgICAgICAgIG4gPSByLnJpZ2h0Lm1pbigpLCByID0gci5jb3B5KG4ua2V5LCBuLnZhbHVlLCBudWxsLCBudWxsLCByLnJpZ2h0LnJlbW92ZU1pbigpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHIgPSByLmNvcHkobnVsbCwgbnVsbCwgbnVsbCwgbnVsbCwgci5yaWdodC5yZW1vdmUoZSwgdCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByLmZpeFVwKCk7XG4gICAgfVxuICAgIGlzUmVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb2xvcjtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBuZXcgdHJlZSBhZnRlciBwZXJmb3JtaW5nIGFueSBuZWVkZWQgcm90YXRpb25zLlxuICAgIGZpeFVwKCkge1xuICAgICAgICBsZXQgZSA9IHRoaXM7XG4gICAgICAgIHJldHVybiBlLnJpZ2h0LmlzUmVkKCkgJiYgIWUubGVmdC5pc1JlZCgpICYmIChlID0gZS5yb3RhdGVMZWZ0KCkpLCBlLmxlZnQuaXNSZWQoKSAmJiBlLmxlZnQubGVmdC5pc1JlZCgpICYmIChlID0gZS5yb3RhdGVSaWdodCgpKSwgXG4gICAgICAgIGUubGVmdC5pc1JlZCgpICYmIGUucmlnaHQuaXNSZWQoKSAmJiAoZSA9IGUuY29sb3JGbGlwKCkpLCBlO1xuICAgIH1cbiAgICBtb3ZlUmVkTGVmdCgpIHtcbiAgICAgICAgbGV0IGUgPSB0aGlzLmNvbG9yRmxpcCgpO1xuICAgICAgICByZXR1cm4gZS5yaWdodC5sZWZ0LmlzUmVkKCkgJiYgKGUgPSBlLmNvcHkobnVsbCwgbnVsbCwgbnVsbCwgbnVsbCwgZS5yaWdodC5yb3RhdGVSaWdodCgpKSwgXG4gICAgICAgIGUgPSBlLnJvdGF0ZUxlZnQoKSwgZSA9IGUuY29sb3JGbGlwKCkpLCBlO1xuICAgIH1cbiAgICBtb3ZlUmVkUmlnaHQoKSB7XG4gICAgICAgIGxldCBlID0gdGhpcy5jb2xvckZsaXAoKTtcbiAgICAgICAgcmV0dXJuIGUubGVmdC5sZWZ0LmlzUmVkKCkgJiYgKGUgPSBlLnJvdGF0ZVJpZ2h0KCksIGUgPSBlLmNvbG9yRmxpcCgpKSwgZTtcbiAgICB9XG4gICAgcm90YXRlTGVmdCgpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuY29weShudWxsLCBudWxsLCBMTFJCTm9kZS5SRUQsIG51bGwsIHRoaXMucmlnaHQubGVmdCk7XG4gICAgICAgIHJldHVybiB0aGlzLnJpZ2h0LmNvcHkobnVsbCwgbnVsbCwgdGhpcy5jb2xvciwgZSwgbnVsbCk7XG4gICAgfVxuICAgIHJvdGF0ZVJpZ2h0KCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5jb3B5KG51bGwsIG51bGwsIExMUkJOb2RlLlJFRCwgdGhpcy5sZWZ0LnJpZ2h0LCBudWxsKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubGVmdC5jb3B5KG51bGwsIG51bGwsIHRoaXMuY29sb3IsIG51bGwsIGUpO1xuICAgIH1cbiAgICBjb2xvckZsaXAoKSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmxlZnQuY29weShudWxsLCBudWxsLCAhdGhpcy5sZWZ0LmNvbG9yLCBudWxsLCBudWxsKSwgdCA9IHRoaXMucmlnaHQuY29weShudWxsLCBudWxsLCAhdGhpcy5yaWdodC5jb2xvciwgbnVsbCwgbnVsbCk7XG4gICAgICAgIHJldHVybiB0aGlzLmNvcHkobnVsbCwgbnVsbCwgIXRoaXMuY29sb3IsIGUsIHQpO1xuICAgIH1cbiAgICAvLyBGb3IgdGVzdGluZy5cbiAgICBjaGVja01heERlcHRoKCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5jaGVjaygpO1xuICAgICAgICByZXR1cm4gTWF0aC5wb3coMiwgZSkgPD0gdGhpcy5zaXplICsgMTtcbiAgICB9XG4gICAgLy8gSW4gYSBiYWxhbmNlZCBSQiB0cmVlLCB0aGUgYmxhY2stZGVwdGggKG51bWJlciBvZiBibGFjayBub2RlcykgZnJvbSByb290IHRvXG4gICAgLy8gbGVhdmVzIGlzIGVxdWFsIG9uIGJvdGggc2lkZXMuICBUaGlzIGZ1bmN0aW9uIHZlcmlmaWVzIHRoYXQgb3IgYXNzZXJ0cy5cbiAgICBjaGVjaygpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNSZWQoKSAmJiB0aGlzLmxlZnQuaXNSZWQoKSkgdGhyb3cgZmFpbCgpO1xuICAgICAgICBpZiAodGhpcy5yaWdodC5pc1JlZCgpKSB0aHJvdyBmYWlsKCk7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmxlZnQuY2hlY2soKTtcbiAgICAgICAgaWYgKGUgIT09IHRoaXMucmlnaHQuY2hlY2soKSkgdGhyb3cgZmFpbCgpO1xuICAgICAgICByZXR1cm4gZSArICh0aGlzLmlzUmVkKCkgPyAwIDogMSk7XG4gICAgfVxufVxuXG4gLy8gZW5kIExMUkJOb2RlXG4vLyBFbXB0eSBub2RlIGlzIHNoYXJlZCBiZXR3ZWVuIGFsbCBMTFJCIHRyZWVzLlxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbkxMUkJOb2RlLkVNUFRZID0gbnVsbCwgTExSQk5vZGUuUkVEID0gITAsIExMUkJOb2RlLkJMQUNLID0gITE7XG5cbi8vIGVuZCBMTFJCRW1wdHlOb2RlXG5MTFJCTm9kZS5FTVBUWSA9IG5ldyBcbi8vIFJlcHJlc2VudHMgYW4gZW1wdHkgbm9kZSAoYSBsZWFmIG5vZGUgaW4gdGhlIFJlZC1CbGFjayBUcmVlKS5cbmNsYXNzIExMUkJFbXB0eU5vZGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnNpemUgPSAwO1xuICAgIH1cbiAgICBnZXQga2V5KCkge1xuICAgICAgICB0aHJvdyBmYWlsKCk7XG4gICAgfVxuICAgIGdldCB2YWx1ZSgpIHtcbiAgICAgICAgdGhyb3cgZmFpbCgpO1xuICAgIH1cbiAgICBnZXQgY29sb3IoKSB7XG4gICAgICAgIHRocm93IGZhaWwoKTtcbiAgICB9XG4gICAgZ2V0IGxlZnQoKSB7XG4gICAgICAgIHRocm93IGZhaWwoKTtcbiAgICB9XG4gICAgZ2V0IHJpZ2h0KCkge1xuICAgICAgICB0aHJvdyBmYWlsKCk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgYSBjb3B5IG9mIHRoZSBjdXJyZW50IG5vZGUuXG4gICAgY29weShlLCB0LCBuLCByLCBpKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIGEgY29weSBvZiB0aGUgdHJlZSwgd2l0aCB0aGUgc3BlY2lmaWVkIGtleS92YWx1ZSBhZGRlZC5cbiAgICBpbnNlcnQoZSwgdCwgbikge1xuICAgICAgICByZXR1cm4gbmV3IExMUkJOb2RlKGUsIHQpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIGEgY29weSBvZiB0aGUgdHJlZSwgd2l0aCB0aGUgc3BlY2lmaWVkIGtleSByZW1vdmVkLlxuICAgIHJlbW92ZShlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxuICAgIGlub3JkZXJUcmF2ZXJzYWwoZSkge1xuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxuICAgIHJldmVyc2VUcmF2ZXJzYWwoZSkge1xuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxuICAgIG1pbktleSgpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIG1heEtleSgpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGlzUmVkKCkge1xuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxuICAgIC8vIEZvciB0ZXN0aW5nLlxuICAgIGNoZWNrTWF4RGVwdGgoKSB7XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG4gICAgY2hlY2soKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbn07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFNvcnRlZFNldCBpcyBhbiBpbW11dGFibGUgKGNvcHktb24td3JpdGUpIGNvbGxlY3Rpb24gdGhhdCBob2xkcyBlbGVtZW50c1xuICogaW4gb3JkZXIgc3BlY2lmaWVkIGJ5IHRoZSBwcm92aWRlZCBjb21wYXJhdG9yLlxuICpcbiAqIE5PVEU6IGlmIHByb3ZpZGVkIGNvbXBhcmF0b3IgcmV0dXJucyAwIGZvciB0d28gZWxlbWVudHMsIHdlIGNvbnNpZGVyIHRoZW0gdG9cbiAqIGJlIGVxdWFsIVxuICovXG5jbGFzcyBTb3J0ZWRTZXQge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5jb21wYXJhdG9yID0gZSwgdGhpcy5kYXRhID0gbmV3IFNvcnRlZE1hcCh0aGlzLmNvbXBhcmF0b3IpO1xuICAgIH1cbiAgICBoYXMoZSkge1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gdGhpcy5kYXRhLmdldChlKTtcbiAgICB9XG4gICAgZmlyc3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEubWluS2V5KCk7XG4gICAgfVxuICAgIGxhc3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEubWF4S2V5KCk7XG4gICAgfVxuICAgIGdldCBzaXplKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLnNpemU7XG4gICAgfVxuICAgIGluZGV4T2YoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLmluZGV4T2YoZSk7XG4gICAgfVxuICAgIC8qKiBJdGVyYXRlcyBlbGVtZW50cyBpbiBvcmRlciBkZWZpbmVkIGJ5IFwiY29tcGFyYXRvclwiICovICAgIGZvckVhY2goZSkge1xuICAgICAgICB0aGlzLmRhdGEuaW5vcmRlclRyYXZlcnNhbCgoKHQsIG4pID0+IChlKHQpLCAhMSkpKTtcbiAgICB9XG4gICAgLyoqIEl0ZXJhdGVzIG92ZXIgYGVsZW1gcyBzdWNoIHRoYXQ6IHJhbmdlWzBdICZsdDs9IGVsZW0gJmx0OyByYW5nZVsxXS4gKi8gICAgZm9yRWFjaEluUmFuZ2UoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5kYXRhLmdldEl0ZXJhdG9yRnJvbShlWzBdKTtcbiAgICAgICAgZm9yICg7bi5oYXNOZXh0KCk7ICkge1xuICAgICAgICAgICAgY29uc3QgciA9IG4uZ2V0TmV4dCgpO1xuICAgICAgICAgICAgaWYgKHRoaXMuY29tcGFyYXRvcihyLmtleSwgZVsxXSkgPj0gMCkgcmV0dXJuO1xuICAgICAgICAgICAgdChyLmtleSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogSXRlcmF0ZXMgb3ZlciBgZWxlbWBzIHN1Y2ggdGhhdDogc3RhcnQgJmx0Oz0gZWxlbSB1bnRpbCBmYWxzZSBpcyByZXR1cm5lZC5cbiAgICAgKi8gICAgZm9yRWFjaFdoaWxlKGUsIHQpIHtcbiAgICAgICAgbGV0IG47XG4gICAgICAgIGZvciAobiA9IHZvaWQgMCAhPT0gdCA/IHRoaXMuZGF0YS5nZXRJdGVyYXRvckZyb20odCkgOiB0aGlzLmRhdGEuZ2V0SXRlcmF0b3IoKTsgbi5oYXNOZXh0KCk7ICkge1xuICAgICAgICAgICAgaWYgKCFlKG4uZ2V0TmV4dCgpLmtleSkpIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKiogRmluZHMgdGhlIGxlYXN0IGVsZW1lbnQgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIGBlbGVtYC4gKi8gICAgZmlyc3RBZnRlck9yRXF1YWwoZSkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5kYXRhLmdldEl0ZXJhdG9yRnJvbShlKTtcbiAgICAgICAgcmV0dXJuIHQuaGFzTmV4dCgpID8gdC5nZXROZXh0KCkua2V5IDogbnVsbDtcbiAgICB9XG4gICAgZ2V0SXRlcmF0b3IoKSB7XG4gICAgICAgIHJldHVybiBuZXcgU29ydGVkU2V0SXRlcmF0b3IodGhpcy5kYXRhLmdldEl0ZXJhdG9yKCkpO1xuICAgIH1cbiAgICBnZXRJdGVyYXRvckZyb20oZSkge1xuICAgICAgICByZXR1cm4gbmV3IFNvcnRlZFNldEl0ZXJhdG9yKHRoaXMuZGF0YS5nZXRJdGVyYXRvckZyb20oZSkpO1xuICAgIH1cbiAgICAvKiogSW5zZXJ0cyBvciB1cGRhdGVzIGFuIGVsZW1lbnQgKi8gICAgYWRkKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29weSh0aGlzLmRhdGEucmVtb3ZlKGUpLmluc2VydChlLCAhMCkpO1xuICAgIH1cbiAgICAvKiogRGVsZXRlcyBhbiBlbGVtZW50ICovICAgIGRlbGV0ZShlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhhcyhlKSA/IHRoaXMuY29weSh0aGlzLmRhdGEucmVtb3ZlKGUpKSA6IHRoaXM7XG4gICAgfVxuICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEuaXNFbXB0eSgpO1xuICAgIH1cbiAgICB1bmlvbldpdGgoZSkge1xuICAgICAgICBsZXQgdCA9IHRoaXM7XG4gICAgICAgIC8vIE1ha2Ugc3VyZSBgcmVzdWx0YCBhbHdheXMgcmVmZXJzIHRvIHRoZSBsYXJnZXIgb25lIG9mIHRoZSB0d28gc2V0cy5cbiAgICAgICAgICAgICAgICByZXR1cm4gdC5zaXplIDwgZS5zaXplICYmICh0ID0gZSwgZSA9IHRoaXMpLCBlLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgdCA9IHQuYWRkKGUpO1xuICAgICAgICB9KSksIHQ7XG4gICAgfVxuICAgIGlzRXF1YWwoZSkge1xuICAgICAgICBpZiAoIShlIGluc3RhbmNlb2YgU29ydGVkU2V0KSkgcmV0dXJuICExO1xuICAgICAgICBpZiAodGhpcy5zaXplICE9PSBlLnNpemUpIHJldHVybiAhMTtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuZGF0YS5nZXRJdGVyYXRvcigpLCBuID0gZS5kYXRhLmdldEl0ZXJhdG9yKCk7XG4gICAgICAgIGZvciAoO3QuaGFzTmV4dCgpOyApIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0LmdldE5leHQoKS5rZXksIHIgPSBuLmdldE5leHQoKS5rZXk7XG4gICAgICAgICAgICBpZiAoMCAhPT0gdGhpcy5jb21wYXJhdG9yKGUsIHIpKSByZXR1cm4gITE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbiAgICB0b0FycmF5KCkge1xuICAgICAgICBjb25zdCBlID0gW107XG4gICAgICAgIHJldHVybiB0aGlzLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgZS5wdXNoKHQpO1xuICAgICAgICB9KSksIGU7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICBjb25zdCBlID0gW107XG4gICAgICAgIHJldHVybiB0aGlzLmZvckVhY2goKHQgPT4gZS5wdXNoKHQpKSksIFwiU29ydGVkU2V0KFwiICsgZS50b1N0cmluZygpICsgXCIpXCI7XG4gICAgfVxuICAgIGNvcHkoZSkge1xuICAgICAgICBjb25zdCB0ID0gbmV3IFNvcnRlZFNldCh0aGlzLmNvbXBhcmF0b3IpO1xuICAgICAgICByZXR1cm4gdC5kYXRhID0gZSwgdDtcbiAgICB9XG59XG5cbmNsYXNzIFNvcnRlZFNldEl0ZXJhdG9yIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMuaXRlciA9IGU7XG4gICAgfVxuICAgIGdldE5leHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLml0ZXIuZ2V0TmV4dCgpLmtleTtcbiAgICB9XG4gICAgaGFzTmV4dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXRlci5oYXNOZXh0KCk7XG4gICAgfVxufVxuXG4vKipcbiAqIENvbXBhcmVzIHR3byBzb3J0ZWQgc2V0cyBmb3IgZXF1YWxpdHkgdXNpbmcgdGhlaXIgbmF0dXJhbCBvcmRlcmluZy4gVGhlXG4gKiBtZXRob2QgY29tcHV0ZXMgdGhlIGludGVyc2VjdGlvbiBhbmQgaW52b2tlcyBgb25BZGRgIGZvciBldmVyeSBlbGVtZW50IHRoYXRcbiAqIGlzIGluIGBhZnRlcmAgYnV0IG5vdCBgYmVmb3JlYC4gYG9uUmVtb3ZlYCBpcyBpbnZva2VkIGZvciBldmVyeSBlbGVtZW50IGluXG4gKiBgYmVmb3JlYCBidXQgbWlzc2luZyBmcm9tIGBhZnRlcmAuXG4gKlxuICogVGhlIG1ldGhvZCBjcmVhdGVzIGEgY29weSBvZiBib3RoIGBiZWZvcmVgIGFuZCBgYWZ0ZXJgIGFuZCBydW5zIGluIE8obiBsb2dcbiAqIG4pLCB3aGVyZSBuIGlzIHRoZSBzaXplIG9mIHRoZSB0d28gbGlzdHMuXG4gKlxuICogQHBhcmFtIGJlZm9yZSAtIFRoZSBlbGVtZW50cyB0aGF0IGV4aXN0IGluIHRoZSBvcmlnaW5hbCBzZXQuXG4gKiBAcGFyYW0gYWZ0ZXIgLSBUaGUgZWxlbWVudHMgdG8gZGlmZiBhZ2FpbnN0IHRoZSBvcmlnaW5hbCBzZXQuXG4gKiBAcGFyYW0gY29tcGFyYXRvciAtIFRoZSBjb21wYXJhdG9yIGZvciB0aGUgZWxlbWVudHMgaW4gYmVmb3JlIGFuZCBhZnRlci5cbiAqIEBwYXJhbSBvbkFkZCAtIEEgZnVuY3Rpb24gdG8gaW52b2tlIGZvciBldmVyeSBlbGVtZW50IHRoYXQgaXMgcGFydCBvZiBgXG4gKiBhZnRlcmAgYnV0IG5vdCBgYmVmb3JlYC5cbiAqIEBwYXJhbSBvblJlbW92ZSAtIEEgZnVuY3Rpb24gdG8gaW52b2tlIGZvciBldmVyeSBlbGVtZW50IHRoYXQgaXMgcGFydCBvZlxuICogYGJlZm9yZWAgYnV0IG5vdCBgYWZ0ZXJgLlxuICovXG4vKipcbiAqIFJldHVybnMgdGhlIG5leHQgZWxlbWVudCBmcm9tIHRoZSBpdGVyYXRvciBvciBgdW5kZWZpbmVkYCBpZiBub25lIGF2YWlsYWJsZS5cbiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX2FkdmFuY2VJdGVyYXRvcihlKSB7XG4gICAgcmV0dXJuIGUuaGFzTmV4dCgpID8gZS5nZXROZXh0KCkgOiB2b2lkIDA7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFByb3ZpZGVzIGEgc2V0IG9mIGZpZWxkcyB0aGF0IGNhbiBiZSB1c2VkIHRvIHBhcnRpYWxseSBwYXRjaCBhIGRvY3VtZW50LlxuICogRmllbGRNYXNrIGlzIHVzZWQgaW4gY29uanVuY3Rpb24gd2l0aCBPYmplY3RWYWx1ZS5cbiAqIEV4YW1wbGVzOlxuICogICBmb28gLSBPdmVyd3JpdGVzIGZvbyBlbnRpcmVseSB3aXRoIHRoZSBwcm92aWRlZCB2YWx1ZS4gSWYgZm9vIGlzIG5vdFxuICogICAgICAgICBwcmVzZW50IGluIHRoZSBjb21wYW5pb24gT2JqZWN0VmFsdWUsIHRoZSBmaWVsZCBpcyBkZWxldGVkLlxuICogICBmb28uYmFyIC0gT3ZlcndyaXRlcyBvbmx5IHRoZSBmaWVsZCBiYXIgb2YgdGhlIG9iamVjdCBmb28uXG4gKiAgICAgICAgICAgICBJZiBmb28gaXMgbm90IGFuIG9iamVjdCwgZm9vIGlzIHJlcGxhY2VkIHdpdGggYW4gb2JqZWN0XG4gKiAgICAgICAgICAgICBjb250YWluaW5nIGZvb1xuICovIGNsYXNzIEZpZWxkTWFzayB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLmZpZWxkcyA9IGUsIFxuICAgICAgICAvLyBUT0RPKGRpbW9uZCk6IHZhbGlkYXRpb24gb2YgRmllbGRNYXNrXG4gICAgICAgIC8vIFNvcnQgdGhlIGZpZWxkIG1hc2sgdG8gc3VwcG9ydCBgRmllbGRNYXNrLmlzRXF1YWwoKWAgYW5kIGFzc2VydCBiZWxvdy5cbiAgICAgICAgZS5zb3J0KEZpZWxkUGF0aCQxLmNvbXBhcmF0b3IpO1xuICAgIH1cbiAgICBzdGF0aWMgZW1wdHkoKSB7XG4gICAgICAgIHJldHVybiBuZXcgRmllbGRNYXNrKFtdKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIG5ldyBGaWVsZE1hc2sgb2JqZWN0IHRoYXQgaXMgdGhlIHJlc3VsdCBvZiBhZGRpbmcgYWxsIHRoZSBnaXZlblxuICAgICAqIGZpZWxkcyBwYXRocyB0byB0aGlzIGZpZWxkIG1hc2suXG4gICAgICovICAgIHVuaW9uV2l0aChlKSB7XG4gICAgICAgIGxldCB0ID0gbmV3IFNvcnRlZFNldChGaWVsZFBhdGgkMS5jb21wYXJhdG9yKTtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHRoaXMuZmllbGRzKSB0ID0gdC5hZGQoZSk7XG4gICAgICAgIGZvciAoY29uc3QgbiBvZiBlKSB0ID0gdC5hZGQobik7XG4gICAgICAgIHJldHVybiBuZXcgRmllbGRNYXNrKHQudG9BcnJheSgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVmVyaWZpZXMgdGhhdCBgZmllbGRQYXRoYCBpcyBpbmNsdWRlZCBieSBhdCBsZWFzdCBvbmUgZmllbGQgaW4gdGhpcyBmaWVsZFxuICAgICAqIG1hc2suXG4gICAgICpcbiAgICAgKiBUaGlzIGlzIGFuIE8obikgb3BlcmF0aW9uLCB3aGVyZSBgbmAgaXMgdGhlIHNpemUgb2YgdGhlIGZpZWxkIG1hc2suXG4gICAgICovICAgIGNvdmVycyhlKSB7XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiB0aGlzLmZpZWxkcykgaWYgKHQuaXNQcmVmaXhPZihlKSkgcmV0dXJuICEwO1xuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxuICAgIGlzRXF1YWwoZSkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX2FycmF5RXF1YWxzKHRoaXMuZmllbGRzLCBlLmZpZWxkcywgKChlLCB0KSA9PiBlLmlzRXF1YWwodCkpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFuIGVycm9yIGVuY291bnRlcmVkIHdoaWxlIGRlY29kaW5nIGJhc2U2NCBzdHJpbmcuXG4gKi8gY2xhc3MgX19QUklWQVRFX0Jhc2U2NERlY29kZUVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpLCB0aGlzLm5hbWUgPSBcIkJhc2U2NERlY29kZUVycm9yXCI7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIENvbnZlcnRzIGEgQmFzZTY0IGVuY29kZWQgc3RyaW5nIHRvIGEgYmluYXJ5IHN0cmluZy4gKi9cbi8qKiBUcnVlIGlmIGFuZCBvbmx5IGlmIHRoZSBCYXNlNjQgY29udmVyc2lvbiBmdW5jdGlvbnMgYXJlIGF2YWlsYWJsZS4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV9pc0Jhc2U2NEF2YWlsYWJsZSgpIHtcbiAgICByZXR1cm4gXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgYXRvYjtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogSW1tdXRhYmxlIGNsYXNzIHRoYXQgcmVwcmVzZW50cyBhIFwicHJvdG9cIiBieXRlIHN0cmluZy5cbiAqXG4gKiBQcm90byBieXRlIHN0cmluZ3MgY2FuIGVpdGhlciBiZSBCYXNlNjQtZW5jb2RlZCBzdHJpbmdzIG9yIFVpbnQ4QXJyYXlzIHdoZW5cbiAqIHNlbnQgb24gdGhlIHdpcmUuIFRoaXMgY2xhc3MgYWJzdHJhY3RzIGF3YXkgdGhpcyBkaWZmZXJlbnRpYXRpb24gYnkgaG9sZGluZ1xuICogdGhlIHByb3RvIGJ5dGUgc3RyaW5nIGluIGEgY29tbW9uIGNsYXNzIHRoYXQgbXVzdCBiZSBjb252ZXJ0ZWQgaW50byBhIHN0cmluZ1xuICogYmVmb3JlIGJlaW5nIHNlbnQgYXMgYSBwcm90by5cbiAqIEBpbnRlcm5hbFxuICovIGNsYXNzIEJ5dGVTdHJpbmcge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5iaW5hcnlTdHJpbmcgPSBlO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbUJhc2U2NFN0cmluZyhlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBmdW5jdGlvbiBfX1BSSVZBVEVfZGVjb2RlQmFzZTY0KGUpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF0b2IoZSk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgdGhhdCBgRE9NRXhjZXB0aW9uYCBpcyBkZWZpbmVkIGJlZm9yZSB1c2luZyBpdCB0byBhdm9pZFxuICAgICAgICAgICAgICAgIC8vIFwiUmVmZXJlbmNlRXJyb3I6IFByb3BlcnR5ICdET01FeGNlcHRpb24nIGRvZXNuJ3QgZXhpc3RcIiBpbiByZWFjdC1uYXRpdmUuXG4gICAgICAgICAgICAgICAgLy8gKGh0dHBzOi8vZ2l0aHViLmNvbS9maXJlYmFzZS9maXJlYmFzZS1qcy1zZGsvaXNzdWVzLzcxMTUpXG4gICAgICAgICAgICAgICAgdGhyb3cgXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgRE9NRXhjZXB0aW9uICYmIGUgaW5zdGFuY2VvZiBET01FeGNlcHRpb24gPyBuZXcgX19QUklWQVRFX0Jhc2U2NERlY29kZUVycm9yKFwiSW52YWxpZCBiYXNlNjQgc3RyaW5nOiBcIiArIGUpIDogZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvKiogQ29udmVydHMgYSBiaW5hcnkgc3RyaW5nIHRvIGEgQmFzZTY0IGVuY29kZWQgc3RyaW5nLiAqLyAoZSk7XG4gICAgICAgIHJldHVybiBuZXcgQnl0ZVN0cmluZyh0KTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21VaW50OEFycmF5KGUpIHtcbiAgICAgICAgLy8gVE9ETyhpbmRleGluZyk7IFJlbW92ZSB0aGUgY29weSBvZiB0aGUgYnl0ZSBzdHJpbmcgaGVyZSBhcyB0aGlzIG1ldGhvZFxuICAgICAgICAvLyBpcyBmcmVxdWVudGx5IGNhbGxlZCBkdXJpbmcgaW5kZXhpbmcuXG4gICAgICAgIGNvbnN0IHQgPSBcbiAgICAgICAgLyoqXG4gKiBIZWxwZXIgZnVuY3Rpb24gdG8gY29udmVydCBhbiBVaW50OGFycmF5IHRvIGEgYmluYXJ5IHN0cmluZy5cbiAqL1xuICAgICAgICBmdW5jdGlvbiBfX1BSSVZBVEVfYmluYXJ5U3RyaW5nRnJvbVVpbnQ4QXJyYXkoZSkge1xuICAgICAgICAgICAgbGV0IHQgPSBcIlwiO1xuICAgICAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCBlLmxlbmd0aDsgKytuKSB0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoZVtuXSk7XG4gICAgICAgICAgICByZXR1cm4gdDtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIEhlbHBlciBmdW5jdGlvbiB0byBjb252ZXJ0IGEgYmluYXJ5IHN0cmluZyB0byBhbiBVaW50OEFycmF5LlxuICovIChlKTtcbiAgICAgICAgcmV0dXJuIG5ldyBCeXRlU3RyaW5nKHQpO1xuICAgIH1cbiAgICBbU3ltYm9sLml0ZXJhdG9yXSgpIHtcbiAgICAgICAgbGV0IGUgPSAwO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmV4dDogKCkgPT4gZSA8IHRoaXMuYmluYXJ5U3RyaW5nLmxlbmd0aCA/IHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5iaW5hcnlTdHJpbmcuY2hhckNvZGVBdChlKyspLFxuICAgICAgICAgICAgICAgIGRvbmU6ICExXG4gICAgICAgICAgICB9IDoge1xuICAgICAgICAgICAgICAgIHZhbHVlOiB2b2lkIDAsXG4gICAgICAgICAgICAgICAgZG9uZTogITBcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgdG9CYXNlNjQoKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfZW5jb2RlQmFzZTY0KGUpIHtcbiAgICAgICAgICAgIHJldHVybiBidG9hKGUpO1xuICAgICAgICB9KHRoaXMuYmluYXJ5U3RyaW5nKTtcbiAgICB9XG4gICAgdG9VaW50OEFycmF5KCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX3VpbnQ4QXJyYXlGcm9tQmluYXJ5U3RyaW5nKGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBuZXcgVWludDhBcnJheShlLmxlbmd0aCk7XG4gICAgICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IGUubGVuZ3RoOyBuKyspIHRbbl0gPSBlLmNoYXJDb2RlQXQobik7XG4gICAgICAgICAgICByZXR1cm4gdDtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuICAgICAgICAvLyBBIFJlZ0V4cCBtYXRjaGluZyBJU08gODYwMSBVVEMgdGltZXN0YW1wcyB3aXRoIG9wdGlvbmFsIGZyYWN0aW9uLlxuICAgICAgICAodGhpcy5iaW5hcnlTdHJpbmcpO1xuICAgIH1cbiAgICBhcHByb3hpbWF0ZUJ5dGVTaXplKCkge1xuICAgICAgICByZXR1cm4gMiAqIHRoaXMuYmluYXJ5U3RyaW5nLmxlbmd0aDtcbiAgICB9XG4gICAgY29tcGFyZVRvKGUpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKHRoaXMuYmluYXJ5U3RyaW5nLCBlLmJpbmFyeVN0cmluZyk7XG4gICAgfVxuICAgIGlzRXF1YWwoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5iaW5hcnlTdHJpbmcgPT09IGUuYmluYXJ5U3RyaW5nO1xuICAgIH1cbn1cblxuQnl0ZVN0cmluZy5FTVBUWV9CWVRFX1NUUklORyA9IG5ldyBCeXRlU3RyaW5nKFwiXCIpO1xuXG5jb25zdCBlZSA9IG5ldyBSZWdFeHAoL15cXGR7NH0tXFxkXFxkLVxcZFxcZFRcXGRcXGQ6XFxkXFxkOlxcZFxcZCg/OlxcLihcXGQrKSk/WiQvKTtcblxuLyoqXG4gKiBDb252ZXJ0cyB0aGUgcG9zc2libGUgUHJvdG8gdmFsdWVzIGZvciBhIHRpbWVzdGFtcCB2YWx1ZSBpbnRvIGEgXCJzZWNvbmRzIGFuZFxuICogbmFub3NcIiByZXByZXNlbnRhdGlvbi5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfbm9ybWFsaXplVGltZXN0YW1wKGUpIHtcbiAgICAvLyBUaGUganNvbiBpbnRlcmZhY2UgKGZvciB0aGUgYnJvd3Nlcikgd2lsbCByZXR1cm4gYW4gaXNvIHRpbWVzdGFtcCBzdHJpbmcsXG4gICAgLy8gd2hpbGUgdGhlIHByb3RvIGpzIGxpYnJhcnkgKGZvciBub2RlKSB3aWxsIHJldHVybiBhXG4gICAgLy8gZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcCBpbnN0YW5jZS5cbiAgICBpZiAoX19QUklWQVRFX2hhcmRBc3NlcnQoISFlKSwgXCJzdHJpbmdcIiA9PSB0eXBlb2YgZSkge1xuICAgICAgICAvLyBUaGUgZGF0ZSBzdHJpbmcgY2FuIGhhdmUgaGlnaGVyIHByZWNpc2lvbiAobmFub3MpIHRoYW4gdGhlIERhdGUgY2xhc3NcbiAgICAgICAgLy8gKG1pbGxpcyksIHNvIHdlIGRvIHNvbWUgY3VzdG9tIHBhcnNpbmcgaGVyZS5cbiAgICAgICAgLy8gUGFyc2UgdGhlIG5hbm9zIHJpZ2h0IG91dCBvZiB0aGUgc3RyaW5nLlxuICAgICAgICBsZXQgdCA9IDA7XG4gICAgICAgIGNvbnN0IG4gPSBlZS5leGVjKGUpO1xuICAgICAgICBpZiAoX19QUklWQVRFX2hhcmRBc3NlcnQoISFuKSwgblsxXSkge1xuICAgICAgICAgICAgLy8gUGFkIHRoZSBmcmFjdGlvbiBvdXQgdG8gOSBkaWdpdHMgKG5hbm9zKS5cbiAgICAgICAgICAgIGxldCBlID0gblsxXTtcbiAgICAgICAgICAgIGUgPSAoZSArIFwiMDAwMDAwMDAwXCIpLnN1YnN0cigwLCA5KSwgdCA9IE51bWJlcihlKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBQYXJzZSB0aGUgZGF0ZSB0byBnZXQgdGhlIHNlY29uZHMuXG4gICAgICAgICAgICAgICAgY29uc3QgciA9IG5ldyBEYXRlKGUpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc2Vjb25kczogTWF0aC5mbG9vcihyLmdldFRpbWUoKSAvIDFlMyksXG4gICAgICAgICAgICBuYW5vczogdFxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBzZWNvbmRzOiBfX1BSSVZBVEVfbm9ybWFsaXplTnVtYmVyKGUuc2Vjb25kcyksXG4gICAgICAgIG5hbm9zOiBfX1BSSVZBVEVfbm9ybWFsaXplTnVtYmVyKGUubmFub3MpXG4gICAgfTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyB0aGUgcG9zc2libGUgUHJvdG8gdHlwZXMgZm9yIG51bWJlcnMgaW50byBhIEphdmFTY3JpcHQgbnVtYmVyLlxuICogUmV0dXJucyAwIGlmIHRoZSB2YWx1ZSBpcyBub3QgbnVtZXJpYy5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfbm9ybWFsaXplTnVtYmVyKGUpIHtcbiAgICAvLyBUT0RPKGJqb3JuaWNrKTogSGFuZGxlIGludDY0IGdyZWF0ZXIgdGhhbiA1MyBiaXRzLlxuICAgIHJldHVybiBcIm51bWJlclwiID09IHR5cGVvZiBlID8gZSA6IFwic3RyaW5nXCIgPT0gdHlwZW9mIGUgPyBOdW1iZXIoZSkgOiAwO1xufVxuXG4vKiogQ29udmVydHMgdGhlIHBvc3NpYmxlIFByb3RvIHR5cGVzIGZvciBCbG9icyBpbnRvIGEgQnl0ZVN0cmluZy4gKi8gZnVuY3Rpb24gX19QUklWQVRFX25vcm1hbGl6ZUJ5dGVTdHJpbmcoZSkge1xuICAgIHJldHVybiBcInN0cmluZ1wiID09IHR5cGVvZiBlID8gQnl0ZVN0cmluZy5mcm9tQmFzZTY0U3RyaW5nKGUpIDogQnl0ZVN0cmluZy5mcm9tVWludDhBcnJheShlKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmVwcmVzZW50cyBhIGxvY2FsbHktYXBwbGllZCBTZXJ2ZXJUaW1lc3RhbXAuXG4gKlxuICogU2VydmVyIFRpbWVzdGFtcHMgYXJlIGJhY2tlZCBieSBNYXBWYWx1ZXMgdGhhdCBjb250YWluIGFuIGludGVybmFsIGZpZWxkXG4gKiBgX190eXBlX19gIHdpdGggYSB2YWx1ZSBvZiBgc2VydmVyX3RpbWVzdGFtcGAuIFRoZSBwcmV2aW91cyB2YWx1ZSBhbmQgbG9jYWxcbiAqIHdyaXRlIHRpbWUgYXJlIHN0b3JlZCBpbiBpdHMgYF9fcHJldmlvdXNfdmFsdWVfX2AgYW5kIGBfX2xvY2FsX3dyaXRlX3RpbWVfX2BcbiAqIGZpZWxkcyByZXNwZWN0aXZlbHkuXG4gKlxuICogTm90ZXM6XG4gKiAtIFNlcnZlclRpbWVzdGFtcFZhbHVlIGluc3RhbmNlcyBhcmUgY3JlYXRlZCBhcyB0aGUgcmVzdWx0IG9mIGFwcGx5aW5nIGFcbiAqICAgdHJhbnNmb3JtLiBUaGV5IGNhbiBvbmx5IGV4aXN0IGluIHRoZSBsb2NhbCB2aWV3IG9mIGEgZG9jdW1lbnQuIFRoZXJlZm9yZVxuICogICB0aGV5IGRvIG5vdCBuZWVkIHRvIGJlIHBhcnNlZCBvciBzZXJpYWxpemVkLlxuICogLSBXaGVuIGV2YWx1YXRlZCBsb2NhbGx5IChlLmcuIGZvciBzbmFwc2hvdC5kYXRhKCkpLCB0aGV5IGJ5IGRlZmF1bHRcbiAqICAgZXZhbHVhdGUgdG8gYG51bGxgLiBUaGlzIGJlaGF2aW9yIGNhbiBiZSBjb25maWd1cmVkIGJ5IHBhc3NpbmcgY3VzdG9tXG4gKiAgIEZpZWxkVmFsdWVPcHRpb25zIHRvIHZhbHVlKCkuXG4gKiAtIFdpdGggcmVzcGVjdCB0byBvdGhlciBTZXJ2ZXJUaW1lc3RhbXBWYWx1ZXMsIHRoZXkgc29ydCBieSB0aGVpclxuICogICBsb2NhbFdyaXRlVGltZS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfaXNTZXJ2ZXJUaW1lc3RhbXAoZSkge1xuICAgIHZhciB0LCBuO1xuICAgIHJldHVybiBcInNlcnZlcl90aW1lc3RhbXBcIiA9PT0gKG51bGwgPT09IChuID0gKChudWxsID09PSAodCA9IG51bGwgPT0gZSA/IHZvaWQgMCA6IGUubWFwVmFsdWUpIHx8IHZvaWQgMCA9PT0gdCA/IHZvaWQgMCA6IHQuZmllbGRzKSB8fCB7fSkuX190eXBlX18pIHx8IHZvaWQgMCA9PT0gbiA/IHZvaWQgMCA6IG4uc3RyaW5nVmFsdWUpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgU2VydmVyVGltZXN0YW1wIHByb3RvIHZhbHVlICh1c2luZyB0aGUgaW50ZXJuYWwgZm9ybWF0KS5cbiAqL1xuLyoqXG4gKiBSZXR1cm5zIHRoZSB2YWx1ZSBvZiB0aGUgZmllbGQgYmVmb3JlIHRoaXMgU2VydmVyVGltZXN0YW1wIHdhcyBzZXQuXG4gKlxuICogUHJlc2VydmluZyB0aGUgcHJldmlvdXMgdmFsdWVzIGFsbG93cyB0aGUgdXNlciB0byBkaXNwbGF5IHRoZSBsYXN0IHJlc29sZWRcbiAqIHZhbHVlIHVudGlsIHRoZSBiYWNrZW5kIHJlc3BvbmRzIHdpdGggdGhlIHRpbWVzdGFtcC5cbiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX2dldFByZXZpb3VzVmFsdWUoZSkge1xuICAgIGNvbnN0IHQgPSBlLm1hcFZhbHVlLmZpZWxkcy5fX3ByZXZpb3VzX3ZhbHVlX187XG4gICAgcmV0dXJuIF9fUFJJVkFURV9pc1NlcnZlclRpbWVzdGFtcCh0KSA/IF9fUFJJVkFURV9nZXRQcmV2aW91c1ZhbHVlKHQpIDogdDtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBsb2NhbCB0aW1lIGF0IHdoaWNoIHRoaXMgdGltZXN0YW1wIHdhcyBmaXJzdCBzZXQuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2dldExvY2FsV3JpdGVUaW1lKGUpIHtcbiAgICBjb25zdCB0ID0gX19QUklWQVRFX25vcm1hbGl6ZVRpbWVzdGFtcChlLm1hcFZhbHVlLmZpZWxkcy5fX2xvY2FsX3dyaXRlX3RpbWVfXy50aW1lc3RhbXBWYWx1ZSk7XG4gICAgcmV0dXJuIG5ldyBUaW1lc3RhbXAodC5zZWNvbmRzLCB0Lm5hbm9zKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgRGF0YWJhc2VJbmZvIHtcbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3RzIGEgRGF0YWJhc2VJbmZvIHVzaW5nIHRoZSBwcm92aWRlZCBob3N0LCBkYXRhYmFzZUlkIGFuZFxuICAgICAqIHBlcnNpc3RlbmNlS2V5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGRhdGFiYXNlSWQgLSBUaGUgZGF0YWJhc2UgdG8gdXNlLlxuICAgICAqIEBwYXJhbSBhcHBJZCAtIFRoZSBGaXJlYmFzZSBBcHAgSWQuXG4gICAgICogQHBhcmFtIHBlcnNpc3RlbmNlS2V5IC0gQSB1bmlxdWUgaWRlbnRpZmllciBmb3IgdGhpcyBGaXJlc3RvcmUncyBsb2NhbFxuICAgICAqIHN0b3JhZ2UgKHVzZWQgaW4gY29uanVuY3Rpb24gd2l0aCB0aGUgZGF0YWJhc2VJZCkuXG4gICAgICogQHBhcmFtIGhvc3QgLSBUaGUgRmlyZXN0b3JlIGJhY2tlbmQgaG9zdCB0byBjb25uZWN0IHRvLlxuICAgICAqIEBwYXJhbSBzc2wgLSBXaGV0aGVyIHRvIHVzZSBTU0wgd2hlbiBjb25uZWN0aW5nLlxuICAgICAqIEBwYXJhbSBmb3JjZUxvbmdQb2xsaW5nIC0gV2hldGhlciB0byB1c2UgdGhlIGZvcmNlTG9uZ1BvbGxpbmcgb3B0aW9uXG4gICAgICogd2hlbiB1c2luZyBXZWJDaGFubmVsIGFzIHRoZSBuZXR3b3JrIHRyYW5zcG9ydC5cbiAgICAgKiBAcGFyYW0gYXV0b0RldGVjdExvbmdQb2xsaW5nIC0gV2hldGhlciB0byB1c2UgdGhlIGRldGVjdEJ1ZmZlcmluZ1Byb3h5XG4gICAgICogb3B0aW9uIHdoZW4gdXNpbmcgV2ViQ2hhbm5lbCBhcyB0aGUgbmV0d29yayB0cmFuc3BvcnQuXG4gICAgICogQHBhcmFtIGxvbmdQb2xsaW5nT3B0aW9ucyBPcHRpb25zIHRoYXQgY29uZmlndXJlIGxvbmctcG9sbGluZy5cbiAgICAgKiBAcGFyYW0gdXNlRmV0Y2hTdHJlYW1zIFdoZXRoZXIgdG8gdXNlIHRoZSBGZXRjaCBBUEkgaW5zdGVhZCBvZlxuICAgICAqIFhNTEhUVFBSZXF1ZXN0XG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZSwgdCwgbiwgciwgaSwgcywgbywgXywgYSkge1xuICAgICAgICB0aGlzLmRhdGFiYXNlSWQgPSBlLCB0aGlzLmFwcElkID0gdCwgdGhpcy5wZXJzaXN0ZW5jZUtleSA9IG4sIHRoaXMuaG9zdCA9IHIsIHRoaXMuc3NsID0gaSwgXG4gICAgICAgIHRoaXMuZm9yY2VMb25nUG9sbGluZyA9IHMsIHRoaXMuYXV0b0RldGVjdExvbmdQb2xsaW5nID0gbywgdGhpcy5sb25nUG9sbGluZ09wdGlvbnMgPSBfLCBcbiAgICAgICAgdGhpcy51c2VGZXRjaFN0cmVhbXMgPSBhO1xuICAgIH1cbn1cblxuLyoqIFRoZSBkZWZhdWx0IGRhdGFiYXNlIG5hbWUgZm9yIGEgcHJvamVjdC4gKi9cbi8qKlxuICogUmVwcmVzZW50cyB0aGUgZGF0YWJhc2UgSUQgYSBGaXJlc3RvcmUgY2xpZW50IGlzIGFzc29jaWF0ZWQgd2l0aC5cbiAqIEBpbnRlcm5hbFxuICovXG5jbGFzcyBEYXRhYmFzZUlkIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMucHJvamVjdElkID0gZSwgdGhpcy5kYXRhYmFzZSA9IHQgfHwgXCIoZGVmYXVsdClcIjtcbiAgICB9XG4gICAgc3RhdGljIGVtcHR5KCkge1xuICAgICAgICByZXR1cm4gbmV3IERhdGFiYXNlSWQoXCJcIiwgXCJcIik7XG4gICAgfVxuICAgIGdldCBpc0RlZmF1bHREYXRhYmFzZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiKGRlZmF1bHQpXCIgPT09IHRoaXMuZGF0YWJhc2U7XG4gICAgfVxuICAgIGlzRXF1YWwoZSkge1xuICAgICAgICByZXR1cm4gZSBpbnN0YW5jZW9mIERhdGFiYXNlSWQgJiYgZS5wcm9qZWN0SWQgPT09IHRoaXMucHJvamVjdElkICYmIGUuZGF0YWJhc2UgPT09IHRoaXMuZGF0YWJhc2U7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY29uc3QgdGUgPSB7XG4gICAgbWFwVmFsdWU6IHtcbiAgICAgICAgZmllbGRzOiB7XG4gICAgICAgICAgICBfX3R5cGVfXzoge1xuICAgICAgICAgICAgICAgIHN0cmluZ1ZhbHVlOiBcIl9fbWF4X19cIlxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufSwgbmUgPSB7XG4gICAgbnVsbFZhbHVlOiBcIk5VTExfVkFMVUVcIlxufTtcblxuLyoqIEV4dHJhY3RzIHRoZSBiYWNrZW5kJ3MgdHlwZSBvcmRlciBmb3IgdGhlIHByb3ZpZGVkIHZhbHVlLiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX3R5cGVPcmRlcihlKSB7XG4gICAgcmV0dXJuIFwibnVsbFZhbHVlXCIgaW4gZSA/IDAgLyogVHlwZU9yZGVyLk51bGxWYWx1ZSAqLyA6IFwiYm9vbGVhblZhbHVlXCIgaW4gZSA/IDEgLyogVHlwZU9yZGVyLkJvb2xlYW5WYWx1ZSAqLyA6IFwiaW50ZWdlclZhbHVlXCIgaW4gZSB8fCBcImRvdWJsZVZhbHVlXCIgaW4gZSA/IDIgLyogVHlwZU9yZGVyLk51bWJlclZhbHVlICovIDogXCJ0aW1lc3RhbXBWYWx1ZVwiIGluIGUgPyAzIC8qIFR5cGVPcmRlci5UaW1lc3RhbXBWYWx1ZSAqLyA6IFwic3RyaW5nVmFsdWVcIiBpbiBlID8gNSAvKiBUeXBlT3JkZXIuU3RyaW5nVmFsdWUgKi8gOiBcImJ5dGVzVmFsdWVcIiBpbiBlID8gNiAvKiBUeXBlT3JkZXIuQmxvYlZhbHVlICovIDogXCJyZWZlcmVuY2VWYWx1ZVwiIGluIGUgPyA3IC8qIFR5cGVPcmRlci5SZWZWYWx1ZSAqLyA6IFwiZ2VvUG9pbnRWYWx1ZVwiIGluIGUgPyA4IC8qIFR5cGVPcmRlci5HZW9Qb2ludFZhbHVlICovIDogXCJhcnJheVZhbHVlXCIgaW4gZSA/IDkgLyogVHlwZU9yZGVyLkFycmF5VmFsdWUgKi8gOiBcIm1hcFZhbHVlXCIgaW4gZSA/IF9fUFJJVkFURV9pc1NlcnZlclRpbWVzdGFtcChlKSA/IDQgLyogVHlwZU9yZGVyLlNlcnZlclRpbWVzdGFtcFZhbHVlICovIDogX19QUklWQVRFX2lzTWF4VmFsdWUoZSkgPyA5MDA3MTk5MjU0NzQwOTkxIC8qIFR5cGVPcmRlci5NYXhWYWx1ZSAqLyA6IDEwIC8qIFR5cGVPcmRlci5PYmplY3RWYWx1ZSAqLyA6IGZhaWwoKTtcbn1cblxuLyoqIFRlc3RzIGBsZWZ0YCBhbmQgYHJpZ2h0YCBmb3IgZXF1YWxpdHkgYmFzZWQgb24gdGhlIGJhY2tlbmQgc2VtYW50aWNzLiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfdmFsdWVFcXVhbHMoZSwgdCkge1xuICAgIGlmIChlID09PSB0KSByZXR1cm4gITA7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV90eXBlT3JkZXIoZSk7XG4gICAgaWYgKG4gIT09IF9fUFJJVkFURV90eXBlT3JkZXIodCkpIHJldHVybiAhMTtcbiAgICBzd2l0Y2ggKG4pIHtcbiAgICAgIGNhc2UgMCAvKiBUeXBlT3JkZXIuTnVsbFZhbHVlICovIDpcbiAgICAgIGNhc2UgOTAwNzE5OTI1NDc0MDk5MSAvKiBUeXBlT3JkZXIuTWF4VmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gITA7XG5cbiAgICAgIGNhc2UgMSAvKiBUeXBlT3JkZXIuQm9vbGVhblZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGUuYm9vbGVhblZhbHVlID09PSB0LmJvb2xlYW5WYWx1ZTtcblxuICAgICAgY2FzZSA0IC8qIFR5cGVPcmRlci5TZXJ2ZXJUaW1lc3RhbXBWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfZ2V0TG9jYWxXcml0ZVRpbWUoZSkuaXNFcXVhbChfX1BSSVZBVEVfZ2V0TG9jYWxXcml0ZVRpbWUodCkpO1xuXG4gICAgICBjYXNlIDMgLyogVHlwZU9yZGVyLlRpbWVzdGFtcFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV90aW1lc3RhbXBFcXVhbHMoZSwgdCkge1xuICAgICAgICAgICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIGUudGltZXN0YW1wVmFsdWUgJiYgXCJzdHJpbmdcIiA9PSB0eXBlb2YgdC50aW1lc3RhbXBWYWx1ZSAmJiBlLnRpbWVzdGFtcFZhbHVlLmxlbmd0aCA9PT0gdC50aW1lc3RhbXBWYWx1ZS5sZW5ndGgpIFxuICAgICAgICAgICAgLy8gVXNlIHN0cmluZyBlcXVhbGl0eSBmb3IgSVNPIDg2MDEgdGltZXN0YW1wc1xuICAgICAgICAgICAgcmV0dXJuIGUudGltZXN0YW1wVmFsdWUgPT09IHQudGltZXN0YW1wVmFsdWU7XG4gICAgICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX25vcm1hbGl6ZVRpbWVzdGFtcChlLnRpbWVzdGFtcFZhbHVlKSwgciA9IF9fUFJJVkFURV9ub3JtYWxpemVUaW1lc3RhbXAodC50aW1lc3RhbXBWYWx1ZSk7XG4gICAgICAgICAgICByZXR1cm4gbi5zZWNvbmRzID09PSByLnNlY29uZHMgJiYgbi5uYW5vcyA9PT0gci5uYW5vcztcbiAgICAgICAgfShlLCB0KTtcblxuICAgICAgY2FzZSA1IC8qIFR5cGVPcmRlci5TdHJpbmdWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBlLnN0cmluZ1ZhbHVlID09PSB0LnN0cmluZ1ZhbHVlO1xuXG4gICAgICBjYXNlIDYgLyogVHlwZU9yZGVyLkJsb2JWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfYmxvYkVxdWFscyhlLCB0KSB7XG4gICAgICAgICAgICByZXR1cm4gX19QUklWQVRFX25vcm1hbGl6ZUJ5dGVTdHJpbmcoZS5ieXRlc1ZhbHVlKS5pc0VxdWFsKF9fUFJJVkFURV9ub3JtYWxpemVCeXRlU3RyaW5nKHQuYnl0ZXNWYWx1ZSkpO1xuICAgICAgICB9KGUsIHQpO1xuXG4gICAgICBjYXNlIDcgLyogVHlwZU9yZGVyLlJlZlZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGUucmVmZXJlbmNlVmFsdWUgPT09IHQucmVmZXJlbmNlVmFsdWU7XG5cbiAgICAgIGNhc2UgOCAvKiBUeXBlT3JkZXIuR2VvUG9pbnRWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfZ2VvUG9pbnRFcXVhbHMoZSwgdCkge1xuICAgICAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9ub3JtYWxpemVOdW1iZXIoZS5nZW9Qb2ludFZhbHVlLmxhdGl0dWRlKSA9PT0gX19QUklWQVRFX25vcm1hbGl6ZU51bWJlcih0Lmdlb1BvaW50VmFsdWUubGF0aXR1ZGUpICYmIF9fUFJJVkFURV9ub3JtYWxpemVOdW1iZXIoZS5nZW9Qb2ludFZhbHVlLmxvbmdpdHVkZSkgPT09IF9fUFJJVkFURV9ub3JtYWxpemVOdW1iZXIodC5nZW9Qb2ludFZhbHVlLmxvbmdpdHVkZSk7XG4gICAgICAgIH0oZSwgdCk7XG5cbiAgICAgIGNhc2UgMiAvKiBUeXBlT3JkZXIuTnVtYmVyVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX251bWJlckVxdWFscyhlLCB0KSB7XG4gICAgICAgICAgICBpZiAoXCJpbnRlZ2VyVmFsdWVcIiBpbiBlICYmIFwiaW50ZWdlclZhbHVlXCIgaW4gdCkgcmV0dXJuIF9fUFJJVkFURV9ub3JtYWxpemVOdW1iZXIoZS5pbnRlZ2VyVmFsdWUpID09PSBfX1BSSVZBVEVfbm9ybWFsaXplTnVtYmVyKHQuaW50ZWdlclZhbHVlKTtcbiAgICAgICAgICAgIGlmIChcImRvdWJsZVZhbHVlXCIgaW4gZSAmJiBcImRvdWJsZVZhbHVlXCIgaW4gdCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfbm9ybWFsaXplTnVtYmVyKGUuZG91YmxlVmFsdWUpLCByID0gX19QUklWQVRFX25vcm1hbGl6ZU51bWJlcih0LmRvdWJsZVZhbHVlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbiA9PT0gciA/IF9fUFJJVkFURV9pc05lZ2F0aXZlWmVybyhuKSA9PT0gX19QUklWQVRFX2lzTmVnYXRpdmVaZXJvKHIpIDogaXNOYU4obikgJiYgaXNOYU4ocik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gITE7XG4gICAgICAgIH0oZSwgdCk7XG5cbiAgICAgIGNhc2UgOSAvKiBUeXBlT3JkZXIuQXJyYXlWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfYXJyYXlFcXVhbHMoZS5hcnJheVZhbHVlLnZhbHVlcyB8fCBbXSwgdC5hcnJheVZhbHVlLnZhbHVlcyB8fCBbXSwgX19QUklWQVRFX3ZhbHVlRXF1YWxzKTtcblxuICAgICAgY2FzZSAxMCAvKiBUeXBlT3JkZXIuT2JqZWN0VmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX29iamVjdEVxdWFscyhlLCB0KSB7XG4gICAgICAgICAgICBjb25zdCBuID0gZS5tYXBWYWx1ZS5maWVsZHMgfHwge30sIHIgPSB0Lm1hcFZhbHVlLmZpZWxkcyB8fCB7fTtcbiAgICAgICAgICAgIGlmIChfX1BSSVZBVEVfb2JqZWN0U2l6ZShuKSAhPT0gX19QUklWQVRFX29iamVjdFNpemUocikpIHJldHVybiAhMTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZSBpbiBuKSBpZiAobi5oYXNPd25Qcm9wZXJ0eShlKSAmJiAodm9pZCAwID09PSByW2VdIHx8ICFfX1BSSVZBVEVfdmFsdWVFcXVhbHMobltlXSwgcltlXSkpKSByZXR1cm4gITE7XG4gICAgICAgICAgICByZXR1cm4gITA7XG4gICAgICAgIH1cbiAgICAgICAgLyoqIFJldHVybnMgdHJ1ZSBpZiB0aGUgQXJyYXlWYWx1ZSBjb250YWlucyB0aGUgc3BlY2lmaWVkIGVsZW1lbnQuICovIChlLCB0KTtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGZhaWwoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9hcnJheVZhbHVlQ29udGFpbnMoZSwgdCkge1xuICAgIHJldHVybiB2b2lkIDAgIT09IChlLnZhbHVlcyB8fCBbXSkuZmluZCgoZSA9PiBfX1BSSVZBVEVfdmFsdWVFcXVhbHMoZSwgdCkpKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3ZhbHVlQ29tcGFyZShlLCB0KSB7XG4gICAgaWYgKGUgPT09IHQpIHJldHVybiAwO1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfdHlwZU9yZGVyKGUpLCByID0gX19QUklWQVRFX3R5cGVPcmRlcih0KTtcbiAgICBpZiAobiAhPT0gcikgcmV0dXJuIF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKG4sIHIpO1xuICAgIHN3aXRjaCAobikge1xuICAgICAgY2FzZSAwIC8qIFR5cGVPcmRlci5OdWxsVmFsdWUgKi8gOlxuICAgICAgY2FzZSA5MDA3MTk5MjU0NzQwOTkxIC8qIFR5cGVPcmRlci5NYXhWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiAwO1xuXG4gICAgICBjYXNlIDEgLyogVHlwZU9yZGVyLkJvb2xlYW5WYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcihlLmJvb2xlYW5WYWx1ZSwgdC5ib29sZWFuVmFsdWUpO1xuXG4gICAgICBjYXNlIDIgLyogVHlwZU9yZGVyLk51bWJlclZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9jb21wYXJlTnVtYmVycyhlLCB0KSB7XG4gICAgICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX25vcm1hbGl6ZU51bWJlcihlLmludGVnZXJWYWx1ZSB8fCBlLmRvdWJsZVZhbHVlKSwgciA9IF9fUFJJVkFURV9ub3JtYWxpemVOdW1iZXIodC5pbnRlZ2VyVmFsdWUgfHwgdC5kb3VibGVWYWx1ZSk7XG4gICAgICAgICAgICByZXR1cm4gbiA8IHIgPyAtMSA6IG4gPiByID8gMSA6IG4gPT09IHIgPyAwIDogXG4gICAgICAgICAgICAvLyBvbmUgb3IgYm90aCBhcmUgTmFOLlxuICAgICAgICAgICAgaXNOYU4obikgPyBpc05hTihyKSA/IDAgOiAtMSA6IDE7XG4gICAgICAgIH0oZSwgdCk7XG5cbiAgICAgIGNhc2UgMyAvKiBUeXBlT3JkZXIuVGltZXN0YW1wVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gX19QUklWQVRFX2NvbXBhcmVUaW1lc3RhbXBzKGUudGltZXN0YW1wVmFsdWUsIHQudGltZXN0YW1wVmFsdWUpO1xuXG4gICAgICBjYXNlIDQgLyogVHlwZU9yZGVyLlNlcnZlclRpbWVzdGFtcFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9jb21wYXJlVGltZXN0YW1wcyhfX1BSSVZBVEVfZ2V0TG9jYWxXcml0ZVRpbWUoZSksIF9fUFJJVkFURV9nZXRMb2NhbFdyaXRlVGltZSh0KSk7XG5cbiAgICAgIGNhc2UgNSAvKiBUeXBlT3JkZXIuU3RyaW5nVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IoZS5zdHJpbmdWYWx1ZSwgdC5zdHJpbmdWYWx1ZSk7XG5cbiAgICAgIGNhc2UgNiAvKiBUeXBlT3JkZXIuQmxvYlZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9jb21wYXJlQmxvYnMoZSwgdCkge1xuICAgICAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9ub3JtYWxpemVCeXRlU3RyaW5nKGUpLCByID0gX19QUklWQVRFX25vcm1hbGl6ZUJ5dGVTdHJpbmcodCk7XG4gICAgICAgICAgICByZXR1cm4gbi5jb21wYXJlVG8ocik7XG4gICAgICAgIH0oZS5ieXRlc1ZhbHVlLCB0LmJ5dGVzVmFsdWUpO1xuXG4gICAgICBjYXNlIDcgLyogVHlwZU9yZGVyLlJlZlZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9jb21wYXJlUmVmZXJlbmNlcyhlLCB0KSB7XG4gICAgICAgICAgICBjb25zdCBuID0gZS5zcGxpdChcIi9cIiksIHIgPSB0LnNwbGl0KFwiL1wiKTtcbiAgICAgICAgICAgIGZvciAobGV0IGUgPSAwOyBlIDwgbi5sZW5ndGggJiYgZSA8IHIubGVuZ3RoOyBlKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IobltlXSwgcltlXSk7XG4gICAgICAgICAgICAgICAgaWYgKDAgIT09IHQpIHJldHVybiB0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKG4ubGVuZ3RoLCByLmxlbmd0aCk7XG4gICAgICAgIH0oZS5yZWZlcmVuY2VWYWx1ZSwgdC5yZWZlcmVuY2VWYWx1ZSk7XG5cbiAgICAgIGNhc2UgOCAvKiBUeXBlT3JkZXIuR2VvUG9pbnRWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfY29tcGFyZUdlb1BvaW50cyhlLCB0KSB7XG4gICAgICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IoX19QUklWQVRFX25vcm1hbGl6ZU51bWJlcihlLmxhdGl0dWRlKSwgX19QUklWQVRFX25vcm1hbGl6ZU51bWJlcih0LmxhdGl0dWRlKSk7XG4gICAgICAgICAgICBpZiAoMCAhPT0gbikgcmV0dXJuIG47XG4gICAgICAgICAgICByZXR1cm4gX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IoX19QUklWQVRFX25vcm1hbGl6ZU51bWJlcihlLmxvbmdpdHVkZSksIF9fUFJJVkFURV9ub3JtYWxpemVOdW1iZXIodC5sb25naXR1ZGUpKTtcbiAgICAgICAgfShlLmdlb1BvaW50VmFsdWUsIHQuZ2VvUG9pbnRWYWx1ZSk7XG5cbiAgICAgIGNhc2UgOSAvKiBUeXBlT3JkZXIuQXJyYXlWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfY29tcGFyZUFycmF5cyhlLCB0KSB7XG4gICAgICAgICAgICBjb25zdCBuID0gZS52YWx1ZXMgfHwgW10sIHIgPSB0LnZhbHVlcyB8fCBbXTtcbiAgICAgICAgICAgIGZvciAobGV0IGUgPSAwOyBlIDwgbi5sZW5ndGggJiYgZSA8IHIubGVuZ3RoOyArK2UpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX3ZhbHVlQ29tcGFyZShuW2VdLCByW2VdKTtcbiAgICAgICAgICAgICAgICBpZiAodCkgcmV0dXJuIHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3Iobi5sZW5ndGgsIHIubGVuZ3RoKTtcbiAgICAgICAgfShlLmFycmF5VmFsdWUsIHQuYXJyYXlWYWx1ZSk7XG5cbiAgICAgIGNhc2UgMTAgLyogVHlwZU9yZGVyLk9iamVjdFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9jb21wYXJlTWFwcyhlLCB0KSB7XG4gICAgICAgICAgICBpZiAoZSA9PT0gdGUubWFwVmFsdWUgJiYgdCA9PT0gdGUubWFwVmFsdWUpIHJldHVybiAwO1xuICAgICAgICAgICAgaWYgKGUgPT09IHRlLm1hcFZhbHVlKSByZXR1cm4gMTtcbiAgICAgICAgICAgIGlmICh0ID09PSB0ZS5tYXBWYWx1ZSkgcmV0dXJuIC0xO1xuICAgICAgICAgICAgY29uc3QgbiA9IGUuZmllbGRzIHx8IHt9LCByID0gT2JqZWN0LmtleXMobiksIGkgPSB0LmZpZWxkcyB8fCB7fSwgcyA9IE9iamVjdC5rZXlzKGkpO1xuICAgICAgICAgICAgLy8gRXZlbiB0aG91Z2ggTWFwVmFsdWVzIGFyZSBsaWtlbHkgc29ydGVkIGNvcnJlY3RseSBiYXNlZCBvbiB0aGVpciBpbnNlcnRpb25cbiAgICAgICAgICAgIC8vIG9yZGVyIChlLmcuIHdoZW4gcmVjZWl2ZWQgZnJvbSB0aGUgYmFja2VuZCksIGxvY2FsIG1vZGlmaWNhdGlvbnMgY2FuIGJyaW5nXG4gICAgICAgICAgICAvLyBlbGVtZW50cyBvdXQgb2Ygb3JkZXIuIFdlIG5lZWQgdG8gcmUtc29ydCB0aGUgZWxlbWVudHMgdG8gZW5zdXJlIHRoYXRcbiAgICAgICAgICAgIC8vIGNhbm9uaWNhbCBJRHMgYXJlIGluZGVwZW5kZW50IG9mIGluc2VydGlvbiBvcmRlci5cbiAgICAgICAgICAgIHIuc29ydCgpLCBzLnNvcnQoKTtcbiAgICAgICAgICAgIGZvciAobGV0IGUgPSAwOyBlIDwgci5sZW5ndGggJiYgZSA8IHMubGVuZ3RoOyArK2UpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IocltlXSwgc1tlXSk7XG4gICAgICAgICAgICAgICAgaWYgKDAgIT09IHQpIHJldHVybiB0O1xuICAgICAgICAgICAgICAgIGNvbnN0IG8gPSBfX1BSSVZBVEVfdmFsdWVDb21wYXJlKG5bcltlXV0sIGlbc1tlXV0pO1xuICAgICAgICAgICAgICAgIGlmICgwICE9PSBvKSByZXR1cm4gbztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcihyLmxlbmd0aCwgcy5sZW5ndGgpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogR2VuZXJhdGVzIHRoZSBjYW5vbmljYWwgSUQgZm9yIHRoZSBwcm92aWRlZCBmaWVsZCB2YWx1ZSAoYXMgdXNlZCBpbiBUYXJnZXRcbiAqIHNlcmlhbGl6YXRpb24pLlxuICovIChlLm1hcFZhbHVlLCB0Lm1hcFZhbHVlKTtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgZmFpbCgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2NvbXBhcmVUaW1lc3RhbXBzKGUsIHQpIHtcbiAgICBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgZSAmJiBcInN0cmluZ1wiID09IHR5cGVvZiB0ICYmIGUubGVuZ3RoID09PSB0Lmxlbmd0aCkgcmV0dXJuIF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKGUsIHQpO1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfbm9ybWFsaXplVGltZXN0YW1wKGUpLCByID0gX19QUklWQVRFX25vcm1hbGl6ZVRpbWVzdGFtcCh0KSwgaSA9IF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKG4uc2Vjb25kcywgci5zZWNvbmRzKTtcbiAgICByZXR1cm4gMCAhPT0gaSA/IGkgOiBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcihuLm5hbm9zLCByLm5hbm9zKTtcbn1cblxuZnVuY3Rpb24gY2Fub25pY2FsSWQoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfY2Fub25pZnlWYWx1ZShlKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2Nhbm9uaWZ5VmFsdWUoZSkge1xuICAgIHJldHVybiBcIm51bGxWYWx1ZVwiIGluIGUgPyBcIm51bGxcIiA6IFwiYm9vbGVhblZhbHVlXCIgaW4gZSA/IFwiXCIgKyBlLmJvb2xlYW5WYWx1ZSA6IFwiaW50ZWdlclZhbHVlXCIgaW4gZSA/IFwiXCIgKyBlLmludGVnZXJWYWx1ZSA6IFwiZG91YmxlVmFsdWVcIiBpbiBlID8gXCJcIiArIGUuZG91YmxlVmFsdWUgOiBcInRpbWVzdGFtcFZhbHVlXCIgaW4gZSA/IGZ1bmN0aW9uIF9fUFJJVkFURV9jYW5vbmlmeVRpbWVzdGFtcChlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfbm9ybWFsaXplVGltZXN0YW1wKGUpO1xuICAgICAgICByZXR1cm4gYHRpbWUoJHt0LnNlY29uZHN9LCR7dC5uYW5vc30pYDtcbiAgICB9KGUudGltZXN0YW1wVmFsdWUpIDogXCJzdHJpbmdWYWx1ZVwiIGluIGUgPyBlLnN0cmluZ1ZhbHVlIDogXCJieXRlc1ZhbHVlXCIgaW4gZSA/IGZ1bmN0aW9uIF9fUFJJVkFURV9jYW5vbmlmeUJ5dGVTdHJpbmcoZSkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX25vcm1hbGl6ZUJ5dGVTdHJpbmcoZSkudG9CYXNlNjQoKTtcbiAgICB9KGUuYnl0ZXNWYWx1ZSkgOiBcInJlZmVyZW5jZVZhbHVlXCIgaW4gZSA/IGZ1bmN0aW9uIF9fUFJJVkFURV9jYW5vbmlmeVJlZmVyZW5jZShlKSB7XG4gICAgICAgIHJldHVybiBEb2N1bWVudEtleS5mcm9tTmFtZShlKS50b1N0cmluZygpO1xuICAgIH0oZS5yZWZlcmVuY2VWYWx1ZSkgOiBcImdlb1BvaW50VmFsdWVcIiBpbiBlID8gZnVuY3Rpb24gX19QUklWQVRFX2Nhbm9uaWZ5R2VvUG9pbnQoZSkge1xuICAgICAgICByZXR1cm4gYGdlbygke2UubGF0aXR1ZGV9LCR7ZS5sb25naXR1ZGV9KWA7XG4gICAgfShlLmdlb1BvaW50VmFsdWUpIDogXCJhcnJheVZhbHVlXCIgaW4gZSA/IGZ1bmN0aW9uIF9fUFJJVkFURV9jYW5vbmlmeUFycmF5KGUpIHtcbiAgICAgICAgbGV0IHQgPSBcIltcIiwgbiA9ICEwO1xuICAgICAgICBmb3IgKGNvbnN0IHIgb2YgZS52YWx1ZXMgfHwgW10pIG4gPyBuID0gITEgOiB0ICs9IFwiLFwiLCB0ICs9IF9fUFJJVkFURV9jYW5vbmlmeVZhbHVlKHIpO1xuICAgICAgICByZXR1cm4gdCArIFwiXVwiO1xuICAgIH1cbiAgICAvKipcbiAqIFJldHVybnMgYW4gYXBwcm94aW1hdGUgKGFuZCB3aWxkbHkgaW5hY2N1cmF0ZSkgaW4tbWVtb3J5IHNpemUgZm9yIHRoZSBmaWVsZFxuICogdmFsdWUuXG4gKlxuICogVGhlIG1lbW9yeSBzaXplIHRha2VzIGludG8gYWNjb3VudCBvbmx5IHRoZSBhY3R1YWwgdXNlciBkYXRhIGFzIGl0IHJlc2lkZXNcbiAqIGluIG1lbW9yeSBhbmQgaWdub3JlcyBvYmplY3Qgb3ZlcmhlYWQuXG4gKi8gKGUuYXJyYXlWYWx1ZSkgOiBcIm1hcFZhbHVlXCIgaW4gZSA/IGZ1bmN0aW9uIF9fUFJJVkFURV9jYW5vbmlmeU1hcChlKSB7XG4gICAgICAgIC8vIEl0ZXJhdGlvbiBvcmRlciBpbiBKYXZhU2NyaXB0IGlzIG5vdCBndWFyYW50ZWVkLiBUbyBlbnN1cmUgdGhhdCB3ZSBnZW5lcmF0ZVxuICAgICAgICAvLyBtYXRjaGluZyBjYW5vbmljYWwgSURzIGZvciBpZGVudGljYWwgbWFwcywgd2UgbmVlZCB0byBzb3J0IHRoZSBrZXlzLlxuICAgICAgICBjb25zdCB0ID0gT2JqZWN0LmtleXMoZS5maWVsZHMgfHwge30pLnNvcnQoKTtcbiAgICAgICAgbGV0IG4gPSBcIntcIiwgciA9ICEwO1xuICAgICAgICBmb3IgKGNvbnN0IGkgb2YgdCkgciA/IHIgPSAhMSA6IG4gKz0gXCIsXCIsIG4gKz0gYCR7aX06JHtfX1BSSVZBVEVfY2Fub25pZnlWYWx1ZShlLmZpZWxkc1tpXSl9YDtcbiAgICAgICAgcmV0dXJuIG4gKyBcIn1cIjtcbiAgICB9KGUubWFwVmFsdWUpIDogZmFpbCgpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZXN0aW1hdGVCeXRlU2l6ZShlKSB7XG4gICAgc3dpdGNoIChfX1BSSVZBVEVfdHlwZU9yZGVyKGUpKSB7XG4gICAgICBjYXNlIDAgLyogVHlwZU9yZGVyLk51bGxWYWx1ZSAqLyA6XG4gICAgICBjYXNlIDEgLyogVHlwZU9yZGVyLkJvb2xlYW5WYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiA0O1xuXG4gICAgICBjYXNlIDIgLyogVHlwZU9yZGVyLk51bWJlclZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIDg7XG5cbiAgICAgIGNhc2UgMyAvKiBUeXBlT3JkZXIuVGltZXN0YW1wVmFsdWUgKi8gOlxuICAgICAgY2FzZSA4IC8qIFR5cGVPcmRlci5HZW9Qb2ludFZhbHVlICovIDpcbiAgICAgICAgLy8gR2VvUG9pbnRzIGFyZSBtYWRlIHVwIG9mIHR3byBkaXN0aW5jdCBudW1iZXJzIChsYXRpdHVkZSArIGxvbmdpdHVkZSlcbiAgICAgICAgcmV0dXJuIDE2O1xuXG4gICAgICBjYXNlIDQgLyogVHlwZU9yZGVyLlNlcnZlclRpbWVzdGFtcFZhbHVlICovIDpcbiAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9nZXRQcmV2aW91c1ZhbHVlKGUpO1xuICAgICAgICByZXR1cm4gdCA/IDE2ICsgX19QUklWQVRFX2VzdGltYXRlQnl0ZVNpemUodCkgOiAxNjtcblxuICAgICAgY2FzZSA1IC8qIFR5cGVPcmRlci5TdHJpbmdWYWx1ZSAqLyA6XG4gICAgICAgIC8vIFNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L0RhdGFfc3RydWN0dXJlczpcbiAgICAgICAgLy8gXCJKYXZhU2NyaXB0J3MgU3RyaW5nIHR5cGUgaXMgWy4uLl0gYSBzZXQgb2YgZWxlbWVudHMgb2YgMTYtYml0IHVuc2lnbmVkXG4gICAgICAgIC8vIGludGVnZXIgdmFsdWVzXCJcbiAgICAgICAgcmV0dXJuIDIgKiBlLnN0cmluZ1ZhbHVlLmxlbmd0aDtcblxuICAgICAgY2FzZSA2IC8qIFR5cGVPcmRlci5CbG9iVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gX19QUklWQVRFX25vcm1hbGl6ZUJ5dGVTdHJpbmcoZS5ieXRlc1ZhbHVlKS5hcHByb3hpbWF0ZUJ5dGVTaXplKCk7XG5cbiAgICAgIGNhc2UgNyAvKiBUeXBlT3JkZXIuUmVmVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZS5yZWZlcmVuY2VWYWx1ZS5sZW5ndGg7XG5cbiAgICAgIGNhc2UgOSAvKiBUeXBlT3JkZXIuQXJyYXlWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfZXN0aW1hdGVBcnJheUJ5dGVTaXplKGUpIHtcbiAgICAgICAgICAgIHJldHVybiAoZS52YWx1ZXMgfHwgW10pLnJlZHVjZSgoKGUsIHQpID0+IGUgKyBfX1BSSVZBVEVfZXN0aW1hdGVCeXRlU2l6ZSh0KSksIDApO1xuICAgICAgICB9XG4gICAgICAgIC8qKiBSZXR1cm5zIGEgcmVmZXJlbmNlIHZhbHVlIGZvciB0aGUgcHJvdmlkZWQgZGF0YWJhc2UgYW5kIGtleS4gKi8gKGUuYXJyYXlWYWx1ZSk7XG5cbiAgICAgIGNhc2UgMTAgLyogVHlwZU9yZGVyLk9iamVjdFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9lc3RpbWF0ZU1hcEJ5dGVTaXplKGUpIHtcbiAgICAgICAgICAgIGxldCB0ID0gMDtcbiAgICAgICAgICAgIHJldHVybiBmb3JFYWNoKGUuZmllbGRzLCAoKGUsIG4pID0+IHtcbiAgICAgICAgICAgICAgICB0ICs9IGUubGVuZ3RoICsgX19QUklWQVRFX2VzdGltYXRlQnl0ZVNpemUobik7XG4gICAgICAgICAgICB9KSksIHQ7XG4gICAgICAgIH0oZS5tYXBWYWx1ZSk7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IGZhaWwoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9yZWZWYWx1ZShlLCB0KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVmZXJlbmNlVmFsdWU6IGBwcm9qZWN0cy8ke2UucHJvamVjdElkfS9kYXRhYmFzZXMvJHtlLmRhdGFiYXNlfS9kb2N1bWVudHMvJHt0LnBhdGguY2Fub25pY2FsU3RyaW5nKCl9YFxuICAgIH07XG59XG5cbi8qKiBSZXR1cm5zIHRydWUgaWYgYHZhbHVlYCBpcyBhbiBJbnRlZ2VyVmFsdWUgLiAqLyBmdW5jdGlvbiBpc0ludGVnZXIoZSkge1xuICAgIHJldHVybiAhIWUgJiYgXCJpbnRlZ2VyVmFsdWVcIiBpbiBlO1xufVxuXG4vKiogUmV0dXJucyB0cnVlIGlmIGB2YWx1ZWAgaXMgYSBEb3VibGVWYWx1ZS4gKi9cbi8qKiBSZXR1cm5zIHRydWUgaWYgYHZhbHVlYCBpcyBhbiBBcnJheVZhbHVlLiAqL1xuZnVuY3Rpb24gaXNBcnJheShlKSB7XG4gICAgcmV0dXJuICEhZSAmJiBcImFycmF5VmFsdWVcIiBpbiBlO1xufVxuXG4vKiogUmV0dXJucyB0cnVlIGlmIGB2YWx1ZWAgaXMgYSBOdWxsVmFsdWUuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9pc051bGxWYWx1ZShlKSB7XG4gICAgcmV0dXJuICEhZSAmJiBcIm51bGxWYWx1ZVwiIGluIGU7XG59XG5cbi8qKiBSZXR1cm5zIHRydWUgaWYgYHZhbHVlYCBpcyBOYU4uICovIGZ1bmN0aW9uIF9fUFJJVkFURV9pc05hblZhbHVlKGUpIHtcbiAgICByZXR1cm4gISFlICYmIFwiZG91YmxlVmFsdWVcIiBpbiBlICYmIGlzTmFOKE51bWJlcihlLmRvdWJsZVZhbHVlKSk7XG59XG5cbi8qKiBSZXR1cm5zIHRydWUgaWYgYHZhbHVlYCBpcyBhIE1hcFZhbHVlLiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfaXNNYXBWYWx1ZShlKSB7XG4gICAgcmV0dXJuICEhZSAmJiBcIm1hcFZhbHVlXCIgaW4gZTtcbn1cblxuLyoqIENyZWF0ZXMgYSBkZWVwIGNvcHkgb2YgYHNvdXJjZWAuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9kZWVwQ2xvbmUoZSkge1xuICAgIGlmIChlLmdlb1BvaW50VmFsdWUpIHJldHVybiB7XG4gICAgICAgIGdlb1BvaW50VmFsdWU6IE9iamVjdC5hc3NpZ24oe30sIGUuZ2VvUG9pbnRWYWx1ZSlcbiAgICB9O1xuICAgIGlmIChlLnRpbWVzdGFtcFZhbHVlICYmIFwib2JqZWN0XCIgPT0gdHlwZW9mIGUudGltZXN0YW1wVmFsdWUpIHJldHVybiB7XG4gICAgICAgIHRpbWVzdGFtcFZhbHVlOiBPYmplY3QuYXNzaWduKHt9LCBlLnRpbWVzdGFtcFZhbHVlKVxuICAgIH07XG4gICAgaWYgKGUubWFwVmFsdWUpIHtcbiAgICAgICAgY29uc3QgdCA9IHtcbiAgICAgICAgICAgIG1hcFZhbHVlOiB7XG4gICAgICAgICAgICAgICAgZmllbGRzOiB7fVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gZm9yRWFjaChlLm1hcFZhbHVlLmZpZWxkcywgKChlLCBuKSA9PiB0Lm1hcFZhbHVlLmZpZWxkc1tlXSA9IF9fUFJJVkFURV9kZWVwQ2xvbmUobikpKSwgXG4gICAgICAgIHQ7XG4gICAgfVxuICAgIGlmIChlLmFycmF5VmFsdWUpIHtcbiAgICAgICAgY29uc3QgdCA9IHtcbiAgICAgICAgICAgIGFycmF5VmFsdWU6IHtcbiAgICAgICAgICAgICAgICB2YWx1ZXM6IFtdXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgKGUuYXJyYXlWYWx1ZS52YWx1ZXMgfHwgW10pLmxlbmd0aDsgKytuKSB0LmFycmF5VmFsdWUudmFsdWVzW25dID0gX19QUklWQVRFX2RlZXBDbG9uZShlLmFycmF5VmFsdWUudmFsdWVzW25dKTtcbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfVxuICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCBlKTtcbn1cblxuLyoqIFJldHVybnMgdHJ1ZSBpZiB0aGUgVmFsdWUgcmVwcmVzZW50cyB0aGUgY2Fub25pY2FsIHtAbGluayAjTUFYX1ZBTFVFfSAuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9pc01heFZhbHVlKGUpIHtcbiAgICByZXR1cm4gXCJfX21heF9fXCIgPT09ICgoKGUubWFwVmFsdWUgfHwge30pLmZpZWxkcyB8fCB7fSkuX190eXBlX18gfHwge30pLnN0cmluZ1ZhbHVlO1xufVxuXG4vKiogUmV0dXJucyB0aGUgbG93ZXN0IHZhbHVlIGZvciB0aGUgZ2l2ZW4gdmFsdWUgdHlwZSAoaW5jbHVzaXZlKS4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3ZhbHVlc0dldExvd2VyQm91bmQoZSkge1xuICAgIHJldHVybiBcIm51bGxWYWx1ZVwiIGluIGUgPyBuZSA6IFwiYm9vbGVhblZhbHVlXCIgaW4gZSA/IHtcbiAgICAgICAgYm9vbGVhblZhbHVlOiAhMVxuICAgIH0gOiBcImludGVnZXJWYWx1ZVwiIGluIGUgfHwgXCJkb3VibGVWYWx1ZVwiIGluIGUgPyB7XG4gICAgICAgIGRvdWJsZVZhbHVlOiBOYU5cbiAgICB9IDogXCJ0aW1lc3RhbXBWYWx1ZVwiIGluIGUgPyB7XG4gICAgICAgIHRpbWVzdGFtcFZhbHVlOiB7XG4gICAgICAgICAgICBzZWNvbmRzOiBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUlxuICAgICAgICB9XG4gICAgfSA6IFwic3RyaW5nVmFsdWVcIiBpbiBlID8ge1xuICAgICAgICBzdHJpbmdWYWx1ZTogXCJcIlxuICAgIH0gOiBcImJ5dGVzVmFsdWVcIiBpbiBlID8ge1xuICAgICAgICBieXRlc1ZhbHVlOiBcIlwiXG4gICAgfSA6IFwicmVmZXJlbmNlVmFsdWVcIiBpbiBlID8gX19QUklWQVRFX3JlZlZhbHVlKERhdGFiYXNlSWQuZW1wdHkoKSwgRG9jdW1lbnRLZXkuZW1wdHkoKSkgOiBcImdlb1BvaW50VmFsdWVcIiBpbiBlID8ge1xuICAgICAgICBnZW9Qb2ludFZhbHVlOiB7XG4gICAgICAgICAgICBsYXRpdHVkZTogLTkwLFxuICAgICAgICAgICAgbG9uZ2l0dWRlOiAtMTgwXG4gICAgICAgIH1cbiAgICB9IDogXCJhcnJheVZhbHVlXCIgaW4gZSA/IHtcbiAgICAgICAgYXJyYXlWYWx1ZToge31cbiAgICB9IDogXCJtYXBWYWx1ZVwiIGluIGUgPyB7XG4gICAgICAgIG1hcFZhbHVlOiB7fVxuICAgIH0gOiBmYWlsKCk7XG59XG5cbi8qKiBSZXR1cm5zIHRoZSBsYXJnZXN0IHZhbHVlIGZvciB0aGUgZ2l2ZW4gdmFsdWUgdHlwZSAoZXhjbHVzaXZlKS4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3ZhbHVlc0dldFVwcGVyQm91bmQoZSkge1xuICAgIHJldHVybiBcIm51bGxWYWx1ZVwiIGluIGUgPyB7XG4gICAgICAgIGJvb2xlYW5WYWx1ZTogITFcbiAgICB9IDogXCJib29sZWFuVmFsdWVcIiBpbiBlID8ge1xuICAgICAgICBkb3VibGVWYWx1ZTogTmFOXG4gICAgfSA6IFwiaW50ZWdlclZhbHVlXCIgaW4gZSB8fCBcImRvdWJsZVZhbHVlXCIgaW4gZSA/IHtcbiAgICAgICAgdGltZXN0YW1wVmFsdWU6IHtcbiAgICAgICAgICAgIHNlY29uZHM6IE51bWJlci5NSU5fU0FGRV9JTlRFR0VSXG4gICAgICAgIH1cbiAgICB9IDogXCJ0aW1lc3RhbXBWYWx1ZVwiIGluIGUgPyB7XG4gICAgICAgIHN0cmluZ1ZhbHVlOiBcIlwiXG4gICAgfSA6IFwic3RyaW5nVmFsdWVcIiBpbiBlID8ge1xuICAgICAgICBieXRlc1ZhbHVlOiBcIlwiXG4gICAgfSA6IFwiYnl0ZXNWYWx1ZVwiIGluIGUgPyBfX1BSSVZBVEVfcmVmVmFsdWUoRGF0YWJhc2VJZC5lbXB0eSgpLCBEb2N1bWVudEtleS5lbXB0eSgpKSA6IFwicmVmZXJlbmNlVmFsdWVcIiBpbiBlID8ge1xuICAgICAgICBnZW9Qb2ludFZhbHVlOiB7XG4gICAgICAgICAgICBsYXRpdHVkZTogLTkwLFxuICAgICAgICAgICAgbG9uZ2l0dWRlOiAtMTgwXG4gICAgICAgIH1cbiAgICB9IDogXCJnZW9Qb2ludFZhbHVlXCIgaW4gZSA/IHtcbiAgICAgICAgYXJyYXlWYWx1ZToge31cbiAgICB9IDogXCJhcnJheVZhbHVlXCIgaW4gZSA/IHtcbiAgICAgICAgbWFwVmFsdWU6IHt9XG4gICAgfSA6IFwibWFwVmFsdWVcIiBpbiBlID8gdGUgOiBmYWlsKCk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9sb3dlckJvdW5kQ29tcGFyZShlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV92YWx1ZUNvbXBhcmUoZS52YWx1ZSwgdC52YWx1ZSk7XG4gICAgcmV0dXJuIDAgIT09IG4gPyBuIDogZS5pbmNsdXNpdmUgJiYgIXQuaW5jbHVzaXZlID8gLTEgOiAhZS5pbmNsdXNpdmUgJiYgdC5pbmNsdXNpdmUgPyAxIDogMDtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3VwcGVyQm91bmRDb21wYXJlKGUsIHQpIHtcbiAgICBjb25zdCBuID0gX19QUklWQVRFX3ZhbHVlQ29tcGFyZShlLnZhbHVlLCB0LnZhbHVlKTtcbiAgICByZXR1cm4gMCAhPT0gbiA/IG4gOiBlLmluY2x1c2l2ZSAmJiAhdC5pbmNsdXNpdmUgPyAxIDogIWUuaW5jbHVzaXZlICYmIHQuaW5jbHVzaXZlID8gLTEgOiAwO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBPYmplY3RWYWx1ZSByZXByZXNlbnRzIGEgTWFwVmFsdWUgaW4gdGhlIEZpcmVzdG9yZSBQcm90byBhbmQgb2ZmZXJzIHRoZVxuICogYWJpbGl0eSB0byBhZGQgYW5kIHJlbW92ZSBmaWVsZHMgKHZpYSB0aGUgT2JqZWN0VmFsdWVCdWlsZGVyKS5cbiAqLyBjbGFzcyBPYmplY3RWYWx1ZSB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLnZhbHVlID0gZTtcbiAgICB9XG4gICAgc3RhdGljIGVtcHR5KCkge1xuICAgICAgICByZXR1cm4gbmV3IE9iamVjdFZhbHVlKHtcbiAgICAgICAgICAgIG1hcFZhbHVlOiB7fVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgdmFsdWUgYXQgdGhlIGdpdmVuIHBhdGggb3IgbnVsbC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBwYXRoIC0gdGhlIHBhdGggdG8gc2VhcmNoXG4gICAgICogQHJldHVybnMgVGhlIHZhbHVlIGF0IHRoZSBwYXRoIG9yIG51bGwgaWYgdGhlIHBhdGggaXMgbm90IHNldC5cbiAgICAgKi8gICAgZmllbGQoZSkge1xuICAgICAgICBpZiAoZS5pc0VtcHR5KCkpIHJldHVybiB0aGlzLnZhbHVlO1xuICAgICAgICB7XG4gICAgICAgICAgICBsZXQgdCA9IHRoaXMudmFsdWU7XG4gICAgICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IGUubGVuZ3RoIC0gMTsgKytuKSBpZiAodCA9ICh0Lm1hcFZhbHVlLmZpZWxkcyB8fCB7fSlbZS5nZXQobildLCBcbiAgICAgICAgICAgICFfX1BSSVZBVEVfaXNNYXBWYWx1ZSh0KSkgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICByZXR1cm4gdCA9ICh0Lm1hcFZhbHVlLmZpZWxkcyB8fCB7fSlbZS5sYXN0U2VnbWVudCgpXSwgdCB8fCBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGZpZWxkIHRvIHRoZSBwcm92aWRlZCB2YWx1ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBwYXRoIC0gVGhlIGZpZWxkIHBhdGggdG8gc2V0LlxuICAgICAqIEBwYXJhbSB2YWx1ZSAtIFRoZSB2YWx1ZSB0byBzZXQuXG4gICAgICovICAgIHNldChlLCB0KSB7XG4gICAgICAgIHRoaXMuZ2V0RmllbGRzTWFwKGUucG9wTGFzdCgpKVtlLmxhc3RTZWdtZW50KCldID0gX19QUklWQVRFX2RlZXBDbG9uZSh0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgcHJvdmlkZWQgZmllbGRzIHRvIHRoZSBwcm92aWRlZCB2YWx1ZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZGF0YSAtIEEgbWFwIG9mIGZpZWxkcyB0byB2YWx1ZXMgKG9yIG51bGwgZm9yIGRlbGV0ZXMpLlxuICAgICAqLyAgICBzZXRBbGwoZSkge1xuICAgICAgICBsZXQgdCA9IEZpZWxkUGF0aCQxLmVtcHR5UGF0aCgpLCBuID0ge30sIHIgPSBbXTtcbiAgICAgICAgZS5mb3JFYWNoKCgoZSwgaSkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0LmlzSW1tZWRpYXRlUGFyZW50T2YoaSkpIHtcbiAgICAgICAgICAgICAgICAvLyBJbnNlcnQgdGhlIGFjY3VtdWxhdGVkIGNoYW5nZXMgYXQgdGhpcyBwYXJlbnQgbG9jYXRpb25cbiAgICAgICAgICAgICAgICBjb25zdCBlID0gdGhpcy5nZXRGaWVsZHNNYXAodCk7XG4gICAgICAgICAgICAgICAgdGhpcy5hcHBseUNoYW5nZXMoZSwgbiwgciksIG4gPSB7fSwgciA9IFtdLCB0ID0gaS5wb3BMYXN0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlID8gbltpLmxhc3RTZWdtZW50KCldID0gX19QUklWQVRFX2RlZXBDbG9uZShlKSA6IHIucHVzaChpLmxhc3RTZWdtZW50KCkpO1xuICAgICAgICB9KSk7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLmdldEZpZWxkc01hcCh0KTtcbiAgICAgICAgdGhpcy5hcHBseUNoYW5nZXMoaSwgbiwgcik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgdGhlIGZpZWxkIGF0IHRoZSBzcGVjaWZpZWQgcGF0aC4gSWYgdGhlcmUgaXMgbm8gZmllbGQgYXQgdGhlXG4gICAgICogc3BlY2lmaWVkIHBhdGgsIG5vdGhpbmcgaXMgY2hhbmdlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBwYXRoIC0gVGhlIGZpZWxkIHBhdGggdG8gcmVtb3ZlLlxuICAgICAqLyAgICBkZWxldGUoZSkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5maWVsZChlLnBvcExhc3QoKSk7XG4gICAgICAgIF9fUFJJVkFURV9pc01hcFZhbHVlKHQpICYmIHQubWFwVmFsdWUuZmllbGRzICYmIGRlbGV0ZSB0Lm1hcFZhbHVlLmZpZWxkc1tlLmxhc3RTZWdtZW50KCldO1xuICAgIH1cbiAgICBpc0VxdWFsKGUpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV92YWx1ZUVxdWFscyh0aGlzLnZhbHVlLCBlLnZhbHVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgbWFwIHRoYXQgY29udGFpbnMgdGhlIGxlYWYgZWxlbWVudCBvZiBgcGF0aGAuIElmIHRoZSBwYXJlbnRcbiAgICAgKiBlbnRyeSBkb2VzIG5vdCB5ZXQgZXhpc3QsIG9yIGlmIGl0IGlzIG5vdCBhIG1hcCwgYSBuZXcgbWFwIHdpbGwgYmUgY3JlYXRlZC5cbiAgICAgKi8gICAgZ2V0RmllbGRzTWFwKGUpIHtcbiAgICAgICAgbGV0IHQgPSB0aGlzLnZhbHVlO1xuICAgICAgICB0Lm1hcFZhbHVlLmZpZWxkcyB8fCAodC5tYXBWYWx1ZSA9IHtcbiAgICAgICAgICAgIGZpZWxkczoge31cbiAgICAgICAgfSk7XG4gICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgZS5sZW5ndGg7ICsrbikge1xuICAgICAgICAgICAgbGV0IHIgPSB0Lm1hcFZhbHVlLmZpZWxkc1tlLmdldChuKV07XG4gICAgICAgICAgICBfX1BSSVZBVEVfaXNNYXBWYWx1ZShyKSAmJiByLm1hcFZhbHVlLmZpZWxkcyB8fCAociA9IHtcbiAgICAgICAgICAgICAgICBtYXBWYWx1ZToge1xuICAgICAgICAgICAgICAgICAgICBmaWVsZHM6IHt9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgdC5tYXBWYWx1ZS5maWVsZHNbZS5nZXQobildID0gciksIHQgPSByO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0Lm1hcFZhbHVlLmZpZWxkcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogTW9kaWZpZXMgYGZpZWxkc01hcGAgYnkgYWRkaW5nLCByZXBsYWNpbmcgb3IgZGVsZXRpbmcgdGhlIHNwZWNpZmllZFxuICAgICAqIGVudHJpZXMuXG4gICAgICovICAgIGFwcGx5Q2hhbmdlcyhlLCB0LCBuKSB7XG4gICAgICAgIGZvckVhY2godCwgKCh0LCBuKSA9PiBlW3RdID0gbikpO1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgbikgZGVsZXRlIGVbdF07XG4gICAgfVxuICAgIGNsb25lKCkge1xuICAgICAgICByZXR1cm4gbmV3IE9iamVjdFZhbHVlKF9fUFJJVkFURV9kZWVwQ2xvbmUodGhpcy52YWx1ZSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgRmllbGRNYXNrIGJ1aWx0IGZyb20gYWxsIGZpZWxkcyBpbiBhIE1hcFZhbHVlLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9leHRyYWN0RmllbGRNYXNrKGUpIHtcbiAgICBjb25zdCB0ID0gW107XG4gICAgcmV0dXJuIGZvckVhY2goZS5maWVsZHMsICgoZSwgbikgPT4ge1xuICAgICAgICBjb25zdCByID0gbmV3IEZpZWxkUGF0aCQxKFsgZSBdKTtcbiAgICAgICAgaWYgKF9fUFJJVkFURV9pc01hcFZhbHVlKG4pKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gX19QUklWQVRFX2V4dHJhY3RGaWVsZE1hc2sobi5tYXBWYWx1ZSkuZmllbGRzO1xuICAgICAgICAgICAgaWYgKDAgPT09IGUubGVuZ3RoKSBcbiAgICAgICAgICAgIC8vIFByZXNlcnZlIHRoZSBlbXB0eSBtYXAgYnkgYWRkaW5nIGl0IHRvIHRoZSBGaWVsZE1hc2suXG4gICAgICAgICAgICB0LnB1c2gocik7IGVsc2UgXG4gICAgICAgICAgICAvLyBGb3IgbmVzdGVkIGFuZCBub24tZW1wdHkgT2JqZWN0VmFsdWVzLCBhZGQgdGhlIEZpZWxkUGF0aCBvZiB0aGVcbiAgICAgICAgICAgIC8vIGxlYWYgbm9kZXMuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IG4gb2YgZSkgdC5wdXNoKHIuY2hpbGQobikpO1xuICAgICAgICB9IGVsc2UgXG4gICAgICAgIC8vIEZvciBuZXN0ZWQgYW5kIG5vbi1lbXB0eSBPYmplY3RWYWx1ZXMsIGFkZCB0aGUgRmllbGRQYXRoIG9mIHRoZSBsZWFmXG4gICAgICAgIC8vIG5vZGVzLlxuICAgICAgICB0LnB1c2gocik7XG4gICAgfSkpLCBuZXcgRmllbGRNYXNrKHQpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBSZXByZXNlbnRzIGEgZG9jdW1lbnQgaW4gRmlyZXN0b3JlIHdpdGggYSBrZXksIHZlcnNpb24sIGRhdGEgYW5kIHdoZXRoZXIgaXRcbiAqIGhhcyBsb2NhbCBtdXRhdGlvbnMgYXBwbGllZCB0byBpdC5cbiAqXG4gKiBEb2N1bWVudHMgY2FuIHRyYW5zaXRpb24gYmV0d2VlbiBzdGF0ZXMgdmlhIGBjb252ZXJ0VG9Gb3VuZERvY3VtZW50KClgLFxuICogYGNvbnZlcnRUb05vRG9jdW1lbnQoKWAgYW5kIGBjb252ZXJ0VG9Vbmtub3duRG9jdW1lbnQoKWAuIElmIGEgZG9jdW1lbnQgZG9lc1xuICogbm90IHRyYW5zaXRpb24gdG8gb25lIG9mIHRoZXNlIHN0YXRlcyBldmVuIGFmdGVyIGFsbCBtdXRhdGlvbnMgaGF2ZSBiZWVuXG4gKiBhcHBsaWVkLCBgaXNWYWxpZERvY3VtZW50KClgIHJldHVybnMgZmFsc2UgYW5kIHRoZSBkb2N1bWVudCBzaG91bGQgYmUgcmVtb3ZlZFxuICogZnJvbSBhbGwgdmlld3MuXG4gKi8gY2xhc3MgTXV0YWJsZURvY3VtZW50IHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuLCByLCBpLCBzLCBvKSB7XG4gICAgICAgIHRoaXMua2V5ID0gZSwgdGhpcy5kb2N1bWVudFR5cGUgPSB0LCB0aGlzLnZlcnNpb24gPSBuLCB0aGlzLnJlYWRUaW1lID0gciwgdGhpcy5jcmVhdGVUaW1lID0gaSwgXG4gICAgICAgIHRoaXMuZGF0YSA9IHMsIHRoaXMuZG9jdW1lbnRTdGF0ZSA9IG87XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBkb2N1bWVudCB3aXRoIG5vIGtub3duIHZlcnNpb24gb3IgZGF0YSwgYnV0IHdoaWNoIGNhbiBzZXJ2ZSBhc1xuICAgICAqIGJhc2UgZG9jdW1lbnQgZm9yIG11dGF0aW9ucy5cbiAgICAgKi8gICAgc3RhdGljIG5ld0ludmFsaWREb2N1bWVudChlKSB7XG4gICAgICAgIHJldHVybiBuZXcgTXV0YWJsZURvY3VtZW50KGUsIDAgLyogRG9jdW1lbnRUeXBlLklOVkFMSUQgKi8gLCBcbiAgICAgICAgLyogdmVyc2lvbiAqLyBTbmFwc2hvdFZlcnNpb24ubWluKCksIFxuICAgICAgICAvKiByZWFkVGltZSAqLyBTbmFwc2hvdFZlcnNpb24ubWluKCksIFxuICAgICAgICAvKiBjcmVhdGVUaW1lICovIFNuYXBzaG90VmVyc2lvbi5taW4oKSwgT2JqZWN0VmFsdWUuZW1wdHkoKSwgMCAvKiBEb2N1bWVudFN0YXRlLlNZTkNFRCAqLyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgZG9jdW1lbnQgdGhhdCBpcyBrbm93biB0byBleGlzdCB3aXRoIHRoZSBnaXZlbiBkYXRhIGF0IHRoZVxuICAgICAqIGdpdmVuIHZlcnNpb24uXG4gICAgICovICAgIHN0YXRpYyBuZXdGb3VuZERvY3VtZW50KGUsIHQsIG4sIHIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBNdXRhYmxlRG9jdW1lbnQoZSwgMSAvKiBEb2N1bWVudFR5cGUuRk9VTkRfRE9DVU1FTlQgKi8gLCBcbiAgICAgICAgLyogdmVyc2lvbiAqLyB0LCBcbiAgICAgICAgLyogcmVhZFRpbWUgKi8gU25hcHNob3RWZXJzaW9uLm1pbigpLCBcbiAgICAgICAgLyogY3JlYXRlVGltZSAqLyBuLCByLCAwIC8qIERvY3VtZW50U3RhdGUuU1lOQ0VEICovKTtcbiAgICB9XG4gICAgLyoqIENyZWF0ZXMgYSBuZXcgZG9jdW1lbnQgdGhhdCBpcyBrbm93biB0byBub3QgZXhpc3QgYXQgdGhlIGdpdmVuIHZlcnNpb24uICovICAgIHN0YXRpYyBuZXdOb0RvY3VtZW50KGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBNdXRhYmxlRG9jdW1lbnQoZSwgMiAvKiBEb2N1bWVudFR5cGUuTk9fRE9DVU1FTlQgKi8gLCBcbiAgICAgICAgLyogdmVyc2lvbiAqLyB0LCBcbiAgICAgICAgLyogcmVhZFRpbWUgKi8gU25hcHNob3RWZXJzaW9uLm1pbigpLCBcbiAgICAgICAgLyogY3JlYXRlVGltZSAqLyBTbmFwc2hvdFZlcnNpb24ubWluKCksIE9iamVjdFZhbHVlLmVtcHR5KCksIDAgLyogRG9jdW1lbnRTdGF0ZS5TWU5DRUQgKi8pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IGRvY3VtZW50IHRoYXQgaXMga25vd24gdG8gZXhpc3QgYXQgdGhlIGdpdmVuIHZlcnNpb24gYnV0XG4gICAgICogd2hvc2UgZGF0YSBpcyBub3Qga25vd24gKGUuZy4gYSBkb2N1bWVudCB0aGF0IHdhcyB1cGRhdGVkIHdpdGhvdXQgYSBrbm93blxuICAgICAqIGJhc2UgZG9jdW1lbnQpLlxuICAgICAqLyAgICBzdGF0aWMgbmV3VW5rbm93bkRvY3VtZW50KGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBNdXRhYmxlRG9jdW1lbnQoZSwgMyAvKiBEb2N1bWVudFR5cGUuVU5LTk9XTl9ET0NVTUVOVCAqLyAsIFxuICAgICAgICAvKiB2ZXJzaW9uICovIHQsIFxuICAgICAgICAvKiByZWFkVGltZSAqLyBTbmFwc2hvdFZlcnNpb24ubWluKCksIFxuICAgICAgICAvKiBjcmVhdGVUaW1lICovIFNuYXBzaG90VmVyc2lvbi5taW4oKSwgT2JqZWN0VmFsdWUuZW1wdHkoKSwgMiAvKiBEb2N1bWVudFN0YXRlLkhBU19DT01NSVRURURfTVVUQVRJT05TICovKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hhbmdlcyB0aGUgZG9jdW1lbnQgdHlwZSB0byBpbmRpY2F0ZSB0aGF0IGl0IGV4aXN0cyBhbmQgdGhhdCBpdHMgdmVyc2lvblxuICAgICAqIGFuZCBkYXRhIGFyZSBrbm93bi5cbiAgICAgKi8gICAgY29udmVydFRvRm91bmREb2N1bWVudChlLCB0KSB7XG4gICAgICAgIC8vIElmIGEgZG9jdW1lbnQgaXMgc3dpdGNoaW5nIHN0YXRlIGZyb20gYmVpbmcgYW4gaW52YWxpZCBvciBkZWxldGVkXG4gICAgICAgIC8vIGRvY3VtZW50IHRvIGEgdmFsaWQgKEZPVU5EX0RPQ1VNRU5UKSBkb2N1bWVudCwgZWl0aGVyIGR1ZSB0byByZWNlaXZpbmcgYW5cbiAgICAgICAgLy8gdXBkYXRlIGZyb20gV2F0Y2ggb3IgZHVlIHRvIGFwcGx5aW5nIGEgbG9jYWwgc2V0IG11dGF0aW9uIG9uIHRvcFxuICAgICAgICAvLyBvZiBhIGRlbGV0ZWQgZG9jdW1lbnQsIG91ciBiZXN0IGd1ZXNzIGFib3V0IGl0cyBjcmVhdGVUaW1lIHdvdWxkIGJlIHRoZVxuICAgICAgICAvLyB2ZXJzaW9uIGF0IHdoaWNoIHRoZSBkb2N1bWVudCB0cmFuc2l0aW9uZWQgdG8gYSBGT1VORF9ET0NVTUVOVC5cbiAgICAgICAgcmV0dXJuICF0aGlzLmNyZWF0ZVRpbWUuaXNFcXVhbChTbmFwc2hvdFZlcnNpb24ubWluKCkpIHx8IDIgLyogRG9jdW1lbnRUeXBlLk5PX0RPQ1VNRU5UICovICE9PSB0aGlzLmRvY3VtZW50VHlwZSAmJiAwIC8qIERvY3VtZW50VHlwZS5JTlZBTElEICovICE9PSB0aGlzLmRvY3VtZW50VHlwZSB8fCAodGhpcy5jcmVhdGVUaW1lID0gZSksIFxuICAgICAgICB0aGlzLnZlcnNpb24gPSBlLCB0aGlzLmRvY3VtZW50VHlwZSA9IDEgLyogRG9jdW1lbnRUeXBlLkZPVU5EX0RPQ1VNRU5UICovICwgdGhpcy5kYXRhID0gdCwgXG4gICAgICAgIHRoaXMuZG9jdW1lbnRTdGF0ZSA9IDAgLyogRG9jdW1lbnRTdGF0ZS5TWU5DRUQgKi8gLCB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGFuZ2VzIHRoZSBkb2N1bWVudCB0eXBlIHRvIGluZGljYXRlIHRoYXQgaXQgZG9lc24ndCBleGlzdCBhdCB0aGUgZ2l2ZW5cbiAgICAgKiB2ZXJzaW9uLlxuICAgICAqLyAgICBjb252ZXJ0VG9Ob0RvY3VtZW50KGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmVyc2lvbiA9IGUsIHRoaXMuZG9jdW1lbnRUeXBlID0gMiAvKiBEb2N1bWVudFR5cGUuTk9fRE9DVU1FTlQgKi8gLCBcbiAgICAgICAgdGhpcy5kYXRhID0gT2JqZWN0VmFsdWUuZW1wdHkoKSwgdGhpcy5kb2N1bWVudFN0YXRlID0gMCAvKiBEb2N1bWVudFN0YXRlLlNZTkNFRCAqLyAsIFxuICAgICAgICB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGFuZ2VzIHRoZSBkb2N1bWVudCB0eXBlIHRvIGluZGljYXRlIHRoYXQgaXQgZXhpc3RzIGF0IGEgZ2l2ZW4gdmVyc2lvbiBidXRcbiAgICAgKiB0aGF0IGl0cyBkYXRhIGlzIG5vdCBrbm93biAoZS5nLiBhIGRvY3VtZW50IHRoYXQgd2FzIHVwZGF0ZWQgd2l0aG91dCBhIGtub3duXG4gICAgICogYmFzZSBkb2N1bWVudCkuXG4gICAgICovICAgIGNvbnZlcnRUb1Vua25vd25Eb2N1bWVudChlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZlcnNpb24gPSBlLCB0aGlzLmRvY3VtZW50VHlwZSA9IDMgLyogRG9jdW1lbnRUeXBlLlVOS05PV05fRE9DVU1FTlQgKi8gLCBcbiAgICAgICAgdGhpcy5kYXRhID0gT2JqZWN0VmFsdWUuZW1wdHkoKSwgdGhpcy5kb2N1bWVudFN0YXRlID0gMiAvKiBEb2N1bWVudFN0YXRlLkhBU19DT01NSVRURURfTVVUQVRJT05TICovICwgXG4gICAgICAgIHRoaXM7XG4gICAgfVxuICAgIHNldEhhc0NvbW1pdHRlZE11dGF0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9jdW1lbnRTdGF0ZSA9IDIgLyogRG9jdW1lbnRTdGF0ZS5IQVNfQ09NTUlUVEVEX01VVEFUSU9OUyAqLyAsIHRoaXM7XG4gICAgfVxuICAgIHNldEhhc0xvY2FsTXV0YXRpb25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kb2N1bWVudFN0YXRlID0gMSAvKiBEb2N1bWVudFN0YXRlLkhBU19MT0NBTF9NVVRBVElPTlMgKi8gLCB0aGlzLnZlcnNpb24gPSBTbmFwc2hvdFZlcnNpb24ubWluKCksIFxuICAgICAgICB0aGlzO1xuICAgIH1cbiAgICBzZXRSZWFkVGltZShlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlYWRUaW1lID0gZSwgdGhpcztcbiAgICB9XG4gICAgZ2V0IGhhc0xvY2FsTXV0YXRpb25zKCkge1xuICAgICAgICByZXR1cm4gMSAvKiBEb2N1bWVudFN0YXRlLkhBU19MT0NBTF9NVVRBVElPTlMgKi8gPT09IHRoaXMuZG9jdW1lbnRTdGF0ZTtcbiAgICB9XG4gICAgZ2V0IGhhc0NvbW1pdHRlZE11dGF0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIDIgLyogRG9jdW1lbnRTdGF0ZS5IQVNfQ09NTUlUVEVEX01VVEFUSU9OUyAqLyA9PT0gdGhpcy5kb2N1bWVudFN0YXRlO1xuICAgIH1cbiAgICBnZXQgaGFzUGVuZGluZ1dyaXRlcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFzTG9jYWxNdXRhdGlvbnMgfHwgdGhpcy5oYXNDb21taXR0ZWRNdXRhdGlvbnM7XG4gICAgfVxuICAgIGlzVmFsaWREb2N1bWVudCgpIHtcbiAgICAgICAgcmV0dXJuIDAgLyogRG9jdW1lbnRUeXBlLklOVkFMSUQgKi8gIT09IHRoaXMuZG9jdW1lbnRUeXBlO1xuICAgIH1cbiAgICBpc0ZvdW5kRG9jdW1lbnQoKSB7XG4gICAgICAgIHJldHVybiAxIC8qIERvY3VtZW50VHlwZS5GT1VORF9ET0NVTUVOVCAqLyA9PT0gdGhpcy5kb2N1bWVudFR5cGU7XG4gICAgfVxuICAgIGlzTm9Eb2N1bWVudCgpIHtcbiAgICAgICAgcmV0dXJuIDIgLyogRG9jdW1lbnRUeXBlLk5PX0RPQ1VNRU5UICovID09PSB0aGlzLmRvY3VtZW50VHlwZTtcbiAgICB9XG4gICAgaXNVbmtub3duRG9jdW1lbnQoKSB7XG4gICAgICAgIHJldHVybiAzIC8qIERvY3VtZW50VHlwZS5VTktOT1dOX0RPQ1VNRU5UICovID09PSB0aGlzLmRvY3VtZW50VHlwZTtcbiAgICB9XG4gICAgaXNFcXVhbChlKSB7XG4gICAgICAgIHJldHVybiBlIGluc3RhbmNlb2YgTXV0YWJsZURvY3VtZW50ICYmIHRoaXMua2V5LmlzRXF1YWwoZS5rZXkpICYmIHRoaXMudmVyc2lvbi5pc0VxdWFsKGUudmVyc2lvbikgJiYgdGhpcy5kb2N1bWVudFR5cGUgPT09IGUuZG9jdW1lbnRUeXBlICYmIHRoaXMuZG9jdW1lbnRTdGF0ZSA9PT0gZS5kb2N1bWVudFN0YXRlICYmIHRoaXMuZGF0YS5pc0VxdWFsKGUuZGF0YSk7XG4gICAgfVxuICAgIG11dGFibGVDb3B5KCkge1xuICAgICAgICByZXR1cm4gbmV3IE11dGFibGVEb2N1bWVudCh0aGlzLmtleSwgdGhpcy5kb2N1bWVudFR5cGUsIHRoaXMudmVyc2lvbiwgdGhpcy5yZWFkVGltZSwgdGhpcy5jcmVhdGVUaW1lLCB0aGlzLmRhdGEuY2xvbmUoKSwgdGhpcy5kb2N1bWVudFN0YXRlKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBgRG9jdW1lbnQoJHt0aGlzLmtleX0sICR7dGhpcy52ZXJzaW9ufSwgJHtKU09OLnN0cmluZ2lmeSh0aGlzLmRhdGEudmFsdWUpfSwge2NyZWF0ZVRpbWU6ICR7dGhpcy5jcmVhdGVUaW1lfX0pLCB7ZG9jdW1lbnRUeXBlOiAke3RoaXMuZG9jdW1lbnRUeXBlfX0pLCB7ZG9jdW1lbnRTdGF0ZTogJHt0aGlzLmRvY3VtZW50U3RhdGV9fSlgO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDb21wYXJlcyB0aGUgdmFsdWUgZm9yIGZpZWxkIGBmaWVsZGAgaW4gdGhlIHByb3ZpZGVkIGRvY3VtZW50cy4gVGhyb3dzIGlmXG4gKiB0aGUgZmllbGQgZG9lcyBub3QgZXhpc3QgaW4gYm90aCBkb2N1bWVudHMuXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJlcHJlc2VudHMgYSBib3VuZCBvZiBhIHF1ZXJ5LlxuICpcbiAqIFRoZSBib3VuZCBpcyBzcGVjaWZpZWQgd2l0aCB0aGUgZ2l2ZW4gY29tcG9uZW50cyByZXByZXNlbnRpbmcgYSBwb3NpdGlvbiBhbmRcbiAqIHdoZXRoZXIgaXQncyBqdXN0IGJlZm9yZSBvciBqdXN0IGFmdGVyIHRoZSBwb3NpdGlvbiAocmVsYXRpdmUgdG8gd2hhdGV2ZXIgdGhlXG4gKiBxdWVyeSBvcmRlciBpcykuXG4gKlxuICogVGhlIHBvc2l0aW9uIHJlcHJlc2VudHMgYSBsb2dpY2FsIGluZGV4IHBvc2l0aW9uIGZvciBhIHF1ZXJ5LiBJdCdzIGEgcHJlZml4XG4gKiBvZiB2YWx1ZXMgZm9yIHRoZSAocG90ZW50aWFsbHkgaW1wbGljaXQpIG9yZGVyIGJ5IGNsYXVzZXMgb2YgYSBxdWVyeS5cbiAqXG4gKiBCb3VuZCBwcm92aWRlcyBhIGZ1bmN0aW9uIHRvIGRldGVybWluZSB3aGV0aGVyIGEgZG9jdW1lbnQgY29tZXMgYmVmb3JlIG9yXG4gKiBhZnRlciBhIGJvdW5kLiBUaGlzIGlzIGluZmx1ZW5jZWQgYnkgd2hldGhlciB0aGUgcG9zaXRpb24gaXMganVzdCBiZWZvcmUgb3JcbiAqIGp1c3QgYWZ0ZXIgdGhlIHByb3ZpZGVkIHZhbHVlcy5cbiAqL1xuY2xhc3MgQm91bmQge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IGUsIHRoaXMuaW5jbHVzaXZlID0gdDtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9ib3VuZENvbXBhcmVUb0RvY3VtZW50KGUsIHQsIG4pIHtcbiAgICBsZXQgciA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlLnBvc2l0aW9uLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHMgPSB0W2ldLCBvID0gZS5wb3NpdGlvbltpXTtcbiAgICAgICAgaWYgKHMuZmllbGQuaXNLZXlGaWVsZCgpKSByID0gRG9jdW1lbnRLZXkuY29tcGFyYXRvcihEb2N1bWVudEtleS5mcm9tTmFtZShvLnJlZmVyZW5jZVZhbHVlKSwgbi5rZXkpOyBlbHNlIHtcbiAgICAgICAgICAgIHIgPSBfX1BSSVZBVEVfdmFsdWVDb21wYXJlKG8sIG4uZGF0YS5maWVsZChzLmZpZWxkKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFwiZGVzY1wiIC8qIERpcmVjdGlvbi5ERVNDRU5ESU5HICovID09PSBzLmRpciAmJiAociAqPSAtMSksIDAgIT09IHIpIGJyZWFrO1xuICAgIH1cbiAgICByZXR1cm4gcjtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgYSBkb2N1bWVudCBzb3J0cyBhZnRlciBhIGJvdW5kIHVzaW5nIHRoZSBwcm92aWRlZCBzb3J0XG4gKiBvcmRlci5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfYm91bmRFcXVhbHMoZSwgdCkge1xuICAgIGlmIChudWxsID09PSBlKSByZXR1cm4gbnVsbCA9PT0gdDtcbiAgICBpZiAobnVsbCA9PT0gdCkgcmV0dXJuICExO1xuICAgIGlmIChlLmluY2x1c2l2ZSAhPT0gdC5pbmNsdXNpdmUgfHwgZS5wb3NpdGlvbi5sZW5ndGggIT09IHQucG9zaXRpb24ubGVuZ3RoKSByZXR1cm4gITE7XG4gICAgZm9yIChsZXQgbiA9IDA7IG4gPCBlLnBvc2l0aW9uLmxlbmd0aDsgbisrKSB7XG4gICAgICAgIGlmICghX19QUklWQVRFX3ZhbHVlRXF1YWxzKGUucG9zaXRpb25bbl0sIHQucG9zaXRpb25bbl0pKSByZXR1cm4gITE7XG4gICAgfVxuICAgIHJldHVybiAhMDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQW4gb3JkZXJpbmcgb24gYSBmaWVsZCwgaW4gc29tZSBEaXJlY3Rpb24uIERpcmVjdGlvbiBkZWZhdWx0cyB0byBBU0NFTkRJTkcuXG4gKi8gY2xhc3MgT3JkZXJCeSB7XG4gICAgY29uc3RydWN0b3IoZSwgdCA9IFwiYXNjXCIgLyogRGlyZWN0aW9uLkFTQ0VORElORyAqLykge1xuICAgICAgICB0aGlzLmZpZWxkID0gZSwgdGhpcy5kaXIgPSB0O1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX29yZGVyQnlFcXVhbHMoZSwgdCkge1xuICAgIHJldHVybiBlLmRpciA9PT0gdC5kaXIgJiYgZS5maWVsZC5pc0VxdWFsKHQuZmllbGQpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBGaWx0ZXIge31cblxuY2xhc3MgRmllbGRGaWx0ZXIgZXh0ZW5kcyBGaWx0ZXIge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4pIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5maWVsZCA9IGUsIHRoaXMub3AgPSB0LCB0aGlzLnZhbHVlID0gbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZpbHRlciBiYXNlZCBvbiB0aGUgcHJvdmlkZWQgYXJndW1lbnRzLlxuICAgICAqLyAgICBzdGF0aWMgY3JlYXRlKGUsIHQsIG4pIHtcbiAgICAgICAgcmV0dXJuIGUuaXNLZXlGaWVsZCgpID8gXCJpblwiIC8qIE9wZXJhdG9yLklOICovID09PSB0IHx8IFwibm90LWluXCIgLyogT3BlcmF0b3IuTk9UX0lOICovID09PSB0ID8gdGhpcy5jcmVhdGVLZXlGaWVsZEluRmlsdGVyKGUsIHQsIG4pIDogbmV3IF9fUFJJVkFURV9LZXlGaWVsZEZpbHRlcihlLCB0LCBuKSA6IFwiYXJyYXktY29udGFpbnNcIiAvKiBPcGVyYXRvci5BUlJBWV9DT05UQUlOUyAqLyA9PT0gdCA/IG5ldyBfX1BSSVZBVEVfQXJyYXlDb250YWluc0ZpbHRlcihlLCBuKSA6IFwiaW5cIiAvKiBPcGVyYXRvci5JTiAqLyA9PT0gdCA/IG5ldyBfX1BSSVZBVEVfSW5GaWx0ZXIoZSwgbikgOiBcIm5vdC1pblwiIC8qIE9wZXJhdG9yLk5PVF9JTiAqLyA9PT0gdCA/IG5ldyBfX1BSSVZBVEVfTm90SW5GaWx0ZXIoZSwgbikgOiBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TX0FOWSAqLyA9PT0gdCA/IG5ldyBfX1BSSVZBVEVfQXJyYXlDb250YWluc0FueUZpbHRlcihlLCBuKSA6IG5ldyBGaWVsZEZpbHRlcihlLCB0LCBuKTtcbiAgICB9XG4gICAgc3RhdGljIGNyZWF0ZUtleUZpZWxkSW5GaWx0ZXIoZSwgdCwgbikge1xuICAgICAgICByZXR1cm4gXCJpblwiIC8qIE9wZXJhdG9yLklOICovID09PSB0ID8gbmV3IF9fUFJJVkFURV9LZXlGaWVsZEluRmlsdGVyKGUsIG4pIDogbmV3IF9fUFJJVkFURV9LZXlGaWVsZE5vdEluRmlsdGVyKGUsIG4pO1xuICAgIH1cbiAgICBtYXRjaGVzKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IGUuZGF0YS5maWVsZCh0aGlzLmZpZWxkKTtcbiAgICAgICAgLy8gVHlwZXMgZG8gbm90IGhhdmUgdG8gbWF0Y2ggaW4gTk9UX0VRVUFMIGZpbHRlcnMuXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiIT1cIiAvKiBPcGVyYXRvci5OT1RfRVFVQUwgKi8gPT09IHRoaXMub3AgPyBudWxsICE9PSB0ICYmIHRoaXMubWF0Y2hlc0NvbXBhcmlzb24oX19QUklWQVRFX3ZhbHVlQ29tcGFyZSh0LCB0aGlzLnZhbHVlKSkgOiBudWxsICE9PSB0ICYmIF9fUFJJVkFURV90eXBlT3JkZXIodGhpcy52YWx1ZSkgPT09IF9fUFJJVkFURV90eXBlT3JkZXIodCkgJiYgdGhpcy5tYXRjaGVzQ29tcGFyaXNvbihfX1BSSVZBVEVfdmFsdWVDb21wYXJlKHQsIHRoaXMudmFsdWUpKTtcbiAgICAgICAgLy8gT25seSBjb21wYXJlIHR5cGVzIHdpdGggbWF0Y2hpbmcgYmFja2VuZCBvcmRlciAoc3VjaCBhcyBkb3VibGUgYW5kIGludCkuXG4gICAgICAgIH1cbiAgICBtYXRjaGVzQ29tcGFyaXNvbihlKSB7XG4gICAgICAgIHN3aXRjaCAodGhpcy5vcCkge1xuICAgICAgICAgIGNhc2UgXCI8XCIgLyogT3BlcmF0b3IuTEVTU19USEFOICovIDpcbiAgICAgICAgICAgIHJldHVybiBlIDwgMDtcblxuICAgICAgICAgIGNhc2UgXCI8PVwiIC8qIE9wZXJhdG9yLkxFU1NfVEhBTl9PUl9FUVVBTCAqLyA6XG4gICAgICAgICAgICByZXR1cm4gZSA8PSAwO1xuXG4gICAgICAgICAgY2FzZSBcIj09XCIgLyogT3BlcmF0b3IuRVFVQUwgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIDAgPT09IGU7XG5cbiAgICAgICAgICBjYXNlIFwiIT1cIiAvKiBPcGVyYXRvci5OT1RfRVFVQUwgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIDAgIT09IGU7XG5cbiAgICAgICAgICBjYXNlIFwiPlwiIC8qIE9wZXJhdG9yLkdSRUFURVJfVEhBTiAqLyA6XG4gICAgICAgICAgICByZXR1cm4gZSA+IDA7XG5cbiAgICAgICAgICBjYXNlIFwiPj1cIiAvKiBPcGVyYXRvci5HUkVBVEVSX1RIQU5fT1JfRVFVQUwgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIGUgPj0gMDtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gZmFpbCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlzSW5lcXVhbGl0eSgpIHtcbiAgICAgICAgcmV0dXJuIFsgXCI8XCIgLyogT3BlcmF0b3IuTEVTU19USEFOICovICwgXCI8PVwiIC8qIE9wZXJhdG9yLkxFU1NfVEhBTl9PUl9FUVVBTCAqLyAsIFwiPlwiIC8qIE9wZXJhdG9yLkdSRUFURVJfVEhBTiAqLyAsIFwiPj1cIiAvKiBPcGVyYXRvci5HUkVBVEVSX1RIQU5fT1JfRVFVQUwgKi8gLCBcIiE9XCIgLyogT3BlcmF0b3IuTk9UX0VRVUFMICovICwgXCJub3QtaW5cIiAvKiBPcGVyYXRvci5OT1RfSU4gKi8gXS5pbmRleE9mKHRoaXMub3ApID49IDA7XG4gICAgfVxuICAgIGdldEZsYXR0ZW5lZEZpbHRlcnMoKSB7XG4gICAgICAgIHJldHVybiBbIHRoaXMgXTtcbiAgICB9XG4gICAgZ2V0RmlsdGVycygpIHtcbiAgICAgICAgcmV0dXJuIFsgdGhpcyBdO1xuICAgIH1cbn1cblxuY2xhc3MgQ29tcG9zaXRlRmlsdGVyIGV4dGVuZHMgRmlsdGVyIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuZmlsdGVycyA9IGUsIHRoaXMub3AgPSB0LCB0aGlzLnVlID0gbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZpbHRlciBiYXNlZCBvbiB0aGUgcHJvdmlkZWQgYXJndW1lbnRzLlxuICAgICAqLyAgICBzdGF0aWMgY3JlYXRlKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDb21wb3NpdGVGaWx0ZXIoZSwgdCk7XG4gICAgfVxuICAgIG1hdGNoZXMoZSkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX2NvbXBvc2l0ZUZpbHRlcklzQ29uanVuY3Rpb24odGhpcykgPyB2b2lkIDAgPT09IHRoaXMuZmlsdGVycy5maW5kKCh0ID0+ICF0Lm1hdGNoZXMoZSkpKSA6IHZvaWQgMCAhPT0gdGhpcy5maWx0ZXJzLmZpbmQoKHQgPT4gdC5tYXRjaGVzKGUpKSk7XG4gICAgfVxuICAgIGdldEZsYXR0ZW5lZEZpbHRlcnMoKSB7XG4gICAgICAgIHJldHVybiBudWxsICE9PSB0aGlzLnVlIHx8ICh0aGlzLnVlID0gdGhpcy5maWx0ZXJzLnJlZHVjZSgoKGUsIHQpID0+IGUuY29uY2F0KHQuZ2V0RmxhdHRlbmVkRmlsdGVycygpKSksIFtdKSksIFxuICAgICAgICB0aGlzLnVlO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIGEgbXV0YWJsZSBjb3B5IG9mIGB0aGlzLmZpbHRlcnNgXG4gICAgZ2V0RmlsdGVycygpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oW10sIHRoaXMuZmlsdGVycyk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfY29tcG9zaXRlRmlsdGVySXNDb25qdW5jdGlvbihlKSB7XG4gICAgcmV0dXJuIFwiYW5kXCIgLyogQ29tcG9zaXRlT3BlcmF0b3IuQU5EICovID09PSBlLm9wO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfY29tcG9zaXRlRmlsdGVySXNEaXNqdW5jdGlvbihlKSB7XG4gICAgcmV0dXJuIFwib3JcIiAvKiBDb21wb3NpdGVPcGVyYXRvci5PUiAqLyA9PT0gZS5vcDtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBmaWx0ZXIgaXMgYSBjb25qdW5jdGlvbiBvZiBmaWVsZCBmaWx0ZXJzIG9ubHkuIFJldHVybnMgZmFsc2Ugb3RoZXJ3aXNlLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9jb21wb3NpdGVGaWx0ZXJJc0ZsYXRDb25qdW5jdGlvbihlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9jb21wb3NpdGVGaWx0ZXJJc0ZsYXQoZSkgJiYgX19QUklWQVRFX2NvbXBvc2l0ZUZpbHRlcklzQ29uanVuY3Rpb24oZSk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIHRoaXMgZmlsdGVyIGRvZXMgbm90IGNvbnRhaW4gYW55IGNvbXBvc2l0ZSBmaWx0ZXJzLiBSZXR1cm5zIGZhbHNlIG90aGVyd2lzZS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfY29tcG9zaXRlRmlsdGVySXNGbGF0KGUpIHtcbiAgICBmb3IgKGNvbnN0IHQgb2YgZS5maWx0ZXJzKSBpZiAodCBpbnN0YW5jZW9mIENvbXBvc2l0ZUZpbHRlcikgcmV0dXJuICExO1xuICAgIHJldHVybiAhMDtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2Nhbm9uaWZ5RmlsdGVyKGUpIHtcbiAgICBpZiAoZSBpbnN0YW5jZW9mIEZpZWxkRmlsdGVyKSBcbiAgICAvLyBUT0RPKGIvMjkxODMxNjUpOiBUZWNobmljYWxseSwgdGhpcyB3b24ndCBiZSB1bmlxdWUgaWYgdHdvIHZhbHVlcyBoYXZlXG4gICAgLy8gdGhlIHNhbWUgZGVzY3JpcHRpb24sIHN1Y2ggYXMgdGhlIGludCAzIGFuZCB0aGUgc3RyaW5nIFwiM1wiLiBTbyB3ZSBzaG91bGRcbiAgICAvLyBhZGQgdGhlIHR5cGVzIGluIGhlcmUgc29tZWhvdywgdG9vLlxuICAgIHJldHVybiBlLmZpZWxkLmNhbm9uaWNhbFN0cmluZygpICsgZS5vcC50b1N0cmluZygpICsgY2Fub25pY2FsSWQoZS52YWx1ZSk7XG4gICAgaWYgKF9fUFJJVkFURV9jb21wb3NpdGVGaWx0ZXJJc0ZsYXRDb25qdW5jdGlvbihlKSkgXG4gICAgLy8gT2xkZXIgU0RLIHZlcnNpb25zIHVzZSBhbiBpbXBsaWNpdCBBTkQgb3BlcmF0aW9uIGJldHdlZW4gdGhlaXIgZmlsdGVycy5cbiAgICAvLyBJbiB0aGUgbmV3IFNESyB2ZXJzaW9ucywgdGhlIGRldmVsb3BlciBtYXkgdXNlIGFuIGV4cGxpY2l0IEFORCBmaWx0ZXIuXG4gICAgLy8gVG8gc3RheSBjb25zaXN0ZW50IHdpdGggdGhlIG9sZCB1c2FnZXMsIHdlIGFkZCBhIHNwZWNpYWwgY2FzZSB0byBlbnN1cmVcbiAgICAvLyB0aGUgY2Fub25pY2FsIElEIGZvciB0aGVzZSB0d28gYXJlIHRoZSBzYW1lLiBGb3IgZXhhbXBsZTpcbiAgICAvLyBgY29sLndoZXJlRXF1YWxzKFwiYVwiLCAxKS53aGVyZUVxdWFscyhcImJcIiwgMilgIHNob3VsZCBoYXZlIHRoZSBzYW1lXG4gICAgLy8gY2Fub25pY2FsIElEIGFzIGBjb2wud2hlcmUoYW5kKGVxdWFscyhcImFcIiwxKSwgZXF1YWxzKFwiYlwiLDIpKSlgLlxuICAgIHJldHVybiBlLmZpbHRlcnMubWFwKChlID0+IF9fUFJJVkFURV9jYW5vbmlmeUZpbHRlcihlKSkpLmpvaW4oXCIsXCIpO1xuICAgIHtcbiAgICAgICAgLy8gZmlsdGVyIGluc3RhbmNlb2YgQ29tcG9zaXRlRmlsdGVyXG4gICAgICAgIGNvbnN0IHQgPSBlLmZpbHRlcnMubWFwKChlID0+IF9fUFJJVkFURV9jYW5vbmlmeUZpbHRlcihlKSkpLmpvaW4oXCIsXCIpO1xuICAgICAgICByZXR1cm4gYCR7ZS5vcH0oJHt0fSlgO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2ZpbHRlckVxdWFscyhlLCB0KSB7XG4gICAgcmV0dXJuIGUgaW5zdGFuY2VvZiBGaWVsZEZpbHRlciA/IGZ1bmN0aW9uIF9fUFJJVkFURV9maWVsZEZpbHRlckVxdWFscyhlLCB0KSB7XG4gICAgICAgIHJldHVybiB0IGluc3RhbmNlb2YgRmllbGRGaWx0ZXIgJiYgZS5vcCA9PT0gdC5vcCAmJiBlLmZpZWxkLmlzRXF1YWwodC5maWVsZCkgJiYgX19QUklWQVRFX3ZhbHVlRXF1YWxzKGUudmFsdWUsIHQudmFsdWUpO1xuICAgIH0oZSwgdCkgOiBlIGluc3RhbmNlb2YgQ29tcG9zaXRlRmlsdGVyID8gZnVuY3Rpb24gX19QUklWQVRFX2NvbXBvc2l0ZUZpbHRlckVxdWFscyhlLCB0KSB7XG4gICAgICAgIGlmICh0IGluc3RhbmNlb2YgQ29tcG9zaXRlRmlsdGVyICYmIGUub3AgPT09IHQub3AgJiYgZS5maWx0ZXJzLmxlbmd0aCA9PT0gdC5maWx0ZXJzLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIGUuZmlsdGVycy5yZWR1Y2UoKChlLCBuLCByKSA9PiBlICYmIF9fUFJJVkFURV9maWx0ZXJFcXVhbHMobiwgdC5maWx0ZXJzW3JdKSksICEwKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxuICAgIC8qKlxuICogUmV0dXJucyBhIG5ldyBjb21wb3NpdGUgZmlsdGVyIHRoYXQgY29udGFpbnMgYWxsIGZpbHRlciBmcm9tXG4gKiBgY29tcG9zaXRlRmlsdGVyYCBwbHVzIGFsbCB0aGUgZ2l2ZW4gZmlsdGVycyBpbiBgb3RoZXJGaWx0ZXJzYC5cbiAqLyAoZSwgdCkgOiB2b2lkIGZhaWwoKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2NvbXBvc2l0ZUZpbHRlcldpdGhBZGRlZEZpbHRlcnMoZSwgdCkge1xuICAgIGNvbnN0IG4gPSBlLmZpbHRlcnMuY29uY2F0KHQpO1xuICAgIHJldHVybiBDb21wb3NpdGVGaWx0ZXIuY3JlYXRlKG4sIGUub3ApO1xufVxuXG4vKiogUmV0dXJucyBhIGRlYnVnIGRlc2NyaXB0aW9uIGZvciBgZmlsdGVyYC4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3N0cmluZ2lmeUZpbHRlcihlKSB7XG4gICAgcmV0dXJuIGUgaW5zdGFuY2VvZiBGaWVsZEZpbHRlciA/IGZ1bmN0aW9uIF9fUFJJVkFURV9zdHJpbmdpZnlGaWVsZEZpbHRlcihlKSB7XG4gICAgICAgIHJldHVybiBgJHtlLmZpZWxkLmNhbm9uaWNhbFN0cmluZygpfSAke2Uub3B9ICR7Y2Fub25pY2FsSWQoZS52YWx1ZSl9YDtcbiAgICB9XG4gICAgLyoqIEZpbHRlciB0aGF0IG1hdGNoZXMgb24ga2V5IGZpZWxkcyAoaS5lLiAnX19uYW1lX18nKS4gKi8gKGUpIDogZSBpbnN0YW5jZW9mIENvbXBvc2l0ZUZpbHRlciA/IGZ1bmN0aW9uIF9fUFJJVkFURV9zdHJpbmdpZnlDb21wb3NpdGVGaWx0ZXIoZSkge1xuICAgICAgICByZXR1cm4gZS5vcC50b1N0cmluZygpICsgXCIge1wiICsgZS5nZXRGaWx0ZXJzKCkubWFwKF9fUFJJVkFURV9zdHJpbmdpZnlGaWx0ZXIpLmpvaW4oXCIgLFwiKSArIFwifVwiO1xuICAgIH0oZSkgOiBcIkZpbHRlclwiO1xufVxuXG5jbGFzcyBfX1BSSVZBVEVfS2V5RmllbGRGaWx0ZXIgZXh0ZW5kcyBGaWVsZEZpbHRlciB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbikge1xuICAgICAgICBzdXBlcihlLCB0LCBuKSwgdGhpcy5rZXkgPSBEb2N1bWVudEtleS5mcm9tTmFtZShuLnJlZmVyZW5jZVZhbHVlKTtcbiAgICB9XG4gICAgbWF0Y2hlcyhlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBEb2N1bWVudEtleS5jb21wYXJhdG9yKGUua2V5LCB0aGlzLmtleSk7XG4gICAgICAgIHJldHVybiB0aGlzLm1hdGNoZXNDb21wYXJpc29uKHQpO1xuICAgIH1cbn1cblxuLyoqIEZpbHRlciB0aGF0IG1hdGNoZXMgb24ga2V5IGZpZWxkcyB3aXRoaW4gYW4gYXJyYXkuICovIGNsYXNzIF9fUFJJVkFURV9LZXlGaWVsZEluRmlsdGVyIGV4dGVuZHMgRmllbGRGaWx0ZXIge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgc3VwZXIoZSwgXCJpblwiIC8qIE9wZXJhdG9yLklOICovICwgdCksIHRoaXMua2V5cyA9IF9fUFJJVkFURV9leHRyYWN0RG9jdW1lbnRLZXlzRnJvbUFycmF5VmFsdWUoXCJpblwiIC8qIE9wZXJhdG9yLklOICovICwgdCk7XG4gICAgfVxuICAgIG1hdGNoZXMoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5rZXlzLnNvbWUoKHQgPT4gdC5pc0VxdWFsKGUua2V5KSkpO1xuICAgIH1cbn1cblxuLyoqIEZpbHRlciB0aGF0IG1hdGNoZXMgb24ga2V5IGZpZWxkcyBub3QgcHJlc2VudCB3aXRoaW4gYW4gYXJyYXkuICovIGNsYXNzIF9fUFJJVkFURV9LZXlGaWVsZE5vdEluRmlsdGVyIGV4dGVuZHMgRmllbGRGaWx0ZXIge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgc3VwZXIoZSwgXCJub3QtaW5cIiAvKiBPcGVyYXRvci5OT1RfSU4gKi8gLCB0KSwgdGhpcy5rZXlzID0gX19QUklWQVRFX2V4dHJhY3REb2N1bWVudEtleXNGcm9tQXJyYXlWYWx1ZShcIm5vdC1pblwiIC8qIE9wZXJhdG9yLk5PVF9JTiAqLyAsIHQpO1xuICAgIH1cbiAgICBtYXRjaGVzKGUpIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLmtleXMuc29tZSgodCA9PiB0LmlzRXF1YWwoZS5rZXkpKSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZXh0cmFjdERvY3VtZW50S2V5c0Zyb21BcnJheVZhbHVlKGUsIHQpIHtcbiAgICB2YXIgbjtcbiAgICByZXR1cm4gKChudWxsID09PSAobiA9IHQuYXJyYXlWYWx1ZSkgfHwgdm9pZCAwID09PSBuID8gdm9pZCAwIDogbi52YWx1ZXMpIHx8IFtdKS5tYXAoKGUgPT4gRG9jdW1lbnRLZXkuZnJvbU5hbWUoZS5yZWZlcmVuY2VWYWx1ZSkpKTtcbn1cblxuLyoqIEEgRmlsdGVyIHRoYXQgaW1wbGVtZW50cyB0aGUgYXJyYXktY29udGFpbnMgb3BlcmF0b3IuICovIGNsYXNzIF9fUFJJVkFURV9BcnJheUNvbnRhaW5zRmlsdGVyIGV4dGVuZHMgRmllbGRGaWx0ZXIge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgc3VwZXIoZSwgXCJhcnJheS1jb250YWluc1wiIC8qIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TICovICwgdCk7XG4gICAgfVxuICAgIG1hdGNoZXMoZSkge1xuICAgICAgICBjb25zdCB0ID0gZS5kYXRhLmZpZWxkKHRoaXMuZmllbGQpO1xuICAgICAgICByZXR1cm4gaXNBcnJheSh0KSAmJiBfX1BSSVZBVEVfYXJyYXlWYWx1ZUNvbnRhaW5zKHQuYXJyYXlWYWx1ZSwgdGhpcy52YWx1ZSk7XG4gICAgfVxufVxuXG4vKiogQSBGaWx0ZXIgdGhhdCBpbXBsZW1lbnRzIHRoZSBJTiBvcGVyYXRvci4gKi8gY2xhc3MgX19QUklWQVRFX0luRmlsdGVyIGV4dGVuZHMgRmllbGRGaWx0ZXIge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgc3VwZXIoZSwgXCJpblwiIC8qIE9wZXJhdG9yLklOICovICwgdCk7XG4gICAgfVxuICAgIG1hdGNoZXMoZSkge1xuICAgICAgICBjb25zdCB0ID0gZS5kYXRhLmZpZWxkKHRoaXMuZmllbGQpO1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gdCAmJiBfX1BSSVZBVEVfYXJyYXlWYWx1ZUNvbnRhaW5zKHRoaXMudmFsdWUuYXJyYXlWYWx1ZSwgdCk7XG4gICAgfVxufVxuXG4vKiogQSBGaWx0ZXIgdGhhdCBpbXBsZW1lbnRzIHRoZSBub3QtaW4gb3BlcmF0b3IuICovIGNsYXNzIF9fUFJJVkFURV9Ob3RJbkZpbHRlciBleHRlbmRzIEZpZWxkRmlsdGVyIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHN1cGVyKGUsIFwibm90LWluXCIgLyogT3BlcmF0b3IuTk9UX0lOICovICwgdCk7XG4gICAgfVxuICAgIG1hdGNoZXMoZSkge1xuICAgICAgICBpZiAoX19QUklWQVRFX2FycmF5VmFsdWVDb250YWlucyh0aGlzLnZhbHVlLmFycmF5VmFsdWUsIHtcbiAgICAgICAgICAgIG51bGxWYWx1ZTogXCJOVUxMX1ZBTFVFXCJcbiAgICAgICAgfSkpIHJldHVybiAhMTtcbiAgICAgICAgY29uc3QgdCA9IGUuZGF0YS5maWVsZCh0aGlzLmZpZWxkKTtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IHQgJiYgIV9fUFJJVkFURV9hcnJheVZhbHVlQ29udGFpbnModGhpcy52YWx1ZS5hcnJheVZhbHVlLCB0KTtcbiAgICB9XG59XG5cbi8qKiBBIEZpbHRlciB0aGF0IGltcGxlbWVudHMgdGhlIGFycmF5LWNvbnRhaW5zLWFueSBvcGVyYXRvci4gKi8gY2xhc3MgX19QUklWQVRFX0FycmF5Q29udGFpbnNBbnlGaWx0ZXIgZXh0ZW5kcyBGaWVsZEZpbHRlciB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICBzdXBlcihlLCBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TX0FOWSAqLyAsIHQpO1xuICAgIH1cbiAgICBtYXRjaGVzKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IGUuZGF0YS5maWVsZCh0aGlzLmZpZWxkKTtcbiAgICAgICAgcmV0dXJuICEoIWlzQXJyYXkodCkgfHwgIXQuYXJyYXlWYWx1ZS52YWx1ZXMpICYmIHQuYXJyYXlWYWx1ZS52YWx1ZXMuc29tZSgoZSA9PiBfX1BSSVZBVEVfYXJyYXlWYWx1ZUNvbnRhaW5zKHRoaXMudmFsdWUuYXJyYXlWYWx1ZSwgZSkpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBWaXNpYmxlIGZvciB0ZXN0aW5nXG5jbGFzcyBfX1BSSVZBVEVfVGFyZ2V0SW1wbCB7XG4gICAgY29uc3RydWN0b3IoZSwgdCA9IG51bGwsIG4gPSBbXSwgciA9IFtdLCBpID0gbnVsbCwgcyA9IG51bGwsIG8gPSBudWxsKSB7XG4gICAgICAgIHRoaXMucGF0aCA9IGUsIHRoaXMuY29sbGVjdGlvbkdyb3VwID0gdCwgdGhpcy5vcmRlckJ5ID0gbiwgdGhpcy5maWx0ZXJzID0gciwgdGhpcy5saW1pdCA9IGksIFxuICAgICAgICB0aGlzLnN0YXJ0QXQgPSBzLCB0aGlzLmVuZEF0ID0gbywgdGhpcy5jZSA9IG51bGw7XG4gICAgfVxufVxuXG4vKipcbiAqIEluaXRpYWxpemVzIGEgVGFyZ2V0IHdpdGggYSBwYXRoIGFuZCBvcHRpb25hbCBhZGRpdGlvbmFsIHF1ZXJ5IGNvbnN0cmFpbnRzLlxuICogUGF0aCBtdXN0IGN1cnJlbnRseSBiZSBlbXB0eSBpZiB0aGlzIGlzIGEgY29sbGVjdGlvbiBncm91cCBxdWVyeS5cbiAqXG4gKiBOT1RFOiB5b3Ugc2hvdWxkIGFsd2F5cyBjb25zdHJ1Y3QgYFRhcmdldGAgZnJvbSBgUXVlcnkudG9UYXJnZXRgIGluc3RlYWQgb2ZcbiAqIHVzaW5nIHRoaXMgZmFjdG9yeSBtZXRob2QsIGJlY2F1c2UgYFF1ZXJ5YCBwcm92aWRlcyBhbiBpbXBsaWNpdCBgb3JkZXJCeWBcbiAqIHByb3BlcnR5LlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdUYXJnZXQoZSwgdCA9IG51bGwsIG4gPSBbXSwgciA9IFtdLCBpID0gbnVsbCwgcyA9IG51bGwsIG8gPSBudWxsKSB7XG4gICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfVGFyZ2V0SW1wbChlLCB0LCBuLCByLCBpLCBzLCBvKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2Nhbm9uaWZ5VGFyZ2V0KGUpIHtcbiAgICBjb25zdCB0ID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICBpZiAobnVsbCA9PT0gdC5jZSkge1xuICAgICAgICBsZXQgZSA9IHQucGF0aC5jYW5vbmljYWxTdHJpbmcoKTtcbiAgICAgICAgbnVsbCAhPT0gdC5jb2xsZWN0aW9uR3JvdXAgJiYgKGUgKz0gXCJ8Y2c6XCIgKyB0LmNvbGxlY3Rpb25Hcm91cCksIGUgKz0gXCJ8ZjpcIiwgZSArPSB0LmZpbHRlcnMubWFwKChlID0+IF9fUFJJVkFURV9jYW5vbmlmeUZpbHRlcihlKSkpLmpvaW4oXCIsXCIpLCBcbiAgICAgICAgZSArPSBcInxvYjpcIiwgZSArPSB0Lm9yZGVyQnkubWFwKChlID0+IGZ1bmN0aW9uIF9fUFJJVkFURV9jYW5vbmlmeU9yZGVyQnkoZSkge1xuICAgICAgICAgICAgLy8gVE9ETyhiLzI5MTgzMTY1KTogTWFrZSB0aGlzIGNvbGxpc2lvbiByb2J1c3QuXG4gICAgICAgICAgICByZXR1cm4gZS5maWVsZC5jYW5vbmljYWxTdHJpbmcoKSArIGUuZGlyO1xuICAgICAgICB9KGUpKSkuam9pbihcIixcIiksIF9fUFJJVkFURV9pc051bGxPclVuZGVmaW5lZCh0LmxpbWl0KSB8fCAoZSArPSBcInxsOlwiLCBlICs9IHQubGltaXQpLCBcbiAgICAgICAgdC5zdGFydEF0ICYmIChlICs9IFwifGxiOlwiLCBlICs9IHQuc3RhcnRBdC5pbmNsdXNpdmUgPyBcImI6XCIgOiBcImE6XCIsIGUgKz0gdC5zdGFydEF0LnBvc2l0aW9uLm1hcCgoZSA9PiBjYW5vbmljYWxJZChlKSkpLmpvaW4oXCIsXCIpKSwgXG4gICAgICAgIHQuZW5kQXQgJiYgKGUgKz0gXCJ8dWI6XCIsIGUgKz0gdC5lbmRBdC5pbmNsdXNpdmUgPyBcImE6XCIgOiBcImI6XCIsIGUgKz0gdC5lbmRBdC5wb3NpdGlvbi5tYXAoKGUgPT4gY2Fub25pY2FsSWQoZSkpKS5qb2luKFwiLFwiKSksIFxuICAgICAgICB0LmNlID0gZTtcbiAgICB9XG4gICAgcmV0dXJuIHQuY2U7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV90YXJnZXRFcXVhbHMoZSwgdCkge1xuICAgIGlmIChlLmxpbWl0ICE9PSB0LmxpbWl0KSByZXR1cm4gITE7XG4gICAgaWYgKGUub3JkZXJCeS5sZW5ndGggIT09IHQub3JkZXJCeS5sZW5ndGgpIHJldHVybiAhMTtcbiAgICBmb3IgKGxldCBuID0gMDsgbiA8IGUub3JkZXJCeS5sZW5ndGg7IG4rKykgaWYgKCFfX1BSSVZBVEVfb3JkZXJCeUVxdWFscyhlLm9yZGVyQnlbbl0sIHQub3JkZXJCeVtuXSkpIHJldHVybiAhMTtcbiAgICBpZiAoZS5maWx0ZXJzLmxlbmd0aCAhPT0gdC5maWx0ZXJzLmxlbmd0aCkgcmV0dXJuICExO1xuICAgIGZvciAobGV0IG4gPSAwOyBuIDwgZS5maWx0ZXJzLmxlbmd0aDsgbisrKSBpZiAoIV9fUFJJVkFURV9maWx0ZXJFcXVhbHMoZS5maWx0ZXJzW25dLCB0LmZpbHRlcnNbbl0pKSByZXR1cm4gITE7XG4gICAgcmV0dXJuIGUuY29sbGVjdGlvbkdyb3VwID09PSB0LmNvbGxlY3Rpb25Hcm91cCAmJiAoISFlLnBhdGguaXNFcXVhbCh0LnBhdGgpICYmICghIV9fUFJJVkFURV9ib3VuZEVxdWFscyhlLnN0YXJ0QXQsIHQuc3RhcnRBdCkgJiYgX19QUklWQVRFX2JvdW5kRXF1YWxzKGUuZW5kQXQsIHQuZW5kQXQpKSk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV90YXJnZXRJc0RvY3VtZW50VGFyZ2V0KGUpIHtcbiAgICByZXR1cm4gRG9jdW1lbnRLZXkuaXNEb2N1bWVudEtleShlLnBhdGgpICYmIG51bGwgPT09IGUuY29sbGVjdGlvbkdyb3VwICYmIDAgPT09IGUuZmlsdGVycy5sZW5ndGg7XG59XG5cbi8qKiBSZXR1cm5zIHRoZSBmaWVsZCBmaWx0ZXJzIHRoYXQgdGFyZ2V0IHRoZSBnaXZlbiBmaWVsZCBwYXRoLiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfdGFyZ2V0R2V0RmllbGRGaWx0ZXJzRm9yUGF0aChlLCB0KSB7XG4gICAgcmV0dXJuIGUuZmlsdGVycy5maWx0ZXIoKGUgPT4gZSBpbnN0YW5jZW9mIEZpZWxkRmlsdGVyICYmIGUuZmllbGQuaXNFcXVhbCh0KSkpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIHZhbHVlcyB0aGF0IGFyZSB1c2VkIGluIEFSUkFZX0NPTlRBSU5TIG9yIEFSUkFZX0NPTlRBSU5TX0FOWVxuICogZmlsdGVycy4gUmV0dXJucyBgbnVsbGAgaWYgdGhlcmUgYXJlIG5vIHN1Y2ggZmlsdGVycy5cbiAqL1xuLyoqXG4gKiBSZXR1cm5zIHRoZSB2YWx1ZSB0byB1c2UgYXMgdGhlIGxvd2VyIGJvdW5kIGZvciBhc2NlbmRpbmcgaW5kZXggc2VnbWVudCBhdFxuICogdGhlIHByb3ZpZGVkIGBmaWVsZFBhdGhgIChvciB0aGUgdXBwZXIgYm91bmQgZm9yIGFuIGRlc2NlbmRpbmcgc2VnbWVudCkuXG4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV90YXJnZXRHZXRBc2NlbmRpbmdCb3VuZChlLCB0LCBuKSB7XG4gICAgbGV0IHIgPSBuZSwgaSA9ICEwO1xuICAgIC8vIFByb2Nlc3MgYWxsIGZpbHRlcnMgdG8gZmluZCBhIHZhbHVlIGZvciB0aGUgY3VycmVudCBmaWVsZCBzZWdtZW50XG4gICAgZm9yIChjb25zdCBuIG9mIF9fUFJJVkFURV90YXJnZXRHZXRGaWVsZEZpbHRlcnNGb3JQYXRoKGUsIHQpKSB7XG4gICAgICAgIGxldCBlID0gbmUsIHQgPSAhMDtcbiAgICAgICAgc3dpdGNoIChuLm9wKSB7XG4gICAgICAgICAgY2FzZSBcIjxcIiAvKiBPcGVyYXRvci5MRVNTX1RIQU4gKi8gOlxuICAgICAgICAgIGNhc2UgXCI8PVwiIC8qIE9wZXJhdG9yLkxFU1NfVEhBTl9PUl9FUVVBTCAqLyA6XG4gICAgICAgICAgICBlID0gX19QUklWQVRFX3ZhbHVlc0dldExvd2VyQm91bmQobi52YWx1ZSk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgXCI9PVwiIC8qIE9wZXJhdG9yLkVRVUFMICovIDpcbiAgICAgICAgICBjYXNlIFwiaW5cIiAvKiBPcGVyYXRvci5JTiAqLyA6XG4gICAgICAgICAgY2FzZSBcIj49XCIgLyogT3BlcmF0b3IuR1JFQVRFUl9USEFOX09SX0VRVUFMICovIDpcbiAgICAgICAgICAgIGUgPSBuLnZhbHVlO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIFwiPlwiIC8qIE9wZXJhdG9yLkdSRUFURVJfVEhBTiAqLyA6XG4gICAgICAgICAgICBlID0gbi52YWx1ZSwgdCA9ICExO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIFwiIT1cIiAvKiBPcGVyYXRvci5OT1RfRVFVQUwgKi8gOlxuICAgICAgICAgIGNhc2UgXCJub3QtaW5cIiAvKiBPcGVyYXRvci5OT1RfSU4gKi8gOlxuICAgICAgICAgICAgZSA9IG5lO1xuIC8vIFJlbWFpbmluZyBmaWx0ZXJzIGNhbm5vdCBiZSB1c2VkIGFzIGxvd2VyIGJvdW5kcy5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgIF9fUFJJVkFURV9sb3dlckJvdW5kQ29tcGFyZSh7XG4gICAgICAgICAgICB2YWx1ZTogcixcbiAgICAgICAgICAgIGluY2x1c2l2ZTogaVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICB2YWx1ZTogZSxcbiAgICAgICAgICAgIGluY2x1c2l2ZTogdFxuICAgICAgICB9KSA8IDAgJiYgKHIgPSBlLCBpID0gdCk7XG4gICAgfVxuICAgIC8vIElmIHRoZXJlIGlzIGFuIGFkZGl0aW9uYWwgYm91bmQsIGNvbXBhcmUgdGhlIHZhbHVlcyBhZ2FpbnN0IHRoZSBleGlzdGluZ1xuICAgIC8vIHJhbmdlIHRvIHNlZSBpZiB3ZSBjYW4gbmFycm93IHRoZSBzY29wZS5cbiAgICAgICAgaWYgKG51bGwgIT09IG4pIGZvciAobGV0IHMgPSAwOyBzIDwgZS5vcmRlckJ5Lmxlbmd0aDsgKytzKSB7XG4gICAgICAgIGlmIChlLm9yZGVyQnlbc10uZmllbGQuaXNFcXVhbCh0KSkge1xuICAgICAgICAgICAgY29uc3QgZSA9IG4ucG9zaXRpb25bc107XG4gICAgICAgICAgICBfX1BSSVZBVEVfbG93ZXJCb3VuZENvbXBhcmUoe1xuICAgICAgICAgICAgICAgIHZhbHVlOiByLFxuICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogaVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBlLFxuICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogbi5pbmNsdXNpdmVcbiAgICAgICAgICAgIH0pIDwgMCAmJiAociA9IGUsIGkgPSBuLmluY2x1c2l2ZSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICB2YWx1ZTogcixcbiAgICAgICAgaW5jbHVzaXZlOiBpXG4gICAgfTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSB2YWx1ZSB0byB1c2UgYXMgdGhlIHVwcGVyIGJvdW5kIGZvciBhc2NlbmRpbmcgaW5kZXggc2VnbWVudCBhdFxuICogdGhlIHByb3ZpZGVkIGBmaWVsZFBhdGhgIChvciB0aGUgbG93ZXIgYm91bmQgZm9yIGEgZGVzY2VuZGluZyBzZWdtZW50KS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfdGFyZ2V0R2V0RGVzY2VuZGluZ0JvdW5kKGUsIHQsIG4pIHtcbiAgICBsZXQgciA9IHRlLCBpID0gITA7XG4gICAgLy8gUHJvY2VzcyBhbGwgZmlsdGVycyB0byBmaW5kIGEgdmFsdWUgZm9yIHRoZSBjdXJyZW50IGZpZWxkIHNlZ21lbnRcbiAgICBmb3IgKGNvbnN0IG4gb2YgX19QUklWQVRFX3RhcmdldEdldEZpZWxkRmlsdGVyc0ZvclBhdGgoZSwgdCkpIHtcbiAgICAgICAgbGV0IGUgPSB0ZSwgdCA9ICEwO1xuICAgICAgICBzd2l0Y2ggKG4ub3ApIHtcbiAgICAgICAgICBjYXNlIFwiPj1cIiAvKiBPcGVyYXRvci5HUkVBVEVSX1RIQU5fT1JfRVFVQUwgKi8gOlxuICAgICAgICAgIGNhc2UgXCI+XCIgLyogT3BlcmF0b3IuR1JFQVRFUl9USEFOICovIDpcbiAgICAgICAgICAgIGUgPSBfX1BSSVZBVEVfdmFsdWVzR2V0VXBwZXJCb3VuZChuLnZhbHVlKSwgdCA9ICExO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIFwiPT1cIiAvKiBPcGVyYXRvci5FUVVBTCAqLyA6XG4gICAgICAgICAgY2FzZSBcImluXCIgLyogT3BlcmF0b3IuSU4gKi8gOlxuICAgICAgICAgIGNhc2UgXCI8PVwiIC8qIE9wZXJhdG9yLkxFU1NfVEhBTl9PUl9FUVVBTCAqLyA6XG4gICAgICAgICAgICBlID0gbi52YWx1ZTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBcIjxcIiAvKiBPcGVyYXRvci5MRVNTX1RIQU4gKi8gOlxuICAgICAgICAgICAgZSA9IG4udmFsdWUsIHQgPSAhMTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBcIiE9XCIgLyogT3BlcmF0b3IuTk9UX0VRVUFMICovIDpcbiAgICAgICAgICBjYXNlIFwibm90LWluXCIgLyogT3BlcmF0b3IuTk9UX0lOICovIDpcbiAgICAgICAgICAgIGUgPSB0ZTtcbiAvLyBSZW1haW5pbmcgZmlsdGVycyBjYW5ub3QgYmUgdXNlZCBhcyB1cHBlciBib3VuZHMuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICBfX1BSSVZBVEVfdXBwZXJCb3VuZENvbXBhcmUoe1xuICAgICAgICAgICAgdmFsdWU6IHIsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IGlcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgdmFsdWU6IGUsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRcbiAgICAgICAgfSkgPiAwICYmIChyID0gZSwgaSA9IHQpO1xuICAgIH1cbiAgICAvLyBJZiB0aGVyZSBpcyBhbiBhZGRpdGlvbmFsIGJvdW5kLCBjb21wYXJlIHRoZSB2YWx1ZXMgYWdhaW5zdCB0aGUgZXhpc3RpbmdcbiAgICAvLyByYW5nZSB0byBzZWUgaWYgd2UgY2FuIG5hcnJvdyB0aGUgc2NvcGUuXG4gICAgICAgIGlmIChudWxsICE9PSBuKSBmb3IgKGxldCBzID0gMDsgcyA8IGUub3JkZXJCeS5sZW5ndGg7ICsrcykge1xuICAgICAgICBpZiAoZS5vcmRlckJ5W3NdLmZpZWxkLmlzRXF1YWwodCkpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBuLnBvc2l0aW9uW3NdO1xuICAgICAgICAgICAgX19QUklWQVRFX3VwcGVyQm91bmRDb21wYXJlKHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogcixcbiAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IGlcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogZSxcbiAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IG4uaW5jbHVzaXZlXG4gICAgICAgICAgICB9KSA+IDAgJiYgKHIgPSBlLCBpID0gbi5pbmNsdXNpdmUpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdmFsdWU6IHIsXG4gICAgICAgIGluY2x1c2l2ZTogaVxuICAgIH07XG59XG5cbi8qKiBSZXR1cm5zIHRoZSBudW1iZXIgb2Ygc2VnbWVudHMgb2YgYSBwZXJmZWN0IGluZGV4IGZvciB0aGlzIHRhcmdldC4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFF1ZXJ5IGVuY2Fwc3VsYXRlcyBhbGwgdGhlIHF1ZXJ5IGF0dHJpYnV0ZXMgd2Ugc3VwcG9ydCBpbiB0aGUgU0RLLiBJdCBjYW5cbiAqIGJlIHJ1biBhZ2FpbnN0IHRoZSBMb2NhbFN0b3JlLCBhcyB3ZWxsIGFzIGJlIGNvbnZlcnRlZCB0byBhIGBUYXJnZXRgIHRvXG4gKiBxdWVyeSB0aGUgUmVtb3RlU3RvcmUgcmVzdWx0cy5cbiAqXG4gKiBWaXNpYmxlIGZvciB0ZXN0aW5nLlxuICovXG5jbGFzcyBfX1BSSVZBVEVfUXVlcnlJbXBsIHtcbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplcyBhIFF1ZXJ5IHdpdGggYSBwYXRoIGFuZCBvcHRpb25hbCBhZGRpdGlvbmFsIHF1ZXJ5IGNvbnN0cmFpbnRzLlxuICAgICAqIFBhdGggbXVzdCBjdXJyZW50bHkgYmUgZW1wdHkgaWYgdGhpcyBpcyBhIGNvbGxlY3Rpb24gZ3JvdXAgcXVlcnkuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZSwgdCA9IG51bGwsIG4gPSBbXSwgciA9IFtdLCBpID0gbnVsbCwgcyA9IFwiRlwiIC8qIExpbWl0VHlwZS5GaXJzdCAqLyAsIG8gPSBudWxsLCBfID0gbnVsbCkge1xuICAgICAgICB0aGlzLnBhdGggPSBlLCB0aGlzLmNvbGxlY3Rpb25Hcm91cCA9IHQsIHRoaXMuZXhwbGljaXRPcmRlckJ5ID0gbiwgdGhpcy5maWx0ZXJzID0gciwgXG4gICAgICAgIHRoaXMubGltaXQgPSBpLCB0aGlzLmxpbWl0VHlwZSA9IHMsIHRoaXMuc3RhcnRBdCA9IG8sIHRoaXMuZW5kQXQgPSBfLCB0aGlzLmxlID0gbnVsbCwgXG4gICAgICAgIC8vIFRoZSBjb3JyZXNwb25kaW5nIGBUYXJnZXRgIG9mIHRoaXMgYFF1ZXJ5YCBpbnN0YW5jZSwgZm9yIHVzZSB3aXRoXG4gICAgICAgIC8vIG5vbi1hZ2dyZWdhdGUgcXVlcmllcy5cbiAgICAgICAgdGhpcy5oZSA9IG51bGwsIFxuICAgICAgICAvLyBUaGUgY29ycmVzcG9uZGluZyBgVGFyZ2V0YCBvZiB0aGlzIGBRdWVyeWAgaW5zdGFuY2UsIGZvciB1c2Ugd2l0aFxuICAgICAgICAvLyBhZ2dyZWdhdGUgcXVlcmllcy4gVW5saWtlIHRhcmdldHMgZm9yIG5vbi1hZ2dyZWdhdGUgcXVlcmllcyxcbiAgICAgICAgLy8gYWdncmVnYXRlIHF1ZXJ5IHRhcmdldHMgZG8gbm90IGNvbnRhaW4gbm9ybWFsaXplZCBvcmRlci1ieXMsIHRoZXkgb25seVxuICAgICAgICAvLyBjb250YWluIGV4cGxpY2l0IG9yZGVyLWJ5cy5cbiAgICAgICAgdGhpcy5QZSA9IG51bGwsIHRoaXMuc3RhcnRBdCwgdGhpcy5lbmRBdDtcbiAgICB9XG59XG5cbi8qKiBDcmVhdGVzIGEgbmV3IFF1ZXJ5IGluc3RhbmNlIHdpdGggdGhlIG9wdGlvbnMgcHJvdmlkZWQuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdRdWVyeShlLCB0LCBuLCByLCBpLCBzLCBvLCBfKSB7XG4gICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfUXVlcnlJbXBsKGUsIHQsIG4sIHIsIGksIHMsIG8sIF8pO1xufVxuXG4vKiogQ3JlYXRlcyBhIG5ldyBRdWVyeSBmb3IgYSBxdWVyeSB0aGF0IG1hdGNoZXMgYWxsIGRvY3VtZW50cyBhdCBgcGF0aGAgKi8gZnVuY3Rpb24gX19QUklWQVRFX25ld1F1ZXJ5Rm9yUGF0aChlKSB7XG4gICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfUXVlcnlJbXBsKGUpO1xufVxuXG4vKipcbiAqIEhlbHBlciB0byBjb252ZXJ0IGEgY29sbGVjdGlvbiBncm91cCBxdWVyeSBpbnRvIGEgY29sbGVjdGlvbiBxdWVyeSBhdCBhXG4gKiBzcGVjaWZpYyBwYXRoLiBUaGlzIGlzIHVzZWQgd2hlbiBleGVjdXRpbmcgY29sbGVjdGlvbiBncm91cCBxdWVyaWVzLCBzaW5jZVxuICogd2UgaGF2ZSB0byBzcGxpdCB0aGUgcXVlcnkgaW50byBhIHNldCBvZiBjb2xsZWN0aW9uIHF1ZXJpZXMgYXQgbXVsdGlwbGVcbiAqIHBhdGhzLlxuICovXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIHF1ZXJ5IGRvZXMgbm90IHNwZWNpZnkgYW55IHF1ZXJ5IGNvbnN0cmFpbnRzIHRoYXRcbiAqIGNvdWxkIHJlbW92ZSByZXN1bHRzLlxuICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfcXVlcnlNYXRjaGVzQWxsRG9jdW1lbnRzKGUpIHtcbiAgICByZXR1cm4gMCA9PT0gZS5maWx0ZXJzLmxlbmd0aCAmJiBudWxsID09PSBlLmxpbWl0ICYmIG51bGwgPT0gZS5zdGFydEF0ICYmIG51bGwgPT0gZS5lbmRBdCAmJiAoMCA9PT0gZS5leHBsaWNpdE9yZGVyQnkubGVuZ3RoIHx8IDEgPT09IGUuZXhwbGljaXRPcmRlckJ5Lmxlbmd0aCAmJiBlLmV4cGxpY2l0T3JkZXJCeVswXS5maWVsZC5pc0tleUZpZWxkKCkpO1xufVxuXG4vLyBSZXR1cm5zIHRoZSBzb3J0ZWQgc2V0IG9mIGluZXF1YWxpdHkgZmlsdGVyIGZpZWxkcyB1c2VkIGluIHRoaXMgcXVlcnkuXG4vKipcbiAqIFJldHVybnMgd2hldGhlciB0aGUgcXVlcnkgbWF0Y2hlcyBhIGNvbGxlY3Rpb24gZ3JvdXAgcmF0aGVyIHRoYW4gYSBzcGVjaWZpY1xuICogY29sbGVjdGlvbi5cbiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX2lzQ29sbGVjdGlvbkdyb3VwUXVlcnkoZSkge1xuICAgIHJldHVybiBudWxsICE9PSBlLmNvbGxlY3Rpb25Hcm91cDtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBub3JtYWxpemVkIG9yZGVyLWJ5IGNvbnN0cmFpbnQgdGhhdCBpcyB1c2VkIHRvIGV4ZWN1dGUgdGhlIFF1ZXJ5LFxuICogd2hpY2ggY2FuIGJlIGRpZmZlcmVudCBmcm9tIHRoZSBvcmRlci1ieSBjb25zdHJhaW50cyB0aGUgdXNlciBwcm92aWRlZCAoZS5nLlxuICogdGhlIFNESyBhbmQgYmFja2VuZCBhbHdheXMgb3JkZXJzIGJ5IGBfX25hbWVfX2ApLiBUaGUgbm9ybWFsaXplZCBvcmRlci1ieVxuICogaW5jbHVkZXMgaW1wbGljaXQgb3JkZXItYnlzIGluIGFkZGl0aW9uIHRvIHRoZSBleHBsaWNpdCB1c2VyIHByb3ZpZGVkXG4gKiBvcmRlci1ieXMuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3F1ZXJ5Tm9ybWFsaXplZE9yZGVyQnkoZSkge1xuICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgIGlmIChudWxsID09PSB0LmxlKSB7XG4gICAgICAgIHQubGUgPSBbXTtcbiAgICAgICAgY29uc3QgZSA9IG5ldyBTZXQ7XG4gICAgICAgIC8vIEFueSBleHBsaWNpdCBvcmRlciBieSBmaWVsZHMgc2hvdWxkIGJlIGFkZGVkIGFzIGlzLlxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbiBvZiB0LmV4cGxpY2l0T3JkZXJCeSkgdC5sZS5wdXNoKG4pLCBlLmFkZChuLmZpZWxkLmNhbm9uaWNhbFN0cmluZygpKTtcbiAgICAgICAgLy8gVGhlIG9yZGVyIG9mIHRoZSBpbXBsaWNpdCBvcmRlcmluZyBhbHdheXMgbWF0Y2hlcyB0aGUgbGFzdCBleHBsaWNpdCBvcmRlciBieS5cbiAgICAgICAgICAgICAgICBjb25zdCBuID0gdC5leHBsaWNpdE9yZGVyQnkubGVuZ3RoID4gMCA/IHQuZXhwbGljaXRPcmRlckJ5W3QuZXhwbGljaXRPcmRlckJ5Lmxlbmd0aCAtIDFdLmRpciA6IFwiYXNjXCIgLyogRGlyZWN0aW9uLkFTQ0VORElORyAqLyAsIHIgPSBmdW5jdGlvbiBfX1BSSVZBVEVfZ2V0SW5lcXVhbGl0eUZpbHRlckZpZWxkcyhlKSB7XG4gICAgICAgICAgICBsZXQgdCA9IG5ldyBTb3J0ZWRTZXQoRmllbGRQYXRoJDEuY29tcGFyYXRvcik7XG4gICAgICAgICAgICByZXR1cm4gZS5maWx0ZXJzLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgICAgIGUuZ2V0RmxhdHRlbmVkRmlsdGVycygpLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICBlLmlzSW5lcXVhbGl0eSgpICYmICh0ID0gdC5hZGQoZS5maWVsZCkpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH0pKSwgdDtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIENyZWF0ZXMgYSBuZXcgUXVlcnkgZm9yIGEgY29sbGVjdGlvbiBncm91cCBxdWVyeSB0aGF0IG1hdGNoZXMgYWxsIGRvY3VtZW50c1xuICogd2l0aGluIHRoZSBwcm92aWRlZCBjb2xsZWN0aW9uIGdyb3VwLlxuICovICh0KTtcbiAgICAgICAgLy8gQW55IGluZXF1YWxpdHkgZmllbGRzIG5vdCBleHBsaWNpdGx5IG9yZGVyZWQgc2hvdWxkIGJlIGltcGxpY2l0bHkgb3JkZXJlZCBpbiBhIGxleGljb2dyYXBoaWNhbFxuICAgICAgICAvLyBvcmRlci4gV2hlbiB0aGVyZSBhcmUgbXVsdGlwbGUgaW5lcXVhbGl0eSBmaWx0ZXJzIG9uIHRoZSBzYW1lIGZpZWxkLCB0aGUgZmllbGQgc2hvdWxkIGJlIGFkZGVkXG4gICAgICAgIC8vIG9ubHkgb25jZS5cbiAgICAgICAgLy8gTm90ZTogYFNvcnRlZFNldDxGaWVsZFBhdGg+YCBzb3J0cyB0aGUga2V5IGZpZWxkIGJlZm9yZSBvdGhlciBmaWVsZHMuIEhvd2V2ZXIsIHdlIHdhbnQgdGhlIGtleVxuICAgICAgICAvLyBmaWVsZCB0byBiZSBzb3J0ZWQgbGFzdC5cbiAgICAgICAgICAgICAgICByLmZvckVhY2goKHIgPT4ge1xuICAgICAgICAgICAgZS5oYXMoci5jYW5vbmljYWxTdHJpbmcoKSkgfHwgci5pc0tleUZpZWxkKCkgfHwgdC5sZS5wdXNoKG5ldyBPcmRlckJ5KHIsIG4pKTtcbiAgICAgICAgfSkpLCBcbiAgICAgICAgLy8gQWRkIHRoZSBkb2N1bWVudCBrZXkgZmllbGQgdG8gdGhlIGxhc3QgaWYgaXQgaXMgbm90IGV4cGxpY2l0bHkgb3JkZXJlZC5cbiAgICAgICAgZS5oYXMoRmllbGRQYXRoJDEua2V5RmllbGQoKS5jYW5vbmljYWxTdHJpbmcoKSkgfHwgdC5sZS5wdXNoKG5ldyBPcmRlckJ5KEZpZWxkUGF0aCQxLmtleUZpZWxkKCksIG4pKTtcbiAgICB9XG4gICAgcmV0dXJuIHQubGU7XG59XG5cbi8qKlxuICogQ29udmVydHMgdGhpcyBgUXVlcnlgIGluc3RhbmNlIHRvIGl0cyBjb3JyZXNwb25kaW5nIGBUYXJnZXRgIHJlcHJlc2VudGF0aW9uLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9xdWVyeVRvVGFyZ2V0KGUpIHtcbiAgICBjb25zdCB0ID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICByZXR1cm4gdC5oZSB8fCAodC5oZSA9IF9fUFJJVkFURV9fcXVlcnlUb1RhcmdldCh0LCBfX1BSSVZBVEVfcXVlcnlOb3JtYWxpemVkT3JkZXJCeShlKSkpLCBcbiAgICB0LmhlO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIHRoaXMgYFF1ZXJ5YCBpbnN0YW5jZSB0byBpdHMgY29ycmVzcG9uZGluZyBgVGFyZ2V0YCByZXByZXNlbnRhdGlvbixcbiAqIGZvciB1c2Ugd2l0aGluIGFuIGFnZ3JlZ2F0ZSBxdWVyeS4gVW5saWtlIHRhcmdldHMgZm9yIG5vbi1hZ2dyZWdhdGUgcXVlcmllcyxcbiAqIGFnZ3JlZ2F0ZSBxdWVyeSB0YXJnZXRzIGRvIG5vdCBjb250YWluIG5vcm1hbGl6ZWQgb3JkZXItYnlzLCB0aGV5IG9ubHlcbiAqIGNvbnRhaW4gZXhwbGljaXQgb3JkZXItYnlzLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9fcXVlcnlUb1RhcmdldChlLCB0KSB7XG4gICAgaWYgKFwiRlwiIC8qIExpbWl0VHlwZS5GaXJzdCAqLyA9PT0gZS5saW1pdFR5cGUpIHJldHVybiBfX1BSSVZBVEVfbmV3VGFyZ2V0KGUucGF0aCwgZS5jb2xsZWN0aW9uR3JvdXAsIHQsIGUuZmlsdGVycywgZS5saW1pdCwgZS5zdGFydEF0LCBlLmVuZEF0KTtcbiAgICB7XG4gICAgICAgIC8vIEZsaXAgdGhlIG9yZGVyQnkgZGlyZWN0aW9ucyBzaW5jZSB3ZSB3YW50IHRoZSBsYXN0IHJlc3VsdHNcbiAgICAgICAgdCA9IHQubWFwKChlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBcImRlc2NcIiAvKiBEaXJlY3Rpb24uREVTQ0VORElORyAqLyA9PT0gZS5kaXIgPyBcImFzY1wiIC8qIERpcmVjdGlvbi5BU0NFTkRJTkcgKi8gOiBcImRlc2NcIiAvKiBEaXJlY3Rpb24uREVTQ0VORElORyAqLztcbiAgICAgICAgICAgIHJldHVybiBuZXcgT3JkZXJCeShlLmZpZWxkLCB0KTtcbiAgICAgICAgfSkpO1xuICAgICAgICAvLyBXZSBuZWVkIHRvIHN3YXAgdGhlIGN1cnNvcnMgdG8gbWF0Y2ggdGhlIG5vdy1mbGlwcGVkIHF1ZXJ5IG9yZGVyaW5nLlxuICAgICAgICBjb25zdCBuID0gZS5lbmRBdCA/IG5ldyBCb3VuZChlLmVuZEF0LnBvc2l0aW9uLCBlLmVuZEF0LmluY2x1c2l2ZSkgOiBudWxsLCByID0gZS5zdGFydEF0ID8gbmV3IEJvdW5kKGUuc3RhcnRBdC5wb3NpdGlvbiwgZS5zdGFydEF0LmluY2x1c2l2ZSkgOiBudWxsO1xuICAgICAgICAvLyBOb3cgcmV0dXJuIGFzIGEgTGltaXRUeXBlLkZpcnN0IHF1ZXJ5LlxuICAgICAgICByZXR1cm4gX19QUklWQVRFX25ld1RhcmdldChlLnBhdGgsIGUuY29sbGVjdGlvbkdyb3VwLCB0LCBlLmZpbHRlcnMsIGUubGltaXQsIG4sIHIpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3F1ZXJ5V2l0aEFkZGVkRmlsdGVyKGUsIHQpIHtcbiAgICBjb25zdCBuID0gZS5maWx0ZXJzLmNvbmNhdChbIHQgXSk7XG4gICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfUXVlcnlJbXBsKGUucGF0aCwgZS5jb2xsZWN0aW9uR3JvdXAsIGUuZXhwbGljaXRPcmRlckJ5LnNsaWNlKCksIG4sIGUubGltaXQsIGUubGltaXRUeXBlLCBlLnN0YXJ0QXQsIGUuZW5kQXQpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfcXVlcnlXaXRoTGltaXQoZSwgdCwgbikge1xuICAgIHJldHVybiBuZXcgX19QUklWQVRFX1F1ZXJ5SW1wbChlLnBhdGgsIGUuY29sbGVjdGlvbkdyb3VwLCBlLmV4cGxpY2l0T3JkZXJCeS5zbGljZSgpLCBlLmZpbHRlcnMuc2xpY2UoKSwgdCwgbiwgZS5zdGFydEF0LCBlLmVuZEF0KTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3F1ZXJ5RXF1YWxzKGUsIHQpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX3RhcmdldEVxdWFscyhfX1BSSVZBVEVfcXVlcnlUb1RhcmdldChlKSwgX19QUklWQVRFX3F1ZXJ5VG9UYXJnZXQodCkpICYmIGUubGltaXRUeXBlID09PSB0LmxpbWl0VHlwZTtcbn1cblxuLy8gVE9ETyhiLzI5MTgzMTY1KTogVGhpcyBpcyB1c2VkIHRvIGdldCBhIHVuaXF1ZSBzdHJpbmcgZnJvbSBhIHF1ZXJ5IHRvLCBmb3Jcbi8vIGV4YW1wbGUsIHVzZSBhcyBhIGRpY3Rpb25hcnkga2V5LCBidXQgdGhlIGltcGxlbWVudGF0aW9uIGlzIHN1YmplY3QgdG9cbi8vIGNvbGxpc2lvbnMuIE1ha2UgaXQgY29sbGlzaW9uLWZyZWUuXG5mdW5jdGlvbiBfX1BSSVZBVEVfY2Fub25pZnlRdWVyeShlKSB7XG4gICAgcmV0dXJuIGAke19fUFJJVkFURV9jYW5vbmlmeVRhcmdldChfX1BSSVZBVEVfcXVlcnlUb1RhcmdldChlKSl9fGx0OiR7ZS5saW1pdFR5cGV9YDtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3N0cmluZ2lmeVF1ZXJ5KGUpIHtcbiAgICByZXR1cm4gYFF1ZXJ5KHRhcmdldD0ke2Z1bmN0aW9uIF9fUFJJVkFURV9zdHJpbmdpZnlUYXJnZXQoZSkge1xuICAgICAgICBsZXQgdCA9IGUucGF0aC5jYW5vbmljYWxTdHJpbmcoKTtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IGUuY29sbGVjdGlvbkdyb3VwICYmICh0ICs9IFwiIGNvbGxlY3Rpb25Hcm91cD1cIiArIGUuY29sbGVjdGlvbkdyb3VwKSwgXG4gICAgICAgIGUuZmlsdGVycy5sZW5ndGggPiAwICYmICh0ICs9IGAsIGZpbHRlcnM6IFske2UuZmlsdGVycy5tYXAoKGUgPT4gX19QUklWQVRFX3N0cmluZ2lmeUZpbHRlcihlKSkpLmpvaW4oXCIsIFwiKX1dYCksIFxuICAgICAgICBfX1BSSVZBVEVfaXNOdWxsT3JVbmRlZmluZWQoZS5saW1pdCkgfHwgKHQgKz0gXCIsIGxpbWl0OiBcIiArIGUubGltaXQpLCBlLm9yZGVyQnkubGVuZ3RoID4gMCAmJiAodCArPSBgLCBvcmRlckJ5OiBbJHtlLm9yZGVyQnkubWFwKChlID0+IGZ1bmN0aW9uIF9fUFJJVkFURV9zdHJpbmdpZnlPcmRlckJ5KGUpIHtcbiAgICAgICAgICAgIHJldHVybiBgJHtlLmZpZWxkLmNhbm9uaWNhbFN0cmluZygpfSAoJHtlLmRpcn0pYDtcbiAgICAgICAgfShlKSkpLmpvaW4oXCIsIFwiKX1dYCksIGUuc3RhcnRBdCAmJiAodCArPSBcIiwgc3RhcnRBdDogXCIsIHQgKz0gZS5zdGFydEF0LmluY2x1c2l2ZSA/IFwiYjpcIiA6IFwiYTpcIiwgXG4gICAgICAgIHQgKz0gZS5zdGFydEF0LnBvc2l0aW9uLm1hcCgoZSA9PiBjYW5vbmljYWxJZChlKSkpLmpvaW4oXCIsXCIpKSwgZS5lbmRBdCAmJiAodCArPSBcIiwgZW5kQXQ6IFwiLCBcbiAgICAgICAgdCArPSBlLmVuZEF0LmluY2x1c2l2ZSA/IFwiYTpcIiA6IFwiYjpcIiwgdCArPSBlLmVuZEF0LnBvc2l0aW9uLm1hcCgoZSA9PiBjYW5vbmljYWxJZChlKSkpLmpvaW4oXCIsXCIpKSwgXG4gICAgICAgIGBUYXJnZXQoJHt0fSlgO1xuICAgIH0oX19QUklWQVRFX3F1ZXJ5VG9UYXJnZXQoZSkpfTsgbGltaXRUeXBlPSR7ZS5saW1pdFR5cGV9KWA7XG59XG5cbi8qKiBSZXR1cm5zIHdoZXRoZXIgYGRvY2AgbWF0Y2hlcyB0aGUgY29uc3RyYWludHMgb2YgYHF1ZXJ5YC4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3F1ZXJ5TWF0Y2hlcyhlLCB0KSB7XG4gICAgcmV0dXJuIHQuaXNGb3VuZERvY3VtZW50KCkgJiYgZnVuY3Rpb24gX19QUklWQVRFX3F1ZXJ5TWF0Y2hlc1BhdGhBbmRDb2xsZWN0aW9uR3JvdXAoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gdC5rZXkucGF0aDtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IGUuY29sbGVjdGlvbkdyb3VwID8gdC5rZXkuaGFzQ29sbGVjdGlvbklkKGUuY29sbGVjdGlvbkdyb3VwKSAmJiBlLnBhdGguaXNQcmVmaXhPZihuKSA6IERvY3VtZW50S2V5LmlzRG9jdW1lbnRLZXkoZS5wYXRoKSA/IGUucGF0aC5pc0VxdWFsKG4pIDogZS5wYXRoLmlzSW1tZWRpYXRlUGFyZW50T2Yobik7XG4gICAgfVxuICAgIC8qKlxuICogQSBkb2N1bWVudCBtdXN0IGhhdmUgYSB2YWx1ZSBmb3IgZXZlcnkgb3JkZXJpbmcgY2xhdXNlIGluIG9yZGVyIHRvIHNob3cgdXBcbiAqIGluIHRoZSByZXN1bHRzLlxuICovIChlLCB0KSAmJiBmdW5jdGlvbiBfX1BSSVZBVEVfcXVlcnlNYXRjaGVzT3JkZXJCeShlLCB0KSB7XG4gICAgICAgIC8vIFdlIG11c3QgdXNlIGBxdWVyeU5vcm1hbGl6ZWRPcmRlckJ5KClgIHRvIGdldCB0aGUgbGlzdCBvZiBhbGwgb3JkZXJCeXMgKGJvdGggaW1wbGljaXQgYW5kIGV4cGxpY2l0KS5cbiAgICAgICAgLy8gTm90ZSB0aGF0IGZvciBPUiBxdWVyaWVzLCBvcmRlckJ5IGFwcGxpZXMgdG8gYWxsIGRpc2p1bmN0aW9uIHRlcm1zIGFuZCBpbXBsaWNpdCBvcmRlckJ5cyBtdXN0XG4gICAgICAgIC8vIGJlIHRha2VuIGludG8gYWNjb3VudC4gRm9yIGV4YW1wbGUsIHRoZSBxdWVyeSBcImEgPiAxIHx8IGI9PTFcIiBoYXMgYW4gaW1wbGljaXQgXCJvcmRlckJ5IGFcIiBkdWVcbiAgICAgICAgLy8gdG8gdGhlIGluZXF1YWxpdHksIGFuZCBpcyBldmFsdWF0ZWQgYXMgXCJhID4gMSBvcmRlckJ5IGEgfHwgYj09MSBvcmRlckJ5IGFcIi5cbiAgICAgICAgLy8gQSBkb2N1bWVudCB3aXRoIGNvbnRlbnQgb2Yge2I6MX0gbWF0Y2hlcyB0aGUgZmlsdGVycywgYnV0IGRvZXMgbm90IG1hdGNoIHRoZSBvcmRlckJ5IGJlY2F1c2VcbiAgICAgICAgLy8gaXQncyBtaXNzaW5nIHRoZSBmaWVsZCAnYScuXG4gICAgICAgIGZvciAoY29uc3QgbiBvZiBfX1BSSVZBVEVfcXVlcnlOb3JtYWxpemVkT3JkZXJCeShlKSkgXG4gICAgICAgIC8vIG9yZGVyLWJ5IGtleSBhbHdheXMgbWF0Y2hlc1xuICAgICAgICBpZiAoIW4uZmllbGQuaXNLZXlGaWVsZCgpICYmIG51bGwgPT09IHQuZGF0YS5maWVsZChuLmZpZWxkKSkgcmV0dXJuICExO1xuICAgICAgICByZXR1cm4gITA7XG4gICAgfShlLCB0KSAmJiBmdW5jdGlvbiBfX1BSSVZBVEVfcXVlcnlNYXRjaGVzRmlsdGVycyhlLCB0KSB7XG4gICAgICAgIGZvciAoY29uc3QgbiBvZiBlLmZpbHRlcnMpIGlmICghbi5tYXRjaGVzKHQpKSByZXR1cm4gITE7XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG4gICAgLyoqIE1ha2VzIHN1cmUgYSBkb2N1bWVudCBpcyB3aXRoaW4gdGhlIGJvdW5kcywgaWYgcHJvdmlkZWQuICovIChlLCB0KSAmJiBmdW5jdGlvbiBfX1BSSVZBVEVfcXVlcnlNYXRjaGVzQm91bmRzKGUsIHQpIHtcbiAgICAgICAgaWYgKGUuc3RhcnRBdCAmJiAhXG4gICAgICAgIC8qKlxuICogUmV0dXJucyB0cnVlIGlmIGEgZG9jdW1lbnQgc29ydHMgYmVmb3JlIGEgYm91bmQgdXNpbmcgdGhlIHByb3ZpZGVkIHNvcnRcbiAqIG9yZGVyLlxuICovXG4gICAgICAgIGZ1bmN0aW9uIF9fUFJJVkFURV9ib3VuZFNvcnRzQmVmb3JlRG9jdW1lbnQoZSwgdCwgbikge1xuICAgICAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV9ib3VuZENvbXBhcmVUb0RvY3VtZW50KGUsIHQsIG4pO1xuICAgICAgICAgICAgcmV0dXJuIGUuaW5jbHVzaXZlID8gciA8PSAwIDogciA8IDA7XG4gICAgICAgIH0oZS5zdGFydEF0LCBfX1BSSVZBVEVfcXVlcnlOb3JtYWxpemVkT3JkZXJCeShlKSwgdCkpIHJldHVybiAhMTtcbiAgICAgICAgaWYgKGUuZW5kQXQgJiYgIWZ1bmN0aW9uIF9fUFJJVkFURV9ib3VuZFNvcnRzQWZ0ZXJEb2N1bWVudChlLCB0LCBuKSB7XG4gICAgICAgICAgICBjb25zdCByID0gX19QUklWQVRFX2JvdW5kQ29tcGFyZVRvRG9jdW1lbnQoZSwgdCwgbik7XG4gICAgICAgICAgICByZXR1cm4gZS5pbmNsdXNpdmUgPyByID49IDAgOiByID4gMDtcbiAgICAgICAgfShlLmVuZEF0LCBfX1BSSVZBVEVfcXVlcnlOb3JtYWxpemVkT3JkZXJCeShlKSwgdCkpIHJldHVybiAhMTtcbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbiAgICAvKipcbiAqIFJldHVybnMgdGhlIGNvbGxlY3Rpb24gZ3JvdXAgdGhhdCB0aGlzIHF1ZXJ5IHRhcmdldHMuXG4gKlxuICogUE9SVElORyBOT1RFOiBUaGlzIGlzIG9ubHkgdXNlZCBpbiB0aGUgV2ViIFNESyB0byBmYWNpbGl0YXRlIG11bHRpLXRhYlxuICogc3luY2hyb25pemF0aW9uIGZvciBxdWVyeSByZXN1bHRzLlxuICovIChlLCB0KTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3F1ZXJ5Q29sbGVjdGlvbkdyb3VwKGUpIHtcbiAgICByZXR1cm4gZS5jb2xsZWN0aW9uR3JvdXAgfHwgKGUucGF0aC5sZW5ndGggJSAyID09IDEgPyBlLnBhdGgubGFzdFNlZ21lbnQoKSA6IGUucGF0aC5nZXQoZS5wYXRoLmxlbmd0aCAtIDIpKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgbmV3IGNvbXBhcmF0b3IgZnVuY3Rpb24gdGhhdCBjYW4gYmUgdXNlZCB0byBjb21wYXJlIHR3byBkb2N1bWVudHNcbiAqIGJhc2VkIG9uIHRoZSBRdWVyeSdzIG9yZGVyaW5nIGNvbnN0cmFpbnQuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX25ld1F1ZXJ5Q29tcGFyYXRvcihlKSB7XG4gICAgcmV0dXJuICh0LCBuKSA9PiB7XG4gICAgICAgIGxldCByID0gITE7XG4gICAgICAgIGZvciAoY29uc3QgaSBvZiBfX1BSSVZBVEVfcXVlcnlOb3JtYWxpemVkT3JkZXJCeShlKSkge1xuICAgICAgICAgICAgY29uc3QgZSA9IF9fUFJJVkFURV9jb21wYXJlRG9jcyhpLCB0LCBuKTtcbiAgICAgICAgICAgIGlmICgwICE9PSBlKSByZXR1cm4gZTtcbiAgICAgICAgICAgIHIgPSByIHx8IGkuZmllbGQuaXNLZXlGaWVsZCgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAwO1xuICAgIH07XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9jb21wYXJlRG9jcyhlLCB0LCBuKSB7XG4gICAgY29uc3QgciA9IGUuZmllbGQuaXNLZXlGaWVsZCgpID8gRG9jdW1lbnRLZXkuY29tcGFyYXRvcih0LmtleSwgbi5rZXkpIDogZnVuY3Rpb24gX19QUklWQVRFX2NvbXBhcmVEb2N1bWVudHNCeUZpZWxkKGUsIHQsIG4pIHtcbiAgICAgICAgY29uc3QgciA9IHQuZGF0YS5maWVsZChlKSwgaSA9IG4uZGF0YS5maWVsZChlKTtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IHIgJiYgbnVsbCAhPT0gaSA/IF9fUFJJVkFURV92YWx1ZUNvbXBhcmUociwgaSkgOiBmYWlsKCk7XG4gICAgfShlLmZpZWxkLCB0LCBuKTtcbiAgICBzd2l0Y2ggKGUuZGlyKSB7XG4gICAgICBjYXNlIFwiYXNjXCIgLyogRGlyZWN0aW9uLkFTQ0VORElORyAqLyA6XG4gICAgICAgIHJldHVybiByO1xuXG4gICAgICBjYXNlIFwiZGVzY1wiIC8qIERpcmVjdGlvbi5ERVNDRU5ESU5HICovIDpcbiAgICAgICAgcmV0dXJuIC0xICogcjtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGZhaWwoKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgbWFwIGltcGxlbWVudGF0aW9uIHRoYXQgdXNlcyBvYmplY3RzIGFzIGtleXMuIE9iamVjdHMgbXVzdCBoYXZlIGFuXG4gKiBhc3NvY2lhdGVkIGVxdWFscyBmdW5jdGlvbiBhbmQgbXVzdCBiZSBpbW11dGFibGUuIEVudHJpZXMgaW4gdGhlIG1hcCBhcmVcbiAqIHN0b3JlZCB0b2dldGhlciB3aXRoIHRoZSBrZXkgYmVpbmcgcHJvZHVjZWQgZnJvbSB0aGUgbWFwS2V5Rm4uIFRoaXMgbWFwXG4gKiBhdXRvbWF0aWNhbGx5IGhhbmRsZXMgY29sbGlzaW9ucyBvZiBrZXlzLlxuICovIGNsYXNzIE9iamVjdE1hcCB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICB0aGlzLm1hcEtleUZuID0gZSwgdGhpcy5lcXVhbHNGbiA9IHQsIFxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGlubmVyIG1hcCBmb3IgYSBrZXkvdmFsdWUgcGFpci4gRHVlIHRvIHRoZSBwb3NzaWJpbGl0eSBvZiBjb2xsaXNpb25zIHdlXG4gICAgICAgICAqIGtlZXAgYSBsaXN0IG9mIGVudHJpZXMgdGhhdCB3ZSBkbyBhIGxpbmVhciBzZWFyY2ggdGhyb3VnaCB0byBmaW5kIGFuIGFjdHVhbFxuICAgICAgICAgKiBtYXRjaC4gTm90ZSB0aGF0IGNvbGxpc2lvbnMgc2hvdWxkIGJlIHJhcmUsIHNvIHdlIHN0aWxsIGV4cGVjdCBuZWFyXG4gICAgICAgICAqIGNvbnN0YW50IHRpbWUgbG9va3VwcyBpbiBwcmFjdGljZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaW5uZXIgPSB7fSwgXG4gICAgICAgIC8qKiBUaGUgbnVtYmVyIG9mIGVudHJpZXMgc3RvcmVkIGluIHRoZSBtYXAgKi9cbiAgICAgICAgdGhpcy5pbm5lclNpemUgPSAwO1xuICAgIH1cbiAgICAvKiogR2V0IGEgdmFsdWUgZm9yIHRoaXMga2V5LCBvciB1bmRlZmluZWQgaWYgaXQgZG9lcyBub3QgZXhpc3QuICovICAgIGdldChlKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLm1hcEtleUZuKGUpLCBuID0gdGhpcy5pbm5lclt0XTtcbiAgICAgICAgaWYgKHZvaWQgMCAhPT0gbikgZm9yIChjb25zdCBbdCwgcl0gb2YgbikgaWYgKHRoaXMuZXF1YWxzRm4odCwgZSkpIHJldHVybiByO1xuICAgIH1cbiAgICBoYXMoZSkge1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSB0aGlzLmdldChlKTtcbiAgICB9XG4gICAgLyoqIFB1dCB0aGlzIGtleSBhbmQgdmFsdWUgaW4gdGhlIG1hcC4gKi8gICAgc2V0KGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMubWFwS2V5Rm4oZSksIHIgPSB0aGlzLmlubmVyW25dO1xuICAgICAgICBpZiAodm9pZCAwID09PSByKSByZXR1cm4gdGhpcy5pbm5lcltuXSA9IFsgWyBlLCB0IF0gXSwgdm9pZCB0aGlzLmlubmVyU2l6ZSsrO1xuICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IHIubGVuZ3RoOyBuKyspIGlmICh0aGlzLmVxdWFsc0ZuKHJbbl1bMF0sIGUpKSBcbiAgICAgICAgLy8gVGhpcyBpcyB1cGRhdGluZyBhbiBleGlzdGluZyBlbnRyeSBhbmQgZG9lcyBub3QgaW5jcmVhc2UgYGlubmVyU2l6ZWAuXG4gICAgICAgIHJldHVybiB2b2lkIChyW25dID0gWyBlLCB0IF0pO1xuICAgICAgICByLnB1c2goWyBlLCB0IF0pLCB0aGlzLmlubmVyU2l6ZSsrO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgdGhpcyBrZXkgZnJvbSB0aGUgbWFwLiBSZXR1cm5zIGEgYm9vbGVhbiBpZiBhbnl0aGluZyB3YXMgZGVsZXRlZC5cbiAgICAgKi8gICAgZGVsZXRlKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMubWFwS2V5Rm4oZSksIG4gPSB0aGlzLmlubmVyW3RdO1xuICAgICAgICBpZiAodm9pZCAwID09PSBuKSByZXR1cm4gITE7XG4gICAgICAgIGZvciAobGV0IHIgPSAwOyByIDwgbi5sZW5ndGg7IHIrKykgaWYgKHRoaXMuZXF1YWxzRm4obltyXVswXSwgZSkpIHJldHVybiAxID09PSBuLmxlbmd0aCA/IGRlbGV0ZSB0aGlzLmlubmVyW3RdIDogbi5zcGxpY2UociwgMSksIFxuICAgICAgICB0aGlzLmlubmVyU2l6ZS0tLCAhMDtcbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgICBmb3JFYWNoKGUpIHtcbiAgICAgICAgZm9yRWFjaCh0aGlzLmlubmVyLCAoKHQsIG4pID0+IHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgW3QsIHJdIG9mIG4pIGUodCwgcik7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIGlzRW1wdHkodGhpcy5pbm5lcik7XG4gICAgfVxuICAgIHNpemUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlubmVyU2l6ZTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNvbnN0IHJlID0gbmV3IFNvcnRlZE1hcChEb2N1bWVudEtleS5jb21wYXJhdG9yKTtcblxuZnVuY3Rpb24gX19QUklWQVRFX211dGFibGVEb2N1bWVudE1hcCgpIHtcbiAgICByZXR1cm4gcmU7XG59XG5cbmNvbnN0IGllID0gbmV3IFNvcnRlZE1hcChEb2N1bWVudEtleS5jb21wYXJhdG9yKTtcblxuZnVuY3Rpb24gZG9jdW1lbnRNYXAoLi4uZSkge1xuICAgIGxldCB0ID0gaWU7XG4gICAgZm9yIChjb25zdCBuIG9mIGUpIHQgPSB0Lmluc2VydChuLmtleSwgbik7XG4gICAgcmV0dXJuIHQ7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9jb252ZXJ0T3ZlcmxheWVkRG9jdW1lbnRNYXBUb0RvY3VtZW50TWFwKGUpIHtcbiAgICBsZXQgdCA9IGllO1xuICAgIHJldHVybiBlLmZvckVhY2goKChlLCBuKSA9PiB0ID0gdC5pbnNlcnQoZSwgbi5vdmVybGF5ZWREb2N1bWVudCkpKSwgdDtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX25ld092ZXJsYXlNYXAoKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9uZXdEb2N1bWVudEtleU1hcCgpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfbmV3TXV0YXRpb25NYXAoKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9uZXdEb2N1bWVudEtleU1hcCgpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfbmV3RG9jdW1lbnRLZXlNYXAoKSB7XG4gICAgcmV0dXJuIG5ldyBPYmplY3RNYXAoKGUgPT4gZS50b1N0cmluZygpKSwgKChlLCB0KSA9PiBlLmlzRXF1YWwodCkpKTtcbn1cblxuY29uc3Qgc2UgPSBuZXcgU29ydGVkTWFwKERvY3VtZW50S2V5LmNvbXBhcmF0b3IpO1xuXG5jb25zdCBvZSA9IG5ldyBTb3J0ZWRTZXQoRG9jdW1lbnRLZXkuY29tcGFyYXRvcik7XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9kb2N1bWVudEtleVNldCguLi5lKSB7XG4gICAgbGV0IHQgPSBvZTtcbiAgICBmb3IgKGNvbnN0IG4gb2YgZSkgdCA9IHQuYWRkKG4pO1xuICAgIHJldHVybiB0O1xufVxuXG5jb25zdCBfZSA9IG5ldyBTb3J0ZWRTZXQoX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IpO1xuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdGFyZ2V0SWRTZXQoKSB7XG4gICAgcmV0dXJuIF9lO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBSZXR1cm5zIGFuIERvdWJsZVZhbHVlIGZvciBgdmFsdWVgIHRoYXQgaXMgZW5jb2RlZCBiYXNlZCB0aGUgc2VyaWFsaXplcidzXG4gKiBgdXNlUHJvdG8zSnNvbmAgc2V0dGluZy5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfdG9Eb3VibGUoZSwgdCkge1xuICAgIGlmIChlLnVzZVByb3RvM0pzb24pIHtcbiAgICAgICAgaWYgKGlzTmFOKHQpKSByZXR1cm4ge1xuICAgICAgICAgICAgZG91YmxlVmFsdWU6IFwiTmFOXCJcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHQgPT09IDEgLyAwKSByZXR1cm4ge1xuICAgICAgICAgICAgZG91YmxlVmFsdWU6IFwiSW5maW5pdHlcIlxuICAgICAgICB9O1xuICAgICAgICBpZiAodCA9PT0gLTEgLyAwKSByZXR1cm4ge1xuICAgICAgICAgICAgZG91YmxlVmFsdWU6IFwiLUluZmluaXR5XCJcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZG91YmxlVmFsdWU6IF9fUFJJVkFURV9pc05lZ2F0aXZlWmVybyh0KSA/IFwiLTBcIiA6IHRcbiAgICB9O1xufVxuXG4vKipcbiAqIFJldHVybnMgYW4gSW50ZWdlclZhbHVlIGZvciBgdmFsdWVgLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV90b0ludGVnZXIoZSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIGludGVnZXJWYWx1ZTogXCJcIiArIGVcbiAgICB9O1xufVxuXG4vKipcbiAqIFJldHVybnMgYSB2YWx1ZSBmb3IgYSBudW1iZXIgdGhhdCdzIGFwcHJvcHJpYXRlIHRvIHB1dCBpbnRvIGEgcHJvdG8uXG4gKiBUaGUgcmV0dXJuIHZhbHVlIGlzIGFuIEludGVnZXJWYWx1ZSBpZiBpdCBjYW4gc2FmZWx5IHJlcHJlc2VudCB0aGUgdmFsdWUsXG4gKiBvdGhlcndpc2UgYSBEb3VibGVWYWx1ZSBpcyByZXR1cm5lZC5cbiAqLyBmdW5jdGlvbiB0b051bWJlcihlLCB0KSB7XG4gICAgcmV0dXJuIGlzU2FmZUludGVnZXIodCkgPyBfX1BSSVZBVEVfdG9JbnRlZ2VyKHQpIDogX19QUklWQVRFX3RvRG91YmxlKGUsIHQpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIFVzZWQgdG8gcmVwcmVzZW50IGEgZmllbGQgdHJhbnNmb3JtIG9uIGEgbXV0YXRpb24uICovIGNsYXNzIFRyYW5zZm9ybU9wZXJhdGlvbiB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8vIE1ha2Ugc3VyZSB0aGF0IHRoZSBzdHJ1Y3R1cmFsIHR5cGUgb2YgYFRyYW5zZm9ybU9wZXJhdGlvbmAgaXMgdW5pcXVlLlxuICAgICAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL21pY3Jvc29mdC9UeXBlU2NyaXB0L2lzc3Vlcy81NDUxXG4gICAgICAgIHRoaXMuXyA9IHZvaWQgMDtcbiAgICB9XG59XG5cbi8qKlxuICogQ29tcHV0ZXMgdGhlIGxvY2FsIHRyYW5zZm9ybSByZXN1bHQgYWdhaW5zdCB0aGUgcHJvdmlkZWQgYHByZXZpb3VzVmFsdWVgLFxuICogb3B0aW9uYWxseSB1c2luZyB0aGUgcHJvdmlkZWQgbG9jYWxXcml0ZVRpbWUuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2FwcGx5VHJhbnNmb3JtT3BlcmF0aW9uVG9Mb2NhbFZpZXcoZSwgdCwgbikge1xuICAgIHJldHVybiBlIGluc3RhbmNlb2YgX19QUklWQVRFX1NlcnZlclRpbWVzdGFtcFRyYW5zZm9ybSA/IGZ1bmN0aW9uIHNlcnZlclRpbWVzdGFtcCQxKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHtcbiAgICAgICAgICAgIGZpZWxkczoge1xuICAgICAgICAgICAgICAgIF9fdHlwZV9fOiB7XG4gICAgICAgICAgICAgICAgICAgIHN0cmluZ1ZhbHVlOiBcInNlcnZlcl90aW1lc3RhbXBcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgX19sb2NhbF93cml0ZV90aW1lX186IHtcbiAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wVmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlY29uZHM6IGUuc2Vjb25kcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbm9zOiBlLm5hbm9zZWNvbmRzXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIC8vIFdlIHNob3VsZCBhdm9pZCBzdG9yaW5nIGRlZXBseSBuZXN0ZWQgc2VydmVyIHRpbWVzdGFtcCBtYXAgdmFsdWVzXG4gICAgICAgIC8vIGJlY2F1c2Ugd2UgbmV2ZXIgdXNlIHRoZSBpbnRlcm1lZGlhdGUgXCJwcmV2aW91cyB2YWx1ZXNcIi5cbiAgICAgICAgLy8gRm9yIGV4YW1wbGU6XG4gICAgICAgIC8vIHByZXZpb3VzOiA0MkwsIGFkZDogdDEsIHJlc3VsdDogdDEgLT4gNDJMXG4gICAgICAgIC8vIHByZXZpb3VzOiB0MSwgIGFkZDogdDIsIHJlc3VsdDogdDIgLT4gNDJMIChOT1QgdDIgLT4gdDEgLT4gNDJMKVxuICAgICAgICAvLyBwcmV2aW91czogdDIsICBhZGQ6IHQzLCByZXN1bHQ6IHQzIC0+IDQyTCAoTk9UIHQzIC0+IHQyIC0+IHQxIC0+IDQyTClcbiAgICAgICAgLy8gYGdldFByZXZpb3VzVmFsdWVgIHJlY3Vyc2l2ZWx5IHRyYXZlcnNlcyBzZXJ2ZXIgdGltZXN0YW1wcyB0byBmaW5kIHRoZVxuICAgICAgICAvLyBsZWFzdCByZWNlbnQgVmFsdWUuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHQgJiYgX19QUklWQVRFX2lzU2VydmVyVGltZXN0YW1wKHQpICYmICh0ID0gX19QUklWQVRFX2dldFByZXZpb3VzVmFsdWUodCkpLCBcbiAgICAgICAgdCAmJiAobi5maWVsZHMuX19wcmV2aW91c192YWx1ZV9fID0gdCksIHtcbiAgICAgICAgICAgIG1hcFZhbHVlOiBuXG4gICAgICAgIH07XG4gICAgfShuLCB0KSA6IGUgaW5zdGFuY2VvZiBfX1BSSVZBVEVfQXJyYXlVbmlvblRyYW5zZm9ybU9wZXJhdGlvbiA/IF9fUFJJVkFURV9hcHBseUFycmF5VW5pb25UcmFuc2Zvcm1PcGVyYXRpb24oZSwgdCkgOiBlIGluc3RhbmNlb2YgX19QUklWQVRFX0FycmF5UmVtb3ZlVHJhbnNmb3JtT3BlcmF0aW9uID8gX19QUklWQVRFX2FwcGx5QXJyYXlSZW1vdmVUcmFuc2Zvcm1PcGVyYXRpb24oZSwgdCkgOiBmdW5jdGlvbiBfX1BSSVZBVEVfYXBwbHlOdW1lcmljSW5jcmVtZW50VHJhbnNmb3JtT3BlcmF0aW9uVG9Mb2NhbFZpZXcoZSwgdCkge1xuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IFNpbmNlIEphdmFTY3JpcHQncyBpbnRlZ2VyIGFyaXRobWV0aWMgaXMgbGltaXRlZCB0byA1MyBiaXRcbiAgICAgICAgLy8gcHJlY2lzaW9uIGFuZCByZXNvbHZlcyBvdmVyZmxvd3MgYnkgcmVkdWNpbmcgcHJlY2lzaW9uLCB3ZSBkbyBub3RcbiAgICAgICAgLy8gbWFudWFsbHkgY2FwIG92ZXJmbG93cyBhdCAyXjYzLlxuICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2NvbXB1dGVUcmFuc2Zvcm1PcGVyYXRpb25CYXNlVmFsdWUoZSwgdCksIHIgPSBhc051bWJlcihuKSArIGFzTnVtYmVyKGUuSWUpO1xuICAgICAgICByZXR1cm4gaXNJbnRlZ2VyKG4pICYmIGlzSW50ZWdlcihlLkllKSA/IF9fUFJJVkFURV90b0ludGVnZXIocikgOiBfX1BSSVZBVEVfdG9Eb3VibGUoZS5zZXJpYWxpemVyLCByKTtcbiAgICB9KGUsIHQpO1xufVxuXG4vKipcbiAqIENvbXB1dGVzIGEgZmluYWwgdHJhbnNmb3JtIHJlc3VsdCBhZnRlciB0aGUgdHJhbnNmb3JtIGhhcyBiZWVuIGFja25vd2xlZGdlZFxuICogYnkgdGhlIHNlcnZlciwgcG90ZW50aWFsbHkgdXNpbmcgdGhlIHNlcnZlci1wcm92aWRlZCB0cmFuc2Zvcm1SZXN1bHQuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2FwcGx5VHJhbnNmb3JtT3BlcmF0aW9uVG9SZW1vdGVEb2N1bWVudChlLCB0LCBuKSB7XG4gICAgLy8gVGhlIHNlcnZlciBqdXN0IHNlbmRzIG51bGwgYXMgdGhlIHRyYW5zZm9ybSByZXN1bHQgZm9yIGFycmF5IG9wZXJhdGlvbnMsXG4gICAgLy8gc28gd2UgaGF2ZSB0byBjYWxjdWxhdGUgYSByZXN1bHQgdGhlIHNhbWUgYXMgd2UgZG8gZm9yIGxvY2FsXG4gICAgLy8gYXBwbGljYXRpb25zLlxuICAgIHJldHVybiBlIGluc3RhbmNlb2YgX19QUklWQVRFX0FycmF5VW5pb25UcmFuc2Zvcm1PcGVyYXRpb24gPyBfX1BSSVZBVEVfYXBwbHlBcnJheVVuaW9uVHJhbnNmb3JtT3BlcmF0aW9uKGUsIHQpIDogZSBpbnN0YW5jZW9mIF9fUFJJVkFURV9BcnJheVJlbW92ZVRyYW5zZm9ybU9wZXJhdGlvbiA/IF9fUFJJVkFURV9hcHBseUFycmF5UmVtb3ZlVHJhbnNmb3JtT3BlcmF0aW9uKGUsIHQpIDogbjtcbn1cblxuLyoqXG4gKiBJZiB0aGlzIHRyYW5zZm9ybSBvcGVyYXRpb24gaXMgbm90IGlkZW1wb3RlbnQsIHJldHVybnMgdGhlIGJhc2UgdmFsdWUgdG9cbiAqIHBlcnNpc3QgZm9yIHRoaXMgdHJhbnNmb3JtLiBJZiBhIGJhc2UgdmFsdWUgaXMgcmV0dXJuZWQsIHRoZSB0cmFuc2Zvcm1cbiAqIG9wZXJhdGlvbiBpcyBhbHdheXMgYXBwbGllZCB0byB0aGlzIGJhc2UgdmFsdWUsIGV2ZW4gaWYgZG9jdW1lbnQgaGFzXG4gKiBhbHJlYWR5IGJlZW4gdXBkYXRlZC5cbiAqXG4gKiBCYXNlIHZhbHVlcyBwcm92aWRlIGNvbnNpc3RlbnQgYmVoYXZpb3IgZm9yIG5vbi1pZGVtcG90ZW50IHRyYW5zZm9ybXMgYW5kXG4gKiBhbGxvdyB1cyB0byByZXR1cm4gdGhlIHNhbWUgbGF0ZW5jeS1jb21wZW5zYXRlZCB2YWx1ZSBldmVuIGlmIHRoZSBiYWNrZW5kXG4gKiBoYXMgYWxyZWFkeSBhcHBsaWVkIHRoZSB0cmFuc2Zvcm0gb3BlcmF0aW9uLiBUaGUgYmFzZSB2YWx1ZSBpcyBudWxsIGZvclxuICogaWRlbXBvdGVudCB0cmFuc2Zvcm1zLCBhcyB0aGV5IGNhbiBiZSByZS1wbGF5ZWQgZXZlbiBpZiB0aGUgYmFja2VuZCBoYXNcbiAqIGFscmVhZHkgYXBwbGllZCB0aGVtLlxuICpcbiAqIEByZXR1cm5zIGEgYmFzZSB2YWx1ZSB0byBzdG9yZSBhbG9uZyB3aXRoIHRoZSBtdXRhdGlvbiwgb3IgbnVsbCBmb3JcbiAqIGlkZW1wb3RlbnQgdHJhbnNmb3Jtcy5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfY29tcHV0ZVRyYW5zZm9ybU9wZXJhdGlvbkJhc2VWYWx1ZShlLCB0KSB7XG4gICAgcmV0dXJuIGUgaW5zdGFuY2VvZiBfX1BSSVZBVEVfTnVtZXJpY0luY3JlbWVudFRyYW5zZm9ybU9wZXJhdGlvbiA/IFxuICAgIC8qKiBSZXR1cm5zIHRydWUgaWYgYHZhbHVlYCBpcyBlaXRoZXIgYW4gSW50ZWdlclZhbHVlIG9yIGEgRG91YmxlVmFsdWUuICovXG4gICAgZnVuY3Rpb24gX19QUklWQVRFX2lzTnVtYmVyKGUpIHtcbiAgICAgICAgcmV0dXJuIGlzSW50ZWdlcihlKSB8fCBmdW5jdGlvbiBfX1BSSVZBVEVfaXNEb3VibGUoZSkge1xuICAgICAgICAgICAgcmV0dXJuICEhZSAmJiBcImRvdWJsZVZhbHVlXCIgaW4gZTtcbiAgICAgICAgfShlKTtcbiAgICB9KHQpID8gdCA6IHtcbiAgICAgICAgaW50ZWdlclZhbHVlOiAwXG4gICAgfSA6IG51bGw7XG59XG5cbi8qKiBUcmFuc2Zvcm1zIGEgdmFsdWUgaW50byBhIHNlcnZlci1nZW5lcmF0ZWQgdGltZXN0YW1wLiAqL1xuY2xhc3MgX19QUklWQVRFX1NlcnZlclRpbWVzdGFtcFRyYW5zZm9ybSBleHRlbmRzIFRyYW5zZm9ybU9wZXJhdGlvbiB7fVxuXG4vKiogVHJhbnNmb3JtcyBhbiBhcnJheSB2YWx1ZSB2aWEgYSB1bmlvbiBvcGVyYXRpb24uICovIGNsYXNzIF9fUFJJVkFURV9BcnJheVVuaW9uVHJhbnNmb3JtT3BlcmF0aW9uIGV4dGVuZHMgVHJhbnNmb3JtT3BlcmF0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuZWxlbWVudHMgPSBlO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2FwcGx5QXJyYXlVbmlvblRyYW5zZm9ybU9wZXJhdGlvbihlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9jb2VyY2VkRmllbGRWYWx1ZXNBcnJheSh0KTtcbiAgICBmb3IgKGNvbnN0IHQgb2YgZS5lbGVtZW50cykgbi5zb21lKChlID0+IF9fUFJJVkFURV92YWx1ZUVxdWFscyhlLCB0KSkpIHx8IG4ucHVzaCh0KTtcbiAgICByZXR1cm4ge1xuICAgICAgICBhcnJheVZhbHVlOiB7XG4gICAgICAgICAgICB2YWx1ZXM6IG5cbiAgICAgICAgfVxuICAgIH07XG59XG5cbi8qKiBUcmFuc2Zvcm1zIGFuIGFycmF5IHZhbHVlIHZpYSBhIHJlbW92ZSBvcGVyYXRpb24uICovIGNsYXNzIF9fUFJJVkFURV9BcnJheVJlbW92ZVRyYW5zZm9ybU9wZXJhdGlvbiBleHRlbmRzIFRyYW5zZm9ybU9wZXJhdGlvbiB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmVsZW1lbnRzID0gZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9hcHBseUFycmF5UmVtb3ZlVHJhbnNmb3JtT3BlcmF0aW9uKGUsIHQpIHtcbiAgICBsZXQgbiA9IF9fUFJJVkFURV9jb2VyY2VkRmllbGRWYWx1ZXNBcnJheSh0KTtcbiAgICBmb3IgKGNvbnN0IHQgb2YgZS5lbGVtZW50cykgbiA9IG4uZmlsdGVyKChlID0+ICFfX1BSSVZBVEVfdmFsdWVFcXVhbHMoZSwgdCkpKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBhcnJheVZhbHVlOiB7XG4gICAgICAgICAgICB2YWx1ZXM6IG5cbiAgICAgICAgfVxuICAgIH07XG59XG5cbi8qKlxuICogSW1wbGVtZW50cyB0aGUgYmFja2VuZCBzZW1hbnRpY3MgZm9yIGxvY2FsbHkgY29tcHV0ZWQgTlVNRVJJQ19BREQgKGluY3JlbWVudClcbiAqIHRyYW5zZm9ybXMuIENvbnZlcnRzIGFsbCBmaWVsZCB2YWx1ZXMgdG8gaW50ZWdlcnMgb3IgZG91YmxlcywgYnV0IHVubGlrZSB0aGVcbiAqIGJhY2tlbmQgZG9lcyBub3QgY2FwIGludGVnZXIgdmFsdWVzIGF0IDJeNjMuIEluc3RlYWQsIEphdmFTY3JpcHQgbnVtYmVyXG4gKiBhcml0aG1ldGljIGlzIHVzZWQgYW5kIHByZWNpc2lvbiBsb3NzIGNhbiBvY2N1ciBmb3IgdmFsdWVzIGdyZWF0ZXIgdGhhbiAyXjUzLlxuICovIGNsYXNzIF9fUFJJVkFURV9OdW1lcmljSW5jcmVtZW50VHJhbnNmb3JtT3BlcmF0aW9uIGV4dGVuZHMgVHJhbnNmb3JtT3BlcmF0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuc2VyaWFsaXplciA9IGUsIHRoaXMuSWUgPSB0O1xuICAgIH1cbn1cblxuZnVuY3Rpb24gYXNOdW1iZXIoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfbm9ybWFsaXplTnVtYmVyKGUuaW50ZWdlclZhbHVlIHx8IGUuZG91YmxlVmFsdWUpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfY29lcmNlZEZpZWxkVmFsdWVzQXJyYXkoZSkge1xuICAgIHJldHVybiBpc0FycmF5KGUpICYmIGUuYXJyYXlWYWx1ZS52YWx1ZXMgPyBlLmFycmF5VmFsdWUudmFsdWVzLnNsaWNlKCkgOiBbXTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBBIGZpZWxkIHBhdGggYW5kIHRoZSBUcmFuc2Zvcm1PcGVyYXRpb24gdG8gcGVyZm9ybSB1cG9uIGl0LiAqLyBjbGFzcyBGaWVsZFRyYW5zZm9ybSB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICB0aGlzLmZpZWxkID0gZSwgdGhpcy50cmFuc2Zvcm0gPSB0O1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2ZpZWxkVHJhbnNmb3JtRXF1YWxzKGUsIHQpIHtcbiAgICByZXR1cm4gZS5maWVsZC5pc0VxdWFsKHQuZmllbGQpICYmIGZ1bmN0aW9uIF9fUFJJVkFURV90cmFuc2Zvcm1PcGVyYXRpb25FcXVhbHMoZSwgdCkge1xuICAgICAgICByZXR1cm4gZSBpbnN0YW5jZW9mIF9fUFJJVkFURV9BcnJheVVuaW9uVHJhbnNmb3JtT3BlcmF0aW9uICYmIHQgaW5zdGFuY2VvZiBfX1BSSVZBVEVfQXJyYXlVbmlvblRyYW5zZm9ybU9wZXJhdGlvbiB8fCBlIGluc3RhbmNlb2YgX19QUklWQVRFX0FycmF5UmVtb3ZlVHJhbnNmb3JtT3BlcmF0aW9uICYmIHQgaW5zdGFuY2VvZiBfX1BSSVZBVEVfQXJyYXlSZW1vdmVUcmFuc2Zvcm1PcGVyYXRpb24gPyBfX1BSSVZBVEVfYXJyYXlFcXVhbHMoZS5lbGVtZW50cywgdC5lbGVtZW50cywgX19QUklWQVRFX3ZhbHVlRXF1YWxzKSA6IGUgaW5zdGFuY2VvZiBfX1BSSVZBVEVfTnVtZXJpY0luY3JlbWVudFRyYW5zZm9ybU9wZXJhdGlvbiAmJiB0IGluc3RhbmNlb2YgX19QUklWQVRFX051bWVyaWNJbmNyZW1lbnRUcmFuc2Zvcm1PcGVyYXRpb24gPyBfX1BSSVZBVEVfdmFsdWVFcXVhbHMoZS5JZSwgdC5JZSkgOiBlIGluc3RhbmNlb2YgX19QUklWQVRFX1NlcnZlclRpbWVzdGFtcFRyYW5zZm9ybSAmJiB0IGluc3RhbmNlb2YgX19QUklWQVRFX1NlcnZlclRpbWVzdGFtcFRyYW5zZm9ybTtcbiAgICB9KGUudHJhbnNmb3JtLCB0LnRyYW5zZm9ybSk7XG59XG5cbi8qKiBUaGUgcmVzdWx0IG9mIHN1Y2Nlc3NmdWxseSBhcHBseWluZyBhIG11dGF0aW9uIHRvIHRoZSBiYWNrZW5kLiAqL1xuY2xhc3MgTXV0YXRpb25SZXN1bHQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSB2ZXJzaW9uIGF0IHdoaWNoIHRoZSBtdXRhdGlvbiB3YXMgY29tbWl0dGVkOlxuICAgICAqXG4gICAgICogLSBGb3IgbW9zdCBvcGVyYXRpb25zLCB0aGlzIGlzIHRoZSB1cGRhdGVUaW1lIGluIHRoZSBXcml0ZVJlc3VsdC5cbiAgICAgKiAtIEZvciBkZWxldGVzLCB0aGUgY29tbWl0VGltZSBvZiB0aGUgV3JpdGVSZXNwb25zZSAoYmVjYXVzZSBkZWxldGVzIGFyZVxuICAgICAqICAgbm90IHN0b3JlZCBhbmQgaGF2ZSBubyB1cGRhdGVUaW1lKS5cbiAgICAgKlxuICAgICAqIE5vdGUgdGhhdCB0aGVzZSB2ZXJzaW9ucyBjYW4gYmUgZGlmZmVyZW50OiBOby1vcCB3cml0ZXMgd2lsbCBub3QgY2hhbmdlXG4gICAgICogdGhlIHVwZGF0ZVRpbWUgZXZlbiB0aG91Z2ggdGhlIGNvbW1pdFRpbWUgYWR2YW5jZXMuXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogVGhlIHJlc3VsdGluZyBmaWVsZHMgcmV0dXJuZWQgZnJvbSB0aGUgYmFja2VuZCBhZnRlciBhIG11dGF0aW9uXG4gICAgICogY29udGFpbmluZyBmaWVsZCB0cmFuc2Zvcm1zIGhhcyBiZWVuIGNvbW1pdHRlZC4gQ29udGFpbnMgb25lIEZpZWxkVmFsdWVcbiAgICAgKiBmb3IgZWFjaCBGaWVsZFRyYW5zZm9ybSB0aGF0IHdhcyBpbiB0aGUgbXV0YXRpb24uXG4gICAgICpcbiAgICAgKiBXaWxsIGJlIGVtcHR5IGlmIHRoZSBtdXRhdGlvbiBkaWQgbm90IGNvbnRhaW4gYW55IGZpZWxkIHRyYW5zZm9ybXMuXG4gICAgICovXG4gICAgdCkge1xuICAgICAgICB0aGlzLnZlcnNpb24gPSBlLCB0aGlzLnRyYW5zZm9ybVJlc3VsdHMgPSB0O1xuICAgIH1cbn1cblxuLyoqXG4gKiBFbmNvZGVzIGEgcHJlY29uZGl0aW9uIGZvciBhIG11dGF0aW9uLiBUaGlzIGZvbGxvd3MgdGhlIG1vZGVsIHRoYXQgdGhlXG4gKiBiYWNrZW5kIGFjY2VwdHMgd2l0aCB0aGUgc3BlY2lhbCBjYXNlIG9mIGFuIGV4cGxpY2l0IFwiZW1wdHlcIiBwcmVjb25kaXRpb25cbiAqIChtZWFuaW5nIG5vIHByZWNvbmRpdGlvbikuXG4gKi8gY2xhc3MgUHJlY29uZGl0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMudXBkYXRlVGltZSA9IGUsIHRoaXMuZXhpc3RzID0gdDtcbiAgICB9XG4gICAgLyoqIENyZWF0ZXMgYSBuZXcgZW1wdHkgUHJlY29uZGl0aW9uLiAqLyAgICBzdGF0aWMgbm9uZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcmVjb25kaXRpb247XG4gICAgfVxuICAgIC8qKiBDcmVhdGVzIGEgbmV3IFByZWNvbmRpdGlvbiB3aXRoIGFuIGV4aXN0cyBmbGFnLiAqLyAgICBzdGF0aWMgZXhpc3RzKGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcmVjb25kaXRpb24odm9pZCAwLCBlKTtcbiAgICB9XG4gICAgLyoqIENyZWF0ZXMgYSBuZXcgUHJlY29uZGl0aW9uIGJhc2VkIG9uIGEgdmVyc2lvbiBhIGRvY3VtZW50IGV4aXN0cyBhdC4gKi8gICAgc3RhdGljIHVwZGF0ZVRpbWUoZSkge1xuICAgICAgICByZXR1cm4gbmV3IFByZWNvbmRpdGlvbihlKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgd2hldGhlciB0aGlzIFByZWNvbmRpdGlvbiBpcyBlbXB0eS4gKi8gICAgZ2V0IGlzTm9uZSgpIHtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCA9PT0gdGhpcy51cGRhdGVUaW1lICYmIHZvaWQgMCA9PT0gdGhpcy5leGlzdHM7XG4gICAgfVxuICAgIGlzRXF1YWwoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5leGlzdHMgPT09IGUuZXhpc3RzICYmICh0aGlzLnVwZGF0ZVRpbWUgPyAhIWUudXBkYXRlVGltZSAmJiB0aGlzLnVwZGF0ZVRpbWUuaXNFcXVhbChlLnVwZGF0ZVRpbWUpIDogIWUudXBkYXRlVGltZSk7XG4gICAgfVxufVxuXG4vKiogUmV0dXJucyB0cnVlIGlmIHRoZSBwcmVjb25kaXRpb25zIGlzIHZhbGlkIGZvciB0aGUgZ2l2ZW4gZG9jdW1lbnQuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9wcmVjb25kaXRpb25Jc1ZhbGlkRm9yRG9jdW1lbnQoZSwgdCkge1xuICAgIHJldHVybiB2b2lkIDAgIT09IGUudXBkYXRlVGltZSA/IHQuaXNGb3VuZERvY3VtZW50KCkgJiYgdC52ZXJzaW9uLmlzRXF1YWwoZS51cGRhdGVUaW1lKSA6IHZvaWQgMCA9PT0gZS5leGlzdHMgfHwgZS5leGlzdHMgPT09IHQuaXNGb3VuZERvY3VtZW50KCk7XG59XG5cbi8qKlxuICogQSBtdXRhdGlvbiBkZXNjcmliZXMgYSBzZWxmLWNvbnRhaW5lZCBjaGFuZ2UgdG8gYSBkb2N1bWVudC4gTXV0YXRpb25zIGNhblxuICogY3JlYXRlLCByZXBsYWNlLCBkZWxldGUsIGFuZCB1cGRhdGUgc3Vic2V0cyBvZiBkb2N1bWVudHMuXG4gKlxuICogTXV0YXRpb25zIG5vdCBvbmx5IGFjdCBvbiB0aGUgdmFsdWUgb2YgdGhlIGRvY3VtZW50IGJ1dCBhbHNvIGl0cyB2ZXJzaW9uLlxuICpcbiAqIEZvciBsb2NhbCBtdXRhdGlvbnMgKG11dGF0aW9ucyB0aGF0IGhhdmVuJ3QgYmVlbiBjb21taXR0ZWQgeWV0KSwgd2UgcHJlc2VydmVcbiAqIHRoZSBleGlzdGluZyB2ZXJzaW9uIGZvciBTZXQgYW5kIFBhdGNoIG11dGF0aW9ucy4gRm9yIERlbGV0ZSBtdXRhdGlvbnMsIHdlXG4gKiByZXNldCB0aGUgdmVyc2lvbiB0byAwLlxuICpcbiAqIEhlcmUncyB0aGUgZXhwZWN0ZWQgdHJhbnNpdGlvbiB0YWJsZS5cbiAqXG4gKiBNVVRBVElPTiAgICAgICAgICAgQVBQTElFRCBUTyAgICAgICAgICAgIFJFU1VMVFMgSU5cbiAqXG4gKiBTZXRNdXRhdGlvbiAgICAgICAgRG9jdW1lbnQodjMpICAgICAgICAgIERvY3VtZW50KHYzKVxuICogU2V0TXV0YXRpb24gICAgICAgIE5vRG9jdW1lbnQodjMpICAgICAgICBEb2N1bWVudCh2MClcbiAqIFNldE11dGF0aW9uICAgICAgICBJbnZhbGlkRG9jdW1lbnQodjApICAgRG9jdW1lbnQodjApXG4gKiBQYXRjaE11dGF0aW9uICAgICAgRG9jdW1lbnQodjMpICAgICAgICAgIERvY3VtZW50KHYzKVxuICogUGF0Y2hNdXRhdGlvbiAgICAgIE5vRG9jdW1lbnQodjMpICAgICAgICBOb0RvY3VtZW50KHYzKVxuICogUGF0Y2hNdXRhdGlvbiAgICAgIEludmFsaWREb2N1bWVudCh2MCkgICBVbmtub3duRG9jdW1lbnQodjMpXG4gKiBEZWxldGVNdXRhdGlvbiAgICAgRG9jdW1lbnQodjMpICAgICAgICAgIE5vRG9jdW1lbnQodjApXG4gKiBEZWxldGVNdXRhdGlvbiAgICAgTm9Eb2N1bWVudCh2MykgICAgICAgIE5vRG9jdW1lbnQodjApXG4gKiBEZWxldGVNdXRhdGlvbiAgICAgSW52YWxpZERvY3VtZW50KHYwKSAgIE5vRG9jdW1lbnQodjApXG4gKlxuICogRm9yIGFja25vd2xlZGdlZCBtdXRhdGlvbnMsIHdlIHVzZSB0aGUgdXBkYXRlVGltZSBvZiB0aGUgV3JpdGVSZXNwb25zZSBhc1xuICogdGhlIHJlc3VsdGluZyB2ZXJzaW9uIGZvciBTZXQgYW5kIFBhdGNoIG11dGF0aW9ucy4gQXMgZGVsZXRlcyBoYXZlIG5vXG4gKiBleHBsaWNpdCB1cGRhdGUgdGltZSwgd2UgdXNlIHRoZSBjb21taXRUaW1lIG9mIHRoZSBXcml0ZVJlc3BvbnNlIGZvclxuICogRGVsZXRlIG11dGF0aW9ucy5cbiAqXG4gKiBJZiBhIG11dGF0aW9uIGlzIGFja25vd2xlZGdlZCBieSB0aGUgYmFja2VuZCBidXQgZmFpbHMgdGhlIHByZWNvbmRpdGlvbiBjaGVja1xuICogbG9jYWxseSwgd2UgdHJhbnNpdGlvbiB0byBhbiBgVW5rbm93bkRvY3VtZW50YCBhbmQgcmVseSBvbiBXYXRjaCB0byBzZW5kIHVzXG4gKiB0aGUgdXBkYXRlZCB2ZXJzaW9uLlxuICpcbiAqIEZpZWxkIHRyYW5zZm9ybXMgYXJlIHVzZWQgb25seSB3aXRoIFBhdGNoIGFuZCBTZXQgTXV0YXRpb25zLiBXZSB1c2UgdGhlXG4gKiBgdXBkYXRlVHJhbnNmb3Jtc2AgbWVzc2FnZSB0byBzdG9yZSB0cmFuc2Zvcm1zLCByYXRoZXIgdGhhbiB0aGUgYHRyYW5zZm9ybXNgc1xuICogbWVzc2FnZXMuXG4gKlxuICogIyMgU3ViY2xhc3NpbmcgTm90ZXNcbiAqXG4gKiBFdmVyeSB0eXBlIG9mIG11dGF0aW9uIG5lZWRzIHRvIGltcGxlbWVudCBpdHMgb3duIGFwcGx5VG9SZW1vdGVEb2N1bWVudCgpIGFuZFxuICogYXBwbHlUb0xvY2FsVmlldygpIHRvIGltcGxlbWVudCB0aGUgYWN0dWFsIGJlaGF2aW9yIG9mIGFwcGx5aW5nIHRoZSBtdXRhdGlvblxuICogdG8gc29tZSBzb3VyY2UgZG9jdW1lbnQgKHNlZSBgc2V0TXV0YXRpb25BcHBseVRvUmVtb3RlRG9jdW1lbnQoKWAgZm9yIGFuXG4gKiBleGFtcGxlKS5cbiAqLyBjbGFzcyBNdXRhdGlvbiB7fVxuXG4vKipcbiAqIEEgdXRpbGl0eSBtZXRob2QgdG8gY2FsY3VsYXRlIGEgYE11dGF0aW9uYCByZXByZXNlbnRpbmcgdGhlIG92ZXJsYXkgZnJvbSB0aGVcbiAqIGZpbmFsIHN0YXRlIG9mIHRoZSBkb2N1bWVudCwgYW5kIGEgYEZpZWxkTWFza2AgcmVwcmVzZW50aW5nIHRoZSBmaWVsZHMgdGhhdFxuICogYXJlIG11dGF0ZWQgYnkgdGhlIGxvY2FsIG11dGF0aW9ucy5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfY2FsY3VsYXRlT3ZlcmxheU11dGF0aW9uKGUsIHQpIHtcbiAgICBpZiAoIWUuaGFzTG9jYWxNdXRhdGlvbnMgfHwgdCAmJiAwID09PSB0LmZpZWxkcy5sZW5ndGgpIHJldHVybiBudWxsO1xuICAgIC8vIG1hc2sgaXMgbnVsbCB3aGVuIHNldHMgb3IgZGVsZXRlcyBhcmUgYXBwbGllZCB0byB0aGUgY3VycmVudCBkb2N1bWVudC5cbiAgICAgICAgaWYgKG51bGwgPT09IHQpIHJldHVybiBlLmlzTm9Eb2N1bWVudCgpID8gbmV3IF9fUFJJVkFURV9EZWxldGVNdXRhdGlvbihlLmtleSwgUHJlY29uZGl0aW9uLm5vbmUoKSkgOiBuZXcgX19QUklWQVRFX1NldE11dGF0aW9uKGUua2V5LCBlLmRhdGEsIFByZWNvbmRpdGlvbi5ub25lKCkpO1xuICAgIHtcbiAgICAgICAgY29uc3QgbiA9IGUuZGF0YSwgciA9IE9iamVjdFZhbHVlLmVtcHR5KCk7XG4gICAgICAgIGxldCBpID0gbmV3IFNvcnRlZFNldChGaWVsZFBhdGgkMS5jb21wYXJhdG9yKTtcbiAgICAgICAgZm9yIChsZXQgZSBvZiB0LmZpZWxkcykgaWYgKCFpLmhhcyhlKSkge1xuICAgICAgICAgICAgbGV0IHQgPSBuLmZpZWxkKGUpO1xuICAgICAgICAgICAgLy8gSWYgd2UgYXJlIGRlbGV0aW5nIGEgbmVzdGVkIGZpZWxkLCB3ZSB0YWtlIHRoZSBpbW1lZGlhdGUgcGFyZW50IGFzXG4gICAgICAgICAgICAvLyB0aGUgbWFzayB1c2VkIHRvIGNvbnN0cnVjdCB0aGUgcmVzdWx0aW5nIG11dGF0aW9uLlxuICAgICAgICAgICAgLy8gSnVzdGlmaWNhdGlvbjogTmVzdGVkIGZpZWxkcyBjYW4gY3JlYXRlIHBhcmVudCBmaWVsZHMgaW1wbGljaXRseS4gSWZcbiAgICAgICAgICAgIC8vIG9ubHkgYSBsZWFmIGVudHJ5IGlzIGRlbGV0ZWQgaW4gbGF0ZXIgbXV0YXRpb25zLCB0aGUgcGFyZW50IGZpZWxkXG4gICAgICAgICAgICAvLyBzaG91bGQgc3RpbGwgcmVtYWluLCBidXQgd2UgbWF5IGhhdmUgbG9zdCB0aGlzIGluZm9ybWF0aW9uLlxuICAgICAgICAgICAgLy8gQ29uc2lkZXIgbXV0YXRpb24gKGZvby5iYXIgMSksIHRoZW4gbXV0YXRpb24gKGZvby5iYXIgZGVsZXRlKCkpLlxuICAgICAgICAgICAgLy8gVGhpcyBsZWF2ZXMgdGhlIGZpbmFsIHJlc3VsdCAoZm9vLCB7fSkuIERlc3BpdGUgdGhlIGZhY3QgdGhhdCBgZG9jYFxuICAgICAgICAgICAgLy8gaGFzIHRoZSBjb3JyZWN0IHJlc3VsdCwgYGZvb2AgaXMgbm90IGluIGBtYXNrYCwgYW5kIHRoZSByZXN1bHRpbmdcbiAgICAgICAgICAgIC8vIG11dGF0aW9uIHdvdWxkIG1pc3MgYGZvb2AuXG4gICAgICAgICAgICAgICAgICAgICAgICBudWxsID09PSB0ICYmIGUubGVuZ3RoID4gMSAmJiAoZSA9IGUucG9wTGFzdCgpLCB0ID0gbi5maWVsZChlKSksIG51bGwgPT09IHQgPyByLmRlbGV0ZShlKSA6IHIuc2V0KGUsIHQpLCBcbiAgICAgICAgICAgIGkgPSBpLmFkZChlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9QYXRjaE11dGF0aW9uKGUua2V5LCByLCBuZXcgRmllbGRNYXNrKGkudG9BcnJheSgpKSwgUHJlY29uZGl0aW9uLm5vbmUoKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEFwcGxpZXMgdGhpcyBtdXRhdGlvbiB0byB0aGUgZ2l2ZW4gZG9jdW1lbnQgZm9yIHRoZSBwdXJwb3NlcyBvZiBjb21wdXRpbmcgYVxuICogbmV3IHJlbW90ZSBkb2N1bWVudC4gSWYgdGhlIGlucHV0IGRvY3VtZW50IGRvZXNuJ3QgbWF0Y2ggdGhlIGV4cGVjdGVkIHN0YXRlXG4gKiAoZS5nLiBpdCBpcyBpbnZhbGlkIG9yIG91dGRhdGVkKSwgdGhlIGRvY3VtZW50IHR5cGUgbWF5IHRyYW5zaXRpb24gdG9cbiAqIHVua25vd24uXG4gKlxuICogQHBhcmFtIG11dGF0aW9uIC0gVGhlIG11dGF0aW9uIHRvIGFwcGx5LlxuICogQHBhcmFtIGRvY3VtZW50IC0gVGhlIGRvY3VtZW50IHRvIG11dGF0ZS4gVGhlIGlucHV0IGRvY3VtZW50IGNhbiBiZSBhblxuICogICAgIGludmFsaWQgZG9jdW1lbnQgaWYgdGhlIGNsaWVudCBoYXMgbm8ga25vd2xlZGdlIG9mIHRoZSBwcmUtbXV0YXRpb24gc3RhdGVcbiAqICAgICBvZiB0aGUgZG9jdW1lbnQuXG4gKiBAcGFyYW0gbXV0YXRpb25SZXN1bHQgLSBUaGUgcmVzdWx0IG9mIGFwcGx5aW5nIHRoZSBtdXRhdGlvbiBmcm9tIHRoZSBiYWNrZW5kLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9tdXRhdGlvbkFwcGx5VG9SZW1vdGVEb2N1bWVudChlLCB0LCBuKSB7XG4gICAgZSBpbnN0YW5jZW9mIF9fUFJJVkFURV9TZXRNdXRhdGlvbiA/IGZ1bmN0aW9uIF9fUFJJVkFURV9zZXRNdXRhdGlvbkFwcGx5VG9SZW1vdGVEb2N1bWVudChlLCB0LCBuKSB7XG4gICAgICAgIC8vIFVubGlrZSBzZXRNdXRhdGlvbkFwcGx5VG9Mb2NhbFZpZXcsIGlmIHdlJ3JlIGFwcGx5aW5nIGEgbXV0YXRpb24gdG8gYVxuICAgICAgICAvLyByZW1vdGUgZG9jdW1lbnQgdGhlIHNlcnZlciBoYXMgYWNjZXB0ZWQgdGhlIG11dGF0aW9uIHNvIHRoZSBwcmVjb25kaXRpb25cbiAgICAgICAgLy8gbXVzdCBoYXZlIGhlbGQuXG4gICAgICAgIGNvbnN0IHIgPSBlLnZhbHVlLmNsb25lKCksIGkgPSBfX1BSSVZBVEVfc2VydmVyVHJhbnNmb3JtUmVzdWx0cyhlLmZpZWxkVHJhbnNmb3JtcywgdCwgbi50cmFuc2Zvcm1SZXN1bHRzKTtcbiAgICAgICAgci5zZXRBbGwoaSksIHQuY29udmVydFRvRm91bmREb2N1bWVudChuLnZlcnNpb24sIHIpLnNldEhhc0NvbW1pdHRlZE11dGF0aW9ucygpO1xuICAgIH0oZSwgdCwgbikgOiBlIGluc3RhbmNlb2YgX19QUklWQVRFX1BhdGNoTXV0YXRpb24gPyBmdW5jdGlvbiBfX1BSSVZBVEVfcGF0Y2hNdXRhdGlvbkFwcGx5VG9SZW1vdGVEb2N1bWVudChlLCB0LCBuKSB7XG4gICAgICAgIGlmICghX19QUklWQVRFX3ByZWNvbmRpdGlvbklzVmFsaWRGb3JEb2N1bWVudChlLnByZWNvbmRpdGlvbiwgdCkpIFxuICAgICAgICAvLyBTaW5jZSB0aGUgbXV0YXRpb24gd2FzIG5vdCByZWplY3RlZCwgd2Uga25vdyB0aGF0IHRoZSBwcmVjb25kaXRpb25cbiAgICAgICAgLy8gbWF0Y2hlZCBvbiB0aGUgYmFja2VuZC4gV2UgdGhlcmVmb3JlIG11c3Qgbm90IGhhdmUgdGhlIGV4cGVjdGVkIHZlcnNpb25cbiAgICAgICAgLy8gb2YgdGhlIGRvY3VtZW50IGluIG91ciBjYWNoZSBhbmQgY29udmVydCB0byBhbiBVbmtub3duRG9jdW1lbnQgd2l0aCBhXG4gICAgICAgIC8vIGtub3duIHVwZGF0ZVRpbWUuXG4gICAgICAgIHJldHVybiB2b2lkIHQuY29udmVydFRvVW5rbm93bkRvY3VtZW50KG4udmVyc2lvbik7XG4gICAgICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfc2VydmVyVHJhbnNmb3JtUmVzdWx0cyhlLmZpZWxkVHJhbnNmb3JtcywgdCwgbi50cmFuc2Zvcm1SZXN1bHRzKSwgaSA9IHQuZGF0YTtcbiAgICAgICAgaS5zZXRBbGwoX19QUklWQVRFX2dldFBhdGNoKGUpKSwgaS5zZXRBbGwociksIHQuY29udmVydFRvRm91bmREb2N1bWVudChuLnZlcnNpb24sIGkpLnNldEhhc0NvbW1pdHRlZE11dGF0aW9ucygpO1xuICAgIH0oZSwgdCwgbikgOiBmdW5jdGlvbiBfX1BSSVZBVEVfZGVsZXRlTXV0YXRpb25BcHBseVRvUmVtb3RlRG9jdW1lbnQoZSwgdCwgbikge1xuICAgICAgICAvLyBVbmxpa2UgYXBwbHlUb0xvY2FsVmlldywgaWYgd2UncmUgYXBwbHlpbmcgYSBtdXRhdGlvbiB0byBhIHJlbW90ZVxuICAgICAgICAvLyBkb2N1bWVudCB0aGUgc2VydmVyIGhhcyBhY2NlcHRlZCB0aGUgbXV0YXRpb24gc28gdGhlIHByZWNvbmRpdGlvbiBtdXN0XG4gICAgICAgIC8vIGhhdmUgaGVsZC5cbiAgICAgICAgdC5jb252ZXJ0VG9Ob0RvY3VtZW50KG4udmVyc2lvbikuc2V0SGFzQ29tbWl0dGVkTXV0YXRpb25zKCk7XG4gICAgfSgwLCB0LCBuKTtcbn1cblxuLyoqXG4gKiBBcHBsaWVzIHRoaXMgbXV0YXRpb24gdG8gdGhlIGdpdmVuIGRvY3VtZW50IGZvciB0aGUgcHVycG9zZXMgb2YgY29tcHV0aW5nXG4gKiB0aGUgbmV3IGxvY2FsIHZpZXcgb2YgYSBkb2N1bWVudC4gSWYgdGhlIGlucHV0IGRvY3VtZW50IGRvZXNuJ3QgbWF0Y2ggdGhlXG4gKiBleHBlY3RlZCBzdGF0ZSwgdGhlIGRvY3VtZW50IGlzIG5vdCBtb2RpZmllZC5cbiAqXG4gKiBAcGFyYW0gbXV0YXRpb24gLSBUaGUgbXV0YXRpb24gdG8gYXBwbHkuXG4gKiBAcGFyYW0gZG9jdW1lbnQgLSBUaGUgZG9jdW1lbnQgdG8gbXV0YXRlLiBUaGUgaW5wdXQgZG9jdW1lbnQgY2FuIGJlIGFuXG4gKiAgICAgaW52YWxpZCBkb2N1bWVudCBpZiB0aGUgY2xpZW50IGhhcyBubyBrbm93bGVkZ2Ugb2YgdGhlIHByZS1tdXRhdGlvbiBzdGF0ZVxuICogICAgIG9mIHRoZSBkb2N1bWVudC5cbiAqIEBwYXJhbSBwcmV2aW91c01hc2sgLSBUaGUgZmllbGRzIHRoYXQgaGF2ZSBiZWVuIHVwZGF0ZWQgYmVmb3JlIGFwcGx5aW5nIHRoaXMgbXV0YXRpb24uXG4gKiBAcGFyYW0gbG9jYWxXcml0ZVRpbWUgLSBBIHRpbWVzdGFtcCBpbmRpY2F0aW5nIHRoZSBsb2NhbCB3cml0ZSB0aW1lIG9mIHRoZVxuICogICAgIGJhdGNoIHRoaXMgbXV0YXRpb24gaXMgYSBwYXJ0IG9mLlxuICogQHJldHVybnMgQSBgRmllbGRNYXNrYCByZXByZXNlbnRpbmcgdGhlIGZpZWxkcyB0aGF0IGFyZSBjaGFuZ2VkIGJ5IGFwcGx5aW5nIHRoaXMgbXV0YXRpb24uXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX211dGF0aW9uQXBwbHlUb0xvY2FsVmlldyhlLCB0LCBuLCByKSB7XG4gICAgcmV0dXJuIGUgaW5zdGFuY2VvZiBfX1BSSVZBVEVfU2V0TXV0YXRpb24gPyBmdW5jdGlvbiBfX1BSSVZBVEVfc2V0TXV0YXRpb25BcHBseVRvTG9jYWxWaWV3KGUsIHQsIG4sIHIpIHtcbiAgICAgICAgaWYgKCFfX1BSSVZBVEVfcHJlY29uZGl0aW9uSXNWYWxpZEZvckRvY3VtZW50KGUucHJlY29uZGl0aW9uLCB0KSkgXG4gICAgICAgIC8vIFRoZSBtdXRhdGlvbiBmYWlsZWQgdG8gYXBwbHkgKGUuZy4gYSBkb2N1bWVudCBJRCBjcmVhdGVkIHdpdGggYWRkKClcbiAgICAgICAgLy8gY2F1c2VkIGEgbmFtZSBjb2xsaXNpb24pLlxuICAgICAgICByZXR1cm4gbjtcbiAgICAgICAgY29uc3QgaSA9IGUudmFsdWUuY2xvbmUoKSwgcyA9IF9fUFJJVkFURV9sb2NhbFRyYW5zZm9ybVJlc3VsdHMoZS5maWVsZFRyYW5zZm9ybXMsIHIsIHQpO1xuICAgICAgICByZXR1cm4gaS5zZXRBbGwocyksIHQuY29udmVydFRvRm91bmREb2N1bWVudCh0LnZlcnNpb24sIGkpLnNldEhhc0xvY2FsTXV0YXRpb25zKCksIFxuICAgICAgICBudWxsO1xuIC8vIFNldE11dGF0aW9uIG92ZXJ3cml0ZXMgYWxsIGZpZWxkcy5cbiAgICAgICAgfVxuICAgIC8qKlxuICogQSBtdXRhdGlvbiB0aGF0IG1vZGlmaWVzIGZpZWxkcyBvZiB0aGUgZG9jdW1lbnQgYXQgdGhlIGdpdmVuIGtleSB3aXRoIHRoZVxuICogZ2l2ZW4gdmFsdWVzLiBUaGUgdmFsdWVzIGFyZSBhcHBsaWVkIHRocm91Z2ggYSBmaWVsZCBtYXNrOlxuICpcbiAqICAqIFdoZW4gYSBmaWVsZCBpcyBpbiBib3RoIHRoZSBtYXNrIGFuZCB0aGUgdmFsdWVzLCB0aGUgY29ycmVzcG9uZGluZyBmaWVsZFxuICogICAgaXMgdXBkYXRlZC5cbiAqICAqIFdoZW4gYSBmaWVsZCBpcyBpbiBuZWl0aGVyIHRoZSBtYXNrIG5vciB0aGUgdmFsdWVzLCB0aGUgY29ycmVzcG9uZGluZ1xuICogICAgZmllbGQgaXMgdW5tb2RpZmllZC5cbiAqICAqIFdoZW4gYSBmaWVsZCBpcyBpbiB0aGUgbWFzayBidXQgbm90IGluIHRoZSB2YWx1ZXMsIHRoZSBjb3JyZXNwb25kaW5nIGZpZWxkXG4gKiAgICBpcyBkZWxldGVkLlxuICogICogV2hlbiBhIGZpZWxkIGlzIG5vdCBpbiB0aGUgbWFzayBidXQgaXMgaW4gdGhlIHZhbHVlcywgdGhlIHZhbHVlcyBtYXAgaXNcbiAqICAgIGlnbm9yZWQuXG4gKi8gKGUsIHQsIG4sIHIpIDogZSBpbnN0YW5jZW9mIF9fUFJJVkFURV9QYXRjaE11dGF0aW9uID8gZnVuY3Rpb24gX19QUklWQVRFX3BhdGNoTXV0YXRpb25BcHBseVRvTG9jYWxWaWV3KGUsIHQsIG4sIHIpIHtcbiAgICAgICAgaWYgKCFfX1BSSVZBVEVfcHJlY29uZGl0aW9uSXNWYWxpZEZvckRvY3VtZW50KGUucHJlY29uZGl0aW9uLCB0KSkgcmV0dXJuIG47XG4gICAgICAgIGNvbnN0IGkgPSBfX1BSSVZBVEVfbG9jYWxUcmFuc2Zvcm1SZXN1bHRzKGUuZmllbGRUcmFuc2Zvcm1zLCByLCB0KSwgcyA9IHQuZGF0YTtcbiAgICAgICAgaWYgKHMuc2V0QWxsKF9fUFJJVkFURV9nZXRQYXRjaChlKSksIHMuc2V0QWxsKGkpLCB0LmNvbnZlcnRUb0ZvdW5kRG9jdW1lbnQodC52ZXJzaW9uLCBzKS5zZXRIYXNMb2NhbE11dGF0aW9ucygpLCBcbiAgICAgICAgbnVsbCA9PT0gbikgcmV0dXJuIG51bGw7XG4gICAgICAgIHJldHVybiBuLnVuaW9uV2l0aChlLmZpZWxkTWFzay5maWVsZHMpLnVuaW9uV2l0aChlLmZpZWxkVHJhbnNmb3Jtcy5tYXAoKGUgPT4gZS5maWVsZCkpKTtcbiAgICB9XG4gICAgLyoqXG4gKiBSZXR1cm5zIGEgRmllbGRQYXRoL1ZhbHVlIG1hcCB3aXRoIHRoZSBjb250ZW50IG9mIHRoZSBQYXRjaE11dGF0aW9uLlxuICovIChlLCB0LCBuLCByKSA6IGZ1bmN0aW9uIF9fUFJJVkFURV9kZWxldGVNdXRhdGlvbkFwcGx5VG9Mb2NhbFZpZXcoZSwgdCwgbikge1xuICAgICAgICBpZiAoX19QUklWQVRFX3ByZWNvbmRpdGlvbklzVmFsaWRGb3JEb2N1bWVudChlLnByZWNvbmRpdGlvbiwgdCkpIHJldHVybiB0LmNvbnZlcnRUb05vRG9jdW1lbnQodC52ZXJzaW9uKS5zZXRIYXNMb2NhbE11dGF0aW9ucygpLCBcbiAgICAgICAgbnVsbDtcbiAgICAgICAgcmV0dXJuIG47XG4gICAgfVxuICAgIC8qKlxuICogQSBtdXRhdGlvbiB0aGF0IHZlcmlmaWVzIHRoZSBleGlzdGVuY2Ugb2YgdGhlIGRvY3VtZW50IGF0IHRoZSBnaXZlbiBrZXkgd2l0aFxuICogdGhlIHByb3ZpZGVkIHByZWNvbmRpdGlvbi5cbiAqXG4gKiBUaGUgYHZlcmlmeWAgb3BlcmF0aW9uIGlzIG9ubHkgdXNlZCBpbiBUcmFuc2FjdGlvbnMsIGFuZCB0aGlzIGNsYXNzIHNlcnZlc1xuICogcHJpbWFyaWx5IHRvIGZhY2lsaXRhdGUgc2VyaWFsaXphdGlvbiBpbnRvIHByb3Rvcy5cbiAqLyAoZSwgdCwgbik7XG59XG5cbi8qKlxuICogSWYgdGhpcyBtdXRhdGlvbiBpcyBub3QgaWRlbXBvdGVudCwgcmV0dXJucyB0aGUgYmFzZSB2YWx1ZSB0byBwZXJzaXN0IHdpdGhcbiAqIHRoaXMgbXV0YXRpb24uIElmIGEgYmFzZSB2YWx1ZSBpcyByZXR1cm5lZCwgdGhlIG11dGF0aW9uIGlzIGFsd2F5cyBhcHBsaWVkXG4gKiB0byB0aGlzIGJhc2UgdmFsdWUsIGV2ZW4gaWYgZG9jdW1lbnQgaGFzIGFscmVhZHkgYmVlbiB1cGRhdGVkLlxuICpcbiAqIFRoZSBiYXNlIHZhbHVlIGlzIGEgc3BhcnNlIG9iamVjdCB0aGF0IGNvbnNpc3RzIG9mIG9ubHkgdGhlIGRvY3VtZW50XG4gKiBmaWVsZHMgZm9yIHdoaWNoIHRoaXMgbXV0YXRpb24gY29udGFpbnMgYSBub24taWRlbXBvdGVudCB0cmFuc2Zvcm1hdGlvblxuICogKGUuZy4gYSBudW1lcmljIGluY3JlbWVudCkuIFRoZSBwcm92aWRlZCB2YWx1ZSBndWFyYW50ZWVzIGNvbnNpc3RlbnRcbiAqIGJlaGF2aW9yIGZvciBub24taWRlbXBvdGVudCB0cmFuc2Zvcm1zIGFuZCBhbGxvdyB1cyB0byByZXR1cm4gdGhlIHNhbWVcbiAqIGxhdGVuY3ktY29tcGVuc2F0ZWQgdmFsdWUgZXZlbiBpZiB0aGUgYmFja2VuZCBoYXMgYWxyZWFkeSBhcHBsaWVkIHRoZVxuICogbXV0YXRpb24uIFRoZSBiYXNlIHZhbHVlIGlzIG51bGwgZm9yIGlkZW1wb3RlbnQgbXV0YXRpb25zLCBhcyB0aGV5IGNhbiBiZVxuICogcmUtcGxheWVkIGV2ZW4gaWYgdGhlIGJhY2tlbmQgaGFzIGFscmVhZHkgYXBwbGllZCB0aGVtLlxuICpcbiAqIEByZXR1cm5zIGEgYmFzZSB2YWx1ZSB0byBzdG9yZSBhbG9uZyB3aXRoIHRoZSBtdXRhdGlvbiwgb3IgbnVsbCBmb3JcbiAqIGlkZW1wb3RlbnQgbXV0YXRpb25zLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9tdXRhdGlvbkV4dHJhY3RCYXNlVmFsdWUoZSwgdCkge1xuICAgIGxldCBuID0gbnVsbDtcbiAgICBmb3IgKGNvbnN0IHIgb2YgZS5maWVsZFRyYW5zZm9ybXMpIHtcbiAgICAgICAgY29uc3QgZSA9IHQuZGF0YS5maWVsZChyLmZpZWxkKSwgaSA9IF9fUFJJVkFURV9jb21wdXRlVHJhbnNmb3JtT3BlcmF0aW9uQmFzZVZhbHVlKHIudHJhbnNmb3JtLCBlIHx8IG51bGwpO1xuICAgICAgICBudWxsICE9IGkgJiYgKG51bGwgPT09IG4gJiYgKG4gPSBPYmplY3RWYWx1ZS5lbXB0eSgpKSwgbi5zZXQoci5maWVsZCwgaSkpO1xuICAgIH1cbiAgICByZXR1cm4gbiB8fCBudWxsO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfbXV0YXRpb25FcXVhbHMoZSwgdCkge1xuICAgIHJldHVybiBlLnR5cGUgPT09IHQudHlwZSAmJiAoISFlLmtleS5pc0VxdWFsKHQua2V5KSAmJiAoISFlLnByZWNvbmRpdGlvbi5pc0VxdWFsKHQucHJlY29uZGl0aW9uKSAmJiAoISFmdW5jdGlvbiBfX1BSSVZBVEVfZmllbGRUcmFuc2Zvcm1zQXJlRXF1YWwoZSwgdCkge1xuICAgICAgICByZXR1cm4gdm9pZCAwID09PSBlICYmIHZvaWQgMCA9PT0gdCB8fCAhKCFlIHx8ICF0KSAmJiBfX1BSSVZBVEVfYXJyYXlFcXVhbHMoZSwgdCwgKChlLCB0KSA9PiBfX1BSSVZBVEVfZmllbGRUcmFuc2Zvcm1FcXVhbHMoZSwgdCkpKTtcbiAgICB9KGUuZmllbGRUcmFuc2Zvcm1zLCB0LmZpZWxkVHJhbnNmb3JtcykgJiYgKDAgLyogTXV0YXRpb25UeXBlLlNldCAqLyA9PT0gZS50eXBlID8gZS52YWx1ZS5pc0VxdWFsKHQudmFsdWUpIDogMSAvKiBNdXRhdGlvblR5cGUuUGF0Y2ggKi8gIT09IGUudHlwZSB8fCBlLmRhdGEuaXNFcXVhbCh0LmRhdGEpICYmIGUuZmllbGRNYXNrLmlzRXF1YWwodC5maWVsZE1hc2spKSkpKTtcbn1cblxuLyoqXG4gKiBBIG11dGF0aW9uIHRoYXQgY3JlYXRlcyBvciByZXBsYWNlcyB0aGUgZG9jdW1lbnQgYXQgdGhlIGdpdmVuIGtleSB3aXRoIHRoZVxuICogb2JqZWN0IHZhbHVlIGNvbnRlbnRzLlxuICovIGNsYXNzIF9fUFJJVkFURV9TZXRNdXRhdGlvbiBleHRlbmRzIE11dGF0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuLCByID0gW10pIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5rZXkgPSBlLCB0aGlzLnZhbHVlID0gdCwgdGhpcy5wcmVjb25kaXRpb24gPSBuLCB0aGlzLmZpZWxkVHJhbnNmb3JtcyA9IHIsIFxuICAgICAgICB0aGlzLnR5cGUgPSAwIC8qIE11dGF0aW9uVHlwZS5TZXQgKi87XG4gICAgfVxuICAgIGdldEZpZWxkTWFzaygpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuXG5jbGFzcyBfX1BSSVZBVEVfUGF0Y2hNdXRhdGlvbiBleHRlbmRzIE11dGF0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuLCByLCBpID0gW10pIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5rZXkgPSBlLCB0aGlzLmRhdGEgPSB0LCB0aGlzLmZpZWxkTWFzayA9IG4sIHRoaXMucHJlY29uZGl0aW9uID0gciwgXG4gICAgICAgIHRoaXMuZmllbGRUcmFuc2Zvcm1zID0gaSwgdGhpcy50eXBlID0gMSAvKiBNdXRhdGlvblR5cGUuUGF0Y2ggKi87XG4gICAgfVxuICAgIGdldEZpZWxkTWFzaygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmllbGRNYXNrO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2dldFBhdGNoKGUpIHtcbiAgICBjb25zdCB0ID0gbmV3IE1hcDtcbiAgICByZXR1cm4gZS5maWVsZE1hc2suZmllbGRzLmZvckVhY2goKG4gPT4ge1xuICAgICAgICBpZiAoIW4uaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICBjb25zdCByID0gZS5kYXRhLmZpZWxkKG4pO1xuICAgICAgICAgICAgdC5zZXQobiwgcik7XG4gICAgICAgIH1cbiAgICB9KSksIHQ7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGxpc3Qgb2YgXCJ0cmFuc2Zvcm0gcmVzdWx0c1wiIChhIHRyYW5zZm9ybSByZXN1bHQgaXMgYSBmaWVsZCB2YWx1ZVxuICogcmVwcmVzZW50aW5nIHRoZSByZXN1bHQgb2YgYXBwbHlpbmcgYSB0cmFuc2Zvcm0pIGZvciB1c2UgYWZ0ZXIgYSBtdXRhdGlvblxuICogY29udGFpbmluZyB0cmFuc2Zvcm1zIGhhcyBiZWVuIGFja25vd2xlZGdlZCBieSB0aGUgc2VydmVyLlxuICpcbiAqIEBwYXJhbSBmaWVsZFRyYW5zZm9ybXMgLSBUaGUgZmllbGQgdHJhbnNmb3JtcyB0byBhcHBseSB0aGUgcmVzdWx0IHRvLlxuICogQHBhcmFtIG11dGFibGVEb2N1bWVudCAtIFRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSBkb2N1bWVudCBhZnRlciBhcHBseWluZyBhbGxcbiAqIHByZXZpb3VzIG11dGF0aW9ucy5cbiAqIEBwYXJhbSBzZXJ2ZXJUcmFuc2Zvcm1SZXN1bHRzIC0gVGhlIHRyYW5zZm9ybSByZXN1bHRzIHJlY2VpdmVkIGJ5IHRoZSBzZXJ2ZXIuXG4gKiBAcmV0dXJucyBUaGUgdHJhbnNmb3JtIHJlc3VsdHMgbGlzdC5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfc2VydmVyVHJhbnNmb3JtUmVzdWx0cyhlLCB0LCBuKSB7XG4gICAgY29uc3QgciA9IG5ldyBNYXA7XG4gICAgX19QUklWQVRFX2hhcmRBc3NlcnQoZS5sZW5ndGggPT09IG4ubGVuZ3RoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgcyA9IGVbaV0sIG8gPSBzLnRyYW5zZm9ybSwgXyA9IHQuZGF0YS5maWVsZChzLmZpZWxkKTtcbiAgICAgICAgci5zZXQocy5maWVsZCwgX19QUklWQVRFX2FwcGx5VHJhbnNmb3JtT3BlcmF0aW9uVG9SZW1vdGVEb2N1bWVudChvLCBfLCBuW2ldKSk7XG4gICAgfVxuICAgIHJldHVybiByO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBsaXN0IG9mIFwidHJhbnNmb3JtIHJlc3VsdHNcIiAoYSB0cmFuc2Zvcm0gcmVzdWx0IGlzIGEgZmllbGQgdmFsdWVcbiAqIHJlcHJlc2VudGluZyB0aGUgcmVzdWx0IG9mIGFwcGx5aW5nIGEgdHJhbnNmb3JtKSBmb3IgdXNlIHdoZW4gYXBwbHlpbmcgYVxuICogdHJhbnNmb3JtIGxvY2FsbHkuXG4gKlxuICogQHBhcmFtIGZpZWxkVHJhbnNmb3JtcyAtIFRoZSBmaWVsZCB0cmFuc2Zvcm1zIHRvIGFwcGx5IHRoZSByZXN1bHQgdG8uXG4gKiBAcGFyYW0gbG9jYWxXcml0ZVRpbWUgLSBUaGUgbG9jYWwgdGltZSBvZiB0aGUgbXV0YXRpb24gKHVzZWQgdG9cbiAqICAgICBnZW5lcmF0ZSBTZXJ2ZXJUaW1lc3RhbXBWYWx1ZXMpLlxuICogQHBhcmFtIG11dGFibGVEb2N1bWVudCAtIFRoZSBkb2N1bWVudCB0byBhcHBseSB0cmFuc2Zvcm1zIG9uLlxuICogQHJldHVybnMgVGhlIHRyYW5zZm9ybSByZXN1bHRzIGxpc3QuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2xvY2FsVHJhbnNmb3JtUmVzdWx0cyhlLCB0LCBuKSB7XG4gICAgY29uc3QgciA9IG5ldyBNYXA7XG4gICAgZm9yIChjb25zdCBpIG9mIGUpIHtcbiAgICAgICAgY29uc3QgZSA9IGkudHJhbnNmb3JtLCBzID0gbi5kYXRhLmZpZWxkKGkuZmllbGQpO1xuICAgICAgICByLnNldChpLmZpZWxkLCBfX1BSSVZBVEVfYXBwbHlUcmFuc2Zvcm1PcGVyYXRpb25Ub0xvY2FsVmlldyhlLCBzLCB0KSk7XG4gICAgfVxuICAgIHJldHVybiByO1xufVxuXG4vKiogQSBtdXRhdGlvbiB0aGF0IGRlbGV0ZXMgdGhlIGRvY3VtZW50IGF0IHRoZSBnaXZlbiBrZXkuICovIGNsYXNzIF9fUFJJVkFURV9EZWxldGVNdXRhdGlvbiBleHRlbmRzIE11dGF0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMua2V5ID0gZSwgdGhpcy5wcmVjb25kaXRpb24gPSB0LCB0aGlzLnR5cGUgPSAyIC8qIE11dGF0aW9uVHlwZS5EZWxldGUgKi8gLCBcbiAgICAgICAgdGhpcy5maWVsZFRyYW5zZm9ybXMgPSBbXTtcbiAgICB9XG4gICAgZ2V0RmllbGRNYXNrKCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG5cbmNsYXNzIF9fUFJJVkFURV9WZXJpZnlNdXRhdGlvbiBleHRlbmRzIE11dGF0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMua2V5ID0gZSwgdGhpcy5wcmVjb25kaXRpb24gPSB0LCB0aGlzLnR5cGUgPSAzIC8qIE11dGF0aW9uVHlwZS5WZXJpZnkgKi8gLCBcbiAgICAgICAgdGhpcy5maWVsZFRyYW5zZm9ybXMgPSBbXTtcbiAgICB9XG4gICAgZ2V0RmllbGRNYXNrKCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgYmF0Y2ggb2YgbXV0YXRpb25zIHRoYXQgd2lsbCBiZSBzZW50IGFzIG9uZSB1bml0IHRvIHRoZSBiYWNrZW5kLlxuICovIGNsYXNzIE11dGF0aW9uQmF0Y2gge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBiYXRjaElkIC0gVGhlIHVuaXF1ZSBJRCBvZiB0aGlzIG11dGF0aW9uIGJhdGNoLlxuICAgICAqIEBwYXJhbSBsb2NhbFdyaXRlVGltZSAtIFRoZSBvcmlnaW5hbCB3cml0ZSB0aW1lIG9mIHRoaXMgbXV0YXRpb24uXG4gICAgICogQHBhcmFtIGJhc2VNdXRhdGlvbnMgLSBNdXRhdGlvbnMgdGhhdCBhcmUgdXNlZCB0byBwb3B1bGF0ZSB0aGUgYmFzZVxuICAgICAqIHZhbHVlcyB3aGVuIHRoaXMgbXV0YXRpb24gaXMgYXBwbGllZCBsb2NhbGx5LiBUaGlzIGNhbiBiZSB1c2VkIHRvIGxvY2FsbHlcbiAgICAgKiBvdmVyd3JpdGUgdmFsdWVzIHRoYXQgYXJlIHBlcnNpc3RlZCBpbiB0aGUgcmVtb3RlIGRvY3VtZW50IGNhY2hlLiBCYXNlXG4gICAgICogbXV0YXRpb25zIGFyZSBuZXZlciBzZW50IHRvIHRoZSBiYWNrZW5kLlxuICAgICAqIEBwYXJhbSBtdXRhdGlvbnMgLSBUaGUgdXNlci1wcm92aWRlZCBtdXRhdGlvbnMgaW4gdGhpcyBtdXRhdGlvbiBiYXRjaC5cbiAgICAgKiBVc2VyLXByb3ZpZGVkIG11dGF0aW9ucyBhcmUgYXBwbGllZCBib3RoIGxvY2FsbHkgYW5kIHJlbW90ZWx5IG9uIHRoZVxuICAgICAqIGJhY2tlbmQuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZSwgdCwgbiwgcikge1xuICAgICAgICB0aGlzLmJhdGNoSWQgPSBlLCB0aGlzLmxvY2FsV3JpdGVUaW1lID0gdCwgdGhpcy5iYXNlTXV0YXRpb25zID0gbiwgdGhpcy5tdXRhdGlvbnMgPSByO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHBsaWVzIGFsbCB0aGUgbXV0YXRpb25zIGluIHRoaXMgTXV0YXRpb25CYXRjaCB0byB0aGUgc3BlY2lmaWVkIGRvY3VtZW50XG4gICAgICogdG8gY29tcHV0ZSB0aGUgc3RhdGUgb2YgdGhlIHJlbW90ZSBkb2N1bWVudFxuICAgICAqXG4gICAgICogQHBhcmFtIGRvY3VtZW50IC0gVGhlIGRvY3VtZW50IHRvIGFwcGx5IG11dGF0aW9ucyB0by5cbiAgICAgKiBAcGFyYW0gYmF0Y2hSZXN1bHQgLSBUaGUgcmVzdWx0IG9mIGFwcGx5aW5nIHRoZSBNdXRhdGlvbkJhdGNoIHRvIHRoZVxuICAgICAqIGJhY2tlbmQuXG4gICAgICovICAgIGFwcGx5VG9SZW1vdGVEb2N1bWVudChlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSB0Lm11dGF0aW9uUmVzdWx0cztcbiAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCB0aGlzLm11dGF0aW9ucy5sZW5ndGg7IHQrKykge1xuICAgICAgICAgICAgY29uc3QgciA9IHRoaXMubXV0YXRpb25zW3RdO1xuICAgICAgICAgICAgaWYgKHIua2V5LmlzRXF1YWwoZS5rZXkpKSB7XG4gICAgICAgICAgICAgICAgX19QUklWQVRFX211dGF0aW9uQXBwbHlUb1JlbW90ZURvY3VtZW50KHIsIGUsIG5bdF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbXB1dGVzIHRoZSBsb2NhbCB2aWV3IG9mIGEgZG9jdW1lbnQgZ2l2ZW4gYWxsIHRoZSBtdXRhdGlvbnMgaW4gdGhpc1xuICAgICAqIGJhdGNoLlxuICAgICAqXG4gICAgICogQHBhcmFtIGRvY3VtZW50IC0gVGhlIGRvY3VtZW50IHRvIGFwcGx5IG11dGF0aW9ucyB0by5cbiAgICAgKiBAcGFyYW0gbXV0YXRlZEZpZWxkcyAtIEZpZWxkcyB0aGF0IGhhdmUgYmVlbiB1cGRhdGVkIGJlZm9yZSBhcHBseWluZyB0aGlzIG11dGF0aW9uIGJhdGNoLlxuICAgICAqIEByZXR1cm5zIEEgYEZpZWxkTWFza2AgcmVwcmVzZW50aW5nIGFsbCB0aGUgZmllbGRzIHRoYXQgYXJlIG11dGF0ZWQuXG4gICAgICovICAgIGFwcGx5VG9Mb2NhbFZpZXcoZSwgdCkge1xuICAgICAgICAvLyBGaXJzdCwgYXBwbHkgdGhlIGJhc2Ugc3RhdGUuIFRoaXMgYWxsb3dzIHVzIHRvIGFwcGx5IG5vbi1pZGVtcG90ZW50XG4gICAgICAgIC8vIHRyYW5zZm9ybSBhZ2FpbnN0IGEgY29uc2lzdGVudCBzZXQgb2YgdmFsdWVzLlxuICAgICAgICBmb3IgKGNvbnN0IG4gb2YgdGhpcy5iYXNlTXV0YXRpb25zKSBuLmtleS5pc0VxdWFsKGUua2V5KSAmJiAodCA9IF9fUFJJVkFURV9tdXRhdGlvbkFwcGx5VG9Mb2NhbFZpZXcobiwgZSwgdCwgdGhpcy5sb2NhbFdyaXRlVGltZSkpO1xuICAgICAgICAvLyBTZWNvbmQsIGFwcGx5IGFsbCB1c2VyLXByb3ZpZGVkIG11dGF0aW9ucy5cbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG4gb2YgdGhpcy5tdXRhdGlvbnMpIG4ua2V5LmlzRXF1YWwoZS5rZXkpICYmICh0ID0gX19QUklWQVRFX211dGF0aW9uQXBwbHlUb0xvY2FsVmlldyhuLCBlLCB0LCB0aGlzLmxvY2FsV3JpdGVUaW1lKSk7XG4gICAgICAgIHJldHVybiB0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb21wdXRlcyB0aGUgbG9jYWwgdmlldyBmb3IgYWxsIHByb3ZpZGVkIGRvY3VtZW50cyBnaXZlbiB0aGUgbXV0YXRpb25zIGluXG4gICAgICogdGhpcyBiYXRjaC4gUmV0dXJucyBhIGBEb2N1bWVudEtleWAgdG8gYE11dGF0aW9uYCBtYXAgd2hpY2ggY2FuIGJlIHVzZWQgdG9cbiAgICAgKiByZXBsYWNlIGFsbCB0aGUgbXV0YXRpb24gYXBwbGljYXRpb25zLlxuICAgICAqLyAgICBhcHBseVRvTG9jYWxEb2N1bWVudFNldChlLCB0KSB7XG4gICAgICAgIC8vIFRPRE8obXJzY2htaWR0KTogVGhpcyBpbXBsZW1lbnRhdGlvbiBpcyBPKG5eMikuIElmIHdlIGFwcGx5IHRoZSBtdXRhdGlvbnNcbiAgICAgICAgLy8gZGlyZWN0bHkgKGFzIGRvbmUgaW4gYGFwcGx5VG9Mb2NhbFZpZXcoKWApLCB3ZSBjYW4gcmVkdWNlIHRoZSBjb21wbGV4aXR5XG4gICAgICAgIC8vIHRvIE8obikuXG4gICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfbmV3TXV0YXRpb25NYXAoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubXV0YXRpb25zLmZvckVhY2goKHIgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IGUuZ2V0KHIua2V5KSwgcyA9IGkub3ZlcmxheWVkRG9jdW1lbnQ7XG4gICAgICAgICAgICAvLyBUT0RPKG11dGFibGVkb2N1bWVudHMpOiBUaGlzIG1ldGhvZCBzaG91bGQgdGFrZSBhIE11dGFibGVEb2N1bWVudE1hcFxuICAgICAgICAgICAgLy8gYW5kIHdlIHNob3VsZCByZW1vdmUgdGhpcyBjYXN0LlxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG8gPSB0aGlzLmFwcGx5VG9Mb2NhbFZpZXcocywgaS5tdXRhdGVkRmllbGRzKTtcbiAgICAgICAgICAgIC8vIFNldCBtdXRhdGVkRmllbGRzIHRvIG51bGwgaWYgdGhlIGRvY3VtZW50IGlzIG9ubHkgZnJvbSBsb2NhbCBtdXRhdGlvbnMuXG4gICAgICAgICAgICAvLyBUaGlzIGNyZWF0ZXMgYSBTZXQgb3IgRGVsZXRlIG11dGF0aW9uLCBpbnN0ZWFkIG9mIHRyeWluZyB0byBjcmVhdGUgYVxuICAgICAgICAgICAgLy8gcGF0Y2ggbXV0YXRpb24gYXMgdGhlIG92ZXJsYXkuXG4gICAgICAgICAgICAgICAgICAgICAgICBvID0gdC5oYXMoci5rZXkpID8gbnVsbCA6IG87XG4gICAgICAgICAgICBjb25zdCBfID0gX19QUklWQVRFX2NhbGN1bGF0ZU92ZXJsYXlNdXRhdGlvbihzLCBvKTtcbiAgICAgICAgICAgIG51bGwgIT09IF8gJiYgbi5zZXQoci5rZXksIF8pLCBzLmlzVmFsaWREb2N1bWVudCgpIHx8IHMuY29udmVydFRvTm9Eb2N1bWVudChTbmFwc2hvdFZlcnNpb24ubWluKCkpO1xuICAgICAgICB9KSksIG47XG4gICAgfVxuICAgIGtleXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm11dGF0aW9ucy5yZWR1Y2UoKChlLCB0KSA9PiBlLmFkZCh0LmtleSkpLCBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKSk7XG4gICAgfVxuICAgIGlzRXF1YWwoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5iYXRjaElkID09PSBlLmJhdGNoSWQgJiYgX19QUklWQVRFX2FycmF5RXF1YWxzKHRoaXMubXV0YXRpb25zLCBlLm11dGF0aW9ucywgKChlLCB0KSA9PiBfX1BSSVZBVEVfbXV0YXRpb25FcXVhbHMoZSwgdCkpKSAmJiBfX1BSSVZBVEVfYXJyYXlFcXVhbHModGhpcy5iYXNlTXV0YXRpb25zLCBlLmJhc2VNdXRhdGlvbnMsICgoZSwgdCkgPT4gX19QUklWQVRFX211dGF0aW9uRXF1YWxzKGUsIHQpKSk7XG4gICAgfVxufVxuXG4vKiogVGhlIHJlc3VsdCBvZiBhcHBseWluZyBhIG11dGF0aW9uIGJhdGNoIHRvIHRoZSBiYWNrZW5kLiAqLyBjbGFzcyBNdXRhdGlvbkJhdGNoUmVzdWx0IHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuLCBcbiAgICAvKipcbiAgICAgKiBBIHByZS1jb21wdXRlZCBtYXBwaW5nIGZyb20gZWFjaCBtdXRhdGVkIGRvY3VtZW50IHRvIHRoZSByZXN1bHRpbmdcbiAgICAgKiB2ZXJzaW9uLlxuICAgICAqL1xuICAgIHIpIHtcbiAgICAgICAgdGhpcy5iYXRjaCA9IGUsIHRoaXMuY29tbWl0VmVyc2lvbiA9IHQsIHRoaXMubXV0YXRpb25SZXN1bHRzID0gbiwgdGhpcy5kb2NWZXJzaW9ucyA9IHI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgTXV0YXRpb25CYXRjaFJlc3VsdCBmb3IgdGhlIGdpdmVuIGJhdGNoIGFuZCByZXN1bHRzLiBUaGVyZVxuICAgICAqIG11c3QgYmUgb25lIHJlc3VsdCBmb3IgZWFjaCBtdXRhdGlvbiBpbiB0aGUgYmF0Y2guIFRoaXMgc3RhdGljIGZhY3RvcnlcbiAgICAgKiBjYWNoZXMgYSBkb2N1bWVudD0mZ3Q7dmVyc2lvbiBtYXBwaW5nIChkb2NWZXJzaW9ucykuXG4gICAgICovICAgIHN0YXRpYyBmcm9tKGUsIHQsIG4pIHtcbiAgICAgICAgX19QUklWQVRFX2hhcmRBc3NlcnQoZS5tdXRhdGlvbnMubGVuZ3RoID09PSBuLmxlbmd0aCk7XG4gICAgICAgIGxldCByID0gZnVuY3Rpb24gX19QUklWQVRFX2RvY3VtZW50VmVyc2lvbk1hcCgpIHtcbiAgICAgICAgICAgIHJldHVybiBzZTtcbiAgICAgICAgfSgpO1xuICAgICAgICBjb25zdCBpID0gZS5tdXRhdGlvbnM7XG4gICAgICAgIGZvciAobGV0IGUgPSAwOyBlIDwgaS5sZW5ndGg7IGUrKykgciA9IHIuaW5zZXJ0KGlbZV0ua2V5LCBuW2VdLnZlcnNpb24pO1xuICAgICAgICByZXR1cm4gbmV3IE11dGF0aW9uQmF0Y2hSZXN1bHQoZSwgdCwgbiwgcik7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBSZXByZXNlbnRhdGlvbiBvZiBhbiBvdmVybGF5IGNvbXB1dGVkIGJ5IEZpcmVzdG9yZS5cbiAqXG4gKiBIb2xkcyBpbmZvcm1hdGlvbiBhYm91dCBhIG11dGF0aW9uIGFuZCB0aGUgbGFyZ2VzdCBiYXRjaCBpZCBpbiBGaXJlc3RvcmUgd2hlblxuICogdGhlIG11dGF0aW9uIHdhcyBjcmVhdGVkLlxuICovIGNsYXNzIE92ZXJsYXkge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgdGhpcy5sYXJnZXN0QmF0Y2hJZCA9IGUsIHRoaXMubXV0YXRpb24gPSB0O1xuICAgIH1cbiAgICBnZXRLZXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm11dGF0aW9uLmtleTtcbiAgICB9XG4gICAgaXNFcXVhbChlKSB7XG4gICAgICAgIHJldHVybiBudWxsICE9PSBlICYmIHRoaXMubXV0YXRpb24gPT09IGUubXV0YXRpb247XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gYE92ZXJsYXl7XFxuICAgICAgbGFyZ2VzdEJhdGNoSWQ6ICR7dGhpcy5sYXJnZXN0QmF0Y2hJZH0sXFxuICAgICAgbXV0YXRpb246ICR7dGhpcy5tdXRhdGlvbi50b1N0cmluZygpfVxcbiAgICB9YDtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIENvbmNyZXRlIGltcGxlbWVudGF0aW9uIG9mIHRoZSBBZ2dyZWdhdGUgdHlwZS5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfQWdncmVnYXRlSW1wbCB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbikge1xuICAgICAgICB0aGlzLmFsaWFzID0gZSwgdGhpcy5hZ2dyZWdhdGVUeXBlID0gdCwgdGhpcy5maWVsZFBhdGggPSBuO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgRXhpc3RlbmNlRmlsdGVyIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMuY291bnQgPSBlLCB0aGlzLnVuY2hhbmdlZE5hbWVzID0gdDtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEVycm9yIENvZGVzIGRlc2NyaWJpbmcgdGhlIGRpZmZlcmVudCB3YXlzIEdSUEMgY2FuIGZhaWwuIFRoZXNlIGFyZSBjb3BpZWRcbiAqIGRpcmVjdGx5IGZyb20gR1JQQydzIHNvdXJjZXMgaGVyZTpcbiAqXG4gKiBodHRwczovL2dpdGh1Yi5jb20vZ3JwYy9ncnBjL2Jsb2IvYmNlZWM5NGVhNGZjNWYwMDg1ZDgxMjM1ZDhlMWMwNjc5OGRjMzQxYS9pbmNsdWRlL2dycGMlMkIlMkIvaW1wbC9jb2RlZ2VuL3N0YXR1c19jb2RlX2VudW0uaFxuICpcbiAqIEltcG9ydGFudCEgVGhlIG5hbWVzIG9mIHRoZXNlIGlkZW50aWZpZXJzIG1hdHRlciBiZWNhdXNlIHRoZSBzdHJpbmcgZm9ybXNcbiAqIGFyZSB1c2VkIGZvciByZXZlcnNlIGxvb2t1cHMgZnJvbSB0aGUgd2ViY2hhbm5lbCBzdHJlYW0uIERvIE5PVCBjaGFuZ2UgdGhlXG4gKiBuYW1lcyBvZiB0aGVzZSBpZGVudGlmaWVycyBvciBjaGFuZ2UgdGhpcyBpbnRvIGEgY29uc3QgZW51bS5cbiAqLyB2YXIgYWUsIHVlO1xuXG4vKipcbiAqIERldGVybWluZXMgd2hldGhlciBhbiBlcnJvciBjb2RlIHJlcHJlc2VudHMgYSBwZXJtYW5lbnQgZXJyb3Igd2hlbiByZWNlaXZlZFxuICogaW4gcmVzcG9uc2UgdG8gYSBub24td3JpdGUgb3BlcmF0aW9uLlxuICpcbiAqIFNlZSBpc1Blcm1hbmVudFdyaXRlRXJyb3IgZm9yIGNsYXNzaWZ5aW5nIHdyaXRlIGVycm9ycy5cbiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX2lzUGVybWFuZW50RXJyb3IoZSkge1xuICAgIHN3aXRjaCAoZSkge1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGZhaWwoKTtcblxuICAgICAgY2FzZSBELkNBTkNFTExFRDpcbiAgICAgIGNhc2UgRC5VTktOT1dOOlxuICAgICAgY2FzZSBELkRFQURMSU5FX0VYQ0VFREVEOlxuICAgICAgY2FzZSBELlJFU09VUkNFX0VYSEFVU1RFRDpcbiAgICAgIGNhc2UgRC5JTlRFUk5BTDpcbiAgICAgIGNhc2UgRC5VTkFWQUlMQUJMRTpcbiAvLyBVbmF1dGhlbnRpY2F0ZWQgbWVhbnMgc29tZXRoaW5nIHdlbnQgd3Jvbmcgd2l0aCBvdXIgdG9rZW4gYW5kIHdlIG5lZWRcbiAgICAgICAgLy8gdG8gcmV0cnkgd2l0aCBuZXcgY3JlZGVudGlhbHMgd2hpY2ggd2lsbCBoYXBwZW4gYXV0b21hdGljYWxseS5cbiAgICAgICAgICAgICAgY2FzZSBELlVOQVVUSEVOVElDQVRFRDpcbiAgICAgICAgcmV0dXJuICExO1xuXG4gICAgICBjYXNlIEQuSU5WQUxJRF9BUkdVTUVOVDpcbiAgICAgIGNhc2UgRC5OT1RfRk9VTkQ6XG4gICAgICBjYXNlIEQuQUxSRUFEWV9FWElTVFM6XG4gICAgICBjYXNlIEQuUEVSTUlTU0lPTl9ERU5JRUQ6XG4gICAgICBjYXNlIEQuRkFJTEVEX1BSRUNPTkRJVElPTjpcbiAvLyBBYm9ydGVkIG1pZ2h0IGJlIHJldHJpZWQgaW4gc29tZSBzY2VuYXJpb3MsIGJ1dCB0aGF0IGlzIGRlcGVuZGFudCBvblxuICAgICAgICAvLyB0aGUgY29udGV4dCBhbmQgc2hvdWxkIGhhbmRsZWQgaW5kaXZpZHVhbGx5IGJ5IHRoZSBjYWxsaW5nIGNvZGUuXG4gICAgICAgIC8vIFNlZSBodHRwczovL2Nsb3VkLmdvb2dsZS5jb20vYXBpcy9kZXNpZ24vZXJyb3JzLlxuICAgICAgICAgICAgICBjYXNlIEQuQUJPUlRFRDpcbiAgICAgIGNhc2UgRC5PVVRfT0ZfUkFOR0U6XG4gICAgICBjYXNlIEQuVU5JTVBMRU1FTlRFRDpcbiAgICAgIGNhc2UgRC5EQVRBX0xPU1M6XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lcyB3aGV0aGVyIGFuIGVycm9yIGNvZGUgcmVwcmVzZW50cyBhIHBlcm1hbmVudCBlcnJvciB3aGVuIHJlY2VpdmVkXG4gKiBpbiByZXNwb25zZSB0byBhIHdyaXRlIG9wZXJhdGlvbi5cbiAqXG4gKiBXcml0ZSBvcGVyYXRpb25zIG11c3QgYmUgaGFuZGxlZCBzcGVjaWFsbHkgYmVjYXVzZSBhcyBvZiBiLzExOTQzNzc2NCwgQUJPUlRFRFxuICogZXJyb3JzIG9uIHRoZSB3cml0ZSBzdHJlYW0gc2hvdWxkIGJlIHJldHJpZWQgdG9vIChldmVuIHRob3VnaCBBQk9SVEVEIGVycm9yc1xuICogYXJlIG5vdCBnZW5lcmFsbHkgcmV0cnlhYmxlKS5cbiAqXG4gKiBOb3RlIHRoYXQgZHVyaW5nIHRoZSBpbml0aWFsIGhhbmRzaGFrZSBvbiB0aGUgd3JpdGUgc3RyZWFtIGFuIEFCT1JURUQgZXJyb3JcbiAqIHNpZ25hbHMgdGhhdCB3ZSBzaG91bGQgZGlzY2FyZCBvdXIgc3RyZWFtIHRva2VuIChpLmUuIGl0IGlzIHBlcm1hbmVudCkuIFRoaXNcbiAqIG1lYW5zIGEgaGFuZHNoYWtlIGVycm9yIHNob3VsZCBiZSBjbGFzc2lmaWVkIHdpdGggaXNQZXJtYW5lbnRFcnJvciwgYWJvdmUuXG4gKi9cbi8qKlxuICogTWFwcyBhbiBlcnJvciBDb2RlIGZyb20gR1JQQyBzdGF0dXMgY29kZSBudW1iZXIsIGxpa2UgMCwgMSwgb3IgMTQuIFRoZXNlXG4gKiBhcmUgbm90IHRoZSBzYW1lIGFzIEhUVFAgc3RhdHVzIGNvZGVzLlxuICpcbiAqIEByZXR1cm5zIFRoZSBDb2RlIGVxdWl2YWxlbnQgdG8gdGhlIGdpdmVuIEdSUEMgc3RhdHVzIGNvZGUuIEZhaWxzIGlmIHRoZXJlXG4gKiAgICAgaXMgbm8gbWF0Y2guXG4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV9tYXBDb2RlRnJvbVJwY0NvZGUoZSkge1xuICAgIGlmICh2b2lkIDAgPT09IGUpIFxuICAgIC8vIFRoaXMgc2hvdWxkbid0IG5vcm1hbGx5IGhhcHBlbiwgYnV0IGluIGNlcnRhaW4gZXJyb3IgY2FzZXMgKGxpa2UgdHJ5aW5nXG4gICAgLy8gdG8gc2VuZCBpbnZhbGlkIHByb3RvIG1lc3NhZ2VzKSB3ZSBtYXkgZ2V0IGFuIGVycm9yIHdpdGggbm8gR1JQQyBjb2RlLlxuICAgIHJldHVybiBfX1BSSVZBVEVfbG9nRXJyb3IoXCJHUlBDIGVycm9yIGhhcyBubyAuY29kZVwiKSwgRC5VTktOT1dOO1xuICAgIHN3aXRjaCAoZSkge1xuICAgICAgY2FzZSBhZS5PSzpcbiAgICAgICAgcmV0dXJuIEQuT0s7XG5cbiAgICAgIGNhc2UgYWUuQ0FOQ0VMTEVEOlxuICAgICAgICByZXR1cm4gRC5DQU5DRUxMRUQ7XG5cbiAgICAgIGNhc2UgYWUuVU5LTk9XTjpcbiAgICAgICAgcmV0dXJuIEQuVU5LTk9XTjtcblxuICAgICAgY2FzZSBhZS5ERUFETElORV9FWENFRURFRDpcbiAgICAgICAgcmV0dXJuIEQuREVBRExJTkVfRVhDRUVERUQ7XG5cbiAgICAgIGNhc2UgYWUuUkVTT1VSQ0VfRVhIQVVTVEVEOlxuICAgICAgICByZXR1cm4gRC5SRVNPVVJDRV9FWEhBVVNURUQ7XG5cbiAgICAgIGNhc2UgYWUuSU5URVJOQUw6XG4gICAgICAgIHJldHVybiBELklOVEVSTkFMO1xuXG4gICAgICBjYXNlIGFlLlVOQVZBSUxBQkxFOlxuICAgICAgICByZXR1cm4gRC5VTkFWQUlMQUJMRTtcblxuICAgICAgY2FzZSBhZS5VTkFVVEhFTlRJQ0FURUQ6XG4gICAgICAgIHJldHVybiBELlVOQVVUSEVOVElDQVRFRDtcblxuICAgICAgY2FzZSBhZS5JTlZBTElEX0FSR1VNRU5UOlxuICAgICAgICByZXR1cm4gRC5JTlZBTElEX0FSR1VNRU5UO1xuXG4gICAgICBjYXNlIGFlLk5PVF9GT1VORDpcbiAgICAgICAgcmV0dXJuIEQuTk9UX0ZPVU5EO1xuXG4gICAgICBjYXNlIGFlLkFMUkVBRFlfRVhJU1RTOlxuICAgICAgICByZXR1cm4gRC5BTFJFQURZX0VYSVNUUztcblxuICAgICAgY2FzZSBhZS5QRVJNSVNTSU9OX0RFTklFRDpcbiAgICAgICAgcmV0dXJuIEQuUEVSTUlTU0lPTl9ERU5JRUQ7XG5cbiAgICAgIGNhc2UgYWUuRkFJTEVEX1BSRUNPTkRJVElPTjpcbiAgICAgICAgcmV0dXJuIEQuRkFJTEVEX1BSRUNPTkRJVElPTjtcblxuICAgICAgY2FzZSBhZS5BQk9SVEVEOlxuICAgICAgICByZXR1cm4gRC5BQk9SVEVEO1xuXG4gICAgICBjYXNlIGFlLk9VVF9PRl9SQU5HRTpcbiAgICAgICAgcmV0dXJuIEQuT1VUX09GX1JBTkdFO1xuXG4gICAgICBjYXNlIGFlLlVOSU1QTEVNRU5URUQ6XG4gICAgICAgIHJldHVybiBELlVOSU1QTEVNRU5URUQ7XG5cbiAgICAgIGNhc2UgYWUuREFUQV9MT1NTOlxuICAgICAgICByZXR1cm4gRC5EQVRBX0xPU1M7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBmYWlsKCk7XG4gICAgfVxufVxuXG4vKipcbiAqIENvbnZlcnRzIGFuIEhUVFAgcmVzcG9uc2UncyBlcnJvciBzdGF0dXMgdG8gdGhlIGVxdWl2YWxlbnQgZXJyb3IgY29kZS5cbiAqXG4gKiBAcGFyYW0gc3RhdHVzIC0gQW4gSFRUUCBlcnJvciByZXNwb25zZSBzdGF0dXMgKFwiRkFJTEVEX1BSRUNPTkRJVElPTlwiLFxuICogXCJVTktOT1dOXCIsIGV0Yy4pXG4gKiBAcmV0dXJucyBUaGUgZXF1aXZhbGVudCBDb2RlLiBOb24tbWF0Y2hpbmcgcmVzcG9uc2VzIGFyZSBtYXBwZWQgdG9cbiAqICAgICBDb2RlLlVOS05PV04uXG4gKi8gKHVlID0gYWUgfHwgKGFlID0ge30pKVt1ZS5PSyA9IDBdID0gXCJPS1wiLCB1ZVt1ZS5DQU5DRUxMRUQgPSAxXSA9IFwiQ0FOQ0VMTEVEXCIsIFxudWVbdWUuVU5LTk9XTiA9IDJdID0gXCJVTktOT1dOXCIsIHVlW3VlLklOVkFMSURfQVJHVU1FTlQgPSAzXSA9IFwiSU5WQUxJRF9BUkdVTUVOVFwiLCBcbnVlW3VlLkRFQURMSU5FX0VYQ0VFREVEID0gNF0gPSBcIkRFQURMSU5FX0VYQ0VFREVEXCIsIHVlW3VlLk5PVF9GT1VORCA9IDVdID0gXCJOT1RfRk9VTkRcIiwgXG51ZVt1ZS5BTFJFQURZX0VYSVNUUyA9IDZdID0gXCJBTFJFQURZX0VYSVNUU1wiLCB1ZVt1ZS5QRVJNSVNTSU9OX0RFTklFRCA9IDddID0gXCJQRVJNSVNTSU9OX0RFTklFRFwiLCBcbnVlW3VlLlVOQVVUSEVOVElDQVRFRCA9IDE2XSA9IFwiVU5BVVRIRU5USUNBVEVEXCIsIHVlW3VlLlJFU09VUkNFX0VYSEFVU1RFRCA9IDhdID0gXCJSRVNPVVJDRV9FWEhBVVNURURcIiwgXG51ZVt1ZS5GQUlMRURfUFJFQ09ORElUSU9OID0gOV0gPSBcIkZBSUxFRF9QUkVDT05ESVRJT05cIiwgdWVbdWUuQUJPUlRFRCA9IDEwXSA9IFwiQUJPUlRFRFwiLCBcbnVlW3VlLk9VVF9PRl9SQU5HRSA9IDExXSA9IFwiT1VUX09GX1JBTkdFXCIsIHVlW3VlLlVOSU1QTEVNRU5URUQgPSAxMl0gPSBcIlVOSU1QTEVNRU5URURcIiwgXG51ZVt1ZS5JTlRFUk5BTCA9IDEzXSA9IFwiSU5URVJOQUxcIiwgdWVbdWUuVU5BVkFJTEFCTEUgPSAxNF0gPSBcIlVOQVZBSUxBQkxFXCIsIHVlW3VlLkRBVEFfTE9TUyA9IDE1XSA9IFwiREFUQV9MT1NTXCI7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFRoZSBnbG9iYWwsIHNpbmdsZXRvbiBpbnN0YW5jZSBvZiBUZXN0aW5nSG9va3NTcGkuXG4gKlxuICogVGhpcyB2YXJpYWJsZSB3aWxsIGJlIGBudWxsYCBpbiBhbGwgY2FzZXMgX2V4Y2VwdF8gd2hlbiBydW5uaW5nIGZyb21cbiAqIGludGVncmF0aW9uIHRlc3RzIHRoYXQgaGF2ZSByZWdpc3RlcmVkIGNhbGxiYWNrcyB0byBiZSBub3RpZmllZCBvZiBldmVudHNcbiAqIHRoYXQgaGFwcGVuIGR1cmluZyB0aGUgdGVzdCBleGVjdXRpb24uXG4gKi9cbmxldCBjZSA9IG51bGw7XG5cbi8qKlxuICogU2V0cyB0aGUgdmFsdWUgb2YgdGhlIGB0ZXN0aW5nSG9va3NTcGlgIG9iamVjdC5cbiAqIEBwYXJhbSBpbnN0YW5jZSB0aGUgaW5zdGFuY2UgdG8gc2V0LlxuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBpbnN0YW5jZSBvZiB0aGUgUGxhdGZvcm0ncyAnVGV4dEVuY29kZXInIGltcGxlbWVudGF0aW9uLlxuICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfbmV3VGV4dEVuY29kZXIoKSB7XG4gICAgcmV0dXJuIG5ldyBUZXh0RW5jb2Rlcjtcbn1cblxuLyoqXG4gKiBBbiBpbnN0YW5jZSBvZiB0aGUgUGxhdGZvcm0ncyAnVGV4dERlY29kZXInIGltcGxlbWVudGF0aW9uLlxuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY29uc3QgbGUgPSBuZXcgSW50ZWdlcihbIDQyOTQ5NjcyOTUsIDQyOTQ5NjcyOTUgXSwgMCk7XG5cbi8vIEhhc2ggYSBzdHJpbmcgdXNpbmcgbWQ1IGhhc2hpbmcgYWxnb3JpdGhtLlxuZnVuY3Rpb24gX19QUklWQVRFX2dldE1kNUhhc2hWYWx1ZShlKSB7XG4gICAgY29uc3QgdCA9IF9fUFJJVkFURV9uZXdUZXh0RW5jb2RlcigpLmVuY29kZShlKSwgbiA9IG5ldyBNZDU7XG4gICAgcmV0dXJuIG4udXBkYXRlKHQpLCBuZXcgVWludDhBcnJheShuLmRpZ2VzdCgpKTtcbn1cblxuLy8gSW50ZXJwcmV0IHRoZSAxNiBieXRlcyBhcnJheSBhcyB0d28gNjQtYml0IHVuc2lnbmVkIGludGVnZXJzLCBlbmNvZGVkIHVzaW5nXG4vLyAy4oCZcyBjb21wbGVtZW50IHVzaW5nIGxpdHRsZSBlbmRpYW4uXG5mdW5jdGlvbiBfX1BSSVZBVEVfZ2V0NjRCaXRVaW50cyhlKSB7XG4gICAgY29uc3QgdCA9IG5ldyBEYXRhVmlldyhlLmJ1ZmZlciksIG4gPSB0LmdldFVpbnQzMigwLCAvKiBsaXR0bGVFbmRpYW49ICovICEwKSwgciA9IHQuZ2V0VWludDMyKDQsIC8qIGxpdHRsZUVuZGlhbj0gKi8gITApLCBpID0gdC5nZXRVaW50MzIoOCwgLyogbGl0dGxlRW5kaWFuPSAqLyAhMCksIHMgPSB0LmdldFVpbnQzMigxMiwgLyogbGl0dGxlRW5kaWFuPSAqLyAhMCk7XG4gICAgcmV0dXJuIFsgbmV3IEludGVnZXIoWyBuLCByIF0sIDApLCBuZXcgSW50ZWdlcihbIGksIHMgXSwgMCkgXTtcbn1cblxuY2xhc3MgQmxvb21GaWx0ZXIge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4pIHtcbiAgICAgICAgaWYgKHRoaXMuYml0bWFwID0gZSwgdGhpcy5wYWRkaW5nID0gdCwgdGhpcy5oYXNoQ291bnQgPSBuLCB0IDwgMCB8fCB0ID49IDgpIHRocm93IG5ldyBfX1BSSVZBVEVfQmxvb21GaWx0ZXJFcnJvcihgSW52YWxpZCBwYWRkaW5nOiAke3R9YCk7XG4gICAgICAgIGlmIChuIDwgMCkgdGhyb3cgbmV3IF9fUFJJVkFURV9CbG9vbUZpbHRlckVycm9yKGBJbnZhbGlkIGhhc2ggY291bnQ6ICR7bn1gKTtcbiAgICAgICAgaWYgKGUubGVuZ3RoID4gMCAmJiAwID09PSB0aGlzLmhhc2hDb3VudCkgXG4gICAgICAgIC8vIE9ubHkgZW1wdHkgYmxvb20gZmlsdGVyIGNhbiBoYXZlIDAgaGFzaCBjb3VudC5cbiAgICAgICAgdGhyb3cgbmV3IF9fUFJJVkFURV9CbG9vbUZpbHRlckVycm9yKGBJbnZhbGlkIGhhc2ggY291bnQ6ICR7bn1gKTtcbiAgICAgICAgaWYgKDAgPT09IGUubGVuZ3RoICYmIDAgIT09IHQpIFxuICAgICAgICAvLyBFbXB0eSBibG9vbSBmaWx0ZXIgc2hvdWxkIGhhdmUgMCBwYWRkaW5nLlxuICAgICAgICB0aHJvdyBuZXcgX19QUklWQVRFX0Jsb29tRmlsdGVyRXJyb3IoYEludmFsaWQgcGFkZGluZyB3aGVuIGJpdG1hcCBsZW5ndGggaXMgMDogJHt0fWApO1xuICAgICAgICB0aGlzLlRlID0gOCAqIGUubGVuZ3RoIC0gdCwgXG4gICAgICAgIC8vIFNldCB0aGUgYml0IGNvdW50IGluIEludGVnZXIgdG8gYXZvaWQgcmVwZXRpdGlvbiBpbiBtaWdodENvbnRhaW4oKS5cbiAgICAgICAgdGhpcy5FZSA9IEludGVnZXIuZnJvbU51bWJlcih0aGlzLlRlKTtcbiAgICB9XG4gICAgLy8gQ2FsY3VsYXRlIHRoZSBpdGggaGFzaCB2YWx1ZSBiYXNlZCBvbiB0aGUgaGFzaGVkIDY0Yml0IGludGVnZXJzLFxuICAgIC8vIGFuZCBjYWxjdWxhdGUgaXRzIGNvcnJlc3BvbmRpbmcgYml0IGluZGV4IGluIHRoZSBiaXRtYXAgdG8gYmUgY2hlY2tlZC5cbiAgICBkZShlLCB0LCBuKSB7XG4gICAgICAgIC8vIENhbGN1bGF0ZSBoYXNoZWQgdmFsdWUgaChpKSA9IGgxICsgKGkgKiBoMikuXG4gICAgICAgIGxldCByID0gZS5hZGQodC5tdWx0aXBseShJbnRlZ2VyLmZyb21OdW1iZXIobikpKTtcbiAgICAgICAgLy8gV3JhcCBpZiBoYXNoIHZhbHVlIG92ZXJmbG93IDY0Yml0LlxuICAgICAgICAgICAgICAgIHJldHVybiAxID09PSByLmNvbXBhcmUobGUpICYmIChyID0gbmV3IEludGVnZXIoWyByLmdldEJpdHMoMCksIHIuZ2V0Qml0cygxKSBdLCAwKSksIFxuICAgICAgICByLm1vZHVsbyh0aGlzLkVlKS50b051bWJlcigpO1xuICAgIH1cbiAgICAvLyBSZXR1cm4gd2hldGhlciB0aGUgYml0IG9uIHRoZSBnaXZlbiBpbmRleCBpbiB0aGUgYml0bWFwIGlzIHNldCB0byAxLlxuICAgIEFlKGUpIHtcbiAgICAgICAgcmV0dXJuIDAgIT0gKHRoaXMuYml0bWFwW01hdGguZmxvb3IoZSAvIDgpXSAmIDEgPDwgZSAlIDgpO1xuICAgIH1cbiAgICBtaWdodENvbnRhaW4oZSkge1xuICAgICAgICAvLyBFbXB0eSBiaXRtYXAgc2hvdWxkIGFsd2F5cyByZXR1cm4gZmFsc2Ugb24gbWVtYmVyc2hpcCBjaGVjay5cbiAgICAgICAgaWYgKDAgPT09IHRoaXMuVGUpIHJldHVybiAhMTtcbiAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9nZXRNZDVIYXNoVmFsdWUoZSksIFtuLCByXSA9IF9fUFJJVkFURV9nZXQ2NEJpdFVpbnRzKHQpO1xuICAgICAgICBmb3IgKGxldCBlID0gMDsgZSA8IHRoaXMuaGFzaENvdW50OyBlKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLmRlKG4sIHIsIGUpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLkFlKHQpKSByZXR1cm4gITE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbiAgICAvKiogQ3JlYXRlIGJsb29tIGZpbHRlciBmb3IgdGVzdGluZyBwdXJwb3NlcyBvbmx5LiAqLyAgICBzdGF0aWMgY3JlYXRlKGUsIHQsIG4pIHtcbiAgICAgICAgY29uc3QgciA9IGUgJSA4ID09IDAgPyAwIDogOCAtIGUgJSA4LCBpID0gbmV3IFVpbnQ4QXJyYXkoTWF0aC5jZWlsKGUgLyA4KSksIHMgPSBuZXcgQmxvb21GaWx0ZXIoaSwgciwgdCk7XG4gICAgICAgIHJldHVybiBuLmZvckVhY2goKGUgPT4gcy5pbnNlcnQoZSkpKSwgcztcbiAgICB9XG4gICAgaW5zZXJ0KGUpIHtcbiAgICAgICAgaWYgKDAgPT09IHRoaXMuVGUpIHJldHVybjtcbiAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9nZXRNZDVIYXNoVmFsdWUoZSksIFtuLCByXSA9IF9fUFJJVkFURV9nZXQ2NEJpdFVpbnRzKHQpO1xuICAgICAgICBmb3IgKGxldCBlID0gMDsgZSA8IHRoaXMuaGFzaENvdW50OyBlKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLmRlKG4sIHIsIGUpO1xuICAgICAgICAgICAgdGhpcy5SZSh0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBSZShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBNYXRoLmZsb29yKGUgLyA4KSwgbiA9IGUgJSA4O1xuICAgICAgICB0aGlzLmJpdG1hcFt0XSB8PSAxIDw8IG47XG4gICAgfVxufVxuXG5jbGFzcyBfX1BSSVZBVEVfQmxvb21GaWx0ZXJFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKSwgdGhpcy5uYW1lID0gXCJCbG9vbUZpbHRlckVycm9yXCI7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBldmVudCBmcm9tIHRoZSBSZW1vdGVTdG9yZS4gSXQgaXMgc3BsaXQgaW50byB0YXJnZXRDaGFuZ2VzIChjaGFuZ2VzIHRvIHRoZVxuICogc3RhdGUgb3IgdGhlIHNldCBvZiBkb2N1bWVudHMgaW4gb3VyIHdhdGNoZWQgdGFyZ2V0cykgYW5kIGRvY3VtZW50VXBkYXRlc1xuICogKGNoYW5nZXMgdG8gdGhlIGFjdHVhbCBkb2N1bWVudHMpLlxuICovIGNsYXNzIFJlbW90ZUV2ZW50IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgc25hcHNob3QgdmVyc2lvbiB0aGlzIGV2ZW50IGJyaW5ncyB1cyB1cCB0bywgb3IgTUlOIGlmIG5vdCBzZXQuXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogQSBtYXAgZnJvbSB0YXJnZXQgdG8gY2hhbmdlcyB0byB0aGUgdGFyZ2V0LiBTZWUgVGFyZ2V0Q2hhbmdlLlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIEEgbWFwIG9mIHRhcmdldHMgdGhhdCBpcyBrbm93biB0byBiZSBpbmNvbnNpc3RlbnQsIGFuZCB0aGUgcHVycG9zZSBmb3JcbiAgICAgKiByZS1saXN0ZW5pbmcuIExpc3RlbnMgZm9yIHRoZXNlIHRhcmdldHMgc2hvdWxkIGJlIHJlLWVzdGFibGlzaGVkIHdpdGhvdXRcbiAgICAgKiByZXN1bWUgdG9rZW5zLlxuICAgICAqL1xuICAgIG4sIFxuICAgIC8qKlxuICAgICAqIEEgc2V0IG9mIHdoaWNoIGRvY3VtZW50cyBoYXZlIGNoYW5nZWQgb3IgYmVlbiBkZWxldGVkLCBhbG9uZyB3aXRoIHRoZVxuICAgICAqIGRvYydzIG5ldyB2YWx1ZXMgKGlmIG5vdCBkZWxldGVkKS5cbiAgICAgKi9cbiAgICByLCBcbiAgICAvKipcbiAgICAgKiBBIHNldCBvZiB3aGljaCBkb2N1bWVudCB1cGRhdGVzIGFyZSBkdWUgb25seSB0byBsaW1ibyByZXNvbHV0aW9uIHRhcmdldHMuXG4gICAgICovXG4gICAgaSkge1xuICAgICAgICB0aGlzLnNuYXBzaG90VmVyc2lvbiA9IGUsIHRoaXMudGFyZ2V0Q2hhbmdlcyA9IHQsIHRoaXMudGFyZ2V0TWlzbWF0Y2hlcyA9IG4sIHRoaXMuZG9jdW1lbnRVcGRhdGVzID0gciwgXG4gICAgICAgIHRoaXMucmVzb2x2ZWRMaW1ib0RvY3VtZW50cyA9IGk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhBQ0s6IFZpZXdzIHJlcXVpcmUgUmVtb3RlRXZlbnRzIGluIG9yZGVyIHRvIGRldGVybWluZSB3aGV0aGVyIHRoZSB2aWV3IGlzXG4gICAgICogQ1VSUkVOVCwgYnV0IHNlY29uZGFyeSB0YWJzIGRvbid0IHJlY2VpdmUgcmVtb3RlIGV2ZW50cy4gU28gdGhpcyBtZXRob2QgaXNcbiAgICAgKiB1c2VkIHRvIGNyZWF0ZSBhIHN5bnRoZXNpemVkIFJlbW90ZUV2ZW50IHRoYXQgY2FuIGJlIHVzZWQgdG8gYXBwbHkgYVxuICAgICAqIENVUlJFTlQgc3RhdHVzIGNoYW5nZSB0byBhIFZpZXcsIGZvciBxdWVyaWVzIGV4ZWN1dGVkIGluIGEgZGlmZmVyZW50IHRhYi5cbiAgICAgKi9cbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5XG4gICAgc3RhdGljIGNyZWF0ZVN5bnRoZXNpemVkUmVtb3RlRXZlbnRGb3JDdXJyZW50Q2hhbmdlKGUsIHQsIG4pIHtcbiAgICAgICAgY29uc3QgciA9IG5ldyBNYXA7XG4gICAgICAgIHJldHVybiByLnNldChlLCBUYXJnZXRDaGFuZ2UuY3JlYXRlU3ludGhlc2l6ZWRUYXJnZXRDaGFuZ2VGb3JDdXJyZW50Q2hhbmdlKGUsIHQsIG4pKSwgXG4gICAgICAgIG5ldyBSZW1vdGVFdmVudChTbmFwc2hvdFZlcnNpb24ubWluKCksIHIsIG5ldyBTb3J0ZWRNYXAoX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IpLCBfX1BSSVZBVEVfbXV0YWJsZURvY3VtZW50TWFwKCksIF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBUYXJnZXRDaGFuZ2Ugc3BlY2lmaWVzIHRoZSBzZXQgb2YgY2hhbmdlcyBmb3IgYSBzcGVjaWZpYyB0YXJnZXQgYXMgcGFydCBvZlxuICogYSBSZW1vdGVFdmVudC4gVGhlc2UgY2hhbmdlcyB0cmFjayB3aGljaCBkb2N1bWVudHMgYXJlIGFkZGVkLCBtb2RpZmllZCBvclxuICogcmVtb3ZlZCwgYXMgd2VsbCBhcyB0aGUgdGFyZ2V0J3MgcmVzdW1lIHRva2VuIGFuZCB3aGV0aGVyIHRoZSB0YXJnZXQgaXNcbiAqIG1hcmtlZCBDVVJSRU5ULlxuICogVGhlIGFjdHVhbCBjaGFuZ2VzICp0byogZG9jdW1lbnRzIGFyZSBub3QgcGFydCBvZiB0aGUgVGFyZ2V0Q2hhbmdlIHNpbmNlXG4gKiBkb2N1bWVudHMgbWF5IGJlIHBhcnQgb2YgbXVsdGlwbGUgdGFyZ2V0cy5cbiAqLyBjbGFzcyBUYXJnZXRDaGFuZ2Uge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIEFuIG9wYXF1ZSwgc2VydmVyLWFzc2lnbmVkIHRva2VuIHRoYXQgYWxsb3dzIHdhdGNoaW5nIGEgcXVlcnkgdG8gYmUgcmVzdW1lZFxuICAgICAqIGFmdGVyIGRpc2Nvbm5lY3Rpbmcgd2l0aG91dCByZXRyYW5zbWl0dGluZyBhbGwgdGhlIGRhdGEgdGhhdCBtYXRjaGVzIHRoZVxuICAgICAqIHF1ZXJ5LiBUaGUgcmVzdW1lIHRva2VuIGVzc2VudGlhbGx5IGlkZW50aWZpZXMgYSBwb2ludCBpbiB0aW1lIGZyb20gd2hpY2hcbiAgICAgKiB0aGUgc2VydmVyIHNob3VsZCByZXN1bWUgc2VuZGluZyByZXN1bHRzLlxuICAgICAqL1xuICAgIGUsIFxuICAgIC8qKlxuICAgICAqIFRoZSBcImN1cnJlbnRcIiAoc3luY2VkKSBzdGF0dXMgb2YgdGhpcyB0YXJnZXQuIE5vdGUgdGhhdCBcImN1cnJlbnRcIlxuICAgICAqIGhhcyBzcGVjaWFsIG1lYW5pbmcgaW4gdGhlIFJQQyBwcm90b2NvbCB0aGF0IGltcGxpZXMgdGhhdCBhIHRhcmdldCBpc1xuICAgICAqIGJvdGggdXAtdG8tZGF0ZSBhbmQgY29uc2lzdGVudCB3aXRoIHRoZSByZXN0IG9mIHRoZSB3YXRjaCBzdHJlYW0uXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogVGhlIHNldCBvZiBkb2N1bWVudHMgdGhhdCB3ZXJlIG5ld2x5IGFzc2lnbmVkIHRvIHRoaXMgdGFyZ2V0IGFzIHBhcnQgb2ZcbiAgICAgKiB0aGlzIHJlbW90ZSBldmVudC5cbiAgICAgKi9cbiAgICBuLCBcbiAgICAvKipcbiAgICAgKiBUaGUgc2V0IG9mIGRvY3VtZW50cyB0aGF0IHdlcmUgYWxyZWFkeSBhc3NpZ25lZCB0byB0aGlzIHRhcmdldCBidXQgcmVjZWl2ZWRcbiAgICAgKiBhbiB1cGRhdGUgZHVyaW5nIHRoaXMgcmVtb3RlIGV2ZW50LlxuICAgICAqL1xuICAgIHIsIFxuICAgIC8qKlxuICAgICAqIFRoZSBzZXQgb2YgZG9jdW1lbnRzIHRoYXQgd2VyZSByZW1vdmVkIGZyb20gdGhpcyB0YXJnZXQgYXMgcGFydCBvZiB0aGlzXG4gICAgICogcmVtb3RlIGV2ZW50LlxuICAgICAqL1xuICAgIGkpIHtcbiAgICAgICAgdGhpcy5yZXN1bWVUb2tlbiA9IGUsIHRoaXMuY3VycmVudCA9IHQsIHRoaXMuYWRkZWREb2N1bWVudHMgPSBuLCB0aGlzLm1vZGlmaWVkRG9jdW1lbnRzID0gciwgXG4gICAgICAgIHRoaXMucmVtb3ZlZERvY3VtZW50cyA9IGk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIHVzZWQgdG8gY3JlYXRlIGEgc3ludGhlc2l6ZWQgVGFyZ2V0Q2hhbmdlcyB0aGF0IGNhbiBiZSB1c2VkIHRvXG4gICAgICogYXBwbHkgYSBDVVJSRU5UIHN0YXR1cyBjaGFuZ2UgdG8gYSBWaWV3IChmb3IgcXVlcmllcyBleGVjdXRlZCBpbiBhIGRpZmZlcmVudFxuICAgICAqIHRhYikgb3IgZm9yIG5ldyBxdWVyaWVzICh0byByYWlzZSBzbmFwc2hvdHMgd2l0aCBjb3JyZWN0IENVUlJFTlQgc3RhdHVzKS5cbiAgICAgKi8gICAgc3RhdGljIGNyZWF0ZVN5bnRoZXNpemVkVGFyZ2V0Q2hhbmdlRm9yQ3VycmVudENoYW5nZShlLCB0LCBuKSB7XG4gICAgICAgIHJldHVybiBuZXcgVGFyZ2V0Q2hhbmdlKG4sIHQsIF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpLCBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKSwgX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmVwcmVzZW50cyBhIGNoYW5nZWQgZG9jdW1lbnQgYW5kIGEgbGlzdCBvZiB0YXJnZXQgaWRzIHRvIHdoaWNoIHRoaXMgY2hhbmdlXG4gKiBhcHBsaWVzLlxuICpcbiAqIElmIGRvY3VtZW50IGhhcyBiZWVuIGRlbGV0ZWQgTm9Eb2N1bWVudCB3aWxsIGJlIHByb3ZpZGVkLlxuICovIGNsYXNzIF9fUFJJVkFURV9Eb2N1bWVudFdhdGNoQ2hhbmdlIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKiogVGhlIG5ldyBkb2N1bWVudCBhcHBsaWVzIHRvIGFsbCBvZiB0aGVzZSB0YXJnZXRzLiAqL1xuICAgIGUsIFxuICAgIC8qKiBUaGUgbmV3IGRvY3VtZW50IGlzIHJlbW92ZWQgZnJvbSBhbGwgb2YgdGhlc2UgdGFyZ2V0cy4gKi9cbiAgICB0LCBcbiAgICAvKiogVGhlIGtleSBvZiB0aGUgZG9jdW1lbnQgZm9yIHRoaXMgY2hhbmdlLiAqL1xuICAgIG4sIFxuICAgIC8qKlxuICAgICAqIFRoZSBuZXcgZG9jdW1lbnQgb3IgTm9Eb2N1bWVudCBpZiBpdCB3YXMgZGVsZXRlZC4gSXMgbnVsbCBpZiB0aGVcbiAgICAgKiBkb2N1bWVudCB3ZW50IG91dCBvZiB2aWV3IHdpdGhvdXQgdGhlIHNlcnZlciBzZW5kaW5nIGEgbmV3IGRvY3VtZW50LlxuICAgICAqL1xuICAgIHIpIHtcbiAgICAgICAgdGhpcy5WZSA9IGUsIHRoaXMucmVtb3ZlZFRhcmdldElkcyA9IHQsIHRoaXMua2V5ID0gbiwgdGhpcy5tZSA9IHI7XG4gICAgfVxufVxuXG5jbGFzcyBfX1BSSVZBVEVfRXhpc3RlbmNlRmlsdGVyQ2hhbmdlIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMudGFyZ2V0SWQgPSBlLCB0aGlzLmZlID0gdDtcbiAgICB9XG59XG5cbmNsYXNzIF9fUFJJVkFURV9XYXRjaFRhcmdldENoYW5nZSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIFdoYXQga2luZCBvZiBjaGFuZ2Ugb2NjdXJyZWQgdG8gdGhlIHdhdGNoIHRhcmdldC4gKi9cbiAgICBlLCBcbiAgICAvKiogVGhlIHRhcmdldCBJRHMgdGhhdCB3ZXJlIGFkZGVkL3JlbW92ZWQvc2V0LiAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIEFuIG9wYXF1ZSwgc2VydmVyLWFzc2lnbmVkIHRva2VuIHRoYXQgYWxsb3dzIHdhdGNoaW5nIGEgdGFyZ2V0IHRvIGJlXG4gICAgICogcmVzdW1lZCBhZnRlciBkaXNjb25uZWN0aW5nIHdpdGhvdXQgcmV0cmFuc21pdHRpbmcgYWxsIHRoZSBkYXRhIHRoYXRcbiAgICAgKiBtYXRjaGVzIHRoZSB0YXJnZXQuIFRoZSByZXN1bWUgdG9rZW4gZXNzZW50aWFsbHkgaWRlbnRpZmllcyBhIHBvaW50IGluXG4gICAgICogdGltZSBmcm9tIHdoaWNoIHRoZSBzZXJ2ZXIgc2hvdWxkIHJlc3VtZSBzZW5kaW5nIHJlc3VsdHMuXG4gICAgICovXG4gICAgbiA9IEJ5dGVTdHJpbmcuRU1QVFlfQllURV9TVFJJTkdcbiAgICAvKiogQW4gUlBDIGVycm9yIGluZGljYXRpbmcgd2h5IHRoZSB3YXRjaCBmYWlsZWQuICovICwgciA9IG51bGwpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IGUsIHRoaXMudGFyZ2V0SWRzID0gdCwgdGhpcy5yZXN1bWVUb2tlbiA9IG4sIHRoaXMuY2F1c2UgPSByO1xuICAgIH1cbn1cblxuLyoqIFRyYWNrcyB0aGUgaW50ZXJuYWwgc3RhdGUgb2YgYSBXYXRjaCB0YXJnZXQuICovIGNsYXNzIF9fUFJJVkFURV9UYXJnZXRTdGF0ZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgbnVtYmVyIG9mIHBlbmRpbmcgcmVzcG9uc2VzIChhZGRzIG9yIHJlbW92ZXMpIHRoYXQgd2UgYXJlIHdhaXRpbmcgb24uXG4gICAgICAgICAqIFdlIG9ubHkgY29uc2lkZXIgdGFyZ2V0cyBhY3RpdmUgdGhhdCBoYXZlIG5vIHBlbmRpbmcgcmVzcG9uc2VzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5nZSA9IDAsIFxuICAgICAgICAvKipcbiAgICAgICAgICogS2VlcHMgdHJhY2sgb2YgdGhlIGRvY3VtZW50IGNoYW5nZXMgc2luY2UgdGhlIGxhc3QgcmFpc2VkIHNuYXBzaG90LlxuICAgICAgICAgKlxuICAgICAgICAgKiBUaGVzZSBjaGFuZ2VzIGFyZSBjb250aW51b3VzbHkgdXBkYXRlZCBhcyB3ZSByZWNlaXZlIGRvY3VtZW50IHVwZGF0ZXMgYW5kXG4gICAgICAgICAqIGFsd2F5cyByZWZsZWN0IHRoZSBjdXJyZW50IHNldCBvZiBjaGFuZ2VzIGFnYWluc3QgdGhlIGxhc3QgaXNzdWVkIHNuYXBzaG90LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5wZSA9IF9fUFJJVkFURV9zbmFwc2hvdENoYW5nZXNNYXAoKSwgXG4gICAgICAgIC8qKiBTZWUgcHVibGljIGdldHRlcnMgZm9yIGV4cGxhbmF0aW9ucyBvZiB0aGVzZSBmaWVsZHMuICovXG4gICAgICAgIHRoaXMueWUgPSBCeXRlU3RyaW5nLkVNUFRZX0JZVEVfU1RSSU5HLCB0aGlzLndlID0gITEsIFxuICAgICAgICAvKipcbiAgICAgICAgICogV2hldGhlciB0aGlzIHRhcmdldCBzdGF0ZSBzaG91bGQgYmUgaW5jbHVkZWQgaW4gdGhlIG5leHQgc25hcHNob3QuIFdlXG4gICAgICAgICAqIGluaXRpYWxpemUgdG8gdHJ1ZSBzbyB0aGF0IG5ld2x5LWFkZGVkIHRhcmdldHMgYXJlIGluY2x1ZGVkIGluIHRoZSBuZXh0XG4gICAgICAgICAqIFJlbW90ZUV2ZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5TZSA9ICEwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRoaXMgdGFyZ2V0IGhhcyBiZWVuIG1hcmtlZCAnY3VycmVudCcuXG4gICAgICpcbiAgICAgKiAnQ3VycmVudCcgaGFzIHNwZWNpYWwgbWVhbmluZyBpbiB0aGUgUlBDIHByb3RvY29sOiBJdCBpbXBsaWVzIHRoYXQgdGhlXG4gICAgICogV2F0Y2ggYmFja2VuZCBoYXMgc2VudCB1cyBhbGwgY2hhbmdlcyB1cCB0byB0aGUgcG9pbnQgYXQgd2hpY2ggdGhlIHRhcmdldFxuICAgICAqIHdhcyBhZGRlZCBhbmQgdGhhdCB0aGUgdGFyZ2V0IGlzIGNvbnNpc3RlbnQgd2l0aCB0aGUgcmVzdCBvZiB0aGUgd2F0Y2hcbiAgICAgKiBzdHJlYW0uXG4gICAgICovICAgIGdldCBjdXJyZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy53ZTtcbiAgICB9XG4gICAgLyoqIFRoZSBsYXN0IHJlc3VtZSB0b2tlbiBzZW50IHRvIHVzIGZvciB0aGlzIHRhcmdldC4gKi8gICAgZ2V0IHJlc3VtZVRva2VuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy55ZTtcbiAgICB9XG4gICAgLyoqIFdoZXRoZXIgdGhpcyB0YXJnZXQgaGFzIHBlbmRpbmcgdGFyZ2V0IGFkZHMgb3IgdGFyZ2V0IHJlbW92ZXMuICovICAgIGdldCBiZSgpIHtcbiAgICAgICAgcmV0dXJuIDAgIT09IHRoaXMuZ2U7XG4gICAgfVxuICAgIC8qKiBXaGV0aGVyIHdlIGhhdmUgbW9kaWZpZWQgYW55IHN0YXRlIHRoYXQgc2hvdWxkIHRyaWdnZXIgYSBzbmFwc2hvdC4gKi8gICAgZ2V0IERlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5TZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwbGllcyB0aGUgcmVzdW1lIHRva2VuIHRvIHRoZSBUYXJnZXRDaGFuZ2UsIGJ1dCBvbmx5IHdoZW4gaXQgaGFzIGEgbmV3XG4gICAgICogdmFsdWUuIEVtcHR5IHJlc3VtZVRva2VucyBhcmUgZGlzY2FyZGVkLlxuICAgICAqLyAgICBDZShlKSB7XG4gICAgICAgIGUuYXBwcm94aW1hdGVCeXRlU2l6ZSgpID4gMCAmJiAodGhpcy5TZSA9ICEwLCB0aGlzLnllID0gZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSB0YXJnZXQgY2hhbmdlIGZyb20gdGhlIGN1cnJlbnQgc2V0IG9mIGNoYW5nZXMuXG4gICAgICpcbiAgICAgKiBUbyByZXNldCB0aGUgZG9jdW1lbnQgY2hhbmdlcyBhZnRlciByYWlzaW5nIHRoaXMgc25hcHNob3QsIGNhbGxcbiAgICAgKiBgY2xlYXJQZW5kaW5nQ2hhbmdlcygpYC5cbiAgICAgKi8gICAgdmUoKSB7XG4gICAgICAgIGxldCBlID0gX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCksIHQgPSBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKSwgbiA9IF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpO1xuICAgICAgICByZXR1cm4gdGhpcy5wZS5mb3JFYWNoKCgociwgaSkgPT4ge1xuICAgICAgICAgICAgc3dpdGNoIChpKSB7XG4gICAgICAgICAgICAgIGNhc2UgMCAvKiBDaGFuZ2VUeXBlLkFkZGVkICovIDpcbiAgICAgICAgICAgICAgICBlID0gZS5hZGQocik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSAyIC8qIENoYW5nZVR5cGUuTW9kaWZpZWQgKi8gOlxuICAgICAgICAgICAgICAgIHQgPSB0LmFkZChyKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIDEgLyogQ2hhbmdlVHlwZS5SZW1vdmVkICovIDpcbiAgICAgICAgICAgICAgICBuID0gbi5hZGQocik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBmYWlsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKSwgbmV3IFRhcmdldENoYW5nZSh0aGlzLnllLCB0aGlzLndlLCBlLCB0LCBuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXRzIHRoZSBkb2N1bWVudCBjaGFuZ2VzIGFuZCBzZXRzIGBoYXNQZW5kaW5nQ2hhbmdlc2AgdG8gZmFsc2UuXG4gICAgICovICAgIEZlKCkge1xuICAgICAgICB0aGlzLlNlID0gITEsIHRoaXMucGUgPSBfX1BSSVZBVEVfc25hcHNob3RDaGFuZ2VzTWFwKCk7XG4gICAgfVxuICAgIE1lKGUsIHQpIHtcbiAgICAgICAgdGhpcy5TZSA9ICEwLCB0aGlzLnBlID0gdGhpcy5wZS5pbnNlcnQoZSwgdCk7XG4gICAgfVxuICAgIHhlKGUpIHtcbiAgICAgICAgdGhpcy5TZSA9ICEwLCB0aGlzLnBlID0gdGhpcy5wZS5yZW1vdmUoZSk7XG4gICAgfVxuICAgIE9lKCkge1xuICAgICAgICB0aGlzLmdlICs9IDE7XG4gICAgfVxuICAgIE5lKCkge1xuICAgICAgICB0aGlzLmdlIC09IDEsIF9fUFJJVkFURV9oYXJkQXNzZXJ0KHRoaXMuZ2UgPj0gMCk7XG4gICAgfVxuICAgIEJlKCkge1xuICAgICAgICB0aGlzLlNlID0gITAsIHRoaXMud2UgPSAhMDtcbiAgICB9XG59XG5cbi8qKlxuICogQSBoZWxwZXIgY2xhc3MgdG8gYWNjdW11bGF0ZSB3YXRjaCBjaGFuZ2VzIGludG8gYSBSZW1vdGVFdmVudC5cbiAqL1xuY2xhc3MgX19QUklWQVRFX1dhdGNoQ2hhbmdlQWdncmVnYXRvciB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLkxlID0gZSwgXG4gICAgICAgIC8qKiBUaGUgaW50ZXJuYWwgc3RhdGUgb2YgYWxsIHRyYWNrZWQgdGFyZ2V0cy4gKi9cbiAgICAgICAgdGhpcy5rZSA9IG5ldyBNYXAsIFxuICAgICAgICAvKiogS2VlcHMgdHJhY2sgb2YgdGhlIGRvY3VtZW50cyB0byB1cGRhdGUgc2luY2UgdGhlIGxhc3QgcmFpc2VkIHNuYXBzaG90LiAqL1xuICAgICAgICB0aGlzLnFlID0gX19QUklWQVRFX211dGFibGVEb2N1bWVudE1hcCgpLCBcbiAgICAgICAgLyoqIEEgbWFwcGluZyBvZiBkb2N1bWVudCBrZXlzIHRvIHRoZWlyIHNldCBvZiB0YXJnZXQgSURzLiAqL1xuICAgICAgICB0aGlzLlFlID0gX19QUklWQVRFX2RvY3VtZW50VGFyZ2V0TWFwKCksIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSBtYXAgb2YgdGFyZ2V0cyB3aXRoIGV4aXN0ZW5jZSBmaWx0ZXIgbWlzbWF0Y2hlcy4gVGhlc2UgdGFyZ2V0cyBhcmVcbiAgICAgICAgICoga25vd24gdG8gYmUgaW5jb25zaXN0ZW50IGFuZCB0aGVpciBsaXN0ZW5zIG5lZWRzIHRvIGJlIHJlLWVzdGFibGlzaGVkIGJ5XG4gICAgICAgICAqIFJlbW90ZVN0b3JlLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5LZSA9IG5ldyBTb3J0ZWRNYXAoX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQcm9jZXNzZXMgYW5kIGFkZHMgdGhlIERvY3VtZW50V2F0Y2hDaGFuZ2UgdG8gdGhlIGN1cnJlbnQgc2V0IG9mIGNoYW5nZXMuXG4gICAgICovICAgICRlKGUpIHtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIGUuVmUpIGUubWUgJiYgZS5tZS5pc0ZvdW5kRG9jdW1lbnQoKSA/IHRoaXMuVWUodCwgZS5tZSkgOiB0aGlzLldlKHQsIGUua2V5LCBlLm1lKTtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIGUucmVtb3ZlZFRhcmdldElkcykgdGhpcy5XZSh0LCBlLmtleSwgZS5tZSk7XG4gICAgfVxuICAgIC8qKiBQcm9jZXNzZXMgYW5kIGFkZHMgdGhlIFdhdGNoVGFyZ2V0Q2hhbmdlIHRvIHRoZSBjdXJyZW50IHNldCBvZiBjaGFuZ2VzLiAqLyAgICBHZShlKSB7XG4gICAgICAgIHRoaXMuZm9yRWFjaFRhcmdldChlLCAodCA9PiB7XG4gICAgICAgICAgICBjb25zdCBuID0gdGhpcy56ZSh0KTtcbiAgICAgICAgICAgIHN3aXRjaCAoZS5zdGF0ZSkge1xuICAgICAgICAgICAgICBjYXNlIDAgLyogV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZS5Ob0NoYW5nZSAqLyA6XG4gICAgICAgICAgICAgICAgdGhpcy5qZSh0KSAmJiBuLkNlKGUucmVzdW1lVG9rZW4pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgMSAvKiBXYXRjaFRhcmdldENoYW5nZVN0YXRlLkFkZGVkICovIDpcbiAgICAgICAgICAgICAgICAvLyBXZSBuZWVkIHRvIGRlY3JlbWVudCB0aGUgbnVtYmVyIG9mIHBlbmRpbmcgYWNrcyBuZWVkZWQgZnJvbSB3YXRjaFxuICAgICAgICAgICAgICAgIC8vIGZvciB0aGlzIHRhcmdldElkLlxuICAgICAgICAgICAgICAgIG4uTmUoKSwgbi5iZSB8fCBcbiAgICAgICAgICAgICAgICAvLyBXZSBoYXZlIGEgZnJlc2hseSBhZGRlZCB0YXJnZXQsIHNvIHdlIG5lZWQgdG8gcmVzZXQgYW55IHN0YXRlXG4gICAgICAgICAgICAgICAgLy8gdGhhdCB3ZSBoYWQgcHJldmlvdXNseS4gVGhpcyBjYW4gaGFwcGVuIGUuZy4gd2hlbiByZW1vdmUgYW5kIGFkZFxuICAgICAgICAgICAgICAgIC8vIGJhY2sgYSB0YXJnZXQgZm9yIGV4aXN0ZW5jZSBmaWx0ZXIgbWlzbWF0Y2hlcy5cbiAgICAgICAgICAgICAgICBuLkZlKCksIG4uQ2UoZS5yZXN1bWVUb2tlbik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSAyIC8qIFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUuUmVtb3ZlZCAqLyA6XG4gICAgICAgICAgICAgICAgLy8gV2UgbmVlZCB0byBrZWVwIHRyYWNrIG9mIHJlbW92ZWQgdGFyZ2V0cyB0byB3ZSBjYW4gcG9zdC1maWx0ZXIgYW5kXG4gICAgICAgICAgICAgICAgLy8gcmVtb3ZlIGFueSB0YXJnZXQgY2hhbmdlcy5cbiAgICAgICAgICAgICAgICAvLyBXZSBuZWVkIHRvIGRlY3JlbWVudCB0aGUgbnVtYmVyIG9mIHBlbmRpbmcgYWNrcyBuZWVkZWQgZnJvbSB3YXRjaFxuICAgICAgICAgICAgICAgIC8vIGZvciB0aGlzIHRhcmdldElkLlxuICAgICAgICAgICAgICAgIG4uTmUoKSwgbi5iZSB8fCB0aGlzLnJlbW92ZVRhcmdldCh0KTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIDMgLyogV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZS5DdXJyZW50ICovIDpcbiAgICAgICAgICAgICAgICB0aGlzLmplKHQpICYmIChuLkJlKCksIG4uQ2UoZS5yZXN1bWVUb2tlbikpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgNCAvKiBXYXRjaFRhcmdldENoYW5nZVN0YXRlLlJlc2V0ICovIDpcbiAgICAgICAgICAgICAgICB0aGlzLmplKHQpICYmIChcbiAgICAgICAgICAgICAgICAvLyBSZXNldCB0aGUgdGFyZ2V0IGFuZCBzeW50aGVzaXplcyByZW1vdmVzIGZvciBhbGwgZXhpc3RpbmdcbiAgICAgICAgICAgICAgICAvLyBkb2N1bWVudHMuIFRoZSBiYWNrZW5kIHdpbGwgcmUtYWRkIGFueSBkb2N1bWVudHMgdGhhdCBzdGlsbFxuICAgICAgICAgICAgICAgIC8vIG1hdGNoIHRoZSB0YXJnZXQgYmVmb3JlIGl0IHNlbmRzIHRoZSBuZXh0IGdsb2JhbCBzbmFwc2hvdC5cbiAgICAgICAgICAgICAgICB0aGlzLkhlKHQpLCBuLkNlKGUucmVzdW1lVG9rZW4pKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGZhaWwoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJdGVyYXRlcyBvdmVyIGFsbCB0YXJnZXRJZHMgdGhhdCB0aGUgd2F0Y2ggY2hhbmdlIGFwcGxpZXMgdG86IGVpdGhlciB0aGVcbiAgICAgKiB0YXJnZXRJZHMgZXhwbGljaXRseSBsaXN0ZWQgaW4gdGhlIGNoYW5nZSBvciB0aGUgdGFyZ2V0SWRzIG9mIGFsbCBjdXJyZW50bHlcbiAgICAgKiBhY3RpdmUgdGFyZ2V0cy5cbiAgICAgKi8gICAgZm9yRWFjaFRhcmdldChlLCB0KSB7XG4gICAgICAgIGUudGFyZ2V0SWRzLmxlbmd0aCA+IDAgPyBlLnRhcmdldElkcy5mb3JFYWNoKHQpIDogdGhpcy5rZS5mb3JFYWNoKCgoZSwgbikgPT4ge1xuICAgICAgICAgICAgdGhpcy5qZShuKSAmJiB0KG4pO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZXMgZXhpc3RlbmNlIGZpbHRlcnMgYW5kIHN5bnRoZXNpemVzIGRlbGV0ZXMgZm9yIGZpbHRlciBtaXNtYXRjaGVzLlxuICAgICAqIFRhcmdldHMgdGhhdCBhcmUgaW52YWxpZGF0ZWQgYnkgZmlsdGVyIG1pc21hdGNoZXMgYXJlIGFkZGVkIHRvXG4gICAgICogYHBlbmRpbmdUYXJnZXRSZXNldHNgLlxuICAgICAqLyAgICBKZShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBlLnRhcmdldElkLCBuID0gZS5mZS5jb3VudCwgciA9IHRoaXMuWWUodCk7XG4gICAgICAgIGlmIChyKSB7XG4gICAgICAgICAgICBjb25zdCBpID0gci50YXJnZXQ7XG4gICAgICAgICAgICBpZiAoX19QUklWQVRFX3RhcmdldElzRG9jdW1lbnRUYXJnZXQoaSkpIGlmICgwID09PSBuKSB7XG4gICAgICAgICAgICAgICAgLy8gVGhlIGV4aXN0ZW5jZSBmaWx0ZXIgdG9sZCB1cyB0aGUgZG9jdW1lbnQgZG9lcyBub3QgZXhpc3QuIFdlIGRlZHVjZVxuICAgICAgICAgICAgICAgIC8vIHRoYXQgdGhpcyBkb2N1bWVudCBkb2VzIG5vdCBleGlzdCBhbmQgYXBwbHkgYSBkZWxldGVkIGRvY3VtZW50IHRvXG4gICAgICAgICAgICAgICAgLy8gb3VyIHVwZGF0ZXMuIFdpdGhvdXQgYXBwbHlpbmcgdGhpcyBkZWxldGVkIGRvY3VtZW50IHRoZXJlIG1pZ2h0IGJlXG4gICAgICAgICAgICAgICAgLy8gYW5vdGhlciBxdWVyeSB0aGF0IHdpbGwgcmFpc2UgdGhpcyBkb2N1bWVudCBhcyBwYXJ0IG9mIGEgc25hcHNob3RcbiAgICAgICAgICAgICAgICAvLyB1bnRpbCBpdCBpcyByZXNvbHZlZCwgZXNzZW50aWFsbHkgZXhwb3NpbmcgaW5jb25zaXN0ZW5jeSBiZXR3ZWVuXG4gICAgICAgICAgICAgICAgLy8gcXVlcmllcy5cbiAgICAgICAgICAgICAgICBjb25zdCBlID0gbmV3IERvY3VtZW50S2V5KGkucGF0aCk7XG4gICAgICAgICAgICAgICAgdGhpcy5XZSh0LCBlLCBNdXRhYmxlRG9jdW1lbnQubmV3Tm9Eb2N1bWVudChlLCBTbmFwc2hvdFZlcnNpb24ubWluKCkpKTtcbiAgICAgICAgICAgIH0gZWxzZSBfX1BSSVZBVEVfaGFyZEFzc2VydCgxID09PSBuKTsgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgciA9IHRoaXMuWmUodCk7XG4gICAgICAgICAgICAgICAgLy8gRXhpc3RlbmNlIGZpbHRlciBtaXNtYXRjaC4gTWFyayB0aGUgZG9jdW1lbnRzIGFzIGJlaW5nIGluIGxpbWJvLCBhbmRcbiAgICAgICAgICAgICAgICAvLyByYWlzZSBhIHNuYXBzaG90IHdpdGggYGlzRnJvbUNhY2hlOnRydWVgLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAociAhPT0gbikge1xuICAgICAgICAgICAgICAgICAgICAvLyBBcHBseSBibG9vbSBmaWx0ZXIgdG8gaWRlbnRpZnkgYW5kIG1hcmsgcmVtb3ZlZCBkb2N1bWVudHMuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSB0aGlzLlhlKGUpLCBpID0gbiA/IHRoaXMuZXQobiwgZSwgcikgOiAxIC8qIEJsb29tRmlsdGVyQXBwbGljYXRpb25TdGF0dXMuU2tpcHBlZCAqLztcbiAgICAgICAgICAgICAgICAgICAgaWYgKDAgLyogQmxvb21GaWx0ZXJBcHBsaWNhdGlvblN0YXR1cy5TdWNjZXNzICovICE9PSBpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiBibG9vbSBmaWx0ZXIgYXBwbGljYXRpb24gZmFpbHMsIHdlIHJlc2V0IHRoZSBtYXBwaW5nIGFuZFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdHJpZ2dlciByZS1ydW4gb2YgdGhlIHF1ZXJ5LlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5IZSh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSAyIC8qIEJsb29tRmlsdGVyQXBwbGljYXRpb25TdGF0dXMuRmFsc2VQb3NpdGl2ZSAqLyA9PT0gaSA/IFwiVGFyZ2V0UHVycG9zZUV4aXN0ZW5jZUZpbHRlck1pc21hdGNoQmxvb21cIiAvKiBUYXJnZXRQdXJwb3NlLkV4aXN0ZW5jZUZpbHRlck1pc21hdGNoQmxvb20gKi8gOiBcIlRhcmdldFB1cnBvc2VFeGlzdGVuY2VGaWx0ZXJNaXNtYXRjaFwiIC8qIFRhcmdldFB1cnBvc2UuRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2ggKi87XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLktlID0gdGhpcy5LZS5pbnNlcnQodCwgZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbnVsbCA9PSBjZSB8fCBjZS50dChmdW5jdGlvbiBfX1BSSVZBVEVfY3JlYXRlRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2hJbmZvRm9yVGVzdGluZ0hvb2tzKGUsIHQsIG4sIHIsIGkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzLCBvLCBfLCBhLCB1LCBjO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbENhY2hlQ291bnQ6IGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RlbmNlRmlsdGVyQ291bnQ6IHQuY291bnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YWJhc2VJZDogbi5kYXRhYmFzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9qZWN0SWQ6IG4ucHJvamVjdElkXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBoID0gdC51bmNoYW5nZWROYW1lcztcbiAgICAgICAgICAgICAgICAgICAgICAgIGggJiYgKGwuYmxvb21GaWx0ZXIgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwbGllZDogMCAvKiBCbG9vbUZpbHRlckFwcGxpY2F0aW9uU3RhdHVzLlN1Y2Nlc3MgKi8gPT09IGksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzaENvdW50OiBudWxsICE9PSAocyA9IG51bGwgPT0gaCA/IHZvaWQgMCA6IGguaGFzaENvdW50KSAmJiB2b2lkIDAgIT09IHMgPyBzIDogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaXRtYXBMZW5ndGg6IG51bGwgIT09IChhID0gbnVsbCA9PT0gKF8gPSBudWxsID09PSAobyA9IG51bGwgPT0gaCA/IHZvaWQgMCA6IGguYml0cykgfHwgdm9pZCAwID09PSBvID8gdm9pZCAwIDogby5iaXRtYXApIHx8IHZvaWQgMCA9PT0gXyA/IHZvaWQgMCA6IF8ubGVuZ3RoKSAmJiB2b2lkIDAgIT09IGEgPyBhIDogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiBudWxsICE9PSAoYyA9IG51bGwgPT09ICh1ID0gbnVsbCA9PSBoID8gdm9pZCAwIDogaC5iaXRzKSB8fCB2b2lkIDAgPT09IHUgPyB2b2lkIDAgOiB1LnBhZGRpbmcpICYmIHZvaWQgMCAhPT0gYyA/IGMgOiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pZ2h0Q29udGFpbjogZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbCAhPT0gKHQgPSBudWxsID09IHIgPyB2b2lkIDAgOiByLm1pZ2h0Q29udGFpbihlKSkgJiYgdm9pZCAwICE9PSB0ICYmIHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyAociwgZS5mZSwgdGhpcy5MZS5udCgpLCBuLCBpKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlIHRoZSBibG9vbSBmaWx0ZXIgZnJvbSB0aGUgXCJ1bmNoYW5nZWRfbmFtZXNcIiBmaWVsZCBvZiBhbiBleGlzdGVuY2VcbiAgICAgKiBmaWx0ZXIuXG4gICAgICovICAgIFhlKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IGUuZmUudW5jaGFuZ2VkTmFtZXM7XG4gICAgICAgIGlmICghdCB8fCAhdC5iaXRzKSByZXR1cm4gbnVsbDtcbiAgICAgICAgY29uc3Qge2JpdHM6IHtiaXRtYXA6IG4gPSBcIlwiLCBwYWRkaW5nOiByID0gMH0sIGhhc2hDb3VudDogaSA9IDB9ID0gdDtcbiAgICAgICAgbGV0IHMsIG87XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBzID0gX19QUklWQVRFX25vcm1hbGl6ZUJ5dGVTdHJpbmcobikudG9VaW50OEFycmF5KCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgX19QUklWQVRFX0Jhc2U2NERlY29kZUVycm9yKSByZXR1cm4gX19QUklWQVRFX2xvZ1dhcm4oXCJEZWNvZGluZyB0aGUgYmFzZTY0IGJsb29tIGZpbHRlciBpbiBleGlzdGVuY2UgZmlsdGVyIGZhaWxlZCAoXCIgKyBlLm1lc3NhZ2UgKyBcIik7IGlnbm9yaW5nIHRoZSBibG9vbSBmaWx0ZXIgYW5kIGZhbGxpbmcgYmFjayB0byBmdWxsIHJlLXF1ZXJ5LlwiKSwgXG4gICAgICAgICAgICBudWxsO1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gQmxvb21GaWx0ZXIgdGhyb3dzIGVycm9yIGlmIHRoZSBpbnB1dHMgYXJlIGludmFsaWQuXG4gICAgICAgICAgICBvID0gbmV3IEJsb29tRmlsdGVyKHMsIHIsIGkpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICByZXR1cm4gX19QUklWQVRFX2xvZ1dhcm4oZSBpbnN0YW5jZW9mIF9fUFJJVkFURV9CbG9vbUZpbHRlckVycm9yID8gXCJCbG9vbUZpbHRlciBlcnJvcjogXCIgOiBcIkFwcGx5aW5nIGJsb29tIGZpbHRlciBmYWlsZWQ6IFwiLCBlKSwgXG4gICAgICAgICAgICBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAwID09PSBvLlRlID8gbnVsbCA6IG87XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcGx5IGJsb29tIGZpbHRlciB0byByZW1vdmUgdGhlIGRlbGV0ZWQgZG9jdW1lbnRzLCBhbmQgcmV0dXJuIHRoZVxuICAgICAqIGFwcGxpY2F0aW9uIHN0YXR1cy5cbiAgICAgKi8gICAgZXQoZSwgdCwgbikge1xuICAgICAgICByZXR1cm4gdC5mZS5jb3VudCA9PT0gbiAtIHRoaXMucnQoZSwgdC50YXJnZXRJZCkgPyAwIC8qIEJsb29tRmlsdGVyQXBwbGljYXRpb25TdGF0dXMuU3VjY2VzcyAqLyA6IDIgLyogQmxvb21GaWx0ZXJBcHBsaWNhdGlvblN0YXR1cy5GYWxzZVBvc2l0aXZlICovO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGaWx0ZXIgb3V0IHJlbW92ZWQgZG9jdW1lbnRzIGJhc2VkIG9uIGJsb29tIGZpbHRlciBtZW1iZXJzaGlwIHJlc3VsdCBhbmRcbiAgICAgKiByZXR1cm4gbnVtYmVyIG9mIGRvY3VtZW50cyByZW1vdmVkLlxuICAgICAqLyAgICBydChlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLkxlLmdldFJlbW90ZUtleXNGb3JUYXJnZXQodCk7XG4gICAgICAgIGxldCByID0gMDtcbiAgICAgICAgcmV0dXJuIG4uZm9yRWFjaCgobiA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gdGhpcy5MZS5udCgpLCBzID0gYHByb2plY3RzLyR7aS5wcm9qZWN0SWR9L2RhdGFiYXNlcy8ke2kuZGF0YWJhc2V9L2RvY3VtZW50cy8ke24ucGF0aC5jYW5vbmljYWxTdHJpbmcoKX1gO1xuICAgICAgICAgICAgZS5taWdodENvbnRhaW4ocykgfHwgKHRoaXMuV2UodCwgbiwgLyp1cGRhdGVkRG9jdW1lbnQ9Ki8gbnVsbCksIHIrKyk7XG4gICAgICAgIH0pKSwgcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29udmVydHMgdGhlIGN1cnJlbnRseSBhY2N1bXVsYXRlZCBzdGF0ZSBpbnRvIGEgcmVtb3RlIGV2ZW50IGF0IHRoZVxuICAgICAqIHByb3ZpZGVkIHNuYXBzaG90IHZlcnNpb24uIFJlc2V0cyB0aGUgYWNjdW11bGF0ZWQgY2hhbmdlcyBiZWZvcmUgcmV0dXJuaW5nLlxuICAgICAqLyAgICBpdChlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBuZXcgTWFwO1xuICAgICAgICB0aGlzLmtlLmZvckVhY2goKChuLCByKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gdGhpcy5ZZShyKTtcbiAgICAgICAgICAgIGlmIChpKSB7XG4gICAgICAgICAgICAgICAgaWYgKG4uY3VycmVudCAmJiBfX1BSSVZBVEVfdGFyZ2V0SXNEb2N1bWVudFRhcmdldChpLnRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRG9jdW1lbnQgcXVlcmllcyBmb3IgZG9jdW1lbnQgdGhhdCBkb24ndCBleGlzdCBjYW4gcHJvZHVjZSBhbiBlbXB0eVxuICAgICAgICAgICAgICAgICAgICAvLyByZXN1bHQgc2V0LiBUbyB1cGRhdGUgb3VyIGxvY2FsIGNhY2hlLCB3ZSBzeW50aGVzaXplIGEgZG9jdW1lbnRcbiAgICAgICAgICAgICAgICAgICAgLy8gZGVsZXRlIGlmIHdlIGhhdmUgbm90IHByZXZpb3VzbHkgcmVjZWl2ZWQgdGhlIGRvY3VtZW50LiBUaGlzXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlc29sdmVzIHRoZSBsaW1ibyBzdGF0ZSBvZiB0aGUgZG9jdW1lbnQsIHJlbW92aW5nIGl0IGZyb21cbiAgICAgICAgICAgICAgICAgICAgLy8gbGltYm9Eb2N1bWVudFJlZnMuXG4gICAgICAgICAgICAgICAgICAgIC8vIFRPRE8oZGltb25kKTogSWRlYWxseSB3ZSB3b3VsZCBoYXZlIGFuIGV4cGxpY2l0IGxvb2t1cCB0YXJnZXRcbiAgICAgICAgICAgICAgICAgICAgLy8gaW5zdGVhZCByZXN1bHRpbmcgaW4gYW4gZXhwbGljaXQgZGVsZXRlIG1lc3NhZ2UgYW5kIHdlIGNvdWxkXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSB0aGlzIHNwZWNpYWwgbG9naWMuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBuZXcgRG9jdW1lbnRLZXkoaS50YXJnZXQucGF0aCk7XG4gICAgICAgICAgICAgICAgICAgIG51bGwgIT09IHRoaXMucWUuZ2V0KHQpIHx8IHRoaXMuc3QociwgdCkgfHwgdGhpcy5XZShyLCB0LCBNdXRhYmxlRG9jdW1lbnQubmV3Tm9Eb2N1bWVudCh0LCBlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG4uRGUgJiYgKHQuc2V0KHIsIG4udmUoKSksIG4uRmUoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgbGV0IG4gPSBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKTtcbiAgICAgICAgLy8gV2UgZXh0cmFjdCB0aGUgc2V0IG9mIGxpbWJvLW9ubHkgZG9jdW1lbnQgdXBkYXRlcyBhcyB0aGUgR0MgbG9naWNcbiAgICAgICAgLy8gc3BlY2lhbC1jYXNlcyBkb2N1bWVudHMgdGhhdCBkbyBub3QgYXBwZWFyIGluIHRoZSB0YXJnZXQgY2FjaGUuXG4gICAgICAgIFxuICAgICAgICAvLyBUT0RPKGdzb2x0aXMpOiBFeHBhbmQgb24gdGhpcyBjb21tZW50IG9uY2UgR0MgaXMgYXZhaWxhYmxlIGluIHRoZSBKU1xuICAgICAgICAvLyBjbGllbnQuXG4gICAgICAgICAgICAgICAgdGhpcy5RZS5mb3JFYWNoKCgoZSwgdCkgPT4ge1xuICAgICAgICAgICAgbGV0IHIgPSAhMDtcbiAgICAgICAgICAgIHQuZm9yRWFjaFdoaWxlKChlID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5ZZShlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gIXQgfHwgXCJUYXJnZXRQdXJwb3NlTGltYm9SZXNvbHV0aW9uXCIgLyogVGFyZ2V0UHVycG9zZS5MaW1ib1Jlc29sdXRpb24gKi8gPT09IHQucHVycG9zZSB8fCAociA9ICExLCBcbiAgICAgICAgICAgICAgICAhMSk7XG4gICAgICAgICAgICB9KSksIHIgJiYgKG4gPSBuLmFkZChlKSk7XG4gICAgICAgIH0pKSwgdGhpcy5xZS5mb3JFYWNoKCgodCwgbikgPT4gbi5zZXRSZWFkVGltZShlKSkpO1xuICAgICAgICBjb25zdCByID0gbmV3IFJlbW90ZUV2ZW50KGUsIHQsIHRoaXMuS2UsIHRoaXMucWUsIG4pO1xuICAgICAgICByZXR1cm4gdGhpcy5xZSA9IF9fUFJJVkFURV9tdXRhYmxlRG9jdW1lbnRNYXAoKSwgdGhpcy5RZSA9IF9fUFJJVkFURV9kb2N1bWVudFRhcmdldE1hcCgpLCBcbiAgICAgICAgdGhpcy5LZSA9IG5ldyBTb3J0ZWRNYXAoX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IpLCByO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIHRoZSBwcm92aWRlZCBkb2N1bWVudCB0byB0aGUgaW50ZXJuYWwgbGlzdCBvZiBkb2N1bWVudCB1cGRhdGVzIGFuZFxuICAgICAqIGl0cyBkb2N1bWVudCBrZXkgdG8gdGhlIGdpdmVuIHRhcmdldCdzIG1hcHBpbmcuXG4gICAgICovXG4gICAgLy8gVmlzaWJsZSBmb3IgdGVzdGluZy5cbiAgICBVZShlLCB0KSB7XG4gICAgICAgIGlmICghdGhpcy5qZShlKSkgcmV0dXJuO1xuICAgICAgICBjb25zdCBuID0gdGhpcy5zdChlLCB0LmtleSkgPyAyIC8qIENoYW5nZVR5cGUuTW9kaWZpZWQgKi8gOiAwIC8qIENoYW5nZVR5cGUuQWRkZWQgKi87XG4gICAgICAgIHRoaXMuemUoZSkuTWUodC5rZXksIG4pLCB0aGlzLnFlID0gdGhpcy5xZS5pbnNlcnQodC5rZXksIHQpLCB0aGlzLlFlID0gdGhpcy5RZS5pbnNlcnQodC5rZXksIHRoaXMub3QodC5rZXkpLmFkZChlKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgdGhlIHByb3ZpZGVkIGRvY3VtZW50IGZyb20gdGhlIHRhcmdldCBtYXBwaW5nLiBJZiB0aGVcbiAgICAgKiBkb2N1bWVudCBubyBsb25nZXIgbWF0Y2hlcyB0aGUgdGFyZ2V0LCBidXQgdGhlIGRvY3VtZW50J3Mgc3RhdGUgaXMgc3RpbGxcbiAgICAgKiBrbm93biAoZS5nLiB3ZSBrbm93IHRoYXQgdGhlIGRvY3VtZW50IHdhcyBkZWxldGVkIG9yIHdlIHJlY2VpdmVkIHRoZSBjaGFuZ2VcbiAgICAgKiB0aGF0IGNhdXNlZCB0aGUgZmlsdGVyIG1pc21hdGNoKSwgdGhlIG5ldyBkb2N1bWVudCBjYW4gYmUgcHJvdmlkZWRcbiAgICAgKiB0byB1cGRhdGUgdGhlIHJlbW90ZSBkb2N1bWVudCBjYWNoZS5cbiAgICAgKi9cbiAgICAvLyBWaXNpYmxlIGZvciB0ZXN0aW5nLlxuICAgIFdlKGUsIHQsIG4pIHtcbiAgICAgICAgaWYgKCF0aGlzLmplKGUpKSByZXR1cm47XG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLnplKGUpO1xuICAgICAgICB0aGlzLnN0KGUsIHQpID8gci5NZSh0LCAxIC8qIENoYW5nZVR5cGUuUmVtb3ZlZCAqLykgOiBcbiAgICAgICAgLy8gVGhlIGRvY3VtZW50IG1heSBoYXZlIGVudGVyZWQgYW5kIGxlZnQgdGhlIHRhcmdldCBiZWZvcmUgd2UgcmFpc2VkIGFcbiAgICAgICAgLy8gc25hcHNob3QsIHNvIHdlIGNhbiBqdXN0IGlnbm9yZSB0aGUgY2hhbmdlLlxuICAgICAgICByLnhlKHQpLCB0aGlzLlFlID0gdGhpcy5RZS5pbnNlcnQodCwgdGhpcy5vdCh0KS5kZWxldGUoZSkpLCBuICYmICh0aGlzLnFlID0gdGhpcy5xZS5pbnNlcnQodCwgbikpO1xuICAgIH1cbiAgICByZW1vdmVUYXJnZXQoZSkge1xuICAgICAgICB0aGlzLmtlLmRlbGV0ZShlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgY3VycmVudCBjb3VudCBvZiBkb2N1bWVudHMgaW4gdGhlIHRhcmdldC4gVGhpcyBpbmNsdWRlcyBib3RoXG4gICAgICogdGhlIG51bWJlciBvZiBkb2N1bWVudHMgdGhhdCB0aGUgTG9jYWxTdG9yZSBjb25zaWRlcnMgdG8gYmUgcGFydCBvZiB0aGVcbiAgICAgKiB0YXJnZXQgYXMgd2VsbCBhcyBhbnkgYWNjdW11bGF0ZWQgY2hhbmdlcy5cbiAgICAgKi8gICAgWmUoZSkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy56ZShlKS52ZSgpO1xuICAgICAgICByZXR1cm4gdGhpcy5MZS5nZXRSZW1vdGVLZXlzRm9yVGFyZ2V0KGUpLnNpemUgKyB0LmFkZGVkRG9jdW1lbnRzLnNpemUgLSB0LnJlbW92ZWREb2N1bWVudHMuc2l6ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW5jcmVtZW50IHRoZSBudW1iZXIgb2YgYWNrcyBuZWVkZWQgZnJvbSB3YXRjaCBiZWZvcmUgd2UgY2FuIGNvbnNpZGVyIHRoZVxuICAgICAqIHNlcnZlciB0byBiZSAnaW4tc3luYycgd2l0aCB0aGUgY2xpZW50J3MgYWN0aXZlIHRhcmdldHMuXG4gICAgICovICAgIE9lKGUpIHtcbiAgICAgICAgdGhpcy56ZShlKS5PZSgpO1xuICAgIH1cbiAgICB6ZShlKSB7XG4gICAgICAgIGxldCB0ID0gdGhpcy5rZS5nZXQoZSk7XG4gICAgICAgIHJldHVybiB0IHx8ICh0ID0gbmV3IF9fUFJJVkFURV9UYXJnZXRTdGF0ZSwgdGhpcy5rZS5zZXQoZSwgdCkpLCB0O1xuICAgIH1cbiAgICBvdChlKSB7XG4gICAgICAgIGxldCB0ID0gdGhpcy5RZS5nZXQoZSk7XG4gICAgICAgIHJldHVybiB0IHx8ICh0ID0gbmV3IFNvcnRlZFNldChfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvciksIHRoaXMuUWUgPSB0aGlzLlFlLmluc2VydChlLCB0KSksIFxuICAgICAgICB0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBWZXJpZmllcyB0aGF0IHRoZSB1c2VyIGlzIHN0aWxsIGludGVyZXN0ZWQgaW4gdGhpcyB0YXJnZXQgKGJ5IGNhbGxpbmdcbiAgICAgKiBgZ2V0VGFyZ2V0RGF0YUZvclRhcmdldCgpYCkgYW5kIHRoYXQgd2UgYXJlIG5vdCB3YWl0aW5nIGZvciBwZW5kaW5nIEFERHNcbiAgICAgKiBmcm9tIHdhdGNoLlxuICAgICAqLyAgICBqZShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBudWxsICE9PSB0aGlzLlllKGUpO1xuICAgICAgICByZXR1cm4gdCB8fCBfX1BSSVZBVEVfbG9nRGVidWcoXCJXYXRjaENoYW5nZUFnZ3JlZ2F0b3JcIiwgXCJEZXRlY3RlZCBpbmFjdGl2ZSB0YXJnZXRcIiwgZSksIFxuICAgICAgICB0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBUYXJnZXREYXRhIGZvciBhbiBhY3RpdmUgdGFyZ2V0IChpLmUuIGEgdGFyZ2V0IHRoYXQgdGhlIHVzZXJcbiAgICAgKiBpcyBzdGlsbCBpbnRlcmVzdGVkIGluIHRoYXQgaGFzIG5vIG91dHN0YW5kaW5nIHRhcmdldCBjaGFuZ2UgcmVxdWVzdHMpLlxuICAgICAqLyAgICBZZShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmtlLmdldChlKTtcbiAgICAgICAgcmV0dXJuIHQgJiYgdC5iZSA/IG51bGwgOiB0aGlzLkxlLl90KGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXNldHMgdGhlIHN0YXRlIG9mIGEgV2F0Y2ggdGFyZ2V0IHRvIGl0cyBpbml0aWFsIHN0YXRlIChlLmcuIHNldHNcbiAgICAgKiAnY3VycmVudCcgdG8gZmFsc2UsIGNsZWFycyB0aGUgcmVzdW1lIHRva2VuIGFuZCByZW1vdmVzIGl0cyB0YXJnZXQgbWFwcGluZ1xuICAgICAqIGZyb20gYWxsIGRvY3VtZW50cykuXG4gICAgICovICAgIEhlKGUpIHtcbiAgICAgICAgdGhpcy5rZS5zZXQoZSwgbmV3IF9fUFJJVkFURV9UYXJnZXRTdGF0ZSk7XG4gICAgICAgIHRoaXMuTGUuZ2V0UmVtb3RlS2V5c0ZvclRhcmdldChlKS5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIHRoaXMuV2UoZSwgdCwgLyp1cGRhdGVkRG9jdW1lbnQ9Ki8gbnVsbCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBMb2NhbFN0b3JlIGNvbnNpZGVycyB0aGUgZG9jdW1lbnQgdG8gYmUgcGFydCBvZiB0aGVcbiAgICAgKiBzcGVjaWZpZWQgdGFyZ2V0LlxuICAgICAqLyAgICBzdChlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLkxlLmdldFJlbW90ZUtleXNGb3JUYXJnZXQoZSkuaGFzKHQpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2RvY3VtZW50VGFyZ2V0TWFwKCkge1xuICAgIHJldHVybiBuZXcgU29ydGVkTWFwKERvY3VtZW50S2V5LmNvbXBhcmF0b3IpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfc25hcHNob3RDaGFuZ2VzTWFwKCkge1xuICAgIHJldHVybiBuZXcgU29ydGVkTWFwKERvY3VtZW50S2V5LmNvbXBhcmF0b3IpO1xufVxuXG5jb25zdCBoZSA9ICgoKSA9PiB7XG4gICAgY29uc3QgZSA9IHtcbiAgICAgICAgYXNjOiBcIkFTQ0VORElOR1wiLFxuICAgICAgICBkZXNjOiBcIkRFU0NFTkRJTkdcIlxuICAgIH07XG4gICAgcmV0dXJuIGU7XG59KSgpLCBQZSA9ICgoKSA9PiB7XG4gICAgY29uc3QgZSA9IHtcbiAgICAgICAgXCI8XCI6IFwiTEVTU19USEFOXCIsXG4gICAgICAgIFwiPD1cIjogXCJMRVNTX1RIQU5fT1JfRVFVQUxcIixcbiAgICAgICAgXCI+XCI6IFwiR1JFQVRFUl9USEFOXCIsXG4gICAgICAgIFwiPj1cIjogXCJHUkVBVEVSX1RIQU5fT1JfRVFVQUxcIixcbiAgICAgICAgXCI9PVwiOiBcIkVRVUFMXCIsXG4gICAgICAgIFwiIT1cIjogXCJOT1RfRVFVQUxcIixcbiAgICAgICAgXCJhcnJheS1jb250YWluc1wiOiBcIkFSUkFZX0NPTlRBSU5TXCIsXG4gICAgICAgIGluOiBcIklOXCIsXG4gICAgICAgIFwibm90LWluXCI6IFwiTk9UX0lOXCIsXG4gICAgICAgIFwiYXJyYXktY29udGFpbnMtYW55XCI6IFwiQVJSQVlfQ09OVEFJTlNfQU5ZXCJcbiAgICB9O1xuICAgIHJldHVybiBlO1xufSkoKSwgSWUgPSAoKCkgPT4ge1xuICAgIGNvbnN0IGUgPSB7XG4gICAgICAgIGFuZDogXCJBTkRcIixcbiAgICAgICAgb3I6IFwiT1JcIlxuICAgIH07XG4gICAgcmV0dXJuIGU7XG59KSgpO1xuXG4vKipcbiAqIFRoaXMgY2xhc3MgZ2VuZXJhdGVzIEpzb25PYmplY3QgdmFsdWVzIGZvciB0aGUgRGF0YXN0b3JlIEFQSSBzdWl0YWJsZSBmb3JcbiAqIHNlbmRpbmcgdG8gZWl0aGVyIEdSUEMgc3R1YiBtZXRob2RzIG9yIHZpYSB0aGUgSlNPTi9IVFRQIFJFU1QgQVBJLlxuICpcbiAqIFRoZSBzZXJpYWxpemVyIHN1cHBvcnRzIGJvdGggUHJvdG9idWYuanMgYW5kIFByb3RvMyBKU09OIGZvcm1hdHMuIEJ5XG4gKiBzZXR0aW5nIGB1c2VQcm90bzNKc29uYCB0byB0cnVlLCB0aGUgc2VyaWFsaXplciB3aWxsIHVzZSB0aGUgUHJvdG8zIEpTT05cbiAqIGZvcm1hdC5cbiAqXG4gKiBGb3IgYSBkZXNjcmlwdGlvbiBvZiB0aGUgUHJvdG8zIEpTT04gZm9ybWF0IGNoZWNrXG4gKiBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9wcm90b2NvbC1idWZmZXJzL2RvY3MvcHJvdG8zI2pzb25cbiAqXG4gKiBUT0RPKGtsaW10KTogV2UgY2FuIHJlbW92ZSB0aGUgZGF0YWJhc2VJZCBhcmd1bWVudCBpZiB3ZSBrZWVwIHRoZSBmdWxsXG4gKiByZXNvdXJjZSBuYW1lIGluIGRvY3VtZW50cy5cbiAqL1xuY2xhc3MgSnNvblByb3RvU2VyaWFsaXplciB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICB0aGlzLmRhdGFiYXNlSWQgPSBlLCB0aGlzLnVzZVByb3RvM0pzb24gPSB0O1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgdmFsdWUgZm9yIGEgbnVtYmVyIChvciBudWxsKSB0aGF0J3MgYXBwcm9wcmlhdGUgdG8gcHV0IGludG9cbiAqIGEgZ29vZ2xlLnByb3RvYnVmLkludDMyVmFsdWUgcHJvdG8uXG4gKiBETyBOT1QgVVNFIFRISVMgRk9SIEFOWVRISU5HIEVMU0UuXG4gKiBUaGlzIG1ldGhvZCBjaGVhdHMuIEl0J3MgdHlwZWQgYXMgcmV0dXJuaW5nIFwibnVtYmVyXCIgYmVjYXVzZSB0aGF0J3Mgd2hhdFxuICogb3VyIGdlbmVyYXRlZCBwcm90byBpbnRlcmZhY2VzIHNheSBJbnQzMlZhbHVlIG11c3QgYmUuIEJ1dCBHUlBDIGFjdHVhbGx5XG4gKiBleHBlY3RzIGEgeyB2YWx1ZTogPG51bWJlcj4gfSBzdHJ1Y3QuXG4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV90b0ludDMyUHJvdG8oZSwgdCkge1xuICAgIHJldHVybiBlLnVzZVByb3RvM0pzb24gfHwgX19QUklWQVRFX2lzTnVsbE9yVW5kZWZpbmVkKHQpID8gdCA6IHtcbiAgICAgICAgdmFsdWU6IHRcbiAgICB9O1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBudW1iZXIgKG9yIG51bGwpIGZyb20gYSBnb29nbGUucHJvdG9idWYuSW50MzJWYWx1ZSBwcm90by5cbiAqL1xuLyoqXG4gKiBSZXR1cm5zIGEgdmFsdWUgZm9yIGEgRGF0ZSB0aGF0J3MgYXBwcm9wcmlhdGUgdG8gcHV0IGludG8gYSBwcm90by5cbiAqL1xuZnVuY3Rpb24gdG9UaW1lc3RhbXAoZSwgdCkge1xuICAgIGlmIChlLnVzZVByb3RvM0pzb24pIHtcbiAgICAgICAgcmV0dXJuIGAke25ldyBEYXRlKDFlMyAqIHQuc2Vjb25kcykudG9JU09TdHJpbmcoKS5yZXBsYWNlKC9cXC5cXGQqLywgXCJcIikucmVwbGFjZShcIlpcIiwgXCJcIil9LiR7KFwiMDAwMDAwMDAwXCIgKyB0Lm5hbm9zZWNvbmRzKS5zbGljZSgtOSl9WmA7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHNlY29uZHM6IFwiXCIgKyB0LnNlY29uZHMsXG4gICAgICAgIG5hbm9zOiB0Lm5hbm9zZWNvbmRzXG4gICAgfTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgdmFsdWUgZm9yIGJ5dGVzIHRoYXQncyBhcHByb3ByaWF0ZSB0byBwdXQgaW4gYSBwcm90by5cbiAqXG4gKiBWaXNpYmxlIGZvciB0ZXN0aW5nLlxuICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfdG9CeXRlcyhlLCB0KSB7XG4gICAgcmV0dXJuIGUudXNlUHJvdG8zSnNvbiA/IHQudG9CYXNlNjQoKSA6IHQudG9VaW50OEFycmF5KCk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIEJ5dGVTdHJpbmcgYmFzZWQgb24gdGhlIHByb3RvIHN0cmluZyB2YWx1ZS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfdG9WZXJzaW9uKGUsIHQpIHtcbiAgICByZXR1cm4gdG9UaW1lc3RhbXAoZSwgdC50b1RpbWVzdGFtcCgpKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2Zyb21WZXJzaW9uKGUpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX2hhcmRBc3NlcnQoISFlKSwgU25hcHNob3RWZXJzaW9uLmZyb21UaW1lc3RhbXAoZnVuY3Rpb24gZnJvbVRpbWVzdGFtcChlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfbm9ybWFsaXplVGltZXN0YW1wKGUpO1xuICAgICAgICByZXR1cm4gbmV3IFRpbWVzdGFtcCh0LnNlY29uZHMsIHQubmFub3MpO1xuICAgIH0oZSkpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdG9SZXNvdXJjZU5hbWUoZSwgdCkge1xuICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfZnVsbHlRdWFsaWZpZWRQcmVmaXhQYXRoKGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZXNvdXJjZVBhdGgoWyBcInByb2plY3RzXCIsIGUucHJvamVjdElkLCBcImRhdGFiYXNlc1wiLCBlLmRhdGFiYXNlIF0pO1xuICAgIH0oZSkuY2hpbGQoXCJkb2N1bWVudHNcIikuY2hpbGQodCkuY2Fub25pY2FsU3RyaW5nKCk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tUmVzb3VyY2VOYW1lKGUpIHtcbiAgICBjb25zdCB0ID0gUmVzb3VyY2VQYXRoLmZyb21TdHJpbmcoZSk7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9oYXJkQXNzZXJ0KF9fUFJJVkFURV9pc1ZhbGlkUmVzb3VyY2VOYW1lKHQpKSwgdDtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3RvTmFtZShlLCB0KSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV90b1Jlc291cmNlTmFtZShlLmRhdGFiYXNlSWQsIHQucGF0aCk7XG59XG5cbmZ1bmN0aW9uIGZyb21OYW1lKGUsIHQpIHtcbiAgICBjb25zdCBuID0gX19QUklWQVRFX2Zyb21SZXNvdXJjZU5hbWUodCk7XG4gICAgaWYgKG4uZ2V0KDEpICE9PSBlLmRhdGFiYXNlSWQucHJvamVjdElkKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5JTlZBTElEX0FSR1VNRU5ULCBcIlRyaWVkIHRvIGRlc2VyaWFsaXplIGtleSBmcm9tIGRpZmZlcmVudCBwcm9qZWN0OiBcIiArIG4uZ2V0KDEpICsgXCIgdnMgXCIgKyBlLmRhdGFiYXNlSWQucHJvamVjdElkKTtcbiAgICBpZiAobi5nZXQoMykgIT09IGUuZGF0YWJhc2VJZC5kYXRhYmFzZSkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgXCJUcmllZCB0byBkZXNlcmlhbGl6ZSBrZXkgZnJvbSBkaWZmZXJlbnQgZGF0YWJhc2U6IFwiICsgbi5nZXQoMykgKyBcIiB2cyBcIiArIGUuZGF0YWJhc2VJZC5kYXRhYmFzZSk7XG4gICAgcmV0dXJuIG5ldyBEb2N1bWVudEtleShfX1BSSVZBVEVfZXh0cmFjdExvY2FsUGF0aEZyb21SZXNvdXJjZU5hbWUobikpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdG9RdWVyeVBhdGgoZSwgdCkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfdG9SZXNvdXJjZU5hbWUoZS5kYXRhYmFzZUlkLCB0KTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2Zyb21RdWVyeVBhdGgoZSkge1xuICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfZnJvbVJlc291cmNlTmFtZShlKTtcbiAgICAvLyBJbiB2MWJldGExIHF1ZXJpZXMgZm9yIGNvbGxlY3Rpb25zIGF0IHRoZSByb290IGRpZCBub3QgaGF2ZSBhIHRyYWlsaW5nXG4gICAgLy8gXCIvZG9jdW1lbnRzXCIuIEluIHYxIGFsbCByZXNvdXJjZSBwYXRocyBjb250YWluIFwiL2RvY3VtZW50c1wiLiBQcmVzZXJ2ZSB0aGVcbiAgICAvLyBhYmlsaXR5IHRvIHJlYWQgdGhlIHYxYmV0YTEgZm9ybSBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIHF1ZXJpZXMgcGVyc2lzdGVkXG4gICAgLy8gaW4gdGhlIGxvY2FsIHRhcmdldCBjYWNoZS5cbiAgICAgICAgcmV0dXJuIDQgPT09IHQubGVuZ3RoID8gUmVzb3VyY2VQYXRoLmVtcHR5UGF0aCgpIDogX19QUklWQVRFX2V4dHJhY3RMb2NhbFBhdGhGcm9tUmVzb3VyY2VOYW1lKHQpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZ2V0RW5jb2RlZERhdGFiYXNlSWQoZSkge1xuICAgIHJldHVybiBuZXcgUmVzb3VyY2VQYXRoKFsgXCJwcm9qZWN0c1wiLCBlLmRhdGFiYXNlSWQucHJvamVjdElkLCBcImRhdGFiYXNlc1wiLCBlLmRhdGFiYXNlSWQuZGF0YWJhc2UgXSkuY2Fub25pY2FsU3RyaW5nKCk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9leHRyYWN0TG9jYWxQYXRoRnJvbVJlc291cmNlTmFtZShlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9oYXJkQXNzZXJ0KGUubGVuZ3RoID4gNCAmJiBcImRvY3VtZW50c1wiID09PSBlLmdldCg0KSksIGUucG9wRmlyc3QoNSk7XG59XG5cbi8qKiBDcmVhdGVzIGEgRG9jdW1lbnQgcHJvdG8gZnJvbSBrZXkgYW5kIGZpZWxkcyAoYnV0IG5vIGNyZWF0ZS91cGRhdGUgdGltZSkgKi8gZnVuY3Rpb24gX19QUklWQVRFX3RvTXV0YXRpb25Eb2N1bWVudChlLCB0LCBuKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZTogX19QUklWQVRFX3RvTmFtZShlLCB0KSxcbiAgICAgICAgZmllbGRzOiBuLnZhbHVlLm1hcFZhbHVlLmZpZWxkc1xuICAgIH07XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tRG9jdW1lbnQoZSwgdCwgbikge1xuICAgIGNvbnN0IHIgPSBmcm9tTmFtZShlLCB0Lm5hbWUpLCBpID0gX19QUklWQVRFX2Zyb21WZXJzaW9uKHQudXBkYXRlVGltZSksIHMgPSB0LmNyZWF0ZVRpbWUgPyBfX1BSSVZBVEVfZnJvbVZlcnNpb24odC5jcmVhdGVUaW1lKSA6IFNuYXBzaG90VmVyc2lvbi5taW4oKSwgbyA9IG5ldyBPYmplY3RWYWx1ZSh7XG4gICAgICAgIG1hcFZhbHVlOiB7XG4gICAgICAgICAgICBmaWVsZHM6IHQuZmllbGRzXG4gICAgICAgIH1cbiAgICB9KSwgXyA9IE11dGFibGVEb2N1bWVudC5uZXdGb3VuZERvY3VtZW50KHIsIGksIHMsIG8pO1xuICAgIHJldHVybiBuICYmIF8uc2V0SGFzQ29tbWl0dGVkTXV0YXRpb25zKCksIG4gPyBfLnNldEhhc0NvbW1pdHRlZE11dGF0aW9ucygpIDogXztcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2Zyb21CYXRjaEdldERvY3VtZW50c1Jlc3BvbnNlKGUsIHQpIHtcbiAgICByZXR1cm4gXCJmb3VuZFwiIGluIHQgPyBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbUZvdW5kKGUsIHQpIHtcbiAgICAgICAgX19QUklWQVRFX2hhcmRBc3NlcnQoISF0LmZvdW5kKSwgdC5mb3VuZC5uYW1lLCB0LmZvdW5kLnVwZGF0ZVRpbWU7XG4gICAgICAgIGNvbnN0IG4gPSBmcm9tTmFtZShlLCB0LmZvdW5kLm5hbWUpLCByID0gX19QUklWQVRFX2Zyb21WZXJzaW9uKHQuZm91bmQudXBkYXRlVGltZSksIGkgPSB0LmZvdW5kLmNyZWF0ZVRpbWUgPyBfX1BSSVZBVEVfZnJvbVZlcnNpb24odC5mb3VuZC5jcmVhdGVUaW1lKSA6IFNuYXBzaG90VmVyc2lvbi5taW4oKSwgcyA9IG5ldyBPYmplY3RWYWx1ZSh7XG4gICAgICAgICAgICBtYXBWYWx1ZToge1xuICAgICAgICAgICAgICAgIGZpZWxkczogdC5mb3VuZC5maWVsZHNcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBNdXRhYmxlRG9jdW1lbnQubmV3Rm91bmREb2N1bWVudChuLCByLCBpLCBzKTtcbiAgICB9KGUsIHQpIDogXCJtaXNzaW5nXCIgaW4gdCA/IGZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tTWlzc2luZyhlLCB0KSB7XG4gICAgICAgIF9fUFJJVkFURV9oYXJkQXNzZXJ0KCEhdC5taXNzaW5nKSwgX19QUklWQVRFX2hhcmRBc3NlcnQoISF0LnJlYWRUaW1lKTtcbiAgICAgICAgY29uc3QgbiA9IGZyb21OYW1lKGUsIHQubWlzc2luZyksIHIgPSBfX1BSSVZBVEVfZnJvbVZlcnNpb24odC5yZWFkVGltZSk7XG4gICAgICAgIHJldHVybiBNdXRhYmxlRG9jdW1lbnQubmV3Tm9Eb2N1bWVudChuLCByKTtcbiAgICB9KGUsIHQpIDogZmFpbCgpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZnJvbVdhdGNoQ2hhbmdlKGUsIHQpIHtcbiAgICBsZXQgbjtcbiAgICBpZiAoXCJ0YXJnZXRDaGFuZ2VcIiBpbiB0KSB7XG4gICAgICAgIHQudGFyZ2V0Q2hhbmdlO1xuICAgICAgICAvLyBwcm90bzMgZGVmYXVsdCB2YWx1ZSBpcyB1bnNldCBpbiBKU09OICh1bmRlZmluZWQpLCBzbyB1c2UgJ05PX0NIQU5HRSdcbiAgICAgICAgLy8gaWYgdW5zZXRcbiAgICAgICAgY29uc3QgciA9IGZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZShlKSB7XG4gICAgICAgICAgICByZXR1cm4gXCJOT19DSEFOR0VcIiA9PT0gZSA/IDAgLyogV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZS5Ob0NoYW5nZSAqLyA6IFwiQUREXCIgPT09IGUgPyAxIC8qIFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUuQWRkZWQgKi8gOiBcIlJFTU9WRVwiID09PSBlID8gMiAvKiBXYXRjaFRhcmdldENoYW5nZVN0YXRlLlJlbW92ZWQgKi8gOiBcIkNVUlJFTlRcIiA9PT0gZSA/IDMgLyogV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZS5DdXJyZW50ICovIDogXCJSRVNFVFwiID09PSBlID8gNCAvKiBXYXRjaFRhcmdldENoYW5nZVN0YXRlLlJlc2V0ICovIDogZmFpbCgpO1xuICAgICAgICB9KHQudGFyZ2V0Q2hhbmdlLnRhcmdldENoYW5nZVR5cGUgfHwgXCJOT19DSEFOR0VcIiksIGkgPSB0LnRhcmdldENoYW5nZS50YXJnZXRJZHMgfHwgW10sIHMgPSBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbUJ5dGVzKGUsIHQpIHtcbiAgICAgICAgICAgIHJldHVybiBlLnVzZVByb3RvM0pzb24gPyAoX19QUklWQVRFX2hhcmRBc3NlcnQodm9pZCAwID09PSB0IHx8IFwic3RyaW5nXCIgPT0gdHlwZW9mIHQpLCBcbiAgICAgICAgICAgIEJ5dGVTdHJpbmcuZnJvbUJhc2U2NFN0cmluZyh0IHx8IFwiXCIpKSA6IChfX1BSSVZBVEVfaGFyZEFzc2VydCh2b2lkIDAgPT09IHQgfHwgdCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpLCBcbiAgICAgICAgICAgIEJ5dGVTdHJpbmcuZnJvbVVpbnQ4QXJyYXkodCB8fCBuZXcgVWludDhBcnJheSkpO1xuICAgICAgICB9KGUsIHQudGFyZ2V0Q2hhbmdlLnJlc3VtZVRva2VuKSwgbyA9IHQudGFyZ2V0Q2hhbmdlLmNhdXNlLCBfID0gbyAmJiBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbVJwY1N0YXR1cyhlKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gdm9pZCAwID09PSBlLmNvZGUgPyBELlVOS05PV04gOiBfX1BSSVZBVEVfbWFwQ29kZUZyb21ScGNDb2RlKGUuY29kZSk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEZpcmVzdG9yZUVycm9yKHQsIGUubWVzc2FnZSB8fCBcIlwiKTtcbiAgICAgICAgfShvKTtcbiAgICAgICAgbiA9IG5ldyBfX1BSSVZBVEVfV2F0Y2hUYXJnZXRDaGFuZ2UociwgaSwgcywgXyB8fCBudWxsKTtcbiAgICB9IGVsc2UgaWYgKFwiZG9jdW1lbnRDaGFuZ2VcIiBpbiB0KSB7XG4gICAgICAgIHQuZG9jdW1lbnRDaGFuZ2U7XG4gICAgICAgIGNvbnN0IHIgPSB0LmRvY3VtZW50Q2hhbmdlO1xuICAgICAgICByLmRvY3VtZW50LCByLmRvY3VtZW50Lm5hbWUsIHIuZG9jdW1lbnQudXBkYXRlVGltZTtcbiAgICAgICAgY29uc3QgaSA9IGZyb21OYW1lKGUsIHIuZG9jdW1lbnQubmFtZSksIHMgPSBfX1BSSVZBVEVfZnJvbVZlcnNpb24oci5kb2N1bWVudC51cGRhdGVUaW1lKSwgbyA9IHIuZG9jdW1lbnQuY3JlYXRlVGltZSA/IF9fUFJJVkFURV9mcm9tVmVyc2lvbihyLmRvY3VtZW50LmNyZWF0ZVRpbWUpIDogU25hcHNob3RWZXJzaW9uLm1pbigpLCBfID0gbmV3IE9iamVjdFZhbHVlKHtcbiAgICAgICAgICAgIG1hcFZhbHVlOiB7XG4gICAgICAgICAgICAgICAgZmllbGRzOiByLmRvY3VtZW50LmZpZWxkc1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSwgYSA9IE11dGFibGVEb2N1bWVudC5uZXdGb3VuZERvY3VtZW50KGksIHMsIG8sIF8pLCB1ID0gci50YXJnZXRJZHMgfHwgW10sIGMgPSByLnJlbW92ZWRUYXJnZXRJZHMgfHwgW107XG4gICAgICAgIG4gPSBuZXcgX19QUklWQVRFX0RvY3VtZW50V2F0Y2hDaGFuZ2UodSwgYywgYS5rZXksIGEpO1xuICAgIH0gZWxzZSBpZiAoXCJkb2N1bWVudERlbGV0ZVwiIGluIHQpIHtcbiAgICAgICAgdC5kb2N1bWVudERlbGV0ZTtcbiAgICAgICAgY29uc3QgciA9IHQuZG9jdW1lbnREZWxldGU7XG4gICAgICAgIHIuZG9jdW1lbnQ7XG4gICAgICAgIGNvbnN0IGkgPSBmcm9tTmFtZShlLCByLmRvY3VtZW50KSwgcyA9IHIucmVhZFRpbWUgPyBfX1BSSVZBVEVfZnJvbVZlcnNpb24oci5yZWFkVGltZSkgOiBTbmFwc2hvdFZlcnNpb24ubWluKCksIG8gPSBNdXRhYmxlRG9jdW1lbnQubmV3Tm9Eb2N1bWVudChpLCBzKSwgXyA9IHIucmVtb3ZlZFRhcmdldElkcyB8fCBbXTtcbiAgICAgICAgbiA9IG5ldyBfX1BSSVZBVEVfRG9jdW1lbnRXYXRjaENoYW5nZShbXSwgXywgby5rZXksIG8pO1xuICAgIH0gZWxzZSBpZiAoXCJkb2N1bWVudFJlbW92ZVwiIGluIHQpIHtcbiAgICAgICAgdC5kb2N1bWVudFJlbW92ZTtcbiAgICAgICAgY29uc3QgciA9IHQuZG9jdW1lbnRSZW1vdmU7XG4gICAgICAgIHIuZG9jdW1lbnQ7XG4gICAgICAgIGNvbnN0IGkgPSBmcm9tTmFtZShlLCByLmRvY3VtZW50KSwgcyA9IHIucmVtb3ZlZFRhcmdldElkcyB8fCBbXTtcbiAgICAgICAgbiA9IG5ldyBfX1BSSVZBVEVfRG9jdW1lbnRXYXRjaENoYW5nZShbXSwgcywgaSwgbnVsbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKCEoXCJmaWx0ZXJcIiBpbiB0KSkgcmV0dXJuIGZhaWwoKTtcbiAgICAgICAge1xuICAgICAgICAgICAgdC5maWx0ZXI7XG4gICAgICAgICAgICBjb25zdCBlID0gdC5maWx0ZXI7XG4gICAgICAgICAgICBlLnRhcmdldElkO1xuICAgICAgICAgICAgY29uc3Qge2NvdW50OiByID0gMCwgdW5jaGFuZ2VkTmFtZXM6IGl9ID0gZSwgcyA9IG5ldyBFeGlzdGVuY2VGaWx0ZXIociwgaSksIG8gPSBlLnRhcmdldElkO1xuICAgICAgICAgICAgbiA9IG5ldyBfX1BSSVZBVEVfRXhpc3RlbmNlRmlsdGVyQ2hhbmdlKG8sIHMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuO1xufVxuXG5mdW5jdGlvbiB0b011dGF0aW9uKGUsIHQpIHtcbiAgICBsZXQgbjtcbiAgICBpZiAodCBpbnN0YW5jZW9mIF9fUFJJVkFURV9TZXRNdXRhdGlvbikgbiA9IHtcbiAgICAgICAgdXBkYXRlOiBfX1BSSVZBVEVfdG9NdXRhdGlvbkRvY3VtZW50KGUsIHQua2V5LCB0LnZhbHVlKVxuICAgIH07IGVsc2UgaWYgKHQgaW5zdGFuY2VvZiBfX1BSSVZBVEVfRGVsZXRlTXV0YXRpb24pIG4gPSB7XG4gICAgICAgIGRlbGV0ZTogX19QUklWQVRFX3RvTmFtZShlLCB0LmtleSlcbiAgICB9OyBlbHNlIGlmICh0IGluc3RhbmNlb2YgX19QUklWQVRFX1BhdGNoTXV0YXRpb24pIG4gPSB7XG4gICAgICAgIHVwZGF0ZTogX19QUklWQVRFX3RvTXV0YXRpb25Eb2N1bWVudChlLCB0LmtleSwgdC5kYXRhKSxcbiAgICAgICAgdXBkYXRlTWFzazogX19QUklWQVRFX3RvRG9jdW1lbnRNYXNrKHQuZmllbGRNYXNrKVxuICAgIH07IGVsc2Uge1xuICAgICAgICBpZiAoISh0IGluc3RhbmNlb2YgX19QUklWQVRFX1ZlcmlmeU11dGF0aW9uKSkgcmV0dXJuIGZhaWwoKTtcbiAgICAgICAgbiA9IHtcbiAgICAgICAgICAgIHZlcmlmeTogX19QUklWQVRFX3RvTmFtZShlLCB0LmtleSlcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHQuZmllbGRUcmFuc2Zvcm1zLmxlbmd0aCA+IDAgJiYgKG4udXBkYXRlVHJhbnNmb3JtcyA9IHQuZmllbGRUcmFuc2Zvcm1zLm1hcCgoZSA9PiBmdW5jdGlvbiBfX1BSSVZBVEVfdG9GaWVsZFRyYW5zZm9ybShlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSB0LnRyYW5zZm9ybTtcbiAgICAgICAgaWYgKG4gaW5zdGFuY2VvZiBfX1BSSVZBVEVfU2VydmVyVGltZXN0YW1wVHJhbnNmb3JtKSByZXR1cm4ge1xuICAgICAgICAgICAgZmllbGRQYXRoOiB0LmZpZWxkLmNhbm9uaWNhbFN0cmluZygpLFxuICAgICAgICAgICAgc2V0VG9TZXJ2ZXJWYWx1ZTogXCJSRVFVRVNUX1RJTUVcIlxuICAgICAgICB9O1xuICAgICAgICBpZiAobiBpbnN0YW5jZW9mIF9fUFJJVkFURV9BcnJheVVuaW9uVHJhbnNmb3JtT3BlcmF0aW9uKSByZXR1cm4ge1xuICAgICAgICAgICAgZmllbGRQYXRoOiB0LmZpZWxkLmNhbm9uaWNhbFN0cmluZygpLFxuICAgICAgICAgICAgYXBwZW5kTWlzc2luZ0VsZW1lbnRzOiB7XG4gICAgICAgICAgICAgICAgdmFsdWVzOiBuLmVsZW1lbnRzXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGlmIChuIGluc3RhbmNlb2YgX19QUklWQVRFX0FycmF5UmVtb3ZlVHJhbnNmb3JtT3BlcmF0aW9uKSByZXR1cm4ge1xuICAgICAgICAgICAgZmllbGRQYXRoOiB0LmZpZWxkLmNhbm9uaWNhbFN0cmluZygpLFxuICAgICAgICAgICAgcmVtb3ZlQWxsRnJvbUFycmF5OiB7XG4gICAgICAgICAgICAgICAgdmFsdWVzOiBuLmVsZW1lbnRzXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGlmIChuIGluc3RhbmNlb2YgX19QUklWQVRFX051bWVyaWNJbmNyZW1lbnRUcmFuc2Zvcm1PcGVyYXRpb24pIHJldHVybiB7XG4gICAgICAgICAgICBmaWVsZFBhdGg6IHQuZmllbGQuY2Fub25pY2FsU3RyaW5nKCksXG4gICAgICAgICAgICBpbmNyZW1lbnQ6IG4uSWVcbiAgICAgICAgfTtcbiAgICAgICAgdGhyb3cgZmFpbCgpO1xuICAgIH0oMCwgZSkpKSksIHQucHJlY29uZGl0aW9uLmlzTm9uZSB8fCAobi5jdXJyZW50RG9jdW1lbnQgPSBmdW5jdGlvbiBfX1BSSVZBVEVfdG9QcmVjb25kaXRpb24oZSwgdCkge1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSB0LnVwZGF0ZVRpbWUgPyB7XG4gICAgICAgICAgICB1cGRhdGVUaW1lOiBfX1BSSVZBVEVfdG9WZXJzaW9uKGUsIHQudXBkYXRlVGltZSlcbiAgICAgICAgfSA6IHZvaWQgMCAhPT0gdC5leGlzdHMgPyB7XG4gICAgICAgICAgICBleGlzdHM6IHQuZXhpc3RzXG4gICAgICAgIH0gOiBmYWlsKCk7XG4gICAgfShlLCB0LnByZWNvbmRpdGlvbikpLCBuO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZnJvbU11dGF0aW9uKGUsIHQpIHtcbiAgICBjb25zdCBuID0gdC5jdXJyZW50RG9jdW1lbnQgPyBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbVByZWNvbmRpdGlvbihlKSB7XG4gICAgICAgIHJldHVybiB2b2lkIDAgIT09IGUudXBkYXRlVGltZSA/IFByZWNvbmRpdGlvbi51cGRhdGVUaW1lKF9fUFJJVkFURV9mcm9tVmVyc2lvbihlLnVwZGF0ZVRpbWUpKSA6IHZvaWQgMCAhPT0gZS5leGlzdHMgPyBQcmVjb25kaXRpb24uZXhpc3RzKGUuZXhpc3RzKSA6IFByZWNvbmRpdGlvbi5ub25lKCk7XG4gICAgfSh0LmN1cnJlbnREb2N1bWVudCkgOiBQcmVjb25kaXRpb24ubm9uZSgpLCByID0gdC51cGRhdGVUcmFuc2Zvcm1zID8gdC51cGRhdGVUcmFuc2Zvcm1zLm1hcCgodCA9PiBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbUZpZWxkVHJhbnNmb3JtKGUsIHQpIHtcbiAgICAgICAgbGV0IG4gPSBudWxsO1xuICAgICAgICBpZiAoXCJzZXRUb1NlcnZlclZhbHVlXCIgaW4gdCkgX19QUklWQVRFX2hhcmRBc3NlcnQoXCJSRVFVRVNUX1RJTUVcIiA9PT0gdC5zZXRUb1NlcnZlclZhbHVlKSwgXG4gICAgICAgIG4gPSBuZXcgX19QUklWQVRFX1NlcnZlclRpbWVzdGFtcFRyYW5zZm9ybTsgZWxzZSBpZiAoXCJhcHBlbmRNaXNzaW5nRWxlbWVudHNcIiBpbiB0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdC5hcHBlbmRNaXNzaW5nRWxlbWVudHMudmFsdWVzIHx8IFtdO1xuICAgICAgICAgICAgbiA9IG5ldyBfX1BSSVZBVEVfQXJyYXlVbmlvblRyYW5zZm9ybU9wZXJhdGlvbihlKTtcbiAgICAgICAgfSBlbHNlIGlmIChcInJlbW92ZUFsbEZyb21BcnJheVwiIGluIHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0LnJlbW92ZUFsbEZyb21BcnJheS52YWx1ZXMgfHwgW107XG4gICAgICAgICAgICBuID0gbmV3IF9fUFJJVkFURV9BcnJheVJlbW92ZVRyYW5zZm9ybU9wZXJhdGlvbihlKTtcbiAgICAgICAgfSBlbHNlIFwiaW5jcmVtZW50XCIgaW4gdCA/IG4gPSBuZXcgX19QUklWQVRFX051bWVyaWNJbmNyZW1lbnRUcmFuc2Zvcm1PcGVyYXRpb24oZSwgdC5pbmNyZW1lbnQpIDogZmFpbCgpO1xuICAgICAgICBjb25zdCByID0gRmllbGRQYXRoJDEuZnJvbVNlcnZlckZvcm1hdCh0LmZpZWxkUGF0aCk7XG4gICAgICAgIHJldHVybiBuZXcgRmllbGRUcmFuc2Zvcm0ociwgbik7XG4gICAgfShlLCB0KSkpIDogW107XG4gICAgaWYgKHQudXBkYXRlKSB7XG4gICAgICAgIHQudXBkYXRlLm5hbWU7XG4gICAgICAgIGNvbnN0IGkgPSBmcm9tTmFtZShlLCB0LnVwZGF0ZS5uYW1lKSwgcyA9IG5ldyBPYmplY3RWYWx1ZSh7XG4gICAgICAgICAgICBtYXBWYWx1ZToge1xuICAgICAgICAgICAgICAgIGZpZWxkczogdC51cGRhdGUuZmllbGRzXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodC51cGRhdGVNYXNrKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gZnVuY3Rpb24gX19QUklWQVRFX2Zyb21Eb2N1bWVudE1hc2soZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBlLmZpZWxkUGF0aHMgfHwgW107XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBGaWVsZE1hc2sodC5tYXAoKGUgPT4gRmllbGRQYXRoJDEuZnJvbVNlcnZlckZvcm1hdChlKSkpKTtcbiAgICAgICAgICAgIH0odC51cGRhdGVNYXNrKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX1BhdGNoTXV0YXRpb24oaSwgcywgZSwgbiwgcik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfU2V0TXV0YXRpb24oaSwgcywgbiwgcik7XG4gICAgfVxuICAgIGlmICh0LmRlbGV0ZSkge1xuICAgICAgICBjb25zdCByID0gZnJvbU5hbWUoZSwgdC5kZWxldGUpO1xuICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9EZWxldGVNdXRhdGlvbihyLCBuKTtcbiAgICB9XG4gICAgaWYgKHQudmVyaWZ5KSB7XG4gICAgICAgIGNvbnN0IHIgPSBmcm9tTmFtZShlLCB0LnZlcmlmeSk7XG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX1ZlcmlmeU11dGF0aW9uKHIsIG4pO1xuICAgIH1cbiAgICByZXR1cm4gZmFpbCgpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZnJvbVdyaXRlUmVzdWx0cyhlLCB0KSB7XG4gICAgcmV0dXJuIGUgJiYgZS5sZW5ndGggPiAwID8gKF9fUFJJVkFURV9oYXJkQXNzZXJ0KHZvaWQgMCAhPT0gdCksIGUubWFwKChlID0+IGZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tV3JpdGVSZXN1bHQoZSwgdCkge1xuICAgICAgICAvLyBOT1RFOiBEZWxldGVzIGRvbid0IGhhdmUgYW4gdXBkYXRlVGltZS5cbiAgICAgICAgbGV0IG4gPSBlLnVwZGF0ZVRpbWUgPyBfX1BSSVZBVEVfZnJvbVZlcnNpb24oZS51cGRhdGVUaW1lKSA6IF9fUFJJVkFURV9mcm9tVmVyc2lvbih0KTtcbiAgICAgICAgcmV0dXJuIG4uaXNFcXVhbChTbmFwc2hvdFZlcnNpb24ubWluKCkpICYmIChcbiAgICAgICAgLy8gVGhlIEZpcmVzdG9yZSBFbXVsYXRvciBjdXJyZW50bHkgcmV0dXJucyBhbiB1cGRhdGUgdGltZSBvZiAwIGZvclxuICAgICAgICAvLyBkZWxldGVzIG9mIG5vbi1leGlzdGluZyBkb2N1bWVudHMgKHJhdGhlciB0aGFuIG51bGwpLiBUaGlzIGJyZWFrcyB0aGVcbiAgICAgICAgLy8gdGVzdCBcImdldCBkZWxldGVkIGRvYyB3aGlsZSBvZmZsaW5lIHdpdGggc291cmNlPWNhY2hlXCIgYXMgTm9Eb2N1bWVudHNcbiAgICAgICAgLy8gd2l0aCB2ZXJzaW9uIDAgYXJlIGZpbHRlcmVkIGJ5IEluZGV4ZWREYidzIFJlbW90ZURvY3VtZW50Q2FjaGUuXG4gICAgICAgIC8vIFRPRE8oIzIxNDkpOiBSZW1vdmUgdGhpcyB3aGVuIEVtdWxhdG9yIGlzIGZpeGVkXG4gICAgICAgIG4gPSBfX1BSSVZBVEVfZnJvbVZlcnNpb24odCkpLCBuZXcgTXV0YXRpb25SZXN1bHQobiwgZS50cmFuc2Zvcm1SZXN1bHRzIHx8IFtdKTtcbiAgICB9KGUsIHQpKSkpIDogW107XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV90b0RvY3VtZW50c1RhcmdldChlLCB0KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZG9jdW1lbnRzOiBbIF9fUFJJVkFURV90b1F1ZXJ5UGF0aChlLCB0LnBhdGgpIF1cbiAgICB9O1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdG9RdWVyeVRhcmdldChlLCB0KSB7XG4gICAgLy8gRGlzc2VjdCB0aGUgcGF0aCBpbnRvIHBhcmVudCwgY29sbGVjdGlvbklkLCBhbmQgb3B0aW9uYWwga2V5IGZpbHRlci5cbiAgICBjb25zdCBuID0ge1xuICAgICAgICBzdHJ1Y3R1cmVkUXVlcnk6IHt9XG4gICAgfSwgciA9IHQucGF0aDtcbiAgICBudWxsICE9PSB0LmNvbGxlY3Rpb25Hcm91cCA/IChuLnBhcmVudCA9IF9fUFJJVkFURV90b1F1ZXJ5UGF0aChlLCByKSwgbi5zdHJ1Y3R1cmVkUXVlcnkuZnJvbSA9IFsge1xuICAgICAgICBjb2xsZWN0aW9uSWQ6IHQuY29sbGVjdGlvbkdyb3VwLFxuICAgICAgICBhbGxEZXNjZW5kYW50czogITBcbiAgICB9IF0pIDogKG4ucGFyZW50ID0gX19QUklWQVRFX3RvUXVlcnlQYXRoKGUsIHIucG9wTGFzdCgpKSwgbi5zdHJ1Y3R1cmVkUXVlcnkuZnJvbSA9IFsge1xuICAgICAgICBjb2xsZWN0aW9uSWQ6IHIubGFzdFNlZ21lbnQoKVxuICAgIH0gXSk7XG4gICAgY29uc3QgaSA9IGZ1bmN0aW9uIF9fUFJJVkFURV90b0ZpbHRlcnMoZSkge1xuICAgICAgICBpZiAoMCA9PT0gZS5sZW5ndGgpIHJldHVybjtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV90b0ZpbHRlcihDb21wb3NpdGVGaWx0ZXIuY3JlYXRlKGUsIFwiYW5kXCIgLyogQ29tcG9zaXRlT3BlcmF0b3IuQU5EICovKSk7XG4gICAgfSh0LmZpbHRlcnMpO1xuICAgIGkgJiYgKG4uc3RydWN0dXJlZFF1ZXJ5LndoZXJlID0gaSk7XG4gICAgY29uc3QgcyA9IGZ1bmN0aW9uIF9fUFJJVkFURV90b09yZGVyKGUpIHtcbiAgICAgICAgaWYgKDAgPT09IGUubGVuZ3RoKSByZXR1cm47XG4gICAgICAgIHJldHVybiBlLm1hcCgoZSA9PiBcbiAgICAgICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xuICAgICAgICBmdW5jdGlvbiBfX1BSSVZBVEVfdG9Qcm9wZXJ0eU9yZGVyKGUpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZmllbGQ6IF9fUFJJVkFURV90b0ZpZWxkUGF0aFJlZmVyZW5jZShlLmZpZWxkKSxcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb246IF9fUFJJVkFURV90b0RpcmVjdGlvbihlLmRpcilcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0oZSkpKTtcbiAgICB9KHQub3JkZXJCeSk7XG4gICAgcyAmJiAobi5zdHJ1Y3R1cmVkUXVlcnkub3JkZXJCeSA9IHMpO1xuICAgIGNvbnN0IG8gPSBfX1BSSVZBVEVfdG9JbnQzMlByb3RvKGUsIHQubGltaXQpO1xuICAgIHJldHVybiBudWxsICE9PSBvICYmIChuLnN0cnVjdHVyZWRRdWVyeS5saW1pdCA9IG8pLCB0LnN0YXJ0QXQgJiYgKG4uc3RydWN0dXJlZFF1ZXJ5LnN0YXJ0QXQgPSBmdW5jdGlvbiBfX1BSSVZBVEVfdG9TdGFydEF0Q3Vyc29yKGUpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGJlZm9yZTogZS5pbmNsdXNpdmUsXG4gICAgICAgICAgICB2YWx1ZXM6IGUucG9zaXRpb25cbiAgICAgICAgfTtcbiAgICB9KHQuc3RhcnRBdCkpLCB0LmVuZEF0ICYmIChuLnN0cnVjdHVyZWRRdWVyeS5lbmRBdCA9IGZ1bmN0aW9uIF9fUFJJVkFURV90b0VuZEF0Q3Vyc29yKGUpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGJlZm9yZTogIWUuaW5jbHVzaXZlLFxuICAgICAgICAgICAgdmFsdWVzOiBlLnBvc2l0aW9uXG4gICAgICAgIH07XG4gICAgfSh0LmVuZEF0KSksIG47XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9jb252ZXJ0UXVlcnlUYXJnZXRUb1F1ZXJ5KGUpIHtcbiAgICBsZXQgdCA9IF9fUFJJVkFURV9mcm9tUXVlcnlQYXRoKGUucGFyZW50KTtcbiAgICBjb25zdCBuID0gZS5zdHJ1Y3R1cmVkUXVlcnksIHIgPSBuLmZyb20gPyBuLmZyb20ubGVuZ3RoIDogMDtcbiAgICBsZXQgaSA9IG51bGw7XG4gICAgaWYgKHIgPiAwKSB7XG4gICAgICAgIF9fUFJJVkFURV9oYXJkQXNzZXJ0KDEgPT09IHIpO1xuICAgICAgICBjb25zdCBlID0gbi5mcm9tWzBdO1xuICAgICAgICBlLmFsbERlc2NlbmRhbnRzID8gaSA9IGUuY29sbGVjdGlvbklkIDogdCA9IHQuY2hpbGQoZS5jb2xsZWN0aW9uSWQpO1xuICAgIH1cbiAgICBsZXQgcyA9IFtdO1xuICAgIG4ud2hlcmUgJiYgKHMgPSBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbUZpbHRlcnMoZSkge1xuICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX2Zyb21GaWx0ZXIoZSk7XG4gICAgICAgIGlmICh0IGluc3RhbmNlb2YgQ29tcG9zaXRlRmlsdGVyICYmIF9fUFJJVkFURV9jb21wb3NpdGVGaWx0ZXJJc0ZsYXRDb25qdW5jdGlvbih0KSkgcmV0dXJuIHQuZ2V0RmlsdGVycygpO1xuICAgICAgICByZXR1cm4gWyB0IF07XG4gICAgfShuLndoZXJlKSk7XG4gICAgbGV0IG8gPSBbXTtcbiAgICBuLm9yZGVyQnkgJiYgKG8gPSBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbU9yZGVyKGUpIHtcbiAgICAgICAgcmV0dXJuIGUubWFwKChlID0+IGZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tUHJvcGVydHlPcmRlcihlKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IE9yZGVyQnkoX19QUklWQVRFX2Zyb21GaWVsZFBhdGhSZWZlcmVuY2UoZS5maWVsZCksIFxuICAgICAgICAgICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xuICAgICAgICAgICAgZnVuY3Rpb24gX19QUklWQVRFX2Zyb21EaXJlY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgY2FzZSBcIkFTQ0VORElOR1wiOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJhc2NcIiAvKiBEaXJlY3Rpb24uQVNDRU5ESU5HICovO1xuXG4gICAgICAgICAgICAgICAgICBjYXNlIFwiREVTQ0VORElOR1wiOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJkZXNjXCIgLyogRGlyZWN0aW9uLkRFU0NFTkRJTkcgKi87XG5cbiAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyB2aXNpYmxlIGZvciB0ZXN0aW5nXG4gICAgICAgICAgICAoZS5kaXJlY3Rpb24pKTtcbiAgICAgICAgfVxuICAgICAgICAvLyB2aXNpYmxlIGZvciB0ZXN0aW5nXG4gICAgICAgIChlKSkpO1xuICAgIH0obi5vcmRlckJ5KSk7XG4gICAgbGV0IF8gPSBudWxsO1xuICAgIG4ubGltaXQgJiYgKF8gPSBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbUludDMyUHJvdG8oZSkge1xuICAgICAgICBsZXQgdDtcbiAgICAgICAgcmV0dXJuIHQgPSBcIm9iamVjdFwiID09IHR5cGVvZiBlID8gZS52YWx1ZSA6IGUsIF9fUFJJVkFURV9pc051bGxPclVuZGVmaW5lZCh0KSA/IG51bGwgOiB0O1xuICAgIH0obi5saW1pdCkpO1xuICAgIGxldCBhID0gbnVsbDtcbiAgICBuLnN0YXJ0QXQgJiYgKGEgPSBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbVN0YXJ0QXRDdXJzb3IoZSkge1xuICAgICAgICBjb25zdCB0ID0gISFlLmJlZm9yZSwgbiA9IGUudmFsdWVzIHx8IFtdO1xuICAgICAgICByZXR1cm4gbmV3IEJvdW5kKG4sIHQpO1xuICAgIH0obi5zdGFydEF0KSk7XG4gICAgbGV0IHUgPSBudWxsO1xuICAgIHJldHVybiBuLmVuZEF0ICYmICh1ID0gZnVuY3Rpb24gX19QUklWQVRFX2Zyb21FbmRBdEN1cnNvcihlKSB7XG4gICAgICAgIGNvbnN0IHQgPSAhZS5iZWZvcmUsIG4gPSBlLnZhbHVlcyB8fCBbXTtcbiAgICAgICAgcmV0dXJuIG5ldyBCb3VuZChuLCB0KTtcbiAgICB9XG4gICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xuICAgIChuLmVuZEF0KSksIF9fUFJJVkFURV9uZXdRdWVyeSh0LCBpLCBvLCBzLCBfLCBcIkZcIiAvKiBMaW1pdFR5cGUuRmlyc3QgKi8gLCBhLCB1KTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3RvTGlzdGVuUmVxdWVzdExhYmVscyhlLCB0KSB7XG4gICAgY29uc3QgbiA9IGZ1bmN0aW9uIF9fUFJJVkFURV90b0xhYmVsKGUpIHtcbiAgICAgICAgc3dpdGNoIChlKSB7XG4gICAgICAgICAgY2FzZSBcIlRhcmdldFB1cnBvc2VMaXN0ZW5cIiAvKiBUYXJnZXRQdXJwb3NlLkxpc3RlbiAqLyA6XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcblxuICAgICAgICAgIGNhc2UgXCJUYXJnZXRQdXJwb3NlRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2hcIiAvKiBUYXJnZXRQdXJwb3NlLkV4aXN0ZW5jZUZpbHRlck1pc21hdGNoICovIDpcbiAgICAgICAgICAgIHJldHVybiBcImV4aXN0ZW5jZS1maWx0ZXItbWlzbWF0Y2hcIjtcblxuICAgICAgICAgIGNhc2UgXCJUYXJnZXRQdXJwb3NlRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2hCbG9vbVwiIC8qIFRhcmdldFB1cnBvc2UuRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2hCbG9vbSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gXCJleGlzdGVuY2UtZmlsdGVyLW1pc21hdGNoLWJsb29tXCI7XG5cbiAgICAgICAgICBjYXNlIFwiVGFyZ2V0UHVycG9zZUxpbWJvUmVzb2x1dGlvblwiIC8qIFRhcmdldFB1cnBvc2UuTGltYm9SZXNvbHV0aW9uICovIDpcbiAgICAgICAgICAgIHJldHVybiBcImxpbWJvLWRvY3VtZW50XCI7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIGZhaWwoKTtcbiAgICAgICAgfVxuICAgIH0odC5wdXJwb3NlKTtcbiAgICByZXR1cm4gbnVsbCA9PSBuID8gbnVsbCA6IHtcbiAgICAgICAgXCJnb29nLWxpc3Rlbi10YWdzXCI6IG5cbiAgICB9O1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZnJvbUZpbHRlcihlKSB7XG4gICAgcmV0dXJuIHZvaWQgMCAhPT0gZS51bmFyeUZpbHRlciA/IGZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tVW5hcnlGaWx0ZXIoZSkge1xuICAgICAgICBzd2l0Y2ggKGUudW5hcnlGaWx0ZXIub3ApIHtcbiAgICAgICAgICBjYXNlIFwiSVNfTkFOXCI6XG4gICAgICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX2Zyb21GaWVsZFBhdGhSZWZlcmVuY2UoZS51bmFyeUZpbHRlci5maWVsZCk7XG4gICAgICAgICAgICByZXR1cm4gRmllbGRGaWx0ZXIuY3JlYXRlKHQsIFwiPT1cIiAvKiBPcGVyYXRvci5FUVVBTCAqLyAsIHtcbiAgICAgICAgICAgICAgICBkb3VibGVWYWx1ZTogTmFOXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgIGNhc2UgXCJJU19OVUxMXCI6XG4gICAgICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2Zyb21GaWVsZFBhdGhSZWZlcmVuY2UoZS51bmFyeUZpbHRlci5maWVsZCk7XG4gICAgICAgICAgICByZXR1cm4gRmllbGRGaWx0ZXIuY3JlYXRlKG4sIFwiPT1cIiAvKiBPcGVyYXRvci5FUVVBTCAqLyAsIHtcbiAgICAgICAgICAgICAgICBudWxsVmFsdWU6IFwiTlVMTF9WQUxVRVwiXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgIGNhc2UgXCJJU19OT1RfTkFOXCI6XG4gICAgICAgICAgICBjb25zdCByID0gX19QUklWQVRFX2Zyb21GaWVsZFBhdGhSZWZlcmVuY2UoZS51bmFyeUZpbHRlci5maWVsZCk7XG4gICAgICAgICAgICByZXR1cm4gRmllbGRGaWx0ZXIuY3JlYXRlKHIsIFwiIT1cIiAvKiBPcGVyYXRvci5OT1RfRVFVQUwgKi8gLCB7XG4gICAgICAgICAgICAgICAgZG91YmxlVmFsdWU6IE5hTlxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICBjYXNlIFwiSVNfTk9UX05VTExcIjpcbiAgICAgICAgICAgIGNvbnN0IGkgPSBfX1BSSVZBVEVfZnJvbUZpZWxkUGF0aFJlZmVyZW5jZShlLnVuYXJ5RmlsdGVyLmZpZWxkKTtcbiAgICAgICAgICAgIHJldHVybiBGaWVsZEZpbHRlci5jcmVhdGUoaSwgXCIhPVwiIC8qIE9wZXJhdG9yLk5PVF9FUVVBTCAqLyAsIHtcbiAgICAgICAgICAgICAgICBudWxsVmFsdWU6IFwiTlVMTF9WQUxVRVwiXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gZmFpbCgpO1xuICAgICAgICB9XG4gICAgfShlKSA6IHZvaWQgMCAhPT0gZS5maWVsZEZpbHRlciA/IGZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tRmllbGRGaWx0ZXIoZSkge1xuICAgICAgICByZXR1cm4gRmllbGRGaWx0ZXIuY3JlYXRlKF9fUFJJVkFURV9mcm9tRmllbGRQYXRoUmVmZXJlbmNlKGUuZmllbGRGaWx0ZXIuZmllbGQpLCBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbU9wZXJhdG9yTmFtZShlKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgY2FzZSBcIkVRVUFMXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiPT1cIiAvKiBPcGVyYXRvci5FUVVBTCAqLztcblxuICAgICAgICAgICAgICBjYXNlIFwiTk9UX0VRVUFMXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiIT1cIiAvKiBPcGVyYXRvci5OT1RfRVFVQUwgKi87XG5cbiAgICAgICAgICAgICAgY2FzZSBcIkdSRUFURVJfVEhBTlwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcIj5cIiAvKiBPcGVyYXRvci5HUkVBVEVSX1RIQU4gKi87XG5cbiAgICAgICAgICAgICAgY2FzZSBcIkdSRUFURVJfVEhBTl9PUl9FUVVBTFwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcIj49XCIgLyogT3BlcmF0b3IuR1JFQVRFUl9USEFOX09SX0VRVUFMICovO1xuXG4gICAgICAgICAgICAgIGNhc2UgXCJMRVNTX1RIQU5cIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCI8XCIgLyogT3BlcmF0b3IuTEVTU19USEFOICovO1xuXG4gICAgICAgICAgICAgIGNhc2UgXCJMRVNTX1RIQU5fT1JfRVFVQUxcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCI8PVwiIC8qIE9wZXJhdG9yLkxFU1NfVEhBTl9PUl9FUVVBTCAqLztcblxuICAgICAgICAgICAgICBjYXNlIFwiQVJSQVlfQ09OVEFJTlNcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJhcnJheS1jb250YWluc1wiIC8qIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TICovO1xuXG4gICAgICAgICAgICAgIGNhc2UgXCJJTlwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcImluXCIgLyogT3BlcmF0b3IuSU4gKi87XG5cbiAgICAgICAgICAgICAgY2FzZSBcIk5PVF9JTlwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcIm5vdC1pblwiIC8qIE9wZXJhdG9yLk5PVF9JTiAqLztcblxuICAgICAgICAgICAgICBjYXNlIFwiQVJSQVlfQ09OVEFJTlNfQU5ZXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiYXJyYXktY29udGFpbnMtYW55XCIgLyogT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlNfQU5ZICovO1xuXG4gICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhaWwoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfShlLmZpZWxkRmlsdGVyLm9wKSwgZS5maWVsZEZpbHRlci52YWx1ZSk7XG4gICAgfShlKSA6IHZvaWQgMCAhPT0gZS5jb21wb3NpdGVGaWx0ZXIgPyBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbUNvbXBvc2l0ZUZpbHRlcihlKSB7XG4gICAgICAgIHJldHVybiBDb21wb3NpdGVGaWx0ZXIuY3JlYXRlKGUuY29tcG9zaXRlRmlsdGVyLmZpbHRlcnMubWFwKChlID0+IF9fUFJJVkFURV9mcm9tRmlsdGVyKGUpKSksIGZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tQ29tcG9zaXRlT3BlcmF0b3JOYW1lKGUpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoZSkge1xuICAgICAgICAgICAgICBjYXNlIFwiQU5EXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiYW5kXCIgLyogQ29tcG9zaXRlT3BlcmF0b3IuQU5EICovO1xuXG4gICAgICAgICAgICAgIGNhc2UgXCJPUlwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcIm9yXCIgLyogQ29tcG9zaXRlT3BlcmF0b3IuT1IgKi87XG5cbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFpbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KGUuY29tcG9zaXRlRmlsdGVyLm9wKSk7XG4gICAgfShlKSA6IGZhaWwoKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3RvRGlyZWN0aW9uKGUpIHtcbiAgICByZXR1cm4gaGVbZV07XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV90b09wZXJhdG9yTmFtZShlKSB7XG4gICAgcmV0dXJuIFBlW2VdO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdG9Db21wb3NpdGVPcGVyYXRvck5hbWUoZSkge1xuICAgIHJldHVybiBJZVtlXTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3RvRmllbGRQYXRoUmVmZXJlbmNlKGUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBmaWVsZFBhdGg6IGUuY2Fub25pY2FsU3RyaW5nKClcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZnJvbUZpZWxkUGF0aFJlZmVyZW5jZShlKSB7XG4gICAgcmV0dXJuIEZpZWxkUGF0aCQxLmZyb21TZXJ2ZXJGb3JtYXQoZS5maWVsZFBhdGgpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdG9GaWx0ZXIoZSkge1xuICAgIHJldHVybiBlIGluc3RhbmNlb2YgRmllbGRGaWx0ZXIgPyBmdW5jdGlvbiBfX1BSSVZBVEVfdG9VbmFyeU9yRmllbGRGaWx0ZXIoZSkge1xuICAgICAgICBpZiAoXCI9PVwiIC8qIE9wZXJhdG9yLkVRVUFMICovID09PSBlLm9wKSB7XG4gICAgICAgICAgICBpZiAoX19QUklWQVRFX2lzTmFuVmFsdWUoZS52YWx1ZSkpIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdW5hcnlGaWx0ZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGQ6IF9fUFJJVkFURV90b0ZpZWxkUGF0aFJlZmVyZW5jZShlLmZpZWxkKSxcbiAgICAgICAgICAgICAgICAgICAgb3A6IFwiSVNfTkFOXCJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKF9fUFJJVkFURV9pc051bGxWYWx1ZShlLnZhbHVlKSkgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB1bmFyeUZpbHRlcjoge1xuICAgICAgICAgICAgICAgICAgICBmaWVsZDogX19QUklWQVRFX3RvRmllbGRQYXRoUmVmZXJlbmNlKGUuZmllbGQpLFxuICAgICAgICAgICAgICAgICAgICBvcDogXCJJU19OVUxMXCJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2UgaWYgKFwiIT1cIiAvKiBPcGVyYXRvci5OT1RfRVFVQUwgKi8gPT09IGUub3ApIHtcbiAgICAgICAgICAgIGlmIChfX1BSSVZBVEVfaXNOYW5WYWx1ZShlLnZhbHVlKSkgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB1bmFyeUZpbHRlcjoge1xuICAgICAgICAgICAgICAgICAgICBmaWVsZDogX19QUklWQVRFX3RvRmllbGRQYXRoUmVmZXJlbmNlKGUuZmllbGQpLFxuICAgICAgICAgICAgICAgICAgICBvcDogXCJJU19OT1RfTkFOXCJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKF9fUFJJVkFURV9pc051bGxWYWx1ZShlLnZhbHVlKSkgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB1bmFyeUZpbHRlcjoge1xuICAgICAgICAgICAgICAgICAgICBmaWVsZDogX19QUklWQVRFX3RvRmllbGRQYXRoUmVmZXJlbmNlKGUuZmllbGQpLFxuICAgICAgICAgICAgICAgICAgICBvcDogXCJJU19OT1RfTlVMTFwiXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZmllbGRGaWx0ZXI6IHtcbiAgICAgICAgICAgICAgICBmaWVsZDogX19QUklWQVRFX3RvRmllbGRQYXRoUmVmZXJlbmNlKGUuZmllbGQpLFxuICAgICAgICAgICAgICAgIG9wOiBfX1BSSVZBVEVfdG9PcGVyYXRvck5hbWUoZS5vcCksXG4gICAgICAgICAgICAgICAgdmFsdWU6IGUudmFsdWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9KGUpIDogZSBpbnN0YW5jZW9mIENvbXBvc2l0ZUZpbHRlciA/IGZ1bmN0aW9uIF9fUFJJVkFURV90b0NvbXBvc2l0ZUZpbHRlcihlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBlLmdldEZpbHRlcnMoKS5tYXAoKGUgPT4gX19QUklWQVRFX3RvRmlsdGVyKGUpKSk7XG4gICAgICAgIGlmICgxID09PSB0Lmxlbmd0aCkgcmV0dXJuIHRbMF07XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjb21wb3NpdGVGaWx0ZXI6IHtcbiAgICAgICAgICAgICAgICBvcDogX19QUklWQVRFX3RvQ29tcG9zaXRlT3BlcmF0b3JOYW1lKGUub3ApLFxuICAgICAgICAgICAgICAgIGZpbHRlcnM6IHRcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9KGUpIDogZmFpbCgpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdG9Eb2N1bWVudE1hc2soZSkge1xuICAgIGNvbnN0IHQgPSBbXTtcbiAgICByZXR1cm4gZS5maWVsZHMuZm9yRWFjaCgoZSA9PiB0LnB1c2goZS5jYW5vbmljYWxTdHJpbmcoKSkpKSwge1xuICAgICAgICBmaWVsZFBhdGhzOiB0XG4gICAgfTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2lzVmFsaWRSZXNvdXJjZU5hbWUoZSkge1xuICAgIC8vIFJlc291cmNlIG5hbWVzIGhhdmUgYXQgbGVhc3QgNCBjb21wb25lbnRzIChwcm9qZWN0IElELCBkYXRhYmFzZSBJRClcbiAgICByZXR1cm4gZS5sZW5ndGggPj0gNCAmJiBcInByb2plY3RzXCIgPT09IGUuZ2V0KDApICYmIFwiZGF0YWJhc2VzXCIgPT09IGUuZ2V0KDIpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBpbW11dGFibGUgc2V0IG9mIG1ldGFkYXRhIHRoYXQgdGhlIGxvY2FsIHN0b3JlIHRyYWNrcyBmb3IgZWFjaCB0YXJnZXQuXG4gKi8gY2xhc3MgVGFyZ2V0RGF0YSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIFRoZSB0YXJnZXQgYmVpbmcgbGlzdGVuZWQgdG8uICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogVGhlIHRhcmdldCBJRCB0byB3aGljaCB0aGUgdGFyZ2V0IGNvcnJlc3BvbmRzOyBBc3NpZ25lZCBieSB0aGVcbiAgICAgKiBMb2NhbFN0b3JlIGZvciB1c2VyIGxpc3RlbnMgYW5kIGJ5IHRoZSBTeW5jRW5naW5lIGZvciBsaW1ibyB3YXRjaGVzLlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKiBUaGUgcHVycG9zZSBvZiB0aGUgdGFyZ2V0LiAqL1xuICAgIG4sIFxuICAgIC8qKlxuICAgICAqIFRoZSBzZXF1ZW5jZSBudW1iZXIgb2YgdGhlIGxhc3QgdHJhbnNhY3Rpb24gZHVyaW5nIHdoaWNoIHRoaXMgdGFyZ2V0IGRhdGFcbiAgICAgKiB3YXMgbW9kaWZpZWQuXG4gICAgICovXG4gICAgciwgXG4gICAgLyoqIFRoZSBsYXRlc3Qgc25hcHNob3QgdmVyc2lvbiBzZWVuIGZvciB0aGlzIHRhcmdldC4gKi9cbiAgICBpID0gU25hcHNob3RWZXJzaW9uLm1pbigpXG4gICAgLyoqXG4gICAgICogVGhlIG1heGltdW0gc25hcHNob3QgdmVyc2lvbiBhdCB3aGljaCB0aGUgYXNzb2NpYXRlZCB2aWV3XG4gICAgICogY29udGFpbmVkIG5vIGxpbWJvIGRvY3VtZW50cy5cbiAgICAgKi8gLCBzID0gU25hcHNob3RWZXJzaW9uLm1pbigpXG4gICAgLyoqXG4gICAgICogQW4gb3BhcXVlLCBzZXJ2ZXItYXNzaWduZWQgdG9rZW4gdGhhdCBhbGxvd3Mgd2F0Y2hpbmcgYSB0YXJnZXQgdG8gYmVcbiAgICAgKiByZXN1bWVkIGFmdGVyIGRpc2Nvbm5lY3Rpbmcgd2l0aG91dCByZXRyYW5zbWl0dGluZyBhbGwgdGhlIGRhdGEgdGhhdFxuICAgICAqIG1hdGNoZXMgdGhlIHRhcmdldC4gVGhlIHJlc3VtZSB0b2tlbiBlc3NlbnRpYWxseSBpZGVudGlmaWVzIGEgcG9pbnQgaW5cbiAgICAgKiB0aW1lIGZyb20gd2hpY2ggdGhlIHNlcnZlciBzaG91bGQgcmVzdW1lIHNlbmRpbmcgcmVzdWx0cy5cbiAgICAgKi8gLCBvID0gQnl0ZVN0cmluZy5FTVBUWV9CWVRFX1NUUklOR1xuICAgIC8qKlxuICAgICAqIFRoZSBudW1iZXIgb2YgZG9jdW1lbnRzIHRoYXQgbGFzdCBtYXRjaGVkIHRoZSBxdWVyeSBhdCB0aGUgcmVzdW1lIHRva2VuIG9yXG4gICAgICogcmVhZCB0aW1lLiBEb2N1bWVudHMgYXJlIGNvdW50ZWQgb25seSB3aGVuIG1ha2luZyBhIGxpc3RlbiByZXF1ZXN0IHdpdGhcbiAgICAgKiByZXN1bWUgdG9rZW4gb3IgcmVhZCB0aW1lLCBvdGhlcndpc2UsIGtlZXAgaXQgbnVsbC5cbiAgICAgKi8gLCBfID0gbnVsbCkge1xuICAgICAgICB0aGlzLnRhcmdldCA9IGUsIHRoaXMudGFyZ2V0SWQgPSB0LCB0aGlzLnB1cnBvc2UgPSBuLCB0aGlzLnNlcXVlbmNlTnVtYmVyID0gciwgdGhpcy5zbmFwc2hvdFZlcnNpb24gPSBpLCBcbiAgICAgICAgdGhpcy5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uID0gcywgdGhpcy5yZXN1bWVUb2tlbiA9IG8sIHRoaXMuZXhwZWN0ZWRDb3VudCA9IF87XG4gICAgfVxuICAgIC8qKiBDcmVhdGVzIGEgbmV3IHRhcmdldCBkYXRhIGluc3RhbmNlIHdpdGggYW4gdXBkYXRlZCBzZXF1ZW5jZSBudW1iZXIuICovICAgIHdpdGhTZXF1ZW5jZU51bWJlcihlKSB7XG4gICAgICAgIHJldHVybiBuZXcgVGFyZ2V0RGF0YSh0aGlzLnRhcmdldCwgdGhpcy50YXJnZXRJZCwgdGhpcy5wdXJwb3NlLCBlLCB0aGlzLnNuYXBzaG90VmVyc2lvbiwgdGhpcy5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uLCB0aGlzLnJlc3VtZVRva2VuLCB0aGlzLmV4cGVjdGVkQ291bnQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IHRhcmdldCBkYXRhIGluc3RhbmNlIHdpdGggYW4gdXBkYXRlZCByZXN1bWUgdG9rZW4gYW5kXG4gICAgICogc25hcHNob3QgdmVyc2lvbi5cbiAgICAgKi8gICAgd2l0aFJlc3VtZVRva2VuKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBUYXJnZXREYXRhKHRoaXMudGFyZ2V0LCB0aGlzLnRhcmdldElkLCB0aGlzLnB1cnBvc2UsIHRoaXMuc2VxdWVuY2VOdW1iZXIsIHQsIHRoaXMubGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiwgZSwgXG4gICAgICAgIC8qIGV4cGVjdGVkQ291bnQ9ICovIG51bGwpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IHRhcmdldCBkYXRhIGluc3RhbmNlIHdpdGggYW4gdXBkYXRlZCBleHBlY3RlZCBjb3VudC5cbiAgICAgKi8gICAgd2l0aEV4cGVjdGVkQ291bnQoZSkge1xuICAgICAgICByZXR1cm4gbmV3IFRhcmdldERhdGEodGhpcy50YXJnZXQsIHRoaXMudGFyZ2V0SWQsIHRoaXMucHVycG9zZSwgdGhpcy5zZXF1ZW5jZU51bWJlciwgdGhpcy5zbmFwc2hvdFZlcnNpb24sIHRoaXMubGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiwgdGhpcy5yZXN1bWVUb2tlbiwgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgdGFyZ2V0IGRhdGEgaW5zdGFuY2Ugd2l0aCBhbiB1cGRhdGVkIGxhc3QgbGltYm8gZnJlZVxuICAgICAqIHNuYXBzaG90IHZlcnNpb24gbnVtYmVyLlxuICAgICAqLyAgICB3aXRoTGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbihlKSB7XG4gICAgICAgIHJldHVybiBuZXcgVGFyZ2V0RGF0YSh0aGlzLnRhcmdldCwgdGhpcy50YXJnZXRJZCwgdGhpcy5wdXJwb3NlLCB0aGlzLnNlcXVlbmNlTnVtYmVyLCB0aGlzLnNuYXBzaG90VmVyc2lvbiwgZSwgdGhpcy5yZXN1bWVUb2tlbiwgdGhpcy5leHBlY3RlZENvdW50KTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogU2VyaWFsaXplciBmb3IgdmFsdWVzIHN0b3JlZCBpbiB0aGUgTG9jYWxTdG9yZS4gKi8gY2xhc3MgX19QUklWQVRFX0xvY2FsU2VyaWFsaXplciB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLnV0ID0gZTtcbiAgICB9XG59XG5cbi8qKiBEZWNvZGVzIGEgcmVtb3RlIGRvY3VtZW50IGZyb20gc3RvcmFnZSBsb2NhbGx5IHRvIGEgRG9jdW1lbnQuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tRGJSZW1vdGVEb2N1bWVudChlLCB0KSB7XG4gICAgbGV0IG47XG4gICAgaWYgKHQuZG9jdW1lbnQpIG4gPSBfX1BSSVZBVEVfZnJvbURvY3VtZW50KGUudXQsIHQuZG9jdW1lbnQsICEhdC5oYXNDb21taXR0ZWRNdXRhdGlvbnMpOyBlbHNlIGlmICh0Lm5vRG9jdW1lbnQpIHtcbiAgICAgICAgY29uc3QgZSA9IERvY3VtZW50S2V5LmZyb21TZWdtZW50cyh0Lm5vRG9jdW1lbnQucGF0aCksIHIgPSBfX1BSSVZBVEVfZnJvbURiVGltZXN0YW1wKHQubm9Eb2N1bWVudC5yZWFkVGltZSk7XG4gICAgICAgIG4gPSBNdXRhYmxlRG9jdW1lbnQubmV3Tm9Eb2N1bWVudChlLCByKSwgdC5oYXNDb21taXR0ZWRNdXRhdGlvbnMgJiYgbi5zZXRIYXNDb21taXR0ZWRNdXRhdGlvbnMoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoIXQudW5rbm93bkRvY3VtZW50KSByZXR1cm4gZmFpbCgpO1xuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBlID0gRG9jdW1lbnRLZXkuZnJvbVNlZ21lbnRzKHQudW5rbm93bkRvY3VtZW50LnBhdGgpLCByID0gX19QUklWQVRFX2Zyb21EYlRpbWVzdGFtcCh0LnVua25vd25Eb2N1bWVudC52ZXJzaW9uKTtcbiAgICAgICAgICAgIG4gPSBNdXRhYmxlRG9jdW1lbnQubmV3VW5rbm93bkRvY3VtZW50KGUsIHIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0LnJlYWRUaW1lICYmIG4uc2V0UmVhZFRpbWUoZnVuY3Rpb24gX19QUklWQVRFX2Zyb21EYlRpbWVzdGFtcEtleShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBuZXcgVGltZXN0YW1wKGVbMF0sIGVbMV0pO1xuICAgICAgICByZXR1cm4gU25hcHNob3RWZXJzaW9uLmZyb21UaW1lc3RhbXAodCk7XG4gICAgfSh0LnJlYWRUaW1lKSksIG47XG59XG5cbi8qKiBFbmNvZGVzIGEgZG9jdW1lbnQgZm9yIHN0b3JhZ2UgbG9jYWxseS4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3RvRGJSZW1vdGVEb2N1bWVudChlLCB0KSB7XG4gICAgY29uc3QgbiA9IHQua2V5LCByID0ge1xuICAgICAgICBwcmVmaXhQYXRoOiBuLmdldENvbGxlY3Rpb25QYXRoKCkucG9wTGFzdCgpLnRvQXJyYXkoKSxcbiAgICAgICAgY29sbGVjdGlvbkdyb3VwOiBuLmNvbGxlY3Rpb25Hcm91cCxcbiAgICAgICAgZG9jdW1lbnRJZDogbi5wYXRoLmxhc3RTZWdtZW50KCksXG4gICAgICAgIHJlYWRUaW1lOiBfX1BSSVZBVEVfdG9EYlRpbWVzdGFtcEtleSh0LnJlYWRUaW1lKSxcbiAgICAgICAgaGFzQ29tbWl0dGVkTXV0YXRpb25zOiB0Lmhhc0NvbW1pdHRlZE11dGF0aW9uc1xuICAgIH07XG4gICAgaWYgKHQuaXNGb3VuZERvY3VtZW50KCkpIHIuZG9jdW1lbnQgPSBmdW5jdGlvbiBfX1BSSVZBVEVfdG9Eb2N1bWVudChlLCB0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuYW1lOiBfX1BSSVZBVEVfdG9OYW1lKGUsIHQua2V5KSxcbiAgICAgICAgICAgIGZpZWxkczogdC5kYXRhLnZhbHVlLm1hcFZhbHVlLmZpZWxkcyxcbiAgICAgICAgICAgIHVwZGF0ZVRpbWU6IHRvVGltZXN0YW1wKGUsIHQudmVyc2lvbi50b1RpbWVzdGFtcCgpKSxcbiAgICAgICAgICAgIGNyZWF0ZVRpbWU6IHRvVGltZXN0YW1wKGUsIHQuY3JlYXRlVGltZS50b1RpbWVzdGFtcCgpKVxuICAgICAgICB9O1xuICAgIH0oZS51dCwgdCk7IGVsc2UgaWYgKHQuaXNOb0RvY3VtZW50KCkpIHIubm9Eb2N1bWVudCA9IHtcbiAgICAgICAgcGF0aDogbi5wYXRoLnRvQXJyYXkoKSxcbiAgICAgICAgcmVhZFRpbWU6IF9fUFJJVkFURV90b0RiVGltZXN0YW1wKHQudmVyc2lvbilcbiAgICB9OyBlbHNlIHtcbiAgICAgICAgaWYgKCF0LmlzVW5rbm93bkRvY3VtZW50KCkpIHJldHVybiBmYWlsKCk7XG4gICAgICAgIHIudW5rbm93bkRvY3VtZW50ID0ge1xuICAgICAgICAgICAgcGF0aDogbi5wYXRoLnRvQXJyYXkoKSxcbiAgICAgICAgICAgIHZlcnNpb246IF9fUFJJVkFURV90b0RiVGltZXN0YW1wKHQudmVyc2lvbilcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHI7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV90b0RiVGltZXN0YW1wS2V5KGUpIHtcbiAgICBjb25zdCB0ID0gZS50b1RpbWVzdGFtcCgpO1xuICAgIHJldHVybiBbIHQuc2Vjb25kcywgdC5uYW5vc2Vjb25kcyBdO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdG9EYlRpbWVzdGFtcChlKSB7XG4gICAgY29uc3QgdCA9IGUudG9UaW1lc3RhbXAoKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBzZWNvbmRzOiB0LnNlY29uZHMsXG4gICAgICAgIG5hbm9zZWNvbmRzOiB0Lm5hbm9zZWNvbmRzXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2Zyb21EYlRpbWVzdGFtcChlKSB7XG4gICAgY29uc3QgdCA9IG5ldyBUaW1lc3RhbXAoZS5zZWNvbmRzLCBlLm5hbm9zZWNvbmRzKTtcbiAgICByZXR1cm4gU25hcHNob3RWZXJzaW9uLmZyb21UaW1lc3RhbXAodCk7XG59XG5cbi8qKiBFbmNvZGVzIGEgYmF0Y2ggb2YgbXV0YXRpb25zIGludG8gYSBEYk11dGF0aW9uQmF0Y2ggZm9yIGxvY2FsIHN0b3JhZ2UuICovXG4vKiogRGVjb2RlcyBhIERiTXV0YXRpb25CYXRjaCBpbnRvIGEgTXV0YXRpb25CYXRjaCAqL1xuZnVuY3Rpb24gX19QUklWQVRFX2Zyb21EYk11dGF0aW9uQmF0Y2goZSwgdCkge1xuICAgIGNvbnN0IG4gPSAodC5iYXNlTXV0YXRpb25zIHx8IFtdKS5tYXAoKHQgPT4gX19QUklWQVRFX2Zyb21NdXRhdGlvbihlLnV0LCB0KSkpO1xuICAgIC8vIFNxdWFzaCBvbGQgdHJhbnNmb3JtIG11dGF0aW9ucyBpbnRvIGV4aXN0aW5nIHBhdGNoIG9yIHNldCBtdXRhdGlvbnMuXG4gICAgLy8gVGhlIHJlcGxhY2VtZW50IG9mIHJlcHJlc2VudGluZyBgdHJhbnNmb3Jtc2Agd2l0aCBgdXBkYXRlX3RyYW5zZm9ybXNgXG4gICAgLy8gb24gdGhlIFNESyBtZWFucyB0aGF0IG9sZCBgdHJhbnNmb3JtYCBtdXRhdGlvbnMgc3RvcmVkIGluIEluZGV4ZWREQiBuZWVkXG4gICAgLy8gdG8gYmUgdXBkYXRlZCB0byBgdXBkYXRlX3RyYW5zZm9ybXNgLlxuICAgIC8vIFRPRE8oYi8xNzQ2MDgzNzQpOiBSZW1vdmUgdGhpcyBjb2RlIG9uY2Ugd2UgcGVyZm9ybSBhIHNjaGVtYSBtaWdyYXRpb24uXG4gICAgICAgIGZvciAobGV0IGUgPSAwOyBlIDwgdC5tdXRhdGlvbnMubGVuZ3RoIC0gMTsgKytlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0Lm11dGF0aW9uc1tlXTtcbiAgICAgICAgaWYgKGUgKyAxIDwgdC5tdXRhdGlvbnMubGVuZ3RoICYmIHZvaWQgMCAhPT0gdC5tdXRhdGlvbnNbZSArIDFdLnRyYW5zZm9ybSkge1xuICAgICAgICAgICAgY29uc3QgciA9IHQubXV0YXRpb25zW2UgKyAxXTtcbiAgICAgICAgICAgIG4udXBkYXRlVHJhbnNmb3JtcyA9IHIudHJhbnNmb3JtLmZpZWxkVHJhbnNmb3JtcywgdC5tdXRhdGlvbnMuc3BsaWNlKGUgKyAxLCAxKSwgXG4gICAgICAgICAgICArK2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgciA9IHQubXV0YXRpb25zLm1hcCgodCA9PiBfX1BSSVZBVEVfZnJvbU11dGF0aW9uKGUudXQsIHQpKSksIGkgPSBUaW1lc3RhbXAuZnJvbU1pbGxpcyh0LmxvY2FsV3JpdGVUaW1lTXMpO1xuICAgIHJldHVybiBuZXcgTXV0YXRpb25CYXRjaCh0LmJhdGNoSWQsIGksIG4sIHIpO1xufVxuXG4vKiogRGVjb2RlcyBhIERiVGFyZ2V0IGludG8gVGFyZ2V0RGF0YSAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbURiVGFyZ2V0KGUpIHtcbiAgICBjb25zdCB0ID0gX19QUklWQVRFX2Zyb21EYlRpbWVzdGFtcChlLnJlYWRUaW1lKSwgbiA9IHZvaWQgMCAhPT0gZS5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uID8gX19QUklWQVRFX2Zyb21EYlRpbWVzdGFtcChlLmxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24pIDogU25hcHNob3RWZXJzaW9uLm1pbigpO1xuICAgIGxldCByO1xuICAgIHJldHVybiByID0gXG4gICAgLyoqXG4gKiBBIGhlbHBlciBmdW5jdGlvbiBmb3IgZmlndXJpbmcgb3V0IHdoYXQga2luZCBvZiBxdWVyeSBoYXMgYmVlbiBzdG9yZWQuXG4gKi9cbiAgICBmdW5jdGlvbiBfX1BSSVZBVEVfaXNEb2N1bWVudFF1ZXJ5KGUpIHtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gZS5kb2N1bWVudHM7XG4gICAgfVxuICAgIC8qKiBFbmNvZGVzIGEgRGJCdW5kbGUgdG8gYSBCdW5kbGVNZXRhZGF0YSBvYmplY3QuICovIChlLnF1ZXJ5KSA/IGZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tRG9jdW1lbnRzVGFyZ2V0KGUpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9oYXJkQXNzZXJ0KDEgPT09IGUuZG9jdW1lbnRzLmxlbmd0aCksIF9fUFJJVkFURV9xdWVyeVRvVGFyZ2V0KF9fUFJJVkFURV9uZXdRdWVyeUZvclBhdGgoX19QUklWQVRFX2Zyb21RdWVyeVBhdGgoZS5kb2N1bWVudHNbMF0pKSk7XG4gICAgfShlLnF1ZXJ5KSA6IGZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tUXVlcnlUYXJnZXQoZSkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3F1ZXJ5VG9UYXJnZXQoX19QUklWQVRFX2NvbnZlcnRRdWVyeVRhcmdldFRvUXVlcnkoZSkpO1xuICAgIH0oZS5xdWVyeSksIG5ldyBUYXJnZXREYXRhKHIsIGUudGFyZ2V0SWQsIFwiVGFyZ2V0UHVycG9zZUxpc3RlblwiIC8qIFRhcmdldFB1cnBvc2UuTGlzdGVuICovICwgZS5sYXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIsIHQsIG4sIEJ5dGVTdHJpbmcuZnJvbUJhc2U2NFN0cmluZyhlLnJlc3VtZVRva2VuKSk7XG59XG5cbi8qKiBFbmNvZGVzIFRhcmdldERhdGEgaW50byBhIERiVGFyZ2V0IGZvciBzdG9yYWdlIGxvY2FsbHkuICovIGZ1bmN0aW9uIF9fUFJJVkFURV90b0RiVGFyZ2V0KGUsIHQpIHtcbiAgICBjb25zdCBuID0gX19QUklWQVRFX3RvRGJUaW1lc3RhbXAodC5zbmFwc2hvdFZlcnNpb24pLCByID0gX19QUklWQVRFX3RvRGJUaW1lc3RhbXAodC5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uKTtcbiAgICBsZXQgaTtcbiAgICBpID0gX19QUklWQVRFX3RhcmdldElzRG9jdW1lbnRUYXJnZXQodC50YXJnZXQpID8gX19QUklWQVRFX3RvRG9jdW1lbnRzVGFyZ2V0KGUudXQsIHQudGFyZ2V0KSA6IF9fUFJJVkFURV90b1F1ZXJ5VGFyZ2V0KGUudXQsIHQudGFyZ2V0KTtcbiAgICAvLyBXZSBjYW4ndCBzdG9yZSB0aGUgcmVzdW1lVG9rZW4gYXMgYSBCeXRlU3RyaW5nIGluIEluZGV4ZWREYiwgc28gd2VcbiAgICAvLyBjb252ZXJ0IGl0IHRvIGEgYmFzZTY0IHN0cmluZyBmb3Igc3RvcmFnZS5cbiAgICAgICAgY29uc3QgcyA9IHQucmVzdW1lVG9rZW4udG9CYXNlNjQoKTtcbiAgICAvLyBsYXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIgaXMgYWx3YXlzIDAgdW50aWwgd2UgZG8gcmVhbCBHQy5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgdGFyZ2V0SWQ6IHQudGFyZ2V0SWQsXG4gICAgICAgIGNhbm9uaWNhbElkOiBfX1BSSVZBVEVfY2Fub25pZnlUYXJnZXQodC50YXJnZXQpLFxuICAgICAgICByZWFkVGltZTogbixcbiAgICAgICAgcmVzdW1lVG9rZW46IHMsXG4gICAgICAgIGxhc3RMaXN0ZW5TZXF1ZW5jZU51bWJlcjogdC5zZXF1ZW5jZU51bWJlcixcbiAgICAgICAgbGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbjogcixcbiAgICAgICAgcXVlcnk6IGlcbiAgICB9O1xufVxuXG4vKipcbiAqIEVuY29kZXMgYSBgQnVuZGxlZFF1ZXJ5YCBmcm9tIGJ1bmRsZSBwcm90byB0byBhIFF1ZXJ5IG9iamVjdC5cbiAqXG4gKiBUaGlzIHJlY29uc3RydWN0cyB0aGUgb3JpZ2luYWwgcXVlcnkgdXNlZCB0byBidWlsZCB0aGUgYnVuZGxlIGJlaW5nIGxvYWRlZCxcbiAqIGluY2x1ZGluZyBmZWF0dXJlcyBleGlzdHMgb25seSBpbiBTREtzIChmb3IgZXhhbXBsZTogbGltaXQtdG8tbGFzdCkuXG4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tQnVuZGxlZFF1ZXJ5KGUpIHtcbiAgICBjb25zdCB0ID0gX19QUklWQVRFX2NvbnZlcnRRdWVyeVRhcmdldFRvUXVlcnkoe1xuICAgICAgICBwYXJlbnQ6IGUucGFyZW50LFxuICAgICAgICBzdHJ1Y3R1cmVkUXVlcnk6IGUuc3RydWN0dXJlZFF1ZXJ5XG4gICAgfSk7XG4gICAgcmV0dXJuIFwiTEFTVFwiID09PSBlLmxpbWl0VHlwZSA/IF9fUFJJVkFURV9xdWVyeVdpdGhMaW1pdCh0LCB0LmxpbWl0LCBcIkxcIiAvKiBMaW1pdFR5cGUuTGFzdCAqLykgOiB0O1xufVxuXG4vKiogRW5jb2RlcyBhIE5hbWVkUXVlcnkgcHJvdG8gb2JqZWN0IHRvIGEgTmFtZWRRdWVyeSBtb2RlbCBvYmplY3QuICovXG4vKiogRW5jb2RlcyBhIERiRG9jdW1lbnRPdmVybGF5IG9iamVjdCB0byBhbiBPdmVybGF5IG1vZGVsIG9iamVjdC4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tRGJEb2N1bWVudE92ZXJsYXkoZSwgdCkge1xuICAgIHJldHVybiBuZXcgT3ZlcmxheSh0Lmxhcmdlc3RCYXRjaElkLCBfX1BSSVZBVEVfZnJvbU11dGF0aW9uKGUudXQsIHQub3ZlcmxheU11dGF0aW9uKSk7XG59XG5cbi8qKiBEZWNvZGVzIGFuIE92ZXJsYXkgbW9kZWwgb2JqZWN0IGludG8gYSBEYkRvY3VtZW50T3ZlcmxheSBvYmplY3QuICovXG4vKipcbiAqIFJldHVybnMgdGhlIERiRG9jdW1lbnRPdmVybGF5S2V5IGNvcnJlc3BvbmRpbmcgdG8gdGhlIGdpdmVuIHVzZXIgYW5kXG4gKiBkb2N1bWVudCBrZXkuXG4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV90b0RiRG9jdW1lbnRPdmVybGF5S2V5KGUsIHQpIHtcbiAgICBjb25zdCBuID0gdC5wYXRoLmxhc3RTZWdtZW50KCk7XG4gICAgcmV0dXJuIFsgZSwgX19QUklWQVRFX2VuY29kZVJlc291cmNlUGF0aCh0LnBhdGgucG9wTGFzdCgpKSwgbiBdO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdG9EYkluZGV4U3RhdGUoZSwgdCwgbiwgcikge1xuICAgIHJldHVybiB7XG4gICAgICAgIGluZGV4SWQ6IGUsXG4gICAgICAgIHVpZDogdC51aWQgfHwgXCJcIixcbiAgICAgICAgc2VxdWVuY2VOdW1iZXI6IG4sXG4gICAgICAgIHJlYWRUaW1lOiBfX1BSSVZBVEVfdG9EYlRpbWVzdGFtcChyLnJlYWRUaW1lKSxcbiAgICAgICAgZG9jdW1lbnRLZXk6IF9fUFJJVkFURV9lbmNvZGVSZXNvdXJjZVBhdGgoci5kb2N1bWVudEtleS5wYXRoKSxcbiAgICAgICAgbGFyZ2VzdEJhdGNoSWQ6IHIubGFyZ2VzdEJhdGNoSWRcbiAgICB9O1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfSW5kZXhlZERiQnVuZGxlQ2FjaGUge1xuICAgIGdldEJ1bmRsZU1ldGFkYXRhKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9idW5kbGVzU3RvcmUoZSkuZ2V0KHQpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgaWYgKGUpIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbURiQnVuZGxlKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBpZDogZS5idW5kbGVJZCxcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlVGltZTogX19QUklWQVRFX2Zyb21EYlRpbWVzdGFtcChlLmNyZWF0ZVRpbWUpLFxuICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uOiBlLnZlcnNpb25cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqIEVuY29kZXMgYSBCdW5kbGVNZXRhZGF0YSB0byBhIERiQnVuZGxlLiAqLyAoZSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgc2F2ZUJ1bmRsZU1ldGFkYXRhKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9idW5kbGVzU3RvcmUoZSkucHV0KGZ1bmN0aW9uIF9fUFJJVkFURV90b0RiQnVuZGxlKGUpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgYnVuZGxlSWQ6IGUuaWQsXG4gICAgICAgICAgICAgICAgY3JlYXRlVGltZTogX19QUklWQVRFX3RvRGJUaW1lc3RhbXAoX19QUklWQVRFX2Zyb21WZXJzaW9uKGUuY3JlYXRlVGltZSkpLFxuICAgICAgICAgICAgICAgIHZlcnNpb246IGUudmVyc2lvblxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICAvKiogRW5jb2RlcyBhIERiTmFtZWRRdWVyeSB0byBhIE5hbWVkUXVlcnkuICovICh0KSk7XG4gICAgfVxuICAgIGdldE5hbWVkUXVlcnkoZSwgdCkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX25hbWVkUXVlcmllc1N0b3JlKGUpLmdldCh0KS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIGlmIChlKSByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX2Zyb21EYk5hbWVkUXVlcnkoZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGUubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgcXVlcnk6IF9fUFJJVkFURV9mcm9tQnVuZGxlZFF1ZXJ5KGUuYnVuZGxlZFF1ZXJ5KSxcbiAgICAgICAgICAgICAgICAgICAgcmVhZFRpbWU6IF9fUFJJVkFURV9mcm9tRGJUaW1lc3RhbXAoZS5yZWFkVGltZSlcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqIEVuY29kZXMgYSBOYW1lZFF1ZXJ5IGZyb20gYSBidW5kbGUgcHJvdG8gdG8gYSBEYk5hbWVkUXVlcnkuICovIChlKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBzYXZlTmFtZWRRdWVyeShlLCB0KSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfbmFtZWRRdWVyaWVzU3RvcmUoZSkucHV0KGZ1bmN0aW9uIF9fUFJJVkFURV90b0RiTmFtZWRRdWVyeShlKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG5hbWU6IGUubmFtZSxcbiAgICAgICAgICAgICAgICByZWFkVGltZTogX19QUklWQVRFX3RvRGJUaW1lc3RhbXAoX19QUklWQVRFX2Zyb21WZXJzaW9uKGUucmVhZFRpbWUpKSxcbiAgICAgICAgICAgICAgICBidW5kbGVkUXVlcnk6IGUuYnVuZGxlZFF1ZXJ5XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KHQpKTtcbiAgICB9XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBidW5kbGVzIG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfYnVuZGxlc1N0b3JlKGUpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX2dldFN0b3JlKGUsIFwiYnVuZGxlc1wiKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIG5hbWVkUXVlcmllcyBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX25hbWVkUXVlcmllc1N0b3JlKGUpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX2dldFN0b3JlKGUsIFwibmFtZWRRdWVyaWVzXCIpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBJbXBsZW1lbnRhdGlvbiBvZiBEb2N1bWVudE92ZXJsYXlDYWNoZSB1c2luZyBJbmRleGVkRGIuXG4gKi8gY2xhc3MgX19QUklWQVRFX0luZGV4ZWREYkRvY3VtZW50T3ZlcmxheUNhY2hlIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gc2VyaWFsaXplciAtIFRoZSBkb2N1bWVudCBzZXJpYWxpemVyLlxuICAgICAqIEBwYXJhbSB1c2VySWQgLSBUaGUgdXNlcklkIGZvciB3aGljaCB3ZSBhcmUgYWNjZXNzaW5nIG92ZXJsYXlzLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgdGhpcy5zZXJpYWxpemVyID0gZSwgdGhpcy51c2VySWQgPSB0O1xuICAgIH1cbiAgICBzdGF0aWMgY3QoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gdC51aWQgfHwgXCJcIjtcbiAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfSW5kZXhlZERiRG9jdW1lbnRPdmVybGF5Q2FjaGUoZSwgbik7XG4gICAgfVxuICAgIGdldE92ZXJsYXkoZSwgdCkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX2RvY3VtZW50T3ZlcmxheVN0b3JlKGUpLmdldChfX1BSSVZBVEVfdG9EYkRvY3VtZW50T3ZlcmxheUtleSh0aGlzLnVzZXJJZCwgdCkpLm5leHQoKGUgPT4gZSA/IF9fUFJJVkFURV9mcm9tRGJEb2N1bWVudE92ZXJsYXkodGhpcy5zZXJpYWxpemVyLCBlKSA6IG51bGwpKTtcbiAgICB9XG4gICAgZ2V0T3ZlcmxheXMoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX25ld092ZXJsYXlNYXAoKTtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKHQsICh0ID0+IHRoaXMuZ2V0T3ZlcmxheShlLCB0KS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIG51bGwgIT09IGUgJiYgbi5zZXQodCwgZSk7XG4gICAgICAgIH0pKSkpLm5leHQoKCgpID0+IG4pKTtcbiAgICB9XG4gICAgc2F2ZU92ZXJsYXlzKGUsIHQsIG4pIHtcbiAgICAgICAgY29uc3QgciA9IFtdO1xuICAgICAgICByZXR1cm4gbi5mb3JFYWNoKCgobiwgaSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcyA9IG5ldyBPdmVybGF5KHQsIGkpO1xuICAgICAgICAgICAgci5wdXNoKHRoaXMubHQoZSwgcykpO1xuICAgICAgICB9KSksIFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKHIpO1xuICAgIH1cbiAgICByZW1vdmVPdmVybGF5c0ZvckJhdGNoSWQoZSwgdCwgbikge1xuICAgICAgICBjb25zdCByID0gbmV3IFNldDtcbiAgICAgICAgLy8gR2V0IHRoZSBzZXQgb2YgdW5pcXVlIGNvbGxlY3Rpb24gcGF0aHMuXG4gICAgICAgICAgICAgICAgdC5mb3JFYWNoKChlID0+IHIuYWRkKF9fUFJJVkFURV9lbmNvZGVSZXNvdXJjZVBhdGgoZS5nZXRDb2xsZWN0aW9uUGF0aCgpKSkpKTtcbiAgICAgICAgY29uc3QgaSA9IFtdO1xuICAgICAgICByZXR1cm4gci5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBJREJLZXlSYW5nZS5ib3VuZChbIHRoaXMudXNlcklkLCB0LCBuIF0sIFsgdGhpcy51c2VySWQsIHQsIG4gKyAxIF0sIFxuICAgICAgICAgICAgLypsb3dlck9wZW49Ki8gITEsIFxuICAgICAgICAgICAgLyp1cHBlck9wZW49Ki8gITApO1xuICAgICAgICAgICAgaS5wdXNoKF9fUFJJVkFURV9kb2N1bWVudE92ZXJsYXlTdG9yZShlKS5IKFwiY29sbGVjdGlvblBhdGhPdmVybGF5SW5kZXhcIiwgcikpO1xuICAgICAgICB9KSksIFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKGkpO1xuICAgIH1cbiAgICBnZXRPdmVybGF5c0ZvckNvbGxlY3Rpb24oZSwgdCwgbikge1xuICAgICAgICBjb25zdCByID0gX19QUklWQVRFX25ld092ZXJsYXlNYXAoKSwgaSA9IF9fUFJJVkFURV9lbmNvZGVSZXNvdXJjZVBhdGgodCksIHMgPSBJREJLZXlSYW5nZS5ib3VuZChbIHRoaXMudXNlcklkLCBpLCBuIF0sIFsgdGhpcy51c2VySWQsIGksIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSBdLCBcbiAgICAgICAgLypsb3dlck9wZW49Ki8gITApO1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX2RvY3VtZW50T3ZlcmxheVN0b3JlKGUpLlcoXCJjb2xsZWN0aW9uUGF0aE92ZXJsYXlJbmRleFwiLCBzKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiBlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IF9fUFJJVkFURV9mcm9tRGJEb2N1bWVudE92ZXJsYXkodGhpcy5zZXJpYWxpemVyLCB0KTtcbiAgICAgICAgICAgICAgICByLnNldChlLmdldEtleSgpLCBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGdldE92ZXJsYXlzRm9yQ29sbGVjdGlvbkdyb3VwKGUsIHQsIG4sIHIpIHtcbiAgICAgICAgY29uc3QgaSA9IF9fUFJJVkFURV9uZXdPdmVybGF5TWFwKCk7XG4gICAgICAgIGxldCBzO1xuICAgICAgICAvLyBXZSB3YW50IGJhdGNoIElEcyBsYXJnZXIgdGhhbiBgc2luY2VCYXRjaElkYCwgYW5kIHNvIHRoZSBsb3dlciBib3VuZFxuICAgICAgICAvLyBpcyBub3QgaW5jbHVzaXZlLlxuICAgICAgICAgICAgICAgIGNvbnN0IG8gPSBJREJLZXlSYW5nZS5ib3VuZChbIHRoaXMudXNlcklkLCB0LCBuIF0sIFsgdGhpcy51c2VySWQsIHQsIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSBdLCBcbiAgICAgICAgLypsb3dlck9wZW49Ki8gITApO1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX2RvY3VtZW50T3ZlcmxheVN0b3JlKGUpLlkoe1xuICAgICAgICAgICAgaW5kZXg6IFwiY29sbGVjdGlvbkdyb3VwT3ZlcmxheUluZGV4XCIsXG4gICAgICAgICAgICByYW5nZTogb1xuICAgICAgICB9LCAoKGUsIHQsIG4pID0+IHtcbiAgICAgICAgICAgIC8vIFdlIGRvIG5vdCB3YW50IHRvIHJldHVybiBwYXJ0aWFsIGJhdGNoIG92ZXJsYXlzLCBldmVuIGlmIHRoZSBzaXplXG4gICAgICAgICAgICAvLyBvZiB0aGUgcmVzdWx0IHNldCBleGNlZWRzIHRoZSBnaXZlbiBgY291bnRgIGFyZ3VtZW50LiBUaGVyZWZvcmUsIHdlXG4gICAgICAgICAgICAvLyBjb250aW51ZSB0byBhZ2dyZWdhdGUgcmVzdWx0cyBldmVuIGFmdGVyIHRoZSByZXN1bHQgc2l6ZSBleGNlZWRzXG4gICAgICAgICAgICAvLyBgY291bnRgIGlmIHRoZXJlIGFyZSBtb3JlIG92ZXJsYXlzIGZyb20gdGhlIGBjdXJyZW50QmF0Y2hJZGAuXG4gICAgICAgICAgICBjb25zdCBvID0gX19QUklWQVRFX2Zyb21EYkRvY3VtZW50T3ZlcmxheSh0aGlzLnNlcmlhbGl6ZXIsIHQpO1xuICAgICAgICAgICAgaS5zaXplKCkgPCByIHx8IG8ubGFyZ2VzdEJhdGNoSWQgPT09IHMgPyAoaS5zZXQoby5nZXRLZXkoKSwgbyksIHMgPSBvLmxhcmdlc3RCYXRjaElkKSA6IG4uZG9uZSgpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gaSkpO1xuICAgIH1cbiAgICBsdChlLCB0KSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfZG9jdW1lbnRPdmVybGF5U3RvcmUoZSkucHV0KGZ1bmN0aW9uIF9fUFJJVkFURV90b0RiRG9jdW1lbnRPdmVybGF5KGUsIHQsIG4pIHtcbiAgICAgICAgICAgIGNvbnN0IFtyLCBpLCBzXSA9IF9fUFJJVkFURV90b0RiRG9jdW1lbnRPdmVybGF5S2V5KHQsIG4ubXV0YXRpb24ua2V5KTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdXNlcklkOiB0LFxuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25QYXRoOiBpLFxuICAgICAgICAgICAgICAgIGRvY3VtZW50SWQ6IHMsXG4gICAgICAgICAgICAgICAgY29sbGVjdGlvbkdyb3VwOiBuLm11dGF0aW9uLmtleS5nZXRDb2xsZWN0aW9uR3JvdXAoKSxcbiAgICAgICAgICAgICAgICBsYXJnZXN0QmF0Y2hJZDogbi5sYXJnZXN0QmF0Y2hJZCxcbiAgICAgICAgICAgICAgICBvdmVybGF5TXV0YXRpb246IHRvTXV0YXRpb24oZS51dCwgbi5tdXRhdGlvbilcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0odGhpcy5zZXJpYWxpemVyLCB0aGlzLnVzZXJJZCwgdCkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIGRvY3VtZW50IG92ZXJsYXkgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9kb2N1bWVudE92ZXJsYXlTdG9yZShlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9nZXRTdG9yZShlLCBcImRvY3VtZW50T3ZlcmxheXNcIik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBOb3RlOiBUaGlzIGNvZGUgaXMgY29waWVkIGZyb20gdGhlIGJhY2tlbmQuIENvZGUgdGhhdCBpcyBub3QgdXNlZCBieVxuLy8gRmlyZXN0b3JlIHdhcyByZW1vdmVkLlxuLyoqIEZpcmVzdG9yZSBpbmRleCB2YWx1ZSB3cml0ZXIuICAqL1xuY2xhc3MgX19QUklWQVRFX0ZpcmVzdG9yZUluZGV4VmFsdWVXcml0ZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge31cbiAgICAvLyBUaGUgd3JpdGUgbWV0aG9kcyBiZWxvdyBzaG9ydC1jaXJjdWl0IHdyaXRpbmcgdGVybWluYXRvcnMgZm9yIHZhbHVlc1xuICAgIC8vIGNvbnRhaW5pbmcgYSAodGVybWluYXRpbmcpIHRydW5jYXRlZCB2YWx1ZS5cbiAgICAvLyBBcyBhbiBleGFtcGxlLCBjb25zaWRlciB0aGUgcmVzdWx0aW5nIGVuY29kaW5nIGZvcjpcbiAgICAvLyBbXCJiYXJcIiwgWzIsIFwiZm9vXCJdXSAtPiAoU1RSSU5HLCBcImJhclwiLCBURVJNLCBBUlJBWSwgTlVNQkVSLCAyLCBTVFJJTkcsIFwiZm9vXCIsIFRFUk0sIFRFUk0sIFRFUk0pXG4gICAgLy8gW1wiYmFyXCIsIFsyLCB0cnVuY2F0ZWQoXCJmb29cIildXSAtPiAoU1RSSU5HLCBcImJhclwiLCBURVJNLCBBUlJBWSwgTlVNQkVSLCAyLCBTVFJJTkcsIFwiZm9vXCIsIFRSVU5DKVxuICAgIC8vIFtcImJhclwiLCB0cnVuY2F0ZWQoW1wiZm9vXCJdKV0gLT4gKFNUUklORywgXCJiYXJcIiwgVEVSTSwgQVJSQVkuIFNUUklORywgXCJmb29cIiwgVEVSTSwgVFJVTkMpXG4gICAgLyoqIFdyaXRlcyBhbiBpbmRleCB2YWx1ZS4gICovXG4gICAgaHQoZSwgdCkge1xuICAgICAgICB0aGlzLlB0KGUsIHQpLCBcbiAgICAgICAgLy8gV3JpdGUgc2VwYXJhdG9yIHRvIHNwbGl0IGluZGV4IHZhbHVlc1xuICAgICAgICAvLyAoc2VlIGdvL2ZpcmVzdG9yZS1zdG9yYWdlLWZvcm1hdCNlbmNvZGluZ3MpLlxuICAgICAgICB0Lkl0KCk7XG4gICAgfVxuICAgIFB0KGUsIHQpIHtcbiAgICAgICAgaWYgKFwibnVsbFZhbHVlXCIgaW4gZSkgdGhpcy5UdCh0LCA1KTsgZWxzZSBpZiAoXCJib29sZWFuVmFsdWVcIiBpbiBlKSB0aGlzLlR0KHQsIDEwKSwgXG4gICAgICAgIHQuRXQoZS5ib29sZWFuVmFsdWUgPyAxIDogMCk7IGVsc2UgaWYgKFwiaW50ZWdlclZhbHVlXCIgaW4gZSkgdGhpcy5UdCh0LCAxNSksIHQuRXQoX19QUklWQVRFX25vcm1hbGl6ZU51bWJlcihlLmludGVnZXJWYWx1ZSkpOyBlbHNlIGlmIChcImRvdWJsZVZhbHVlXCIgaW4gZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9ub3JtYWxpemVOdW1iZXIoZS5kb3VibGVWYWx1ZSk7XG4gICAgICAgICAgICBpc05hTihuKSA/IHRoaXMuVHQodCwgMTMpIDogKHRoaXMuVHQodCwgMTUpLCBfX1BSSVZBVEVfaXNOZWdhdGl2ZVplcm8obikgPyBcbiAgICAgICAgICAgIC8vIC0wLjAsIDAgYW5kIDAuMCBhcmUgYWxsIGNvbnNpZGVyZWQgdGhlIHNhbWVcbiAgICAgICAgICAgIHQuRXQoMCkgOiB0LkV0KG4pKTtcbiAgICAgICAgfSBlbHNlIGlmIChcInRpbWVzdGFtcFZhbHVlXCIgaW4gZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IGUudGltZXN0YW1wVmFsdWU7XG4gICAgICAgICAgICB0aGlzLlR0KHQsIDIwKSwgXCJzdHJpbmdcIiA9PSB0eXBlb2YgbiA/IHQuZHQobikgOiAodC5kdChgJHtuLnNlY29uZHMgfHwgXCJcIn1gKSwgdC5FdChuLm5hbm9zIHx8IDApKTtcbiAgICAgICAgfSBlbHNlIGlmIChcInN0cmluZ1ZhbHVlXCIgaW4gZSkgdGhpcy5BdChlLnN0cmluZ1ZhbHVlLCB0KSwgdGhpcy5SdCh0KTsgZWxzZSBpZiAoXCJieXRlc1ZhbHVlXCIgaW4gZSkgdGhpcy5UdCh0LCAzMCksIFxuICAgICAgICB0LlZ0KF9fUFJJVkFURV9ub3JtYWxpemVCeXRlU3RyaW5nKGUuYnl0ZXNWYWx1ZSkpLCB0aGlzLlJ0KHQpOyBlbHNlIGlmIChcInJlZmVyZW5jZVZhbHVlXCIgaW4gZSkgdGhpcy5mdChlLnJlZmVyZW5jZVZhbHVlLCB0KTsgZWxzZSBpZiAoXCJnZW9Qb2ludFZhbHVlXCIgaW4gZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IGUuZ2VvUG9pbnRWYWx1ZTtcbiAgICAgICAgICAgIHRoaXMuVHQodCwgNDUpLCB0LkV0KG4ubGF0aXR1ZGUgfHwgMCksIHQuRXQobi5sb25naXR1ZGUgfHwgMCk7XG4gICAgICAgIH0gZWxzZSBcIm1hcFZhbHVlXCIgaW4gZSA/IF9fUFJJVkFURV9pc01heFZhbHVlKGUpID8gdGhpcy5UdCh0LCBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUikgOiAodGhpcy5ndChlLm1hcFZhbHVlLCB0KSwgXG4gICAgICAgIHRoaXMuUnQodCkpIDogXCJhcnJheVZhbHVlXCIgaW4gZSA/ICh0aGlzLnl0KGUuYXJyYXlWYWx1ZSwgdCksIHRoaXMuUnQodCkpIDogZmFpbCgpO1xuICAgIH1cbiAgICBBdChlLCB0KSB7XG4gICAgICAgIHRoaXMuVHQodCwgMjUpLCB0aGlzLnd0KGUsIHQpO1xuICAgIH1cbiAgICB3dChlLCB0KSB7XG4gICAgICAgIHQuZHQoZSk7XG4gICAgfVxuICAgIGd0KGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IGUuZmllbGRzIHx8IHt9O1xuICAgICAgICB0aGlzLlR0KHQsIDU1KTtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIE9iamVjdC5rZXlzKG4pKSB0aGlzLkF0KGUsIHQpLCB0aGlzLlB0KG5bZV0sIHQpO1xuICAgIH1cbiAgICB5dChlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBlLnZhbHVlcyB8fCBbXTtcbiAgICAgICAgdGhpcy5UdCh0LCA1MCk7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiBuKSB0aGlzLlB0KGUsIHQpO1xuICAgIH1cbiAgICBmdChlLCB0KSB7XG4gICAgICAgIHRoaXMuVHQodCwgMzcpO1xuICAgICAgICBEb2N1bWVudEtleS5mcm9tTmFtZShlKS5wYXRoLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgdGhpcy5UdCh0LCA2MCksIHRoaXMud3QoZSwgdCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgVHQoZSwgdCkge1xuICAgICAgICBlLkV0KHQpO1xuICAgIH1cbiAgICBSdChlKSB7XG4gICAgICAgIC8vIFdoaWxlIHRoZSBTREsgZG9lcyBub3QgaW1wbGVtZW50IHRydW5jYXRpb24sIHRoZSB0cnVuY2F0aW9uIG1hcmtlciBpc1xuICAgICAgICAvLyB1c2VkIHRvIHRlcm1pbmF0ZSBhbGwgdmFyaWFibGUgbGVuZ3RoIHZhbHVlcyAod2hpY2ggYXJlIHN0cmluZ3MsIGJ5dGVzLFxuICAgICAgICAvLyByZWZlcmVuY2VzLCBhcnJheXMgYW5kIG1hcHMpLlxuICAgICAgICBlLkV0KDIpO1xuICAgIH1cbn1cblxuX19QUklWQVRFX0ZpcmVzdG9yZUluZGV4VmFsdWVXcml0ZXIuU3QgPSBuZXcgX19QUklWQVRFX0ZpcmVzdG9yZUluZGV4VmFsdWVXcml0ZXI7XG5cbi8qKlxuICogQ291bnRzIHRoZSBudW1iZXIgb2YgemVyb3MgaW4gYSBieXRlLlxuICpcbiAqIFZpc2libGUgZm9yIHRlc3RpbmcuXG4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV9udW1iZXJPZkxlYWRpbmdaZXJvc0luQnl0ZShlKSB7XG4gICAgaWYgKDAgPT09IGUpIHJldHVybiA4O1xuICAgIGxldCB0ID0gMDtcbiAgICByZXR1cm4gZSA+PiA0ID09IDAgJiYgKFxuICAgIC8vIFRlc3QgaWYgdGhlIGZpcnN0IGZvdXIgYml0cyBhcmUgemVyby5cbiAgICB0ICs9IDQsIGUgPDw9IDQpLCBlID4+IDYgPT0gMCAmJiAoXG4gICAgLy8gVGVzdCBpZiB0aGUgZmlyc3QgdHdvIChvciBuZXh0IHR3bykgYml0cyBhcmUgemVyby5cbiAgICB0ICs9IDIsIGUgPDw9IDIpLCBlID4+IDcgPT0gMCAmJiAoXG4gICAgLy8gVGVzdCBpZiB0aGUgcmVtYWluaW5nIGJpdCBpcyB6ZXJvLlxuICAgIHQgKz0gMSksIHQ7XG59XG5cbi8qKiBDb3VudHMgdGhlIG51bWJlciBvZiBsZWFkaW5nIHplcm9zIGluIHRoZSBnaXZlbiBieXRlIGFycmF5LiAqL1xuLyoqXG4gKiBSZXR1cm5zIHRoZSBudW1iZXIgb2YgYnl0ZXMgcmVxdWlyZWQgdG8gc3RvcmUgXCJ2YWx1ZVwiLiBMZWFkaW5nIHplcm8gYnl0ZXNcbiAqIGFyZSBza2lwcGVkLlxuICovXG5mdW5jdGlvbiBfX1BSSVZBVEVfdW5zaWduZWROdW1MZW5ndGgoZSkge1xuICAgIC8vIFRoaXMgaXMganVzdCB0aGUgbnVtYmVyIG9mIGJ5dGVzIGZvciB0aGUgdW5zaWduZWQgcmVwcmVzZW50YXRpb24gb2YgdGhlIG51bWJlci5cbiAgICBjb25zdCB0ID0gNjQgLSBmdW5jdGlvbiBfX1BSSVZBVEVfbnVtYmVyT2ZMZWFkaW5nWmVyb3MoZSkge1xuICAgICAgICBsZXQgdCA9IDA7XG4gICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgODsgKytuKSB7XG4gICAgICAgICAgICBjb25zdCByID0gX19QUklWQVRFX251bWJlck9mTGVhZGluZ1plcm9zSW5CeXRlKDI1NSAmIGVbbl0pO1xuICAgICAgICAgICAgaWYgKHQgKz0gciwgOCAhPT0gcikgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfShlKTtcbiAgICByZXR1cm4gTWF0aC5jZWlsKHQgLyA4KTtcbn1cblxuLyoqXG4gKiBPcmRlcmVkQ29kZVdyaXRlciBpcyBhIG1pbmltYWwtYWxsb2NhdGlvbiBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgd3JpdGluZ1xuICogYmVoYXZpb3IgZGVmaW5lZCBieSB0aGUgYmFja2VuZC5cbiAqXG4gKiBUaGUgY29kZSBpcyBwb3J0ZWQgZnJvbSBpdHMgSmF2YSBjb3VudGVycGFydC5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfT3JkZXJlZENvZGVXcml0ZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KDEwMjQpLCB0aGlzLnBvc2l0aW9uID0gMDtcbiAgICB9XG4gICAgYnQoZSkge1xuICAgICAgICBjb25zdCB0ID0gZVtTeW1ib2wuaXRlcmF0b3JdKCk7XG4gICAgICAgIGxldCBuID0gdC5uZXh0KCk7XG4gICAgICAgIGZvciAoOyFuLmRvbmU7ICkgdGhpcy5EdChuLnZhbHVlKSwgbiA9IHQubmV4dCgpO1xuICAgICAgICB0aGlzLkN0KCk7XG4gICAgfVxuICAgIHZ0KGUpIHtcbiAgICAgICAgY29uc3QgdCA9IGVbU3ltYm9sLml0ZXJhdG9yXSgpO1xuICAgICAgICBsZXQgbiA9IHQubmV4dCgpO1xuICAgICAgICBmb3IgKDshbi5kb25lOyApIHRoaXMuRnQobi52YWx1ZSksIG4gPSB0Lm5leHQoKTtcbiAgICAgICAgdGhpcy5NdCgpO1xuICAgIH1cbiAgICAvKiogV3JpdGVzIHV0ZjggYnl0ZXMgaW50byB0aGlzIGJ5dGUgc2VxdWVuY2UsIGFzY2VuZGluZy4gKi8gICAgeHQoZSkge1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgZSkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHQuY2hhckNvZGVBdCgwKTtcbiAgICAgICAgICAgIGlmIChlIDwgMTI4KSB0aGlzLkR0KGUpOyBlbHNlIGlmIChlIDwgMjA0OCkgdGhpcy5EdCg5NjAgfCBlID4+PiA2KSwgdGhpcy5EdCgxMjggfCA2MyAmIGUpOyBlbHNlIGlmICh0IDwgXCJcXHVkODAwXCIgfHwgXCJcXHVkYmZmXCIgPCB0KSB0aGlzLkR0KDQ4MCB8IGUgPj4+IDEyKSwgXG4gICAgICAgICAgICB0aGlzLkR0KDEyOCB8IDYzICYgZSA+Pj4gNiksIHRoaXMuRHQoMTI4IHwgNjMgJiBlKTsgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHQuY29kZVBvaW50QXQoMCk7XG4gICAgICAgICAgICAgICAgdGhpcy5EdCgyNDAgfCBlID4+PiAxOCksIHRoaXMuRHQoMTI4IHwgNjMgJiBlID4+PiAxMiksIHRoaXMuRHQoMTI4IHwgNjMgJiBlID4+PiA2KSwgXG4gICAgICAgICAgICAgICAgdGhpcy5EdCgxMjggfCA2MyAmIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuQ3QoKTtcbiAgICB9XG4gICAgLyoqIFdyaXRlcyB1dGY4IGJ5dGVzIGludG8gdGhpcyBieXRlIHNlcXVlbmNlLCBkZXNjZW5kaW5nICovICAgIE90KGUpIHtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0LmNoYXJDb2RlQXQoMCk7XG4gICAgICAgICAgICBpZiAoZSA8IDEyOCkgdGhpcy5GdChlKTsgZWxzZSBpZiAoZSA8IDIwNDgpIHRoaXMuRnQoOTYwIHwgZSA+Pj4gNiksIHRoaXMuRnQoMTI4IHwgNjMgJiBlKTsgZWxzZSBpZiAodCA8IFwiXFx1ZDgwMFwiIHx8IFwiXFx1ZGJmZlwiIDwgdCkgdGhpcy5GdCg0ODAgfCBlID4+PiAxMiksIFxuICAgICAgICAgICAgdGhpcy5GdCgxMjggfCA2MyAmIGUgPj4+IDYpLCB0aGlzLkZ0KDEyOCB8IDYzICYgZSk7IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0LmNvZGVQb2ludEF0KDApO1xuICAgICAgICAgICAgICAgIHRoaXMuRnQoMjQwIHwgZSA+Pj4gMTgpLCB0aGlzLkZ0KDEyOCB8IDYzICYgZSA+Pj4gMTIpLCB0aGlzLkZ0KDEyOCB8IDYzICYgZSA+Pj4gNiksIFxuICAgICAgICAgICAgICAgIHRoaXMuRnQoMTI4IHwgNjMgJiBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLk10KCk7XG4gICAgfVxuICAgIE50KGUpIHtcbiAgICAgICAgLy8gVmFsdWVzIGFyZSBlbmNvZGVkIHdpdGggYSBzaW5nbGUgYnl0ZSBsZW5ndGggcHJlZml4LCBmb2xsb3dlZCBieSB0aGVcbiAgICAgICAgLy8gYWN0dWFsIHZhbHVlIGluIGJpZy1lbmRpYW4gZm9ybWF0IHdpdGggbGVhZGluZyAwIGJ5dGVzIGRyb3BwZWQuXG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLkJ0KGUpLCBuID0gX19QUklWQVRFX3Vuc2lnbmVkTnVtTGVuZ3RoKHQpO1xuICAgICAgICB0aGlzLkx0KDEgKyBuKSwgdGhpcy5idWZmZXJbdGhpcy5wb3NpdGlvbisrXSA9IDI1NSAmIG47XG4gICAgICAgIC8vIFdyaXRlIHRoZSBsZW5ndGhcbiAgICAgICAgZm9yIChsZXQgZSA9IHQubGVuZ3RoIC0gbjsgZSA8IHQubGVuZ3RoOyArK2UpIHRoaXMuYnVmZmVyW3RoaXMucG9zaXRpb24rK10gPSAyNTUgJiB0W2VdO1xuICAgIH1cbiAgICBrdChlKSB7XG4gICAgICAgIC8vIFZhbHVlcyBhcmUgZW5jb2RlZCB3aXRoIGEgc2luZ2xlIGJ5dGUgbGVuZ3RoIHByZWZpeCwgZm9sbG93ZWQgYnkgdGhlXG4gICAgICAgIC8vIGludmVydGVkIHZhbHVlIGluIGJpZy1lbmRpYW4gZm9ybWF0IHdpdGggbGVhZGluZyAwIGJ5dGVzIGRyb3BwZWQuXG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLkJ0KGUpLCBuID0gX19QUklWQVRFX3Vuc2lnbmVkTnVtTGVuZ3RoKHQpO1xuICAgICAgICB0aGlzLkx0KDEgKyBuKSwgdGhpcy5idWZmZXJbdGhpcy5wb3NpdGlvbisrXSA9IH4oMjU1ICYgbik7XG4gICAgICAgIC8vIFdyaXRlIHRoZSBsZW5ndGhcbiAgICAgICAgZm9yIChsZXQgZSA9IHQubGVuZ3RoIC0gbjsgZSA8IHQubGVuZ3RoOyArK2UpIHRoaXMuYnVmZmVyW3RoaXMucG9zaXRpb24rK10gPSB+KDI1NSAmIHRbZV0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXcml0ZXMgdGhlIFwiaW5maW5pdHlcIiBieXRlIHNlcXVlbmNlIHRoYXQgc29ydHMgYWZ0ZXIgYWxsIG90aGVyIGJ5dGVcbiAgICAgKiBzZXF1ZW5jZXMgd3JpdHRlbiBpbiBhc2NlbmRpbmcgb3JkZXIuXG4gICAgICovICAgIHF0KCkge1xuICAgICAgICB0aGlzLlF0KDI1NSksIHRoaXMuUXQoMjU1KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV3JpdGVzIHRoZSBcImluZmluaXR5XCIgYnl0ZSBzZXF1ZW5jZSB0aGF0IHNvcnRzIGJlZm9yZSBhbGwgb3RoZXIgYnl0ZVxuICAgICAqIHNlcXVlbmNlcyB3cml0dGVuIGluIGRlc2NlbmRpbmcgb3JkZXIuXG4gICAgICovICAgIEt0KCkge1xuICAgICAgICB0aGlzLiR0KDI1NSksIHRoaXMuJHQoMjU1KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXRzIHRoZSBidWZmZXIgc3VjaCB0aGF0IGl0IGlzIHRoZSBzYW1lIGFzIHdoZW4gaXQgd2FzIG5ld2x5XG4gICAgICogY29uc3RydWN0ZWQuXG4gICAgICovICAgIHJlc2V0KCkge1xuICAgICAgICB0aGlzLnBvc2l0aW9uID0gMDtcbiAgICB9XG4gICAgc2VlZChlKSB7XG4gICAgICAgIHRoaXMuTHQoZS5sZW5ndGgpLCB0aGlzLmJ1ZmZlci5zZXQoZSwgdGhpcy5wb3NpdGlvbiksIHRoaXMucG9zaXRpb24gKz0gZS5sZW5ndGg7XG4gICAgfVxuICAgIC8qKiBNYWtlcyBhIGNvcHkgb2YgdGhlIGVuY29kZWQgYnl0ZXMgaW4gdGhpcyBidWZmZXIuICAqLyAgICBVdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYnVmZmVyLnNsaWNlKDAsIHRoaXMucG9zaXRpb24pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFbmNvZGVzIGB2YWxgIGludG8gYW4gZW5jb2Rpbmcgc28gdGhhdCB0aGUgb3JkZXIgbWF0Y2hlcyB0aGUgSUVFRSA3NTRcbiAgICAgKiBmbG9hdGluZy1wb2ludCBjb21wYXJpc29uIHJlc3VsdHMgd2l0aCB0aGUgZm9sbG93aW5nIGV4Y2VwdGlvbnM6XG4gICAgICogICAtMC4wIDwgMC4wXG4gICAgICogICBhbGwgbm9uLU5hTiA8IE5hTlxuICAgICAqICAgTmFOID0gTmFOXG4gICAgICovICAgIEJ0KGUpIHtcbiAgICAgICAgY29uc3QgdCA9IFxuICAgICAgICAvKiogQ29udmVydHMgYSBKYXZhU2NyaXB0IG51bWJlciB0byBhIGJ5dGUgYXJyYXkgKHVzaW5nIGJpZyBlbmRpYW4gZW5jb2RpbmcpLiAqL1xuICAgICAgICBmdW5jdGlvbiBfX1BSSVZBVEVfZG91YmxlVG9Mb25nQml0cyhlKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gbmV3IERhdGFWaWV3KG5ldyBBcnJheUJ1ZmZlcig4KSk7XG4gICAgICAgICAgICByZXR1cm4gdC5zZXRGbG9hdDY0KDAsIGUsIC8qIGxpdHRsZUVuZGlhbj0gKi8gITEpLCBuZXcgVWludDhBcnJheSh0LmJ1ZmZlcik7XG4gICAgICAgIH0oZSksIG4gPSAwICE9ICgxMjggJiB0WzBdKTtcbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGZpcnN0IGJpdCBpcyBzZXQuIFdlIHVzZSBhIGJpdCBtYXNrIHNpbmNlIHZhbHVlWzBdIGlzXG4gICAgICAgIC8vIGVuY29kZWQgYXMgYSBudW1iZXIgZnJvbSAwIHRvIDI1NS5cbiAgICAgICAgICAgICAgICAvLyBSZXZlcnQgdGhlIHR3byBjb21wbGVtZW50IHRvIGdldCBuYXR1cmFsIG9yZGVyaW5nXG4gICAgICAgIHRbMF0gXj0gbiA/IDI1NSA6IDEyODtcbiAgICAgICAgZm9yIChsZXQgZSA9IDE7IGUgPCB0Lmxlbmd0aDsgKytlKSB0W2VdIF49IG4gPyAyNTUgOiAwO1xuICAgICAgICByZXR1cm4gdDtcbiAgICB9XG4gICAgLyoqIFdyaXRlcyBhIHNpbmdsZSBieXRlIGFzY2VuZGluZyB0byB0aGUgYnVmZmVyLiAqLyAgICBEdChlKSB7XG4gICAgICAgIGNvbnN0IHQgPSAyNTUgJiBlO1xuICAgICAgICAwID09PSB0ID8gKHRoaXMuUXQoMCksIHRoaXMuUXQoMjU1KSkgOiAyNTUgPT09IHQgPyAodGhpcy5RdCgyNTUpLCB0aGlzLlF0KDApKSA6IHRoaXMuUXQodCk7XG4gICAgfVxuICAgIC8qKiBXcml0ZXMgYSBzaW5nbGUgYnl0ZSBkZXNjZW5kaW5nIHRvIHRoZSBidWZmZXIuICAqLyAgICBGdChlKSB7XG4gICAgICAgIGNvbnN0IHQgPSAyNTUgJiBlO1xuICAgICAgICAwID09PSB0ID8gKHRoaXMuJHQoMCksIHRoaXMuJHQoMjU1KSkgOiAyNTUgPT09IHQgPyAodGhpcy4kdCgyNTUpLCB0aGlzLiR0KDApKSA6IHRoaXMuJHQoZSk7XG4gICAgfVxuICAgIEN0KCkge1xuICAgICAgICB0aGlzLlF0KDApLCB0aGlzLlF0KDEpO1xuICAgIH1cbiAgICBNdCgpIHtcbiAgICAgICAgdGhpcy4kdCgwKSwgdGhpcy4kdCgxKTtcbiAgICB9XG4gICAgUXQoZSkge1xuICAgICAgICB0aGlzLkx0KDEpLCB0aGlzLmJ1ZmZlclt0aGlzLnBvc2l0aW9uKytdID0gZTtcbiAgICB9XG4gICAgJHQoZSkge1xuICAgICAgICB0aGlzLkx0KDEpLCB0aGlzLmJ1ZmZlclt0aGlzLnBvc2l0aW9uKytdID0gfmU7XG4gICAgfVxuICAgIEx0KGUpIHtcbiAgICAgICAgY29uc3QgdCA9IGUgKyB0aGlzLnBvc2l0aW9uO1xuICAgICAgICBpZiAodCA8PSB0aGlzLmJ1ZmZlci5sZW5ndGgpIHJldHVybjtcbiAgICAgICAgLy8gVHJ5IGRvdWJsaW5nLlxuICAgICAgICAgICAgICAgIGxldCBuID0gMiAqIHRoaXMuYnVmZmVyLmxlbmd0aDtcbiAgICAgICAgLy8gU3RpbGwgbm90IGJpZyBlbm91Z2g/IEp1c3QgYWxsb2NhdGUgdGhlIHJpZ2h0IHNpemUuXG4gICAgICAgICAgICAgICAgbiA8IHQgJiYgKG4gPSB0KTtcbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBuZXcgYnVmZmVyLlxuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBuZXcgVWludDhBcnJheShuKTtcbiAgICAgICAgci5zZXQodGhpcy5idWZmZXIpLCAvLyBjb3B5IG9sZCBkYXRhXG4gICAgICAgIHRoaXMuYnVmZmVyID0gcjtcbiAgICB9XG59XG5cbmNsYXNzIF9fUFJJVkFURV9Bc2NlbmRpbmdJbmRleEJ5dGVFbmNvZGVyIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMuV3QgPSBlO1xuICAgIH1cbiAgICBWdChlKSB7XG4gICAgICAgIHRoaXMuV3QuYnQoZSk7XG4gICAgfVxuICAgIGR0KGUpIHtcbiAgICAgICAgdGhpcy5XdC54dChlKTtcbiAgICB9XG4gICAgRXQoZSkge1xuICAgICAgICB0aGlzLld0Lk50KGUpO1xuICAgIH1cbiAgICBJdCgpIHtcbiAgICAgICAgdGhpcy5XdC5xdCgpO1xuICAgIH1cbn1cblxuY2xhc3MgX19QUklWQVRFX0Rlc2NlbmRpbmdJbmRleEJ5dGVFbmNvZGVyIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMuV3QgPSBlO1xuICAgIH1cbiAgICBWdChlKSB7XG4gICAgICAgIHRoaXMuV3QudnQoZSk7XG4gICAgfVxuICAgIGR0KGUpIHtcbiAgICAgICAgdGhpcy5XdC5PdChlKTtcbiAgICB9XG4gICAgRXQoZSkge1xuICAgICAgICB0aGlzLld0Lmt0KGUpO1xuICAgIH1cbiAgICBJdCgpIHtcbiAgICAgICAgdGhpcy5XdC5LdCgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBJbXBsZW1lbnRzIGBEaXJlY3Rpb25hbEluZGV4Qnl0ZUVuY29kZXJgIHVzaW5nIGBPcmRlcmVkQ29kZVdyaXRlcmAgZm9yIHRoZVxuICogYWN0dWFsIGVuY29kaW5nLlxuICovIGNsYXNzIF9fUFJJVkFURV9JbmRleEJ5dGVFbmNvZGVyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5XdCA9IG5ldyBfX1BSSVZBVEVfT3JkZXJlZENvZGVXcml0ZXIsIHRoaXMuR3QgPSBuZXcgX19QUklWQVRFX0FzY2VuZGluZ0luZGV4Qnl0ZUVuY29kZXIodGhpcy5XdCksIFxuICAgICAgICB0aGlzLnp0ID0gbmV3IF9fUFJJVkFURV9EZXNjZW5kaW5nSW5kZXhCeXRlRW5jb2Rlcih0aGlzLld0KTtcbiAgICB9XG4gICAgc2VlZChlKSB7XG4gICAgICAgIHRoaXMuV3Quc2VlZChlKTtcbiAgICB9XG4gICAganQoZSkge1xuICAgICAgICByZXR1cm4gMCAvKiBJbmRleEtpbmQuQVNDRU5ESU5HICovID09PSBlID8gdGhpcy5HdCA6IHRoaXMuenQ7XG4gICAgfVxuICAgIFV0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5XdC5VdCgpO1xuICAgIH1cbiAgICByZXNldCgpIHtcbiAgICAgICAgdGhpcy5XdC5yZXNldCgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBSZXByZXNlbnRzIGFuIGluZGV4IGVudHJ5IHNhdmVkIGJ5IHRoZSBTREsgaW4gcGVyc2lzdGVkIHN0b3JhZ2UuICovIGNsYXNzIF9fUFJJVkFURV9JbmRleEVudHJ5IHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuLCByKSB7XG4gICAgICAgIHRoaXMuaW5kZXhJZCA9IGUsIHRoaXMuZG9jdW1lbnRLZXkgPSB0LCB0aGlzLmFycmF5VmFsdWUgPSBuLCB0aGlzLmRpcmVjdGlvbmFsVmFsdWUgPSByO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFuIEluZGV4RW50cnkgZW50cnkgdGhhdCBzb3J0cyBpbW1lZGlhdGVseSBhZnRlciB0aGUgY3VycmVudFxuICAgICAqIGRpcmVjdGlvbmFsIHZhbHVlLlxuICAgICAqLyAgICBIdCgpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuZGlyZWN0aW9uYWxWYWx1ZS5sZW5ndGgsIHQgPSAwID09PSBlIHx8IDI1NSA9PT0gdGhpcy5kaXJlY3Rpb25hbFZhbHVlW2UgLSAxXSA/IGUgKyAxIDogZSwgbiA9IG5ldyBVaW50OEFycmF5KHQpO1xuICAgICAgICByZXR1cm4gbi5zZXQodGhpcy5kaXJlY3Rpb25hbFZhbHVlLCAwKSwgdCAhPT0gZSA/IG4uc2V0KFsgMCBdLCB0aGlzLmRpcmVjdGlvbmFsVmFsdWUubGVuZ3RoKSA6ICsrbltuLmxlbmd0aCAtIDFdLCBcbiAgICAgICAgbmV3IF9fUFJJVkFURV9JbmRleEVudHJ5KHRoaXMuaW5kZXhJZCwgdGhpcy5kb2N1bWVudEtleSwgdGhpcy5hcnJheVZhbHVlLCBuKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9pbmRleEVudHJ5Q29tcGFyYXRvcihlLCB0KSB7XG4gICAgbGV0IG4gPSBlLmluZGV4SWQgLSB0LmluZGV4SWQ7XG4gICAgcmV0dXJuIDAgIT09IG4gPyBuIDogKG4gPSBfX1BSSVZBVEVfY29tcGFyZUJ5dGVBcnJheXMoZS5hcnJheVZhbHVlLCB0LmFycmF5VmFsdWUpLCBcbiAgICAwICE9PSBuID8gbiA6IChuID0gX19QUklWQVRFX2NvbXBhcmVCeXRlQXJyYXlzKGUuZGlyZWN0aW9uYWxWYWx1ZSwgdC5kaXJlY3Rpb25hbFZhbHVlKSwgXG4gICAgMCAhPT0gbiA/IG4gOiBEb2N1bWVudEtleS5jb21wYXJhdG9yKGUuZG9jdW1lbnRLZXksIHQuZG9jdW1lbnRLZXkpKSk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9jb21wYXJlQnl0ZUFycmF5cyhlLCB0KSB7XG4gICAgZm9yIChsZXQgbiA9IDA7IG4gPCBlLmxlbmd0aCAmJiBuIDwgdC5sZW5ndGg7ICsrbikge1xuICAgICAgICBjb25zdCByID0gZVtuXSAtIHRbbl07XG4gICAgICAgIGlmICgwICE9PSByKSByZXR1cm4gcjtcbiAgICB9XG4gICAgcmV0dXJuIGUubGVuZ3RoIC0gdC5sZW5ndGg7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgbGlnaHQgcXVlcnkgcGxhbm5lciBmb3IgRmlyZXN0b3JlLlxuICpcbiAqIFRoaXMgY2xhc3MgbWF0Y2hlcyBhIGBGaWVsZEluZGV4YCBhZ2FpbnN0IGEgRmlyZXN0b3JlIFF1ZXJ5IGBUYXJnZXRgLiBJdFxuICogZGV0ZXJtaW5lcyB3aGV0aGVyIGEgZ2l2ZW4gaW5kZXggY2FuIGJlIHVzZWQgdG8gc2VydmUgdGhlIHNwZWNpZmllZCB0YXJnZXQuXG4gKlxuICogVGhlIGZvbGxvd2luZyB0YWJsZSBzaG93Y2FzZXMgc29tZSBwb3NzaWJsZSBpbmRleCBjb25maWd1cmF0aW9uczpcbiAqXG4gKiBRdWVyeSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBJbmRleFxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIHdoZXJlKCdhJywgJz09JywgJ2EnKS53aGVyZSgnYicsICc9PScsICdiJykgICAgICAgICB8IGEgQVNDLCBiIERFU0NcbiAqIHdoZXJlKCdhJywgJz09JywgJ2EnKS53aGVyZSgnYicsICc9PScsICdiJykgICAgICAgICB8IGEgQVNDXG4gKiB3aGVyZSgnYScsICc9PScsICdhJykud2hlcmUoJ2InLCAnPT0nLCAnYicpICAgICAgICAgfCBiIERFU0NcbiAqIHdoZXJlKCdhJywgJz49JywgJ2EnKS5vcmRlckJ5KCdhJykgICAgICAgICAgICAgICAgICB8IGEgQVNDXG4gKiB3aGVyZSgnYScsICc+PScsICdhJykub3JkZXJCeSgnYScsICdkZXNjJykgICAgICAgICAgfCBhIERFU0NcbiAqIHdoZXJlKCdhJywgJz49JywgJ2EnKS5vcmRlckJ5KCdhJykub3JkZXJCeSgnYicpICAgICB8IGEgQVNDLCBiIEFTQ1xuICogd2hlcmUoJ2EnLCAnPj0nLCAnYScpLm9yZGVyQnkoJ2EnKS5vcmRlckJ5KCdiJykgICAgIHwgYSBBU0NcbiAqIHdoZXJlKCdhJywgJ2FycmF5LWNvbnRhaW5zJywgJ2EnKS5vcmRlckJ5KCdiJykgICAgICB8IGEgQ09OVEFJTlMsIGIgQVNDRU5ESU5HXG4gKiB3aGVyZSgnYScsICdhcnJheS1jb250YWlucycsICdhJykub3JkZXJCeSgnYicpICAgICAgfCBhIENPTlRBSU5TXG4gKi8gY2xhc3MgX19QUklWQVRFX1RhcmdldEluZGV4TWF0Y2hlciB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICAvLyBUaGUgaW5lcXVhbGl0eSBmaWx0ZXJzIG9mIHRoZSB0YXJnZXQgKGlmIGl0IGV4aXN0cykuXG4gICAgICAgIC8vIE5vdGU6IFRoZSBzb3J0IG9uIEZpZWxkRmlsdGVycyBpcyBub3QgcmVxdWlyZWQuIFVzaW5nIFNvcnRlZFNldCBoZXJlIGp1c3QgdG8gdXRpbGl6ZSB0aGUgY3VzdG9tXG4gICAgICAgIC8vIGNvbXBhcmF0b3IuXG4gICAgICAgIHRoaXMuSnQgPSBuZXcgU29ydGVkU2V0KCgoZSwgdCkgPT4gRmllbGRQYXRoJDEuY29tcGFyYXRvcihlLmZpZWxkLCB0LmZpZWxkKSkpLCB0aGlzLmNvbGxlY3Rpb25JZCA9IG51bGwgIT0gZS5jb2xsZWN0aW9uR3JvdXAgPyBlLmNvbGxlY3Rpb25Hcm91cCA6IGUucGF0aC5sYXN0U2VnbWVudCgpLCBcbiAgICAgICAgdGhpcy5ZdCA9IGUub3JkZXJCeSwgdGhpcy5adCA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgZS5maWx0ZXJzKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdDtcbiAgICAgICAgICAgIGUuaXNJbmVxdWFsaXR5KCkgPyB0aGlzLkp0ID0gdGhpcy5KdC5hZGQoZSkgOiB0aGlzLlp0LnB1c2goZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IFh0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5KdC5zaXplID4gMTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBpbmRleCBjYW4gYmUgdXNlZCB0byBzZXJ2ZSB0aGUgVGFyZ2V0SW5kZXhNYXRjaGVyJ3NcbiAgICAgKiB0YXJnZXQuXG4gICAgICpcbiAgICAgKiBBbiBpbmRleCBpcyBjb25zaWRlcmVkIGNhcGFibGUgb2Ygc2VydmluZyB0aGUgdGFyZ2V0IHdoZW46XG4gICAgICogLSBUaGUgdGFyZ2V0IHVzZXMgYWxsIGluZGV4IHNlZ21lbnRzIGZvciBpdHMgZmlsdGVycyBhbmQgb3JkZXJCeSBjbGF1c2VzLlxuICAgICAqICAgVGhlIHRhcmdldCBjYW4gaGF2ZSBhZGRpdGlvbmFsIGZpbHRlciBhbmQgb3JkZXJCeSBjbGF1c2VzLCBidXQgbm90XG4gICAgICogICBmZXdlci5cbiAgICAgKiAtIElmIGFuIEFycmF5Q29udGFpbnMvQXJyYXlDb250YWluc0FueWZpbHRlciBpcyB1c2VkLCB0aGUgaW5kZXggbXVzdCBhbHNvXG4gICAgICogICBoYXZlIGEgY29ycmVzcG9uZGluZyBgQ09OVEFJTlNgIHNlZ21lbnQuXG4gICAgICogLSBBbGwgZGlyZWN0aW9uYWwgaW5kZXggc2VnbWVudHMgY2FuIGJlIG1hcHBlZCB0byB0aGUgdGFyZ2V0IGFzIGEgc2VyaWVzIG9mXG4gICAgICogICBlcXVhbGl0eSBmaWx0ZXJzLCBhIHNpbmdsZSBpbmVxdWFsaXR5IGZpbHRlciBhbmQgYSBzZXJpZXMgb2Ygb3JkZXJCeVxuICAgICAqICAgY2xhdXNlcy5cbiAgICAgKiAtIFRoZSBzZWdtZW50cyB0aGF0IHJlcHJlc2VudCB0aGUgZXF1YWxpdHkgZmlsdGVycyBtYXkgYXBwZWFyIG91dCBvZiBvcmRlci5cbiAgICAgKiAtIFRoZSBvcHRpb25hbCBzZWdtZW50IGZvciB0aGUgaW5lcXVhbGl0eSBmaWx0ZXIgbXVzdCBhcHBlYXIgYWZ0ZXIgYWxsXG4gICAgICogICBlcXVhbGl0eSBzZWdtZW50cy5cbiAgICAgKiAtIFRoZSBzZWdtZW50cyB0aGF0IHJlcHJlc2VudCB0aGF0IG9yZGVyQnkgY2xhdXNlIG9mIHRoZSB0YXJnZXQgbXVzdCBhcHBlYXJcbiAgICAgKiAgIGluIG9yZGVyIGFmdGVyIGFsbCBlcXVhbGl0eSBhbmQgaW5lcXVhbGl0eSBzZWdtZW50cy4gU2luZ2xlIG9yZGVyQnlcbiAgICAgKiAgIGNsYXVzZXMgY2Fubm90IGJlIHNraXBwZWQsIGJ1dCBhIGNvbnRpbnVvdXMgb3JkZXJCeSBzdWZmaXggbWF5IGJlXG4gICAgICogICBvbWl0dGVkLlxuICAgICAqLyAgICBlbihlKSB7XG4gICAgICAgIGlmIChfX1BSSVZBVEVfaGFyZEFzc2VydChlLmNvbGxlY3Rpb25Hcm91cCA9PT0gdGhpcy5jb2xsZWN0aW9uSWQpLCB0aGlzLlh0KSBcbiAgICAgICAgLy8gT25seSBzaW5nbGUgaW5lcXVhbGl0eSBpcyBzdXBwb3J0ZWQgZm9yIG5vdy5cbiAgICAgICAgLy8gVE9ETyhBZGQgc3VwcG9ydCBmb3IgbXVsdGlwbGUgaW5lcXVhbGl0eSBxdWVyeSk6IGIvMjk4NDQxMDQzXG4gICAgICAgIHJldHVybiAhMTtcbiAgICAgICAgLy8gSWYgdGhlcmUgaXMgYW4gYXJyYXkgZWxlbWVudCwgZmluZCBhIG1hdGNoaW5nIGZpbHRlci5cbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX2ZpZWxkSW5kZXhHZXRBcnJheVNlZ21lbnQoZSk7XG4gICAgICAgIGlmICh2b2lkIDAgIT09IHQgJiYgIXRoaXMudG4odCkpIHJldHVybiAhMTtcbiAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9maWVsZEluZGV4R2V0RGlyZWN0aW9uYWxTZWdtZW50cyhlKTtcbiAgICAgICAgbGV0IHIgPSBuZXcgU2V0LCBpID0gMCwgcyA9IDA7XG4gICAgICAgIC8vIFByb2Nlc3MgYWxsIGVxdWFsaXRpZXMgZmlyc3QuIEVxdWFsaXRpZXMgY2FuIGFwcGVhciBvdXQgb2Ygb3JkZXIuXG4gICAgICAgIGZvciAoO2kgPCBuLmxlbmd0aCAmJiB0aGlzLnRuKG5baV0pOyArK2kpIHIgPSByLmFkZChuW2ldLmZpZWxkUGF0aC5jYW5vbmljYWxTdHJpbmcoKSk7XG4gICAgICAgIC8vIElmIHdlIGFscmVhZHkgaGF2ZSBwcm9jZXNzZWQgYWxsIHNlZ21lbnRzLCBhbGwgc2VnbWVudHMgYXJlIHVzZWQgdG8gc2VydmVcbiAgICAgICAgLy8gdGhlIGVxdWFsaXR5IGZpbHRlcnMgYW5kIHdlIGRvIG5vdCBuZWVkIHRvIG1hcCBhbnkgc2VnbWVudHMgdG8gdGhlXG4gICAgICAgIC8vIHRhcmdldCdzIGluZXF1YWxpdHkgYW5kIG9yZGVyQnkgY2xhdXNlcy5cbiAgICAgICAgICAgICAgICBpZiAoaSA9PT0gbi5sZW5ndGgpIHJldHVybiAhMDtcbiAgICAgICAgaWYgKHRoaXMuSnQuc2l6ZSA+IDApIHtcbiAgICAgICAgICAgIC8vIE9ubHkgYSBzaW5nbGUgaW5lcXVhbGl0eSBpcyBjdXJyZW50bHkgc3VwcG9ydGVkLiBHZXQgdGhlIG9ubHkgZW50cnkgaW4gdGhlIHNldC5cbiAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLkp0LmdldEl0ZXJhdG9yKCkuZ2V0TmV4dCgpO1xuICAgICAgICAgICAgLy8gSWYgdGhlcmUgaXMgYW4gaW5lcXVhbGl0eSBmaWx0ZXIgYW5kIHRoZSBmaWVsZCB3YXMgbm90IGluIG9uZSBvZiB0aGVcbiAgICAgICAgICAgIC8vIGVxdWFsaXR5IGZpbHRlcnMgYWJvdmUsIHRoZSBuZXh0IHNlZ21lbnQgbXVzdCBtYXRjaCBib3RoIHRoZSBmaWx0ZXJcbiAgICAgICAgICAgIC8vIGFuZCB0aGUgZmlyc3Qgb3JkZXJCeSBjbGF1c2UuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXIuaGFzKGUuZmllbGQuY2Fub25pY2FsU3RyaW5nKCkpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IG5baV07XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLm5uKGUsIHQpIHx8ICF0aGlzLnJuKHRoaXMuWXRbcysrXSwgdCkpIHJldHVybiAhMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICsraTtcbiAgICAgICAgfVxuICAgICAgICAvLyBBbGwgcmVtYWluaW5nIHNlZ21lbnRzIG5lZWQgdG8gcmVwcmVzZW50IHRoZSBwcmVmaXggb2YgdGhlIHRhcmdldCdzXG4gICAgICAgIC8vIG9yZGVyQnkuXG4gICAgICAgICAgICAgICAgZm9yICg7aSA8IG4ubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBuW2ldO1xuICAgICAgICAgICAgaWYgKHMgPj0gdGhpcy5ZdC5sZW5ndGggfHwgIXRoaXMucm4odGhpcy5ZdFtzKytdLCBlKSkgcmV0dXJuICExO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGZ1bGwgbWF0Y2hlZCBmaWVsZCBpbmRleCBmb3IgdGhpcyB0YXJnZXQuIEN1cnJlbnRseSBtdWx0aXBsZVxuICAgICAqIGluZXF1YWxpdHkgcXVlcnkgaXMgbm90IHN1cHBvcnRlZCBzbyBmdW5jdGlvbiByZXR1cm5zIG51bGwuXG4gICAgICovICAgIHNuKCkge1xuICAgICAgICBpZiAodGhpcy5YdCkgcmV0dXJuIG51bGw7XG4gICAgICAgIC8vIFdlIHdhbnQgdG8gbWFrZSBzdXJlIG9ubHkgb25lIHNlZ21lbnQgY3JlYXRlZCBmb3Igb25lIGZpZWxkLiBGb3IgZXhhbXBsZSxcbiAgICAgICAgLy8gaW4gY2FzZSBsaWtlIGEgPT0gMyBhbmQgYSA+IDIsIEluZGV4IHthIEFTQ0VORElOR30gd2lsbCBvbmx5IGJlIGNyZWF0ZWRcbiAgICAgICAgLy8gb25jZS5cbiAgICAgICAgICAgICAgICBsZXQgZSA9IG5ldyBTb3J0ZWRTZXQoRmllbGRQYXRoJDEuY29tcGFyYXRvcik7XG4gICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBuIG9mIHRoaXMuWnQpIHtcbiAgICAgICAgICAgIGlmIChuLmZpZWxkLmlzS2V5RmllbGQoKSkgY29udGludWU7XG4gICAgICAgICAgICBpZiAoXCJhcnJheS1jb250YWluc1wiIC8qIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TICovID09PSBuLm9wIHx8IFwiYXJyYXktY29udGFpbnMtYW55XCIgLyogT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlNfQU5ZICovID09PSBuLm9wKSB0LnB1c2gobmV3IEluZGV4U2VnbWVudChuLmZpZWxkLCAyIC8qIEluZGV4S2luZC5DT05UQUlOUyAqLykpOyBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoZS5oYXMobi5maWVsZCkpIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGUgPSBlLmFkZChuLmZpZWxkKSwgdC5wdXNoKG5ldyBJbmRleFNlZ21lbnQobi5maWVsZCwgMCAvKiBJbmRleEtpbmQuQVNDRU5ESU5HICovKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gTm90ZTogV2UgZG8gbm90IGV4cGxpY2l0bHkgY2hlY2sgYHRoaXMuaW5lcXVhbGl0eUZpbHRlcmAgYnV0IHJhdGhlciByZWx5XG4gICAgICAgIC8vIG9uIHRoZSB0YXJnZXQgZGVmaW5pbmcgYW4gYXBwcm9wcmlhdGUgXCJvcmRlciBieVwiIHRvIGVuc3VyZSB0aGF0IHRoZVxuICAgICAgICAvLyByZXF1aXJlZCBpbmRleCBzZWdtZW50IGlzIGFkZGVkLiBUaGUgcXVlcnkgZW5naW5lIHdvdWxkIHJlamVjdCBhIHF1ZXJ5XG4gICAgICAgIC8vIHdpdGggYW4gaW5lcXVhbGl0eSBmaWx0ZXIgdGhhdCBsYWNrcyB0aGUgcmVxdWlyZWQgb3JkZXItYnkgY2xhdXNlLlxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbiBvZiB0aGlzLll0KSBcbiAgICAgICAgLy8gU3RvcCBhZGRpbmcgbW9yZSBzZWdtZW50cyBpZiB3ZSBzZWUgYSBvcmRlci1ieSBvbiBrZXkuIFR5cGljYWxseSB0aGlzXG4gICAgICAgIC8vIGlzIHRoZSBkZWZhdWx0IGltcGxpY2l0IG9yZGVyLWJ5IHdoaWNoIGlzIGNvdmVyZWQgaW4gdGhlIGluZGV4X2VudHJ5XG4gICAgICAgIC8vIHRhYmxlIGFzIGEgc2VwYXJhdGUgY29sdW1uLiBJZiBpdCBpcyBub3QgdGhlIGRlZmF1bHQgb3JkZXItYnksIHRoZVxuICAgICAgICAvLyBnZW5lcmF0ZWQgaW5kZXggd2lsbCBiZSBtaXNzaW5nIHNvbWUgc2VnbWVudHMgb3B0aW1pemVkIGZvciBvcmRlci1ieXMsXG4gICAgICAgIC8vIHdoaWNoIGlzIHByb2JhYmx5IGZpbmUuXG4gICAgICAgIG4uZmllbGQuaXNLZXlGaWVsZCgpIHx8IGUuaGFzKG4uZmllbGQpIHx8IChlID0gZS5hZGQobi5maWVsZCksIHQucHVzaChuZXcgSW5kZXhTZWdtZW50KG4uZmllbGQsIFwiYXNjXCIgLyogRGlyZWN0aW9uLkFTQ0VORElORyAqLyA9PT0gbi5kaXIgPyAwIC8qIEluZGV4S2luZC5BU0NFTkRJTkcgKi8gOiAxIC8qIEluZGV4S2luZC5ERVNDRU5ESU5HICovKSkpO1xuICAgICAgICByZXR1cm4gbmV3IEZpZWxkSW5kZXgoRmllbGRJbmRleC5VTktOT1dOX0lELCB0aGlzLmNvbGxlY3Rpb25JZCwgdCwgSW5kZXhTdGF0ZS5lbXB0eSgpKTtcbiAgICB9XG4gICAgdG4oZSkge1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgdGhpcy5adCkgaWYgKHRoaXMubm4odCwgZSkpIHJldHVybiAhMDtcbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgICBubihlLCB0KSB7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IGUgfHwgIWUuZmllbGQuaXNFcXVhbCh0LmZpZWxkUGF0aCkpIHJldHVybiAhMTtcbiAgICAgICAgY29uc3QgbiA9IFwiYXJyYXktY29udGFpbnNcIiAvKiBPcGVyYXRvci5BUlJBWV9DT05UQUlOUyAqLyA9PT0gZS5vcCB8fCBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TX0FOWSAqLyA9PT0gZS5vcDtcbiAgICAgICAgcmV0dXJuIDIgLyogSW5kZXhLaW5kLkNPTlRBSU5TICovID09PSB0LmtpbmQgPT09IG47XG4gICAgfVxuICAgIHJuKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuICEhZS5maWVsZC5pc0VxdWFsKHQuZmllbGRQYXRoKSAmJiAoMCAvKiBJbmRleEtpbmQuQVNDRU5ESU5HICovID09PSB0LmtpbmQgJiYgXCJhc2NcIiAvKiBEaXJlY3Rpb24uQVNDRU5ESU5HICovID09PSBlLmRpciB8fCAxIC8qIEluZGV4S2luZC5ERVNDRU5ESU5HICovID09PSB0LmtpbmQgJiYgXCJkZXNjXCIgLyogRGlyZWN0aW9uLkRFU0NFTkRJTkcgKi8gPT09IGUuZGlyKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFByb3ZpZGVzIHV0aWxpdHkgZnVuY3Rpb25zIHRoYXQgaGVscCB3aXRoIGJvb2xlYW4gbG9naWMgdHJhbnNmb3JtYXRpb25zIG5lZWRlZCBmb3IgaGFuZGxpbmdcbiAqIGNvbXBsZXggZmlsdGVycyB1c2VkIGluIHF1ZXJpZXMuXG4gKi9cbi8qKlxuICogVGhlIGBpbmAgZmlsdGVyIGlzIG9ubHkgYSBzeW50YWN0aWMgc3VnYXIgb3ZlciBhIGRpc2p1bmN0aW9uIG9mIGVxdWFsaXRpZXMuIEZvciBpbnN0YW5jZTogYGEgaW5cbiAqIFsxLDIsM11gIGlzIGluIGZhY3QgYGE9PTEgfHwgYT09MiB8fCBhPT0zYC4gVGhpcyBtZXRob2QgZXhwYW5kcyBhbnkgYGluYCBmaWx0ZXIgaW4gdGhlIGdpdmVuXG4gKiBpbnB1dCBpbnRvIGEgZGlzanVuY3Rpb24gb2YgZXF1YWxpdHkgZmlsdGVycyBhbmQgcmV0dXJucyB0aGUgZXhwYW5kZWQgZmlsdGVyLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9jb21wdXRlSW5FeHBhbnNpb24oZSkge1xuICAgIHZhciB0LCBuO1xuICAgIGlmIChfX1BSSVZBVEVfaGFyZEFzc2VydChlIGluc3RhbmNlb2YgRmllbGRGaWx0ZXIgfHwgZSBpbnN0YW5jZW9mIENvbXBvc2l0ZUZpbHRlciksIFxuICAgIGUgaW5zdGFuY2VvZiBGaWVsZEZpbHRlcikge1xuICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIF9fUFJJVkFURV9JbkZpbHRlcikge1xuICAgICAgICAgICAgY29uc3QgciA9IChudWxsID09PSAobiA9IG51bGwgPT09ICh0ID0gZS52YWx1ZS5hcnJheVZhbHVlKSB8fCB2b2lkIDAgPT09IHQgPyB2b2lkIDAgOiB0LnZhbHVlcykgfHwgdm9pZCAwID09PSBuID8gdm9pZCAwIDogbi5tYXAoKHQgPT4gRmllbGRGaWx0ZXIuY3JlYXRlKGUuZmllbGQsIFwiPT1cIiAvKiBPcGVyYXRvci5FUVVBTCAqLyAsIHQpKSkpIHx8IFtdO1xuICAgICAgICAgICAgcmV0dXJuIENvbXBvc2l0ZUZpbHRlci5jcmVhdGUociwgXCJvclwiIC8qIENvbXBvc2l0ZU9wZXJhdG9yLk9SICovKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBXZSBoYXZlIHJlYWNoZWQgb3RoZXIga2luZHMgb2YgZmllbGQgZmlsdGVycy5cbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfVxuICAgIC8vIFdlIGhhdmUgYSBjb21wb3NpdGUgZmlsdGVyLlxuICAgICAgICBjb25zdCByID0gZS5maWx0ZXJzLm1hcCgoZSA9PiBfX1BSSVZBVEVfY29tcHV0ZUluRXhwYW5zaW9uKGUpKSk7XG4gICAgcmV0dXJuIENvbXBvc2l0ZUZpbHRlci5jcmVhdGUociwgZS5vcCk7XG59XG5cbi8qKlxuICogR2l2ZW4gYSBjb21wb3NpdGUgZmlsdGVyLCByZXR1cm5zIHRoZSBsaXN0IG9mIHRlcm1zIGluIGl0cyBkaXNqdW5jdGl2ZSBub3JtYWwgZm9ybS5cbiAqXG4gKiA8cD5FYWNoIGVsZW1lbnQgaW4gdGhlIHJldHVybiB2YWx1ZSBpcyBvbmUgdGVybSBvZiB0aGUgcmVzdWx0aW5nIERORi4gRm9yIGluc3RhbmNlOiBGb3IgdGhlXG4gKiBpbnB1dDogKEEgfHwgQikgJiYgQywgdGhlIERORiBmb3JtIGlzOiAoQSAmJiBDKSB8fCAoQiAmJiBDKSwgYW5kIHRoZSByZXR1cm4gdmFsdWUgaXMgYSBsaXN0XG4gKiB3aXRoIHR3byBlbGVtZW50czogYSBjb21wb3NpdGUgZmlsdGVyIHRoYXQgcGVyZm9ybXMgKEEgJiYgQyksIGFuZCBhIGNvbXBvc2l0ZSBmaWx0ZXIgdGhhdFxuICogcGVyZm9ybXMgKEIgJiYgQykuXG4gKlxuICogQHBhcmFtIGZpbHRlciB0aGUgY29tcG9zaXRlIGZpbHRlciB0byBjYWxjdWxhdGUgRE5GIHRyYW5zZm9ybSBmb3IuXG4gKiBAcmV0dXJuIHRoZSB0ZXJtcyBpbiB0aGUgRE5GIHRyYW5zZm9ybS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfZ2V0RG5mVGVybXMoZSkge1xuICAgIGlmICgwID09PSBlLmdldEZpbHRlcnMoKS5sZW5ndGgpIHJldHVybiBbXTtcbiAgICBjb25zdCB0ID0gX19QUklWQVRFX2NvbXB1dGVEaXN0cmlidXRlZE5vcm1hbEZvcm0oX19QUklWQVRFX2NvbXB1dGVJbkV4cGFuc2lvbihlKSk7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9oYXJkQXNzZXJ0KF9fUFJJVkFURV9pc0Rpc2p1bmN0aXZlTm9ybWFsRm9ybSh0KSksIF9fUFJJVkFURV9pc1NpbmdsZUZpZWxkRmlsdGVyKHQpIHx8IF9fUFJJVkFURV9pc0ZsYXRDb25qdW5jdGlvbih0KSA/IFsgdCBdIDogdC5nZXRGaWx0ZXJzKCk7XG59XG5cbi8qKiBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIGZpbHRlciBpcyBhIHNpbmdsZSBmaWVsZCBmaWx0ZXIuIGUuZy4gKGEgPT0gMTApLiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfaXNTaW5nbGVGaWVsZEZpbHRlcihlKSB7XG4gICAgcmV0dXJuIGUgaW5zdGFuY2VvZiBGaWVsZEZpbHRlcjtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIGZpbHRlciBpcyB0aGUgY29uanVuY3Rpb24gb2Ygb25lIG9yIG1vcmUgZmllbGQgZmlsdGVycy4gZS5nLiAoYSA9PSAxMFxuICogJiYgYiA9PSAyMClcbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfaXNGbGF0Q29uanVuY3Rpb24oZSkge1xuICAgIHJldHVybiBlIGluc3RhbmNlb2YgQ29tcG9zaXRlRmlsdGVyICYmIF9fUFJJVkFURV9jb21wb3NpdGVGaWx0ZXJJc0ZsYXRDb25qdW5jdGlvbihlKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgb3Igbm90IHRoZSBnaXZlbiBmaWx0ZXIgaXMgaW4gZGlzanVuY3RpdmUgbm9ybWFsIGZvcm0gKERORikuXG4gKlxuICogPHA+SW4gYm9vbGVhbiBsb2dpYywgYSBkaXNqdW5jdGl2ZSBub3JtYWwgZm9ybSAoRE5GKSBpcyBhIGNhbm9uaWNhbCBub3JtYWwgZm9ybSBvZiBhIGxvZ2ljYWxcbiAqIGZvcm11bGEgY29uc2lzdGluZyBvZiBhIGRpc2p1bmN0aW9uIG9mIGNvbmp1bmN0aW9uczsgaXQgY2FuIGFsc28gYmUgZGVzY3JpYmVkIGFzIGFuIE9SIG9mIEFORHMuXG4gKlxuICogPHA+Rm9yIG1vcmUgaW5mbywgdmlzaXQ6IGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0Rpc2p1bmN0aXZlX25vcm1hbF9mb3JtXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2lzRGlzanVuY3RpdmVOb3JtYWxGb3JtKGUpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX2lzU2luZ2xlRmllbGRGaWx0ZXIoZSkgfHwgX19QUklWQVRFX2lzRmxhdENvbmp1bmN0aW9uKGUpIHx8IFxuICAgIC8qKlxuICogUmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiBmaWx0ZXIgaXMgdGhlIGRpc2p1bmN0aW9uIG9mIG9uZSBvciBtb3JlIFwiZmxhdCBjb25qdW5jdGlvbnNcIiBhbmRcbiAqIGZpZWxkIGZpbHRlcnMuIGUuZy4gKGEgPT0gMTApIHx8IChiPT0yMCAmJiBjPT0zMClcbiAqL1xuICAgIGZ1bmN0aW9uIF9fUFJJVkFURV9pc0Rpc2p1bmN0aW9uT2ZGaWVsZEZpbHRlcnNBbmRGbGF0Q29uanVuY3Rpb25zKGUpIHtcbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBDb21wb3NpdGVGaWx0ZXIgJiYgX19QUklWQVRFX2NvbXBvc2l0ZUZpbHRlcklzRGlzanVuY3Rpb24oZSkpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiBlLmdldEZpbHRlcnMoKSkgaWYgKCFfX1BSSVZBVEVfaXNTaW5nbGVGaWVsZEZpbHRlcih0KSAmJiAhX19QUklWQVRFX2lzRmxhdENvbmp1bmN0aW9uKHQpKSByZXR1cm4gITE7XG4gICAgICAgICAgICByZXR1cm4gITA7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICExO1xuICAgIH0oZSk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9jb21wdXRlRGlzdHJpYnV0ZWROb3JtYWxGb3JtKGUpIHtcbiAgICBpZiAoX19QUklWQVRFX2hhcmRBc3NlcnQoZSBpbnN0YW5jZW9mIEZpZWxkRmlsdGVyIHx8IGUgaW5zdGFuY2VvZiBDb21wb3NpdGVGaWx0ZXIpLCBcbiAgICBlIGluc3RhbmNlb2YgRmllbGRGaWx0ZXIpIHJldHVybiBlO1xuICAgIGlmICgxID09PSBlLmZpbHRlcnMubGVuZ3RoKSByZXR1cm4gX19QUklWQVRFX2NvbXB1dGVEaXN0cmlidXRlZE5vcm1hbEZvcm0oZS5maWx0ZXJzWzBdKTtcbiAgICAvLyBDb21wdXRlIERORiBmb3IgZWFjaCBvZiB0aGUgc3ViZmlsdGVycyBmaXJzdFxuICAgICAgICBjb25zdCB0ID0gZS5maWx0ZXJzLm1hcCgoZSA9PiBfX1BSSVZBVEVfY29tcHV0ZURpc3RyaWJ1dGVkTm9ybWFsRm9ybShlKSkpO1xuICAgIGxldCBuID0gQ29tcG9zaXRlRmlsdGVyLmNyZWF0ZSh0LCBlLm9wKTtcbiAgICByZXR1cm4gbiA9IF9fUFJJVkFURV9hcHBseUFzc29jaWF0aW9uKG4pLCBfX1BSSVZBVEVfaXNEaXNqdW5jdGl2ZU5vcm1hbEZvcm0obikgPyBuIDogKF9fUFJJVkFURV9oYXJkQXNzZXJ0KG4gaW5zdGFuY2VvZiBDb21wb3NpdGVGaWx0ZXIpLCBcbiAgICBfX1BSSVZBVEVfaGFyZEFzc2VydChfX1BSSVZBVEVfY29tcG9zaXRlRmlsdGVySXNDb25qdW5jdGlvbihuKSksIF9fUFJJVkFURV9oYXJkQXNzZXJ0KG4uZmlsdGVycy5sZW5ndGggPiAxKSwgXG4gICAgbi5maWx0ZXJzLnJlZHVjZSgoKGUsIHQpID0+IF9fUFJJVkFURV9hcHBseURpc3RyaWJ1dGlvbihlLCB0KSkpKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2FwcGx5RGlzdHJpYnV0aW9uKGUsIHQpIHtcbiAgICBsZXQgbjtcbiAgICByZXR1cm4gX19QUklWQVRFX2hhcmRBc3NlcnQoZSBpbnN0YW5jZW9mIEZpZWxkRmlsdGVyIHx8IGUgaW5zdGFuY2VvZiBDb21wb3NpdGVGaWx0ZXIpLCBcbiAgICBfX1BSSVZBVEVfaGFyZEFzc2VydCh0IGluc3RhbmNlb2YgRmllbGRGaWx0ZXIgfHwgdCBpbnN0YW5jZW9mIENvbXBvc2l0ZUZpbHRlciksIFxuICAgIC8vIEZpZWxkRmlsdGVyIEZpZWxkRmlsdGVyXG4gICAgbiA9IGUgaW5zdGFuY2VvZiBGaWVsZEZpbHRlciA/IHQgaW5zdGFuY2VvZiBGaWVsZEZpbHRlciA/IGZ1bmN0aW9uIF9fUFJJVkFURV9hcHBseURpc3RyaWJ1dGlvbkZpZWxkRmlsdGVycyhlLCB0KSB7XG4gICAgICAgIC8vIENvbmp1bmN0aW9uIGRpc3RyaWJ1dGlvbiBmb3IgdHdvIGZpZWxkIGZpbHRlcnMgaXMgdGhlIGNvbmp1bmN0aW9uIG9mIHRoZW0uXG4gICAgICAgIHJldHVybiBDb21wb3NpdGVGaWx0ZXIuY3JlYXRlKFsgZSwgdCBdLCBcImFuZFwiIC8qIENvbXBvc2l0ZU9wZXJhdG9yLkFORCAqLyk7XG4gICAgfShlLCB0KSA6IF9fUFJJVkFURV9hcHBseURpc3RyaWJ1dGlvbkZpZWxkQW5kQ29tcG9zaXRlRmlsdGVycyhlLCB0KSA6IHQgaW5zdGFuY2VvZiBGaWVsZEZpbHRlciA/IF9fUFJJVkFURV9hcHBseURpc3RyaWJ1dGlvbkZpZWxkQW5kQ29tcG9zaXRlRmlsdGVycyh0LCBlKSA6IGZ1bmN0aW9uIF9fUFJJVkFURV9hcHBseURpc3RyaWJ1dGlvbkNvbXBvc2l0ZUZpbHRlcnMoZSwgdCkge1xuICAgICAgICAvLyBUaGVyZSBhcmUgZm91ciBjYXNlczpcbiAgICAgICAgLy8gKEEgJiBCKSAmIChDICYgRCkgLS0+IChBICYgQiAmIEMgJiBEKVxuICAgICAgICAvLyAoQSAmIEIpICYgKEMgfCBEKSAtLT4gKEEgJiBCICYgQykgfCAoQSAmIEIgJiBEKVxuICAgICAgICAvLyAoQSB8IEIpICYgKEMgJiBEKSAtLT4gKEMgJiBEICYgQSkgfCAoQyAmIEQgJiBCKVxuICAgICAgICAvLyAoQSB8IEIpICYgKEMgfCBEKSAtLT4gKEEgJiBDKSB8IChBICYgRCkgfCAoQiAmIEMpIHwgKEIgJiBEKVxuICAgICAgICAvLyBDYXNlIDEgaXMgYSBtZXJnZS5cbiAgICAgICAgaWYgKF9fUFJJVkFURV9oYXJkQXNzZXJ0KGUuZmlsdGVycy5sZW5ndGggPiAwICYmIHQuZmlsdGVycy5sZW5ndGggPiAwKSwgX19QUklWQVRFX2NvbXBvc2l0ZUZpbHRlcklzQ29uanVuY3Rpb24oZSkgJiYgX19QUklWQVRFX2NvbXBvc2l0ZUZpbHRlcklzQ29uanVuY3Rpb24odCkpIHJldHVybiBfX1BSSVZBVEVfY29tcG9zaXRlRmlsdGVyV2l0aEFkZGVkRmlsdGVycyhlLCB0LmdldEZpbHRlcnMoKSk7XG4gICAgICAgIC8vIENhc2UgMiwzLDQgYWxsIGhhdmUgYXQgbGVhc3Qgb25lIHNpZGUgKGxocyBvciByaHMpIHRoYXQgaXMgYSBkaXNqdW5jdGlvbi4gSW4gYWxsIHRocmVlIGNhc2VzXG4gICAgICAgIC8vIHdlIHNob3VsZCB0YWtlIGVhY2ggZWxlbWVudCBvZiB0aGUgZGlzanVuY3Rpb24gYW5kIGRpc3RyaWJ1dGUgaXQgb3ZlciB0aGUgb3RoZXIgc2lkZSwgYW5kXG4gICAgICAgIC8vIHJldHVybiB0aGUgZGlzanVuY3Rpb24gb2YgdGhlIGRpc3RyaWJ1dGlvbiByZXN1bHRzLlxuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfY29tcG9zaXRlRmlsdGVySXNEaXNqdW5jdGlvbihlKSA/IGUgOiB0LCByID0gX19QUklWQVRFX2NvbXBvc2l0ZUZpbHRlcklzRGlzanVuY3Rpb24oZSkgPyB0IDogZSwgaSA9IG4uZmlsdGVycy5tYXAoKGUgPT4gX19QUklWQVRFX2FwcGx5RGlzdHJpYnV0aW9uKGUsIHIpKSk7XG4gICAgICAgIHJldHVybiBDb21wb3NpdGVGaWx0ZXIuY3JlYXRlKGksIFwib3JcIiAvKiBDb21wb3NpdGVPcGVyYXRvci5PUiAqLyk7XG4gICAgfShlLCB0KSwgX19QUklWQVRFX2FwcGx5QXNzb2NpYXRpb24obik7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9hcHBseURpc3RyaWJ1dGlvbkZpZWxkQW5kQ29tcG9zaXRlRmlsdGVycyhlLCB0KSB7XG4gICAgLy8gVGhlcmUgYXJlIHR3byBjYXNlczpcbiAgICAvLyBBICYgKEIgJiBDKSAtLT4gKEEgJiBCICYgQylcbiAgICAvLyBBICYgKEIgfCBDKSAtLT4gKEEgJiBCKSB8IChBICYgQylcbiAgICBpZiAoX19QUklWQVRFX2NvbXBvc2l0ZUZpbHRlcklzQ29uanVuY3Rpb24odCkpIFxuICAgIC8vIENhc2UgMVxuICAgIHJldHVybiBfX1BSSVZBVEVfY29tcG9zaXRlRmlsdGVyV2l0aEFkZGVkRmlsdGVycyh0LCBlLmdldEZpbHRlcnMoKSk7XG4gICAge1xuICAgICAgICAvLyBDYXNlIDJcbiAgICAgICAgY29uc3QgbiA9IHQuZmlsdGVycy5tYXAoKHQgPT4gX19QUklWQVRFX2FwcGx5RGlzdHJpYnV0aW9uKGUsIHQpKSk7XG4gICAgICAgIHJldHVybiBDb21wb3NpdGVGaWx0ZXIuY3JlYXRlKG4sIFwib3JcIiAvKiBDb21wb3NpdGVPcGVyYXRvci5PUiAqLyk7XG4gICAgfVxufVxuXG4vKipcbiAqIEFwcGxpZXMgdGhlIGFzc29jaWF0aXZpdHkgcHJvcGVydHkgdG8gdGhlIGdpdmVuIGZpbHRlciBhbmQgcmV0dXJucyB0aGUgcmVzdWx0aW5nIGZpbHRlci5cbiAqXG4gKiA8dWw+XG4gKiAgIDxsaT5BIHwgKEIgfCBDKSA9PSAoQSB8IEIpIHwgQyA9PSAoQSB8IEIgfCBDKVxuICogICA8bGk+QSAmIChCICYgQykgPT0gKEEgJiBCKSAmIEMgPT0gKEEgJiBCICYgQylcbiAqIDwvdWw+XG4gKlxuICogPHA+Rm9yIG1vcmUgaW5mbywgdmlzaXQ6IGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0Fzc29jaWF0aXZlX3Byb3BlcnR5I1Byb3Bvc2l0aW9uYWxfbG9naWNcbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfYXBwbHlBc3NvY2lhdGlvbihlKSB7XG4gICAgaWYgKF9fUFJJVkFURV9oYXJkQXNzZXJ0KGUgaW5zdGFuY2VvZiBGaWVsZEZpbHRlciB8fCBlIGluc3RhbmNlb2YgQ29tcG9zaXRlRmlsdGVyKSwgXG4gICAgZSBpbnN0YW5jZW9mIEZpZWxkRmlsdGVyKSByZXR1cm4gZTtcbiAgICBjb25zdCB0ID0gZS5nZXRGaWx0ZXJzKCk7XG4gICAgLy8gSWYgdGhlIGNvbXBvc2l0ZSBmaWx0ZXIgb25seSBjb250YWlucyAxIGZpbHRlciwgYXBwbHkgYXNzb2NpYXRpdml0eSB0byBpdC5cbiAgICAgICAgaWYgKDEgPT09IHQubGVuZ3RoKSByZXR1cm4gX19QUklWQVRFX2FwcGx5QXNzb2NpYXRpb24odFswXSk7XG4gICAgLy8gQXNzb2NpYXRpdml0eSBhcHBsaWVkIHRvIGEgZmxhdCBjb21wb3NpdGUgZmlsdGVyIHJlc3VsdHMgaXMgaXRzZWxmLlxuICAgICAgICBpZiAoX19QUklWQVRFX2NvbXBvc2l0ZUZpbHRlcklzRmxhdChlKSkgcmV0dXJuIGU7XG4gICAgLy8gRmlyc3QgYXBwbHkgYXNzb2NpYXRpdml0eSB0byBhbGwgc3ViZmlsdGVycy4gVGhpcyB3aWxsIGluIHR1cm4gcmVjdXJzaXZlbHkgYXBwbHlcbiAgICAvLyBhc3NvY2lhdGl2aXR5IHRvIGFsbCBuZXN0ZWQgY29tcG9zaXRlIGZpbHRlcnMgYW5kIGZpZWxkIGZpbHRlcnMuXG4gICAgICAgIGNvbnN0IG4gPSB0Lm1hcCgoZSA9PiBfX1BSSVZBVEVfYXBwbHlBc3NvY2lhdGlvbihlKSkpLCByID0gW107XG4gICAgLy8gRm9yIGNvbXBvc2l0ZSBzdWJmaWx0ZXJzIHRoYXQgcGVyZm9ybSB0aGUgc2FtZSBraW5kIG9mIGxvZ2ljYWwgb3BlcmF0aW9uIGFzIGBjb21wb3NpdGVGaWx0ZXJgXG4gICAgLy8gdGFrZSBvdXQgdGhlaXIgZmlsdGVycyBhbmQgYWRkIHRoZW0gdG8gYGNvbXBvc2l0ZUZpbHRlcmAuIEZvciBleGFtcGxlOlxuICAgIC8vIGNvbXBvc2l0ZUZpbHRlciA9IChBIHwgKEIgfCBDIHwgRCkpXG4gICAgLy8gY29tcG9zaXRlU3ViZmlsdGVyID0gKEIgfCBDIHwgRClcbiAgICAvLyBSZXN1bHQ6IChBIHwgQiB8IEMgfCBEKVxuICAgIC8vIE5vdGUgdGhhdCB0aGUgYGNvbXBvc2l0ZVN1YmZpbHRlcmAgaGFzIGJlZW4gZWxpbWluYXRlZCwgYW5kIGl0cyBmaWx0ZXJzIChCLCBDLCBEKSBoYXZlIGJlZW5cbiAgICAvLyBhZGRlZCB0byB0aGUgdG9wLWxldmVsIFwiY29tcG9zaXRlRmlsdGVyXCIuXG4gICAgICAgIHJldHVybiBuLmZvckVhY2goKHQgPT4ge1xuICAgICAgICB0IGluc3RhbmNlb2YgRmllbGRGaWx0ZXIgPyByLnB1c2godCkgOiB0IGluc3RhbmNlb2YgQ29tcG9zaXRlRmlsdGVyICYmICh0Lm9wID09PSBlLm9wID8gXG4gICAgICAgIC8vIGNvbXBvc2l0ZUZpbHRlcjogKEEgfCAoQiB8IEMpKVxuICAgICAgICAvLyBjb21wb3NpdGVTdWJmaWx0ZXI6IChCIHwgQylcbiAgICAgICAgLy8gUmVzdWx0OiAoQSB8IEIgfCBDKVxuICAgICAgICByLnB1c2goLi4udC5maWx0ZXJzKSA6IFxuICAgICAgICAvLyBjb21wb3NpdGVGaWx0ZXI6IChBIHwgKEIgJiBDKSlcbiAgICAgICAgLy8gY29tcG9zaXRlU3ViZmlsdGVyOiAoQiAmIEMpXG4gICAgICAgIC8vIFJlc3VsdDogKEEgfCAoQiAmIEMpKVxuICAgICAgICByLnB1c2godCkpO1xuICAgIH0pKSwgMSA9PT0gci5sZW5ndGggPyByWzBdIDogQ29tcG9zaXRlRmlsdGVyLmNyZWF0ZShyLCBlLm9wKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQW4gaW4tbWVtb3J5IGltcGxlbWVudGF0aW9uIG9mIEluZGV4TWFuYWdlci5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfTWVtb3J5SW5kZXhNYW5hZ2VyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5vbiA9IG5ldyBfX1BSSVZBVEVfTWVtb3J5Q29sbGVjdGlvblBhcmVudEluZGV4O1xuICAgIH1cbiAgICBhZGRUb0NvbGxlY3Rpb25QYXJlbnRJbmRleChlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9uLmFkZCh0KSwgUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgZ2V0Q29sbGVjdGlvblBhcmVudHMoZSwgdCkge1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodGhpcy5vbi5nZXRFbnRyaWVzKHQpKTtcbiAgICB9XG4gICAgYWRkRmllbGRJbmRleChlLCB0KSB7XG4gICAgICAgIC8vIEZpZWxkIGluZGljZXMgYXJlIG5vdCBzdXBwb3J0ZWQgd2l0aCBtZW1vcnkgcGVyc2lzdGVuY2UuXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBkZWxldGVGaWVsZEluZGV4KGUsIHQpIHtcbiAgICAgICAgLy8gRmllbGQgaW5kaWNlcyBhcmUgbm90IHN1cHBvcnRlZCB3aXRoIG1lbW9yeSBwZXJzaXN0ZW5jZS5cbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGRlbGV0ZUFsbEZpZWxkSW5kZXhlcyhlKSB7XG4gICAgICAgIC8vIEZpZWxkIGluZGljZXMgYXJlIG5vdCBzdXBwb3J0ZWQgd2l0aCBtZW1vcnkgcGVyc2lzdGVuY2UuXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBjcmVhdGVUYXJnZXRJbmRleGVzKGUsIHQpIHtcbiAgICAgICAgLy8gRmllbGQgaW5kaWNlcyBhcmUgbm90IHN1cHBvcnRlZCB3aXRoIG1lbW9yeSBwZXJzaXN0ZW5jZS5cbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGdldERvY3VtZW50c01hdGNoaW5nVGFyZ2V0KGUsIHQpIHtcbiAgICAgICAgLy8gRmllbGQgaW5kaWNlcyBhcmUgbm90IHN1cHBvcnRlZCB3aXRoIG1lbW9yeSBwZXJzaXN0ZW5jZS5cbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKG51bGwpO1xuICAgIH1cbiAgICBnZXRJbmRleFR5cGUoZSwgdCkge1xuICAgICAgICAvLyBGaWVsZCBpbmRpY2VzIGFyZSBub3Qgc3VwcG9ydGVkIHdpdGggbWVtb3J5IHBlcnNpc3RlbmNlLlxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoMCAvKiBJbmRleFR5cGUuTk9ORSAqLyk7XG4gICAgfVxuICAgIGdldEZpZWxkSW5kZXhlcyhlLCB0KSB7XG4gICAgICAgIC8vIEZpZWxkIGluZGljZXMgYXJlIG5vdCBzdXBwb3J0ZWQgd2l0aCBtZW1vcnkgcGVyc2lzdGVuY2UuXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShbXSk7XG4gICAgfVxuICAgIGdldE5leHRDb2xsZWN0aW9uR3JvdXBUb1VwZGF0ZShlKSB7XG4gICAgICAgIC8vIEZpZWxkIGluZGljZXMgYXJlIG5vdCBzdXBwb3J0ZWQgd2l0aCBtZW1vcnkgcGVyc2lzdGVuY2UuXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShudWxsKTtcbiAgICB9XG4gICAgZ2V0TWluT2Zmc2V0KGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKEluZGV4T2Zmc2V0Lm1pbigpKTtcbiAgICB9XG4gICAgZ2V0TWluT2Zmc2V0RnJvbUNvbGxlY3Rpb25Hcm91cChlLCB0KSB7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShJbmRleE9mZnNldC5taW4oKSk7XG4gICAgfVxuICAgIHVwZGF0ZUNvbGxlY3Rpb25Hcm91cChlLCB0LCBuKSB7XG4gICAgICAgIC8vIEZpZWxkIGluZGljZXMgYXJlIG5vdCBzdXBwb3J0ZWQgd2l0aCBtZW1vcnkgcGVyc2lzdGVuY2UuXG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICB1cGRhdGVJbmRleEVudHJpZXMoZSwgdCkge1xuICAgICAgICAvLyBGaWVsZCBpbmRpY2VzIGFyZSBub3Qgc3VwcG9ydGVkIHdpdGggbWVtb3J5IHBlcnNpc3RlbmNlLlxuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG59XG5cbi8qKlxuICogSW50ZXJuYWwgaW1wbGVtZW50YXRpb24gb2YgdGhlIGNvbGxlY3Rpb24tcGFyZW50IGluZGV4IGV4cG9zZWQgYnkgTWVtb3J5SW5kZXhNYW5hZ2VyLlxuICogQWxzbyB1c2VkIGZvciBpbi1tZW1vcnkgY2FjaGluZyBieSBJbmRleGVkRGJJbmRleE1hbmFnZXIgYW5kIGluaXRpYWwgaW5kZXggcG9wdWxhdGlvblxuICogaW4gaW5kZXhlZGRiX3NjaGVtYS50c1xuICovIGNsYXNzIF9fUFJJVkFURV9NZW1vcnlDb2xsZWN0aW9uUGFyZW50SW5kZXgge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmluZGV4ID0ge307XG4gICAgfVxuICAgIC8vIFJldHVybnMgZmFsc2UgaWYgdGhlIGVudHJ5IGFscmVhZHkgZXhpc3RlZC5cbiAgICBhZGQoZSkge1xuICAgICAgICBjb25zdCB0ID0gZS5sYXN0U2VnbWVudCgpLCBuID0gZS5wb3BMYXN0KCksIHIgPSB0aGlzLmluZGV4W3RdIHx8IG5ldyBTb3J0ZWRTZXQoUmVzb3VyY2VQYXRoLmNvbXBhcmF0b3IpLCBpID0gIXIuaGFzKG4pO1xuICAgICAgICByZXR1cm4gdGhpcy5pbmRleFt0XSA9IHIuYWRkKG4pLCBpO1xuICAgIH1cbiAgICBoYXMoZSkge1xuICAgICAgICBjb25zdCB0ID0gZS5sYXN0U2VnbWVudCgpLCBuID0gZS5wb3BMYXN0KCksIHIgPSB0aGlzLmluZGV4W3RdO1xuICAgICAgICByZXR1cm4gciAmJiByLmhhcyhuKTtcbiAgICB9XG4gICAgZ2V0RW50cmllcyhlKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5pbmRleFtlXSB8fCBuZXcgU29ydGVkU2V0KFJlc291cmNlUGF0aC5jb21wYXJhdG9yKSkudG9BcnJheSgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY29uc3QgVGUgPSBuZXcgVWludDhBcnJheSgwKTtcblxuLyoqXG4gKiBBIHBlcnNpc3RlZCBpbXBsZW1lbnRhdGlvbiBvZiBJbmRleE1hbmFnZXIuXG4gKlxuICogUE9SVElORyBOT1RFOiBVbmxpa2UgaU9TIGFuZCBBbmRyb2lkLCB0aGUgV2ViIFNESyBkb2VzIG5vdCBtZW1vaXplIGluZGV4XG4gKiBkYXRhIGFzIGl0IHN1cHBvcnRzIG11bHRpLXRhYiBhY2Nlc3MuXG4gKi9cbmNsYXNzIF9fUFJJVkFURV9JbmRleGVkRGJJbmRleE1hbmFnZXIge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgdGhpcy51c2VyID0gZSwgdGhpcy5kYXRhYmFzZUlkID0gdCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBbiBpbi1tZW1vcnkgY29weSBvZiB0aGUgaW5kZXggZW50cmllcyB3ZSd2ZSBhbHJlYWR5IHdyaXR0ZW4gc2luY2UgdGhlIFNES1xuICAgICAgICAgKiBsYXVuY2hlZC4gVXNlZCB0byBhdm9pZCByZS13cml0aW5nIHRoZSBzYW1lIGVudHJ5IHJlcGVhdGVkbHkuXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoaXMgaXMgKk5PVCogYSBjb21wbGV0ZSBjYWNoZSBvZiB3aGF0J3MgaW4gcGVyc2lzdGVuY2UgYW5kIHNvIGNhbiBuZXZlciBiZVxuICAgICAgICAgKiB1c2VkIHRvIHNhdGlzZnkgcmVhZHMuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9uID0gbmV3IF9fUFJJVkFURV9NZW1vcnlDb2xsZWN0aW9uUGFyZW50SW5kZXgsIFxuICAgICAgICAvKipcbiAgICAgICAgICogTWFwcyBmcm9tIGEgdGFyZ2V0IHRvIGl0cyBlcXVpdmFsZW50IGxpc3Qgb2Ygc3ViLXRhcmdldHMuIEVhY2ggc3ViLXRhcmdldFxuICAgICAgICAgKiBjb250YWlucyBvbmx5IG9uZSB0ZXJtIGZyb20gdGhlIHRhcmdldCdzIGRpc2p1bmN0aXZlIG5vcm1hbCBmb3JtIChETkYpLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5hbiA9IG5ldyBPYmplY3RNYXAoKGUgPT4gX19QUklWQVRFX2Nhbm9uaWZ5VGFyZ2V0KGUpKSwgKChlLCB0KSA9PiBfX1BSSVZBVEVfdGFyZ2V0RXF1YWxzKGUsIHQpKSksIFxuICAgICAgICB0aGlzLnVpZCA9IGUudWlkIHx8IFwiXCI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgYSBuZXcgZW50cnkgdG8gdGhlIGNvbGxlY3Rpb24gcGFyZW50IGluZGV4LlxuICAgICAqXG4gICAgICogUmVwZWF0ZWQgY2FsbHMgZm9yIHRoZSBzYW1lIGNvbGxlY3Rpb25QYXRoIHNob3VsZCBiZSBhdm9pZGVkIHdpdGhpbiBhXG4gICAgICogdHJhbnNhY3Rpb24gYXMgSW5kZXhlZERiSW5kZXhNYW5hZ2VyIG9ubHkgY2FjaGVzIHdyaXRlcyBvbmNlIGEgdHJhbnNhY3Rpb25cbiAgICAgKiBoYXMgYmVlbiBjb21taXR0ZWQuXG4gICAgICovICAgIGFkZFRvQ29sbGVjdGlvblBhcmVudEluZGV4KGUsIHQpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9uLmhhcyh0KSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQubGFzdFNlZ21lbnQoKSwgciA9IHQucG9wTGFzdCgpO1xuICAgICAgICAgICAgZS5hZGRPbkNvbW1pdHRlZExpc3RlbmVyKCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gQWRkIHRoZSBjb2xsZWN0aW9uIHRvIHRoZSBpbiBtZW1vcnkgY2FjaGUgb25seSBpZiB0aGUgdHJhbnNhY3Rpb24gd2FzXG4gICAgICAgICAgICAgICAgLy8gc3VjY2Vzc2Z1bGx5IGNvbW1pdHRlZC5cbiAgICAgICAgICAgICAgICB0aGlzLl9uLmFkZCh0KTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIGNvbnN0IGkgPSB7XG4gICAgICAgICAgICAgICAgY29sbGVjdGlvbklkOiBuLFxuICAgICAgICAgICAgICAgIHBhcmVudDogX19QUklWQVRFX2VuY29kZVJlc291cmNlUGF0aChyKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBfX1BSSVZBVEVfY29sbGVjdGlvblBhcmVudHNTdG9yZShlKS5wdXQoaSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGdldENvbGxlY3Rpb25QYXJlbnRzKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IFtdLCByID0gSURCS2V5UmFuZ2UuYm91bmQoWyB0LCBcIlwiIF0sIFsgX19QUklWQVRFX2ltbWVkaWF0ZVN1Y2Nlc3Nvcih0KSwgXCJcIiBdLCBcbiAgICAgICAgLypsb3dlck9wZW49Ki8gITEsIFxuICAgICAgICAvKnVwcGVyT3Blbj0qLyAhMCk7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfY29sbGVjdGlvblBhcmVudHNTdG9yZShlKS5XKHIpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgZm9yIChjb25zdCByIG9mIGUpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGNvbGxlY3Rpb25JZCBndWFyZCBzaG91bGRuJ3QgYmUgbmVjZXNzYXJ5IChhbmQgaXNuJ3QgYXMgbG9uZ1xuICAgICAgICAgICAgICAgIC8vIGFzIHdlJ3JlIHJ1bm5pbmcgaW4gYSByZWFsIGJyb3dzZXIpLCBidXQgdGhlcmUncyBhIGJ1ZyBpblxuICAgICAgICAgICAgICAgIC8vIGluZGV4ZWRkYnNoaW0gdGhhdCBicmVha3Mgb3VyIHJhbmdlIGluIG91ciB0ZXN0cyBydW5uaW5nIGluIG5vZGU6XG4gICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2F4ZW1jbGlvbi9JbmRleGVkREJTaGltL2lzc3Vlcy8zMzRcbiAgICAgICAgICAgICAgICBpZiAoci5jb2xsZWN0aW9uSWQgIT09IHQpIGJyZWFrO1xuICAgICAgICAgICAgICAgIG4ucHVzaChfX1BSSVZBVEVfZGVjb2RlUmVzb3VyY2VQYXRoKHIucGFyZW50KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbjtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBhZGRGaWVsZEluZGV4KGUsIHQpIHtcbiAgICAgICAgLy8gVE9ETyhpbmRleGluZyk6IFZlcmlmeSB0aGF0IHRoZSBhdXRvLWluY3JlbWVudGluZyBpbmRleCBJRCB3b3JrcyBpblxuICAgICAgICAvLyBTYWZhcmkgJiBGaXJlZm94LlxuICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2luZGV4Q29uZmlndXJhdGlvblN0b3JlKGUpLCByID0gZnVuY3Rpb24gX19QUklWQVRFX3RvRGJJbmRleENvbmZpZ3VyYXRpb24oZSkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBpbmRleElkOiBlLmluZGV4SWQsXG4gICAgICAgICAgICAgICAgY29sbGVjdGlvbkdyb3VwOiBlLmNvbGxlY3Rpb25Hcm91cCxcbiAgICAgICAgICAgICAgICBmaWVsZHM6IGUuZmllbGRzLm1hcCgoZSA9PiBbIGUuZmllbGRQYXRoLmNhbm9uaWNhbFN0cmluZygpLCBlLmtpbmQgXSkpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KHQpO1xuICAgICAgICBkZWxldGUgci5pbmRleElkO1xuICAgICAgICAvLyBgaW5kZXhJZGAgaXMgYXV0by1wb3B1bGF0ZWQgYnkgSW5kZXhlZERiXG4gICAgICAgIGNvbnN0IGkgPSBuLmFkZChyKTtcbiAgICAgICAgaWYgKHQuaW5kZXhTdGF0ZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9pbmRleFN0YXRlU3RvcmUoZSk7XG4gICAgICAgICAgICByZXR1cm4gaS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgICAgICBuLnB1dChfX1BSSVZBVEVfdG9EYkluZGV4U3RhdGUoZSwgdGhpcy51c2VyLCB0LmluZGV4U3RhdGUuc2VxdWVuY2VOdW1iZXIsIHQuaW5kZXhTdGF0ZS5vZmZzZXQpKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaS5uZXh0KCk7XG4gICAgfVxuICAgIGRlbGV0ZUZpZWxkSW5kZXgoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2luZGV4Q29uZmlndXJhdGlvblN0b3JlKGUpLCByID0gX19QUklWQVRFX2luZGV4U3RhdGVTdG9yZShlKSwgaSA9IF9fUFJJVkFURV9pbmRleEVudHJpZXNTdG9yZShlKTtcbiAgICAgICAgcmV0dXJuIG4uZGVsZXRlKHQuaW5kZXhJZCkubmV4dCgoKCkgPT4gci5kZWxldGUoSURCS2V5UmFuZ2UuYm91bmQoWyB0LmluZGV4SWQgXSwgWyB0LmluZGV4SWQgKyAxIF0sIFxuICAgICAgICAvKmxvd2VyT3Blbj0qLyAhMSwgXG4gICAgICAgIC8qdXBwZXJPcGVuPSovICEwKSkpKS5uZXh0KCgoKSA9PiBpLmRlbGV0ZShJREJLZXlSYW5nZS5ib3VuZChbIHQuaW5kZXhJZCBdLCBbIHQuaW5kZXhJZCArIDEgXSwgXG4gICAgICAgIC8qbG93ZXJPcGVuPSovICExLCBcbiAgICAgICAgLyp1cHBlck9wZW49Ki8gITApKSkpO1xuICAgIH1cbiAgICBkZWxldGVBbGxGaWVsZEluZGV4ZXMoZSkge1xuICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX2luZGV4Q29uZmlndXJhdGlvblN0b3JlKGUpLCBuID0gX19QUklWQVRFX2luZGV4RW50cmllc1N0b3JlKGUpLCByID0gX19QUklWQVRFX2luZGV4U3RhdGVTdG9yZShlKTtcbiAgICAgICAgcmV0dXJuIHQuSCgpLm5leHQoKCgpID0+IG4uSCgpKSkubmV4dCgoKCkgPT4gci5IKCkpKTtcbiAgICB9XG4gICAgY3JlYXRlVGFyZ2V0SW5kZXhlcyhlLCB0KSB7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaCh0aGlzLnVuKHQpLCAodCA9PiB0aGlzLmdldEluZGV4VHlwZShlLCB0KS5uZXh0KChuID0+IHtcbiAgICAgICAgICAgIGlmICgwIC8qIEluZGV4VHlwZS5OT05FICovID09PSBuIHx8IDEgLyogSW5kZXhUeXBlLlBBUlRJQUwgKi8gPT09IG4pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gbmV3IF9fUFJJVkFURV9UYXJnZXRJbmRleE1hdGNoZXIodCkuc24oKTtcbiAgICAgICAgICAgICAgICBpZiAobnVsbCAhPSBuKSByZXR1cm4gdGhpcy5hZGRGaWVsZEluZGV4KGUsIG4pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSkpKTtcbiAgICB9XG4gICAgZ2V0RG9jdW1lbnRzTWF0Y2hpbmdUYXJnZXQoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2luZGV4RW50cmllc1N0b3JlKGUpO1xuICAgICAgICBsZXQgciA9ICEwO1xuICAgICAgICBjb25zdCBpID0gbmV3IE1hcDtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKHRoaXMudW4odCksICh0ID0+IHRoaXMuY24oZSwgdCkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICByICYmIChyID0gISFlKSwgaS5zZXQodCwgZSk7XG4gICAgICAgIH0pKSkpLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgIGlmIChyKSB7XG4gICAgICAgICAgICAgICAgbGV0IGUgPSBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKTtcbiAgICAgICAgICAgICAgICBjb25zdCByID0gW107XG4gICAgICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKGksICgoaSwgcykgPT4ge1xuICAgICAgICAgICAgICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoXCJJbmRleGVkRGJJbmRleE1hbmFnZXJcIiwgYFVzaW5nIGluZGV4ICR7ZnVuY3Rpb24gX19QUklWQVRFX2ZpZWxkSW5kZXhUb1N0cmluZyhlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYGlkPSR7ZS5pbmRleElkfXxjZz0ke2UuY29sbGVjdGlvbkdyb3VwfXxmPSR7ZS5maWVsZHMubWFwKChlID0+IGAke2UuZmllbGRQYXRofToke2Uua2luZH1gKSkuam9pbihcIixcIil9YDtcbiAgICAgICAgICAgICAgICAgICAgfShpKX0gdG8gZXhlY3V0ZSAke19fUFJJVkFURV9jYW5vbmlmeVRhcmdldCh0KX1gKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbyA9IGZ1bmN0aW9uIF9fUFJJVkFURV90YXJnZXRHZXRBcnJheVZhbHVlcyhlLCB0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2ZpZWxkSW5kZXhHZXRBcnJheVNlZ21lbnQodCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodm9pZCAwID09PSBuKSByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiBfX1BSSVZBVEVfdGFyZ2V0R2V0RmllbGRGaWx0ZXJzRm9yUGF0aChlLCBuLmZpZWxkUGF0aCkpIHN3aXRjaCAodC5vcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiYXJyYXktY29udGFpbnMtYW55XCIgLyogT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlNfQU5ZICovIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC52YWx1ZS5hcnJheVZhbHVlLnZhbHVlcyB8fCBbXTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiYXJyYXktY29udGFpbnNcIiAvKiBPcGVyYXRvci5BUlJBWV9DT05UQUlOUyAqLyA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsgdC52YWx1ZSBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlbWFpbmluZyBmaWx0ZXJzIGFyZSBub3QgYXJyYXkgZmlsdGVycy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICogUmV0dXJucyB0aGUgbGlzdCBvZiB2YWx1ZXMgdGhhdCBhcmUgdXNlZCBpbiAhPSBvciBOT1RfSU4gZmlsdGVycy4gUmV0dXJuc1xuICogYG51bGxgIGlmIHRoZXJlIGFyZSBubyBzdWNoIGZpbHRlcnMuXG4gKi8gKHMsIGkpLCBfID0gZnVuY3Rpb24gX19QUklWQVRFX3RhcmdldEdldE5vdEluVmFsdWVzKGUsIHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBuZXcgTWFwO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCByIG9mIF9fUFJJVkFURV9maWVsZEluZGV4R2V0RGlyZWN0aW9uYWxTZWdtZW50cyh0KSkgZm9yIChjb25zdCB0IG9mIF9fUFJJVkFURV90YXJnZXRHZXRGaWVsZEZpbHRlcnNGb3JQYXRoKGUsIHIuZmllbGRQYXRoKSkgc3dpdGNoICh0Lm9wKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCI9PVwiIC8qIE9wZXJhdG9yLkVRVUFMICovIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImluXCIgLyogT3BlcmF0b3IuSU4gKi8gOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVuY29kZSBlcXVhbGl0eSBwcmVmaXgsIHdoaWNoIGlzIGVuY29kZWQgaW4gdGhlIGluZGV4IHZhbHVlIGJlZm9yZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZSBpbmVxdWFsaXR5IChlLmcuIGBhID09ICdhJyAmJiBiICE9ICdiJ2AgaXMgZW5jb2RlZCB0b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGB2YWx1ZSAhPSAnYWInYCkuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5zZXQoci5maWVsZFBhdGguY2Fub25pY2FsU3RyaW5nKCksIHQudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJub3QtaW5cIiAvKiBPcGVyYXRvci5OT1RfSU4gKi8gOlxuICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiIT1cIiAvKiBPcGVyYXRvci5OT1RfRVFVQUwgKi8gOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vdEluL05vdEVxdWFsIGlzIGFsd2F5cyBhIHN1ZmZpeC4gVGhlcmUgY2Fubm90IGJlIGFueSByZW1haW5pbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZWdtZW50cyBhbmQgaGVuY2Ugd2UgY2FuIHJldHVybiBlYXJseSBoZXJlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuLnNldChyLmZpZWxkUGF0aC5jYW5vbmljYWxTdHJpbmcoKSwgdC52YWx1ZSksIEFycmF5LmZyb20obi52YWx1ZXMoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVtYWluaW5nIGZpbHRlcnMgY2Fubm90IGJlIHVzZWQgYXMgbm90SW4gYm91bmRzLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gKiBSZXR1cm5zIGEgbG93ZXIgYm91bmQgb2YgZmllbGQgdmFsdWVzIHRoYXQgY2FuIGJlIHVzZWQgYXMgYSBzdGFydGluZyBwb2ludCB0b1xuICogc2NhbiB0aGUgaW5kZXggZGVmaW5lZCBieSBgZmllbGRJbmRleGAuIFJldHVybnMgYE1JTl9WQUxVRWAgaWYgbm8gbG93ZXIgYm91bmRcbiAqIGV4aXN0cy5cbiAqLyAocywgaSksIGEgPSBmdW5jdGlvbiBfX1BSSVZBVEVfdGFyZ2V0R2V0TG93ZXJCb3VuZChlLCB0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgciA9ICEwO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRm9yIGVhY2ggc2VnbWVudCwgcmV0cmlldmUgYSBsb3dlciBib3VuZCBpZiB0aGVyZSBpcyBhIHN1aXRhYmxlIGZpbHRlciBvclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc3RhcnRBdC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgaSBvZiBfX1BSSVZBVEVfZmllbGRJbmRleEdldERpcmVjdGlvbmFsU2VnbWVudHModCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gMCAvKiBJbmRleEtpbmQuQVNDRU5ESU5HICovID09PSBpLmtpbmQgPyBfX1BSSVZBVEVfdGFyZ2V0R2V0QXNjZW5kaW5nQm91bmQoZSwgaS5maWVsZFBhdGgsIGUuc3RhcnRBdCkgOiBfX1BSSVZBVEVfdGFyZ2V0R2V0RGVzY2VuZGluZ0JvdW5kKGUsIGkuZmllbGRQYXRoLCBlLnN0YXJ0QXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4ucHVzaCh0LnZhbHVlKSwgciAmJiAociA9IHQuaW5jbHVzaXZlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQm91bmQobiwgcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gKiBSZXR1cm5zIGFuIHVwcGVyIGJvdW5kIG9mIGZpZWxkIHZhbHVlcyB0aGF0IGNhbiBiZSB1c2VkIGFzIGFuIGVuZGluZyBwb2ludFxuICogd2hlbiBzY2FubmluZyB0aGUgaW5kZXggZGVmaW5lZCBieSBgZmllbGRJbmRleGAuIFJldHVybnMgYE1BWF9WQUxVRWAgaWYgbm9cbiAqIHVwcGVyIGJvdW5kIGV4aXN0cy5cbiAqLyAocywgaSksIHUgPSBmdW5jdGlvbiBfX1BSSVZBVEVfdGFyZ2V0R2V0VXBwZXJCb3VuZChlLCB0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgciA9ICEwO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRm9yIGVhY2ggc2VnbWVudCwgcmV0cmlldmUgYW4gdXBwZXIgYm91bmQgaWYgdGhlcmUgaXMgYSBzdWl0YWJsZSBmaWx0ZXIgb3JcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVuZEF0LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBpIG9mIF9fUFJJVkFURV9maWVsZEluZGV4R2V0RGlyZWN0aW9uYWxTZWdtZW50cyh0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSAwIC8qIEluZGV4S2luZC5BU0NFTkRJTkcgKi8gPT09IGkua2luZCA/IF9fUFJJVkFURV90YXJnZXRHZXREZXNjZW5kaW5nQm91bmQoZSwgaS5maWVsZFBhdGgsIGUuZW5kQXQpIDogX19QUklWQVRFX3RhcmdldEdldEFzY2VuZGluZ0JvdW5kKGUsIGkuZmllbGRQYXRoLCBlLmVuZEF0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLnB1c2godC52YWx1ZSksIHIgJiYgKHIgPSB0LmluY2x1c2l2ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEJvdW5kKG4sIHIpO1xuICAgICAgICAgICAgICAgICAgICB9KHMsIGkpLCBjID0gdGhpcy5sbihpLCBzLCBhKSwgbCA9IHRoaXMubG4oaSwgcywgdSksIGggPSB0aGlzLmhuKGksIHMsIF8pLCBQID0gdGhpcy5QbihpLmluZGV4SWQsIG8sIGMsIGEuaW5jbHVzaXZlLCBsLCB1LmluY2x1c2l2ZSwgaCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaChQLCAoaSA9PiBuLmooaSwgdC5saW1pdCkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0LmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBEb2N1bWVudEtleS5mcm9tU2VnbWVudHModC5kb2N1bWVudEtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5oYXMobikgfHwgKGUgPSBlLmFkZChuKSwgci5wdXNoKG4pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgfSkpKSk7XG4gICAgICAgICAgICAgICAgfSkpLm5leHQoKCgpID0+IHIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShudWxsKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB1bihlKSB7XG4gICAgICAgIGxldCB0ID0gdGhpcy5hbi5nZXQoZSk7XG4gICAgICAgIGlmICh0KSByZXR1cm4gdDtcbiAgICAgICAgaWYgKDAgPT09IGUuZmlsdGVycy5sZW5ndGgpIHQgPSBbIGUgXTsgZWxzZSB7XG4gICAgICAgICAgICB0ID0gX19QUklWQVRFX2dldERuZlRlcm1zKENvbXBvc2l0ZUZpbHRlci5jcmVhdGUoZS5maWx0ZXJzLCBcImFuZFwiIC8qIENvbXBvc2l0ZU9wZXJhdG9yLkFORCAqLykpLm1hcCgodCA9PiBfX1BSSVZBVEVfbmV3VGFyZ2V0KGUucGF0aCwgZS5jb2xsZWN0aW9uR3JvdXAsIGUub3JkZXJCeSwgdC5nZXRGaWx0ZXJzKCksIGUubGltaXQsIGUuc3RhcnRBdCwgZS5lbmRBdCkpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5hbi5zZXQoZSwgdCksIHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdHMgYSBrZXkgcmFuZ2UgcXVlcnkgb24gYERiSW5kZXhFbnRyeVN0b3JlYCB0aGF0IHVuaW9ucyBhbGxcbiAgICAgKiBib3VuZHMuXG4gICAgICovICAgIFBuKGUsIHQsIG4sIHIsIGksIHMsIG8pIHtcbiAgICAgICAgLy8gVGhlIG51bWJlciBvZiB0b3RhbCBpbmRleCBzY2FucyB3ZSB1bmlvbiB0b2dldGhlci4gVGhpcyBpcyBzaW1pbGFyIHRvIGFcbiAgICAgICAgLy8gZGlzdHJpYnV0ZWQgbm9ybWFsIGZvcm0sIGJ1dCBhZGFwdGVkIGZvciBhcnJheSB2YWx1ZXMuIFdlIGNyZWF0ZSBhIHNpbmdsZVxuICAgICAgICAvLyBpbmRleCByYW5nZSBwZXIgdmFsdWUgaW4gYW4gQVJSQVlfQ09OVEFJTlMgb3IgQVJSQVlfQ09OVEFJTlNfQU5ZIGZpbHRlclxuICAgICAgICAvLyBjb21iaW5lZCB3aXRoIHRoZSB2YWx1ZXMgZnJvbSB0aGUgcXVlcnkgYm91bmRzLlxuICAgICAgICBjb25zdCBfID0gKG51bGwgIT0gdCA/IHQubGVuZ3RoIDogMSkgKiBNYXRoLm1heChuLmxlbmd0aCwgaS5sZW5ndGgpLCBhID0gXyAvIChudWxsICE9IHQgPyB0Lmxlbmd0aCA6IDEpLCB1ID0gW107XG4gICAgICAgIGZvciAobGV0IGMgPSAwOyBjIDwgXzsgKytjKSB7XG4gICAgICAgICAgICBjb25zdCBfID0gdCA/IHRoaXMuSW4odFtjIC8gYV0pIDogVGUsIGwgPSB0aGlzLlRuKGUsIF8sIG5bYyAlIGFdLCByKSwgaCA9IHRoaXMuRW4oZSwgXywgaVtjICUgYV0sIHMpLCBQID0gby5tYXAoKHQgPT4gdGhpcy5UbihlLCBfLCB0LCBcbiAgICAgICAgICAgIC8qIGluY2x1c2l2ZT0gKi8gITApKSk7XG4gICAgICAgICAgICB1LnB1c2goLi4udGhpcy5jcmVhdGVSYW5nZShsLCBoLCBQKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHU7XG4gICAgfVxuICAgIC8qKiBHZW5lcmF0ZXMgdGhlIGxvd2VyIGJvdW5kIGZvciBgYXJyYXlWYWx1ZWAgYW5kIGBkaXJlY3Rpb25hbFZhbHVlYC4gKi8gICAgVG4oZSwgdCwgbiwgcikge1xuICAgICAgICBjb25zdCBpID0gbmV3IF9fUFJJVkFURV9JbmRleEVudHJ5KGUsIERvY3VtZW50S2V5LmVtcHR5KCksIHQsIG4pO1xuICAgICAgICByZXR1cm4gciA/IGkgOiBpLkh0KCk7XG4gICAgfVxuICAgIC8qKiBHZW5lcmF0ZXMgdGhlIHVwcGVyIGJvdW5kIGZvciBgYXJyYXlWYWx1ZWAgYW5kIGBkaXJlY3Rpb25hbFZhbHVlYC4gKi8gICAgRW4oZSwgdCwgbiwgcikge1xuICAgICAgICBjb25zdCBpID0gbmV3IF9fUFJJVkFURV9JbmRleEVudHJ5KGUsIERvY3VtZW50S2V5LmVtcHR5KCksIHQsIG4pO1xuICAgICAgICByZXR1cm4gciA/IGkuSHQoKSA6IGk7XG4gICAgfVxuICAgIGNuKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBfX1BSSVZBVEVfVGFyZ2V0SW5kZXhNYXRjaGVyKHQpLCByID0gbnVsbCAhPSB0LmNvbGxlY3Rpb25Hcm91cCA/IHQuY29sbGVjdGlvbkdyb3VwIDogdC5wYXRoLmxhc3RTZWdtZW50KCk7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEZpZWxkSW5kZXhlcyhlLCByKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIC8vIFJldHVybiB0aGUgaW5kZXggd2l0aCB0aGUgbW9zdCBudW1iZXIgb2Ygc2VnbWVudHMuXG4gICAgICAgICAgICBsZXQgdCA9IG51bGw7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHIgb2YgZSkge1xuICAgICAgICAgICAgICAgIG4uZW4ocikgJiYgKCF0IHx8IHIuZmllbGRzLmxlbmd0aCA+IHQuZmllbGRzLmxlbmd0aCkgJiYgKHQgPSByKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0O1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGdldEluZGV4VHlwZShlLCB0KSB7XG4gICAgICAgIGxldCBuID0gMiAvKiBJbmRleFR5cGUuRlVMTCAqLztcbiAgICAgICAgY29uc3QgciA9IHRoaXMudW4odCk7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaChyLCAodCA9PiB0aGlzLmNuKGUsIHQpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgZSA/IDAgLyogSW5kZXhUeXBlLk5PTkUgKi8gIT09IG4gJiYgZS5maWVsZHMubGVuZ3RoIDwgZnVuY3Rpb24gX19QUklWQVRFX3RhcmdldEdldFNlZ21lbnRDb3VudChlKSB7XG4gICAgICAgICAgICAgICAgbGV0IHQgPSBuZXcgU29ydGVkU2V0KEZpZWxkUGF0aCQxLmNvbXBhcmF0b3IpLCBuID0gITE7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCByIG9mIGUuZmlsdGVycykgZm9yIChjb25zdCBlIG9mIHIuZ2V0RmxhdHRlbmVkRmlsdGVycygpKSBcbiAgICAgICAgICAgICAgICAvLyBfX25hbWVfXyBpcyBub3QgYW4gZXhwbGljaXQgc2VnbWVudCBvZiBhbnkgaW5kZXgsIHNvIHdlIGRvbid0IG5lZWQgdG9cbiAgICAgICAgICAgICAgICAvLyBjb3VudCBpdC5cbiAgICAgICAgICAgICAgICBlLmZpZWxkLmlzS2V5RmllbGQoKSB8fCAoXG4gICAgICAgICAgICAgICAgLy8gQVJSQVlfQ09OVEFJTlMgb3IgQVJSQVlfQ09OVEFJTlNfQU5ZIGZpbHRlcnMgbXVzdCBiZSBjb3VudGVkIHNlcGFyYXRlbHkuXG4gICAgICAgICAgICAgICAgLy8gRm9yIGluc3RhbmNlLCBpdCBpcyBwb3NzaWJsZSB0byBoYXZlIGFuIGluZGV4IGZvciBcImEgQVJSQVkgYSBBU0NcIi4gRXZlblxuICAgICAgICAgICAgICAgIC8vIHRob3VnaCB0aGVzZSBhcmUgb24gdGhlIHNhbWUgZmllbGQsIHRoZXkgc2hvdWxkIGJlIGNvdW50ZWQgYXMgdHdvXG4gICAgICAgICAgICAgICAgLy8gc2VwYXJhdGUgc2VnbWVudHMgaW4gYW4gaW5kZXguXG4gICAgICAgICAgICAgICAgXCJhcnJheS1jb250YWluc1wiIC8qIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TICovID09PSBlLm9wIHx8IFwiYXJyYXktY29udGFpbnMtYW55XCIgLyogT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlNfQU5ZICovID09PSBlLm9wID8gbiA9ICEwIDogdCA9IHQuYWRkKGUuZmllbGQpKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG4gb2YgZS5vcmRlckJ5KSBcbiAgICAgICAgICAgICAgICAvLyBfX25hbWVfXyBpcyBub3QgYW4gZXhwbGljaXQgc2VnbWVudCBvZiBhbnkgaW5kZXgsIHNvIHdlIGRvbid0IG5lZWQgdG9cbiAgICAgICAgICAgICAgICAvLyBjb3VudCBpdC5cbiAgICAgICAgICAgICAgICBuLmZpZWxkLmlzS2V5RmllbGQoKSB8fCAodCA9IHQuYWRkKG4uZmllbGQpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdC5zaXplICsgKG4gPyAxIDogMCk7XG4gICAgICAgICAgICB9KHQpICYmIChuID0gMSAvKiBJbmRleFR5cGUuUEFSVElBTCAqLykgOiBuID0gMCAvKiBJbmRleFR5cGUuTk9ORSAqLztcbiAgICAgICAgfSkpKSkubmV4dCgoKCkgPT4gXG4gICAgICAgIC8vIE9SIHF1ZXJpZXMgaGF2ZSBtb3JlIHRoYW4gb25lIHN1Yi10YXJnZXQgKG9uZSBzdWItdGFyZ2V0IHBlciBETkYgdGVybSkuIFdlIGN1cnJlbnRseSBjb25zaWRlclxuICAgICAgICAvLyBPUiBxdWVyaWVzIHRoYXQgaGF2ZSBhIGBsaW1pdGAgdG8gaGF2ZSBhIHBhcnRpYWwgaW5kZXguIEZvciBzdWNoIHF1ZXJpZXMgd2UgcGVyZm9ybSBzb3J0aW5nXG4gICAgICAgIC8vIGFuZCBhcHBseSB0aGUgbGltaXQgaW4gbWVtb3J5IGFzIGEgcG9zdC1wcm9jZXNzaW5nIHN0ZXAuXG4gICAgICAgIGZ1bmN0aW9uIF9fUFJJVkFURV90YXJnZXRIYXNMaW1pdChlKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbCAhPT0gZS5saW1pdDtcbiAgICAgICAgfSh0KSAmJiByLmxlbmd0aCA+IDEgJiYgMiAvKiBJbmRleFR5cGUuRlVMTCAqLyA9PT0gbiA/IDEgLyogSW5kZXhUeXBlLlBBUlRJQUwgKi8gOiBuKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGJ5dGUgZW5jb2RlZCBmb3JtIG9mIHRoZSBkaXJlY3Rpb25hbCB2YWx1ZXMgaW4gdGhlIGZpZWxkIGluZGV4LlxuICAgICAqIFJldHVybnMgYG51bGxgIGlmIHRoZSBkb2N1bWVudCBkb2VzIG5vdCBoYXZlIGFsbCBmaWVsZHMgc3BlY2lmaWVkIGluIHRoZVxuICAgICAqIGluZGV4LlxuICAgICAqLyAgICBkbihlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgX19QUklWQVRFX0luZGV4Qnl0ZUVuY29kZXI7XG4gICAgICAgIGZvciAoY29uc3QgciBvZiBfX1BSSVZBVEVfZmllbGRJbmRleEdldERpcmVjdGlvbmFsU2VnbWVudHMoZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0LmRhdGEuZmllbGQoci5maWVsZFBhdGgpO1xuICAgICAgICAgICAgaWYgKG51bGwgPT0gZSkgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICBjb25zdCBpID0gbi5qdChyLmtpbmQpO1xuICAgICAgICAgICAgX19QUklWQVRFX0ZpcmVzdG9yZUluZGV4VmFsdWVXcml0ZXIuU3QuaHQoZSwgaSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG4uVXQoKTtcbiAgICB9XG4gICAgLyoqIEVuY29kZXMgYSBzaW5nbGUgdmFsdWUgdG8gdGhlIGFzY2VuZGluZyBpbmRleCBmb3JtYXQuICovICAgIEluKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IG5ldyBfX1BSSVZBVEVfSW5kZXhCeXRlRW5jb2RlcjtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9GaXJlc3RvcmVJbmRleFZhbHVlV3JpdGVyLlN0Lmh0KGUsIHQuanQoMCAvKiBJbmRleEtpbmQuQVNDRU5ESU5HICovKSksIFxuICAgICAgICB0LlV0KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYW4gZW5jb2RlZCBmb3JtIG9mIHRoZSBkb2N1bWVudCBrZXkgdGhhdCBzb3J0cyBiYXNlZCBvbiB0aGUga2V5XG4gICAgICogb3JkZXJpbmcgb2YgdGhlIGZpZWxkIGluZGV4LlxuICAgICAqLyAgICBBbihlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgX19QUklWQVRFX0luZGV4Qnl0ZUVuY29kZXI7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfRmlyZXN0b3JlSW5kZXhWYWx1ZVdyaXRlci5TdC5odChfX1BSSVZBVEVfcmVmVmFsdWUodGhpcy5kYXRhYmFzZUlkLCB0KSwgbi5qdChmdW5jdGlvbiBfX1BSSVZBVEVfZmllbGRJbmRleEdldEtleU9yZGVyKGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfZmllbGRJbmRleEdldERpcmVjdGlvbmFsU2VnbWVudHMoZSk7XG4gICAgICAgICAgICByZXR1cm4gMCA9PT0gdC5sZW5ndGggPyAwIC8qIEluZGV4S2luZC5BU0NFTkRJTkcgKi8gOiB0W3QubGVuZ3RoIC0gMV0ua2luZDtcbiAgICAgICAgfShlKSkpLCBuLlV0KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVuY29kZXMgdGhlIGdpdmVuIGZpZWxkIHZhbHVlcyBhY2NvcmRpbmcgdG8gdGhlIHNwZWNpZmljYXRpb24gaW4gYHRhcmdldGAuXG4gICAgICogRm9yIElOIHF1ZXJpZXMsIGEgbGlzdCBvZiBwb3NzaWJsZSB2YWx1ZXMgaXMgcmV0dXJuZWQuXG4gICAgICovICAgIGhuKGUsIHQsIG4pIHtcbiAgICAgICAgaWYgKG51bGwgPT09IG4pIHJldHVybiBbXTtcbiAgICAgICAgbGV0IHIgPSBbXTtcbiAgICAgICAgci5wdXNoKG5ldyBfX1BSSVZBVEVfSW5kZXhCeXRlRW5jb2Rlcik7XG4gICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgZm9yIChjb25zdCBzIG9mIF9fUFJJVkFURV9maWVsZEluZGV4R2V0RGlyZWN0aW9uYWxTZWdtZW50cyhlKSkge1xuICAgICAgICAgICAgY29uc3QgZSA9IG5baSsrXTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgbiBvZiByKSBpZiAodGhpcy5Sbih0LCBzLmZpZWxkUGF0aCkgJiYgaXNBcnJheShlKSkgciA9IHRoaXMuVm4ociwgcywgZSk7IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBuLmp0KHMua2luZCk7XG4gICAgICAgICAgICAgICAgX19QUklWQVRFX0ZpcmVzdG9yZUluZGV4VmFsdWVXcml0ZXIuU3QuaHQoZSwgdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMubW4ocik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVuY29kZXMgdGhlIGdpdmVuIGJvdW5kcyBhY2NvcmRpbmcgdG8gdGhlIHNwZWNpZmljYXRpb24gaW4gYHRhcmdldGAuIEZvciBJTlxuICAgICAqIHF1ZXJpZXMsIGEgbGlzdCBvZiBwb3NzaWJsZSB2YWx1ZXMgaXMgcmV0dXJuZWQuXG4gICAgICovICAgIGxuKGUsIHQsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaG4oZSwgdCwgbi5wb3NpdGlvbik7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIHRoZSBieXRlIHJlcHJlc2VudGF0aW9uIGZvciB0aGUgcHJvdmlkZWQgZW5jb2RlcnMuICovICAgIG1uKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IGUubGVuZ3RoOyArK24pIHRbbl0gPSBlW25dLlV0KCk7XG4gICAgICAgIHJldHVybiB0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgc2VwYXJhdGUgZW5jb2RlciBmb3IgZWFjaCBlbGVtZW50IG9mIGFuIGFycmF5LlxuICAgICAqXG4gICAgICogVGhlIG1ldGhvZCBhcHBlbmRzIGVhY2ggdmFsdWUgdG8gYWxsIGV4aXN0aW5nIGVuY29kZXJzIChlLmcuIGZpbHRlcihcImFcIixcbiAgICAgKiBcIj09XCIsIFwiYTFcIikuZmlsdGVyKFwiYlwiLCBcImluXCIsIFtcImIxXCIsIFwiYjJcIl0pIGJlY29tZXMgW1wiYTEsYjFcIiwgXCJhMSxiMlwiXSkuIEFcbiAgICAgKiBsaXN0IG9mIG5ldyBlbmNvZGVycyBpcyByZXR1cm5lZC5cbiAgICAgKi8gICAgVm4oZSwgdCwgbikge1xuICAgICAgICBjb25zdCByID0gWyAuLi5lIF0sIGkgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIG4uYXJyYXlWYWx1ZS52YWx1ZXMgfHwgW10pIGZvciAoY29uc3QgbiBvZiByKSB7XG4gICAgICAgICAgICBjb25zdCByID0gbmV3IF9fUFJJVkFURV9JbmRleEJ5dGVFbmNvZGVyO1xuICAgICAgICAgICAgci5zZWVkKG4uVXQoKSksIF9fUFJJVkFURV9GaXJlc3RvcmVJbmRleFZhbHVlV3JpdGVyLlN0Lmh0KGUsIHIuanQodC5raW5kKSksIGkucHVzaChyKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaTtcbiAgICB9XG4gICAgUm4oZSwgdCkge1xuICAgICAgICByZXR1cm4gISFlLmZpbHRlcnMuZmluZCgoZSA9PiBlIGluc3RhbmNlb2YgRmllbGRGaWx0ZXIgJiYgZS5maWVsZC5pc0VxdWFsKHQpICYmIChcImluXCIgLyogT3BlcmF0b3IuSU4gKi8gPT09IGUub3AgfHwgXCJub3QtaW5cIiAvKiBPcGVyYXRvci5OT1RfSU4gKi8gPT09IGUub3ApKSk7XG4gICAgfVxuICAgIGdldEZpZWxkSW5kZXhlcyhlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfaW5kZXhDb25maWd1cmF0aW9uU3RvcmUoZSksIHIgPSBfX1BSSVZBVEVfaW5kZXhTdGF0ZVN0b3JlKGUpO1xuICAgICAgICByZXR1cm4gKHQgPyBuLlcoXCJjb2xsZWN0aW9uR3JvdXBJbmRleFwiLCBJREJLZXlSYW5nZS5ib3VuZCh0LCB0KSkgOiBuLlcoKSkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0ID0gW107XG4gICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2goZSwgKGUgPT4gci5nZXQoWyBlLmluZGV4SWQsIHRoaXMudWlkIF0pLm5leHQoKG4gPT4ge1xuICAgICAgICAgICAgICAgIHQucHVzaChmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbURiSW5kZXhDb25maWd1cmF0aW9uKGUsIHQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IHQgPyBuZXcgSW5kZXhTdGF0ZSh0LnNlcXVlbmNlTnVtYmVyLCBuZXcgSW5kZXhPZmZzZXQoX19QUklWQVRFX2Zyb21EYlRpbWVzdGFtcCh0LnJlYWRUaW1lKSwgbmV3IERvY3VtZW50S2V5KF9fUFJJVkFURV9kZWNvZGVSZXNvdXJjZVBhdGgodC5kb2N1bWVudEtleSkpLCB0Lmxhcmdlc3RCYXRjaElkKSkgOiBJbmRleFN0YXRlLmVtcHR5KCksIHIgPSBlLmZpZWxkcy5tYXAoKChbZSwgdF0pID0+IG5ldyBJbmRleFNlZ21lbnQoRmllbGRQYXRoJDEuZnJvbVNlcnZlckZvcm1hdChlKSwgdCkpKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBGaWVsZEluZGV4KGUuaW5kZXhJZCwgZS5jb2xsZWN0aW9uR3JvdXAsIHIsIG4pO1xuICAgICAgICAgICAgICAgIH0oZSwgbikpO1xuICAgICAgICAgICAgfSkpKSkubmV4dCgoKCkgPT4gdCkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGdldE5leHRDb2xsZWN0aW9uR3JvdXBUb1VwZGF0ZShlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEZpZWxkSW5kZXhlcyhlKS5uZXh0KChlID0+IDAgPT09IGUubGVuZ3RoID8gbnVsbCA6IChlLnNvcnQoKChlLCB0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuID0gZS5pbmRleFN0YXRlLnNlcXVlbmNlTnVtYmVyIC0gdC5pbmRleFN0YXRlLnNlcXVlbmNlTnVtYmVyO1xuICAgICAgICAgICAgcmV0dXJuIDAgIT09IG4gPyBuIDogX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IoZS5jb2xsZWN0aW9uR3JvdXAsIHQuY29sbGVjdGlvbkdyb3VwKTtcbiAgICAgICAgfSkpLCBlWzBdLmNvbGxlY3Rpb25Hcm91cCkpKTtcbiAgICB9XG4gICAgdXBkYXRlQ29sbGVjdGlvbkdyb3VwKGUsIHQsIG4pIHtcbiAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV9pbmRleENvbmZpZ3VyYXRpb25TdG9yZShlKSwgaSA9IF9fUFJJVkFURV9pbmRleFN0YXRlU3RvcmUoZSk7XG4gICAgICAgIHJldHVybiB0aGlzLmZuKGUpLm5leHQoKGUgPT4gci5XKFwiY29sbGVjdGlvbkdyb3VwSW5kZXhcIiwgSURCS2V5UmFuZ2UuYm91bmQodCwgdCkpLm5leHQoKHQgPT4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2godCwgKHQgPT4gaS5wdXQoX19QUklWQVRFX3RvRGJJbmRleFN0YXRlKHQuaW5kZXhJZCwgdGhpcy51c2VyLCBlLCBuKSkpKSkpKSk7XG4gICAgfVxuICAgIHVwZGF0ZUluZGV4RW50cmllcyhlLCB0KSB7XG4gICAgICAgIC8vIFBvcnRpbmcgTm90ZTogYGdldEZpZWxkSW5kZXhlcygpYCBvbiBXZWIgZG9lcyBub3QgY2FjaGUgaW5kZXggbG9va3VwcyBhc1xuICAgICAgICAvLyBpdCBjb3VsZCBiZSB1c2VkIGFjcm9zcyBkaWZmZXJlbnQgSW5kZXhlZERCIHRyYW5zYWN0aW9ucy4gQXMgYW55IGNhY2hlZFxuICAgICAgICAvLyBkYXRhIG1pZ2h0IGJlIGludmFsaWRhdGVkIGJ5IG90aGVyIG11bHRpLXRhYiBjbGllbnRzLCB3ZSBjYW4gb25seSB0cnVzdFxuICAgICAgICAvLyBkYXRhIHdpdGhpbiBhIHNpbmdsZSBJbmRleGVkREIgdHJhbnNhY3Rpb24uIFdlIHRoZXJlZm9yZSBhZGQgYSBjYWNoZVxuICAgICAgICAvLyBoZXJlLlxuICAgICAgICBjb25zdCBuID0gbmV3IE1hcDtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKHQsICgodCwgcikgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IG4uZ2V0KHQuY29sbGVjdGlvbkdyb3VwKTtcbiAgICAgICAgICAgIHJldHVybiAoaSA/IFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKGkpIDogdGhpcy5nZXRGaWVsZEluZGV4ZXMoZSwgdC5jb2xsZWN0aW9uR3JvdXApKS5uZXh0KChpID0+IChuLnNldCh0LmNvbGxlY3Rpb25Hcm91cCwgaSksIFxuICAgICAgICAgICAgUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2goaSwgKG4gPT4gdGhpcy5nbihlLCB0LCBuKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBpID0gdGhpcy5wbihyLCBuKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdC5pc0VxdWFsKGkpID8gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKSA6IHRoaXMueW4oZSwgciwgbiwgdCwgaSk7XG4gICAgICAgICAgICB9KSkpKSkpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB3bihlLCB0LCBuLCByKSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfaW5kZXhFbnRyaWVzU3RvcmUoZSkucHV0KHtcbiAgICAgICAgICAgIGluZGV4SWQ6IHIuaW5kZXhJZCxcbiAgICAgICAgICAgIHVpZDogdGhpcy51aWQsXG4gICAgICAgICAgICBhcnJheVZhbHVlOiByLmFycmF5VmFsdWUsXG4gICAgICAgICAgICBkaXJlY3Rpb25hbFZhbHVlOiByLmRpcmVjdGlvbmFsVmFsdWUsXG4gICAgICAgICAgICBvcmRlcmVkRG9jdW1lbnRLZXk6IHRoaXMuQW4obiwgdC5rZXkpLFxuICAgICAgICAgICAgZG9jdW1lbnRLZXk6IHQua2V5LnBhdGgudG9BcnJheSgpXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBTbihlLCB0LCBuLCByKSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfaW5kZXhFbnRyaWVzU3RvcmUoZSkuZGVsZXRlKFsgci5pbmRleElkLCB0aGlzLnVpZCwgci5hcnJheVZhbHVlLCByLmRpcmVjdGlvbmFsVmFsdWUsIHRoaXMuQW4obiwgdC5rZXkpLCB0LmtleS5wYXRoLnRvQXJyYXkoKSBdKTtcbiAgICB9XG4gICAgZ24oZSwgdCwgbikge1xuICAgICAgICBjb25zdCByID0gX19QUklWQVRFX2luZGV4RW50cmllc1N0b3JlKGUpO1xuICAgICAgICBsZXQgaSA9IG5ldyBTb3J0ZWRTZXQoX19QUklWQVRFX2luZGV4RW50cnlDb21wYXJhdG9yKTtcbiAgICAgICAgcmV0dXJuIHIuWSh7XG4gICAgICAgICAgICBpbmRleDogXCJkb2N1bWVudEtleUluZGV4XCIsXG4gICAgICAgICAgICByYW5nZTogSURCS2V5UmFuZ2Uub25seShbIG4uaW5kZXhJZCwgdGhpcy51aWQsIHRoaXMuQW4obiwgdCkgXSlcbiAgICAgICAgfSwgKChlLCByKSA9PiB7XG4gICAgICAgICAgICBpID0gaS5hZGQobmV3IF9fUFJJVkFURV9JbmRleEVudHJ5KG4uaW5kZXhJZCwgdCwgci5hcnJheVZhbHVlLCByLmRpcmVjdGlvbmFsVmFsdWUpKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGkpKTtcbiAgICB9XG4gICAgLyoqIENyZWF0ZXMgdGhlIGluZGV4IGVudHJpZXMgZm9yIHRoZSBnaXZlbiBkb2N1bWVudC4gKi8gICAgcG4oZSwgdCkge1xuICAgICAgICBsZXQgbiA9IG5ldyBTb3J0ZWRTZXQoX19QUklWQVRFX2luZGV4RW50cnlDb21wYXJhdG9yKTtcbiAgICAgICAgY29uc3QgciA9IHRoaXMuZG4odCwgZSk7XG4gICAgICAgIGlmIChudWxsID09IHIpIHJldHVybiBuO1xuICAgICAgICBjb25zdCBpID0gX19QUklWQVRFX2ZpZWxkSW5kZXhHZXRBcnJheVNlZ21lbnQodCk7XG4gICAgICAgIGlmIChudWxsICE9IGkpIHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBlLmRhdGEuZmllbGQoaS5maWVsZFBhdGgpO1xuICAgICAgICAgICAgaWYgKGlzQXJyYXkocykpIGZvciAoY29uc3QgaSBvZiBzLmFycmF5VmFsdWUudmFsdWVzIHx8IFtdKSBuID0gbi5hZGQobmV3IF9fUFJJVkFURV9JbmRleEVudHJ5KHQuaW5kZXhJZCwgZS5rZXksIHRoaXMuSW4oaSksIHIpKTtcbiAgICAgICAgfSBlbHNlIG4gPSBuLmFkZChuZXcgX19QUklWQVRFX0luZGV4RW50cnkodC5pbmRleElkLCBlLmtleSwgVGUsIHIpKTtcbiAgICAgICAgcmV0dXJuIG47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIGluZGV4IGVudHJpZXMgZm9yIHRoZSBwcm92aWRlZCBkb2N1bWVudCBieSBkZWxldGluZyBlbnRyaWVzXG4gICAgICogdGhhdCBhcmUgbm8gbG9uZ2VyIHJlZmVyZW5jZWQgaW4gYG5ld0VudHJpZXNgIGFuZCBhZGRpbmcgYWxsIG5ld2x5IGFkZGVkXG4gICAgICogZW50cmllcy5cbiAgICAgKi8gICAgeW4oZSwgdCwgbiwgciwgaSkge1xuICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoXCJJbmRleGVkRGJJbmRleE1hbmFnZXJcIiwgXCJVcGRhdGluZyBpbmRleCBlbnRyaWVzIGZvciBkb2N1bWVudCAnJXMnXCIsIHQua2V5KTtcbiAgICAgICAgY29uc3QgcyA9IFtdO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX2RpZmZTb3J0ZWRTZXRzKGUsIHQsIG4sIHIsIGkpIHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBlLmdldEl0ZXJhdG9yKCksIG8gPSB0LmdldEl0ZXJhdG9yKCk7XG4gICAgICAgICAgICBsZXQgXyA9IF9fUFJJVkFURV9hZHZhbmNlSXRlcmF0b3IocyksIGEgPSBfX1BSSVZBVEVfYWR2YW5jZUl0ZXJhdG9yKG8pO1xuICAgICAgICAgICAgLy8gV2FsayB0aHJvdWdoIHRoZSB0d28gc2V0cyBhdCB0aGUgc2FtZSB0aW1lLCB1c2luZyB0aGUgb3JkZXJpbmcgZGVmaW5lZCBieVxuICAgICAgICAgICAgLy8gYGNvbXBhcmF0b3JgLlxuICAgICAgICAgICAgZm9yICg7XyB8fCBhOyApIHtcbiAgICAgICAgICAgICAgICBsZXQgZSA9ICExLCB0ID0gITE7XG4gICAgICAgICAgICAgICAgaWYgKF8gJiYgYSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByID0gbihfLCBhKTtcbiAgICAgICAgICAgICAgICAgICAgciA8IDAgPyBcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIGVsZW1lbnQgd2FzIHJlbW92ZWQgaWYgdGhlIG5leHQgZWxlbWVudCBpbiBvdXIgb3JkZXJlZFxuICAgICAgICAgICAgICAgICAgICAvLyB3YWxrdGhyb3VnaCBpcyBvbmx5IGluIGBiZWZvcmVgLlxuICAgICAgICAgICAgICAgICAgICB0ID0gITAgOiByID4gMCAmJiAoXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoZSBlbGVtZW50IHdhcyBhZGRlZCBpZiB0aGUgbmV4dCBlbGVtZW50IGluIG91ciBvcmRlcmVkIHdhbGt0aHJvdWdoXG4gICAgICAgICAgICAgICAgICAgIC8vIGlzIG9ubHkgaW4gYGFmdGVyYC5cbiAgICAgICAgICAgICAgICAgICAgZSA9ICEwKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgbnVsbCAhPSBfID8gdCA9ICEwIDogZSA9ICEwO1xuICAgICAgICAgICAgICAgIGUgPyAocihhKSwgYSA9IF9fUFJJVkFURV9hZHZhbmNlSXRlcmF0b3IobykpIDogdCA/IChpKF8pLCBfID0gX19QUklWQVRFX2FkdmFuY2VJdGVyYXRvcihzKSkgOiAoXyA9IF9fUFJJVkFURV9hZHZhbmNlSXRlcmF0b3IocyksIFxuICAgICAgICAgICAgICAgIGEgPSBfX1BSSVZBVEVfYWR2YW5jZUl0ZXJhdG9yKG8pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfShyLCBpLCBfX1BSSVZBVEVfaW5kZXhFbnRyeUNvbXBhcmF0b3IsIChcbiAgICAgICAgLyogb25BZGQ9ICovIHIgPT4ge1xuICAgICAgICAgICAgcy5wdXNoKHRoaXMud24oZSwgdCwgbiwgcikpO1xuICAgICAgICB9KSwgKFxuICAgICAgICAvKiBvblJlbW92ZT0gKi8gciA9PiB7XG4gICAgICAgICAgICBzLnB1c2godGhpcy5TbihlLCB0LCBuLCByKSk7XG4gICAgICAgIH0pKSwgUGVyc2lzdGVuY2VQcm9taXNlLndhaXRGb3Iocyk7XG4gICAgfVxuICAgIGZuKGUpIHtcbiAgICAgICAgbGV0IHQgPSAxO1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX2luZGV4U3RhdGVTdG9yZShlKS5ZKHtcbiAgICAgICAgICAgIGluZGV4OiBcInNlcXVlbmNlTnVtYmVySW5kZXhcIixcbiAgICAgICAgICAgIHJldmVyc2U6ICEwLFxuICAgICAgICAgICAgcmFuZ2U6IElEQktleVJhbmdlLnVwcGVyQm91bmQoWyB0aGlzLnVpZCwgTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIgXSlcbiAgICAgICAgfSwgKChlLCBuLCByKSA9PiB7XG4gICAgICAgICAgICByLmRvbmUoKSwgdCA9IG4uc2VxdWVuY2VOdW1iZXIgKyAxO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gdCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgbmV3IHNldCBvZiBJREIgcmFuZ2VzIHRoYXQgc3BsaXRzIHRoZSBleGlzdGluZyByYW5nZSBhbmQgZXhjbHVkZXNcbiAgICAgKiBhbnkgdmFsdWVzIHRoYXQgbWF0Y2ggdGhlIGBub3RJblZhbHVlYCBmcm9tIHRoZXNlIHJhbmdlcy4gQXMgYW4gZXhhbXBsZSxcbiAgICAgKiAnW2ZvbyA+IDIgJiYgZm9vICE9IDNdYCBiZWNvbWVzICBgW2ZvbyA+IDIgJiYgPCAzLCBmb28gPiAzXWAuXG4gICAgICovICAgIGNyZWF0ZVJhbmdlKGUsIHQsIG4pIHtcbiAgICAgICAgLy8gVGhlIG5vdEluIHZhbHVlcyBuZWVkIHRvIGJlIHNvcnRlZCBhbmQgdW5pcXVlIHNvIHRoYXQgd2UgY2FuIHJldHVybiBhXG4gICAgICAgIC8vIHNvcnRlZCBzZXQgb2Ygbm9uLW92ZXJsYXBwaW5nIHJhbmdlcy5cbiAgICAgICAgbiA9IG4uc29ydCgoKGUsIHQpID0+IF9fUFJJVkFURV9pbmRleEVudHJ5Q29tcGFyYXRvcihlLCB0KSkpLmZpbHRlcigoKGUsIHQsIG4pID0+ICF0IHx8IDAgIT09IF9fUFJJVkFURV9pbmRleEVudHJ5Q29tcGFyYXRvcihlLCBuW3QgLSAxXSkpKTtcbiAgICAgICAgY29uc3QgciA9IFtdO1xuICAgICAgICByLnB1c2goZSk7XG4gICAgICAgIGZvciAoY29uc3QgaSBvZiBuKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2luZGV4RW50cnlDb21wYXJhdG9yKGksIGUpLCBzID0gX19QUklWQVRFX2luZGV4RW50cnlDb21wYXJhdG9yKGksIHQpO1xuICAgICAgICAgICAgaWYgKDAgPT09IG4pIFxuICAgICAgICAgICAgLy8gYG5vdEluVmFsdWVgIGlzIHRoZSBsb3dlciBib3VuZC4gV2UgdGhlcmVmb3JlIG5lZWQgdG8gcmFpc2UgdGhlIGJvdW5kXG4gICAgICAgICAgICAvLyB0byB0aGUgbmV4dCB2YWx1ZS5cbiAgICAgICAgICAgIHJbMF0gPSBlLkh0KCk7IGVsc2UgaWYgKG4gPiAwICYmIHMgPCAwKSBcbiAgICAgICAgICAgIC8vIGBub3RJblZhbHVlYCBpcyBpbiB0aGUgbWlkZGxlIG9mIHRoZSByYW5nZVxuICAgICAgICAgICAgci5wdXNoKGkpLCByLnB1c2goaS5IdCgpKTsgZWxzZSBpZiAocyA+IDApIFxuICAgICAgICAgICAgLy8gYG5vdEluVmFsdWVgIChhbmQgYWxsIGZvbGxvd2luZyB2YWx1ZXMpIGFyZSBvdXQgb2YgdGhlIHJhbmdlXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICByLnB1c2godCk7XG4gICAgICAgIGNvbnN0IGkgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgZSA9IDA7IGUgPCByLmxlbmd0aDsgZSArPSAyKSB7XG4gICAgICAgICAgICAvLyBJZiB3ZSBlbmNvdW50ZXIgdHdvIGJvdW5kcyB0aGF0IHdpbGwgY3JlYXRlIGFuIHVubWF0Y2hhYmxlIGtleSByYW5nZSxcbiAgICAgICAgICAgIC8vIHRoZW4gd2UgcmV0dXJuIGFuIGVtcHR5IHNldCBvZiBrZXkgcmFuZ2VzLlxuICAgICAgICAgICAgaWYgKHRoaXMuYm4ocltlXSwgcltlICsgMV0pKSByZXR1cm4gW107XG4gICAgICAgICAgICBjb25zdCB0ID0gWyByW2VdLmluZGV4SWQsIHRoaXMudWlkLCByW2VdLmFycmF5VmFsdWUsIHJbZV0uZGlyZWN0aW9uYWxWYWx1ZSwgVGUsIFtdIF0sIG4gPSBbIHJbZSArIDFdLmluZGV4SWQsIHRoaXMudWlkLCByW2UgKyAxXS5hcnJheVZhbHVlLCByW2UgKyAxXS5kaXJlY3Rpb25hbFZhbHVlLCBUZSwgW10gXTtcbiAgICAgICAgICAgIGkucHVzaChJREJLZXlSYW5nZS5ib3VuZCh0LCBuKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGk7XG4gICAgfVxuICAgIGJuKGUsIHQpIHtcbiAgICAgICAgLy8gSWYgbG93ZXIgYm91bmQgaXMgZ3JlYXRlciB0aGFuIHRoZSB1cHBlciBib3VuZCwgdGhlbiB0aGUga2V5XG4gICAgICAgIC8vIHJhbmdlIGNhbiBuZXZlciBiZSBtYXRjaGVkLlxuICAgICAgICByZXR1cm4gX19QUklWQVRFX2luZGV4RW50cnlDb21wYXJhdG9yKGUsIHQpID4gMDtcbiAgICB9XG4gICAgZ2V0TWluT2Zmc2V0RnJvbUNvbGxlY3Rpb25Hcm91cChlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEZpZWxkSW5kZXhlcyhlLCB0KS5uZXh0KF9fUFJJVkFURV9nZXRNaW5PZmZzZXRGcm9tRmllbGRJbmRleGVzKTtcbiAgICB9XG4gICAgZ2V0TWluT2Zmc2V0KGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5tYXBBcnJheSh0aGlzLnVuKHQpLCAodCA9PiB0aGlzLmNuKGUsIHQpLm5leHQoKGUgPT4gZSB8fCBmYWlsKCkpKSkpLm5leHQoX19QUklWQVRFX2dldE1pbk9mZnNldEZyb21GaWVsZEluZGV4ZXMpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIGNvbGxlY3Rpb25QYXJlbnRzXG4gKiBkb2N1bWVudCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfY29sbGVjdGlvblBhcmVudHNTdG9yZShlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9nZXRTdG9yZShlLCBcImNvbGxlY3Rpb25QYXJlbnRzXCIpO1xufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgaW5kZXggZW50cnkgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9pbmRleEVudHJpZXNTdG9yZShlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9nZXRTdG9yZShlLCBcImluZGV4RW50cmllc1wiKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIGluZGV4IGNvbmZpZ3VyYXRpb24gb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9pbmRleENvbmZpZ3VyYXRpb25TdG9yZShlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9nZXRTdG9yZShlLCBcImluZGV4Q29uZmlndXJhdGlvblwiKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIGluZGV4IHN0YXRlIG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfaW5kZXhTdGF0ZVN0b3JlKGUpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX2dldFN0b3JlKGUsIFwiaW5kZXhTdGF0ZVwiKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2dldE1pbk9mZnNldEZyb21GaWVsZEluZGV4ZXMoZSkge1xuICAgIF9fUFJJVkFURV9oYXJkQXNzZXJ0KDAgIT09IGUubGVuZ3RoKTtcbiAgICBsZXQgdCA9IGVbMF0uaW5kZXhTdGF0ZS5vZmZzZXQsIG4gPSB0Lmxhcmdlc3RCYXRjaElkO1xuICAgIGZvciAobGV0IHIgPSAxOyByIDwgZS5sZW5ndGg7IHIrKykge1xuICAgICAgICBjb25zdCBpID0gZVtyXS5pbmRleFN0YXRlLm9mZnNldDtcbiAgICAgICAgX19QUklWQVRFX2luZGV4T2Zmc2V0Q29tcGFyYXRvcihpLCB0KSA8IDAgJiYgKHQgPSBpKSwgbiA8IGkubGFyZ2VzdEJhdGNoSWQgJiYgKG4gPSBpLmxhcmdlc3RCYXRjaElkKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBJbmRleE9mZnNldCh0LnJlYWRUaW1lLCB0LmRvY3VtZW50S2V5LCBuKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY29uc3QgRWUgPSB7XG4gICAgZGlkUnVuOiAhMSxcbiAgICBzZXF1ZW5jZU51bWJlcnNDb2xsZWN0ZWQ6IDAsXG4gICAgdGFyZ2V0c1JlbW92ZWQ6IDAsXG4gICAgZG9jdW1lbnRzUmVtb3ZlZDogMFxufTtcblxuY2xhc3MgTHJ1UGFyYW1zIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvLyBXaGVuIHdlIGF0dGVtcHQgdG8gY29sbGVjdCwgd2Ugd2lsbCBvbmx5IGRvIHNvIGlmIHRoZSBjYWNoZSBzaXplIGlzIGdyZWF0ZXIgdGhhbiB0aGlzXG4gICAgLy8gdGhyZXNob2xkLiBQYXNzaW5nIGBDT0xMRUNUSU9OX0RJU0FCTEVEYCBoZXJlIHdpbGwgY2F1c2UgY29sbGVjdGlvbiB0byBhbHdheXMgYmUgc2tpcHBlZC5cbiAgICBlLCBcbiAgICAvLyBUaGUgcGVyY2VudGFnZSBvZiBzZXF1ZW5jZSBudW1iZXJzIHRoYXQgd2Ugd2lsbCBhdHRlbXB0IHRvIGNvbGxlY3RcbiAgICB0LCBcbiAgICAvLyBBIGNhcCBvbiB0aGUgdG90YWwgbnVtYmVyIG9mIHNlcXVlbmNlIG51bWJlcnMgdGhhdCB3aWxsIGJlIGNvbGxlY3RlZC4gVGhpcyBwcmV2ZW50c1xuICAgIC8vIHVzIGZyb20gY29sbGVjdGluZyBhIGh1Z2UgbnVtYmVyIG9mIHNlcXVlbmNlIG51bWJlcnMgaWYgdGhlIGNhY2hlIGhhcyBncm93biB2ZXJ5IGxhcmdlLlxuICAgIG4pIHtcbiAgICAgICAgdGhpcy5jYWNoZVNpemVDb2xsZWN0aW9uVGhyZXNob2xkID0gZSwgdGhpcy5wZXJjZW50aWxlVG9Db2xsZWN0ID0gdCwgdGhpcy5tYXhpbXVtU2VxdWVuY2VOdW1iZXJzVG9Db2xsZWN0ID0gbjtcbiAgICB9XG4gICAgc3RhdGljIHdpdGhDYWNoZVNpemUoZSkge1xuICAgICAgICByZXR1cm4gbmV3IExydVBhcmFtcyhlLCBMcnVQYXJhbXMuREVGQVVMVF9DT0xMRUNUSU9OX1BFUkNFTlRJTEUsIExydVBhcmFtcy5ERUZBVUxUX01BWF9TRVFVRU5DRV9OVU1CRVJTX1RPX0NPTExFQ1QpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogRGVsZXRlIGEgbXV0YXRpb24gYmF0Y2ggYW5kIHRoZSBhc3NvY2lhdGVkIGRvY3VtZW50IG11dGF0aW9ucy5cbiAqIEByZXR1cm5zIEEgUGVyc2lzdGVuY2VQcm9taXNlIG9mIHRoZSBkb2N1bWVudCBtdXRhdGlvbnMgdGhhdCB3ZXJlIHJlbW92ZWQuXG4gKi9cbmZ1bmN0aW9uIHJlbW92ZU11dGF0aW9uQmF0Y2goZSwgdCwgbikge1xuICAgIGNvbnN0IHIgPSBlLnN0b3JlKFwibXV0YXRpb25zXCIpLCBpID0gZS5zdG9yZShcImRvY3VtZW50TXV0YXRpb25zXCIpLCBzID0gW10sIG8gPSBJREJLZXlSYW5nZS5vbmx5KG4uYmF0Y2hJZCk7XG4gICAgbGV0IF8gPSAwO1xuICAgIGNvbnN0IGEgPSByLlkoe1xuICAgICAgICByYW5nZTogb1xuICAgIH0sICgoZSwgdCwgbikgPT4gKF8rKywgbi5kZWxldGUoKSkpKTtcbiAgICBzLnB1c2goYS5uZXh0KCgoKSA9PiB7XG4gICAgICAgIF9fUFJJVkFURV9oYXJkQXNzZXJ0KDEgPT09IF8pO1xuICAgIH0pKSk7XG4gICAgY29uc3QgdSA9IFtdO1xuICAgIGZvciAoY29uc3QgZSBvZiBuLm11dGF0aW9ucykge1xuICAgICAgICBjb25zdCByID0gX19QUklWQVRFX25ld0RiRG9jdW1lbnRNdXRhdGlvbktleSh0LCBlLmtleS5wYXRoLCBuLmJhdGNoSWQpO1xuICAgICAgICBzLnB1c2goaS5kZWxldGUocikpLCB1LnB1c2goZS5rZXkpO1xuICAgIH1cbiAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLndhaXRGb3IocykubmV4dCgoKCkgPT4gdSkpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYW4gYXBwcm94aW1hdGUgc2l6ZSBmb3IgdGhlIGdpdmVuIGRvY3VtZW50LlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9kYkRvY3VtZW50U2l6ZShlKSB7XG4gICAgaWYgKCFlKSByZXR1cm4gMDtcbiAgICBsZXQgdDtcbiAgICBpZiAoZS5kb2N1bWVudCkgdCA9IGUuZG9jdW1lbnQ7IGVsc2UgaWYgKGUudW5rbm93bkRvY3VtZW50KSB0ID0gZS51bmtub3duRG9jdW1lbnQ7IGVsc2Uge1xuICAgICAgICBpZiAoIWUubm9Eb2N1bWVudCkgdGhyb3cgZmFpbCgpO1xuICAgICAgICB0ID0gZS5ub0RvY3VtZW50O1xuICAgIH1cbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodCkubGVuZ3RoO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIEEgbXV0YXRpb24gcXVldWUgZm9yIGEgc3BlY2lmaWMgdXNlciwgYmFja2VkIGJ5IEluZGV4ZWREQi4gKi8gTHJ1UGFyYW1zLkRFRkFVTFRfQ09MTEVDVElPTl9QRVJDRU5USUxFID0gMTAsIFxuTHJ1UGFyYW1zLkRFRkFVTFRfTUFYX1NFUVVFTkNFX05VTUJFUlNfVE9fQ09MTEVDVCA9IDFlMywgTHJ1UGFyYW1zLkRFRkFVTFQgPSBuZXcgTHJ1UGFyYW1zKDQxOTQzMDQwLCBMcnVQYXJhbXMuREVGQVVMVF9DT0xMRUNUSU9OX1BFUkNFTlRJTEUsIExydVBhcmFtcy5ERUZBVUxUX01BWF9TRVFVRU5DRV9OVU1CRVJTX1RPX0NPTExFQ1QpLCBcbkxydVBhcmFtcy5ESVNBQkxFRCA9IG5ldyBMcnVQYXJhbXMoLTEsIDAsIDApO1xuXG5jbGFzcyBfX1BSSVZBVEVfSW5kZXhlZERiTXV0YXRpb25RdWV1ZSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIG5vcm1hbGl6ZWQgdXNlcklkIChlLmcuIG51bGwgVUlEID0+IFwiXCIgdXNlcklkKSB1c2VkIHRvIHN0b3JlIC9cbiAgICAgKiByZXRyaWV2ZSBtdXRhdGlvbnMuXG4gICAgICovXG4gICAgZSwgdCwgbiwgcikge1xuICAgICAgICB0aGlzLnVzZXJJZCA9IGUsIHRoaXMuc2VyaWFsaXplciA9IHQsIHRoaXMuaW5kZXhNYW5hZ2VyID0gbiwgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZSA9IHIsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQ2FjaGVzIHRoZSBkb2N1bWVudCBrZXlzIGZvciBwZW5kaW5nIG11dGF0aW9uIGJhdGNoZXMuIElmIHRoZSBtdXRhdGlvblxuICAgICAgICAgKiBoYXMgYmVlbiByZW1vdmVkIGZyb20gSW5kZXhlZERiLCB0aGUgY2FjaGVkIHZhbHVlIG1heSBjb250aW51ZSB0b1xuICAgICAgICAgKiBiZSB1c2VkIHRvIHJldHJpZXZlIHRoZSBiYXRjaCdzIGRvY3VtZW50IGtleXMuIFRvIHJlbW92ZSBhIGNhY2hlZCB2YWx1ZVxuICAgICAgICAgKiBsb2NhbGx5LCBgcmVtb3ZlQ2FjaGVkTXV0YXRpb25LZXlzKClgIHNob3VsZCBiZSBpbnZva2VkIGVpdGhlciBkaXJlY3RseVxuICAgICAgICAgKiBvciB0aHJvdWdoIGByZW1vdmVNdXRhdGlvbkJhdGNoZXMoKWAuXG4gICAgICAgICAqXG4gICAgICAgICAqIFdpdGggbXVsdGktdGFiLCB3aGVuIHRoZSBwcmltYXJ5IGNsaWVudCBhY2tub3dsZWRnZXMgb3IgcmVqZWN0cyBhIG11dGF0aW9uLFxuICAgICAgICAgKiB0aGlzIGNhY2hlIGlzIHVzZWQgYnkgc2Vjb25kYXJ5IGNsaWVudHMgdG8gaW52YWxpZGF0ZSB0aGUgbG9jYWxcbiAgICAgICAgICogdmlldyBvZiB0aGUgZG9jdW1lbnRzIHRoYXQgd2VyZSBwcmV2aW91c2x5IGFmZmVjdGVkIGJ5IHRoZSBtdXRhdGlvbi5cbiAgICAgICAgICovXG4gICAgICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuXG4gICAgICAgIHRoaXMuRG4gPSB7fTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBtdXRhdGlvbiBxdWV1ZSBmb3IgdGhlIGdpdmVuIHVzZXIuXG4gICAgICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlciBmb3Igd2hpY2ggdG8gY3JlYXRlIGEgbXV0YXRpb24gcXVldWUuXG4gICAgICogQHBhcmFtIHNlcmlhbGl6ZXIgLSBUaGUgc2VyaWFsaXplciB0byB1c2Ugd2hlbiBwZXJzaXN0aW5nIHRvIEluZGV4ZWREYi5cbiAgICAgKi8gICAgc3RhdGljIGN0KGUsIHQsIG4sIHIpIHtcbiAgICAgICAgLy8gVE9ETyhtY2cpOiBGaWd1cmUgb3V0IHdoYXQgY29uc3RyYWludHMgdGhlcmUgYXJlIG9uIHVzZXJJRHNcbiAgICAgICAgLy8gSW4gcGFydGljdWxhciwgYXJlIHRoZXJlIGFueSByZXNlcnZlZCBjaGFyYWN0ZXJzPyBhcmUgZW1wdHkgaWRzIGFsbG93ZWQ/XG4gICAgICAgIC8vIEZvciB0aGUgbW9tZW50IHN0b3JlIHRoZXNlIHRvZ2V0aGVyIGluIHRoZSBzYW1lIG11dGF0aW9ucyB0YWJsZSBhc3N1bWluZ1xuICAgICAgICAvLyB0aGF0IGVtcHR5IHVzZXJJRHMgYXJlbid0IGFsbG93ZWQuXG4gICAgICAgIF9fUFJJVkFURV9oYXJkQXNzZXJ0KFwiXCIgIT09IGUudWlkKTtcbiAgICAgICAgY29uc3QgaSA9IGUuaXNBdXRoZW50aWNhdGVkKCkgPyBlLnVpZCA6IFwiXCI7XG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX0luZGV4ZWREYk11dGF0aW9uUXVldWUoaSwgdCwgbiwgcik7XG4gICAgfVxuICAgIGNoZWNrRW1wdHkoZSkge1xuICAgICAgICBsZXQgdCA9ICEwO1xuICAgICAgICBjb25zdCBuID0gSURCS2V5UmFuZ2UuYm91bmQoWyB0aGlzLnVzZXJJZCwgTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZIF0sIFsgdGhpcy51c2VySWQsIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSBdKTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9tdXRhdGlvbnNTdG9yZShlKS5ZKHtcbiAgICAgICAgICAgIGluZGV4OiBcInVzZXJNdXRhdGlvbnNJbmRleFwiLFxuICAgICAgICAgICAgcmFuZ2U6IG5cbiAgICAgICAgfSwgKChlLCBuLCByKSA9PiB7XG4gICAgICAgICAgICB0ID0gITEsIHIuZG9uZSgpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gdCkpO1xuICAgIH1cbiAgICBhZGRNdXRhdGlvbkJhdGNoKGUsIHQsIG4sIHIpIHtcbiAgICAgICAgY29uc3QgaSA9IF9fUFJJVkFURV9kb2N1bWVudE11dGF0aW9uc1N0b3JlKGUpLCBzID0gX19QUklWQVRFX211dGF0aW9uc1N0b3JlKGUpO1xuICAgICAgICAvLyBUaGUgSW5kZXhlZERiIGltcGxlbWVudGF0aW9uIGluIENocm9tZSAoYW5kIEZpcmVmb3gpIGRvZXMgbm90IGhhbmRsZVxuICAgICAgICAvLyBjb21wb3VuZCBpbmRpY2VzIHRoYXQgaW5jbHVkZSBhdXRvLWdlbmVyYXRlZCBrZXlzIGNvcnJlY3RseS4gVG8gZW5zdXJlXG4gICAgICAgIC8vIHRoYXQgdGhlIGluZGV4IGVudHJ5IGlzIGFkZGVkIGNvcnJlY3RseSBpbiBhbGwgYnJvd3NlcnMsIHdlIHBlcmZvcm0gdHdvXG4gICAgICAgIC8vIHdyaXRlczogVGhlIGZpcnN0IHdyaXRlIGlzIHVzZWQgdG8gcmV0cmlldmUgdGhlIG5leHQgYXV0by1nZW5lcmF0ZWQgQmF0Y2hcbiAgICAgICAgLy8gSUQsIGFuZCB0aGUgc2Vjb25kIHdyaXRlIHBvcHVsYXRlcyB0aGUgaW5kZXggYW5kIHN0b3JlcyB0aGUgYWN0dWFsXG4gICAgICAgIC8vIG11dGF0aW9uIGJhdGNoLlxuICAgICAgICAvLyBTZWU6IGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTcwMTk3MlxuICAgICAgICAvLyBXZSB3cml0ZSBhbiBlbXB0eSBvYmplY3QgdG8gb2J0YWluIGtleVxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICByZXR1cm4gcy5hZGQoe30pLm5leHQoKG8gPT4ge1xuICAgICAgICAgICAgX19QUklWQVRFX2hhcmRBc3NlcnQoXCJudW1iZXJcIiA9PSB0eXBlb2Ygbyk7XG4gICAgICAgICAgICBjb25zdCBfID0gbmV3IE11dGF0aW9uQmF0Y2gobywgdCwgbiwgciksIGEgPSBmdW5jdGlvbiBfX1BSSVZBVEVfdG9EYk11dGF0aW9uQmF0Y2goZSwgdCwgbikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBuLmJhc2VNdXRhdGlvbnMubWFwKCh0ID0+IHRvTXV0YXRpb24oZS51dCwgdCkpKSwgaSA9IG4ubXV0YXRpb25zLm1hcCgodCA9PiB0b011dGF0aW9uKGUudXQsIHQpKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgdXNlcklkOiB0LFxuICAgICAgICAgICAgICAgICAgICBiYXRjaElkOiBuLmJhdGNoSWQsXG4gICAgICAgICAgICAgICAgICAgIGxvY2FsV3JpdGVUaW1lTXM6IG4ubG9jYWxXcml0ZVRpbWUudG9NaWxsaXMoKSxcbiAgICAgICAgICAgICAgICAgICAgYmFzZU11dGF0aW9uczogcixcbiAgICAgICAgICAgICAgICAgICAgbXV0YXRpb25zOiBpXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0odGhpcy5zZXJpYWxpemVyLCB0aGlzLnVzZXJJZCwgXyksIHUgPSBbXTtcbiAgICAgICAgICAgIGxldCBjID0gbmV3IFNvcnRlZFNldCgoKGUsIHQpID0+IF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKGUuY2Fub25pY2FsU3RyaW5nKCksIHQuY2Fub25pY2FsU3RyaW5nKCkpKSk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2Ygcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfbmV3RGJEb2N1bWVudE11dGF0aW9uS2V5KHRoaXMudXNlcklkLCBlLmtleS5wYXRoLCBvKTtcbiAgICAgICAgICAgICAgICBjID0gYy5hZGQoZS5rZXkucGF0aC5wb3BMYXN0KCkpLCB1LnB1c2gocy5wdXQoYSkpLCB1LnB1c2goaS5wdXQodCwgeCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGMuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICAgICAgdS5wdXNoKHRoaXMuaW5kZXhNYW5hZ2VyLmFkZFRvQ29sbGVjdGlvblBhcmVudEluZGV4KGUsIHQpKTtcbiAgICAgICAgICAgIH0pKSwgZS5hZGRPbkNvbW1pdHRlZExpc3RlbmVyKCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5EbltvXSA9IF8ua2V5cygpO1xuICAgICAgICAgICAgfSkpLCBQZXJzaXN0ZW5jZVByb21pc2Uud2FpdEZvcih1KS5uZXh0KCgoKSA9PiBfKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgbG9va3VwTXV0YXRpb25CYXRjaChlLCB0KSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfbXV0YXRpb25zU3RvcmUoZSkuZ2V0KHQpLm5leHQoKGUgPT4gZSA/IChfX1BSSVZBVEVfaGFyZEFzc2VydChlLnVzZXJJZCA9PT0gdGhpcy51c2VySWQpLCBcbiAgICAgICAgX19QUklWQVRFX2Zyb21EYk11dGF0aW9uQmF0Y2godGhpcy5zZXJpYWxpemVyLCBlKSkgOiBudWxsKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGRvY3VtZW50IGtleXMgZm9yIHRoZSBtdXRhdGlvbiBiYXRjaCB3aXRoIHRoZSBnaXZlbiBiYXRjaElkLlxuICAgICAqIEZvciBwcmltYXJ5IGNsaWVudHMsIHRoaXMgbWV0aG9kIHJldHVybnMgYG51bGxgIGFmdGVyXG4gICAgICogYHJlbW92ZU11dGF0aW9uQmF0Y2hlcygpYCBoYXMgYmVlbiBjYWxsZWQuIFNlY29uZGFyeSBjbGllbnRzIHJldHVybiBhXG4gICAgICogY2FjaGVkIHJlc3VsdCB1bnRpbCBgcmVtb3ZlQ2FjaGVkTXV0YXRpb25LZXlzKClgIGlzIGludm9rZWQuXG4gICAgICovXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seS5cbiAgICBDbihlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLkRuW3RdID8gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodGhpcy5Eblt0XSkgOiB0aGlzLmxvb2t1cE11dGF0aW9uQmF0Y2goZSwgdCkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBpZiAoZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBlLmtleXMoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5Eblt0XSA9IG4sIG47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBnZXROZXh0TXV0YXRpb25CYXRjaEFmdGVyQmF0Y2hJZChlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSB0ICsgMSwgciA9IElEQktleVJhbmdlLmxvd2VyQm91bmQoWyB0aGlzLnVzZXJJZCwgbiBdKTtcbiAgICAgICAgbGV0IGkgPSBudWxsO1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX211dGF0aW9uc1N0b3JlKGUpLlkoe1xuICAgICAgICAgICAgaW5kZXg6IFwidXNlck11dGF0aW9uc0luZGV4XCIsXG4gICAgICAgICAgICByYW5nZTogclxuICAgICAgICB9LCAoKGUsIHQsIHIpID0+IHtcbiAgICAgICAgICAgIHQudXNlcklkID09PSB0aGlzLnVzZXJJZCAmJiAoX19QUklWQVRFX2hhcmRBc3NlcnQodC5iYXRjaElkID49IG4pLCBpID0gX19QUklWQVRFX2Zyb21EYk11dGF0aW9uQmF0Y2godGhpcy5zZXJpYWxpemVyLCB0KSksIFxuICAgICAgICAgICAgci5kb25lKCk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBpKSk7XG4gICAgfVxuICAgIGdldEhpZ2hlc3RVbmFja25vd2xlZGdlZEJhdGNoSWQoZSkge1xuICAgICAgICBjb25zdCB0ID0gSURCS2V5UmFuZ2UudXBwZXJCb3VuZChbIHRoaXMudXNlcklkLCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkgXSk7XG4gICAgICAgIGxldCBuID0gLTE7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfbXV0YXRpb25zU3RvcmUoZSkuWSh7XG4gICAgICAgICAgICBpbmRleDogXCJ1c2VyTXV0YXRpb25zSW5kZXhcIixcbiAgICAgICAgICAgIHJhbmdlOiB0LFxuICAgICAgICAgICAgcmV2ZXJzZTogITBcbiAgICAgICAgfSwgKChlLCB0LCByKSA9PiB7XG4gICAgICAgICAgICBuID0gdC5iYXRjaElkLCByLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IG4pKTtcbiAgICB9XG4gICAgZ2V0QWxsTXV0YXRpb25CYXRjaGVzKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IElEQktleVJhbmdlLmJvdW5kKFsgdGhpcy51c2VySWQsIC0xIF0sIFsgdGhpcy51c2VySWQsIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSBdKTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9tdXRhdGlvbnNTdG9yZShlKS5XKFwidXNlck11dGF0aW9uc0luZGV4XCIsIHQpLm5leHQoKGUgPT4gZS5tYXAoKGUgPT4gX19QUklWQVRFX2Zyb21EYk11dGF0aW9uQmF0Y2godGhpcy5zZXJpYWxpemVyLCBlKSkpKSk7XG4gICAgfVxuICAgIGdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ0RvY3VtZW50S2V5KGUsIHQpIHtcbiAgICAgICAgLy8gU2NhbiB0aGUgZG9jdW1lbnQtbXV0YXRpb24gaW5kZXggc3RhcnRpbmcgd2l0aCBhIHByZWZpeCBzdGFydGluZyB3aXRoXG4gICAgICAgIC8vIHRoZSBnaXZlbiBkb2N1bWVudEtleS5cbiAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9uZXdEYkRvY3VtZW50TXV0YXRpb25QcmVmaXhGb3JQYXRoKHRoaXMudXNlcklkLCB0LnBhdGgpLCByID0gSURCS2V5UmFuZ2UubG93ZXJCb3VuZChuKSwgaSA9IFtdO1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX2RvY3VtZW50TXV0YXRpb25zU3RvcmUoZSkuWSh7XG4gICAgICAgICAgICByYW5nZTogclxuICAgICAgICB9LCAoKG4sIHIsIHMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IFtvLCBfLCBhXSA9IG4sIHUgPSBfX1BSSVZBVEVfZGVjb2RlUmVzb3VyY2VQYXRoKF8pO1xuICAgICAgICAgICAgLy8gT25seSBjb25zaWRlciByb3dzIG1hdGNoaW5nIGV4YWN0bHkgdGhlIHNwZWNpZmljIGtleSBvZlxuICAgICAgICAgICAgLy8gaW50ZXJlc3QuIE5vdGUgdGhhdCBiZWNhdXNlIHdlIG9yZGVyIGJ5IHBhdGggZmlyc3QsIGFuZCB3ZVxuICAgICAgICAgICAgLy8gb3JkZXIgdGVybWluYXRvcnMgYmVmb3JlIHBhdGggc2VwYXJhdG9ycywgd2UnbGwgZW5jb3VudGVyIGFsbFxuICAgICAgICAgICAgLy8gdGhlIGluZGV4IHJvd3MgZm9yIGRvY3VtZW50S2V5IGNvbnRpZ3VvdXNseS4gSW4gcGFydGljdWxhciwgYWxsXG4gICAgICAgICAgICAvLyB0aGUgcm93cyBmb3IgZG9jdW1lbnRLZXkgd2lsbCBvY2N1ciBiZWZvcmUgYW55IHJvd3MgZm9yXG4gICAgICAgICAgICAvLyBkb2N1bWVudHMgbmVzdGVkIGluIGEgc3ViY29sbGVjdGlvbiBiZW5lYXRoIGRvY3VtZW50S2V5IHNvIHdlXG4gICAgICAgICAgICAvLyBjYW4gc3RvcCBhcyBzb29uIGFzIHdlIGhpdCBhbnkgc3VjaCByb3cuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobyA9PT0gdGhpcy51c2VySWQgJiYgdC5wYXRoLmlzRXF1YWwodSkpIFxuICAgICAgICAgICAgLy8gTG9vayB1cCB0aGUgbXV0YXRpb24gYmF0Y2ggaW4gdGhlIHN0b3JlLlxuICAgICAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9tdXRhdGlvbnNTdG9yZShlKS5nZXQoYSkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFlKSB0aHJvdyBmYWlsKCk7XG4gICAgICAgICAgICAgICAgX19QUklWQVRFX2hhcmRBc3NlcnQoZS51c2VySWQgPT09IHRoaXMudXNlcklkKSwgaS5wdXNoKF9fUFJJVkFURV9mcm9tRGJNdXRhdGlvbkJhdGNoKHRoaXMuc2VyaWFsaXplciwgZSkpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgcy5kb25lKCk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBpKSk7XG4gICAgfVxuICAgIGdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ0RvY3VtZW50S2V5cyhlLCB0KSB7XG4gICAgICAgIGxldCBuID0gbmV3IFNvcnRlZFNldChfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcik7XG4gICAgICAgIGNvbnN0IHIgPSBbXTtcbiAgICAgICAgcmV0dXJuIHQuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gX19QUklWQVRFX25ld0RiRG9jdW1lbnRNdXRhdGlvblByZWZpeEZvclBhdGgodGhpcy51c2VySWQsIHQucGF0aCksIHMgPSBJREJLZXlSYW5nZS5sb3dlckJvdW5kKGkpLCBvID0gX19QUklWQVRFX2RvY3VtZW50TXV0YXRpb25zU3RvcmUoZSkuWSh7XG4gICAgICAgICAgICAgICAgcmFuZ2U6IHNcbiAgICAgICAgICAgIH0sICgoZSwgciwgaSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IFtzLCBvLCBfXSA9IGUsIGEgPSBfX1BSSVZBVEVfZGVjb2RlUmVzb3VyY2VQYXRoKG8pO1xuICAgICAgICAgICAgICAgIC8vIE9ubHkgY29uc2lkZXIgcm93cyBtYXRjaGluZyBleGFjdGx5IHRoZSBzcGVjaWZpYyBrZXkgb2ZcbiAgICAgICAgICAgICAgICAvLyBpbnRlcmVzdC4gTm90ZSB0aGF0IGJlY2F1c2Ugd2Ugb3JkZXIgYnkgcGF0aCBmaXJzdCwgYW5kIHdlXG4gICAgICAgICAgICAgICAgLy8gb3JkZXIgdGVybWluYXRvcnMgYmVmb3JlIHBhdGggc2VwYXJhdG9ycywgd2UnbGwgZW5jb3VudGVyIGFsbFxuICAgICAgICAgICAgICAgIC8vIHRoZSBpbmRleCByb3dzIGZvciBkb2N1bWVudEtleSBjb250aWd1b3VzbHkuIEluIHBhcnRpY3VsYXIsIGFsbFxuICAgICAgICAgICAgICAgIC8vIHRoZSByb3dzIGZvciBkb2N1bWVudEtleSB3aWxsIG9jY3VyIGJlZm9yZSBhbnkgcm93cyBmb3JcbiAgICAgICAgICAgICAgICAvLyBkb2N1bWVudHMgbmVzdGVkIGluIGEgc3ViY29sbGVjdGlvbiBiZW5lYXRoIGRvY3VtZW50S2V5IHNvIHdlXG4gICAgICAgICAgICAgICAgLy8gY2FuIHN0b3AgYXMgc29vbiBhcyB3ZSBoaXQgYW55IHN1Y2ggcm93LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID09PSB0aGlzLnVzZXJJZCAmJiB0LnBhdGguaXNFcXVhbChhKSA/IG4gPSBuLmFkZChfKSA6IGkuZG9uZSgpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgci5wdXNoKG8pO1xuICAgICAgICB9KSksIFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKHIpLm5leHQoKCgpID0+IHRoaXMudm4oZSwgbikpKTtcbiAgICB9XG4gICAgZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nUXVlcnkoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gdC5wYXRoLCByID0gbi5sZW5ndGggKyAxLCBpID0gX19QUklWQVRFX25ld0RiRG9jdW1lbnRNdXRhdGlvblByZWZpeEZvclBhdGgodGhpcy51c2VySWQsIG4pLCBzID0gSURCS2V5UmFuZ2UubG93ZXJCb3VuZChpKTtcbiAgICAgICAgLy8gQ29sbGVjdCB1cCB1bmlxdWUgYmF0Y2hJRHMgZW5jb3VudGVyZWQgZHVyaW5nIGEgc2NhbiBvZiB0aGUgaW5kZXguIFVzZSBhXG4gICAgICAgIC8vIFNvcnRlZFNldCB0byBhY2N1bXVsYXRlIGJhdGNoIElEcyBzbyB0aGV5IGNhbiBiZSB0cmF2ZXJzZWQgaW4gb3JkZXIgaW4gYVxuICAgICAgICAvLyBzY2FuIG9mIHRoZSBtYWluIHRhYmxlLlxuICAgICAgICBsZXQgbyA9IG5ldyBTb3J0ZWRTZXQoX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IpO1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX2RvY3VtZW50TXV0YXRpb25zU3RvcmUoZSkuWSh7XG4gICAgICAgICAgICByYW5nZTogc1xuICAgICAgICB9LCAoKGUsIHQsIGkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IFtzLCBfLCBhXSA9IGUsIHUgPSBfX1BSSVZBVEVfZGVjb2RlUmVzb3VyY2VQYXRoKF8pO1xuICAgICAgICAgICAgcyA9PT0gdGhpcy51c2VySWQgJiYgbi5pc1ByZWZpeE9mKHUpID8gXG4gICAgICAgICAgICAvLyBSb3dzIHdpdGggZG9jdW1lbnQga2V5cyBtb3JlIHRoYW4gb25lIHNlZ21lbnQgbG9uZ2VyIHRoYW4gdGhlXG4gICAgICAgICAgICAvLyBxdWVyeSBwYXRoIGNhbid0IGJlIG1hdGNoZXMuIEZvciBleGFtcGxlLCBhIHF1ZXJ5IG9uICdyb29tcydcbiAgICAgICAgICAgIC8vIGNhbid0IG1hdGNoIHRoZSBkb2N1bWVudCAvcm9vbXMvYWJjL21lc3NhZ2VzL3h5eC5cbiAgICAgICAgICAgIC8vIFRPRE8obWNnKTogd2UnbGwgbmVlZCBhIGRpZmZlcmVudCBzY2FubmVyIHdoZW4gd2UgaW1wbGVtZW50XG4gICAgICAgICAgICAvLyBhbmNlc3RvciBxdWVyaWVzLlxuICAgICAgICAgICAgdS5sZW5ndGggPT09IHIgJiYgKG8gPSBvLmFkZChhKSkgOiBpLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHRoaXMudm4oZSwgbykpKTtcbiAgICB9XG4gICAgdm4oZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gW10sIHIgPSBbXTtcbiAgICAgICAgLy8gVE9ETyhyb2Nrd29vZCk6IEltcGxlbWVudCB0aGlzIHVzaW5nIGl0ZXJhdGUuXG4gICAgICAgIHJldHVybiB0LmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgci5wdXNoKF9fUFJJVkFURV9tdXRhdGlvbnNTdG9yZShlKS5nZXQodCkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKG51bGwgPT09IGUpIHRocm93IGZhaWwoKTtcbiAgICAgICAgICAgICAgICBfX1BSSVZBVEVfaGFyZEFzc2VydChlLnVzZXJJZCA9PT0gdGhpcy51c2VySWQpLCBuLnB1c2goX19QUklWQVRFX2Zyb21EYk11dGF0aW9uQmF0Y2godGhpcy5zZXJpYWxpemVyLCBlKSk7XG4gICAgICAgICAgICB9KSkpO1xuICAgICAgICB9KSksIFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKHIpLm5leHQoKCgpID0+IG4pKTtcbiAgICB9XG4gICAgcmVtb3ZlTXV0YXRpb25CYXRjaChlLCB0KSB7XG4gICAgICAgIHJldHVybiByZW1vdmVNdXRhdGlvbkJhdGNoKGUuYWUsIHRoaXMudXNlcklkLCB0KS5uZXh0KChuID0+IChlLmFkZE9uQ29tbWl0dGVkTGlzdGVuZXIoKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuRm4odC5iYXRjaElkKTtcbiAgICAgICAgfSkpLCBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaChuLCAodCA9PiB0aGlzLnJlZmVyZW5jZURlbGVnYXRlLm1hcmtQb3RlbnRpYWxseU9ycGhhbmVkKGUsIHQpKSkpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsZWFycyB0aGUgY2FjaGVkIGtleXMgZm9yIGEgbXV0YXRpb24gYmF0Y2guIFRoaXMgbWV0aG9kIHNob3VsZCBiZVxuICAgICAqIGNhbGxlZCBieSBzZWNvbmRhcnkgY2xpZW50cyBhZnRlciB0aGV5IHByb2Nlc3MgbXV0YXRpb24gdXBkYXRlcy5cbiAgICAgKlxuICAgICAqIE5vdGUgdGhhdCB0aGlzIG1ldGhvZCBkb2VzIG5vdCBoYXZlIHRvIGJlIGNhbGxlZCBmcm9tIHByaW1hcnkgY2xpZW50cyBhc1xuICAgICAqIHRoZSBjb3JyZXNwb25kaW5nIGNhY2hlIGVudHJpZXMgYXJlIGNsZWFyZWQgd2hlbiBhbiBhY2tub3dsZWRnZWQgb3JcbiAgICAgKiByZWplY3RlZCBiYXRjaCBpcyByZW1vdmVkIGZyb20gdGhlIG11dGF0aW9uIHF1ZXVlLlxuICAgICAqL1xuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHlcbiAgICBGbihlKSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLkRuW2VdO1xuICAgIH1cbiAgICBwZXJmb3JtQ29uc2lzdGVuY3lDaGVjayhlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNoZWNrRW1wdHkoZSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBpZiAoIXQpIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICAgICAgLy8gVmVyaWZ5IHRoYXQgdGhlcmUgYXJlIG5vIGVudHJpZXMgaW4gdGhlIGRvY3VtZW50TXV0YXRpb25zIGluZGV4IGlmXG4gICAgICAgICAgICAvLyB0aGUgcXVldWUgaXMgZW1wdHkuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gSURCS2V5UmFuZ2UubG93ZXJCb3VuZChcbiAgICAgICAgICAgIC8qKlxuICogQ3JlYXRlcyBhIFt1c2VySWRdIGtleSBmb3IgdXNlIGluIHRoZSBEYkRvY3VtZW50TXV0YXRpb25zIGluZGV4IHRvIGl0ZXJhdGVcbiAqIG92ZXIgYWxsIG9mIGEgdXNlcidzIGRvY3VtZW50IG11dGF0aW9ucy5cbiAqL1xuICAgICAgICAgICAgZnVuY3Rpb24gX19QUklWQVRFX25ld0RiRG9jdW1lbnRNdXRhdGlvblByZWZpeEZvclVzZXIoZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBbIGUgXTtcbiAgICAgICAgICAgIH0odGhpcy51c2VySWQpKSwgciA9IFtdO1xuICAgICAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9kb2N1bWVudE11dGF0aW9uc1N0b3JlKGUpLlkoe1xuICAgICAgICAgICAgICAgIHJhbmdlOiBuXG4gICAgICAgICAgICB9LCAoKGUsIHQsIG4pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZVswXSA9PT0gdGhpcy51c2VySWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9kZWNvZGVSZXNvdXJjZVBhdGgoZVsxXSk7XG4gICAgICAgICAgICAgICAgICAgIHIucHVzaCh0KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Ugbi5kb25lKCk7XG4gICAgICAgICAgICB9KSkubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgICAgIF9fUFJJVkFURV9oYXJkQXNzZXJ0KDAgPT09IHIubGVuZ3RoKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBjb250YWluc0tleShlLCB0KSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfbXV0YXRpb25RdWV1ZUNvbnRhaW5zS2V5KGUsIHRoaXMudXNlcklkLCB0KTtcbiAgICB9XG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seSAoc3RhdGUgaXMgaGVsZCBpbiBtZW1vcnkgaW4gb3RoZXIgY2xpZW50cykuXG4gICAgLyoqIFJldHVybnMgdGhlIG11dGF0aW9uIHF1ZXVlJ3MgbWV0YWRhdGEgZnJvbSBJbmRleGVkRGIuICovXG4gICAgTW4oZSkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX211dGF0aW9uUXVldWVzU3RvcmUoZSkuZ2V0KHRoaXMudXNlcklkKS5uZXh0KChlID0+IGUgfHwge1xuICAgICAgICAgICAgdXNlcklkOiB0aGlzLnVzZXJJZCxcbiAgICAgICAgICAgIGxhc3RBY2tub3dsZWRnZWRCYXRjaElkOiAtMSxcbiAgICAgICAgICAgIGxhc3RTdHJlYW1Ub2tlbjogXCJcIlxuICAgICAgICB9KSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEByZXR1cm5zIHRydWUgaWYgdGhlIG11dGF0aW9uIHF1ZXVlIGZvciB0aGUgZ2l2ZW4gdXNlciBjb250YWlucyBhIHBlbmRpbmdcbiAqICAgICAgICAgbXV0YXRpb24gZm9yIHRoZSBnaXZlbiBrZXkuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX211dGF0aW9uUXVldWVDb250YWluc0tleShlLCB0LCBuKSB7XG4gICAgY29uc3QgciA9IF9fUFJJVkFURV9uZXdEYkRvY3VtZW50TXV0YXRpb25QcmVmaXhGb3JQYXRoKHQsIG4ucGF0aCksIGkgPSByWzFdLCBzID0gSURCS2V5UmFuZ2UubG93ZXJCb3VuZChyKTtcbiAgICBsZXQgbyA9ICExO1xuICAgIHJldHVybiBfX1BSSVZBVEVfZG9jdW1lbnRNdXRhdGlvbnNTdG9yZShlKS5ZKHtcbiAgICAgICAgcmFuZ2U6IHMsXG4gICAgICAgIEo6ICEwXG4gICAgfSwgKChlLCBuLCByKSA9PiB7XG4gICAgICAgIGNvbnN0IFtzLCBfLCAvKmJhdGNoSUQqLyBhXSA9IGU7XG4gICAgICAgIHMgPT09IHQgJiYgXyA9PT0gaSAmJiAobyA9ICEwKSwgci5kb25lKCk7XG4gICAgfSkpLm5leHQoKCgpID0+IG8pKTtcbn1cblxuLyoqIFJldHVybnMgdHJ1ZSBpZiBhbnkgbXV0YXRpb24gcXVldWUgY29udGFpbnMgdGhlIGdpdmVuIGRvY3VtZW50LiAqL1xuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIG11dGF0aW9ucyBvYmplY3Qgc3RvcmUuXG4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV9tdXRhdGlvbnNTdG9yZShlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9nZXRTdG9yZShlLCBcIm11dGF0aW9uc1wiKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIG11dGF0aW9uUXVldWVzIG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfZG9jdW1lbnRNdXRhdGlvbnNTdG9yZShlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9nZXRTdG9yZShlLCBcImRvY3VtZW50TXV0YXRpb25zXCIpO1xufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgbXV0YXRpb25RdWV1ZXMgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9tdXRhdGlvblF1ZXVlc1N0b3JlKGUpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX2dldFN0b3JlKGUsIFwibXV0YXRpb25RdWV1ZXNcIik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogT2Zmc2V0IHRvIGVuc3VyZSBub24tb3ZlcmxhcHBpbmcgdGFyZ2V0IGlkcy4gKi9cbi8qKlxuICogR2VuZXJhdGVzIG1vbm90b25pY2FsbHkgaW5jcmVhc2luZyB0YXJnZXQgSURzIGZvciBzZW5kaW5nIHRhcmdldHMgdG8gdGhlXG4gKiB3YXRjaCBzdHJlYW0uXG4gKlxuICogVGhlIGNsaWVudCBjb25zdHJ1Y3RzIHR3byBnZW5lcmF0b3JzLCBvbmUgZm9yIHRoZSB0YXJnZXQgY2FjaGUsIGFuZCBvbmUgZm9yXG4gKiBmb3IgdGhlIHN5bmMgZW5naW5lICh0byBnZW5lcmF0ZSBsaW1ibyBkb2N1bWVudHMgdGFyZ2V0cykuIFRoZXNlXG4gKiBnZW5lcmF0b3JzIHByb2R1Y2Ugbm9uLW92ZXJsYXBwaW5nIElEcyAoYnkgdXNpbmcgZXZlbiBhbmQgb2RkIElEc1xuICogcmVzcGVjdGl2ZWx5KS5cbiAqXG4gKiBCeSBzZXBhcmF0aW5nIHRoZSB0YXJnZXQgSUQgc3BhY2UsIHRoZSBxdWVyeSBjYWNoZSBjYW4gZ2VuZXJhdGUgdGFyZ2V0IElEc1xuICogdGhhdCBwZXJzaXN0IGFjcm9zcyBjbGllbnQgcmVzdGFydHMsIHdoaWxlIHN5bmMgZW5naW5lIGNhbiBpbmRlcGVuZGVudGx5XG4gKiBnZW5lcmF0ZSBpbi1tZW1vcnkgdGFyZ2V0IElEcyB0aGF0IGFyZSB0cmFuc2llbnQgYW5kIGNhbiBiZSByZXVzZWQgYWZ0ZXIgYVxuICogcmVzdGFydC5cbiAqL1xuY2xhc3MgX19QUklWQVRFX1RhcmdldElkR2VuZXJhdG9yIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMueG4gPSBlO1xuICAgIH1cbiAgICBuZXh0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy54biArPSAyLCB0aGlzLnhuO1xuICAgIH1cbiAgICBzdGF0aWMgT24oKSB7XG4gICAgICAgIC8vIFRoZSB0YXJnZXQgY2FjaGUgZ2VuZXJhdG9yIG11c3QgcmV0dXJuICcyJyBpbiBpdHMgZmlyc3QgY2FsbCB0byBgbmV4dCgpYFxuICAgICAgICAvLyBhcyB0aGVyZSBpcyBubyBkaWZmZXJlbnRpYXRpb24gaW4gdGhlIHByb3RvY29sIGxheWVyIGJldHdlZW4gYW4gdW5zZXRcbiAgICAgICAgLy8gbnVtYmVyIGFuZCB0aGUgbnVtYmVyICcwJy4gSWYgd2Ugd2VyZSB0byBzZW50IGEgdGFyZ2V0IHdpdGggdGFyZ2V0IElEXG4gICAgICAgIC8vICcwJywgdGhlIGJhY2tlbmQgd291bGQgY29uc2lkZXIgaXQgdW5zZXQgYW5kIHJlcGxhY2UgaXQgd2l0aCBpdHMgb3duIElELlxuICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9UYXJnZXRJZEdlbmVyYXRvcigwKTtcbiAgICB9XG4gICAgc3RhdGljIE5uKCkge1xuICAgICAgICAvLyBTeW5jIGVuZ2luZSBhc3NpZ25zIHRhcmdldCBJRHMgZm9yIGxpbWJvIGRvY3VtZW50IGRldGVjdGlvbi5cbiAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfVGFyZ2V0SWRHZW5lcmF0b3IoLTEpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgX19QUklWQVRFX0luZGV4ZWREYlRhcmdldENhY2hlIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUgPSBlLCB0aGlzLnNlcmlhbGl6ZXIgPSB0O1xuICAgIH1cbiAgICAvLyBQT1JUSU5HIE5PVEU6IFdlIGRvbid0IGNhY2hlIGdsb2JhbCBtZXRhZGF0YSBmb3IgdGhlIHRhcmdldCBjYWNoZSwgc2luY2VcbiAgICAvLyBzb21lIG9mIGl0IChpbiBwYXJ0aWN1bGFyIGBoaWdoZXN0VGFyZ2V0SWRgKSBjYW4gYmUgbW9kaWZpZWQgYnkgc2Vjb25kYXJ5XG4gICAgLy8gdGFicy4gV2UgY291bGQgcGVyaGFwcyBiZSBtb3JlIGdyYW51bGFyIChhbmQgZS5nLiBzdGlsbCBjYWNoZVxuICAgIC8vIGBsYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uYCBpbiBtZW1vcnkpIGJ1dCBmb3Igc2ltcGxpY2l0eSB3ZSBjdXJyZW50bHkgZ29cbiAgICAvLyB0byBJbmRleGVkRGIgd2hlbmV2ZXIgd2UgbmVlZCB0byByZWFkIG1ldGFkYXRhLiBXZSBjYW4gcmV2aXNpdCBpZiBpdCB0dXJuc1xuICAgIC8vIG91dCB0byBoYXZlIGEgbWVhbmluZ2Z1bCBwZXJmb3JtYW5jZSBpbXBhY3QuXG4gICAgYWxsb2NhdGVUYXJnZXRJZChlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkJuKGUpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IG5ldyBfX1BSSVZBVEVfVGFyZ2V0SWRHZW5lcmF0b3IodC5oaWdoZXN0VGFyZ2V0SWQpO1xuICAgICAgICAgICAgcmV0dXJuIHQuaGlnaGVzdFRhcmdldElkID0gbi5uZXh0KCksIHRoaXMuTG4oZSwgdCkubmV4dCgoKCkgPT4gdC5oaWdoZXN0VGFyZ2V0SWQpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBnZXRMYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuQm4oZSkubmV4dCgoZSA9PiBTbmFwc2hvdFZlcnNpb24uZnJvbVRpbWVzdGFtcChuZXcgVGltZXN0YW1wKGUubGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbi5zZWNvbmRzLCBlLmxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24ubmFub3NlY29uZHMpKSkpO1xuICAgIH1cbiAgICBnZXRIaWdoZXN0U2VxdWVuY2VOdW1iZXIoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5CbihlKS5uZXh0KChlID0+IGUuaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyKSk7XG4gICAgfVxuICAgIHNldFRhcmdldHNNZXRhZGF0YShlLCB0LCBuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkJuKGUpLm5leHQoKHIgPT4gKHIuaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyID0gdCwgbiAmJiAoci5sYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uID0gbi50b1RpbWVzdGFtcCgpKSwgXG4gICAgICAgIHQgPiByLmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciAmJiAoci5oaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIgPSB0KSwgdGhpcy5MbihlLCByKSkpKTtcbiAgICB9XG4gICAgYWRkVGFyZ2V0RGF0YShlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmtuKGUsIHQpLm5leHQoKCgpID0+IHRoaXMuQm4oZSkubmV4dCgobiA9PiAobi50YXJnZXRDb3VudCArPSAxLCB0aGlzLnFuKHQsIG4pLCBcbiAgICAgICAgdGhpcy5MbihlLCBuKSkpKSkpO1xuICAgIH1cbiAgICB1cGRhdGVUYXJnZXREYXRhKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMua24oZSwgdCk7XG4gICAgfVxuICAgIHJlbW92ZVRhcmdldERhdGEoZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZW1vdmVNYXRjaGluZ0tleXNGb3JUYXJnZXRJZChlLCB0LnRhcmdldElkKS5uZXh0KCgoKSA9PiBfX1BSSVZBVEVfdGFyZ2V0c1N0b3JlKGUpLmRlbGV0ZSh0LnRhcmdldElkKSkpLm5leHQoKCgpID0+IHRoaXMuQm4oZSkpKS5uZXh0KCh0ID0+IChfX1BSSVZBVEVfaGFyZEFzc2VydCh0LnRhcmdldENvdW50ID4gMCksIFxuICAgICAgICB0LnRhcmdldENvdW50IC09IDEsIHRoaXMuTG4oZSwgdCkpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERyb3BzIGFueSB0YXJnZXRzIHdpdGggc2VxdWVuY2UgbnVtYmVyIGxlc3MgdGhhbiBvciBlcXVhbCB0byB0aGUgdXBwZXIgYm91bmQsIGV4Y2VwdGluZyB0aG9zZVxuICAgICAqIHByZXNlbnQgaW4gYGFjdGl2ZVRhcmdldElkc2AuIERvY3VtZW50IGFzc29jaWF0aW9ucyBmb3IgdGhlIHJlbW92ZWQgdGFyZ2V0cyBhcmUgYWxzbyByZW1vdmVkLlxuICAgICAqIFJldHVybnMgdGhlIG51bWJlciBvZiB0YXJnZXRzIHJlbW92ZWQuXG4gICAgICovICAgIHJlbW92ZVRhcmdldHMoZSwgdCwgbikge1xuICAgICAgICBsZXQgciA9IDA7XG4gICAgICAgIGNvbnN0IGkgPSBbXTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV90YXJnZXRzU3RvcmUoZSkuWSgoKHMsIG8pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IF8gPSBfX1BSSVZBVEVfZnJvbURiVGFyZ2V0KG8pO1xuICAgICAgICAgICAgXy5zZXF1ZW5jZU51bWJlciA8PSB0ICYmIG51bGwgPT09IG4uZ2V0KF8udGFyZ2V0SWQpICYmIChyKyssIGkucHVzaCh0aGlzLnJlbW92ZVRhcmdldERhdGEoZSwgXykpKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKGkpKSkubmV4dCgoKCkgPT4gcikpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsIHByb3ZpZGVkIGZ1bmN0aW9uIHdpdGggZWFjaCBgVGFyZ2V0RGF0YWAgdGhhdCB3ZSBoYXZlIGNhY2hlZC5cbiAgICAgKi8gICAgZm9yRWFjaFRhcmdldChlLCB0KSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfdGFyZ2V0c1N0b3JlKGUpLlkoKChlLCBuKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByID0gX19QUklWQVRFX2Zyb21EYlRhcmdldChuKTtcbiAgICAgICAgICAgIHQocik7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgQm4oZSkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX2dsb2JhbFRhcmdldFN0b3JlKGUpLmdldChcInRhcmdldEdsb2JhbEtleVwiKS5uZXh0KChlID0+IChfX1BSSVZBVEVfaGFyZEFzc2VydChudWxsICE9PSBlKSwgXG4gICAgICAgIGUpKSk7XG4gICAgfVxuICAgIExuKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9nbG9iYWxUYXJnZXRTdG9yZShlKS5wdXQoXCJ0YXJnZXRHbG9iYWxLZXlcIiwgdCk7XG4gICAgfVxuICAgIGtuKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV90YXJnZXRzU3RvcmUoZSkucHV0KF9fUFJJVkFURV90b0RiVGFyZ2V0KHRoaXMuc2VyaWFsaXplciwgdCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbi1wbGFjZSB1cGRhdGVzIHRoZSBwcm92aWRlZCBtZXRhZGF0YSB0byBhY2NvdW50IGZvciB2YWx1ZXMgaW4gdGhlIGdpdmVuXG4gICAgICogVGFyZ2V0RGF0YS4gU2F2aW5nIGlzIGRvbmUgc2VwYXJhdGVseS4gUmV0dXJucyB0cnVlIGlmIHRoZXJlIHdlcmUgYW55XG4gICAgICogY2hhbmdlcyB0byB0aGUgbWV0YWRhdGEuXG4gICAgICovICAgIHFuKGUsIHQpIHtcbiAgICAgICAgbGV0IG4gPSAhMTtcbiAgICAgICAgcmV0dXJuIGUudGFyZ2V0SWQgPiB0LmhpZ2hlc3RUYXJnZXRJZCAmJiAodC5oaWdoZXN0VGFyZ2V0SWQgPSBlLnRhcmdldElkLCBuID0gITApLCBcbiAgICAgICAgZS5zZXF1ZW5jZU51bWJlciA+IHQuaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyICYmICh0LmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciA9IGUuc2VxdWVuY2VOdW1iZXIsIFxuICAgICAgICBuID0gITApLCBuO1xuICAgIH1cbiAgICBnZXRUYXJnZXRDb3VudChlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkJuKGUpLm5leHQoKGUgPT4gZS50YXJnZXRDb3VudCkpO1xuICAgIH1cbiAgICBnZXRUYXJnZXREYXRhKGUsIHQpIHtcbiAgICAgICAgLy8gSXRlcmF0aW5nIGJ5IHRoZSBjYW5vbmljYWxJZCBtYXkgeWllbGQgbW9yZSB0aGFuIG9uZSByZXN1bHQgYmVjYXVzZVxuICAgICAgICAvLyBjYW5vbmljYWxJZCB2YWx1ZXMgYXJlIG5vdCByZXF1aXJlZCB0byBiZSB1bmlxdWUgcGVyIHRhcmdldC4gVGhpcyBxdWVyeVxuICAgICAgICAvLyBkZXBlbmRzIG9uIHRoZSBxdWVyeVRhcmdldHMgaW5kZXggdG8gYmUgZWZmaWNpZW50LlxuICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2Nhbm9uaWZ5VGFyZ2V0KHQpLCByID0gSURCS2V5UmFuZ2UuYm91bmQoWyBuLCBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFkgXSwgWyBuLCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkgXSk7XG4gICAgICAgIGxldCBpID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV90YXJnZXRzU3RvcmUoZSkuWSh7XG4gICAgICAgICAgICByYW5nZTogcixcbiAgICAgICAgICAgIGluZGV4OiBcInF1ZXJ5VGFyZ2V0c0luZGV4XCJcbiAgICAgICAgfSwgKChlLCBuLCByKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzID0gX19QUklWQVRFX2Zyb21EYlRhcmdldChuKTtcbiAgICAgICAgICAgIC8vIEFmdGVyIGZpbmRpbmcgYSBwb3RlbnRpYWwgbWF0Y2gsIGNoZWNrIHRoYXQgdGhlIHRhcmdldCBpc1xuICAgICAgICAgICAgLy8gYWN0dWFsbHkgZXF1YWwgdG8gdGhlIHJlcXVlc3RlZCB0YXJnZXQuXG4gICAgICAgICAgICAgICAgICAgICAgICBfX1BSSVZBVEVfdGFyZ2V0RXF1YWxzKHQsIHMudGFyZ2V0KSAmJiAoaSA9IHMsIHIuZG9uZSgpKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGkpKTtcbiAgICB9XG4gICAgYWRkTWF0Y2hpbmdLZXlzKGUsIHQsIG4pIHtcbiAgICAgICAgLy8gUE9SVElORyBOT1RFOiBUaGUgcmV2ZXJzZSBpbmRleCAoZG9jdW1lbnRzVGFyZ2V0cykgaXMgbWFpbnRhaW5lZCBieVxuICAgICAgICAvLyBJbmRleGVkRGIuXG4gICAgICAgIGNvbnN0IHIgPSBbXSwgaSA9IF9fUFJJVkFURV9kb2N1bWVudFRhcmdldFN0b3JlKGUpO1xuICAgICAgICByZXR1cm4gdC5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBfX1BSSVZBVEVfZW5jb2RlUmVzb3VyY2VQYXRoKHQucGF0aCk7XG4gICAgICAgICAgICByLnB1c2goaS5wdXQoe1xuICAgICAgICAgICAgICAgIHRhcmdldElkOiBuLFxuICAgICAgICAgICAgICAgIHBhdGg6IHNcbiAgICAgICAgICAgIH0pKSwgci5wdXNoKHRoaXMucmVmZXJlbmNlRGVsZWdhdGUuYWRkUmVmZXJlbmNlKGUsIG4sIHQpKTtcbiAgICAgICAgfSkpLCBQZXJzaXN0ZW5jZVByb21pc2Uud2FpdEZvcihyKTtcbiAgICB9XG4gICAgcmVtb3ZlTWF0Y2hpbmdLZXlzKGUsIHQsIG4pIHtcbiAgICAgICAgLy8gUE9SVElORyBOT1RFOiBUaGUgcmV2ZXJzZSBpbmRleCAoZG9jdW1lbnRzVGFyZ2V0cykgaXMgbWFpbnRhaW5lZCBieVxuICAgICAgICAvLyBJbmRleGVkRGIuXG4gICAgICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfZG9jdW1lbnRUYXJnZXRTdG9yZShlKTtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKHQsICh0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBfX1BSSVZBVEVfZW5jb2RlUmVzb3VyY2VQYXRoKHQucGF0aCk7XG4gICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLndhaXRGb3IoWyByLmRlbGV0ZShbIG4sIGkgXSksIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUucmVtb3ZlUmVmZXJlbmNlKGUsIG4sIHQpIF0pO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHJlbW92ZU1hdGNoaW5nS2V5c0ZvclRhcmdldElkKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9kb2N1bWVudFRhcmdldFN0b3JlKGUpLCByID0gSURCS2V5UmFuZ2UuYm91bmQoWyB0IF0sIFsgdCArIDEgXSwgXG4gICAgICAgIC8qbG93ZXJPcGVuPSovICExLCBcbiAgICAgICAgLyp1cHBlck9wZW49Ki8gITApO1xuICAgICAgICByZXR1cm4gbi5kZWxldGUocik7XG4gICAgfVxuICAgIGdldE1hdGNoaW5nS2V5c0ZvclRhcmdldElkKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IElEQktleVJhbmdlLmJvdW5kKFsgdCBdLCBbIHQgKyAxIF0sIFxuICAgICAgICAvKmxvd2VyT3Blbj0qLyAhMSwgXG4gICAgICAgIC8qdXBwZXJPcGVuPSovICEwKSwgciA9IF9fUFJJVkFURV9kb2N1bWVudFRhcmdldFN0b3JlKGUpO1xuICAgICAgICBsZXQgaSA9IF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpO1xuICAgICAgICByZXR1cm4gci5ZKHtcbiAgICAgICAgICAgIHJhbmdlOiBuLFxuICAgICAgICAgICAgSjogITBcbiAgICAgICAgfSwgKChlLCB0LCBuKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByID0gX19QUklWQVRFX2RlY29kZVJlc291cmNlUGF0aChlWzFdKSwgcyA9IG5ldyBEb2N1bWVudEtleShyKTtcbiAgICAgICAgICAgIGkgPSBpLmFkZChzKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGkpKTtcbiAgICB9XG4gICAgY29udGFpbnNLZXkoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2VuY29kZVJlc291cmNlUGF0aCh0LnBhdGgpLCByID0gSURCS2V5UmFuZ2UuYm91bmQoWyBuIF0sIFsgX19QUklWQVRFX2ltbWVkaWF0ZVN1Y2Nlc3NvcihuKSBdLCBcbiAgICAgICAgLypsb3dlck9wZW49Ki8gITEsIFxuICAgICAgICAvKnVwcGVyT3Blbj0qLyAhMCk7XG4gICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9kb2N1bWVudFRhcmdldFN0b3JlKGUpLlkoe1xuICAgICAgICAgICAgaW5kZXg6IFwiZG9jdW1lbnRUYXJnZXRzSW5kZXhcIixcbiAgICAgICAgICAgIEo6ICEwLFxuICAgICAgICAgICAgcmFuZ2U6IHJcbiAgICAgICAgfSwgKChbZSwgdF0sIG4sIHIpID0+IHtcbiAgICAgICAgICAgIC8vIEhhdmluZyBhIHNlbnRpbmVsIHJvdyBmb3IgYSBkb2N1bWVudCBkb2VzIG5vdCBjb3VudCBhcyBjb250YWluaW5nIHRoYXQgZG9jdW1lbnQ7XG4gICAgICAgICAgICAvLyBGb3IgdGhlIHRhcmdldCBjYWNoZSwgY29udGFpbmluZyB0aGUgZG9jdW1lbnQgbWVhbnMgdGhlIGRvY3VtZW50IGlzIHBhcnQgb2Ygc29tZVxuICAgICAgICAgICAgLy8gdGFyZ2V0LlxuICAgICAgICAgICAgMCAhPT0gZSAmJiAoaSsrLCByLmRvbmUoKSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBpID4gMCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb29rcyB1cCBhIFRhcmdldERhdGEgZW50cnkgYnkgdGFyZ2V0IElELlxuICAgICAqXG4gICAgICogQHBhcmFtIHRhcmdldElkIC0gVGhlIHRhcmdldCBJRCBvZiB0aGUgVGFyZ2V0RGF0YSBlbnRyeSB0byBsb29rIHVwLlxuICAgICAqIEByZXR1cm5zIFRoZSBjYWNoZWQgVGFyZ2V0RGF0YSBlbnRyeSwgb3IgbnVsbCBpZiB0aGUgY2FjaGUgaGFzIG5vIGVudHJ5IGZvclxuICAgICAqIHRoZSB0YXJnZXQuXG4gICAgICovXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seS5cbiAgICBfdChlLCB0KSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfdGFyZ2V0c1N0b3JlKGUpLmdldCh0KS5uZXh0KChlID0+IGUgPyBfX1BSSVZBVEVfZnJvbURiVGFyZ2V0KGUpIDogbnVsbCkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIHF1ZXJpZXMgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV90YXJnZXRzU3RvcmUoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfZ2V0U3RvcmUoZSwgXCJ0YXJnZXRzXCIpO1xufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgdGFyZ2V0IGdsb2JhbHMgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9nbG9iYWxUYXJnZXRTdG9yZShlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9nZXRTdG9yZShlLCBcInRhcmdldEdsb2JhbFwiKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIGRvY3VtZW50IHRhcmdldCBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2RvY3VtZW50VGFyZ2V0U3RvcmUoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfZ2V0U3RvcmUoZSwgXCJ0YXJnZXREb2N1bWVudHNcIik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9idWZmZXJFbnRyeUNvbXBhcmF0b3IoW2UsIHRdLCBbbiwgcl0pIHtcbiAgICBjb25zdCBpID0gX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IoZSwgbik7XG4gICAgcmV0dXJuIDAgPT09IGkgPyBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcih0LCByKSA6IGk7XG59XG5cbi8qKlxuICogVXNlZCB0byBjYWxjdWxhdGUgdGhlIG50aCBzZXF1ZW5jZSBudW1iZXIuIEtlZXBzIGEgcm9sbGluZyBidWZmZXIgb2YgdGhlXG4gKiBsb3dlc3QgbiB2YWx1ZXMgcGFzc2VkIHRvIGBhZGRFbGVtZW50YCwgYW5kIGZpbmFsbHkgcmVwb3J0cyB0aGUgbGFyZ2VzdCBvZlxuICogdGhlbSBpbiBgbWF4VmFsdWVgLlxuICovIGNsYXNzIF9fUFJJVkFURV9Sb2xsaW5nU2VxdWVuY2VOdW1iZXJCdWZmZXIge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5RbiA9IGUsIHRoaXMuYnVmZmVyID0gbmV3IFNvcnRlZFNldChfX1BSSVZBVEVfYnVmZmVyRW50cnlDb21wYXJhdG9yKSwgdGhpcy5LbiA9IDA7XG4gICAgfVxuICAgICRuKCkge1xuICAgICAgICByZXR1cm4gKyt0aGlzLktuO1xuICAgIH1cbiAgICBVbihlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBbIGUsIHRoaXMuJG4oKSBdO1xuICAgICAgICBpZiAodGhpcy5idWZmZXIuc2l6ZSA8IHRoaXMuUW4pIHRoaXMuYnVmZmVyID0gdGhpcy5idWZmZXIuYWRkKHQpOyBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLmJ1ZmZlci5sYXN0KCk7XG4gICAgICAgICAgICBfX1BSSVZBVEVfYnVmZmVyRW50cnlDb21wYXJhdG9yKHQsIGUpIDwgMCAmJiAodGhpcy5idWZmZXIgPSB0aGlzLmJ1ZmZlci5kZWxldGUoZSkuYWRkKHQpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgbWF4VmFsdWUoKSB7XG4gICAgICAgIC8vIEd1YXJhbnRlZWQgdG8gYmUgbm9uLWVtcHR5LiBJZiB3ZSBkZWNpZGUgd2UgYXJlIG5vdCBjb2xsZWN0aW5nIGFueVxuICAgICAgICAvLyBzZXF1ZW5jZSBudW1iZXJzLCBudGhTZXF1ZW5jZU51bWJlciBiZWxvdyBzaG9ydC1jaXJjdWl0cy4gSWYgd2UgaGF2ZVxuICAgICAgICAvLyBkZWNpZGVkIHRoYXQgd2UgYXJlIGNvbGxlY3RpbmcgbiBzZXF1ZW5jZSBudW1iZXJzLCBpdCdzIGJlY2F1c2UgbiBpcyBzb21lXG4gICAgICAgIC8vIHBlcmNlbnRhZ2Ugb2YgdGhlIGV4aXN0aW5nIHNlcXVlbmNlIG51bWJlcnMuIFRoYXQgbWVhbnMgd2Ugc2hvdWxkIG5ldmVyXG4gICAgICAgIC8vIGJlIGluIGEgc2l0dWF0aW9uIHdoZXJlIHdlIGFyZSBjb2xsZWN0aW5nIHNlcXVlbmNlIG51bWJlcnMgYnV0IGRvbid0XG4gICAgICAgIC8vIGFjdHVhbGx5IGhhdmUgYW55LlxuICAgICAgICByZXR1cm4gdGhpcy5idWZmZXIubGFzdCgpWzBdO1xuICAgIH1cbn1cblxuLyoqXG4gKiBUaGlzIGNsYXNzIGlzIHJlc3BvbnNpYmxlIGZvciB0aGUgc2NoZWR1bGluZyBvZiBMUlUgZ2FyYmFnZSBjb2xsZWN0aW9uLiBJdCBoYW5kbGVzIGNoZWNraW5nXG4gKiB3aGV0aGVyIG9yIG5vdCBHQyBpcyBlbmFibGVkLCBhcyB3ZWxsIGFzIHdoaWNoIGRlbGF5IHRvIHVzZSBiZWZvcmUgdGhlIG5leHQgcnVuLlxuICovIGNsYXNzIF9fUFJJVkFURV9McnVTY2hlZHVsZXIge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4pIHtcbiAgICAgICAgdGhpcy5nYXJiYWdlQ29sbGVjdG9yID0gZSwgdGhpcy5hc3luY1F1ZXVlID0gdCwgdGhpcy5sb2NhbFN0b3JlID0gbiwgdGhpcy5XbiA9IG51bGw7XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICAtMSAhPT0gdGhpcy5nYXJiYWdlQ29sbGVjdG9yLnBhcmFtcy5jYWNoZVNpemVDb2xsZWN0aW9uVGhyZXNob2xkICYmIHRoaXMuR24oNmU0KTtcbiAgICB9XG4gICAgc3RvcCgpIHtcbiAgICAgICAgdGhpcy5XbiAmJiAodGhpcy5Xbi5jYW5jZWwoKSwgdGhpcy5XbiA9IG51bGwpO1xuICAgIH1cbiAgICBnZXQgc3RhcnRlZCgpIHtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IHRoaXMuV247XG4gICAgfVxuICAgIEduKGUpIHtcbiAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiTHJ1R2FyYmFnZUNvbGxlY3RvclwiLCBgR2FyYmFnZSBjb2xsZWN0aW9uIHNjaGVkdWxlZCBpbiAke2V9bXNgKSwgXG4gICAgICAgIHRoaXMuV24gPSB0aGlzLmFzeW5jUXVldWUuZW5xdWV1ZUFmdGVyRGVsYXkoXCJscnVfZ2FyYmFnZV9jb2xsZWN0aW9uXCIgLyogVGltZXJJZC5McnVHYXJiYWdlQ29sbGVjdGlvbiAqLyAsIGUsIChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLlduID0gbnVsbDtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5sb2NhbFN0b3JlLmNvbGxlY3RHYXJiYWdlKHRoaXMuZ2FyYmFnZUNvbGxlY3Rvcik7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgX19QUklWQVRFX2lzSW5kZXhlZERiVHJhbnNhY3Rpb25FcnJvcihlKSA/IF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkxydUdhcmJhZ2VDb2xsZWN0b3JcIiwgXCJJZ25vcmluZyBJbmRleGVkREIgZXJyb3IgZHVyaW5nIGdhcmJhZ2UgY29sbGVjdGlvbjogXCIsIGUpIDogYXdhaXQgX19QUklWQVRFX2lnbm9yZUlmUHJpbWFyeUxlYXNlTG9zcyhlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IHRoaXMuR24oM2U1KTtcbiAgICAgICAgfSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBJbXBsZW1lbnRzIHRoZSBzdGVwcyBmb3IgTFJVIGdhcmJhZ2UgY29sbGVjdGlvbi5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfTHJ1R2FyYmFnZUNvbGxlY3RvckltcGwge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgdGhpcy56biA9IGUsIHRoaXMucGFyYW1zID0gdDtcbiAgICB9XG4gICAgY2FsY3VsYXRlVGFyZ2V0Q291bnQoZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy56bi5qbihlKS5uZXh0KChlID0+IE1hdGguZmxvb3IodCAvIDEwMCAqIGUpKSk7XG4gICAgfVxuICAgIG50aFNlcXVlbmNlTnVtYmVyKGUsIHQpIHtcbiAgICAgICAgaWYgKDAgPT09IHQpIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShfX1BSSVZBVEVfTGlzdGVuU2VxdWVuY2UuX2UpO1xuICAgICAgICBjb25zdCBuID0gbmV3IF9fUFJJVkFURV9Sb2xsaW5nU2VxdWVuY2VOdW1iZXJCdWZmZXIodCk7XG4gICAgICAgIHJldHVybiB0aGlzLnpuLmZvckVhY2hUYXJnZXQoZSwgKGUgPT4gbi5VbihlLnNlcXVlbmNlTnVtYmVyKSkpLm5leHQoKCgpID0+IHRoaXMuem4uSG4oZSwgKGUgPT4gbi5VbihlKSkpKSkubmV4dCgoKCkgPT4gbi5tYXhWYWx1ZSkpO1xuICAgIH1cbiAgICByZW1vdmVUYXJnZXRzKGUsIHQsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuem4ucmVtb3ZlVGFyZ2V0cyhlLCB0LCBuKTtcbiAgICB9XG4gICAgcmVtb3ZlT3JwaGFuZWREb2N1bWVudHMoZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy56bi5yZW1vdmVPcnBoYW5lZERvY3VtZW50cyhlLCB0KTtcbiAgICB9XG4gICAgY29sbGVjdChlLCB0KSB7XG4gICAgICAgIHJldHVybiAtMSA9PT0gdGhpcy5wYXJhbXMuY2FjaGVTaXplQ29sbGVjdGlvblRocmVzaG9sZCA/IChfX1BSSVZBVEVfbG9nRGVidWcoXCJMcnVHYXJiYWdlQ29sbGVjdG9yXCIsIFwiR2FyYmFnZSBjb2xsZWN0aW9uIHNraXBwZWQ7IGRpc2FibGVkXCIpLCBcbiAgICAgICAgUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoRWUpKSA6IHRoaXMuZ2V0Q2FjaGVTaXplKGUpLm5leHQoKG4gPT4gbiA8IHRoaXMucGFyYW1zLmNhY2hlU2l6ZUNvbGxlY3Rpb25UaHJlc2hvbGQgPyAoX19QUklWQVRFX2xvZ0RlYnVnKFwiTHJ1R2FyYmFnZUNvbGxlY3RvclwiLCBgR2FyYmFnZSBjb2xsZWN0aW9uIHNraXBwZWQ7IENhY2hlIHNpemUgJHtufSBpcyBsb3dlciB0aGFuIHRocmVzaG9sZCAke3RoaXMucGFyYW1zLmNhY2hlU2l6ZUNvbGxlY3Rpb25UaHJlc2hvbGR9YCksIFxuICAgICAgICBFZSkgOiB0aGlzLkpuKGUsIHQpKSk7XG4gICAgfVxuICAgIGdldENhY2hlU2l6ZShlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnpuLmdldENhY2hlU2l6ZShlKTtcbiAgICB9XG4gICAgSm4oZSwgdCkge1xuICAgICAgICBsZXQgbiwgciwgaSwgcywgbywgYSwgdTtcbiAgICAgICAgY29uc3QgYyA9IERhdGUubm93KCk7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbGN1bGF0ZVRhcmdldENvdW50KGUsIHRoaXMucGFyYW1zLnBlcmNlbnRpbGVUb0NvbGxlY3QpLm5leHQoKHQgPT4gKFxuICAgICAgICAvLyBDYXAgYXQgdGhlIGNvbmZpZ3VyZWQgbWF4XG4gICAgICAgIHQgPiB0aGlzLnBhcmFtcy5tYXhpbXVtU2VxdWVuY2VOdW1iZXJzVG9Db2xsZWN0ID8gKF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkxydUdhcmJhZ2VDb2xsZWN0b3JcIiwgYENhcHBpbmcgc2VxdWVuY2UgbnVtYmVycyB0byBjb2xsZWN0IGRvd24gdG8gdGhlIG1heGltdW0gb2YgJHt0aGlzLnBhcmFtcy5tYXhpbXVtU2VxdWVuY2VOdW1iZXJzVG9Db2xsZWN0fSBmcm9tICR7dH1gKSwgXG4gICAgICAgIHIgPSB0aGlzLnBhcmFtcy5tYXhpbXVtU2VxdWVuY2VOdW1iZXJzVG9Db2xsZWN0KSA6IHIgPSB0LCBzID0gRGF0ZS5ub3coKSwgdGhpcy5udGhTZXF1ZW5jZU51bWJlcihlLCByKSkpKS5uZXh0KChyID0+IChuID0gciwgXG4gICAgICAgIG8gPSBEYXRlLm5vdygpLCB0aGlzLnJlbW92ZVRhcmdldHMoZSwgbiwgdCkpKSkubmV4dCgodCA9PiAoaSA9IHQsIGEgPSBEYXRlLm5vdygpLCBcbiAgICAgICAgdGhpcy5yZW1vdmVPcnBoYW5lZERvY3VtZW50cyhlLCBuKSkpKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIGlmICh1ID0gRGF0ZS5ub3coKSwgX19QUklWQVRFX2dldExvZ0xldmVsKCkgPD0gTG9nTGV2ZWwuREVCVUcpIHtcbiAgICAgICAgICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoXCJMcnVHYXJiYWdlQ29sbGVjdG9yXCIsIGBMUlUgR2FyYmFnZSBDb2xsZWN0aW9uXFxuXFx0Q291bnRlZCB0YXJnZXRzIGluICR7cyAtIGN9bXNcXG5cXHREZXRlcm1pbmVkIGxlYXN0IHJlY2VudGx5IHVzZWQgJHtyfSBpbiBgICsgKG8gLSBzKSArIFwibXNcXG5cIiArIGBcXHRSZW1vdmVkICR7aX0gdGFyZ2V0cyBpbiBgICsgKGEgLSBvKSArIFwibXNcXG5cIiArIGBcXHRSZW1vdmVkICR7ZX0gZG9jdW1lbnRzIGluIGAgKyAodSAtIGEpICsgXCJtc1xcblwiICsgYFRvdGFsIER1cmF0aW9uOiAke3UgLSBjfW1zYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgICAgICAgIGRpZFJ1bjogITAsXG4gICAgICAgICAgICAgICAgc2VxdWVuY2VOdW1iZXJzQ29sbGVjdGVkOiByLFxuICAgICAgICAgICAgICAgIHRhcmdldHNSZW1vdmVkOiBpLFxuICAgICAgICAgICAgICAgIGRvY3VtZW50c1JlbW92ZWQ6IGVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfbmV3THJ1R2FyYmFnZUNvbGxlY3RvcihlLCB0KSB7XG4gICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfTHJ1R2FyYmFnZUNvbGxlY3RvckltcGwoZSwgdCk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogUHJvdmlkZXMgTFJVIGZ1bmN0aW9uYWxpdHkgZm9yIEluZGV4ZWREQiBwZXJzaXN0ZW5jZS4gKi8gY2xhc3MgX19QUklWQVRFX0luZGV4ZWREYkxydURlbGVnYXRlSW1wbCB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICB0aGlzLmRiID0gZSwgdGhpcy5nYXJiYWdlQ29sbGVjdG9yID0gX19QUklWQVRFX25ld0xydUdhcmJhZ2VDb2xsZWN0b3IodGhpcywgdCk7XG4gICAgfVxuICAgIGpuKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuWW4oZSk7XG4gICAgICAgIHJldHVybiB0aGlzLmRiLmdldFRhcmdldENhY2hlKCkuZ2V0VGFyZ2V0Q291bnQoZSkubmV4dCgoZSA9PiB0Lm5leHQoKHQgPT4gZSArIHQpKSkpO1xuICAgIH1cbiAgICBZbihlKSB7XG4gICAgICAgIGxldCB0ID0gMDtcbiAgICAgICAgcmV0dXJuIHRoaXMuSG4oZSwgKGUgPT4ge1xuICAgICAgICAgICAgdCsrO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gdCkpO1xuICAgIH1cbiAgICBmb3JFYWNoVGFyZ2V0KGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGIuZ2V0VGFyZ2V0Q2FjaGUoKS5mb3JFYWNoVGFyZ2V0KGUsIHQpO1xuICAgIH1cbiAgICBIbihlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLlpuKGUsICgoZSwgbikgPT4gdChuKSkpO1xuICAgIH1cbiAgICBhZGRSZWZlcmVuY2UoZSwgdCwgbikge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3dyaXRlU2VudGluZWxLZXkoZSwgbik7XG4gICAgfVxuICAgIHJlbW92ZVJlZmVyZW5jZShlLCB0LCBuKSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfd3JpdGVTZW50aW5lbEtleShlLCBuKTtcbiAgICB9XG4gICAgcmVtb3ZlVGFyZ2V0cyhlLCB0LCBuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRiLmdldFRhcmdldENhY2hlKCkucmVtb3ZlVGFyZ2V0cyhlLCB0LCBuKTtcbiAgICB9XG4gICAgbWFya1BvdGVudGlhbGx5T3JwaGFuZWQoZSwgdCkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3dyaXRlU2VudGluZWxLZXkoZSwgdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiBhbnl0aGluZyB3b3VsZCBwcmV2ZW50IHRoaXMgZG9jdW1lbnQgZnJvbSBiZWluZyBnYXJiYWdlXG4gICAgICogY29sbGVjdGVkLCBnaXZlbiB0aGF0IHRoZSBkb2N1bWVudCBpbiBxdWVzdGlvbiBpcyBub3QgcHJlc2VudCBpbiBhbnlcbiAgICAgKiB0YXJnZXRzIGFuZCBoYXMgYSBzZXF1ZW5jZSBudW1iZXIgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIHRoZSB1cHBlciBib3VuZCBmb3JcbiAgICAgKiB0aGUgY29sbGVjdGlvbiBydW4uXG4gICAgICovICAgIFhuKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9tdXRhdGlvblF1ZXVlc0NvbnRhaW5LZXkoZSwgdCkge1xuICAgICAgICAgICAgbGV0IG4gPSAhMTtcbiAgICAgICAgICAgIHJldHVybiBfX1BSSVZBVEVfbXV0YXRpb25RdWV1ZXNTdG9yZShlKS5aKChyID0+IF9fUFJJVkFURV9tdXRhdGlvblF1ZXVlQ29udGFpbnNLZXkoZSwgciwgdCkubmV4dCgoZSA9PiAoZSAmJiAobiA9ICEwKSwgXG4gICAgICAgICAgICBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSghZSkpKSkpKS5uZXh0KCgoKSA9PiBuKSk7XG4gICAgICAgIH0oZSwgdCk7XG4gICAgfVxuICAgIHJlbW92ZU9ycGhhbmVkRG9jdW1lbnRzKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuZGIuZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSgpLm5ld0NoYW5nZUJ1ZmZlcigpLCByID0gW107XG4gICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgcmV0dXJuIHRoaXMuWm4oZSwgKChzLCBvKSA9PiB7XG4gICAgICAgICAgICBpZiAobyA8PSB0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuWG4oZSwgcykubmV4dCgodCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdCkgXG4gICAgICAgICAgICAgICAgICAgIC8vIE91ciBzaXplIGFjY291bnRpbmcgcmVxdWlyZXMgdXMgdG8gcmVhZCBhbGwgZG9jdW1lbnRzIGJlZm9yZVxuICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmluZyB0aGVtLlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaSsrLCBuLmdldEVudHJ5KGUsIHMpLm5leHQoKCgpID0+IChuLnJlbW92ZUVudHJ5KHMsIFNuYXBzaG90VmVyc2lvbi5taW4oKSksIFxuICAgICAgICAgICAgICAgICAgICBfX1BSSVZBVEVfZG9jdW1lbnRUYXJnZXRTdG9yZShlKS5kZWxldGUoZnVuY3Rpb24gX19QUklWQVRFX3NlbnRpbmVsS2V5JDEoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsgMCwgX19QUklWQVRFX2VuY29kZVJlc291cmNlUGF0aChlLnBhdGgpIF07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gKiBAcmV0dXJucyBBIHZhbHVlIHN1aXRhYmxlIGZvciB3cml0aW5nIGEgc2VudGluZWwgcm93IGluIHRoZSB0YXJnZXQtZG9jdW1lbnRcbiAqIHN0b3JlLlxuICovIChzKSkpKSk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIHIucHVzaCh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpLm5leHQoKCgpID0+IFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKHIpKSkubmV4dCgoKCkgPT4gbi5hcHBseShlKSkpLm5leHQoKCgpID0+IGkpKTtcbiAgICB9XG4gICAgcmVtb3ZlVGFyZ2V0KGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHQud2l0aFNlcXVlbmNlTnVtYmVyKGUuY3VycmVudFNlcXVlbmNlTnVtYmVyKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGIuZ2V0VGFyZ2V0Q2FjaGUoKS51cGRhdGVUYXJnZXREYXRhKGUsIG4pO1xuICAgIH1cbiAgICB1cGRhdGVMaW1ib0RvY3VtZW50KGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV93cml0ZVNlbnRpbmVsS2V5KGUsIHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsIHByb3ZpZGVkIGZ1bmN0aW9uIGZvciBlYWNoIGRvY3VtZW50IGluIHRoZSBjYWNoZSB0aGF0IGlzICdvcnBoYW5lZCcuIE9ycGhhbmVkXG4gICAgICogbWVhbnMgbm90IGEgcGFydCBvZiBhbnkgdGFyZ2V0LCBzbyB0aGUgb25seSBlbnRyeSBpbiB0aGUgdGFyZ2V0LWRvY3VtZW50IGluZGV4IGZvclxuICAgICAqIHRoYXQgZG9jdW1lbnQgd2lsbCBiZSB0aGUgc2VudGluZWwgcm93ICh0YXJnZXRJZCAwKSwgd2hpY2ggd2lsbCBhbHNvIGhhdmUgdGhlIHNlcXVlbmNlXG4gICAgICogbnVtYmVyIGZvciB0aGUgbGFzdCB0aW1lIHRoZSBkb2N1bWVudCB3YXMgYWNjZXNzZWQuXG4gICAgICovICAgIFpuKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9kb2N1bWVudFRhcmdldFN0b3JlKGUpO1xuICAgICAgICBsZXQgciwgaSA9IF9fUFJJVkFURV9MaXN0ZW5TZXF1ZW5jZS5fZTtcbiAgICAgICAgcmV0dXJuIG4uWSh7XG4gICAgICAgICAgICBpbmRleDogXCJkb2N1bWVudFRhcmdldHNJbmRleFwiXG4gICAgICAgIH0sICgoW2UsIG5dLCB7cGF0aDogcywgc2VxdWVuY2VOdW1iZXI6IG99KSA9PiB7XG4gICAgICAgICAgICAwID09PSBlID8gKFxuICAgICAgICAgICAgLy8gaWYgbmV4dFRvUmVwb3J0IGlzIHZhbGlkLCByZXBvcnQgaXQsIHRoaXMgaXMgYSBuZXcga2V5IHNvIHRoZVxuICAgICAgICAgICAgLy8gbGFzdCBvbmUgbXVzdCBub3QgYmUgYSBtZW1iZXIgb2YgYW55IHRhcmdldHMuXG4gICAgICAgICAgICBpICE9PSBfX1BSSVZBVEVfTGlzdGVuU2VxdWVuY2UuX2UgJiYgdChuZXcgRG9jdW1lbnRLZXkoX19QUklWQVRFX2RlY29kZVJlc291cmNlUGF0aChyKSksIGkpLCBcbiAgICAgICAgICAgIC8vIHNldCBuZXh0VG9SZXBvcnQgdG8gYmUgdGhpcyBzZXF1ZW5jZSBudW1iZXIuIEl0J3MgdGhlIG5leHQgb25lIHdlXG4gICAgICAgICAgICAvLyBtaWdodCByZXBvcnQsIGlmIHdlIGRvbid0IGZpbmQgYW55IHRhcmdldHMgZm9yIHRoaXMgZG9jdW1lbnQuXG4gICAgICAgICAgICAvLyBOb3RlIHRoYXQgdGhlIHNlcXVlbmNlIG51bWJlciBtdXN0IGJlIGRlZmluZWQgd2hlbiB0aGUgdGFyZ2V0SWRcbiAgICAgICAgICAgIC8vIGlzIDAuXG4gICAgICAgICAgICBpID0gbywgciA9IHMpIDogXG4gICAgICAgICAgICAvLyBzZXQgbmV4dFRvUmVwb3J0IHRvIGJlIGludmFsaWQsIHdlIGtub3cgd2UgZG9uJ3QgbmVlZCB0byByZXBvcnRcbiAgICAgICAgICAgIC8vIHRoaXMgb25lIHNpbmNlIHdlIGZvdW5kIGEgdGFyZ2V0IGZvciBpdC5cbiAgICAgICAgICAgIGkgPSBfX1BSSVZBVEVfTGlzdGVuU2VxdWVuY2UuX2U7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICAvLyBTaW5jZSB3ZSByZXBvcnQgc2VxdWVuY2UgbnVtYmVycyBhZnRlciBnZXR0aW5nIHRvIHRoZSBuZXh0IGtleSwgd2VcbiAgICAgICAgICAgIC8vIG5lZWQgdG8gY2hlY2sgaWYgdGhlIGxhc3Qga2V5IHdlIGl0ZXJhdGVkIG92ZXIgd2FzIGFuIG9ycGhhbmVkXG4gICAgICAgICAgICAvLyBkb2N1bWVudCBhbmQgcmVwb3J0IGl0LlxuICAgICAgICAgICAgaSAhPT0gX19QUklWQVRFX0xpc3RlblNlcXVlbmNlLl9lICYmIHQobmV3IERvY3VtZW50S2V5KF9fUFJJVkFURV9kZWNvZGVSZXNvdXJjZVBhdGgocikpLCBpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBnZXRDYWNoZVNpemUoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYi5nZXRSZW1vdGVEb2N1bWVudENhY2hlKCkuZ2V0U2l6ZShlKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV93cml0ZVNlbnRpbmVsS2V5KGUsIHQpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX2RvY3VtZW50VGFyZ2V0U3RvcmUoZSkucHV0KGZ1bmN0aW9uIF9fUFJJVkFURV9zZW50aW5lbFJvdyhlLCB0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0YXJnZXRJZDogMCxcbiAgICAgICAgICAgIHBhdGg6IF9fUFJJVkFURV9lbmNvZGVSZXNvdXJjZVBhdGgoZS5wYXRoKSxcbiAgICAgICAgICAgIHNlcXVlbmNlTnVtYmVyOiB0XG4gICAgICAgIH07XG4gICAgfSh0LCBlLmN1cnJlbnRTZXF1ZW5jZU51bWJlcikpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBpbi1tZW1vcnkgYnVmZmVyIG9mIGVudHJpZXMgdG8gYmUgd3JpdHRlbiB0byBhIFJlbW90ZURvY3VtZW50Q2FjaGUuXG4gKiBJdCBjYW4gYmUgdXNlZCB0byBiYXRjaCB1cCBhIHNldCBvZiBjaGFuZ2VzIHRvIGJlIHdyaXR0ZW4gdG8gdGhlIGNhY2hlLCBidXRcbiAqIGFkZGl0aW9uYWxseSBzdXBwb3J0cyByZWFkaW5nIGVudHJpZXMgYmFjayB3aXRoIHRoZSBgZ2V0RW50cnkoKWAgbWV0aG9kLFxuICogZmFsbGluZyBiYWNrIHRvIHRoZSB1bmRlcmx5aW5nIFJlbW90ZURvY3VtZW50Q2FjaGUgaWYgbm8gZW50cnkgaXNcbiAqIGJ1ZmZlcmVkLlxuICpcbiAqIEVudHJpZXMgYWRkZWQgdG8gdGhlIGNhY2hlICptdXN0KiBiZSByZWFkIGZpcnN0LiBUaGlzIGlzIHRvIGZhY2lsaXRhdGVcbiAqIGNhbGN1bGF0aW5nIHRoZSBzaXplIGRlbHRhIG9mIHRoZSBwZW5kaW5nIGNoYW5nZXMuXG4gKlxuICogUE9SVElORyBOT1RFOiBUaGlzIGNsYXNzIHdhcyBpbXBsZW1lbnRlZCB0aGVuIHJlbW92ZWQgZnJvbSBvdGhlciBwbGF0Zm9ybXMuXG4gKiBJZiBieXRlLWNvdW50aW5nIGVuZHMgdXAgYmVpbmcgbmVlZGVkIG9uIHRoZSBvdGhlciBwbGF0Zm9ybXMsIGNvbnNpZGVyXG4gKiBwb3J0aW5nIHRoaXMgY2xhc3MgYXMgcGFydCBvZiB0aGF0IGltcGxlbWVudGF0aW9uIHdvcmsuXG4gKi8gY2xhc3MgUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAvLyBBIG1hcHBpbmcgb2YgZG9jdW1lbnQga2V5IHRvIHRoZSBuZXcgY2FjaGUgZW50cnkgdGhhdCBzaG91bGQgYmUgd3JpdHRlbi5cbiAgICAgICAgdGhpcy5jaGFuZ2VzID0gbmV3IE9iamVjdE1hcCgoZSA9PiBlLnRvU3RyaW5nKCkpLCAoKGUsIHQpID0+IGUuaXNFcXVhbCh0KSkpLCB0aGlzLmNoYW5nZXNBcHBsaWVkID0gITE7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEJ1ZmZlcnMgYSBgUmVtb3RlRG9jdW1lbnRDYWNoZS5hZGRFbnRyeSgpYCBjYWxsLlxuICAgICAqXG4gICAgICogWW91IGNhbiBvbmx5IG1vZGlmeSBkb2N1bWVudHMgdGhhdCBoYXZlIGFscmVhZHkgYmVlbiByZXRyaWV2ZWQgdmlhXG4gICAgICogYGdldEVudHJ5KCkvZ2V0RW50cmllcygpYCAoZW5mb3JjZWQgdmlhIEluZGV4ZWREYnMgYGFwcGx5KClgKS5cbiAgICAgKi8gICAgYWRkRW50cnkoZSkge1xuICAgICAgICB0aGlzLmFzc2VydE5vdEFwcGxpZWQoKSwgdGhpcy5jaGFuZ2VzLnNldChlLmtleSwgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEJ1ZmZlcnMgYSBgUmVtb3RlRG9jdW1lbnRDYWNoZS5yZW1vdmVFbnRyeSgpYCBjYWxsLlxuICAgICAqXG4gICAgICogWW91IGNhbiBvbmx5IHJlbW92ZSBkb2N1bWVudHMgdGhhdCBoYXZlIGFscmVhZHkgYmVlbiByZXRyaWV2ZWQgdmlhXG4gICAgICogYGdldEVudHJ5KCkvZ2V0RW50cmllcygpYCAoZW5mb3JjZWQgdmlhIEluZGV4ZWREYnMgYGFwcGx5KClgKS5cbiAgICAgKi8gICAgcmVtb3ZlRW50cnkoZSwgdCkge1xuICAgICAgICB0aGlzLmFzc2VydE5vdEFwcGxpZWQoKSwgdGhpcy5jaGFuZ2VzLnNldChlLCBNdXRhYmxlRG9jdW1lbnQubmV3SW52YWxpZERvY3VtZW50KGUpLnNldFJlYWRUaW1lKHQpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9va3MgdXAgYW4gZW50cnkgaW4gdGhlIGNhY2hlLiBUaGUgYnVmZmVyZWQgY2hhbmdlcyB3aWxsIGZpcnN0IGJlIGNoZWNrZWQsXG4gICAgICogYW5kIGlmIG5vIGJ1ZmZlcmVkIGNoYW5nZSBhcHBsaWVzLCB0aGlzIHdpbGwgZm9yd2FyZCB0b1xuICAgICAqIGBSZW1vdGVEb2N1bWVudENhY2hlLmdldEVudHJ5KClgLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRyYW5zYWN0aW9uIC0gVGhlIHRyYW5zYWN0aW9uIGluIHdoaWNoIHRvIHBlcmZvcm0gYW55IHBlcnNpc3RlbmNlXG4gICAgICogICAgIG9wZXJhdGlvbnMuXG4gICAgICogQHBhcmFtIGRvY3VtZW50S2V5IC0gVGhlIGtleSBvZiB0aGUgZW50cnkgdG8gbG9vayB1cC5cbiAgICAgKiBAcmV0dXJucyBUaGUgY2FjaGVkIGRvY3VtZW50IG9yIGFuIGludmFsaWQgZG9jdW1lbnQgaWYgd2UgaGF2ZSBub3RoaW5nXG4gICAgICogY2FjaGVkLlxuICAgICAqLyAgICBnZXRFbnRyeShlLCB0KSB7XG4gICAgICAgIHRoaXMuYXNzZXJ0Tm90QXBwbGllZCgpO1xuICAgICAgICBjb25zdCBuID0gdGhpcy5jaGFuZ2VzLmdldCh0KTtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gbiA/IFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKG4pIDogdGhpcy5nZXRGcm9tQ2FjaGUoZSwgdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExvb2tzIHVwIHNldmVyYWwgZW50cmllcyBpbiB0aGUgY2FjaGUsIGZvcndhcmRpbmcgdG9cbiAgICAgKiBgUmVtb3RlRG9jdW1lbnRDYWNoZS5nZXRFbnRyeSgpYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0cmFuc2FjdGlvbiAtIFRoZSB0cmFuc2FjdGlvbiBpbiB3aGljaCB0byBwZXJmb3JtIGFueSBwZXJzaXN0ZW5jZVxuICAgICAqICAgICBvcGVyYXRpb25zLlxuICAgICAqIEBwYXJhbSBkb2N1bWVudEtleXMgLSBUaGUga2V5cyBvZiB0aGUgZW50cmllcyB0byBsb29rIHVwLlxuICAgICAqIEByZXR1cm5zIEEgbWFwIG9mIGNhY2hlZCBkb2N1bWVudHMsIGluZGV4ZWQgYnkga2V5LiBJZiBhbiBlbnRyeSBjYW5ub3QgYmVcbiAgICAgKiAgICAgZm91bmQsIHRoZSBjb3JyZXNwb25kaW5nIGtleSB3aWxsIGJlIG1hcHBlZCB0byBhbiBpbnZhbGlkIGRvY3VtZW50LlxuICAgICAqLyAgICBnZXRFbnRyaWVzKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QWxsRnJvbUNhY2hlKGUsIHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHBsaWVzIGJ1ZmZlcmVkIGNoYW5nZXMgdG8gdGhlIHVuZGVybHlpbmcgUmVtb3RlRG9jdW1lbnRDYWNoZSwgdXNpbmdcbiAgICAgKiB0aGUgcHJvdmlkZWQgdHJhbnNhY3Rpb24uXG4gICAgICovICAgIGFwcGx5KGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXNzZXJ0Tm90QXBwbGllZCgpLCB0aGlzLmNoYW5nZXNBcHBsaWVkID0gITAsIHRoaXMuYXBwbHlDaGFuZ2VzKGUpO1xuICAgIH1cbiAgICAvKiogSGVscGVyIHRvIGFzc2VydCB0aGlzLmNoYW5nZXMgaXMgbm90IG51bGwgICovICAgIGFzc2VydE5vdEFwcGxpZWQoKSB7fVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBUaGUgUmVtb3RlRG9jdW1lbnRDYWNoZSBmb3IgSW5kZXhlZERiLiBUbyBjb25zdHJ1Y3QsIGludm9rZVxuICogYG5ld0luZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGUoKWAuXG4gKi8gY2xhc3MgX19QUklWQVRFX0luZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGVJbXBsIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMuc2VyaWFsaXplciA9IGU7XG4gICAgfVxuICAgIHNldEluZGV4TWFuYWdlcihlKSB7XG4gICAgICAgIHRoaXMuaW5kZXhNYW5hZ2VyID0gZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyB0aGUgc3VwcGxpZWQgZW50cmllcyB0byB0aGUgY2FjaGUuXG4gICAgICpcbiAgICAgKiBBbGwgY2FsbHMgb2YgYGFkZEVudHJ5YCBhcmUgcmVxdWlyZWQgdG8gZ28gdGhyb3VnaCB0aGUgUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXJcbiAgICAgKiByZXR1cm5lZCBieSBgbmV3Q2hhbmdlQnVmZmVyKClgIHRvIGVuc3VyZSBwcm9wZXIgYWNjb3VudGluZyBvZiBtZXRhZGF0YS5cbiAgICAgKi8gICAgYWRkRW50cnkoZSwgdCwgbikge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3JlbW90ZURvY3VtZW50c1N0b3JlKGUpLnB1dChuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhIGRvY3VtZW50IGZyb20gdGhlIGNhY2hlLlxuICAgICAqXG4gICAgICogQWxsIGNhbGxzIG9mIGByZW1vdmVFbnRyeWAgIGFyZSByZXF1aXJlZCB0byBnbyB0aHJvdWdoIHRoZSBSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlclxuICAgICAqIHJldHVybmVkIGJ5IGBuZXdDaGFuZ2VCdWZmZXIoKWAgdG8gZW5zdXJlIHByb3BlciBhY2NvdW50aW5nIG9mIG1ldGFkYXRhLlxuICAgICAqLyAgICByZW1vdmVFbnRyeShlLCB0LCBuKSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfcmVtb3RlRG9jdW1lbnRzU3RvcmUoZSkuZGVsZXRlKFxuICAgICAgICAvKipcbiAqIFJldHVybnMgYSBrZXkgdGhhdCBjYW4gYmUgdXNlZCBmb3IgZG9jdW1lbnQgbG9va3VwcyB2aWEgdGhlIHByaW1hcnkga2V5IG9mXG4gKiB0aGUgRGJSZW1vdGVEb2N1bWVudCBvYmplY3Qgc3RvcmUuXG4gKi9cbiAgICAgICAgZnVuY3Rpb24gX19QUklWQVRFX2RiUmVhZFRpbWVLZXkoZSwgdCkge1xuICAgICAgICAgICAgY29uc3QgbiA9IGUucGF0aC50b0FycmF5KCk7XG4gICAgICAgICAgICByZXR1cm4gWyBcbiAgICAgICAgICAgIC8qIHByZWZpeCBwYXRoICovIG4uc2xpY2UoMCwgbi5sZW5ndGggLSAyKSwgXG4gICAgICAgICAgICAvKiBjb2xsZWN0aW9uIGlkICovIG5bbi5sZW5ndGggLSAyXSwgX19QUklWQVRFX3RvRGJUaW1lc3RhbXBLZXkodCksIFxuICAgICAgICAgICAgLyogZG9jdW1lbnQgaWQgKi8gbltuLmxlbmd0aCAtIDFdIF07XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBSZXR1cm5zIGEga2V5IHRoYXQgY2FuIGJlIHVzZWQgZm9yIGRvY3VtZW50IGxvb2t1cHMgb24gdGhlXG4gKiBgRGJSZW1vdGVEb2N1bWVudERvY3VtZW50Q29sbGVjdGlvbkdyb3VwSW5kZXhgIGluZGV4LlxuICovICh0LCBuKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIGN1cnJlbnQgY2FjaGUgc2l6ZS5cbiAgICAgKlxuICAgICAqIENhbGxlcnMgdG8gYGFkZEVudHJ5KClgIGFuZCBgcmVtb3ZlRW50cnkoKWAgKm11c3QqIGNhbGwgdGhpcyBhZnRlcndhcmRzIHRvIHVwZGF0ZSB0aGVcbiAgICAgKiBjYWNoZSdzIG1ldGFkYXRhLlxuICAgICAqLyAgICB1cGRhdGVNZXRhZGF0YShlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldE1ldGFkYXRhKGUpLm5leHQoKG4gPT4gKG4uYnl0ZVNpemUgKz0gdCwgdGhpcy5lcihlLCBuKSkpKTtcbiAgICB9XG4gICAgZ2V0RW50cnkoZSwgdCkge1xuICAgICAgICBsZXQgbiA9IE11dGFibGVEb2N1bWVudC5uZXdJbnZhbGlkRG9jdW1lbnQodCk7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfcmVtb3RlRG9jdW1lbnRzU3RvcmUoZSkuWSh7XG4gICAgICAgICAgICBpbmRleDogXCJkb2N1bWVudEtleUluZGV4XCIsXG4gICAgICAgICAgICByYW5nZTogSURCS2V5UmFuZ2Uub25seShfX1BSSVZBVEVfZGJLZXkodCkpXG4gICAgICAgIH0sICgoZSwgcikgPT4ge1xuICAgICAgICAgICAgbiA9IHRoaXMudHIodCwgcik7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBuKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExvb2tzIHVwIGFuIGVudHJ5IGluIHRoZSBjYWNoZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkb2N1bWVudEtleSAtIFRoZSBrZXkgb2YgdGhlIGVudHJ5IHRvIGxvb2sgdXAuXG4gICAgICogQHJldHVybnMgVGhlIGNhY2hlZCBkb2N1bWVudCBlbnRyeSBhbmQgaXRzIHNpemUuXG4gICAgICovICAgIG5yKGUsIHQpIHtcbiAgICAgICAgbGV0IG4gPSB7XG4gICAgICAgICAgICBzaXplOiAwLFxuICAgICAgICAgICAgZG9jdW1lbnQ6IE11dGFibGVEb2N1bWVudC5uZXdJbnZhbGlkRG9jdW1lbnQodClcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9yZW1vdGVEb2N1bWVudHNTdG9yZShlKS5ZKHtcbiAgICAgICAgICAgIGluZGV4OiBcImRvY3VtZW50S2V5SW5kZXhcIixcbiAgICAgICAgICAgIHJhbmdlOiBJREJLZXlSYW5nZS5vbmx5KF9fUFJJVkFURV9kYktleSh0KSlcbiAgICAgICAgfSwgKChlLCByKSA9PiB7XG4gICAgICAgICAgICBuID0ge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50OiB0aGlzLnRyKHQsIHIpLFxuICAgICAgICAgICAgICAgIHNpemU6IF9fUFJJVkFURV9kYkRvY3VtZW50U2l6ZShyKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IG4pKTtcbiAgICB9XG4gICAgZ2V0RW50cmllcyhlLCB0KSB7XG4gICAgICAgIGxldCBuID0gX19QUklWQVRFX211dGFibGVEb2N1bWVudE1hcCgpO1xuICAgICAgICByZXR1cm4gdGhpcy5ycihlLCB0LCAoKGUsIHQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLnRyKGUsIHQpO1xuICAgICAgICAgICAgbiA9IG4uaW5zZXJ0KGUsIHIpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gbikpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb29rcyB1cCBzZXZlcmFsIGVudHJpZXMgaW4gdGhlIGNhY2hlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGRvY3VtZW50S2V5cyAtIFRoZSBzZXQgb2Yga2V5cyBlbnRyaWVzIHRvIGxvb2sgdXAuXG4gICAgICogQHJldHVybnMgQSBtYXAgb2YgZG9jdW1lbnRzIGluZGV4ZWQgYnkga2V5IGFuZCBhIG1hcCBvZiBzaXplcyBpbmRleGVkIGJ5XG4gICAgICogICAgIGtleSAoemVybyBpZiB0aGUgZG9jdW1lbnQgZG9lcyBub3QgZXhpc3QpLlxuICAgICAqLyAgICBpcihlLCB0KSB7XG4gICAgICAgIGxldCBuID0gX19QUklWQVRFX211dGFibGVEb2N1bWVudE1hcCgpLCByID0gbmV3IFNvcnRlZE1hcChEb2N1bWVudEtleS5jb21wYXJhdG9yKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucnIoZSwgdCwgKChlLCB0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gdGhpcy50cihlLCB0KTtcbiAgICAgICAgICAgIG4gPSBuLmluc2VydChlLCBpKSwgciA9IHIuaW5zZXJ0KGUsIF9fUFJJVkFURV9kYkRvY3VtZW50U2l6ZSh0KSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiAoe1xuICAgICAgICAgICAgZG9jdW1lbnRzOiBuLFxuICAgICAgICAgICAgc3I6IHJcbiAgICAgICAgfSkpKTtcbiAgICB9XG4gICAgcnIoZSwgdCwgbikge1xuICAgICAgICBpZiAodC5pc0VtcHR5KCkpIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICBsZXQgciA9IG5ldyBTb3J0ZWRTZXQoX19QUklWQVRFX2RiS2V5Q29tcGFyYXRvcik7XG4gICAgICAgIHQuZm9yRWFjaCgoZSA9PiByID0gci5hZGQoZSkpKTtcbiAgICAgICAgY29uc3QgaSA9IElEQktleVJhbmdlLmJvdW5kKF9fUFJJVkFURV9kYktleShyLmZpcnN0KCkpLCBfX1BSSVZBVEVfZGJLZXkoci5sYXN0KCkpKSwgcyA9IHIuZ2V0SXRlcmF0b3IoKTtcbiAgICAgICAgbGV0IG8gPSBzLmdldE5leHQoKTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9yZW1vdGVEb2N1bWVudHNTdG9yZShlKS5ZKHtcbiAgICAgICAgICAgIGluZGV4OiBcImRvY3VtZW50S2V5SW5kZXhcIixcbiAgICAgICAgICAgIHJhbmdlOiBpXG4gICAgICAgIH0sICgoZSwgdCwgcikgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IERvY3VtZW50S2V5LmZyb21TZWdtZW50cyhbIC4uLnQucHJlZml4UGF0aCwgdC5jb2xsZWN0aW9uR3JvdXAsIHQuZG9jdW1lbnRJZCBdKTtcbiAgICAgICAgICAgIC8vIEdvIHRocm91Z2gga2V5cyBub3QgZm91bmQgaW4gY2FjaGUuXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKDtvICYmIF9fUFJJVkFURV9kYktleUNvbXBhcmF0b3IobywgaSkgPCAwOyApIG4obywgbnVsbCksIG8gPSBzLmdldE5leHQoKTtcbiAgICAgICAgICAgIG8gJiYgby5pc0VxdWFsKGkpICYmIChcbiAgICAgICAgICAgIC8vIEtleSBmb3VuZCBpbiBjYWNoZS5cbiAgICAgICAgICAgIG4obywgdCksIG8gPSBzLmhhc05leHQoKSA/IHMuZ2V0TmV4dCgpIDogbnVsbCksIFxuICAgICAgICAgICAgLy8gU2tpcCB0byB0aGUgbmV4dCBrZXkgKGlmIHRoZXJlIGlzIG9uZSkuXG4gICAgICAgICAgICBvID8gci5VKF9fUFJJVkFURV9kYktleShvKSkgOiByLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgIC8vIFRoZSByZXN0IG9mIHRoZSBrZXlzIGFyZSBub3QgaW4gdGhlIGNhY2hlLiBPbmUgY2FzZSB3aGVyZSBgaXRlcmF0ZWBcbiAgICAgICAgICAgIC8vIGFib3ZlIHdvbid0IGdvIHRocm91Z2ggdGhlbSBpcyB3aGVuIHRoZSBjYWNoZSBpcyBlbXB0eS5cbiAgICAgICAgICAgIGZvciAoO287ICkgbihvLCBudWxsKSwgbyA9IHMuaGFzTmV4dCgpID8gcy5nZXROZXh0KCkgOiBudWxsO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGdldERvY3VtZW50c01hdGNoaW5nUXVlcnkoZSwgdCwgbiwgciwgaSkge1xuICAgICAgICBjb25zdCBzID0gdC5wYXRoLCBvID0gWyBzLnBvcExhc3QoKS50b0FycmF5KCksIHMubGFzdFNlZ21lbnQoKSwgX19QUklWQVRFX3RvRGJUaW1lc3RhbXBLZXkobi5yZWFkVGltZSksIG4uZG9jdW1lbnRLZXkucGF0aC5pc0VtcHR5KCkgPyBcIlwiIDogbi5kb2N1bWVudEtleS5wYXRoLmxhc3RTZWdtZW50KCkgXSwgXyA9IFsgcy5wb3BMYXN0KCkudG9BcnJheSgpLCBzLmxhc3RTZWdtZW50KCksIFsgTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIsIE51bWJlci5NQVhfU0FGRV9JTlRFR0VSIF0sIFwiXCIgXTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9yZW1vdGVEb2N1bWVudHNTdG9yZShlKS5XKElEQktleVJhbmdlLmJvdW5kKG8sIF8sICEwKSkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBudWxsID09IGkgfHwgaS5pbmNyZW1lbnREb2N1bWVudFJlYWRDb3VudChlLmxlbmd0aCk7XG4gICAgICAgICAgICBsZXQgbiA9IF9fUFJJVkFURV9tdXRhYmxlRG9jdW1lbnRNYXAoKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgaSBvZiBlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMudHIoRG9jdW1lbnRLZXkuZnJvbVNlZ21lbnRzKGkucHJlZml4UGF0aC5jb25jYXQoaS5jb2xsZWN0aW9uR3JvdXAsIGkuZG9jdW1lbnRJZCkpLCBpKTtcbiAgICAgICAgICAgICAgICBlLmlzRm91bmREb2N1bWVudCgpICYmIChfX1BSSVZBVEVfcXVlcnlNYXRjaGVzKHQsIGUpIHx8IHIuaGFzKGUua2V5KSkgJiYgKFxuICAgICAgICAgICAgICAgIC8vIEVpdGhlciB0aGUgZG9jdW1lbnQgbWF0Y2hlcyB0aGUgZ2l2ZW4gcXVlcnksIG9yIGl0IGlzIG11dGF0ZWQuXG4gICAgICAgICAgICAgICAgbiA9IG4uaW5zZXJ0KGUua2V5LCBlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbjtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBnZXRBbGxGcm9tQ29sbGVjdGlvbkdyb3VwKGUsIHQsIG4sIHIpIHtcbiAgICAgICAgbGV0IGkgPSBfX1BSSVZBVEVfbXV0YWJsZURvY3VtZW50TWFwKCk7XG4gICAgICAgIGNvbnN0IHMgPSBfX1BSSVZBVEVfZGJDb2xsZWN0aW9uR3JvdXBLZXkodCwgbiksIG8gPSBfX1BSSVZBVEVfZGJDb2xsZWN0aW9uR3JvdXBLZXkodCwgSW5kZXhPZmZzZXQubWF4KCkpO1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3JlbW90ZURvY3VtZW50c1N0b3JlKGUpLlkoe1xuICAgICAgICAgICAgaW5kZXg6IFwiY29sbGVjdGlvbkdyb3VwSW5kZXhcIixcbiAgICAgICAgICAgIHJhbmdlOiBJREJLZXlSYW5nZS5ib3VuZChzLCBvLCAhMClcbiAgICAgICAgfSwgKChlLCB0LCBuKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzID0gdGhpcy50cihEb2N1bWVudEtleS5mcm9tU2VnbWVudHModC5wcmVmaXhQYXRoLmNvbmNhdCh0LmNvbGxlY3Rpb25Hcm91cCwgdC5kb2N1bWVudElkKSksIHQpO1xuICAgICAgICAgICAgaSA9IGkuaW5zZXJ0KHMua2V5LCBzKSwgaS5zaXplID09PSByICYmIG4uZG9uZSgpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gaSkpO1xuICAgIH1cbiAgICBuZXdDaGFuZ2VCdWZmZXIoZSkge1xuICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9JbmRleGVkRGJSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlcih0aGlzLCAhIWUgJiYgZS50cmFja1JlbW92YWxzKTtcbiAgICB9XG4gICAgZ2V0U2l6ZShlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldE1ldGFkYXRhKGUpLm5leHQoKGUgPT4gZS5ieXRlU2l6ZSkpO1xuICAgIH1cbiAgICBnZXRNZXRhZGF0YShlKSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfZG9jdW1lbnRHbG9iYWxTdG9yZShlKS5nZXQoXCJyZW1vdGVEb2N1bWVudEdsb2JhbEtleVwiKS5uZXh0KChlID0+IChfX1BSSVZBVEVfaGFyZEFzc2VydCghIWUpLCBcbiAgICAgICAgZSkpKTtcbiAgICB9XG4gICAgZXIoZSwgdCkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX2RvY3VtZW50R2xvYmFsU3RvcmUoZSkucHV0KFwicmVtb3RlRG9jdW1lbnRHbG9iYWxLZXlcIiwgdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlY29kZXMgYGRiUmVtb3RlRG9jYCBhbmQgcmV0dXJucyB0aGUgZG9jdW1lbnQgKG9yIGFuIGludmFsaWQgZG9jdW1lbnQgaWZcbiAgICAgKiB0aGUgZG9jdW1lbnQgY29ycmVzcG9uZHMgdG8gdGhlIGZvcm1hdCB1c2VkIGZvciBzZW50aW5lbCBkZWxldGVzKS5cbiAgICAgKi8gICAgdHIoZSwgdCkge1xuICAgICAgICBpZiAodCkge1xuICAgICAgICAgICAgY29uc3QgZSA9IF9fUFJJVkFURV9mcm9tRGJSZW1vdGVEb2N1bWVudCh0aGlzLnNlcmlhbGl6ZXIsIHQpO1xuICAgICAgICAgICAgLy8gV2hldGhlciB0aGUgZG9jdW1lbnQgaXMgYSBzZW50aW5lbCByZW1vdmFsIGFuZCBzaG91bGQgb25seSBiZSB1c2VkIGluIHRoZVxuICAgICAgICAgICAgLy8gYGdldE5ld0RvY3VtZW50Q2hhbmdlcygpYFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoZS5pc05vRG9jdW1lbnQoKSAmJiBlLnZlcnNpb24uaXNFcXVhbChTbmFwc2hvdFZlcnNpb24ubWluKCkpKSkgcmV0dXJuIGU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE11dGFibGVEb2N1bWVudC5uZXdJbnZhbGlkRG9jdW1lbnQoZSk7XG4gICAgfVxufVxuXG4vKiogQ3JlYXRlcyBhIG5ldyBJbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlLiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfbmV3SW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZShlKSB7XG4gICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfSW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZUltcGwoZSk7XG59XG5cbi8qKlxuICogSGFuZGxlcyB0aGUgZGV0YWlscyBvZiBhZGRpbmcgYW5kIHVwZGF0aW5nIGRvY3VtZW50cyBpbiB0aGUgSW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZS5cbiAqXG4gKiBVbmxpa2UgdGhlIE1lbW9yeVJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyLCB0aGUgSW5kZXhlZERiIGltcGxlbWVudGF0aW9uIGNvbXB1dGVzIHRoZSBzaXplXG4gKiBkZWx0YSBmb3IgYWxsIHN1Ym1pdHRlZCBjaGFuZ2VzLiBUaGlzIGF2b2lkcyBoYXZpbmcgdG8gcmUtcmVhZCBhbGwgZG9jdW1lbnRzIGZyb20gSW5kZXhlZERiXG4gKiB3aGVuIHdlIGFwcGx5IHRoZSBjaGFuZ2VzLlxuICovIGNsYXNzIF9fUFJJVkFURV9JbmRleGVkRGJSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlciBleHRlbmRzIFJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRDYWNoZSAtIFRoZSBJbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlIHRvIGFwcGx5IHRoZSBjaGFuZ2VzIHRvLlxuICAgICAqIEBwYXJhbSB0cmFja1JlbW92YWxzIC0gV2hldGhlciB0byBjcmVhdGUgc2VudGluZWwgZGVsZXRlcyB0aGF0IGNhbiBiZSB0cmFja2VkIGJ5XG4gICAgICogYGdldE5ld0RvY3VtZW50Q2hhbmdlcygpYC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuX3IgPSBlLCB0aGlzLnRyYWNrUmVtb3ZhbHMgPSB0LCBcbiAgICAgICAgLy8gQSBtYXAgb2YgZG9jdW1lbnQgc2l6ZXMgYW5kIHJlYWQgdGltZXMgcHJpb3IgdG8gYXBwbHlpbmcgdGhlIGNoYW5nZXMgaW5cbiAgICAgICAgLy8gdGhpcyBidWZmZXIuXG4gICAgICAgIHRoaXMuYXIgPSBuZXcgT2JqZWN0TWFwKChlID0+IGUudG9TdHJpbmcoKSksICgoZSwgdCkgPT4gZS5pc0VxdWFsKHQpKSk7XG4gICAgfVxuICAgIGFwcGx5Q2hhbmdlcyhlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgbGV0IG4gPSAwLCByID0gbmV3IFNvcnRlZFNldCgoKGUsIHQpID0+IF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKGUuY2Fub25pY2FsU3RyaW5nKCksIHQuY2Fub25pY2FsU3RyaW5nKCkpKSk7XG4gICAgICAgIHJldHVybiB0aGlzLmNoYW5nZXMuZm9yRWFjaCgoKGksIHMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG8gPSB0aGlzLmFyLmdldChpKTtcbiAgICAgICAgICAgIGlmICh0LnB1c2godGhpcy5fci5yZW1vdmVFbnRyeShlLCBpLCBvLnJlYWRUaW1lKSksIHMuaXNWYWxpZERvY3VtZW50KCkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBfID0gX19QUklWQVRFX3RvRGJSZW1vdGVEb2N1bWVudCh0aGlzLl9yLnNlcmlhbGl6ZXIsIHMpO1xuICAgICAgICAgICAgICAgIHIgPSByLmFkZChpLnBhdGgucG9wTGFzdCgpKTtcbiAgICAgICAgICAgICAgICBjb25zdCBhID0gX19QUklWQVRFX2RiRG9jdW1lbnRTaXplKF8pO1xuICAgICAgICAgICAgICAgIG4gKz0gYSAtIG8uc2l6ZSwgdC5wdXNoKHRoaXMuX3IuYWRkRW50cnkoZSwgaSwgXykpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChuIC09IG8uc2l6ZSwgdGhpcy50cmFja1JlbW92YWxzKSB7XG4gICAgICAgICAgICAgICAgLy8gSW4gb3JkZXIgdG8gdHJhY2sgcmVtb3ZhbHMsIHdlIHN0b3JlIGEgXCJzZW50aW5lbCBkZWxldGVcIiBpbiB0aGVcbiAgICAgICAgICAgICAgICAvLyBSZW1vdGVEb2N1bWVudENhY2hlLiBUaGlzIGVudHJ5IGlzIHJlcHJlc2VudGVkIGJ5IGEgTm9Eb2N1bWVudFxuICAgICAgICAgICAgICAgIC8vIHdpdGggYSB2ZXJzaW9uIG9mIDAgYW5kIGlnbm9yZWQgYnkgYG1heWJlRGVjb2RlRG9jdW1lbnQoKWAgYnV0XG4gICAgICAgICAgICAgICAgLy8gcHJlc2VydmVkIGluIGBnZXROZXdEb2N1bWVudENoYW5nZXMoKWAuXG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV90b0RiUmVtb3RlRG9jdW1lbnQodGhpcy5fci5zZXJpYWxpemVyLCBzLmNvbnZlcnRUb05vRG9jdW1lbnQoU25hcHNob3RWZXJzaW9uLm1pbigpKSk7XG4gICAgICAgICAgICAgICAgdC5wdXNoKHRoaXMuX3IuYWRkRW50cnkoZSwgaSwgbikpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSksIHIuZm9yRWFjaCgobiA9PiB7XG4gICAgICAgICAgICB0LnB1c2godGhpcy5fci5pbmRleE1hbmFnZXIuYWRkVG9Db2xsZWN0aW9uUGFyZW50SW5kZXgoZSwgbikpO1xuICAgICAgICB9KSksIHQucHVzaCh0aGlzLl9yLnVwZGF0ZU1ldGFkYXRhKGUsIG4pKSwgUGVyc2lzdGVuY2VQcm9taXNlLndhaXRGb3IodCk7XG4gICAgfVxuICAgIGdldEZyb21DYWNoZShlLCB0KSB7XG4gICAgICAgIC8vIFJlY29yZCB0aGUgc2l6ZSBvZiBldmVyeXRoaW5nIHdlIGxvYWQgZnJvbSB0aGUgY2FjaGUgc28gd2UgY2FuIGNvbXB1dGUgYSBkZWx0YSBsYXRlci5cbiAgICAgICAgcmV0dXJuIHRoaXMuX3IubnIoZSwgdCkubmV4dCgoZSA9PiAodGhpcy5hci5zZXQodCwge1xuICAgICAgICAgICAgc2l6ZTogZS5zaXplLFxuICAgICAgICAgICAgcmVhZFRpbWU6IGUuZG9jdW1lbnQucmVhZFRpbWVcbiAgICAgICAgfSksIGUuZG9jdW1lbnQpKSk7XG4gICAgfVxuICAgIGdldEFsbEZyb21DYWNoZShlLCB0KSB7XG4gICAgICAgIC8vIFJlY29yZCB0aGUgc2l6ZSBvZiBldmVyeXRoaW5nIHdlIGxvYWQgZnJvbSB0aGUgY2FjaGUgc28gd2UgY2FuIGNvbXB1dGVcbiAgICAgICAgLy8gYSBkZWx0YSBsYXRlci5cbiAgICAgICAgcmV0dXJuIHRoaXMuX3IuaXIoZSwgdCkubmV4dCgoKHtkb2N1bWVudHM6IGUsIHNyOiB0fSkgPT4gKFxuICAgICAgICAvLyBOb3RlOiBgZ2V0QWxsRnJvbUNhY2hlYCByZXR1cm5zIHR3byBtYXBzIGluc3RlYWQgb2YgYSBzaW5nbGUgbWFwIGZyb21cbiAgICAgICAgLy8ga2V5cyB0byBgRG9jdW1lbnRTaXplRW50cnlgcy4gVGhpcyBpcyB0byBhbGxvdyByZXR1cm5pbmcgdGhlXG4gICAgICAgIC8vIGBNdXRhYmxlRG9jdW1lbnRNYXBgIGRpcmVjdGx5LCB3aXRob3V0IGEgY29udmVyc2lvbi5cbiAgICAgICAgdC5mb3JFYWNoKCgodCwgbikgPT4ge1xuICAgICAgICAgICAgdGhpcy5hci5zZXQodCwge1xuICAgICAgICAgICAgICAgIHNpemU6IG4sXG4gICAgICAgICAgICAgICAgcmVhZFRpbWU6IGUuZ2V0KHQpLnJlYWRUaW1lXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSkpLCBlKSkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2RvY3VtZW50R2xvYmFsU3RvcmUoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfZ2V0U3RvcmUoZSwgXCJyZW1vdGVEb2N1bWVudEdsb2JhbFwiKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIHJlbW90ZURvY3VtZW50cyBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3JlbW90ZURvY3VtZW50c1N0b3JlKGUpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX2dldFN0b3JlKGUsIFwicmVtb3RlRG9jdW1lbnRzVjE0XCIpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBrZXkgdGhhdCBjYW4gYmUgdXNlZCBmb3IgZG9jdW1lbnQgbG9va3VwcyBvbiB0aGVcbiAqIGBEYlJlbW90ZURvY3VtZW50RG9jdW1lbnRLZXlJbmRleGAgaW5kZXguXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2RiS2V5KGUpIHtcbiAgICBjb25zdCB0ID0gZS5wYXRoLnRvQXJyYXkoKTtcbiAgICByZXR1cm4gWyBcbiAgICAvKiBwcmVmaXggcGF0aCAqLyB0LnNsaWNlKDAsIHQubGVuZ3RoIC0gMiksIFxuICAgIC8qIGNvbGxlY3Rpb24gaWQgKi8gdFt0Lmxlbmd0aCAtIDJdLCBcbiAgICAvKiBkb2N1bWVudCBpZCAqLyB0W3QubGVuZ3RoIC0gMV0gXTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2RiQ29sbGVjdGlvbkdyb3VwS2V5KGUsIHQpIHtcbiAgICBjb25zdCBuID0gdC5kb2N1bWVudEtleS5wYXRoLnRvQXJyYXkoKTtcbiAgICByZXR1cm4gWyBcbiAgICAvKiBjb2xsZWN0aW9uIGlkICovIGUsIF9fUFJJVkFURV90b0RiVGltZXN0YW1wS2V5KHQucmVhZFRpbWUpLCBcbiAgICAvKiBwcmVmaXggcGF0aCAqLyBuLnNsaWNlKDAsIG4ubGVuZ3RoIC0gMiksIFxuICAgIC8qIGRvY3VtZW50IGlkICovIG4ubGVuZ3RoID4gMCA/IG5bbi5sZW5ndGggLSAxXSA6IFwiXCIgXTtcbn1cblxuLyoqXG4gKiBDb21wYXJhdG9yIHRoYXQgY29tcGFyZXMgZG9jdW1lbnQga2V5cyBhY2NvcmRpbmcgdG8gdGhlIHByaW1hcnkga2V5IHNvcnRpbmdcbiAqIHVzZWQgYnkgdGhlIGBEYlJlbW90ZURvY3VtZW50RG9jdW1lbnRgIHN0b3JlIChieSBwcmVmaXggcGF0aCwgY29sbGVjdGlvbiBpZFxuICogYW5kIHRoZW4gZG9jdW1lbnQgSUQpLlxuICpcbiAqIFZpc2libGUgZm9yIHRlc3RpbmcuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2RiS2V5Q29tcGFyYXRvcihlLCB0KSB7XG4gICAgY29uc3QgbiA9IGUucGF0aC50b0FycmF5KCksIHIgPSB0LnBhdGgudG9BcnJheSgpO1xuICAgIC8vIFRoZSBvcmRlcmluZyBpcyBiYXNlZCBvbiBodHRwczovL2Nocm9taXVtLmdvb2dsZXNvdXJjZS5jb20vY2hyb21pdW0vYmxpbmsvKy9mZTVjMjFmZWY5NGRhZTcxYzFjMzM0NDc3NWI4ZDhhN2Y3ZTZkOWVjL1NvdXJjZS9tb2R1bGVzL2luZGV4ZWRkYi9JREJLZXkuY3BwIzc0XG4gICAgbGV0IGkgPSAwO1xuICAgIGZvciAobGV0IGUgPSAwOyBlIDwgbi5sZW5ndGggLSAyICYmIGUgPCByLmxlbmd0aCAtIDI7ICsrZSkgaWYgKGkgPSBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcihuW2VdLCByW2VdKSwgXG4gICAgaSkgcmV0dXJuIGk7XG4gICAgcmV0dXJuIGkgPSBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcihuLmxlbmd0aCwgci5sZW5ndGgpLCBpIHx8IChpID0gX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IobltuLmxlbmd0aCAtIDJdLCByW3IubGVuZ3RoIC0gMl0pLCBcbiAgICBpIHx8IF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKG5bbi5sZW5ndGggLSAxXSwgcltyLmxlbmd0aCAtIDFdKSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFNjaGVtYSBWZXJzaW9uIGZvciB0aGUgV2ViIGNsaWVudDpcbiAqIDEuICBJbml0aWFsIHZlcnNpb24gaW5jbHVkaW5nIE11dGF0aW9uIFF1ZXVlLCBRdWVyeSBDYWNoZSwgYW5kIFJlbW90ZVxuICogICAgIERvY3VtZW50IENhY2hlXG4gKiAyLiAgVXNlZCB0byBlbnN1cmUgYSB0YXJnZXRHbG9iYWwgb2JqZWN0IGV4aXN0cyBhbmQgYWRkIHRhcmdldENvdW50IHRvIGl0LiBOb1xuICogICAgIGxvbmdlciByZXF1aXJlZCBiZWNhdXNlIG1pZ3JhdGlvbiAzIHVuY29uZGl0aW9uYWxseSBjbGVhcnMgaXQuXG4gKiAzLiAgRHJvcHBlZCBhbmQgcmUtY3JlYXRlZCBRdWVyeSBDYWNoZSB0byBkZWFsIHdpdGggY2FjaGUgY29ycnVwdGlvbiByZWxhdGVkXG4gKiAgICAgdG8gbGltYm8gcmVzb2x1dGlvbi4gQWRkcmVzc2VzXG4gKiAgICAgaHR0cHM6Ly9naXRodWIuY29tL2ZpcmViYXNlL2ZpcmViYXNlLWlvcy1zZGsvaXNzdWVzLzE1NDhcbiAqIDQuICBNdWx0aS1UYWIgU3VwcG9ydC5cbiAqIDUuICBSZW1vdmFsIG9mIGhlbGQgd3JpdGUgYWNrcy5cbiAqIDYuICBDcmVhdGUgZG9jdW1lbnQgZ2xvYmFsIGZvciB0cmFja2luZyBkb2N1bWVudCBjYWNoZSBzaXplLlxuICogNy4gIEVuc3VyZSBldmVyeSBjYWNoZWQgZG9jdW1lbnQgaGFzIGEgc2VudGluZWwgcm93IHdpdGggYSBzZXF1ZW5jZSBudW1iZXIuXG4gKiA4LiAgQWRkIGNvbGxlY3Rpb24tcGFyZW50IGluZGV4IGZvciBDb2xsZWN0aW9uIEdyb3VwIHF1ZXJpZXMuXG4gKiA5LiAgQ2hhbmdlIFJlbW90ZURvY3VtZW50Q2hhbmdlcyBzdG9yZSB0byBiZSBrZXllZCBieSByZWFkVGltZSByYXRoZXIgdGhhblxuICogICAgIGFuIGF1dG8taW5jcmVtZW50aW5nIElELiBUaGlzIGlzIHJlcXVpcmVkIGZvciBJbmRleC1GcmVlIHF1ZXJpZXMuXG4gKiAxMC4gUmV3cml0ZSB0aGUgY2Fub25pY2FsIElEcyB0byB0aGUgZXhwbGljaXQgUHJvdG9idWYtYmFzZWQgZm9ybWF0LlxuICogMTEuIEFkZCBidW5kbGVzIGFuZCBuYW1lZF9xdWVyaWVzIGZvciBidW5kbGUgc3VwcG9ydC5cbiAqIDEyLiBBZGQgZG9jdW1lbnQgb3ZlcmxheXMuXG4gKiAxMy4gUmV3cml0ZSB0aGUga2V5cyBvZiB0aGUgcmVtb3RlIGRvY3VtZW50IGNhY2hlIHRvIGFsbG93IGZvciBlZmZpY2llbnRcbiAqICAgICBkb2N1bWVudCBsb29rdXAgdmlhIGBnZXRBbGwoKWAuXG4gKiAxNC4gQWRkIG92ZXJsYXlzLlxuICogMTUuIEFkZCBpbmRleGluZyBzdXBwb3J0LlxuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBSZXByZXNlbnRzIGEgbG9jYWwgdmlldyAob3ZlcmxheSkgb2YgYSBkb2N1bWVudCwgYW5kIHRoZSBmaWVsZHMgdGhhdCBhcmVcbiAqIGxvY2FsbHkgbXV0YXRlZC5cbiAqL1xuY2xhc3MgT3ZlcmxheWVkRG9jdW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKGUsIFxuICAgIC8qKlxuICAgICAqIFRoZSBmaWVsZHMgdGhhdCBhcmUgbG9jYWxseSBtdXRhdGVkIGJ5IHBhdGNoIG11dGF0aW9ucy5cbiAgICAgKlxuICAgICAqIElmIHRoZSBvdmVybGF5ZWRcdGRvY3VtZW50IGlzIGZyb20gc2V0IG9yIGRlbGV0ZSBtdXRhdGlvbnMsIHRoaXMgaXMgYG51bGxgLlxuICAgICAqIElmIHRoZXJlIGlzIG5vIG92ZXJsYXkgKG11dGF0aW9uKSBmb3IgdGhlIGRvY3VtZW50LCB0aGlzIGlzIGFuIGVtcHR5IGBGaWVsZE1hc2tgLlxuICAgICAqL1xuICAgIHQpIHtcbiAgICAgICAgdGhpcy5vdmVybGF5ZWREb2N1bWVudCA9IGUsIHRoaXMubXV0YXRlZEZpZWxkcyA9IHQ7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIHJlYWRvbmx5IHZpZXcgb2YgdGhlIGxvY2FsIHN0YXRlIG9mIGFsbCBkb2N1bWVudHMgd2UncmUgdHJhY2tpbmcgKGkuZS4gd2VcbiAqIGhhdmUgYSBjYWNoZWQgdmVyc2lvbiBpbiByZW1vdGVEb2N1bWVudENhY2hlIG9yIGxvY2FsIG11dGF0aW9ucyBmb3IgdGhlXG4gKiBkb2N1bWVudCkuIFRoZSB2aWV3IGlzIGNvbXB1dGVkIGJ5IGFwcGx5aW5nIHRoZSBtdXRhdGlvbnMgaW4gdGhlXG4gKiBNdXRhdGlvblF1ZXVlIHRvIHRoZSBSZW1vdGVEb2N1bWVudENhY2hlLlxuICovIGNsYXNzIExvY2FsRG9jdW1lbnRzVmlldyB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbiwgcikge1xuICAgICAgICB0aGlzLnJlbW90ZURvY3VtZW50Q2FjaGUgPSBlLCB0aGlzLm11dGF0aW9uUXVldWUgPSB0LCB0aGlzLmRvY3VtZW50T3ZlcmxheUNhY2hlID0gbiwgXG4gICAgICAgIHRoaXMuaW5kZXhNYW5hZ2VyID0gcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBsb2NhbCB2aWV3IG9mIHRoZSBkb2N1bWVudCBpZGVudGlmaWVkIGJ5IGBrZXlgLlxuICAgICAqXG4gICAgICogQHJldHVybnMgTG9jYWwgdmlldyBvZiB0aGUgZG9jdW1lbnQgb3IgbnVsbCBpZiB3ZSBkb24ndCBoYXZlIGFueSBjYWNoZWRcbiAgICAgKiBzdGF0ZSBmb3IgaXQuXG4gICAgICovICAgIGdldERvY3VtZW50KGUsIHQpIHtcbiAgICAgICAgbGV0IG4gPSBudWxsO1xuICAgICAgICByZXR1cm4gdGhpcy5kb2N1bWVudE92ZXJsYXlDYWNoZS5nZXRPdmVybGF5KGUsIHQpLm5leHQoKHIgPT4gKG4gPSByLCB0aGlzLnJlbW90ZURvY3VtZW50Q2FjaGUuZ2V0RW50cnkoZSwgdCkpKSkubmV4dCgoZSA9PiAobnVsbCAhPT0gbiAmJiBfX1BSSVZBVEVfbXV0YXRpb25BcHBseVRvTG9jYWxWaWV3KG4ubXV0YXRpb24sIGUsIEZpZWxkTWFzay5lbXB0eSgpLCBUaW1lc3RhbXAubm93KCkpLCBcbiAgICAgICAgZSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgbG9jYWwgdmlldyBvZiB0aGUgZG9jdW1lbnRzIGlkZW50aWZpZWQgYnkgYGtleXNgLlxuICAgICAqXG4gICAgICogSWYgd2UgZG9uJ3QgaGF2ZSBjYWNoZWQgc3RhdGUgZm9yIGEgZG9jdW1lbnQgaW4gYGtleXNgLCBhIE5vRG9jdW1lbnQgd2lsbFxuICAgICAqIGJlIHN0b3JlZCBmb3IgdGhhdCBrZXkgaW4gdGhlIHJlc3VsdGluZyBzZXQuXG4gICAgICovICAgIGdldERvY3VtZW50cyhlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbW90ZURvY3VtZW50Q2FjaGUuZ2V0RW50cmllcyhlLCB0KS5uZXh0KCh0ID0+IHRoaXMuZ2V0TG9jYWxWaWV3T2ZEb2N1bWVudHMoZSwgdCwgX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCkpLm5leHQoKCgpID0+IHQpKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTaW1pbGFyIHRvIGBnZXREb2N1bWVudHNgLCBidXQgY3JlYXRlcyB0aGUgbG9jYWwgdmlldyBmcm9tIHRoZSBnaXZlblxuICAgICAqIGBiYXNlRG9jc2Agd2l0aG91dCByZXRyaWV2aW5nIGRvY3VtZW50cyBmcm9tIHRoZSBsb2NhbCBzdG9yZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0cmFuc2FjdGlvbiAtIFRoZSB0cmFuc2FjdGlvbiB0aGlzIG9wZXJhdGlvbiBpcyBzY29wZWQgdG8uXG4gICAgICogQHBhcmFtIGRvY3MgLSBUaGUgZG9jdW1lbnRzIHRvIGFwcGx5IGxvY2FsIG11dGF0aW9ucyB0byBnZXQgdGhlIGxvY2FsIHZpZXdzLlxuICAgICAqIEBwYXJhbSBleGlzdGVuY2VTdGF0ZUNoYW5nZWQgLSBUaGUgc2V0IG9mIGRvY3VtZW50IGtleXMgd2hvc2UgZXhpc3RlbmNlIHN0YXRlXG4gICAgICogICBpcyBjaGFuZ2VkLiBUaGlzIGlzIHVzZWZ1bCB0byBkZXRlcm1pbmUgaWYgc29tZSBkb2N1bWVudHMgb3ZlcmxheSBuZWVkc1xuICAgICAqICAgdG8gYmUgcmVjYWxjdWxhdGVkLlxuICAgICAqLyAgICBnZXRMb2NhbFZpZXdPZkRvY3VtZW50cyhlLCB0LCBuID0gX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCkpIHtcbiAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV9uZXdPdmVybGF5TWFwKCk7XG4gICAgICAgIHJldHVybiB0aGlzLnBvcHVsYXRlT3ZlcmxheXMoZSwgciwgdCkubmV4dCgoKCkgPT4gdGhpcy5jb21wdXRlVmlld3MoZSwgdCwgciwgbikubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBsZXQgdCA9IGRvY3VtZW50TWFwKCk7XG4gICAgICAgICAgICByZXR1cm4gZS5mb3JFYWNoKCgoZSwgbikgPT4ge1xuICAgICAgICAgICAgICAgIHQgPSB0Lmluc2VydChlLCBuLm92ZXJsYXllZERvY3VtZW50KTtcbiAgICAgICAgICAgIH0pKSwgdDtcbiAgICAgICAgfSkpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIG92ZXJsYXllZCBkb2N1bWVudHMgZm9yIHRoZSBnaXZlbiBkb2N1bWVudCBtYXAsIHdoaWNoIHdpbGwgaW5jbHVkZVxuICAgICAqIHRoZSBsb2NhbCB2aWV3IG9mIHRob3NlIGRvY3VtZW50cyBhbmQgYSBgRmllbGRNYXNrYCBpbmRpY2F0aW5nIHdoaWNoIGZpZWxkc1xuICAgICAqIGFyZSBtdXRhdGVkIGxvY2FsbHksIGBudWxsYCBpZiBvdmVybGF5IGlzIGEgU2V0IG9yIERlbGV0ZSBtdXRhdGlvbi5cbiAgICAgKi8gICAgZ2V0T3ZlcmxheWVkRG9jdW1lbnRzKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9uZXdPdmVybGF5TWFwKCk7XG4gICAgICAgIHJldHVybiB0aGlzLnBvcHVsYXRlT3ZlcmxheXMoZSwgbiwgdCkubmV4dCgoKCkgPT4gdGhpcy5jb21wdXRlVmlld3MoZSwgdCwgbiwgX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCkpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZldGNoZXMgdGhlIG92ZXJsYXlzIGZvciB7QGNvZGUgZG9jc30gYW5kIGFkZHMgdGhlbSB0byBwcm92aWRlZCBvdmVybGF5IG1hcFxuICAgICAqIGlmIHRoZSBtYXAgZG9lcyBub3QgYWxyZWFkeSBjb250YWluIGFuIGVudHJ5IGZvciB0aGUgZ2l2ZW4gZG9jdW1lbnQga2V5LlxuICAgICAqLyAgICBwb3B1bGF0ZU92ZXJsYXlzKGUsIHQsIG4pIHtcbiAgICAgICAgY29uc3QgciA9IFtdO1xuICAgICAgICByZXR1cm4gbi5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIHQuaGFzKGUpIHx8IHIucHVzaChlKTtcbiAgICAgICAgfSkpLCB0aGlzLmRvY3VtZW50T3ZlcmxheUNhY2hlLmdldE92ZXJsYXlzKGUsIHIpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgZS5mb3JFYWNoKCgoZSwgbikgPT4ge1xuICAgICAgICAgICAgICAgIHQuc2V0KGUsIG4pO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbXB1dGVzIHRoZSBsb2NhbCB2aWV3IGZvciB0aGUgZ2l2ZW4gZG9jdW1lbnRzLlxuICAgICAqXG4gICAgICogQHBhcmFtIGRvY3MgLSBUaGUgZG9jdW1lbnRzIHRvIGNvbXB1dGUgdmlld3MgZm9yLiBJdCBhbHNvIGhhcyB0aGUgYmFzZVxuICAgICAqICAgdmVyc2lvbiBvZiB0aGUgZG9jdW1lbnRzLlxuICAgICAqIEBwYXJhbSBvdmVybGF5cyAtIFRoZSBvdmVybGF5cyB0aGF0IG5lZWQgdG8gYmUgYXBwbGllZCB0byB0aGUgZ2l2ZW4gYmFzZVxuICAgICAqICAgdmVyc2lvbiBvZiB0aGUgZG9jdW1lbnRzLlxuICAgICAqIEBwYXJhbSBleGlzdGVuY2VTdGF0ZUNoYW5nZWQgLSBBIHNldCBvZiBkb2N1bWVudHMgd2hvc2UgZXhpc3RlbmNlIHN0YXRlc1xuICAgICAqICAgbWlnaHQgaGF2ZSBjaGFuZ2VkLiBUaGlzIGlzIHVzZWQgdG8gZGV0ZXJtaW5lIGlmIHdlIG5lZWQgdG8gcmUtY2FsY3VsYXRlXG4gICAgICogICBvdmVybGF5cyBmcm9tIG11dGF0aW9uIHF1ZXVlcy5cbiAgICAgKiBAcmV0dXJuIEEgbWFwIHJlcHJlc2VudHMgdGhlIGxvY2FsIGRvY3VtZW50cyB2aWV3LlxuICAgICAqLyAgICBjb21wdXRlVmlld3MoZSwgdCwgbiwgcikge1xuICAgICAgICBsZXQgaSA9IF9fUFJJVkFURV9tdXRhYmxlRG9jdW1lbnRNYXAoKTtcbiAgICAgICAgY29uc3QgcyA9IF9fUFJJVkFURV9uZXdEb2N1bWVudEtleU1hcCgpLCBvID0gZnVuY3Rpb24gX19QUklWQVRFX25ld092ZXJsYXllZERvY3VtZW50TWFwKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9uZXdEb2N1bWVudEtleU1hcCgpO1xuICAgICAgICB9KCk7XG4gICAgICAgIHJldHVybiB0LmZvckVhY2goKChlLCB0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBvID0gbi5nZXQodC5rZXkpO1xuICAgICAgICAgICAgLy8gUmVjYWxjdWxhdGUgYW4gb3ZlcmxheSBpZiB0aGUgZG9jdW1lbnQncyBleGlzdGVuY2Ugc3RhdGUgY2hhbmdlZCBkdWUgdG9cbiAgICAgICAgICAgIC8vIGEgcmVtb3RlIGV2ZW50ICphbmQqIHRoZSBvdmVybGF5IGlzIGEgUGF0Y2hNdXRhdGlvbi4gVGhpcyBpcyBiZWNhdXNlXG4gICAgICAgICAgICAvLyBkb2N1bWVudCBleGlzdGVuY2Ugc3RhdGUgY2FuIGNoYW5nZSBpZiBzb21lIHBhdGNoIG11dGF0aW9uJ3NcbiAgICAgICAgICAgIC8vIHByZWNvbmRpdGlvbnMgYXJlIG1ldC5cbiAgICAgICAgICAgIC8vIE5PVEU6IHdlIHJlY2FsY3VsYXRlIHdoZW4gYG92ZXJsYXlgIGlzIHVuZGVmaW5lZCBhcyB3ZWxsLCBiZWNhdXNlIHRoZXJlXG4gICAgICAgICAgICAvLyBtaWdodCBiZSBhIHBhdGNoIG11dGF0aW9uIHdob3NlIHByZWNvbmRpdGlvbiBkb2VzIG5vdCBtYXRjaCBiZWZvcmUgdGhlXG4gICAgICAgICAgICAvLyBjaGFuZ2UgKGhlbmNlIG92ZXJsYXkgaXMgdW5kZWZpbmVkKSwgYnV0IHdvdWxkIG5vdyBtYXRjaC5cbiAgICAgICAgICAgICAgICAgICAgICAgIHIuaGFzKHQua2V5KSAmJiAodm9pZCAwID09PSBvIHx8IG8ubXV0YXRpb24gaW5zdGFuY2VvZiBfX1BSSVZBVEVfUGF0Y2hNdXRhdGlvbikgPyBpID0gaS5pbnNlcnQodC5rZXksIHQpIDogdm9pZCAwICE9PSBvID8gKHMuc2V0KHQua2V5LCBvLm11dGF0aW9uLmdldEZpZWxkTWFzaygpKSwgXG4gICAgICAgICAgICBfX1BSSVZBVEVfbXV0YXRpb25BcHBseVRvTG9jYWxWaWV3KG8ubXV0YXRpb24sIHQsIG8ubXV0YXRpb24uZ2V0RmllbGRNYXNrKCksIFRpbWVzdGFtcC5ub3coKSkpIDogXG4gICAgICAgICAgICAvLyBubyBvdmVybGF5IGV4aXN0c1xuICAgICAgICAgICAgLy8gVXNpbmcgRU1QVFkgdG8gaW5kaWNhdGUgdGhlcmUgaXMgbm8gb3ZlcmxheSBmb3IgdGhlIGRvY3VtZW50LlxuICAgICAgICAgICAgcy5zZXQodC5rZXksIEZpZWxkTWFzay5lbXB0eSgpKTtcbiAgICAgICAgfSkpLCB0aGlzLnJlY2FsY3VsYXRlQW5kU2F2ZU92ZXJsYXlzKGUsIGkpLm5leHQoKGUgPT4gKGUuZm9yRWFjaCgoKGUsIHQpID0+IHMuc2V0KGUsIHQpKSksIFxuICAgICAgICB0LmZvckVhY2goKChlLCB0KSA9PiB7XG4gICAgICAgICAgICB2YXIgbjtcbiAgICAgICAgICAgIHJldHVybiBvLnNldChlLCBuZXcgT3ZlcmxheWVkRG9jdW1lbnQodCwgbnVsbCAhPT0gKG4gPSBzLmdldChlKSkgJiYgdm9pZCAwICE9PSBuID8gbiA6IG51bGwpKTtcbiAgICAgICAgfSkpLCBvKSkpO1xuICAgIH1cbiAgICByZWNhbGN1bGF0ZUFuZFNhdmVPdmVybGF5cyhlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfbmV3RG9jdW1lbnRLZXlNYXAoKTtcbiAgICAgICAgLy8gQSByZXZlcnNlIGxvb2t1cCBtYXAgZnJvbSBiYXRjaCBpZCB0byB0aGUgZG9jdW1lbnRzIHdpdGhpbiB0aGF0IGJhdGNoLlxuICAgICAgICAgICAgICAgIGxldCByID0gbmV3IFNvcnRlZE1hcCgoKGUsIHQpID0+IGUgLSB0KSksIGkgPSBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubXV0YXRpb25RdWV1ZS5nZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdEb2N1bWVudEtleXMoZSwgdCkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGkgb2YgZSkgaS5rZXlzKCkuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IHQuZ2V0KGUpO1xuICAgICAgICAgICAgICAgIGlmIChudWxsID09PSBzKSByZXR1cm47XG4gICAgICAgICAgICAgICAgbGV0IG8gPSBuLmdldChlKSB8fCBGaWVsZE1hc2suZW1wdHkoKTtcbiAgICAgICAgICAgICAgICBvID0gaS5hcHBseVRvTG9jYWxWaWV3KHMsIG8pLCBuLnNldChlLCBvKTtcbiAgICAgICAgICAgICAgICBjb25zdCBfID0gKHIuZ2V0KGkuYmF0Y2hJZCkgfHwgX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCkpLmFkZChlKTtcbiAgICAgICAgICAgICAgICByID0gci5pbnNlcnQoaS5iYXRjaElkLCBfKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBbXSwgbyA9IHIuZ2V0UmV2ZXJzZUl0ZXJhdG9yKCk7XG4gICAgICAgICAgICAvLyBJdGVyYXRlIGluIGRlc2NlbmRpbmcgb3JkZXIgb2YgYmF0Y2ggSURzLCBhbmQgc2tpcCBkb2N1bWVudHMgdGhhdCBhcmVcbiAgICAgICAgICAgIC8vIGFscmVhZHkgc2F2ZWQuXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKDtvLmhhc05leHQoKTsgKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgciA9IG8uZ2V0TmV4dCgpLCBfID0gci5rZXksIGEgPSByLnZhbHVlLCB1ID0gX19QUklWQVRFX25ld011dGF0aW9uTWFwKCk7XG4gICAgICAgICAgICAgICAgYS5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpLmhhcyhlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV9jYWxjdWxhdGVPdmVybGF5TXV0YXRpb24odC5nZXQoZSksIG4uZ2V0KGUpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG51bGwgIT09IHIgJiYgdS5zZXQoZSwgciksIGkgPSBpLmFkZChlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pKSwgcy5wdXNoKHRoaXMuZG9jdW1lbnRPdmVybGF5Q2FjaGUuc2F2ZU92ZXJsYXlzKGUsIF8sIHUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2Uud2FpdEZvcihzKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IG4pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVjYWxjdWxhdGVzIG92ZXJsYXlzIGJ5IHJlYWRpbmcgdGhlIGRvY3VtZW50cyBmcm9tIHJlbW90ZSBkb2N1bWVudCBjYWNoZVxuICAgICAqIGZpcnN0LCBhbmQgc2F2ZXMgdGhlbSBhZnRlciB0aGV5IGFyZSBjYWxjdWxhdGVkLlxuICAgICAqLyAgICByZWNhbGN1bGF0ZUFuZFNhdmVPdmVybGF5c0ZvckRvY3VtZW50S2V5cyhlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbW90ZURvY3VtZW50Q2FjaGUuZ2V0RW50cmllcyhlLCB0KS5uZXh0KCh0ID0+IHRoaXMucmVjYWxjdWxhdGVBbmRTYXZlT3ZlcmxheXMoZSwgdCkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGVyZm9ybXMgYSBxdWVyeSBhZ2FpbnN0IHRoZSBsb2NhbCB2aWV3IG9mIGFsbCBkb2N1bWVudHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdHJhbnNhY3Rpb24gLSBUaGUgcGVyc2lzdGVuY2UgdHJhbnNhY3Rpb24uXG4gICAgICogQHBhcmFtIHF1ZXJ5IC0gVGhlIHF1ZXJ5IHRvIG1hdGNoIGRvY3VtZW50cyBhZ2FpbnN0LlxuICAgICAqIEBwYXJhbSBvZmZzZXQgLSBSZWFkIHRpbWUgYW5kIGtleSB0byBzdGFydCBzY2FubmluZyBieSAoZXhjbHVzaXZlKS5cbiAgICAgKiBAcGFyYW0gY29udGV4dCAtIEEgb3B0aW9uYWwgdHJhY2tlciB0byBrZWVwIGEgcmVjb3JkIG9mIGltcG9ydGFudCBkZXRhaWxzXG4gICAgICogICBkdXJpbmcgZGF0YWJhc2UgbG9jYWwgcXVlcnkgZXhlY3V0aW9uLlxuICAgICAqLyAgICBnZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5KGUsIHQsIG4sIHIpIHtcbiAgICAgICAgLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgdGhlIHF1ZXJ5IG1hdGNoZXMgYSBzaW5nbGUgZG9jdW1lbnQgYnkgcGF0aCAocmF0aGVyIHRoYW4gYVxuICogY29sbGVjdGlvbikuXG4gKi9cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9pc0RvY3VtZW50UXVlcnkkMShlKSB7XG4gICAgICAgICAgICByZXR1cm4gRG9jdW1lbnRLZXkuaXNEb2N1bWVudEtleShlLnBhdGgpICYmIG51bGwgPT09IGUuY29sbGVjdGlvbkdyb3VwICYmIDAgPT09IGUuZmlsdGVycy5sZW5ndGg7XG4gICAgICAgIH0odCkgPyB0aGlzLmdldERvY3VtZW50c01hdGNoaW5nRG9jdW1lbnRRdWVyeShlLCB0LnBhdGgpIDogX19QUklWQVRFX2lzQ29sbGVjdGlvbkdyb3VwUXVlcnkodCkgPyB0aGlzLmdldERvY3VtZW50c01hdGNoaW5nQ29sbGVjdGlvbkdyb3VwUXVlcnkoZSwgdCwgbiwgcikgOiB0aGlzLmdldERvY3VtZW50c01hdGNoaW5nQ29sbGVjdGlvblF1ZXJ5KGUsIHQsIG4sIHIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHaXZlbiBhIGNvbGxlY3Rpb24gZ3JvdXAsIHJldHVybnMgdGhlIG5leHQgZG9jdW1lbnRzIHRoYXQgZm9sbG93IHRoZSBwcm92aWRlZCBvZmZzZXQsIGFsb25nXG4gICAgICogd2l0aCBhbiB1cGRhdGVkIGJhdGNoIElELlxuICAgICAqXG4gICAgICogPHA+VGhlIGRvY3VtZW50cyByZXR1cm5lZCBieSB0aGlzIG1ldGhvZCBhcmUgb3JkZXJlZCBieSByZW1vdGUgdmVyc2lvbiBmcm9tIHRoZSBwcm92aWRlZFxuICAgICAqIG9mZnNldC4gSWYgdGhlcmUgYXJlIG5vIG1vcmUgcmVtb3RlIGRvY3VtZW50cyBhZnRlciB0aGUgcHJvdmlkZWQgb2Zmc2V0LCBkb2N1bWVudHMgd2l0aFxuICAgICAqIG11dGF0aW9ucyBpbiBvcmRlciBvZiBiYXRjaCBpZCBmcm9tIHRoZSBvZmZzZXQgYXJlIHJldHVybmVkLiBTaW5jZSBhbGwgZG9jdW1lbnRzIGluIGEgYmF0Y2ggYXJlXG4gICAgICogcmV0dXJuZWQgdG9nZXRoZXIsIHRoZSB0b3RhbCBudW1iZXIgb2YgZG9jdW1lbnRzIHJldHVybmVkIGNhbiBleGNlZWQge0Bjb2RlIGNvdW50fS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0cmFuc2FjdGlvblxuICAgICAqIEBwYXJhbSBjb2xsZWN0aW9uR3JvdXAgVGhlIGNvbGxlY3Rpb24gZ3JvdXAgZm9yIHRoZSBkb2N1bWVudHMuXG4gICAgICogQHBhcmFtIG9mZnNldCBUaGUgb2Zmc2V0IHRvIGluZGV4IGludG8uXG4gICAgICogQHBhcmFtIGNvdW50IFRoZSBudW1iZXIgb2YgZG9jdW1lbnRzIHRvIHJldHVyblxuICAgICAqIEByZXR1cm4gQSBMb2NhbFdyaXRlUmVzdWx0IHdpdGggdGhlIGRvY3VtZW50cyB0aGF0IGZvbGxvdyB0aGUgcHJvdmlkZWQgb2Zmc2V0IGFuZCB0aGUgbGFzdCBwcm9jZXNzZWQgYmF0Y2ggaWQuXG4gICAgICovICAgIGdldE5leHREb2N1bWVudHMoZSwgdCwgbiwgcikge1xuICAgICAgICByZXR1cm4gdGhpcy5yZW1vdGVEb2N1bWVudENhY2hlLmdldEFsbEZyb21Db2xsZWN0aW9uR3JvdXAoZSwgdCwgbiwgcikubmV4dCgoaSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzID0gciAtIGkuc2l6ZSA+IDAgPyB0aGlzLmRvY3VtZW50T3ZlcmxheUNhY2hlLmdldE92ZXJsYXlzRm9yQ29sbGVjdGlvbkdyb3VwKGUsIHQsIG4ubGFyZ2VzdEJhdGNoSWQsIHIgLSBpLnNpemUpIDogUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoX19QUklWQVRFX25ld092ZXJsYXlNYXAoKSk7XG4gICAgICAgICAgICAvLyBUaGUgY2FsbHNpdGUgd2lsbCB1c2UgdGhlIGxhcmdlc3QgYmF0Y2ggSUQgdG9nZXRoZXIgd2l0aCB0aGUgbGF0ZXN0IHJlYWQgdGltZSB0byBjcmVhdGVcbiAgICAgICAgICAgIC8vIGEgbmV3IGluZGV4IG9mZnNldC4gU2luY2Ugd2Ugb25seSBwcm9jZXNzIGJhdGNoIElEcyBpZiBhbGwgcmVtb3RlIGRvY3VtZW50cyBoYXZlIGJlZW4gcmVhZCxcbiAgICAgICAgICAgIC8vIG5vIG92ZXJsYXkgd2lsbCBpbmNyZWFzZSB0aGUgb3ZlcmFsbCByZWFkIHRpbWUuIFRoaXMgaXMgd2h5IHdlIG9ubHkgbmVlZCB0byBzcGVjaWFsIGNhc2VcbiAgICAgICAgICAgIC8vIHRoZSBiYXRjaCBpZC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBvID0gLTEsIF8gPSBpO1xuICAgICAgICAgICAgcmV0dXJuIHMubmV4dCgodCA9PiBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaCh0LCAoKHQsIG4pID0+IChvIDwgbi5sYXJnZXN0QmF0Y2hJZCAmJiAobyA9IG4ubGFyZ2VzdEJhdGNoSWQpLCBcbiAgICAgICAgICAgIGkuZ2V0KHQpID8gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKSA6IHRoaXMucmVtb3RlRG9jdW1lbnRDYWNoZS5nZXRFbnRyeShlLCB0KS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgICAgICBfID0gXy5pbnNlcnQodCwgZSk7XG4gICAgICAgICAgICB9KSkpKSkubmV4dCgoKCkgPT4gdGhpcy5wb3B1bGF0ZU92ZXJsYXlzKGUsIHQsIGkpKSkubmV4dCgoKCkgPT4gdGhpcy5jb21wdXRlVmlld3MoZSwgXywgdCwgX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCkpKSkubmV4dCgoZSA9PiAoe1xuICAgICAgICAgICAgICAgIGJhdGNoSWQ6IG8sXG4gICAgICAgICAgICAgICAgY2hhbmdlczogX19QUklWQVRFX2NvbnZlcnRPdmVybGF5ZWREb2N1bWVudE1hcFRvRG9jdW1lbnRNYXAoZSlcbiAgICAgICAgICAgIH0pKSkpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBnZXREb2N1bWVudHNNYXRjaGluZ0RvY3VtZW50UXVlcnkoZSwgdCkge1xuICAgICAgICAvLyBKdXN0IGRvIGEgc2ltcGxlIGRvY3VtZW50IGxvb2t1cC5cbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RG9jdW1lbnQoZSwgbmV3IERvY3VtZW50S2V5KHQpKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIGxldCB0ID0gZG9jdW1lbnRNYXAoKTtcbiAgICAgICAgICAgIHJldHVybiBlLmlzRm91bmREb2N1bWVudCgpICYmICh0ID0gdC5pbnNlcnQoZS5rZXksIGUpKSwgdDtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBnZXREb2N1bWVudHNNYXRjaGluZ0NvbGxlY3Rpb25Hcm91cFF1ZXJ5KGUsIHQsIG4sIHIpIHtcbiAgICAgICAgY29uc3QgaSA9IHQuY29sbGVjdGlvbkdyb3VwO1xuICAgICAgICBsZXQgcyA9IGRvY3VtZW50TWFwKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmluZGV4TWFuYWdlci5nZXRDb2xsZWN0aW9uUGFyZW50cyhlLCBpKS5uZXh0KChvID0+IFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKG8sIChvID0+IHtcbiAgICAgICAgICAgIGNvbnN0IF8gPSBmdW5jdGlvbiBfX1BSSVZBVEVfYXNDb2xsZWN0aW9uUXVlcnlBdFBhdGgoZSwgdCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX1F1ZXJ5SW1wbCh0LCBcbiAgICAgICAgICAgICAgICAvKmNvbGxlY3Rpb25Hcm91cD0qLyBudWxsLCBlLmV4cGxpY2l0T3JkZXJCeS5zbGljZSgpLCBlLmZpbHRlcnMuc2xpY2UoKSwgZS5saW1pdCwgZS5saW1pdFR5cGUsIGUuc3RhcnRBdCwgZS5lbmRBdCk7XG4gICAgICAgICAgICB9KHQsIG8uY2hpbGQoaSkpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RG9jdW1lbnRzTWF0Y2hpbmdDb2xsZWN0aW9uUXVlcnkoZSwgXywgbiwgcikubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgZS5mb3JFYWNoKCgoZSwgdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzID0gcy5pbnNlcnQoZSwgdCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gcykpKSk7XG4gICAgfVxuICAgIGdldERvY3VtZW50c01hdGNoaW5nQ29sbGVjdGlvblF1ZXJ5KGUsIHQsIG4sIHIpIHtcbiAgICAgICAgLy8gUXVlcnkgdGhlIHJlbW90ZSBkb2N1bWVudHMgYW5kIG92ZXJsYXkgbXV0YXRpb25zLlxuICAgICAgICBsZXQgaTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9jdW1lbnRPdmVybGF5Q2FjaGUuZ2V0T3ZlcmxheXNGb3JDb2xsZWN0aW9uKGUsIHQucGF0aCwgbi5sYXJnZXN0QmF0Y2hJZCkubmV4dCgocyA9PiAoaSA9IHMsIFxuICAgICAgICB0aGlzLnJlbW90ZURvY3VtZW50Q2FjaGUuZ2V0RG9jdW1lbnRzTWF0Y2hpbmdRdWVyeShlLCB0LCBuLCBpLCByKSkpKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIC8vIEFzIGRvY3VtZW50cyBtaWdodCBtYXRjaCB0aGUgcXVlcnkgYmVjYXVzZSBvZiB0aGVpciBvdmVybGF5IHdlIG5lZWQgdG9cbiAgICAgICAgICAgIC8vIGluY2x1ZGUgZG9jdW1lbnRzIGZvciBhbGwgb3ZlcmxheXMgaW4gdGhlIGluaXRpYWwgZG9jdW1lbnQgc2V0LlxuICAgICAgICAgICAgaS5mb3JFYWNoKCgodCwgbikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBuLmdldEtleSgpO1xuICAgICAgICAgICAgICAgIG51bGwgPT09IGUuZ2V0KHIpICYmIChlID0gZS5pbnNlcnQociwgTXV0YWJsZURvY3VtZW50Lm5ld0ludmFsaWREb2N1bWVudChyKSkpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgLy8gQXBwbHkgdGhlIG92ZXJsYXlzIGFuZCBtYXRjaCBhZ2FpbnN0IHRoZSBxdWVyeS5cbiAgICAgICAgICAgIGxldCBuID0gZG9jdW1lbnRNYXAoKTtcbiAgICAgICAgICAgIHJldHVybiBlLmZvckVhY2goKChlLCByKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IGkuZ2V0KGUpO1xuICAgICAgICAgICAgICAgIHZvaWQgMCAhPT0gcyAmJiBfX1BSSVZBVEVfbXV0YXRpb25BcHBseVRvTG9jYWxWaWV3KHMubXV0YXRpb24sIHIsIEZpZWxkTWFzay5lbXB0eSgpLCBUaW1lc3RhbXAubm93KCkpLCBcbiAgICAgICAgICAgICAgICAvLyBGaW5hbGx5LCBpbnNlcnQgdGhlIGRvY3VtZW50cyB0aGF0IHN0aWxsIG1hdGNoIHRoZSBxdWVyeVxuICAgICAgICAgICAgICAgIF9fUFJJVkFURV9xdWVyeU1hdGNoZXModCwgcikgJiYgKG4gPSBuLmluc2VydChlLCByKSk7XG4gICAgICAgICAgICB9KSksIG47XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIF9fUFJJVkFURV9NZW1vcnlCdW5kbGVDYWNoZSB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLnNlcmlhbGl6ZXIgPSBlLCB0aGlzLnVyID0gbmV3IE1hcCwgdGhpcy5jciA9IG5ldyBNYXA7XG4gICAgfVxuICAgIGdldEJ1bmRsZU1ldGFkYXRhKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHRoaXMudXIuZ2V0KHQpKTtcbiAgICB9XG4gICAgc2F2ZUJ1bmRsZU1ldGFkYXRhKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudXIuc2V0KHQuaWQsIFxuICAgICAgICAvKiogRGVjb2RlcyBhIEJ1bmRsZU1ldGFkYXRhIHByb3RvIGludG8gYSBCdW5kbGVNZXRhZGF0YSBvYmplY3QuICovXG4gICAgICAgIGZ1bmN0aW9uIF9fUFJJVkFURV9mcm9tQnVuZGxlTWV0YWRhdGEoZSkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBpZDogZS5pZCxcbiAgICAgICAgICAgICAgICB2ZXJzaW9uOiBlLnZlcnNpb24sXG4gICAgICAgICAgICAgICAgY3JlYXRlVGltZTogX19QUklWQVRFX2Zyb21WZXJzaW9uKGUuY3JlYXRlVGltZSlcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0odCkpLCBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBnZXROYW1lZFF1ZXJ5KGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHRoaXMuY3IuZ2V0KHQpKTtcbiAgICB9XG4gICAgc2F2ZU5hbWVkUXVlcnkoZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jci5zZXQodC5uYW1lLCBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbVByb3RvTmFtZWRRdWVyeShlKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG5hbWU6IGUubmFtZSxcbiAgICAgICAgICAgICAgICBxdWVyeTogX19QUklWQVRFX2Zyb21CdW5kbGVkUXVlcnkoZS5idW5kbGVkUXVlcnkpLFxuICAgICAgICAgICAgICAgIHJlYWRUaW1lOiBfX1BSSVZBVEVfZnJvbVZlcnNpb24oZS5yZWFkVGltZSlcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0odCkpLCBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQW4gaW4tbWVtb3J5IGltcGxlbWVudGF0aW9uIG9mIERvY3VtZW50T3ZlcmxheUNhY2hlLlxuICovIGNsYXNzIF9fUFJJVkFURV9NZW1vcnlEb2N1bWVudE92ZXJsYXlDYWNoZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8vIEEgbWFwIHNvcnRlZCBieSBEb2N1bWVudEtleSwgd2hvc2UgdmFsdWUgaXMgYSBwYWlyIG9mIHRoZSBsYXJnZXN0IGJhdGNoIGlkXG4gICAgICAgIC8vIGZvciB0aGUgb3ZlcmxheSBhbmQgdGhlIG92ZXJsYXkgaXRzZWxmLlxuICAgICAgICB0aGlzLm92ZXJsYXlzID0gbmV3IFNvcnRlZE1hcChEb2N1bWVudEtleS5jb21wYXJhdG9yKSwgdGhpcy5sciA9IG5ldyBNYXA7XG4gICAgfVxuICAgIGdldE92ZXJsYXkoZSwgdCkge1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodGhpcy5vdmVybGF5cy5nZXQodCkpO1xuICAgIH1cbiAgICBnZXRPdmVybGF5cyhlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfbmV3T3ZlcmxheU1hcCgpO1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2godCwgKHQgPT4gdGhpcy5nZXRPdmVybGF5KGUsIHQpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgbnVsbCAhPT0gZSAmJiBuLnNldCh0LCBlKTtcbiAgICAgICAgfSkpKSkubmV4dCgoKCkgPT4gbikpO1xuICAgIH1cbiAgICBzYXZlT3ZlcmxheXMoZSwgdCwgbikge1xuICAgICAgICByZXR1cm4gbi5mb3JFYWNoKCgobiwgcikgPT4ge1xuICAgICAgICAgICAgdGhpcy5sdChlLCB0LCByKTtcbiAgICAgICAgfSkpLCBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICByZW1vdmVPdmVybGF5c0ZvckJhdGNoSWQoZSwgdCwgbikge1xuICAgICAgICBjb25zdCByID0gdGhpcy5sci5nZXQobik7XG4gICAgICAgIHJldHVybiB2b2lkIDAgIT09IHIgJiYgKHIuZm9yRWFjaCgoZSA9PiB0aGlzLm92ZXJsYXlzID0gdGhpcy5vdmVybGF5cy5yZW1vdmUoZSkpKSwgXG4gICAgICAgIHRoaXMubHIuZGVsZXRlKG4pKSwgUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgZ2V0T3ZlcmxheXNGb3JDb2xsZWN0aW9uKGUsIHQsIG4pIHtcbiAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV9uZXdPdmVybGF5TWFwKCksIGkgPSB0Lmxlbmd0aCArIDEsIHMgPSBuZXcgRG9jdW1lbnRLZXkodC5jaGlsZChcIlwiKSksIG8gPSB0aGlzLm92ZXJsYXlzLmdldEl0ZXJhdG9yRnJvbShzKTtcbiAgICAgICAgZm9yICg7by5oYXNOZXh0KCk7ICkge1xuICAgICAgICAgICAgY29uc3QgZSA9IG8uZ2V0TmV4dCgpLnZhbHVlLCBzID0gZS5nZXRLZXkoKTtcbiAgICAgICAgICAgIGlmICghdC5pc1ByZWZpeE9mKHMucGF0aCkpIGJyZWFrO1xuICAgICAgICAgICAgLy8gRG9jdW1lbnRzIGZyb20gc3ViLWNvbGxlY3Rpb25zXG4gICAgICAgICAgICAgICAgICAgICAgICBzLnBhdGgubGVuZ3RoID09PSBpICYmIChlLmxhcmdlc3RCYXRjaElkID4gbiAmJiByLnNldChlLmdldEtleSgpLCBlKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHIpO1xuICAgIH1cbiAgICBnZXRPdmVybGF5c0ZvckNvbGxlY3Rpb25Hcm91cChlLCB0LCBuLCByKSB7XG4gICAgICAgIGxldCBpID0gbmV3IFNvcnRlZE1hcCgoKGUsIHQpID0+IGUgLSB0KSk7XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLm92ZXJsYXlzLmdldEl0ZXJhdG9yKCk7XG4gICAgICAgIGZvciAoO3MuaGFzTmV4dCgpOyApIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBzLmdldE5leHQoKS52YWx1ZTtcbiAgICAgICAgICAgIGlmIChlLmdldEtleSgpLmdldENvbGxlY3Rpb25Hcm91cCgpID09PSB0ICYmIGUubGFyZ2VzdEJhdGNoSWQgPiBuKSB7XG4gICAgICAgICAgICAgICAgbGV0IHQgPSBpLmdldChlLmxhcmdlc3RCYXRjaElkKTtcbiAgICAgICAgICAgICAgICBudWxsID09PSB0ICYmICh0ID0gX19QUklWQVRFX25ld092ZXJsYXlNYXAoKSwgaSA9IGkuaW5zZXJ0KGUubGFyZ2VzdEJhdGNoSWQsIHQpKSwgXG4gICAgICAgICAgICAgICAgdC5zZXQoZS5nZXRLZXkoKSwgZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbyA9IF9fUFJJVkFURV9uZXdPdmVybGF5TWFwKCksIF8gPSBpLmdldEl0ZXJhdG9yKCk7XG4gICAgICAgIGZvciAoO18uaGFzTmV4dCgpOyApIHtcbiAgICAgICAgICAgIGlmIChfLmdldE5leHQoKS52YWx1ZS5mb3JFYWNoKCgoZSwgdCkgPT4gby5zZXQoZSwgdCkpKSwgby5zaXplKCkgPj0gcikgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKG8pO1xuICAgIH1cbiAgICBsdChlLCB0LCBuKSB7XG4gICAgICAgIC8vIFJlbW92ZSB0aGUgYXNzb2NpYXRpb24gb2YgdGhlIG92ZXJsYXkgdG8gaXRzIGJhdGNoIGlkLlxuICAgICAgICBjb25zdCByID0gdGhpcy5vdmVybGF5cy5nZXQobi5rZXkpO1xuICAgICAgICBpZiAobnVsbCAhPT0gcikge1xuICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMubHIuZ2V0KHIubGFyZ2VzdEJhdGNoSWQpLmRlbGV0ZShuLmtleSk7XG4gICAgICAgICAgICB0aGlzLmxyLnNldChyLmxhcmdlc3RCYXRjaElkLCBlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm92ZXJsYXlzID0gdGhpcy5vdmVybGF5cy5pbnNlcnQobi5rZXksIG5ldyBPdmVybGF5KHQsIG4pKTtcbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBhc3NvY2lhdGlvbiBvZiB0aGlzIG92ZXJsYXkgdG8gdGhlIGdpdmVuIGxhcmdlc3RCYXRjaElkLlxuICAgICAgICBsZXQgaSA9IHRoaXMubHIuZ2V0KHQpO1xuICAgICAgICB2b2lkIDAgPT09IGkgJiYgKGkgPSBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKSwgdGhpcy5sci5zZXQodCwgaSkpLCB0aGlzLmxyLnNldCh0LCBpLmFkZChuLmtleSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBjb2xsZWN0aW9uIG9mIHJlZmVyZW5jZXMgdG8gYSBkb2N1bWVudCBmcm9tIHNvbWUga2luZCBvZiBudW1iZXJlZCBlbnRpdHlcbiAqIChlaXRoZXIgYSB0YXJnZXQgSUQgb3IgYmF0Y2ggSUQpLiBBcyByZWZlcmVuY2VzIGFyZSBhZGRlZCB0byBvciByZW1vdmVkIGZyb21cbiAqIHRoZSBzZXQgY29ycmVzcG9uZGluZyBldmVudHMgYXJlIGVtaXR0ZWQgdG8gYSByZWdpc3RlcmVkIGdhcmJhZ2UgY29sbGVjdG9yLlxuICpcbiAqIEVhY2ggcmVmZXJlbmNlIGlzIHJlcHJlc2VudGVkIGJ5IGEgRG9jdW1lbnRSZWZlcmVuY2Ugb2JqZWN0LiBFYWNoIG9mIHRoZW1cbiAqIGNvbnRhaW5zIGVub3VnaCBpbmZvcm1hdGlvbiB0byB1bmlxdWVseSBpZGVudGlmeSB0aGUgcmVmZXJlbmNlLiBUaGV5IGFyZSBhbGxcbiAqIHN0b3JlZCBwcmltYXJpbHkgaW4gYSBzZXQgc29ydGVkIGJ5IGtleS4gQSBkb2N1bWVudCBpcyBjb25zaWRlcmVkIGdhcmJhZ2UgaWZcbiAqIHRoZXJlJ3Mgbm8gcmVmZXJlbmNlcyBpbiB0aGF0IHNldCAodGhpcyBjYW4gYmUgZWZmaWNpZW50bHkgY2hlY2tlZCB0aGFua3MgdG9cbiAqIHNvcnRpbmcgYnkga2V5KS5cbiAqXG4gKiBSZWZlcmVuY2VTZXQgYWxzbyBrZWVwcyBhIHNlY29uZGFyeSBzZXQgdGhhdCBjb250YWlucyByZWZlcmVuY2VzIHNvcnRlZCBieVxuICogSURzLiBUaGlzIG9uZSBpcyB1c2VkIHRvIGVmZmljaWVudGx5IGltcGxlbWVudCByZW1vdmFsIG9mIGFsbCByZWZlcmVuY2VzIGJ5XG4gKiBzb21lIHRhcmdldCBJRC5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfUmVmZXJlbmNlU2V0IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgLy8gQSBzZXQgb2Ygb3V0c3RhbmRpbmcgcmVmZXJlbmNlcyB0byBhIGRvY3VtZW50IHNvcnRlZCBieSBrZXkuXG4gICAgICAgIHRoaXMuaHIgPSBuZXcgU29ydGVkU2V0KF9fUFJJVkFURV9Eb2NSZWZlcmVuY2UuUHIpLCBcbiAgICAgICAgLy8gQSBzZXQgb2Ygb3V0c3RhbmRpbmcgcmVmZXJlbmNlcyB0byBhIGRvY3VtZW50IHNvcnRlZCBieSB0YXJnZXQgaWQuXG4gICAgICAgIHRoaXMuSXIgPSBuZXcgU29ydGVkU2V0KF9fUFJJVkFURV9Eb2NSZWZlcmVuY2UuVHIpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB0cnVlIGlmIHRoZSByZWZlcmVuY2Ugc2V0IGNvbnRhaW5zIG5vIHJlZmVyZW5jZXMuICovICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhyLmlzRW1wdHkoKTtcbiAgICB9XG4gICAgLyoqIEFkZHMgYSByZWZlcmVuY2UgdG8gdGhlIGdpdmVuIGRvY3VtZW50IGtleSBmb3IgdGhlIGdpdmVuIElELiAqLyAgICBhZGRSZWZlcmVuY2UoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gbmV3IF9fUFJJVkFURV9Eb2NSZWZlcmVuY2UoZSwgdCk7XG4gICAgICAgIHRoaXMuaHIgPSB0aGlzLmhyLmFkZChuKSwgdGhpcy5JciA9IHRoaXMuSXIuYWRkKG4pO1xuICAgIH1cbiAgICAvKiogQWRkIHJlZmVyZW5jZXMgdG8gdGhlIGdpdmVuIGRvY3VtZW50IGtleXMgZm9yIHRoZSBnaXZlbiBJRC4gKi8gICAgRXIoZSwgdCkge1xuICAgICAgICBlLmZvckVhY2goKGUgPT4gdGhpcy5hZGRSZWZlcmVuY2UoZSwgdCkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhIHJlZmVyZW5jZSB0byB0aGUgZ2l2ZW4gZG9jdW1lbnQga2V5IGZvciB0aGUgZ2l2ZW5cbiAgICAgKiBJRC5cbiAgICAgKi8gICAgcmVtb3ZlUmVmZXJlbmNlKGUsIHQpIHtcbiAgICAgICAgdGhpcy5kcihuZXcgX19QUklWQVRFX0RvY1JlZmVyZW5jZShlLCB0KSk7XG4gICAgfVxuICAgIEFyKGUsIHQpIHtcbiAgICAgICAgZS5mb3JFYWNoKChlID0+IHRoaXMucmVtb3ZlUmVmZXJlbmNlKGUsIHQpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsZWFycyBhbGwgcmVmZXJlbmNlcyB3aXRoIGEgZ2l2ZW4gSUQuIENhbGxzIHJlbW92ZVJlZigpIGZvciBlYWNoIGtleVxuICAgICAqIHJlbW92ZWQuXG4gICAgICovICAgIFJyKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IG5ldyBEb2N1bWVudEtleShuZXcgUmVzb3VyY2VQYXRoKFtdKSksIG4gPSBuZXcgX19QUklWQVRFX0RvY1JlZmVyZW5jZSh0LCBlKSwgciA9IG5ldyBfX1BSSVZBVEVfRG9jUmVmZXJlbmNlKHQsIGUgKyAxKSwgaSA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5Jci5mb3JFYWNoSW5SYW5nZShbIG4sIHIgXSwgKGUgPT4ge1xuICAgICAgICAgICAgdGhpcy5kcihlKSwgaS5wdXNoKGUua2V5KTtcbiAgICAgICAgfSkpLCBpO1xuICAgIH1cbiAgICBWcigpIHtcbiAgICAgICAgdGhpcy5oci5mb3JFYWNoKChlID0+IHRoaXMuZHIoZSkpKTtcbiAgICB9XG4gICAgZHIoZSkge1xuICAgICAgICB0aGlzLmhyID0gdGhpcy5oci5kZWxldGUoZSksIHRoaXMuSXIgPSB0aGlzLklyLmRlbGV0ZShlKTtcbiAgICB9XG4gICAgbXIoZSkge1xuICAgICAgICBjb25zdCB0ID0gbmV3IERvY3VtZW50S2V5KG5ldyBSZXNvdXJjZVBhdGgoW10pKSwgbiA9IG5ldyBfX1BSSVZBVEVfRG9jUmVmZXJlbmNlKHQsIGUpLCByID0gbmV3IF9fUFJJVkFURV9Eb2NSZWZlcmVuY2UodCwgZSArIDEpO1xuICAgICAgICBsZXQgaSA9IF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpO1xuICAgICAgICByZXR1cm4gdGhpcy5Jci5mb3JFYWNoSW5SYW5nZShbIG4sIHIgXSwgKGUgPT4ge1xuICAgICAgICAgICAgaSA9IGkuYWRkKGUua2V5KTtcbiAgICAgICAgfSkpLCBpO1xuICAgIH1cbiAgICBjb250YWluc0tleShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBuZXcgX19QUklWQVRFX0RvY1JlZmVyZW5jZShlLCAwKSwgbiA9IHRoaXMuaHIuZmlyc3RBZnRlck9yRXF1YWwodCk7XG4gICAgICAgIHJldHVybiBudWxsICE9PSBuICYmIGUuaXNFcXVhbChuLmtleSk7XG4gICAgfVxufVxuXG5jbGFzcyBfX1BSSVZBVEVfRG9jUmVmZXJlbmNlIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMua2V5ID0gZSwgdGhpcy5nciA9IHQ7XG4gICAgfVxuICAgIC8qKiBDb21wYXJlIGJ5IGtleSB0aGVuIGJ5IElEICovICAgIHN0YXRpYyBQcihlLCB0KSB7XG4gICAgICAgIHJldHVybiBEb2N1bWVudEtleS5jb21wYXJhdG9yKGUua2V5LCB0LmtleSkgfHwgX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IoZS5nciwgdC5ncik7XG4gICAgfVxuICAgIC8qKiBDb21wYXJlIGJ5IElEIHRoZW4gYnkga2V5ICovICAgIHN0YXRpYyBUcihlLCB0KSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvcihlLmdyLCB0LmdyKSB8fCBEb2N1bWVudEtleS5jb21wYXJhdG9yKGUua2V5LCB0LmtleSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfTWVtb3J5TXV0YXRpb25RdWV1ZSB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICB0aGlzLmluZGV4TWFuYWdlciA9IGUsIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUgPSB0LCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBzZXQgb2YgYWxsIG11dGF0aW9ucyB0aGF0IGhhdmUgYmVlbiBzZW50IGJ1dCBub3QgeWV0IGJlZW4gYXBwbGllZCB0b1xuICAgICAgICAgKiB0aGUgYmFja2VuZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubXV0YXRpb25RdWV1ZSA9IFtdLCBcbiAgICAgICAgLyoqIE5leHQgdmFsdWUgdG8gdXNlIHdoZW4gYXNzaWduaW5nIHNlcXVlbnRpYWwgSURzIHRvIGVhY2ggbXV0YXRpb24gYmF0Y2guICovXG4gICAgICAgIHRoaXMucHIgPSAxLCBcbiAgICAgICAgLyoqIEFuIG9yZGVyZWQgbWFwcGluZyBiZXR3ZWVuIGRvY3VtZW50cyBhbmQgdGhlIG11dGF0aW9ucyBiYXRjaCBJRHMuICovXG4gICAgICAgIHRoaXMueXIgPSBuZXcgU29ydGVkU2V0KF9fUFJJVkFURV9Eb2NSZWZlcmVuY2UuUHIpO1xuICAgIH1cbiAgICBjaGVja0VtcHR5KGUpIHtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKDAgPT09IHRoaXMubXV0YXRpb25RdWV1ZS5sZW5ndGgpO1xuICAgIH1cbiAgICBhZGRNdXRhdGlvbkJhdGNoKGUsIHQsIG4sIHIpIHtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMucHI7XG4gICAgICAgIHRoaXMucHIrKywgdGhpcy5tdXRhdGlvblF1ZXVlLmxlbmd0aCA+IDAgJiYgdGhpcy5tdXRhdGlvblF1ZXVlW3RoaXMubXV0YXRpb25RdWV1ZS5sZW5ndGggLSAxXTtcbiAgICAgICAgY29uc3QgcyA9IG5ldyBNdXRhdGlvbkJhdGNoKGksIHQsIG4sIHIpO1xuICAgICAgICB0aGlzLm11dGF0aW9uUXVldWUucHVzaChzKTtcbiAgICAgICAgLy8gVHJhY2sgcmVmZXJlbmNlcyBieSBkb2N1bWVudCBrZXkgYW5kIGluZGV4IGNvbGxlY3Rpb24gcGFyZW50cy5cbiAgICAgICAgZm9yIChjb25zdCB0IG9mIHIpIHRoaXMueXIgPSB0aGlzLnlyLmFkZChuZXcgX19QUklWQVRFX0RvY1JlZmVyZW5jZSh0LmtleSwgaSkpLCBcbiAgICAgICAgdGhpcy5pbmRleE1hbmFnZXIuYWRkVG9Db2xsZWN0aW9uUGFyZW50SW5kZXgoZSwgdC5rZXkucGF0aC5wb3BMYXN0KCkpO1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUocyk7XG4gICAgfVxuICAgIGxvb2t1cE11dGF0aW9uQmF0Y2goZSwgdCkge1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodGhpcy53cih0KSk7XG4gICAgfVxuICAgIGdldE5leHRNdXRhdGlvbkJhdGNoQWZ0ZXJCYXRjaElkKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHQgKyAxLCByID0gdGhpcy5TcihuKSwgaSA9IHIgPCAwID8gMCA6IHI7XG4gICAgICAgIC8vIFRoZSByZXF1ZXN0ZWQgYmF0Y2hJZCBtYXkgc3RpbGwgYmUgb3V0IG9mIHJhbmdlIHNvIG5vcm1hbGl6ZSBpdCB0byB0aGVcbiAgICAgICAgLy8gc3RhcnQgb2YgdGhlIHF1ZXVlLlxuICAgICAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0aGlzLm11dGF0aW9uUXVldWUubGVuZ3RoID4gaSA/IHRoaXMubXV0YXRpb25RdWV1ZVtpXSA6IG51bGwpO1xuICAgIH1cbiAgICBnZXRIaWdoZXN0VW5hY2tub3dsZWRnZWRCYXRjaElkKCkge1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoMCA9PT0gdGhpcy5tdXRhdGlvblF1ZXVlLmxlbmd0aCA/IC0xIDogdGhpcy5wciAtIDEpO1xuICAgIH1cbiAgICBnZXRBbGxNdXRhdGlvbkJhdGNoZXMoZSkge1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodGhpcy5tdXRhdGlvblF1ZXVlLnNsaWNlKCkpO1xuICAgIH1cbiAgICBnZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdEb2N1bWVudEtleShlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgX19QUklWQVRFX0RvY1JlZmVyZW5jZSh0LCAwKSwgciA9IG5ldyBfX1BSSVZBVEVfRG9jUmVmZXJlbmNlKHQsIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSksIGkgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMueXIuZm9yRWFjaEluUmFuZ2UoWyBuLCByIF0sIChlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLndyKGUuZ3IpO1xuICAgICAgICAgICAgaS5wdXNoKHQpO1xuICAgICAgICB9KSksIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKGkpO1xuICAgIH1cbiAgICBnZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdEb2N1bWVudEtleXMoZSwgdCkge1xuICAgICAgICBsZXQgbiA9IG5ldyBTb3J0ZWRTZXQoX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IpO1xuICAgICAgICByZXR1cm4gdC5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBuZXcgX19QUklWQVRFX0RvY1JlZmVyZW5jZShlLCAwKSwgciA9IG5ldyBfX1BSSVZBVEVfRG9jUmVmZXJlbmNlKGUsIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSk7XG4gICAgICAgICAgICB0aGlzLnlyLmZvckVhY2hJblJhbmdlKFsgdCwgciBdLCAoZSA9PiB7XG4gICAgICAgICAgICAgICAgbiA9IG4uYWRkKGUuZ3IpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSksIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHRoaXMuYnIobikpO1xuICAgIH1cbiAgICBnZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdRdWVyeShlLCB0KSB7XG4gICAgICAgIC8vIFVzZSB0aGUgcXVlcnkgcGF0aCBhcyBhIHByZWZpeCBmb3IgdGVzdGluZyBpZiBhIGRvY3VtZW50IG1hdGNoZXMgdGhlXG4gICAgICAgIC8vIHF1ZXJ5LlxuICAgICAgICBjb25zdCBuID0gdC5wYXRoLCByID0gbi5sZW5ndGggKyAxO1xuICAgICAgICAvLyBDb25zdHJ1Y3QgYSBkb2N1bWVudCByZWZlcmVuY2UgZm9yIGFjdHVhbGx5IHNjYW5uaW5nIHRoZSBpbmRleC4gVW5saWtlXG4gICAgICAgIC8vIHRoZSBwcmVmaXggdGhlIGRvY3VtZW50IGtleSBpbiB0aGlzIHJlZmVyZW5jZSBtdXN0IGhhdmUgYW4gZXZlbiBudW1iZXIgb2ZcbiAgICAgICAgLy8gc2VnbWVudHMuIFRoZSBlbXB0eSBzZWdtZW50IGNhbiBiZSB1c2VkIGEgc3VmZml4IG9mIHRoZSBxdWVyeSBwYXRoXG4gICAgICAgIC8vIGJlY2F1c2UgaXQgcHJlY2VkZXMgYWxsIG90aGVyIHNlZ21lbnRzIGluIGFuIG9yZGVyZWQgdHJhdmVyc2FsLlxuICAgICAgICBsZXQgaSA9IG47XG4gICAgICAgIERvY3VtZW50S2V5LmlzRG9jdW1lbnRLZXkoaSkgfHwgKGkgPSBpLmNoaWxkKFwiXCIpKTtcbiAgICAgICAgY29uc3QgcyA9IG5ldyBfX1BSSVZBVEVfRG9jUmVmZXJlbmNlKG5ldyBEb2N1bWVudEtleShpKSwgMCk7XG4gICAgICAgIC8vIEZpbmQgdW5pcXVlIGJhdGNoSURzIHJlZmVyZW5jZWQgYnkgYWxsIGRvY3VtZW50cyBwb3RlbnRpYWxseSBtYXRjaGluZyB0aGVcbiAgICAgICAgLy8gcXVlcnkuXG4gICAgICAgICAgICAgICAgbGV0IG8gPSBuZXcgU29ydGVkU2V0KF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKTtcbiAgICAgICAgcmV0dXJuIHRoaXMueXIuZm9yRWFjaFdoaWxlKChlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBlLmtleS5wYXRoO1xuICAgICAgICAgICAgcmV0dXJuICEhbi5pc1ByZWZpeE9mKHQpICYmIChcbiAgICAgICAgICAgIC8vIFJvd3Mgd2l0aCBkb2N1bWVudCBrZXlzIG1vcmUgdGhhbiBvbmUgc2VnbWVudCBsb25nZXIgdGhhbiB0aGUgcXVlcnlcbiAgICAgICAgICAgIC8vIHBhdGggY2FuJ3QgYmUgbWF0Y2hlcy4gRm9yIGV4YW1wbGUsIGEgcXVlcnkgb24gJ3Jvb21zJyBjYW4ndCBtYXRjaFxuICAgICAgICAgICAgLy8gdGhlIGRvY3VtZW50IC9yb29tcy9hYmMvbWVzc2FnZXMveHl4LlxuICAgICAgICAgICAgLy8gVE9ETyhtY2cpOiB3ZSdsbCBuZWVkIGEgZGlmZmVyZW50IHNjYW5uZXIgd2hlbiB3ZSBpbXBsZW1lbnRcbiAgICAgICAgICAgIC8vIGFuY2VzdG9yIHF1ZXJpZXMuXG4gICAgICAgICAgICB0Lmxlbmd0aCA9PT0gciAmJiAobyA9IG8uYWRkKGUuZ3IpKSwgITApO1xuICAgICAgICB9KSwgcyksIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHRoaXMuYnIobykpO1xuICAgIH1cbiAgICBicihlKSB7XG4gICAgICAgIC8vIENvbnN0cnVjdCBhbiBhcnJheSBvZiBtYXRjaGluZyBiYXRjaGVzLCBzb3J0ZWQgYnkgYmF0Y2hJRCB0byBlbnN1cmUgdGhhdFxuICAgICAgICAvLyBtdWx0aXBsZSBtdXRhdGlvbnMgYWZmZWN0aW5nIHRoZSBzYW1lIGRvY3VtZW50IGtleSBhcmUgYXBwbGllZCBpbiBvcmRlci5cbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICByZXR1cm4gZS5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0aGlzLndyKGUpO1xuICAgICAgICAgICAgbnVsbCAhPT0gbiAmJiB0LnB1c2gobik7XG4gICAgICAgIH0pKSwgdDtcbiAgICB9XG4gICAgcmVtb3ZlTXV0YXRpb25CYXRjaChlLCB0KSB7XG4gICAgICAgIF9fUFJJVkFURV9oYXJkQXNzZXJ0KDAgPT09IHRoaXMuRHIodC5iYXRjaElkLCBcInJlbW92ZWRcIikpLCB0aGlzLm11dGF0aW9uUXVldWUuc2hpZnQoKTtcbiAgICAgICAgbGV0IG4gPSB0aGlzLnlyO1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2godC5tdXRhdGlvbnMsIChyID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBuZXcgX19QUklWQVRFX0RvY1JlZmVyZW5jZShyLmtleSwgdC5iYXRjaElkKTtcbiAgICAgICAgICAgIHJldHVybiBuID0gbi5kZWxldGUoaSksIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUubWFya1BvdGVudGlhbGx5T3JwaGFuZWQoZSwgci5rZXkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy55ciA9IG47XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgRm4oZSkge1xuICAgICAgICAvLyBOby1vcCBzaW5jZSB0aGUgbWVtb3J5IG11dGF0aW9uIHF1ZXVlIGRvZXMgbm90IG1haW50YWluIGEgc2VwYXJhdGUgY2FjaGUuXG4gICAgfVxuICAgIGNvbnRhaW5zS2V5KGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBfX1BSSVZBVEVfRG9jUmVmZXJlbmNlKHQsIDApLCByID0gdGhpcy55ci5maXJzdEFmdGVyT3JFcXVhbChuKTtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHQuaXNFcXVhbChyICYmIHIua2V5KSk7XG4gICAgfVxuICAgIHBlcmZvcm1Db25zaXN0ZW5jeUNoZWNrKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubXV0YXRpb25RdWV1ZS5sZW5ndGgsIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZpbmRzIHRoZSBpbmRleCBvZiB0aGUgZ2l2ZW4gYmF0Y2hJZCBpbiB0aGUgbXV0YXRpb24gcXVldWUgYW5kIGFzc2VydHMgdGhhdFxuICAgICAqIHRoZSByZXN1bHRpbmcgaW5kZXggaXMgd2l0aGluIHRoZSBib3VuZHMgb2YgdGhlIHF1ZXVlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGJhdGNoSWQgLSBUaGUgYmF0Y2hJZCB0byBzZWFyY2ggZm9yXG4gICAgICogQHBhcmFtIGFjdGlvbiAtIEEgZGVzY3JpcHRpb24gb2Ygd2hhdCB0aGUgY2FsbGVyIGlzIGRvaW5nLCBwaHJhc2VkIGluIHBhc3NpdmVcbiAgICAgKiBmb3JtIChlLmcuIFwiYWNrbm93bGVkZ2VkXCIgaW4gYSByb3V0aW5lIHRoYXQgYWNrbm93bGVkZ2VzIGJhdGNoZXMpLlxuICAgICAqLyAgICBEcihlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLlNyKGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGaW5kcyB0aGUgaW5kZXggb2YgdGhlIGdpdmVuIGJhdGNoSWQgaW4gdGhlIG11dGF0aW9uIHF1ZXVlLiBUaGlzIG9wZXJhdGlvblxuICAgICAqIGlzIE8oMSkuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgY29tcHV0ZWQgaW5kZXggb2YgdGhlIGJhdGNoIHdpdGggdGhlIGdpdmVuIGJhdGNoSWQsIGJhc2VkIG9uXG4gICAgICogdGhlIHN0YXRlIG9mIHRoZSBxdWV1ZS4gTm90ZSB0aGlzIGluZGV4IGNhbiBiZSBuZWdhdGl2ZSBpZiB0aGUgcmVxdWVzdGVkXG4gICAgICogYmF0Y2hJZCBoYXMgYWxyZWFkeSBiZWVuIHJlbXZvZWQgZnJvbSB0aGUgcXVldWUgb3IgcGFzdCB0aGUgZW5kIG9mIHRoZVxuICAgICAqIHF1ZXVlIGlmIHRoZSBiYXRjaElkIGlzIGxhcmdlciB0aGFuIHRoZSBsYXN0IGFkZGVkIGJhdGNoLlxuICAgICAqLyAgICBTcihlKSB7XG4gICAgICAgIGlmICgwID09PSB0aGlzLm11dGF0aW9uUXVldWUubGVuZ3RoKSBcbiAgICAgICAgLy8gQXMgYW4gaW5kZXggdGhpcyBpcyBwYXN0IHRoZSBlbmQgb2YgdGhlIHF1ZXVlXG4gICAgICAgIHJldHVybiAwO1xuICAgICAgICAvLyBFeGFtaW5lIHRoZSBmcm9udCBvZiB0aGUgcXVldWUgdG8gZmlndXJlIG91dCB0aGUgZGlmZmVyZW5jZSBiZXR3ZWVuIHRoZVxuICAgICAgICAvLyBiYXRjaElkIGFuZCBpbmRleGVzIGluIHRoZSBhcnJheS4gTm90ZSB0aGF0IHNpbmNlIHRoZSBxdWV1ZSBpcyBvcmRlcmVkXG4gICAgICAgIC8vIGJ5IGJhdGNoSWQsIGlmIHRoZSBmaXJzdCBiYXRjaCBoYXMgYSBsYXJnZXIgYmF0Y2hJZCB0aGVuIHRoZSByZXF1ZXN0ZWRcbiAgICAgICAgLy8gYmF0Y2hJZCBkb2Vzbid0IGV4aXN0IGluIHRoZSBxdWV1ZS5cbiAgICAgICAgICAgICAgICByZXR1cm4gZSAtIHRoaXMubXV0YXRpb25RdWV1ZVswXS5iYXRjaElkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBIHZlcnNpb24gb2YgbG9va3VwTXV0YXRpb25CYXRjaCB0aGF0IGRvZXNuJ3QgcmV0dXJuIGEgcHJvbWlzZSwgdGhpcyBtYWtlc1xuICAgICAqIG90aGVyIGZ1bmN0aW9ucyB0aGF0IHVzZXMgdGhpcyBjb2RlIGVhc2llciB0byByZWFkIGFuZCBtb3JlIGVmZmljZW50LlxuICAgICAqLyAgICB3cihlKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLlNyKGUpO1xuICAgICAgICBpZiAodCA8IDAgfHwgdCA+PSB0aGlzLm11dGF0aW9uUXVldWUubGVuZ3RoKSByZXR1cm4gbnVsbDtcbiAgICAgICAgcmV0dXJuIHRoaXMubXV0YXRpb25RdWV1ZVt0XTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFRoZSBtZW1vcnktb25seSBSZW1vdGVEb2N1bWVudENhY2hlIGZvciBJbmRleGVkRGIuIFRvIGNvbnN0cnVjdCwgaW52b2tlXG4gKiBgbmV3TWVtb3J5UmVtb3RlRG9jdW1lbnRDYWNoZSgpYC5cbiAqL1xuY2xhc3MgX19QUklWQVRFX01lbW9yeVJlbW90ZURvY3VtZW50Q2FjaGVJbXBsIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gc2l6ZXIgLSBVc2VkIHRvIGFzc2VzcyB0aGUgc2l6ZSBvZiBhIGRvY3VtZW50LiBGb3IgZWFnZXIgR0MsIHRoaXMgaXNcbiAgICAgKiBleHBlY3RlZCB0byBqdXN0IHJldHVybiAwIHRvIGF2b2lkIHVubmVjZXNzYXJpbHkgZG9pbmcgdGhlIHdvcmsgb2ZcbiAgICAgKiBjYWxjdWxhdGluZyB0aGUgc2l6ZS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMuQ3IgPSBlLCBcbiAgICAgICAgLyoqIFVuZGVybHlpbmcgY2FjaGUgb2YgZG9jdW1lbnRzIGFuZCB0aGVpciByZWFkIHRpbWVzLiAqL1xuICAgICAgICB0aGlzLmRvY3MgPSBmdW5jdGlvbiBfX1BSSVZBVEVfZG9jdW1lbnRFbnRyeU1hcCgpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgU29ydGVkTWFwKERvY3VtZW50S2V5LmNvbXBhcmF0b3IpO1xuICAgICAgICB9KCksIFxuICAgICAgICAvKiogU2l6ZSBvZiBhbGwgY2FjaGVkIGRvY3VtZW50cy4gKi9cbiAgICAgICAgdGhpcy5zaXplID0gMDtcbiAgICB9XG4gICAgc2V0SW5kZXhNYW5hZ2VyKGUpIHtcbiAgICAgICAgdGhpcy5pbmRleE1hbmFnZXIgPSBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIHRoZSBzdXBwbGllZCBlbnRyeSB0byB0aGUgY2FjaGUgYW5kIHVwZGF0ZXMgdGhlIGNhY2hlIHNpemUgYXMgYXBwcm9wcmlhdGUuXG4gICAgICpcbiAgICAgKiBBbGwgY2FsbHMgb2YgYGFkZEVudHJ5YCAgYXJlIHJlcXVpcmVkIHRvIGdvIHRocm91Z2ggdGhlIFJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyXG4gICAgICogcmV0dXJuZWQgYnkgYG5ld0NoYW5nZUJ1ZmZlcigpYC5cbiAgICAgKi8gICAgYWRkRW50cnkoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gdC5rZXksIHIgPSB0aGlzLmRvY3MuZ2V0KG4pLCBpID0gciA/IHIuc2l6ZSA6IDAsIHMgPSB0aGlzLkNyKHQpO1xuICAgICAgICByZXR1cm4gdGhpcy5kb2NzID0gdGhpcy5kb2NzLmluc2VydChuLCB7XG4gICAgICAgICAgICBkb2N1bWVudDogdC5tdXRhYmxlQ29weSgpLFxuICAgICAgICAgICAgc2l6ZTogc1xuICAgICAgICB9KSwgdGhpcy5zaXplICs9IHMgLSBpLCB0aGlzLmluZGV4TWFuYWdlci5hZGRUb0NvbGxlY3Rpb25QYXJlbnRJbmRleChlLCBuLnBhdGgucG9wTGFzdCgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyB0aGUgc3BlY2lmaWVkIGVudHJ5IGZyb20gdGhlIGNhY2hlIGFuZCB1cGRhdGVzIHRoZSBjYWNoZSBzaXplIGFzIGFwcHJvcHJpYXRlLlxuICAgICAqXG4gICAgICogQWxsIGNhbGxzIG9mIGByZW1vdmVFbnRyeWAgYXJlIHJlcXVpcmVkIHRvIGdvIHRocm91Z2ggdGhlIFJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyXG4gICAgICogcmV0dXJuZWQgYnkgYG5ld0NoYW5nZUJ1ZmZlcigpYC5cbiAgICAgKi8gICAgcmVtb3ZlRW50cnkoZSkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5kb2NzLmdldChlKTtcbiAgICAgICAgdCAmJiAodGhpcy5kb2NzID0gdGhpcy5kb2NzLnJlbW92ZShlKSwgdGhpcy5zaXplIC09IHQuc2l6ZSk7XG4gICAgfVxuICAgIGdldEVudHJ5KGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuZG9jcy5nZXQodCk7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShuID8gbi5kb2N1bWVudC5tdXRhYmxlQ29weSgpIDogTXV0YWJsZURvY3VtZW50Lm5ld0ludmFsaWREb2N1bWVudCh0KSk7XG4gICAgfVxuICAgIGdldEVudHJpZXMoZSwgdCkge1xuICAgICAgICBsZXQgbiA9IF9fUFJJVkFURV9tdXRhYmxlRG9jdW1lbnRNYXAoKTtcbiAgICAgICAgcmV0dXJuIHQuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5kb2NzLmdldChlKTtcbiAgICAgICAgICAgIG4gPSBuLmluc2VydChlLCB0ID8gdC5kb2N1bWVudC5tdXRhYmxlQ29weSgpIDogTXV0YWJsZURvY3VtZW50Lm5ld0ludmFsaWREb2N1bWVudChlKSk7XG4gICAgICAgIH0pKSwgUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUobik7XG4gICAgfVxuICAgIGdldERvY3VtZW50c01hdGNoaW5nUXVlcnkoZSwgdCwgbiwgcikge1xuICAgICAgICBsZXQgaSA9IF9fUFJJVkFURV9tdXRhYmxlRG9jdW1lbnRNYXAoKTtcbiAgICAgICAgLy8gRG9jdW1lbnRzIGFyZSBvcmRlcmVkIGJ5IGtleSwgc28gd2UgY2FuIHVzZSBhIHByZWZpeCBzY2FuIHRvIG5hcnJvdyBkb3duXG4gICAgICAgIC8vIHRoZSBkb2N1bWVudHMgd2UgbmVlZCB0byBtYXRjaCB0aGUgcXVlcnkgYWdhaW5zdC5cbiAgICAgICAgICAgICAgICBjb25zdCBzID0gdC5wYXRoLCBvID0gbmV3IERvY3VtZW50S2V5KHMuY2hpbGQoXCJcIikpLCBfID0gdGhpcy5kb2NzLmdldEl0ZXJhdG9yRnJvbShvKTtcbiAgICAgICAgZm9yICg7Xy5oYXNOZXh0KCk7ICkge1xuICAgICAgICAgICAgY29uc3Qge2tleTogZSwgdmFsdWU6IHtkb2N1bWVudDogb319ID0gXy5nZXROZXh0KCk7XG4gICAgICAgICAgICBpZiAoIXMuaXNQcmVmaXhPZihlLnBhdGgpKSBicmVhaztcbiAgICAgICAgICAgIGUucGF0aC5sZW5ndGggPiBzLmxlbmd0aCArIDEgfHwgKF9fUFJJVkFURV9pbmRleE9mZnNldENvbXBhcmF0b3IoX19QUklWQVRFX25ld0luZGV4T2Zmc2V0RnJvbURvY3VtZW50KG8pLCBuKSA8PSAwIHx8IChyLmhhcyhvLmtleSkgfHwgX19QUklWQVRFX3F1ZXJ5TWF0Y2hlcyh0LCBvKSkgJiYgKGkgPSBpLmluc2VydChvLmtleSwgby5tdXRhYmxlQ29weSgpKSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShpKTtcbiAgICB9XG4gICAgZ2V0QWxsRnJvbUNvbGxlY3Rpb25Hcm91cChlLCB0LCBuLCByKSB7XG4gICAgICAgIC8vIFRoaXMgbWV0aG9kIHNob3VsZCBvbmx5IGJlIGNhbGxlZCBmcm9tIHRoZSBJbmRleEJhY2tmaWxsZXIgaWYgcGVyc2lzdGVuY2VcbiAgICAgICAgLy8gaXMgZW5hYmxlZC5cbiAgICAgICAgZmFpbCgpO1xuICAgIH1cbiAgICB2cihlLCB0KSB7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaCh0aGlzLmRvY3MsIChlID0+IHQoZSkpKTtcbiAgICB9XG4gICAgbmV3Q2hhbmdlQnVmZmVyKGUpIHtcbiAgICAgICAgLy8gYHRyYWNrUmVtb3ZhbHNgIGlzIGlnbm9yZXMgc2luY2UgdGhlIE1lbW9yeVJlbW90ZURvY3VtZW50Q2FjaGUga2VlcHNcbiAgICAgICAgLy8gYSBzZXBhcmF0ZSBjaGFuZ2Vsb2cgYW5kIGRvZXMgbm90IG5lZWQgc3BlY2lhbCBoYW5kbGluZyBmb3IgcmVtb3ZhbHMuXG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX01lbW9yeVJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyKHRoaXMpO1xuICAgIH1cbiAgICBnZXRTaXplKGUpIHtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHRoaXMuc2l6ZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgbWVtb3J5LW9ubHkgUmVtb3RlRG9jdW1lbnRDYWNoZS5cbiAqXG4gKiBAcGFyYW0gc2l6ZXIgLSBVc2VkIHRvIGFzc2VzcyB0aGUgc2l6ZSBvZiBhIGRvY3VtZW50LiBGb3IgZWFnZXIgR0MsIHRoaXMgaXNcbiAqIGV4cGVjdGVkIHRvIGp1c3QgcmV0dXJuIDAgdG8gYXZvaWQgdW5uZWNlc3NhcmlseSBkb2luZyB0aGUgd29yayBvZlxuICogY2FsY3VsYXRpbmcgdGhlIHNpemUuXG4gKi9cbi8qKlxuICogSGFuZGxlcyB0aGUgZGV0YWlscyBvZiBhZGRpbmcgYW5kIHVwZGF0aW5nIGRvY3VtZW50cyBpbiB0aGUgTWVtb3J5UmVtb3RlRG9jdW1lbnRDYWNoZS5cbiAqL1xuY2xhc3MgX19QUklWQVRFX01lbW9yeVJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyIGV4dGVuZHMgUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXIge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5fciA9IGU7XG4gICAgfVxuICAgIGFwcGx5Q2hhbmdlcyhlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2hhbmdlcy5mb3JFYWNoKCgobiwgcikgPT4ge1xuICAgICAgICAgICAgci5pc1ZhbGlkRG9jdW1lbnQoKSA/IHQucHVzaCh0aGlzLl9yLmFkZEVudHJ5KGUsIHIpKSA6IHRoaXMuX3IucmVtb3ZlRW50cnkobik7XG4gICAgICAgIH0pKSwgUGVyc2lzdGVuY2VQcm9taXNlLndhaXRGb3IodCk7XG4gICAgfVxuICAgIGdldEZyb21DYWNoZShlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yLmdldEVudHJ5KGUsIHQpO1xuICAgIH1cbiAgICBnZXRBbGxGcm9tQ2FjaGUoZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fci5nZXRFbnRyaWVzKGUsIHQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgX19QUklWQVRFX01lbW9yeVRhcmdldENhY2hlIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2UgPSBlLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIE1hcHMgYSB0YXJnZXQgdG8gdGhlIGRhdGEgYWJvdXQgdGhhdCB0YXJnZXRcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuRnIgPSBuZXcgT2JqZWN0TWFwKChlID0+IF9fUFJJVkFURV9jYW5vbmlmeVRhcmdldChlKSksIF9fUFJJVkFURV90YXJnZXRFcXVhbHMpLCBcbiAgICAgICAgLyoqIFRoZSBsYXN0IHJlY2VpdmVkIHNuYXBzaG90IHZlcnNpb24uICovXG4gICAgICAgIHRoaXMubGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbiA9IFNuYXBzaG90VmVyc2lvbi5taW4oKSwgXG4gICAgICAgIC8qKiBUaGUgaGlnaGVzdCBudW1iZXJlZCB0YXJnZXQgSUQgZW5jb3VudGVyZWQuICovXG4gICAgICAgIHRoaXMuaGlnaGVzdFRhcmdldElkID0gMCwgXG4gICAgICAgIC8qKiBUaGUgaGlnaGVzdCBzZXF1ZW5jZSBudW1iZXIgZW5jb3VudGVyZWQuICovXG4gICAgICAgIHRoaXMuTXIgPSAwLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgb3JkZXJlZCBiaWRpcmVjdGlvbmFsIG1hcHBpbmcgYmV0d2VlbiBkb2N1bWVudHMgYW5kIHRoZSByZW1vdGUgdGFyZ2V0XG4gICAgICAgICAqIElEcy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuT3IgPSBuZXcgX19QUklWQVRFX1JlZmVyZW5jZVNldCwgdGhpcy50YXJnZXRDb3VudCA9IDAsIHRoaXMuTnIgPSBfX1BSSVZBVEVfVGFyZ2V0SWRHZW5lcmF0b3IuT24oKTtcbiAgICB9XG4gICAgZm9yRWFjaFRhcmdldChlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLkZyLmZvckVhY2goKChlLCBuKSA9PiB0KG4pKSksIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGdldExhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24oZSkge1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodGhpcy5sYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uKTtcbiAgICB9XG4gICAgZ2V0SGlnaGVzdFNlcXVlbmNlTnVtYmVyKGUpIHtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHRoaXMuTXIpO1xuICAgIH1cbiAgICBhbGxvY2F0ZVRhcmdldElkKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGlnaGVzdFRhcmdldElkID0gdGhpcy5Oci5uZXh0KCksIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHRoaXMuaGlnaGVzdFRhcmdldElkKTtcbiAgICB9XG4gICAgc2V0VGFyZ2V0c01ldGFkYXRhKGUsIHQsIG4pIHtcbiAgICAgICAgcmV0dXJuIG4gJiYgKHRoaXMubGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbiA9IG4pLCB0ID4gdGhpcy5NciAmJiAodGhpcy5NciA9IHQpLCBcbiAgICAgICAgUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAga24oZSkge1xuICAgICAgICB0aGlzLkZyLnNldChlLnRhcmdldCwgZSk7XG4gICAgICAgIGNvbnN0IHQgPSBlLnRhcmdldElkO1xuICAgICAgICB0ID4gdGhpcy5oaWdoZXN0VGFyZ2V0SWQgJiYgKHRoaXMuTnIgPSBuZXcgX19QUklWQVRFX1RhcmdldElkR2VuZXJhdG9yKHQpLCB0aGlzLmhpZ2hlc3RUYXJnZXRJZCA9IHQpLCBcbiAgICAgICAgZS5zZXF1ZW5jZU51bWJlciA+IHRoaXMuTXIgJiYgKHRoaXMuTXIgPSBlLnNlcXVlbmNlTnVtYmVyKTtcbiAgICB9XG4gICAgYWRkVGFyZ2V0RGF0YShlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmtuKHQpLCB0aGlzLnRhcmdldENvdW50ICs9IDEsIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHVwZGF0ZVRhcmdldERhdGEoZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5rbih0KSwgUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgcmVtb3ZlVGFyZ2V0RGF0YShlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLkZyLmRlbGV0ZSh0LnRhcmdldCksIHRoaXMuT3IuUnIodC50YXJnZXRJZCksIHRoaXMudGFyZ2V0Q291bnQgLT0gMSwgXG4gICAgICAgIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHJlbW92ZVRhcmdldHMoZSwgdCwgbikge1xuICAgICAgICBsZXQgciA9IDA7XG4gICAgICAgIGNvbnN0IGkgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuRnIuZm9yRWFjaCgoKHMsIG8pID0+IHtcbiAgICAgICAgICAgIG8uc2VxdWVuY2VOdW1iZXIgPD0gdCAmJiBudWxsID09PSBuLmdldChvLnRhcmdldElkKSAmJiAodGhpcy5Gci5kZWxldGUocyksIGkucHVzaCh0aGlzLnJlbW92ZU1hdGNoaW5nS2V5c0ZvclRhcmdldElkKGUsIG8udGFyZ2V0SWQpKSwgXG4gICAgICAgICAgICByKyspO1xuICAgICAgICB9KSksIFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKGkpLm5leHQoKCgpID0+IHIpKTtcbiAgICB9XG4gICAgZ2V0VGFyZ2V0Q291bnQoZSkge1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUodGhpcy50YXJnZXRDb3VudCk7XG4gICAgfVxuICAgIGdldFRhcmdldERhdGEoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5Gci5nZXQodCkgfHwgbnVsbDtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKG4pO1xuICAgIH1cbiAgICBhZGRNYXRjaGluZ0tleXMoZSwgdCwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy5Pci5Fcih0LCBuKSwgUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgcmVtb3ZlTWF0Y2hpbmdLZXlzKGUsIHQsIG4pIHtcbiAgICAgICAgdGhpcy5Pci5Bcih0LCBuKTtcbiAgICAgICAgY29uc3QgciA9IHRoaXMucGVyc2lzdGVuY2UucmVmZXJlbmNlRGVsZWdhdGUsIGkgPSBbXTtcbiAgICAgICAgcmV0dXJuIHIgJiYgdC5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIGkucHVzaChyLm1hcmtQb3RlbnRpYWxseU9ycGhhbmVkKGUsIHQpKTtcbiAgICAgICAgfSkpLCBQZXJzaXN0ZW5jZVByb21pc2Uud2FpdEZvcihpKTtcbiAgICB9XG4gICAgcmVtb3ZlTWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQoZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5Pci5Scih0KSwgUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgZ2V0TWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5Pci5tcih0KTtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKG4pO1xuICAgIH1cbiAgICBjb250YWluc0tleShlLCB0KSB7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh0aGlzLk9yLmNvbnRhaW5zS2V5KHQpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgbWVtb3J5LWJhY2tlZCBpbnN0YW5jZSBvZiBQZXJzaXN0ZW5jZS4gRGF0YSBpcyBzdG9yZWQgb25seSBpbiBSQU0gYW5kXG4gKiBub3QgcGVyc2lzdGVkIGFjcm9zcyBzZXNzaW9ucy5cbiAqL1xuY2xhc3MgX19QUklWQVRFX01lbW9yeVBlcnNpc3RlbmNlIHtcbiAgICAvKipcbiAgICAgKiBUaGUgY29uc3RydWN0b3IgYWNjZXB0cyBhIGZhY3RvcnkgZm9yIGNyZWF0aW5nIGEgcmVmZXJlbmNlIGRlbGVnYXRlLiBUaGlzXG4gICAgICogYWxsb3dzIGJvdGggdGhlIGRlbGVnYXRlIGFuZCB0aGlzIGluc3RhbmNlIHRvIGhhdmUgc3Ryb25nIHJlZmVyZW5jZXMgdG9cbiAgICAgKiBlYWNoIG90aGVyIHdpdGhvdXQgaGF2aW5nIG51bGxhYmxlIGZpZWxkcyB0aGF0IHdvdWxkIHRoZW4gbmVlZCB0byBiZVxuICAgICAqIGNoZWNrZWQgb3IgYXNzZXJ0ZWQgb24gZXZlcnkgYWNjZXNzLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgdGhpcy5CciA9IHt9LCB0aGlzLm92ZXJsYXlzID0ge30sIHRoaXMuTHIgPSBuZXcgX19QUklWQVRFX0xpc3RlblNlcXVlbmNlKDApLCB0aGlzLmtyID0gITEsIFxuICAgICAgICB0aGlzLmtyID0gITAsIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUgPSBlKHRoaXMpLCB0aGlzLnFyID0gbmV3IF9fUFJJVkFURV9NZW1vcnlUYXJnZXRDYWNoZSh0aGlzKTtcbiAgICAgICAgdGhpcy5pbmRleE1hbmFnZXIgPSBuZXcgX19QUklWQVRFX01lbW9yeUluZGV4TWFuYWdlciwgdGhpcy5yZW1vdGVEb2N1bWVudENhY2hlID0gZnVuY3Rpb24gX19QUklWQVRFX25ld01lbW9yeVJlbW90ZURvY3VtZW50Q2FjaGUoZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfTWVtb3J5UmVtb3RlRG9jdW1lbnRDYWNoZUltcGwoZSk7XG4gICAgICAgIH0oKGUgPT4gdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZS5RcihlKSkpLCB0aGlzLnNlcmlhbGl6ZXIgPSBuZXcgX19QUklWQVRFX0xvY2FsU2VyaWFsaXplcih0KSwgXG4gICAgICAgIHRoaXMuS3IgPSBuZXcgX19QUklWQVRFX01lbW9yeUJ1bmRsZUNhY2hlKHRoaXMuc2VyaWFsaXplcik7XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHNodXRkb3duKCkge1xuICAgICAgICAvLyBObyBkdXJhYmxlIHN0YXRlIHRvIGVuc3VyZSBpcyBjbG9zZWQgb24gc2h1dGRvd24uXG4gICAgICAgIHJldHVybiB0aGlzLmtyID0gITEsIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBnZXQgc3RhcnRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMua3I7XG4gICAgfVxuICAgIHNldERhdGFiYXNlRGVsZXRlZExpc3RlbmVyKCkge1xuICAgICAgICAvLyBObyBvcC5cbiAgICB9XG4gICAgc2V0TmV0d29ya0VuYWJsZWQoKSB7XG4gICAgICAgIC8vIE5vIG9wLlxuICAgIH1cbiAgICBnZXRJbmRleE1hbmFnZXIoZSkge1xuICAgICAgICAvLyBXZSBkbyBub3QgY3VycmVudGx5IHN1cHBvcnQgaW5kaWNlcyBmb3IgbWVtb3J5IHBlcnNpc3RlbmNlLCBzbyB3ZSBjYW5cbiAgICAgICAgLy8gcmV0dXJuIHRoZSBzYW1lIHNoYXJlZCBpbnN0YW5jZSBvZiB0aGUgbWVtb3J5IGluZGV4IG1hbmFnZXIuXG4gICAgICAgIHJldHVybiB0aGlzLmluZGV4TWFuYWdlcjtcbiAgICB9XG4gICAgZ2V0RG9jdW1lbnRPdmVybGF5Q2FjaGUoZSkge1xuICAgICAgICBsZXQgdCA9IHRoaXMub3ZlcmxheXNbZS50b0tleSgpXTtcbiAgICAgICAgcmV0dXJuIHQgfHwgKHQgPSBuZXcgX19QUklWQVRFX01lbW9yeURvY3VtZW50T3ZlcmxheUNhY2hlLCB0aGlzLm92ZXJsYXlzW2UudG9LZXkoKV0gPSB0KSwgXG4gICAgICAgIHQ7XG4gICAgfVxuICAgIGdldE11dGF0aW9uUXVldWUoZSwgdCkge1xuICAgICAgICBsZXQgbiA9IHRoaXMuQnJbZS50b0tleSgpXTtcbiAgICAgICAgcmV0dXJuIG4gfHwgKG4gPSBuZXcgX19QUklWQVRFX01lbW9yeU11dGF0aW9uUXVldWUodCwgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZSksIHRoaXMuQnJbZS50b0tleSgpXSA9IG4pLCBcbiAgICAgICAgbjtcbiAgICB9XG4gICAgZ2V0VGFyZ2V0Q2FjaGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnFyO1xuICAgIH1cbiAgICBnZXRSZW1vdGVEb2N1bWVudENhY2hlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZW1vdGVEb2N1bWVudENhY2hlO1xuICAgIH1cbiAgICBnZXRCdW5kbGVDYWNoZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuS3I7XG4gICAgfVxuICAgIHJ1blRyYW5zYWN0aW9uKGUsIHQsIG4pIHtcbiAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiTWVtb3J5UGVyc2lzdGVuY2VcIiwgXCJTdGFydGluZyB0cmFuc2FjdGlvbjpcIiwgZSk7XG4gICAgICAgIGNvbnN0IHIgPSBuZXcgX19QUklWQVRFX01lbW9yeVRyYW5zYWN0aW9uKHRoaXMuTHIubmV4dCgpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUuJHIoKSwgbihyKS5uZXh0KChlID0+IHRoaXMucmVmZXJlbmNlRGVsZWdhdGUuVXIocikubmV4dCgoKCkgPT4gZSkpKSkudG9Qcm9taXNlKCkudGhlbigoZSA9PiAoci5yYWlzZU9uQ29tbWl0dGVkRXZlbnQoKSwgXG4gICAgICAgIGUpKSk7XG4gICAgfVxuICAgIFdyKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5vcihPYmplY3QudmFsdWVzKHRoaXMuQnIpLm1hcCgobiA9PiAoKSA9PiBuLmNvbnRhaW5zS2V5KGUsIHQpKSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBNZW1vcnkgcGVyc2lzdGVuY2UgaXMgbm90IGFjdHVhbGx5IHRyYW5zYWN0aW9uYWwsIGJ1dCBmdXR1cmUgaW1wbGVtZW50YXRpb25zXG4gKiBtYXkgaGF2ZSB0cmFuc2FjdGlvbi1zY29wZWQgc3RhdGUuXG4gKi8gY2xhc3MgX19QUklWQVRFX01lbW9yeVRyYW5zYWN0aW9uIGV4dGVuZHMgUGVyc2lzdGVuY2VUcmFuc2FjdGlvbiB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmN1cnJlbnRTZXF1ZW5jZU51bWJlciA9IGU7XG4gICAgfVxufVxuXG5jbGFzcyBfX1BSSVZBVEVfTWVtb3J5RWFnZXJEZWxlZ2F0ZSB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLnBlcnNpc3RlbmNlID0gZSwgXG4gICAgICAgIC8qKiBUcmFja3MgYWxsIGRvY3VtZW50cyB0aGF0IGFyZSBhY3RpdmUgaW4gUXVlcnkgdmlld3MuICovXG4gICAgICAgIHRoaXMuR3IgPSBuZXcgX19QUklWQVRFX1JlZmVyZW5jZVNldCwgXG4gICAgICAgIC8qKiBUaGUgbGlzdCBvZiBkb2N1bWVudHMgdGhhdCBhcmUgcG90ZW50aWFsbHkgR0NlZCBhZnRlciBlYWNoIHRyYW5zYWN0aW9uLiAqL1xuICAgICAgICB0aGlzLnpyID0gbnVsbDtcbiAgICB9XG4gICAgc3RhdGljIGpyKGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfTWVtb3J5RWFnZXJEZWxlZ2F0ZShlKTtcbiAgICB9XG4gICAgZ2V0IEhyKCkge1xuICAgICAgICBpZiAodGhpcy56cikgcmV0dXJuIHRoaXMuenI7XG4gICAgICAgIHRocm93IGZhaWwoKTtcbiAgICB9XG4gICAgYWRkUmVmZXJlbmNlKGUsIHQsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuR3IuYWRkUmVmZXJlbmNlKG4sIHQpLCB0aGlzLkhyLmRlbGV0ZShuLnRvU3RyaW5nKCkpLCBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICByZW1vdmVSZWZlcmVuY2UoZSwgdCwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy5Hci5yZW1vdmVSZWZlcmVuY2UobiwgdCksIHRoaXMuSHIuYWRkKG4udG9TdHJpbmcoKSksIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIG1hcmtQb3RlbnRpYWxseU9ycGhhbmVkKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuSHIuYWRkKHQudG9TdHJpbmcoKSksIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHJlbW92ZVRhcmdldChlLCB0KSB7XG4gICAgICAgIHRoaXMuR3IuUnIodC50YXJnZXRJZCkuZm9yRWFjaCgoZSA9PiB0aGlzLkhyLmFkZChlLnRvU3RyaW5nKCkpKSk7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLnBlcnNpc3RlbmNlLmdldFRhcmdldENhY2hlKCk7XG4gICAgICAgIHJldHVybiBuLmdldE1hdGNoaW5nS2V5c0ZvclRhcmdldElkKGUsIHQudGFyZ2V0SWQpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgZS5mb3JFYWNoKChlID0+IHRoaXMuSHIuYWRkKGUudG9TdHJpbmcoKSkpKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IG4ucmVtb3ZlVGFyZ2V0RGF0YShlLCB0KSkpO1xuICAgIH1cbiAgICAkcigpIHtcbiAgICAgICAgdGhpcy56ciA9IG5ldyBTZXQ7XG4gICAgfVxuICAgIFVyKGUpIHtcbiAgICAgICAgLy8gUmVtb3ZlIG5ld2x5IG9ycGhhbmVkIGRvY3VtZW50cy5cbiAgICAgICAgY29uc3QgdCA9IHRoaXMucGVyc2lzdGVuY2UuZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSgpLm5ld0NoYW5nZUJ1ZmZlcigpO1xuICAgICAgICByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2godGhpcy5IciwgKG4gPT4ge1xuICAgICAgICAgICAgY29uc3QgciA9IERvY3VtZW50S2V5LmZyb21QYXRoKG4pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuSnIoZSwgcikubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgZSB8fCB0LnJlbW92ZUVudHJ5KHIsIFNuYXBzaG90VmVyc2lvbi5taW4oKSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiAodGhpcy56ciA9IG51bGwsIHQuYXBwbHkoZSkpKSk7XG4gICAgfVxuICAgIHVwZGF0ZUxpbWJvRG9jdW1lbnQoZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5KcihlLCB0KS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIGUgPyB0aGlzLkhyLmRlbGV0ZSh0LnRvU3RyaW5nKCkpIDogdGhpcy5Ici5hZGQodC50b1N0cmluZygpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBRcihlKSB7XG4gICAgICAgIC8vIEZvciBlYWdlciBHQywgd2UgZG9uJ3QgY2FyZSBhYm91dCB0aGUgZG9jdW1lbnQgc2l6ZSwgdGhlcmUgYXJlIG5vIHNpemUgdGhyZXNob2xkcy5cbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIEpyKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5vcihbICgpID0+IFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHRoaXMuR3IuY29udGFpbnNLZXkodCkpLCAoKSA9PiB0aGlzLnBlcnNpc3RlbmNlLmdldFRhcmdldENhY2hlKCkuY29udGFpbnNLZXkoZSwgdCksICgpID0+IHRoaXMucGVyc2lzdGVuY2UuV3IoZSwgdCkgXSk7XG4gICAgfVxufVxuXG5jbGFzcyBfX1BSSVZBVEVfTWVtb3J5THJ1RGVsZWdhdGUge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZSA9IGUsIHRoaXMuWXIgPSBuZXcgT2JqZWN0TWFwKChlID0+IF9fUFJJVkFURV9lbmNvZGVSZXNvdXJjZVBhdGgoZS5wYXRoKSksICgoZSwgdCkgPT4gZS5pc0VxdWFsKHQpKSksIFxuICAgICAgICB0aGlzLmdhcmJhZ2VDb2xsZWN0b3IgPSBfX1BSSVZBVEVfbmV3THJ1R2FyYmFnZUNvbGxlY3Rvcih0aGlzLCB0KTtcbiAgICB9XG4gICAgc3RhdGljIGpyKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfTWVtb3J5THJ1RGVsZWdhdGUoZSwgdCk7XG4gICAgfVxuICAgIC8vIE5vLW9wcywgcHJlc2VudCBzbyBtZW1vcnkgcGVyc2lzdGVuY2UgZG9lc24ndCBoYXZlIHRvIGNhcmUgd2hpY2ggZGVsZWdhdGVcbiAgICAvLyBpdCBoYXMuXG4gICAgJHIoKSB7fVxuICAgIFVyKGUpIHtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGZvckVhY2hUYXJnZXQoZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZS5nZXRUYXJnZXRDYWNoZSgpLmZvckVhY2hUYXJnZXQoZSwgdCk7XG4gICAgfVxuICAgIGpuKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuWW4oZSk7XG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLmdldFRhcmdldENhY2hlKCkuZ2V0VGFyZ2V0Q291bnQoZSkubmV4dCgoZSA9PiB0Lm5leHQoKHQgPT4gZSArIHQpKSkpO1xuICAgIH1cbiAgICBZbihlKSB7XG4gICAgICAgIGxldCB0ID0gMDtcbiAgICAgICAgcmV0dXJuIHRoaXMuSG4oZSwgKGUgPT4ge1xuICAgICAgICAgICAgdCsrO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gdCkpO1xuICAgIH1cbiAgICBIbihlLCB0KSB7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaCh0aGlzLllyLCAoKG4sIHIpID0+IHRoaXMuWG4oZSwgbiwgcikubmV4dCgoZSA9PiBlID8gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKSA6IHQocikpKSkpO1xuICAgIH1cbiAgICByZW1vdmVUYXJnZXRzKGUsIHQsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2UuZ2V0VGFyZ2V0Q2FjaGUoKS5yZW1vdmVUYXJnZXRzKGUsIHQsIG4pO1xuICAgIH1cbiAgICByZW1vdmVPcnBoYW5lZERvY3VtZW50cyhlLCB0KSB7XG4gICAgICAgIGxldCBuID0gMDtcbiAgICAgICAgY29uc3QgciA9IHRoaXMucGVyc2lzdGVuY2UuZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSgpLCBpID0gci5uZXdDaGFuZ2VCdWZmZXIoKTtcbiAgICAgICAgcmV0dXJuIHIudnIoZSwgKHIgPT4gdGhpcy5YbihlLCByLCB0KS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIGUgfHwgKG4rKywgaS5yZW1vdmVFbnRyeShyLCBTbmFwc2hvdFZlcnNpb24ubWluKCkpKTtcbiAgICAgICAgfSkpKSkubmV4dCgoKCkgPT4gaS5hcHBseShlKSkpLm5leHQoKCgpID0+IG4pKTtcbiAgICB9XG4gICAgbWFya1BvdGVudGlhbGx5T3JwaGFuZWQoZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5Zci5zZXQodCwgZS5jdXJyZW50U2VxdWVuY2VOdW1iZXIpLCBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICByZW1vdmVUYXJnZXQoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gdC53aXRoU2VxdWVuY2VOdW1iZXIoZS5jdXJyZW50U2VxdWVuY2VOdW1iZXIpO1xuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZS5nZXRUYXJnZXRDYWNoZSgpLnVwZGF0ZVRhcmdldERhdGEoZSwgbik7XG4gICAgfVxuICAgIGFkZFJlZmVyZW5jZShlLCB0LCBuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLllyLnNldChuLCBlLmN1cnJlbnRTZXF1ZW5jZU51bWJlciksIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHJlbW92ZVJlZmVyZW5jZShlLCB0LCBuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLllyLnNldChuLCBlLmN1cnJlbnRTZXF1ZW5jZU51bWJlciksIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHVwZGF0ZUxpbWJvRG9jdW1lbnQoZSwgdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5Zci5zZXQodCwgZS5jdXJyZW50U2VxdWVuY2VOdW1iZXIpLCBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBRcihlKSB7XG4gICAgICAgIGxldCB0ID0gZS5rZXkudG9TdHJpbmcoKS5sZW5ndGg7XG4gICAgICAgIHJldHVybiBlLmlzRm91bmREb2N1bWVudCgpICYmICh0ICs9IF9fUFJJVkFURV9lc3RpbWF0ZUJ5dGVTaXplKGUuZGF0YS52YWx1ZSkpLCB0O1xuICAgIH1cbiAgICBYbihlLCB0LCBuKSB7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2Uub3IoWyAoKSA9PiB0aGlzLnBlcnNpc3RlbmNlLldyKGUsIHQpLCAoKSA9PiB0aGlzLnBlcnNpc3RlbmNlLmdldFRhcmdldENhY2hlKCkuY29udGFpbnNLZXkoZSwgdCksICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLllyLmdldCh0KTtcbiAgICAgICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSh2b2lkIDAgIT09IGUgJiYgZSA+IG4pO1xuICAgICAgICB9IF0pO1xuICAgIH1cbiAgICBnZXRDYWNoZVNpemUoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZS5nZXRSZW1vdGVEb2N1bWVudENhY2hlKCkuZ2V0U2l6ZShlKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogUGVyZm9ybXMgZGF0YWJhc2UgY3JlYXRpb24gYW5kIHNjaGVtYSB1cGdyYWRlcy4gKi8gY2xhc3MgX19QUklWQVRFX1NjaGVtYUNvbnZlcnRlciB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLnNlcmlhbGl6ZXIgPSBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtcyBkYXRhYmFzZSBjcmVhdGlvbiBhbmQgc2NoZW1hIHVwZ3JhZGVzLlxuICAgICAqXG4gICAgICogTm90ZSB0aGF0IGluIHByb2R1Y3Rpb24sIHRoaXMgbWV0aG9kIGlzIG9ubHkgZXZlciB1c2VkIHRvIHVwZ3JhZGUgdGhlIHNjaGVtYVxuICAgICAqIHRvIFNDSEVNQV9WRVJTSU9OLiBEaWZmZXJlbnQgdmFsdWVzIG9mIHRvVmVyc2lvbiBhcmUgb25seSB1c2VkIGZvciB0ZXN0aW5nXG4gICAgICogYW5kIGxvY2FsIGZlYXR1cmUgZGV2ZWxvcG1lbnQuXG4gICAgICovICAgIE4oZSwgdCwgbiwgcikge1xuICAgICAgICBjb25zdCBpID0gbmV3IF9fUFJJVkFURV9TaW1wbGVEYlRyYW5zYWN0aW9uKFwiY3JlYXRlT3JVcGdyYWRlXCIsIHQpO1xuICAgICAgICBuIDwgMSAmJiByID49IDEgJiYgKCFmdW5jdGlvbiBfX1BSSVZBVEVfY3JlYXRlUHJpbWFyeUNsaWVudFN0b3JlKGUpIHtcbiAgICAgICAgICAgIGUuY3JlYXRlT2JqZWN0U3RvcmUoXCJvd25lclwiKTtcbiAgICAgICAgfShlKSwgZnVuY3Rpb24gX19QUklWQVRFX2NyZWF0ZU11dGF0aW9uUXVldWUoZSkge1xuICAgICAgICAgICAgZS5jcmVhdGVPYmplY3RTdG9yZShcIm11dGF0aW9uUXVldWVzXCIsIHtcbiAgICAgICAgICAgICAgICBrZXlQYXRoOiBcInVzZXJJZFwiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGUuY3JlYXRlT2JqZWN0U3RvcmUoXCJtdXRhdGlvbnNcIiwge1xuICAgICAgICAgICAgICAgIGtleVBhdGg6IFwiYmF0Y2hJZFwiLFxuICAgICAgICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6ICEwXG4gICAgICAgICAgICB9KS5jcmVhdGVJbmRleChcInVzZXJNdXRhdGlvbnNJbmRleFwiLCBNLCB7XG4gICAgICAgICAgICAgICAgdW5pcXVlOiAhMFxuICAgICAgICAgICAgfSksIGUuY3JlYXRlT2JqZWN0U3RvcmUoXCJkb2N1bWVudE11dGF0aW9uc1wiKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIFVwZ3JhZGUgZnVuY3Rpb24gdG8gbWlncmF0ZSB0aGUgJ211dGF0aW9ucycgc3RvcmUgZnJvbSBWMSB0byBWMy4gTG9hZHNcbiAqIGFuZCByZXdyaXRlcyBhbGwgZGF0YS5cbiAqLyAoZSksIF9fUFJJVkFURV9jcmVhdGVRdWVyeUNhY2hlKGUpLCBmdW5jdGlvbiBfX1BSSVZBVEVfY3JlYXRlTGVnYWN5UmVtb3RlRG9jdW1lbnRDYWNoZShlKSB7XG4gICAgICAgICAgICBlLmNyZWF0ZU9iamVjdFN0b3JlKFwicmVtb3RlRG9jdW1lbnRzXCIpO1xuICAgICAgICB9KGUpKTtcbiAgICAgICAgLy8gTWlncmF0aW9uIDIgdG8gcG9wdWxhdGUgdGhlIHRhcmdldEdsb2JhbCBvYmplY3Qgbm8gbG9uZ2VyIG5lZWRlZCBzaW5jZVxuICAgICAgICAvLyBtaWdyYXRpb24gMyB1bmNvbmRpdGlvbmFsbHkgY2xlYXJzIGl0LlxuICAgICAgICAgICAgICAgIGxldCBzID0gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgcmV0dXJuIG4gPCAzICYmIHIgPj0gMyAmJiAoXG4gICAgICAgIC8vIEJyYW5kIG5ldyBjbGllbnRzIGRvbid0IG5lZWQgdG8gZHJvcCBhbmQgcmVjcmVhdGUtLW9ubHkgY2xpZW50cyB0aGF0XG4gICAgICAgIC8vIHBvdGVudGlhbGx5IGhhdmUgY29ycnVwdCBkYXRhLlxuICAgICAgICAwICE9PSBuICYmICghZnVuY3Rpb24gX19QUklWQVRFX2Ryb3BRdWVyeUNhY2hlKGUpIHtcbiAgICAgICAgICAgIGUuZGVsZXRlT2JqZWN0U3RvcmUoXCJ0YXJnZXREb2N1bWVudHNcIiksIGUuZGVsZXRlT2JqZWN0U3RvcmUoXCJ0YXJnZXRzXCIpLCBlLmRlbGV0ZU9iamVjdFN0b3JlKFwidGFyZ2V0R2xvYmFsXCIpO1xuICAgICAgICB9KGUpLCBfX1BSSVZBVEVfY3JlYXRlUXVlcnlDYWNoZShlKSksIHMgPSBzLm5leHQoKCgpID0+IFxuICAgICAgICAvKipcbiAqIENyZWF0ZXMgdGhlIHRhcmdldCBnbG9iYWwgc2luZ2xldG9uIHJvdy5cbiAqXG4gKiBAcGFyYW0gdHhuIC0gVGhlIHZlcnNpb24gdXBncmFkZSB0cmFuc2FjdGlvbiBmb3IgaW5kZXhlZGRiXG4gKi9cbiAgICAgICAgZnVuY3Rpb24gX19QUklWQVRFX3dyaXRlRW1wdHlUYXJnZXRHbG9iYWxFbnRyeShlKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gZS5zdG9yZShcInRhcmdldEdsb2JhbFwiKSwgbiA9IHtcbiAgICAgICAgICAgICAgICBoaWdoZXN0VGFyZ2V0SWQ6IDAsXG4gICAgICAgICAgICAgICAgaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyOiAwLFxuICAgICAgICAgICAgICAgIGxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb246IFNuYXBzaG90VmVyc2lvbi5taW4oKS50b1RpbWVzdGFtcCgpLFxuICAgICAgICAgICAgICAgIHRhcmdldENvdW50OiAwXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIHQucHV0KFwidGFyZ2V0R2xvYmFsS2V5XCIsIG4pO1xuICAgICAgICB9KGkpKSkpLCBuIDwgNCAmJiByID49IDQgJiYgKDAgIT09IG4gJiYgKFxuICAgICAgICAvLyBTY2hlbWEgdmVyc2lvbiAzIHVzZXMgYXV0by1nZW5lcmF0ZWQga2V5cyB0byBnZW5lcmF0ZSBnbG9iYWxseSB1bmlxdWVcbiAgICAgICAgLy8gbXV0YXRpb24gYmF0Y2ggSURzICh0aGlzIHdhcyBwcmV2aW91c2x5IGVuc3VyZWQgaW50ZXJuYWxseSBieSB0aGVcbiAgICAgICAgLy8gY2xpZW50KS4gVG8gbWlncmF0ZSB0byB0aGUgbmV3IHNjaGVtYSwgd2UgaGF2ZSB0byByZWFkIGFsbCBtdXRhdGlvbnNcbiAgICAgICAgLy8gYW5kIHdyaXRlIHRoZW0gYmFjayBvdXQuIFdlIHByZXNlcnZlIHRoZSBleGlzdGluZyBiYXRjaCBJRHMgdG8gZ3VhcmFudGVlXG4gICAgICAgIC8vIGNvbnNpc3RlbmN5IHdpdGggb3RoZXIgb2JqZWN0IHN0b3Jlcy4gQW55IGZ1cnRoZXIgbXV0YXRpb24gYmF0Y2ggSURzIHdpbGxcbiAgICAgICAgLy8gYmUgYXV0by1nZW5lcmF0ZWQuXG4gICAgICAgIHMgPSBzLm5leHQoKCgpID0+IGZ1bmN0aW9uIF9fUFJJVkFURV91cGdyYWRlTXV0YXRpb25CYXRjaFNjaGVtYUFuZE1pZ3JhdGVEYXRhKGUsIHQpIHtcbiAgICAgICAgICAgIHJldHVybiB0LnN0b3JlKFwibXV0YXRpb25zXCIpLlcoKS5uZXh0KChuID0+IHtcbiAgICAgICAgICAgICAgICBlLmRlbGV0ZU9iamVjdFN0b3JlKFwibXV0YXRpb25zXCIpO1xuICAgICAgICAgICAgICAgIGUuY3JlYXRlT2JqZWN0U3RvcmUoXCJtdXRhdGlvbnNcIiwge1xuICAgICAgICAgICAgICAgICAgICBrZXlQYXRoOiBcImJhdGNoSWRcIixcbiAgICAgICAgICAgICAgICAgICAgYXV0b0luY3JlbWVudDogITBcbiAgICAgICAgICAgICAgICB9KS5jcmVhdGVJbmRleChcInVzZXJNdXRhdGlvbnNJbmRleFwiLCBNLCB7XG4gICAgICAgICAgICAgICAgICAgIHVuaXF1ZTogITBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCByID0gdC5zdG9yZShcIm11dGF0aW9uc1wiKSwgaSA9IG4ubWFwKChlID0+IHIucHV0KGUpKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKGkpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KGUsIGkpKSkpLCBzID0gcy5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICAhZnVuY3Rpb24gX19QUklWQVRFX2NyZWF0ZUNsaWVudE1ldGFkYXRhU3RvcmUoZSkge1xuICAgICAgICAgICAgICAgIGUuY3JlYXRlT2JqZWN0U3RvcmUoXCJjbGllbnRNZXRhZGF0YVwiLCB7XG4gICAgICAgICAgICAgICAgICAgIGtleVBhdGg6IFwiY2xpZW50SWRcIlxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfShlKTtcbiAgICAgICAgfSkpKSwgbiA8IDUgJiYgciA+PSA1ICYmIChzID0gcy5uZXh0KCgoKSA9PiB0aGlzLlpyKGkpKSkpLCBuIDwgNiAmJiByID49IDYgJiYgKHMgPSBzLm5leHQoKCgpID0+IChmdW5jdGlvbiBfX1BSSVZBVEVfY3JlYXRlRG9jdW1lbnRHbG9iYWxTdG9yZShlKSB7XG4gICAgICAgICAgICBlLmNyZWF0ZU9iamVjdFN0b3JlKFwicmVtb3RlRG9jdW1lbnRHbG9iYWxcIik7XG4gICAgICAgIH0oZSksIHRoaXMuWHIoaSkpKSkpLCBuIDwgNyAmJiByID49IDcgJiYgKHMgPSBzLm5leHQoKCgpID0+IHRoaXMuZWkoaSkpKSksIG4gPCA4ICYmIHIgPj0gOCAmJiAocyA9IHMubmV4dCgoKCkgPT4gdGhpcy50aShlLCBpKSkpKSwgXG4gICAgICAgIG4gPCA5ICYmIHIgPj0gOSAmJiAocyA9IHMubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgLy8gTXVsdGktVGFiIHVzZWQgdG8gbWFuYWdlIGl0cyBvd24gY2hhbmdlbG9nLCBidXQgdGhpcyBoYXMgYmVlbiBtb3ZlZFxuICAgICAgICAgICAgLy8gdG8gdGhlIERiUmVtb3RlRG9jdW1lbnQgb2JqZWN0IHN0b3JlIGl0c2VsZi4gU2luY2UgdGhlIHByZXZpb3VzIGNoYW5nZVxuICAgICAgICAgICAgLy8gbG9nIG9ubHkgY29udGFpbmVkIHRyYW5zaWVudCBkYXRhLCB3ZSBjYW4gZHJvcCBpdHMgb2JqZWN0IHN0b3JlLlxuICAgICAgICAgICAgIWZ1bmN0aW9uIF9fUFJJVkFURV9kcm9wUmVtb3RlRG9jdW1lbnRDaGFuZ2VzU3RvcmUoZSkge1xuICAgICAgICAgICAgICAgIGUub2JqZWN0U3RvcmVOYW1lcy5jb250YWlucyhcInJlbW90ZURvY3VtZW50Q2hhbmdlc1wiKSAmJiBlLmRlbGV0ZU9iamVjdFN0b3JlKFwicmVtb3RlRG9jdW1lbnRDaGFuZ2VzXCIpO1xuICAgICAgICAgICAgfShlKTtcbiAgICAgICAgICAgIC8vIE5vdGU6IFNjaGVtYSB2ZXJzaW9uIDkgdXNlZCB0byBjcmVhdGUgYSByZWFkIHRpbWUgaW5kZXggZm9yIHRoZVxuICAgICAgICAgICAgLy8gUmVtb3RlRG9jdW1lbnRDYWNoZS4gVGhpcyBpcyBub3cgZG9uZSB3aXRoIHNjaGVtYSB2ZXJzaW9uIDEzLlxuICAgICAgICAgICAgICAgIH0pKSksIG4gPCAxMCAmJiByID49IDEwICYmIChzID0gcy5uZXh0KCgoKSA9PiB0aGlzLm5pKGkpKSkpLCBuIDwgMTEgJiYgciA+PSAxMSAmJiAocyA9IHMubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgIWZ1bmN0aW9uIF9fUFJJVkFURV9jcmVhdGVCdW5kbGVzU3RvcmUoZSkge1xuICAgICAgICAgICAgICAgIGUuY3JlYXRlT2JqZWN0U3RvcmUoXCJidW5kbGVzXCIsIHtcbiAgICAgICAgICAgICAgICAgICAga2V5UGF0aDogXCJidW5kbGVJZFwiXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KGUpLCBmdW5jdGlvbiBfX1BSSVZBVEVfY3JlYXRlTmFtZWRRdWVyaWVzU3RvcmUoZSkge1xuICAgICAgICAgICAgICAgIGUuY3JlYXRlT2JqZWN0U3RvcmUoXCJuYW1lZFF1ZXJpZXNcIiwge1xuICAgICAgICAgICAgICAgICAgICBrZXlQYXRoOiBcIm5hbWVcIlxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfShlKTtcbiAgICAgICAgfSkpKSwgbiA8IDEyICYmIHIgPj0gMTIgJiYgKHMgPSBzLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgICFmdW5jdGlvbiBfX1BSSVZBVEVfY3JlYXRlRG9jdW1lbnRPdmVybGF5U3RvcmUoZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBlLmNyZWF0ZU9iamVjdFN0b3JlKFwiZG9jdW1lbnRPdmVybGF5c1wiLCB7XG4gICAgICAgICAgICAgICAgICAgIGtleVBhdGg6IEdcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0LmNyZWF0ZUluZGV4KFwiY29sbGVjdGlvblBhdGhPdmVybGF5SW5kZXhcIiwgeiwge1xuICAgICAgICAgICAgICAgICAgICB1bmlxdWU6ICExXG4gICAgICAgICAgICAgICAgfSksIHQuY3JlYXRlSW5kZXgoXCJjb2xsZWN0aW9uR3JvdXBPdmVybGF5SW5kZXhcIiwgaiwge1xuICAgICAgICAgICAgICAgICAgICB1bmlxdWU6ICExXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KGUpO1xuICAgICAgICB9KSkpLCBuIDwgMTMgJiYgciA+PSAxMyAmJiAocyA9IHMubmV4dCgoKCkgPT4gZnVuY3Rpb24gX19QUklWQVRFX2NyZWF0ZVJlbW90ZURvY3VtZW50Q2FjaGUoZSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IGUuY3JlYXRlT2JqZWN0U3RvcmUoXCJyZW1vdGVEb2N1bWVudHNWMTRcIiwge1xuICAgICAgICAgICAgICAgIGtleVBhdGg6IE9cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdC5jcmVhdGVJbmRleChcImRvY3VtZW50S2V5SW5kZXhcIiwgTiksIHQuY3JlYXRlSW5kZXgoXCJjb2xsZWN0aW9uR3JvdXBJbmRleFwiLCBCKTtcbiAgICAgICAgfShlKSkpLm5leHQoKCgpID0+IHRoaXMucmkoZSwgaSkpKS5uZXh0KCgoKSA9PiBlLmRlbGV0ZU9iamVjdFN0b3JlKFwicmVtb3RlRG9jdW1lbnRzXCIpKSkpLCBcbiAgICAgICAgbiA8IDE0ICYmIHIgPj0gMTQgJiYgKHMgPSBzLm5leHQoKCgpID0+IHRoaXMuaWkoZSwgaSkpKSksIG4gPCAxNSAmJiByID49IDE1ICYmIChzID0gcy5uZXh0KCgoKSA9PiBmdW5jdGlvbiBfX1BSSVZBVEVfY3JlYXRlRmllbGRJbmRleChlKSB7XG4gICAgICAgICAgICBlLmNyZWF0ZU9iamVjdFN0b3JlKFwiaW5kZXhDb25maWd1cmF0aW9uXCIsIHtcbiAgICAgICAgICAgICAgICBrZXlQYXRoOiBcImluZGV4SWRcIixcbiAgICAgICAgICAgICAgICBhdXRvSW5jcmVtZW50OiAhMFxuICAgICAgICAgICAgfSkuY3JlYXRlSW5kZXgoXCJjb2xsZWN0aW9uR3JvdXBJbmRleFwiLCBcImNvbGxlY3Rpb25Hcm91cFwiLCB7XG4gICAgICAgICAgICAgICAgdW5pcXVlOiAhMVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBlLmNyZWF0ZU9iamVjdFN0b3JlKFwiaW5kZXhTdGF0ZVwiLCB7XG4gICAgICAgICAgICAgICAga2V5UGF0aDogS1xuICAgICAgICAgICAgfSkuY3JlYXRlSW5kZXgoXCJzZXF1ZW5jZU51bWJlckluZGV4XCIsICQsIHtcbiAgICAgICAgICAgICAgICB1bmlxdWU6ICExXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGUuY3JlYXRlT2JqZWN0U3RvcmUoXCJpbmRleEVudHJpZXNcIiwge1xuICAgICAgICAgICAgICAgIGtleVBhdGg6IFVcbiAgICAgICAgICAgIH0pLmNyZWF0ZUluZGV4KFwiZG9jdW1lbnRLZXlJbmRleFwiLCBXLCB7XG4gICAgICAgICAgICAgICAgdW5pcXVlOiAhMVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0oZSkpKSksIHM7XG4gICAgfVxuICAgIFhyKGUpIHtcbiAgICAgICAgbGV0IHQgPSAwO1xuICAgICAgICByZXR1cm4gZS5zdG9yZShcInJlbW90ZURvY3VtZW50c1wiKS5ZKCgoZSwgbikgPT4ge1xuICAgICAgICAgICAgdCArPSBfX1BSSVZBVEVfZGJEb2N1bWVudFNpemUobik7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuID0ge1xuICAgICAgICAgICAgICAgIGJ5dGVTaXplOiB0XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIGUuc3RvcmUoXCJyZW1vdGVEb2N1bWVudEdsb2JhbFwiKS5wdXQoXCJyZW1vdGVEb2N1bWVudEdsb2JhbEtleVwiLCBuKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBacihlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBlLnN0b3JlKFwibXV0YXRpb25RdWV1ZXNcIiksIG4gPSBlLnN0b3JlKFwibXV0YXRpb25zXCIpO1xuICAgICAgICByZXR1cm4gdC5XKCkubmV4dCgodCA9PiBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaCh0LCAodCA9PiB7XG4gICAgICAgICAgICBjb25zdCByID0gSURCS2V5UmFuZ2UuYm91bmQoWyB0LnVzZXJJZCwgLTEgXSwgWyB0LnVzZXJJZCwgdC5sYXN0QWNrbm93bGVkZ2VkQmF0Y2hJZCBdKTtcbiAgICAgICAgICAgIHJldHVybiBuLlcoXCJ1c2VyTXV0YXRpb25zSW5kZXhcIiwgcikubmV4dCgobiA9PiBQZXJzaXN0ZW5jZVByb21pc2UuZm9yRWFjaChuLCAobiA9PiB7XG4gICAgICAgICAgICAgICAgX19QUklWQVRFX2hhcmRBc3NlcnQobi51c2VySWQgPT09IHQudXNlcklkKTtcbiAgICAgICAgICAgICAgICBjb25zdCByID0gX19QUklWQVRFX2Zyb21EYk11dGF0aW9uQmF0Y2godGhpcy5zZXJpYWxpemVyLCBuKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVtb3ZlTXV0YXRpb25CYXRjaChlLCB0LnVzZXJJZCwgcikubmV4dCgoKCkgPT4ge30pKTtcbiAgICAgICAgICAgIH0pKSkpO1xuICAgICAgICB9KSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRW5zdXJlcyB0aGF0IGV2ZXJ5IGRvY3VtZW50IGluIHRoZSByZW1vdGUgZG9jdW1lbnQgY2FjaGUgaGFzIGEgY29ycmVzcG9uZGluZyBzZW50aW5lbCByb3dcbiAgICAgKiB3aXRoIGEgc2VxdWVuY2UgbnVtYmVyLiBNaXNzaW5nIHJvd3MgYXJlIGdpdmVuIHRoZSBtb3N0IHJlY2VudGx5IHVzZWQgc2VxdWVuY2UgbnVtYmVyLlxuICAgICAqLyAgICBlaShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBlLnN0b3JlKFwidGFyZ2V0RG9jdW1lbnRzXCIpLCBuID0gZS5zdG9yZShcInJlbW90ZURvY3VtZW50c1wiKTtcbiAgICAgICAgcmV0dXJuIGUuc3RvcmUoXCJ0YXJnZXRHbG9iYWxcIikuZ2V0KFwidGFyZ2V0R2xvYmFsS2V5XCIpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgciA9IFtdO1xuICAgICAgICAgICAgcmV0dXJuIG4uWSgoKG4sIGkpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gbmV3IFJlc291cmNlUGF0aChuKSwgbyA9IGZ1bmN0aW9uIF9fUFJJVkFURV9zZW50aW5lbEtleShlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbIDAsIF9fUFJJVkFURV9lbmNvZGVSZXNvdXJjZVBhdGgoZSkgXTtcbiAgICAgICAgICAgICAgICB9KHMpO1xuICAgICAgICAgICAgICAgIHIucHVzaCh0LmdldChvKS5uZXh0KChuID0+IG4gPyBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpIDogKG4gPT4gdC5wdXQoe1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXRJZDogMCxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogX19QUklWQVRFX2VuY29kZVJlc291cmNlUGF0aChuKSxcbiAgICAgICAgICAgICAgICAgICAgc2VxdWVuY2VOdW1iZXI6IGUuaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyXG4gICAgICAgICAgICAgICAgfSkpKHMpKSkpO1xuICAgICAgICAgICAgfSkpLm5leHQoKCgpID0+IFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKHIpKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgdGkoZSwgdCkge1xuICAgICAgICAvLyBDcmVhdGUgdGhlIGluZGV4LlxuICAgICAgICBlLmNyZWF0ZU9iamVjdFN0b3JlKFwiY29sbGVjdGlvblBhcmVudHNcIiwge1xuICAgICAgICAgICAga2V5UGF0aDogUVxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgbiA9IHQuc3RvcmUoXCJjb2xsZWN0aW9uUGFyZW50c1wiKSwgciA9IG5ldyBfX1BSSVZBVEVfTWVtb3J5Q29sbGVjdGlvblBhcmVudEluZGV4LCBhZGRFbnRyeSA9IGUgPT4ge1xuICAgICAgICAgICAgaWYgKHIuYWRkKGUpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IGUubGFzdFNlZ21lbnQoKSwgciA9IGUucG9wTGFzdCgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBuLnB1dCh7XG4gICAgICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25JZDogdCxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBfX1BSSVZBVEVfZW5jb2RlUmVzb3VyY2VQYXRoKHIpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIC8vIEhlbHBlciB0byBhZGQgYW4gaW5kZXggZW50cnkgaWZmIHdlIGhhdmVuJ3QgYWxyZWFkeSB3cml0dGVuIGl0LlxuICAgICAgICAgICAgICAgIC8vIEluZGV4IGV4aXN0aW5nIHJlbW90ZSBkb2N1bWVudHMuXG4gICAgICAgIHJldHVybiB0LnN0b3JlKFwicmVtb3RlRG9jdW1lbnRzXCIpLlkoe1xuICAgICAgICAgICAgSjogITBcbiAgICAgICAgfSwgKChlLCB0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuID0gbmV3IFJlc291cmNlUGF0aChlKTtcbiAgICAgICAgICAgIHJldHVybiBhZGRFbnRyeShuLnBvcExhc3QoKSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiB0LnN0b3JlKFwiZG9jdW1lbnRNdXRhdGlvbnNcIikuWSh7XG4gICAgICAgICAgICBKOiAhMFxuICAgICAgICB9LCAoKFtlLCB0LCBuXSwgcikgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IF9fUFJJVkFURV9kZWNvZGVSZXNvdXJjZVBhdGgodCk7XG4gICAgICAgICAgICByZXR1cm4gYWRkRW50cnkoaS5wb3BMYXN0KCkpO1xuICAgICAgICB9KSkpKTtcbiAgICB9XG4gICAgbmkoZSkge1xuICAgICAgICBjb25zdCB0ID0gZS5zdG9yZShcInRhcmdldHNcIik7XG4gICAgICAgIHJldHVybiB0LlkoKChlLCBuKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByID0gX19QUklWQVRFX2Zyb21EYlRhcmdldChuKSwgaSA9IF9fUFJJVkFURV90b0RiVGFyZ2V0KHRoaXMuc2VyaWFsaXplciwgcik7XG4gICAgICAgICAgICByZXR1cm4gdC5wdXQoaSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgcmkoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gdC5zdG9yZShcInJlbW90ZURvY3VtZW50c1wiKSwgciA9IFtdO1xuICAgICAgICByZXR1cm4gbi5ZKCgoZSwgbikgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IHQuc3RvcmUoXCJyZW1vdGVEb2N1bWVudHNWMTRcIiksIHMgPSBmdW5jdGlvbiBfX1BSSVZBVEVfZXh0cmFjdEtleShlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGUuZG9jdW1lbnQgPyBuZXcgRG9jdW1lbnRLZXkoUmVzb3VyY2VQYXRoLmZyb21TdHJpbmcoZS5kb2N1bWVudC5uYW1lKS5wb3BGaXJzdCg1KSkgOiBlLm5vRG9jdW1lbnQgPyBEb2N1bWVudEtleS5mcm9tU2VnbWVudHMoZS5ub0RvY3VtZW50LnBhdGgpIDogZS51bmtub3duRG9jdW1lbnQgPyBEb2N1bWVudEtleS5mcm9tU2VnbWVudHMoZS51bmtub3duRG9jdW1lbnQucGF0aCkgOiBmYWlsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyAobikucGF0aC50b0FycmF5KCksIG8gPSB7XG4gICAgICAgICAgICAgICAgcHJlZml4UGF0aDogcy5zbGljZSgwLCBzLmxlbmd0aCAtIDIpLFxuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25Hcm91cDogc1tzLmxlbmd0aCAtIDJdLFxuICAgICAgICAgICAgICAgIGRvY3VtZW50SWQ6IHNbcy5sZW5ndGggLSAxXSxcbiAgICAgICAgICAgICAgICByZWFkVGltZTogbi5yZWFkVGltZSB8fCBbIDAsIDAgXSxcbiAgICAgICAgICAgICAgICB1bmtub3duRG9jdW1lbnQ6IG4udW5rbm93bkRvY3VtZW50LFxuICAgICAgICAgICAgICAgIG5vRG9jdW1lbnQ6IG4ubm9Eb2N1bWVudCxcbiAgICAgICAgICAgICAgICBkb2N1bWVudDogbi5kb2N1bWVudCxcbiAgICAgICAgICAgICAgICBoYXNDb21taXR0ZWRNdXRhdGlvbnM6ICEhbi5oYXNDb21taXR0ZWRNdXRhdGlvbnNcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByLnB1c2goaS5wdXQobykpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gUGVyc2lzdGVuY2VQcm9taXNlLndhaXRGb3IocikpKTtcbiAgICB9XG4gICAgaWkoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gdC5zdG9yZShcIm11dGF0aW9uc1wiKSwgciA9IF9fUFJJVkFURV9uZXdJbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlKHRoaXMuc2VyaWFsaXplciksIGkgPSBuZXcgX19QUklWQVRFX01lbW9yeVBlcnNpc3RlbmNlKF9fUFJJVkFURV9NZW1vcnlFYWdlckRlbGVnYXRlLmpyLCB0aGlzLnNlcmlhbGl6ZXIudXQpO1xuICAgICAgICByZXR1cm4gbi5XKCkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuID0gbmV3IE1hcDtcbiAgICAgICAgICAgIHJldHVybiBlLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgICAgIHZhciB0O1xuICAgICAgICAgICAgICAgIGxldCByID0gbnVsbCAhPT0gKHQgPSBuLmdldChlLnVzZXJJZCkpICYmIHZvaWQgMCAhPT0gdCA/IHQgOiBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKTtcbiAgICAgICAgICAgICAgICBfX1BSSVZBVEVfZnJvbURiTXV0YXRpb25CYXRjaCh0aGlzLnNlcmlhbGl6ZXIsIGUpLmtleXMoKS5mb3JFYWNoKChlID0+IHIgPSByLmFkZChlKSkpLCBcbiAgICAgICAgICAgICAgICBuLnNldChlLnVzZXJJZCwgcik7XG4gICAgICAgICAgICB9KSksIFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKG4sICgoZSwgbikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBuZXcgVXNlcihuKSwgbyA9IF9fUFJJVkFURV9JbmRleGVkRGJEb2N1bWVudE92ZXJsYXlDYWNoZS5jdCh0aGlzLnNlcmlhbGl6ZXIsIHMpLCBfID0gaS5nZXRJbmRleE1hbmFnZXIocyksIGEgPSBfX1BSSVZBVEVfSW5kZXhlZERiTXV0YXRpb25RdWV1ZS5jdChzLCB0aGlzLnNlcmlhbGl6ZXIsIF8sIGkucmVmZXJlbmNlRGVsZWdhdGUpO1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTG9jYWxEb2N1bWVudHNWaWV3KHIsIGEsIG8sIF8pLnJlY2FsY3VsYXRlQW5kU2F2ZU92ZXJsYXlzRm9yRG9jdW1lbnRLZXlzKG5ldyBfX1BSSVZBVEVfSW5kZXhlZERiVHJhbnNhY3Rpb24odCwgX19QUklWQVRFX0xpc3RlblNlcXVlbmNlLl9lKSwgZSkubmV4dCgpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfY3JlYXRlUXVlcnlDYWNoZShlKSB7XG4gICAgZS5jcmVhdGVPYmplY3RTdG9yZShcInRhcmdldERvY3VtZW50c1wiLCB7XG4gICAgICAgIGtleVBhdGg6IGtcbiAgICB9KS5jcmVhdGVJbmRleChcImRvY3VtZW50VGFyZ2V0c0luZGV4XCIsIHEsIHtcbiAgICAgICAgdW5pcXVlOiAhMFxuICAgIH0pO1xuICAgIC8vIE5PVEU6IFRoaXMgaXMgdW5pcXVlIG9ubHkgYmVjYXVzZSB0aGUgVGFyZ2V0SWQgaXMgdGhlIHN1ZmZpeC5cbiAgICBlLmNyZWF0ZU9iamVjdFN0b3JlKFwidGFyZ2V0c1wiLCB7XG4gICAgICAgIGtleVBhdGg6IFwidGFyZ2V0SWRcIlxuICAgIH0pLmNyZWF0ZUluZGV4KFwicXVlcnlUYXJnZXRzSW5kZXhcIiwgTCwge1xuICAgICAgICB1bmlxdWU6ICEwXG4gICAgfSksIGUuY3JlYXRlT2JqZWN0U3RvcmUoXCJ0YXJnZXRHbG9iYWxcIik7XG59XG5cbmNvbnN0IGRlID0gXCJGYWlsZWQgdG8gb2J0YWluIGV4Y2x1c2l2ZSBhY2Nlc3MgdG8gdGhlIHBlcnNpc3RlbmNlIGxheWVyLiBUbyBhbGxvdyBzaGFyZWQgYWNjZXNzLCBtdWx0aS10YWIgc3luY2hyb25pemF0aW9uIGhhcyB0byBiZSBlbmFibGVkIGluIGFsbCB0YWJzLiBJZiB5b3UgYXJlIHVzaW5nIGBleHBlcmltZW50YWxGb3JjZU93bmluZ1RhYjp0cnVlYCwgbWFrZSBzdXJlIHRoYXQgb25seSBvbmUgdGFiIGhhcyBwZXJzaXN0ZW5jZSBlbmFibGVkIGF0IGFueSBnaXZlbiB0aW1lLlwiO1xuXG4vKipcbiAqIE9sZGVzdCBhY2NlcHRhYmxlIGFnZSBpbiBtaWxsaXNlY29uZHMgZm9yIGNsaWVudCBtZXRhZGF0YSBiZWZvcmUgdGhlIGNsaWVudFxuICogaXMgY29uc2lkZXJlZCBpbmFjdGl2ZSBhbmQgaXRzIGFzc29jaWF0ZWQgZGF0YSBpcyBnYXJiYWdlIGNvbGxlY3RlZC5cbiAqL1xuLyoqXG4gKiBBbiBJbmRleGVkREItYmFja2VkIGluc3RhbmNlIG9mIFBlcnNpc3RlbmNlLiBEYXRhIGlzIHN0b3JlZCBwZXJzaXN0ZW50bHlcbiAqIGFjcm9zcyBzZXNzaW9ucy5cbiAqXG4gKiBPbiBXZWIgb25seSwgdGhlIEZpcmVzdG9yZSBTREtzIHN1cHBvcnQgc2hhcmVkIGFjY2VzcyB0byBpdHMgcGVyc2lzdGVuY2VcbiAqIGxheWVyLiBUaGlzIGFsbG93cyBtdWx0aXBsZSBicm93c2VyIHRhYnMgdG8gcmVhZCBhbmQgd3JpdGUgdG8gSW5kZXhlZERiIGFuZFxuICogdG8gc3luY2hyb25pemUgc3RhdGUgZXZlbiB3aXRob3V0IG5ldHdvcmsgY29ubmVjdGl2aXR5LiBTaGFyZWQgYWNjZXNzIGlzXG4gKiBjdXJyZW50bHkgb3B0aW9uYWwgYW5kIG5vdCBlbmFibGVkIHVubGVzcyBhbGwgY2xpZW50cyBpbnZva2VcbiAqIGBlbmFibGVQZXJzaXN0ZW5jZSgpYCB3aXRoIGB7c3luY2hyb25pemVUYWJzOnRydWV9YC5cbiAqXG4gKiBJbiBtdWx0aS10YWIgbW9kZSwgaWYgbXVsdGlwbGUgY2xpZW50cyBhcmUgYWN0aXZlIGF0IHRoZSBzYW1lIHRpbWUsIHRoZSBTREtcbiAqIHdpbGwgZGVzaWduYXRlIG9uZSBjbGllbnQgYXMgdGhlIOKAnHByaW1hcnkgY2xpZW504oCdLiBBbiBlZmZvcnQgaXMgbWFkZSB0byBwaWNrXG4gKiBhIHZpc2libGUsIG5ldHdvcmstY29ubmVjdGVkIGFuZCBhY3RpdmUgY2xpZW50LCBhbmQgdGhpcyBjbGllbnQgaXNcbiAqIHJlc3BvbnNpYmxlIGZvciBsZXR0aW5nIG90aGVyIGNsaWVudHMga25vdyBhYm91dCBpdHMgcHJlc2VuY2UuIFRoZSBwcmltYXJ5XG4gKiBjbGllbnQgd3JpdGVzIGEgdW5pcXVlIGNsaWVudC1nZW5lcmF0ZWQgaWRlbnRpZmllciAodGhlIGNsaWVudCBJRCkgdG9cbiAqIEluZGV4ZWREYuKAmXMg4oCcb3duZXLigJ0gc3RvcmUgZXZlcnkgNCBzZWNvbmRzLiBJZiB0aGUgcHJpbWFyeSBjbGllbnQgZmFpbHMgdG9cbiAqIHVwZGF0ZSB0aGlzIGVudHJ5LCBhbm90aGVyIGNsaWVudCBjYW4gYWNxdWlyZSB0aGUgbGVhc2UgYW5kIHRha2Ugb3ZlciBhc1xuICogcHJpbWFyeS5cbiAqXG4gKiBTb21lIHBlcnNpc3RlbmNlIG9wZXJhdGlvbnMgaW4gdGhlIFNESyBhcmUgZGVzaWduYXRlZCBhcyBwcmltYXJ5LWNsaWVudCBvbmx5XG4gKiBvcGVyYXRpb25zLiBUaGlzIGluY2x1ZGVzIHRoZSBhY2tub3dsZWRnbWVudCBvZiBtdXRhdGlvbnMgYW5kIGFsbCB1cGRhdGVzIG9mXG4gKiByZW1vdGUgZG9jdW1lbnRzLiBUaGUgZWZmZWN0cyBvZiB0aGVzZSBvcGVyYXRpb25zIGFyZSB3cml0dGVuIHRvIHBlcnNpc3RlbmNlXG4gKiBhbmQgdGhlbiBicm9hZGNhc3QgdG8gb3RoZXIgdGFicyB2aWEgTG9jYWxTdG9yYWdlIChzZWVcbiAqIGBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGVgKSwgd2hpY2ggdGhlbiByZWZyZXNoIHRoZWlyIHN0YXRlIGZyb21cbiAqIHBlcnNpc3RlbmNlLlxuICpcbiAqIFNpbWlsYXJseSwgdGhlIHByaW1hcnkgY2xpZW50IGxpc3RlbnMgdG8gbm90aWZpY2F0aW9ucyBzZW50IGJ5IHNlY29uZGFyeVxuICogY2xpZW50cyB0byBkaXNjb3ZlciBwZXJzaXN0ZW5jZSBjaGFuZ2VzIHdyaXR0ZW4gYnkgc2Vjb25kYXJ5IGNsaWVudHMsIHN1Y2ggYXNcbiAqIHRoZSBhZGRpdGlvbiBvZiBuZXcgbXV0YXRpb25zIGFuZCBxdWVyeSB0YXJnZXRzLlxuICpcbiAqIElmIG11bHRpLXRhYiBpcyBub3QgZW5hYmxlZCBhbmQgYW5vdGhlciB0YWIgYWxyZWFkeSBvYnRhaW5lZCB0aGUgcHJpbWFyeVxuICogbGVhc2UsIEluZGV4ZWREYlBlcnNpc3RlbmNlIGVudGVycyBhIGZhaWxlZCBzdGF0ZSBhbmQgYWxsIHN1YnNlcXVlbnRcbiAqIG9wZXJhdGlvbnMgd2lsbCBhdXRvbWF0aWNhbGx5IGZhaWwuXG4gKlxuICogQWRkaXRpb25hbGx5LCB0aGVyZSBpcyBhbiBvcHRpbWl6YXRpb24gc28gdGhhdCB3aGVuIGEgdGFiIGlzIGNsb3NlZCwgdGhlXG4gKiBwcmltYXJ5IGxlYXNlIGlzIHJlbGVhc2VkIGltbWVkaWF0ZWx5ICh0aGlzIGlzIGVzcGVjaWFsbHkgaW1wb3J0YW50IHRvIG1ha2VcbiAqIHN1cmUgdGhhdCBhIHJlZnJlc2hlZCB0YWIgaXMgYWJsZSB0byBpbW1lZGlhdGVseSByZS1hY3F1aXJlIHRoZSBwcmltYXJ5XG4gKiBsZWFzZSkuIFVuZm9ydHVuYXRlbHksIEluZGV4ZWREQiBjYW5ub3QgYmUgcmVsaWFibHkgdXNlZCBpbiB3aW5kb3cudW5sb2FkXG4gKiBzaW5jZSBpdCBpcyBhbiBhc3luY2hyb25vdXMgQVBJLiBTbyBpbiBhZGRpdGlvbiB0byBhdHRlbXB0aW5nIHRvIGdpdmUgdXAgdGhlXG4gKiBsZWFzZSwgdGhlIGxlYXNlaG9sZGVyIHdyaXRlcyBpdHMgY2xpZW50IElEIHRvIGEgXCJ6b21iaWVkQ2xpZW50XCIgZW50cnkgaW5cbiAqIExvY2FsU3RvcmFnZSB3aGljaCBhY3RzIGFzIGFuIGluZGljYXRvciB0aGF0IGFub3RoZXIgdGFiIHNob3VsZCBnbyBhaGVhZCBhbmRcbiAqIHRha2UgdGhlIHByaW1hcnkgbGVhc2UgaW1tZWRpYXRlbHkgcmVnYXJkbGVzcyBvZiB0aGUgY3VycmVudCBsZWFzZSB0aW1lc3RhbXAuXG4gKlxuICogVE9ETyhiLzExNDIyNjIzNCk6IFJlbW92ZSBgc3luY2hyb25pemVUYWJzYCBzZWN0aW9uIHdoZW4gbXVsdGktdGFiIGlzIG5vXG4gKiBsb25nZXIgb3B0aW9uYWwuXG4gKi9cbmNsYXNzIF9fUFJJVkFURV9JbmRleGVkRGJQZXJzaXN0ZW5jZSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogV2hldGhlciB0byBzeW5jaHJvbml6ZSB0aGUgaW4tbWVtb3J5IHN0YXRlIG9mIG11bHRpcGxlIHRhYnMgYW5kIHNoYXJlXG4gICAgICogYWNjZXNzIHRvIGxvY2FsIHBlcnNpc3RlbmNlLlxuICAgICAqL1xuICAgIGUsIHQsIG4sIHIsIGksIHMsIG8sIF8sIGEsIFxuICAgIC8qKlxuICAgICAqIElmIHNldCB0byB0cnVlLCBmb3JjZWZ1bGx5IG9idGFpbnMgZGF0YWJhc2UgYWNjZXNzLiBFeGlzdGluZyB0YWJzIHdpbGxcbiAgICAgKiBubyBsb25nZXIgYmUgYWJsZSB0byBhY2Nlc3MgSW5kZXhlZERCLlxuICAgICAqL1xuICAgIHUsIGMgPSAxNSkge1xuICAgICAgICBpZiAodGhpcy5hbGxvd1RhYlN5bmNocm9uaXphdGlvbiA9IGUsIHRoaXMucGVyc2lzdGVuY2VLZXkgPSB0LCB0aGlzLmNsaWVudElkID0gbiwgXG4gICAgICAgIHRoaXMuc2kgPSBpLCB0aGlzLndpbmRvdyA9IHMsIHRoaXMuZG9jdW1lbnQgPSBvLCB0aGlzLm9pID0gYSwgdGhpcy5faSA9IHUsIHRoaXMuYWkgPSBjLCBcbiAgICAgICAgdGhpcy5MciA9IG51bGwsIHRoaXMua3IgPSAhMSwgdGhpcy5pc1ByaW1hcnkgPSAhMSwgdGhpcy5uZXR3b3JrRW5hYmxlZCA9ICEwLCBcbiAgICAgICAgLyoqIE91ciB3aW5kb3cudW5sb2FkIGhhbmRsZXIsIGlmIHJlZ2lzdGVyZWQuICovXG4gICAgICAgIHRoaXMudWkgPSBudWxsLCB0aGlzLmluRm9yZWdyb3VuZCA9ICExLCBcbiAgICAgICAgLyoqIE91ciAndmlzaWJpbGl0eWNoYW5nZScgbGlzdGVuZXIgaWYgcmVnaXN0ZXJlZC4gKi9cbiAgICAgICAgdGhpcy5jaSA9IG51bGwsIFxuICAgICAgICAvKiogVGhlIGNsaWVudCBtZXRhZGF0YSByZWZyZXNoIHRhc2suICovXG4gICAgICAgIHRoaXMubGkgPSBudWxsLCBcbiAgICAgICAgLyoqIFRoZSBsYXN0IHRpbWUgd2UgZ2FyYmFnZSBjb2xsZWN0ZWQgdGhlIGNsaWVudCBtZXRhZGF0YSBvYmplY3Qgc3RvcmUuICovXG4gICAgICAgIHRoaXMuaGkgPSBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFksIFxuICAgICAgICAvKiogQSBsaXN0ZW5lciB0byBub3RpZnkgb24gcHJpbWFyeSBzdGF0ZSBjaGFuZ2VzLiAqL1xuICAgICAgICB0aGlzLlBpID0gZSA9PiBQcm9taXNlLnJlc29sdmUoKSwgIV9fUFJJVkFURV9JbmRleGVkRGJQZXJzaXN0ZW5jZS5EKCkpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELlVOSU1QTEVNRU5URUQsIFwiVGhpcyBwbGF0Zm9ybSBpcyBlaXRoZXIgbWlzc2luZyBJbmRleGVkREIgb3IgaXMga25vd24gdG8gaGF2ZSBhbiBpbmNvbXBsZXRlIGltcGxlbWVudGF0aW9uLiBPZmZsaW5lIHBlcnNpc3RlbmNlIGhhcyBiZWVuIGRpc2FibGVkLlwiKTtcbiAgICAgICAgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZSA9IG5ldyBfX1BSSVZBVEVfSW5kZXhlZERiTHJ1RGVsZWdhdGVJbXBsKHRoaXMsIHIpLCB0aGlzLklpID0gdCArIFwibWFpblwiLCBcbiAgICAgICAgdGhpcy5zZXJpYWxpemVyID0gbmV3IF9fUFJJVkFURV9Mb2NhbFNlcmlhbGl6ZXIoXyksIHRoaXMuVGkgPSBuZXcgX19QUklWQVRFX1NpbXBsZURiKHRoaXMuSWksIHRoaXMuYWksIG5ldyBfX1BSSVZBVEVfU2NoZW1hQ29udmVydGVyKHRoaXMuc2VyaWFsaXplcikpLCBcbiAgICAgICAgdGhpcy5xciA9IG5ldyBfX1BSSVZBVEVfSW5kZXhlZERiVGFyZ2V0Q2FjaGUodGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZSwgdGhpcy5zZXJpYWxpemVyKSwgXG4gICAgICAgIHRoaXMucmVtb3RlRG9jdW1lbnRDYWNoZSA9IF9fUFJJVkFURV9uZXdJbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlKHRoaXMuc2VyaWFsaXplciksIFxuICAgICAgICB0aGlzLktyID0gbmV3IF9fUFJJVkFURV9JbmRleGVkRGJCdW5kbGVDYWNoZSwgdGhpcy53aW5kb3cgJiYgdGhpcy53aW5kb3cubG9jYWxTdG9yYWdlID8gdGhpcy5FaSA9IHRoaXMud2luZG93LmxvY2FsU3RvcmFnZSA6ICh0aGlzLkVpID0gbnVsbCwgXG4gICAgICAgICExID09PSB1ICYmIF9fUFJJVkFURV9sb2dFcnJvcihcIkluZGV4ZWREYlBlcnNpc3RlbmNlXCIsIFwiTG9jYWxTdG9yYWdlIGlzIHVuYXZhaWxhYmxlLiBBcyBhIHJlc3VsdCwgcGVyc2lzdGVuY2UgbWF5IG5vdCB3b3JrIHJlbGlhYmx5LiBJbiBwYXJ0aWN1bGFyIGVuYWJsZVBlcnNpc3RlbmNlKCkgY291bGQgZmFpbCBpbW1lZGlhdGVseSBhZnRlciByZWZyZXNoaW5nIHRoZSBwYWdlLlwiKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEF0dGVtcHQgdG8gc3RhcnQgSW5kZXhlZERiIHBlcnNpc3RlbmNlLlxuICAgICAqXG4gICAgICogQHJldHVybnMgV2hldGhlciBwZXJzaXN0ZW5jZSB3YXMgZW5hYmxlZC5cbiAgICAgKi8gICAgc3RhcnQoKSB7XG4gICAgICAgIC8vIE5PVEU6IFRoaXMgaXMgZXhwZWN0ZWQgdG8gZmFpbCBzb21ldGltZXMgKGluIHRoZSBjYXNlIG9mIGFub3RoZXIgdGFiXG4gICAgICAgIC8vIGFscmVhZHkgaGF2aW5nIHRoZSBwZXJzaXN0ZW5jZSBsb2NrKSwgc28gaXQncyB0aGUgZmlyc3QgdGhpbmcgd2Ugc2hvdWxkXG4gICAgICAgIC8vIGRvLlxuICAgICAgICByZXR1cm4gdGhpcy5kaSgpLnRoZW4oKCgpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc1ByaW1hcnkgJiYgIXRoaXMuYWxsb3dUYWJTeW5jaHJvbml6YXRpb24pIFxuICAgICAgICAgICAgLy8gRmFpbCBgc3RhcnQoKWAgaWYgYHN5bmNocm9uaXplVGFic2AgaXMgZGlzYWJsZWQgYW5kIHdlIGNhbm5vdFxuICAgICAgICAgICAgLy8gb2J0YWluIHRoZSBwcmltYXJ5IGxlYXNlLlxuICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuRkFJTEVEX1BSRUNPTkRJVElPTiwgZGUpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuQWkoKSwgdGhpcy5SaSgpLCB0aGlzLlZpKCksIHRoaXMucnVuVHJhbnNhY3Rpb24oXCJnZXRIaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXJcIiwgXCJyZWFkb25seVwiLCAoZSA9PiB0aGlzLnFyLmdldEhpZ2hlc3RTZXF1ZW5jZU51bWJlcihlKSkpO1xuICAgICAgICB9KSkudGhlbigoZSA9PiB7XG4gICAgICAgICAgICB0aGlzLkxyID0gbmV3IF9fUFJJVkFURV9MaXN0ZW5TZXF1ZW5jZShlLCB0aGlzLm9pKTtcbiAgICAgICAgfSkpLnRoZW4oKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMua3IgPSAhMDtcbiAgICAgICAgfSkpLmNhdGNoKChlID0+ICh0aGlzLlRpICYmIHRoaXMuVGkuY2xvc2UoKSwgUHJvbWlzZS5yZWplY3QoZSkpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVycyBhIGxpc3RlbmVyIHRoYXQgZ2V0cyBjYWxsZWQgd2hlbiB0aGUgcHJpbWFyeSBzdGF0ZSBvZiB0aGVcbiAgICAgKiBpbnN0YW5jZSBjaGFuZ2VzLiBVcG9uIHJlZ2lzdGVyaW5nLCB0aGlzIGxpc3RlbmVyIGlzIGludm9rZWQgaW1tZWRpYXRlbHlcbiAgICAgKiB3aXRoIHRoZSBjdXJyZW50IHByaW1hcnkgc3RhdGUuXG4gICAgICpcbiAgICAgKiBQT1JUSU5HIE5PVEU6IFRoaXMgaXMgb25seSB1c2VkIGZvciBXZWIgbXVsdGktdGFiLlxuICAgICAqLyAgICBtaShlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLlBpID0gYXN5bmMgdCA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5zdGFydGVkKSByZXR1cm4gZSh0KTtcbiAgICAgICAgfSwgZSh0aGlzLmlzUHJpbWFyeSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVycyBhIGxpc3RlbmVyIHRoYXQgZ2V0cyBjYWxsZWQgd2hlbiB0aGUgZGF0YWJhc2UgcmVjZWl2ZXMgYVxuICAgICAqIHZlcnNpb24gY2hhbmdlIGV2ZW50IGluZGljYXRpbmcgdGhhdCBpdCBoYXMgZGVsZXRlZC5cbiAgICAgKlxuICAgICAqIFBPUlRJTkcgTk9URTogVGhpcyBpcyBvbmx5IHVzZWQgZm9yIFdlYiBtdWx0aS10YWIuXG4gICAgICovICAgIHNldERhdGFiYXNlRGVsZXRlZExpc3RlbmVyKGUpIHtcbiAgICAgICAgdGhpcy5UaS5MKChhc3luYyB0ID0+IHtcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIGFuIGF0dGVtcHQgaXMgbWFkZSB0byBkZWxldGUgSW5kZXhlZERCLlxuICAgICAgICAgICAgbnVsbCA9PT0gdC5uZXdWZXJzaW9uICYmIGF3YWl0IGUoKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGp1c3RzIHRoZSBjdXJyZW50IG5ldHdvcmsgc3RhdGUgaW4gdGhlIGNsaWVudCdzIG1ldGFkYXRhLCBwb3RlbnRpYWxseVxuICAgICAqIGFmZmVjdGluZyB0aGUgcHJpbWFyeSBsZWFzZS5cbiAgICAgKlxuICAgICAqIFBPUlRJTkcgTk9URTogVGhpcyBpcyBvbmx5IHVzZWQgZm9yIFdlYiBtdWx0aS10YWIuXG4gICAgICovICAgIHNldE5ldHdvcmtFbmFibGVkKGUpIHtcbiAgICAgICAgdGhpcy5uZXR3b3JrRW5hYmxlZCAhPT0gZSAmJiAodGhpcy5uZXR3b3JrRW5hYmxlZCA9IGUsIFxuICAgICAgICAvLyBTY2hlZHVsZSBhIHByaW1hcnkgbGVhc2UgcmVmcmVzaCBmb3IgaW1tZWRpYXRlIGV4ZWN1dGlvbi4gVGhlIGV2ZW50dWFsXG4gICAgICAgIC8vIGxlYXNlIHVwZGF0ZSB3aWxsIGJlIHByb3BhZ2F0ZWQgdmlhIGBwcmltYXJ5U3RhdGVMaXN0ZW5lcmAuXG4gICAgICAgIHRoaXMuc2kuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zdGFydGVkICYmIGF3YWl0IHRoaXMuZGkoKTtcbiAgICAgICAgfSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgY2xpZW50IG1ldGFkYXRhIGluIEluZGV4ZWREYiBhbmQgYXR0ZW1wdHMgdG8gZWl0aGVyIG9idGFpbiBvclxuICAgICAqIGV4dGVuZCB0aGUgcHJpbWFyeSBsZWFzZSBmb3IgdGhlIGxvY2FsIGNsaWVudC4gQXN5bmNocm9ub3VzbHkgbm90aWZpZXMgdGhlXG4gICAgICogcHJpbWFyeSBzdGF0ZSBsaXN0ZW5lciBpZiB0aGUgY2xpZW50IGVpdGhlciBuZXdseSBvYnRhaW5lZCBvciByZWxlYXNlZCBpdHNcbiAgICAgKiBwcmltYXJ5IGxlYXNlLlxuICAgICAqLyAgICBkaSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucnVuVHJhbnNhY3Rpb24oXCJ1cGRhdGVDbGllbnRNZXRhZGF0YUFuZFRyeUJlY29tZVByaW1hcnlcIiwgXCJyZWFkd3JpdGVcIiwgKGUgPT4gX19QUklWQVRFX2NsaWVudE1ldGFkYXRhU3RvcmUoZSkucHV0KHtcbiAgICAgICAgICAgIGNsaWVudElkOiB0aGlzLmNsaWVudElkLFxuICAgICAgICAgICAgdXBkYXRlVGltZU1zOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgbmV0d29ya0VuYWJsZWQ6IHRoaXMubmV0d29ya0VuYWJsZWQsXG4gICAgICAgICAgICBpbkZvcmVncm91bmQ6IHRoaXMuaW5Gb3JlZ3JvdW5kXG4gICAgICAgIH0pLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzUHJpbWFyeSkgcmV0dXJuIHRoaXMuZmkoZSkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgZSB8fCAodGhpcy5pc1ByaW1hcnkgPSAhMSwgdGhpcy5zaS5lbnF1ZXVlUmV0cnlhYmxlKCgoKSA9PiB0aGlzLlBpKCExKSkpKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHRoaXMuZ2koZSkpKS5uZXh0KCh0ID0+IHRoaXMuaXNQcmltYXJ5ICYmICF0ID8gdGhpcy5waShlKS5uZXh0KCgoKSA9PiAhMSkpIDogISF0ICYmIHRoaXMueWkoZSkubmV4dCgoKCkgPT4gITApKSkpKSkuY2F0Y2goKGUgPT4ge1xuICAgICAgICAgICAgaWYgKF9fUFJJVkFURV9pc0luZGV4ZWREYlRyYW5zYWN0aW9uRXJyb3IoZSkpIFxuICAgICAgICAgICAgLy8gUHJvY2VlZCB3aXRoIHRoZSBleGlzdGluZyBzdGF0ZS4gQW55IHN1YnNlcXVlbnQgYWNjZXNzIHRvXG4gICAgICAgICAgICAvLyBJbmRleGVkREIgd2lsbCB2ZXJpZnkgdGhlIGxlYXNlLlxuICAgICAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkluZGV4ZWREYlBlcnNpc3RlbmNlXCIsIFwiRmFpbGVkIHRvIGV4dGVuZCBvd25lciBsZWFzZTogXCIsIGUpLCBcbiAgICAgICAgICAgIHRoaXMuaXNQcmltYXJ5O1xuICAgICAgICAgICAgaWYgKCF0aGlzLmFsbG93VGFiU3luY2hyb25pemF0aW9uKSB0aHJvdyBlO1xuICAgICAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkluZGV4ZWREYlBlcnNpc3RlbmNlXCIsIFwiUmVsZWFzaW5nIG93bmVyIGxlYXNlIGFmdGVyIGVycm9yIGR1cmluZyBsZWFzZSByZWZyZXNoXCIsIGUpLCBcbiAgICAgICAgICAgIC8qIGlzUHJpbWFyeT0gKi8gITE7XG4gICAgICAgIH0pKS50aGVuKChlID0+IHtcbiAgICAgICAgICAgIHRoaXMuaXNQcmltYXJ5ICE9PSBlICYmIHRoaXMuc2kuZW5xdWV1ZVJldHJ5YWJsZSgoKCkgPT4gdGhpcy5QaShlKSkpLCB0aGlzLmlzUHJpbWFyeSA9IGU7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZmkoZSkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3ByaW1hcnlDbGllbnRTdG9yZShlKS5nZXQoXCJvd25lclwiKS5uZXh0KChlID0+IFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHRoaXMud2koZSkpKSk7XG4gICAgfVxuICAgIFNpKGUpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9jbGllbnRNZXRhZGF0YVN0b3JlKGUpLmRlbGV0ZSh0aGlzLmNsaWVudElkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSWYgdGhlIGdhcmJhZ2UgY29sbGVjdGlvbiB0aHJlc2hvbGQgaGFzIHBhc3NlZCwgcHJ1bmVzIHRoZVxuICAgICAqIFJlbW90ZURvY3VtZW50Q2hhbmdlcyBhbmQgdGhlIENsaWVudE1ldGFkYXRhIHN0b3JlIGJhc2VkIG9uIHRoZSBsYXN0IHVwZGF0ZVxuICAgICAqIHRpbWUgb2YgYWxsIGNsaWVudHMuXG4gICAgICovICAgIGFzeW5jIGJpKCkge1xuICAgICAgICBpZiAodGhpcy5pc1ByaW1hcnkgJiYgIXRoaXMuRGkodGhpcy5oaSwgMThlNSkpIHtcbiAgICAgICAgICAgIHRoaXMuaGkgPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgY29uc3QgZSA9IGF3YWl0IHRoaXMucnVuVHJhbnNhY3Rpb24oXCJtYXliZUdhcmJhZ2VDb2xsZWN0TXVsdGlDbGllbnRTdGF0ZVwiLCBcInJlYWR3cml0ZS1wcmltYXJ5XCIsIChlID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX2dldFN0b3JlKGUsIFwiY2xpZW50TWV0YWRhdGFcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHQuVygpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gdGhpcy5DaShlLCAxOGU1KSwgciA9IGUuZmlsdGVyKChlID0+IC0xID09PSBuLmluZGV4T2YoZSkpKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gRGVsZXRlIG1ldGFkYXRhIGZvciBjbGllbnRzIHRoYXQgYXJlIG5vIGxvbmdlciBjb25zaWRlcmVkIGFjdGl2ZS5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKHIsIChlID0+IHQuZGVsZXRlKGUuY2xpZW50SWQpKSkubmV4dCgoKCkgPT4gcikpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH0pKS5jYXRjaCgoKCkgPT4gW10pKTtcbiAgICAgICAgICAgIC8vIERlbGV0ZSBwb3RlbnRpYWwgbGVmdG92ZXIgZW50cmllcyB0aGF0IG1heSBjb250aW51ZSB0byBtYXJrIHRoZVxuICAgICAgICAgICAgLy8gaW5hY3RpdmUgY2xpZW50cyBhcyB6b21iaWVkIGluIExvY2FsU3RvcmFnZS5cbiAgICAgICAgICAgIC8vIElkZWFsbHkgd2UnZCBkZWxldGUgdGhlIEluZGV4ZWREYiBhbmQgTG9jYWxTdG9yYWdlIHpvbWJpZSBlbnRyaWVzIGZvclxuICAgICAgICAgICAgLy8gdGhlIGNsaWVudCBhdG9taWNhbGx5LCBidXQgd2UgY2FuJ3QuIFNvIHdlIG9wdCB0byBkZWxldGUgdGhlIEluZGV4ZWREYlxuICAgICAgICAgICAgLy8gZW50cmllcyBmaXJzdCB0byBhdm9pZCBwb3RlbnRpYWxseSByZXZpdmluZyBhIHpvbWJpZWQgY2xpZW50LlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuRWkpIGZvciAoY29uc3QgdCBvZiBlKSB0aGlzLkVpLnJlbW92ZUl0ZW0odGhpcy52aSh0LmNsaWVudElkKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogU2NoZWR1bGVzIGEgcmVjdXJyaW5nIHRpbWVyIHRvIHVwZGF0ZSB0aGUgY2xpZW50IG1ldGFkYXRhIGFuZCB0byBlaXRoZXJcbiAgICAgKiBleHRlbmQgb3IgYWNxdWlyZSB0aGUgcHJpbWFyeSBsZWFzZSBpZiB0aGUgY2xpZW50IGlzIGVsaWdpYmxlLlxuICAgICAqLyAgICBWaSgpIHtcbiAgICAgICAgdGhpcy5saSA9IHRoaXMuc2kuZW5xdWV1ZUFmdGVyRGVsYXkoXCJjbGllbnRfbWV0YWRhdGFfcmVmcmVzaFwiIC8qIFRpbWVySWQuQ2xpZW50TWV0YWRhdGFSZWZyZXNoICovICwgNGUzLCAoKCkgPT4gdGhpcy5kaSgpLnRoZW4oKCgpID0+IHRoaXMuYmkoKSkpLnRoZW4oKCgpID0+IHRoaXMuVmkoKSkpKSk7XG4gICAgfVxuICAgIC8qKiBDaGVja3Mgd2hldGhlciBgY2xpZW50YCBpcyB0aGUgbG9jYWwgY2xpZW50LiAqLyAgICB3aShlKSB7XG4gICAgICAgIHJldHVybiAhIWUgJiYgZS5vd25lcklkID09PSB0aGlzLmNsaWVudElkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFdmFsdWF0ZSB0aGUgc3RhdGUgb2YgYWxsIGFjdGl2ZSBjbGllbnRzIGFuZCBkZXRlcm1pbmUgd2hldGhlciB0aGUgbG9jYWxcbiAgICAgKiBjbGllbnQgaXMgb3IgY2FuIGFjdCBhcyB0aGUgaG9sZGVyIG9mIHRoZSBwcmltYXJ5IGxlYXNlLiBSZXR1cm5zIHdoZXRoZXJcbiAgICAgKiB0aGUgY2xpZW50IGlzIGVsaWdpYmxlIGZvciB0aGUgbGVhc2UsIGJ1dCBkb2VzIG5vdCBhY3R1YWxseSBhY3F1aXJlIGl0LlxuICAgICAqIE1heSByZXR1cm4gJ2ZhbHNlJyBldmVuIGlmIHRoZXJlIGlzIG5vIGFjdGl2ZSBsZWFzZWhvbGRlciBhbmQgYW5vdGhlclxuICAgICAqIChmb3JlZ3JvdW5kKSBjbGllbnQgc2hvdWxkIGJlY29tZSBsZWFzZWhvbGRlciBpbnN0ZWFkLlxuICAgICAqLyAgICBnaShlKSB7XG4gICAgICAgIGlmICh0aGlzLl9pKSByZXR1cm4gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoITApO1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3ByaW1hcnlDbGllbnRTdG9yZShlKS5nZXQoXCJvd25lclwiKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIC8vIEEgY2xpZW50IGlzIGVsaWdpYmxlIGZvciB0aGUgcHJpbWFyeSBsZWFzZSBpZjpcbiAgICAgICAgICAgIC8vIC0gaXRzIG5ldHdvcmsgaXMgZW5hYmxlZCBhbmQgdGhlIGNsaWVudCdzIHRhYiBpcyBpbiB0aGUgZm9yZWdyb3VuZC5cbiAgICAgICAgICAgIC8vIC0gaXRzIG5ldHdvcmsgaXMgZW5hYmxlZCBhbmQgbm8gb3RoZXIgY2xpZW50J3MgdGFiIGlzIGluIHRoZVxuICAgICAgICAgICAgLy8gICBmb3JlZ3JvdW5kLlxuICAgICAgICAgICAgLy8gLSBldmVyeSBjbGllbnRzIG5ldHdvcmsgaXMgZGlzYWJsZWQgYW5kIHRoZSBjbGllbnQncyB0YWIgaXMgaW4gdGhlXG4gICAgICAgICAgICAvLyAgIGZvcmVncm91bmQuXG4gICAgICAgICAgICAvLyAtIGV2ZXJ5IGNsaWVudHMgbmV0d29yayBpcyBkaXNhYmxlZCBhbmQgbm8gb3RoZXIgY2xpZW50J3MgdGFiIGlzIGluXG4gICAgICAgICAgICAvLyAgIHRoZSBmb3JlZ3JvdW5kLlxuICAgICAgICAgICAgLy8gLSB0aGUgYGZvcmNlT3duaW5nVGFiYCBzZXR0aW5nIHdhcyBwYXNzZWQgaW4uXG4gICAgICAgICAgICBpZiAobnVsbCAhPT0gdCAmJiB0aGlzLkRpKHQubGVhc2VUaW1lc3RhbXBNcywgNWUzKSAmJiAhdGhpcy5GaSh0Lm93bmVySWQpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMud2kodCkgJiYgdGhpcy5uZXR3b3JrRW5hYmxlZCkgcmV0dXJuICEwO1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy53aSh0KSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXQuYWxsb3dUYWJTeW5jaHJvbml6YXRpb24pIFxuICAgICAgICAgICAgICAgICAgICAvLyBGYWlsIHRoZSBgY2FuQWN0QXNQcmltYXJ5YCBjaGVjayBpZiB0aGUgY3VycmVudCBsZWFzZWhvbGRlciBoYXNcbiAgICAgICAgICAgICAgICAgICAgLy8gbm90IG9wdGVkIGludG8gbXVsdGktdGFiIHN5bmNocm9uaXphdGlvbi4gSWYgdGhpcyBoYXBwZW5zIGF0XG4gICAgICAgICAgICAgICAgICAgIC8vIGNsaWVudCBzdGFydHVwLCB3ZSByZWplY3QgdGhlIFByb21pc2UgcmV0dXJuZWQgYnlcbiAgICAgICAgICAgICAgICAgICAgLy8gYGVuYWJsZVBlcnNpc3RlbmNlKClgIGFuZCB0aGUgdXNlciBjYW4gY29udGludWUgdG8gdXNlIEZpcmVzdG9yZVxuICAgICAgICAgICAgICAgICAgICAvLyB3aXRoIGluLW1lbW9yeSBwZXJzaXN0ZW5jZS5cbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhpcyBmYWlscyBkdXJpbmcgYSBsZWFzZSByZWZyZXNoLCB3ZSB3aWxsIGluc3RlYWQgYmxvY2sgdGhlXG4gICAgICAgICAgICAgICAgICAgIC8vIEFzeW5jUXVldWUgZnJvbSBleGVjdXRpbmcgZnVydGhlciBvcGVyYXRpb25zLiBOb3RlIHRoYXQgdGhpcyBpc1xuICAgICAgICAgICAgICAgICAgICAvLyBhY2NlcHRhYmxlIHNpbmNlIG1peGluZyAmIG1hdGNoaW5nIGRpZmZlcmVudCBgc3luY2hyb25pemVUYWJzYFxuICAgICAgICAgICAgICAgICAgICAvLyBzZXR0aW5ncyBpcyBub3Qgc3VwcG9ydGVkLlxuICAgICAgICAgICAgICAgICAgICAvLyBUT0RPKGIvMTE0MjI2MjM0KTogUmVtb3ZlIHRoaXMgY2hlY2sgd2hlbiBgc3luY2hyb25pemVUYWJzYCBjYW5cbiAgICAgICAgICAgICAgICAgICAgLy8gbm8gbG9uZ2VyIGJlIHR1cm5lZCBvZmYuXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELkZBSUxFRF9QUkVDT05ESVRJT04sIGRlKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICExO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAhKCF0aGlzLm5ldHdvcmtFbmFibGVkIHx8ICF0aGlzLmluRm9yZWdyb3VuZCkgfHwgX19QUklWQVRFX2NsaWVudE1ldGFkYXRhU3RvcmUoZSkuVygpLm5leHQoKGUgPT4gdm9pZCAwID09PSB0aGlzLkNpKGUsIDVlMykuZmluZCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2xpZW50SWQgIT09IGUuY2xpZW50SWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9ICF0aGlzLm5ldHdvcmtFbmFibGVkICYmIGUubmV0d29ya0VuYWJsZWQsIG4gPSAhdGhpcy5pbkZvcmVncm91bmQgJiYgZS5pbkZvcmVncm91bmQsIHIgPSB0aGlzLm5ldHdvcmtFbmFibGVkID09PSBlLm5ldHdvcmtFbmFibGVkO1xuICAgICAgICAgICAgICAgICAgICBpZiAodCB8fCBuICYmIHIpIHJldHVybiAhMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuICExO1xuICAgICAgICAgICAgfSkpKSk7XG4gICAgICAgIH0pKS5uZXh0KChlID0+ICh0aGlzLmlzUHJpbWFyeSAhPT0gZSAmJiBfX1BSSVZBVEVfbG9nRGVidWcoXCJJbmRleGVkRGJQZXJzaXN0ZW5jZVwiLCBgQ2xpZW50ICR7ZSA/IFwiaXNcIiA6IFwiaXMgbm90XCJ9IGVsaWdpYmxlIGZvciBhIHByaW1hcnkgbGVhc2UuYCksIFxuICAgICAgICBlKSkpO1xuICAgIH1cbiAgICBhc3luYyBzaHV0ZG93bigpIHtcbiAgICAgICAgLy8gVGhlIHNodXRkb3duKCkgb3BlcmF0aW9ucyBhcmUgaWRlbXBvdGVudCBhbmQgY2FuIGJlIGNhbGxlZCBldmVuIHdoZW5cbiAgICAgICAgLy8gc3RhcnQoKSBhYm9ydGVkIChlLmcuIGJlY2F1c2UgaXQgY291bGRuJ3QgYWNxdWlyZSB0aGUgcGVyc2lzdGVuY2UgbGVhc2UpLlxuICAgICAgICB0aGlzLmtyID0gITEsIHRoaXMuTWkoKSwgdGhpcy5saSAmJiAodGhpcy5saS5jYW5jZWwoKSwgdGhpcy5saSA9IG51bGwpLCB0aGlzLnhpKCksIFxuICAgICAgICB0aGlzLk9pKCksIFxuICAgICAgICAvLyBVc2UgYFNpbXBsZURiLnJ1blRyYW5zYWN0aW9uYCBkaXJlY3RseSB0byBhdm9pZCBmYWlsaW5nIGlmIGFub3RoZXIgdGFiXG4gICAgICAgIC8vIGhhcyBvYnRhaW5lZCB0aGUgcHJpbWFyeSBsZWFzZS5cbiAgICAgICAgYXdhaXQgdGhpcy5UaS5ydW5UcmFuc2FjdGlvbihcInNodXRkb3duXCIsIFwicmVhZHdyaXRlXCIsIFsgXCJvd25lclwiLCBcImNsaWVudE1ldGFkYXRhXCIgXSwgKGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgdCA9IG5ldyBfX1BSSVZBVEVfSW5kZXhlZERiVHJhbnNhY3Rpb24oZSwgX19QUklWQVRFX0xpc3RlblNlcXVlbmNlLl9lKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBpKHQpLm5leHQoKCgpID0+IHRoaXMuU2kodCkpKTtcbiAgICAgICAgfSkpLCB0aGlzLlRpLmNsb3NlKCksIFxuICAgICAgICAvLyBSZW1vdmUgdGhlIGVudHJ5IG1hcmtpbmcgdGhlIGNsaWVudCBhcyB6b21iaWVkIGZyb20gTG9jYWxTdG9yYWdlIHNpbmNlXG4gICAgICAgIC8vIHdlIHN1Y2Nlc3NmdWxseSBkZWxldGVkIGl0cyBtZXRhZGF0YSBmcm9tIEluZGV4ZWREYi5cbiAgICAgICAgdGhpcy5OaSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGNsaWVudHMgdGhhdCBhcmUgbm90IHpvbWJpZWQgYW5kIGhhdmUgYW4gdXBkYXRlVGltZSB3aXRoaW4gdGhlXG4gICAgICogcHJvdmlkZWQgdGhyZXNob2xkLlxuICAgICAqLyAgICBDaShlLCB0KSB7XG4gICAgICAgIHJldHVybiBlLmZpbHRlcigoZSA9PiB0aGlzLkRpKGUudXBkYXRlVGltZU1zLCB0KSAmJiAhdGhpcy5GaShlLmNsaWVudElkKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBJRHMgb2YgdGhlIGNsaWVudHMgdGhhdCBhcmUgY3VycmVudGx5IGFjdGl2ZS4gSWYgbXVsdGktdGFiXG4gICAgICogaXMgbm90IHN1cHBvcnRlZCwgcmV0dXJucyBhbiBhcnJheSB0aGF0IG9ubHkgY29udGFpbnMgdGhlIGxvY2FsIGNsaWVudCdzXG4gICAgICogSUQuXG4gICAgICpcbiAgICAgKiBQT1JUSU5HIE5PVEU6IFRoaXMgaXMgb25seSB1c2VkIGZvciBXZWIgbXVsdGktdGFiLlxuICAgICAqLyAgICBCaSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucnVuVHJhbnNhY3Rpb24oXCJnZXRBY3RpdmVDbGllbnRzXCIsIFwicmVhZG9ubHlcIiwgKGUgPT4gX19QUklWQVRFX2NsaWVudE1ldGFkYXRhU3RvcmUoZSkuVygpLm5leHQoKGUgPT4gdGhpcy5DaShlLCAxOGU1KS5tYXAoKGUgPT4gZS5jbGllbnRJZCkpKSkpKTtcbiAgICB9XG4gICAgZ2V0IHN0YXJ0ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmtyO1xuICAgIH1cbiAgICBnZXRNdXRhdGlvblF1ZXVlKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9JbmRleGVkRGJNdXRhdGlvblF1ZXVlLmN0KGUsIHRoaXMuc2VyaWFsaXplciwgdCwgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZSk7XG4gICAgfVxuICAgIGdldFRhcmdldENhY2hlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5xcjtcbiAgICB9XG4gICAgZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVtb3RlRG9jdW1lbnRDYWNoZTtcbiAgICB9XG4gICAgZ2V0SW5kZXhNYW5hZ2VyKGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfSW5kZXhlZERiSW5kZXhNYW5hZ2VyKGUsIHRoaXMuc2VyaWFsaXplci51dC5kYXRhYmFzZUlkKTtcbiAgICB9XG4gICAgZ2V0RG9jdW1lbnRPdmVybGF5Q2FjaGUoZSkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX0luZGV4ZWREYkRvY3VtZW50T3ZlcmxheUNhY2hlLmN0KHRoaXMuc2VyaWFsaXplciwgZSk7XG4gICAgfVxuICAgIGdldEJ1bmRsZUNhY2hlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5LcjtcbiAgICB9XG4gICAgcnVuVHJhbnNhY3Rpb24oZSwgdCwgbikge1xuICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoXCJJbmRleGVkRGJQZXJzaXN0ZW5jZVwiLCBcIlN0YXJ0aW5nIHRyYW5zYWN0aW9uOlwiLCBlKTtcbiAgICAgICAgY29uc3QgciA9IFwicmVhZG9ubHlcIiA9PT0gdCA/IFwicmVhZG9ubHlcIiA6IFwicmVhZHdyaXRlXCIsIGkgPSBcbiAgICAgICAgLyoqIFJldHVybnMgdGhlIG9iamVjdCBzdG9yZXMgZm9yIHRoZSBwcm92aWRlZCBzY2hlbWEuICovXG4gICAgICAgIGZ1bmN0aW9uIF9fUFJJVkFURV9nZXRPYmplY3RTdG9yZXMoZSkge1xuICAgICAgICAgICAgcmV0dXJuIDE1ID09PSBlID8gWCA6IDE0ID09PSBlID8gWiA6IDEzID09PSBlID8gWSA6IDEyID09PSBlID8gSiA6IDExID09PSBlID8gSCA6IHZvaWQgZmFpbCgpO1xuICAgICAgICB9KHRoaXMuYWkpO1xuICAgICAgICBsZXQgcztcbiAgICAgICAgLy8gRG8gYWxsIHRyYW5zYWN0aW9ucyBhcyByZWFkd3JpdGUgYWdhaW5zdCBhbGwgb2JqZWN0IHN0b3Jlcywgc2luY2Ugd2VcbiAgICAgICAgLy8gYXJlIHRoZSBvbmx5IHJlYWRlci93cml0ZXIuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuVGkucnVuVHJhbnNhY3Rpb24oZSwgciwgaSwgKHIgPT4gKHMgPSBuZXcgX19QUklWQVRFX0luZGV4ZWREYlRyYW5zYWN0aW9uKHIsIHRoaXMuTHIgPyB0aGlzLkxyLm5leHQoKSA6IF9fUFJJVkFURV9MaXN0ZW5TZXF1ZW5jZS5fZSksIFxuICAgICAgICBcInJlYWR3cml0ZS1wcmltYXJ5XCIgPT09IHQgPyB0aGlzLmZpKHMpLm5leHQoKGUgPT4gISFlIHx8IHRoaXMuZ2kocykpKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGlmICghdCkgdGhyb3cgX19QUklWQVRFX2xvZ0Vycm9yKGBGYWlsZWQgdG8gb2J0YWluIHByaW1hcnkgbGVhc2UgZm9yIGFjdGlvbiAnJHtlfScuYCksIFxuICAgICAgICAgICAgdGhpcy5pc1ByaW1hcnkgPSAhMSwgdGhpcy5zaS5lbnF1ZXVlUmV0cnlhYmxlKCgoKSA9PiB0aGlzLlBpKCExKSkpLCBuZXcgRmlyZXN0b3JlRXJyb3IoRC5GQUlMRURfUFJFQ09ORElUSU9OLCB2KTtcbiAgICAgICAgICAgIHJldHVybiBuKHMpO1xuICAgICAgICB9KSkubmV4dCgoZSA9PiB0aGlzLnlpKHMpLm5leHQoKCgpID0+IGUpKSkpIDogdGhpcy5MaShzKS5uZXh0KCgoKSA9PiBuKHMpKSkpKSkudGhlbigoZSA9PiAocy5yYWlzZU9uQ29tbWl0dGVkRXZlbnQoKSwgXG4gICAgICAgIGUpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFZlcmlmaWVzIHRoYXQgdGhlIGN1cnJlbnQgdGFiIGlzIHRoZSBwcmltYXJ5IGxlYXNlaG9sZGVyIG9yIGFsdGVybmF0aXZlbHlcbiAgICAgKiB0aGF0IHRoZSBsZWFzZWhvbGRlciBoYXMgb3B0ZWQgaW50byBtdWx0aS10YWIgc3luY2hyb25pemF0aW9uLlxuICAgICAqL1xuICAgIC8vIFRPRE8oYi8xMTQyMjYyMzQpOiBSZW1vdmUgdGhpcyBjaGVjayB3aGVuIGBzeW5jaHJvbml6ZVRhYnNgIGNhbiBubyBsb25nZXJcbiAgICAvLyBiZSB0dXJuZWQgb2ZmLlxuICAgIExpKGUpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9wcmltYXJ5Q2xpZW50U3RvcmUoZSkuZ2V0KFwib3duZXJcIikubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBpZiAobnVsbCAhPT0gZSAmJiB0aGlzLkRpKGUubGVhc2VUaW1lc3RhbXBNcywgNWUzKSAmJiAhdGhpcy5GaShlLm93bmVySWQpICYmICF0aGlzLndpKGUpICYmICEodGhpcy5faSB8fCB0aGlzLmFsbG93VGFiU3luY2hyb25pemF0aW9uICYmIGUuYWxsb3dUYWJTeW5jaHJvbml6YXRpb24pKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5GQUlMRURfUFJFQ09ORElUSU9OLCBkZSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogT2J0YWlucyBvciBleHRlbmRzIHRoZSBuZXcgcHJpbWFyeSBsZWFzZSBmb3IgdGhlIGxvY2FsIGNsaWVudC4gVGhpc1xuICAgICAqIG1ldGhvZCBkb2VzIG5vdCB2ZXJpZnkgdGhhdCB0aGUgY2xpZW50IGlzIGVsaWdpYmxlIGZvciB0aGlzIGxlYXNlLlxuICAgICAqLyAgICB5aShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSB7XG4gICAgICAgICAgICBvd25lcklkOiB0aGlzLmNsaWVudElkLFxuICAgICAgICAgICAgYWxsb3dUYWJTeW5jaHJvbml6YXRpb246IHRoaXMuYWxsb3dUYWJTeW5jaHJvbml6YXRpb24sXG4gICAgICAgICAgICBsZWFzZVRpbWVzdGFtcE1zOiBEYXRlLm5vdygpXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfcHJpbWFyeUNsaWVudFN0b3JlKGUpLnB1dChcIm93bmVyXCIsIHQpO1xuICAgIH1cbiAgICBzdGF0aWMgRCgpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9TaW1wbGVEYi5EKCk7XG4gICAgfVxuICAgIC8qKiBDaGVja3MgdGhlIHByaW1hcnkgbGVhc2UgYW5kIHJlbW92ZXMgaXQgaWYgd2UgYXJlIHRoZSBjdXJyZW50IHByaW1hcnkuICovICAgIHBpKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9wcmltYXJ5Q2xpZW50U3RvcmUoZSk7XG4gICAgICAgIHJldHVybiB0LmdldChcIm93bmVyXCIpLm5leHQoKGUgPT4gdGhpcy53aShlKSA/IChfX1BSSVZBVEVfbG9nRGVidWcoXCJJbmRleGVkRGJQZXJzaXN0ZW5jZVwiLCBcIlJlbGVhc2luZyBwcmltYXJ5IGxlYXNlLlwiKSwgXG4gICAgICAgIHQuZGVsZXRlKFwib3duZXJcIikpIDogUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKSkpO1xuICAgIH1cbiAgICAvKiogVmVyaWZpZXMgdGhhdCBgdXBkYXRlVGltZU1zYCBpcyB3aXRoaW4gYG1heEFnZU1zYC4gKi8gICAgRGkoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gRGF0ZS5ub3coKTtcbiAgICAgICAgcmV0dXJuICEoZSA8IG4gLSB0KSAmJiAoIShlID4gbikgfHwgKF9fUFJJVkFURV9sb2dFcnJvcihgRGV0ZWN0ZWQgYW4gdXBkYXRlIHRpbWUgdGhhdCBpcyBpbiB0aGUgZnV0dXJlOiAke2V9ID4gJHtufWApLCBcbiAgICAgICAgITEpKTtcbiAgICB9XG4gICAgQWkoKSB7XG4gICAgICAgIG51bGwgIT09IHRoaXMuZG9jdW1lbnQgJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiB0aGlzLmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIgJiYgKHRoaXMuY2kgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnNpLmVucXVldWVBbmRGb3JnZXQoKCgpID0+ICh0aGlzLmluRm9yZWdyb3VuZCA9IFwidmlzaWJsZVwiID09PSB0aGlzLmRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSwgXG4gICAgICAgICAgICB0aGlzLmRpKCkpKSk7XG4gICAgICAgIH0sIHRoaXMuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInZpc2liaWxpdHljaGFuZ2VcIiwgdGhpcy5jaSksIHRoaXMuaW5Gb3JlZ3JvdW5kID0gXCJ2aXNpYmxlXCIgPT09IHRoaXMuZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlKTtcbiAgICB9XG4gICAgeGkoKSB7XG4gICAgICAgIHRoaXMuY2kgJiYgKHRoaXMuZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInZpc2liaWxpdHljaGFuZ2VcIiwgdGhpcy5jaSksIHRoaXMuY2kgPSBudWxsKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXR0YWNoZXMgYSB3aW5kb3cudW5sb2FkIGhhbmRsZXIgdGhhdCB3aWxsIHN5bmNocm9ub3VzbHkgd3JpdGUgb3VyXG4gICAgICogY2xpZW50SWQgdG8gYSBcInpvbWJpZSBjbGllbnQgaWRcIiBsb2NhdGlvbiBpbiBMb2NhbFN0b3JhZ2UuIFRoaXMgY2FuIGJlIHVzZWRcbiAgICAgKiBieSB0YWJzIHRyeWluZyB0byBhY3F1aXJlIHRoZSBwcmltYXJ5IGxlYXNlIHRvIGRldGVybWluZSB0aGF0IHRoZSBsZWFzZVxuICAgICAqIGlzIG5vIGxvbmdlciB2YWxpZCBldmVuIGlmIHRoZSB0aW1lc3RhbXAgaXMgcmVjZW50LiBUaGlzIGlzIHBhcnRpY3VsYXJseVxuICAgICAqIGltcG9ydGFudCBmb3IgdGhlIHJlZnJlc2ggY2FzZSAoc28gdGhlIHRhYiBjb3JyZWN0bHkgcmUtYWNxdWlyZXMgdGhlXG4gICAgICogcHJpbWFyeSBsZWFzZSkuIExvY2FsU3RvcmFnZSBpcyB1c2VkIGZvciB0aGlzIHJhdGhlciB0aGFuIEluZGV4ZWREYiBiZWNhdXNlXG4gICAgICogaXQgaXMgYSBzeW5jaHJvbm91cyBBUEkgYW5kIHNvIGNhbiBiZSB1c2VkIHJlbGlhYmx5IGZyb20gIGFuIHVubG9hZFxuICAgICAqIGhhbmRsZXIuXG4gICAgICovICAgIFJpKCkge1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgXCJmdW5jdGlvblwiID09IHR5cGVvZiAobnVsbCA9PT0gKGUgPSB0aGlzLndpbmRvdykgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS5hZGRFdmVudExpc3RlbmVyKSAmJiAodGhpcy51aSA9ICgpID0+IHtcbiAgICAgICAgICAgIC8vIE5vdGU6IEluIHRoZW9yeSwgdGhpcyBzaG91bGQgYmUgc2NoZWR1bGVkIG9uIHRoZSBBc3luY1F1ZXVlIHNpbmNlIGl0XG4gICAgICAgICAgICAvLyBhY2Nlc3NlcyBpbnRlcm5hbCBzdGF0ZS4gV2UgZXhlY3V0ZSB0aGlzIGNvZGUgZGlyZWN0bHkgZHVyaW5nIHNodXRkb3duXG4gICAgICAgICAgICAvLyB0byBtYWtlIHN1cmUgaXQgZ2V0cyBhIGNoYW5jZSB0byBydW4uXG4gICAgICAgICAgICB0aGlzLk1pKCk7XG4gICAgICAgICAgICBjb25zdCBlID0gLyg/OlZlcnNpb258TW9iaWxlKVxcLzFbNDU2XS87XG4gICAgICAgICAgICBpc1NhZmFyaSgpICYmIChuYXZpZ2F0b3IuYXBwVmVyc2lvbi5tYXRjaChlKSB8fCBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKGUpKSAmJiBcbiAgICAgICAgICAgIC8vIE9uIFNhZmFyaSAxNCwgMTUsIGFuZCAxNiwgd2UgZG8gbm90IHJ1biBhbnkgY2xlYW51cCBhY3Rpb25zIGFzIGl0IG1pZ2h0XG4gICAgICAgICAgICAvLyB0cmlnZ2VyIGEgYnVnIHRoYXQgcHJldmVudHMgU2FmYXJpIGZyb20gcmUtb3BlbmluZyBJbmRleGVkREIgZHVyaW5nXG4gICAgICAgICAgICAvLyB0aGUgbmV4dCBwYWdlIGxvYWQuXG4gICAgICAgICAgICAvLyBTZWUgaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTIyNjU0N1xuICAgICAgICAgICAgdGhpcy5zaS5lbnRlclJlc3RyaWN0ZWRNb2RlKC8qIHB1cmdlRXhpc3RpbmdUYXNrcz0gKi8gITApLCB0aGlzLnNpLmVucXVldWVBbmRGb3JnZXQoKCgpID0+IHRoaXMuc2h1dGRvd24oKSkpO1xuICAgICAgICB9LCB0aGlzLndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicGFnZWhpZGVcIiwgdGhpcy51aSkpO1xuICAgIH1cbiAgICBPaSgpIHtcbiAgICAgICAgdGhpcy51aSAmJiAodGhpcy53aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBhZ2VoaWRlXCIsIHRoaXMudWkpLCB0aGlzLnVpID0gbnVsbCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgd2hldGhlciBhIGNsaWVudCBpcyBcInpvbWJpZWRcIiBiYXNlZCBvbiBpdHMgTG9jYWxTdG9yYWdlIGVudHJ5LlxuICAgICAqIENsaWVudHMgYmVjb21lIHpvbWJpZWQgd2hlbiB0aGVpciB0YWIgY2xvc2VzIHdpdGhvdXQgcnVubmluZyBhbGwgb2YgdGhlXG4gICAgICogY2xlYW51cCBsb2dpYyBpbiBgc2h1dGRvd24oKWAuXG4gICAgICovICAgIEZpKGUpIHtcbiAgICAgICAgdmFyIHQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBuID0gbnVsbCAhPT0gKG51bGwgPT09ICh0ID0gdGhpcy5FaSkgfHwgdm9pZCAwID09PSB0ID8gdm9pZCAwIDogdC5nZXRJdGVtKHRoaXMudmkoZSkpKTtcbiAgICAgICAgICAgIHJldHVybiBfX1BSSVZBVEVfbG9nRGVidWcoXCJJbmRleGVkRGJQZXJzaXN0ZW5jZVwiLCBgQ2xpZW50ICcke2V9JyAke24gPyBcImlzXCIgOiBcImlzIG5vdFwifSB6b21iaWVkIGluIExvY2FsU3RvcmFnZWApLCBcbiAgICAgICAgICAgIG47XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIC8vIEdyYWNlZnVsbHkgaGFuZGxlIGlmIExvY2FsU3RvcmFnZSBpc24ndCB3b3JraW5nLlxuICAgICAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9sb2dFcnJvcihcIkluZGV4ZWREYlBlcnNpc3RlbmNlXCIsIFwiRmFpbGVkIHRvIGdldCB6b21iaWVkIGNsaWVudCBpZC5cIiwgZSksIFxuICAgICAgICAgICAgITE7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVjb3JkIGNsaWVudCBhcyB6b21iaWVkIChhIGNsaWVudCB0aGF0IGhhZCBpdHMgdGFiIGNsb3NlZCkuIFpvbWJpZWRcbiAgICAgKiBjbGllbnRzIGFyZSBpZ25vcmVkIGR1cmluZyBwcmltYXJ5IHRhYiBzZWxlY3Rpb24uXG4gICAgICovICAgIE1pKCkge1xuICAgICAgICBpZiAodGhpcy5FaSkgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuRWkuc2V0SXRlbSh0aGlzLnZpKHRoaXMuY2xpZW50SWQpLCBTdHJpbmcoRGF0ZS5ub3coKSkpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAvLyBHcmFjZWZ1bGx5IGhhbmRsZSBpZiBMb2NhbFN0b3JhZ2UgaXNuJ3QgYXZhaWxhYmxlIC8gd29ya2luZy5cbiAgICAgICAgICAgIF9fUFJJVkFURV9sb2dFcnJvcihcIkZhaWxlZCB0byBzZXQgem9tYmllIGNsaWVudCBpZC5cIiwgZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqIFJlbW92ZXMgdGhlIHpvbWJpZWQgY2xpZW50IGVudHJ5IGlmIGl0IGV4aXN0cy4gKi8gICAgTmkoKSB7XG4gICAgICAgIGlmICh0aGlzLkVpKSB0cnkge1xuICAgICAgICAgICAgdGhpcy5FaS5yZW1vdmVJdGVtKHRoaXMudmkodGhpcy5jbGllbnRJZCkpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAvLyBJZ25vcmVcbiAgICAgICAgfVxuICAgIH1cbiAgICB2aShlKSB7XG4gICAgICAgIHJldHVybiBgZmlyZXN0b3JlX3pvbWJpZV8ke3RoaXMucGVyc2lzdGVuY2VLZXl9XyR7ZX1gO1xuICAgIH1cbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIHByaW1hcnkgY2xpZW50IG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfcHJpbWFyeUNsaWVudFN0b3JlKGUpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX2dldFN0b3JlKGUsIFwib3duZXJcIik7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBjbGllbnQgbWV0YWRhdGEgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9jbGllbnRNZXRhZGF0YVN0b3JlKGUpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX2dldFN0b3JlKGUsIFwiY2xpZW50TWV0YWRhdGFcIik7XG59XG5cbi8qKlxuICogR2VuZXJhdGVzIGEgc3RyaW5nIHVzZWQgYXMgYSBwcmVmaXggd2hlbiBzdG9yaW5nIGRhdGEgaW4gSW5kZXhlZERCIGFuZFxuICogTG9jYWxTdG9yYWdlLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9pbmRleGVkRGJTdG9yYWdlUHJlZml4KGUsIHQpIHtcbiAgICAvLyBVc2UgdHdvIGRpZmZlcmVudCBwcmVmaXggZm9ybWF0czpcbiAgICAvLyAgICogZmlyZXN0b3JlIC8gcGVyc2lzdGVuY2VLZXkgLyBwcm9qZWN0SUQgLiBkYXRhYmFzZUlEIC8gLi4uXG4gICAgLy8gICAqIGZpcmVzdG9yZSAvIHBlcnNpc3RlbmNlS2V5IC8gcHJvamVjdElEIC8gLi4uXG4gICAgLy8gcHJvamVjdElEcyBhcmUgRE5TLWNvbXBhdGlibGUgbmFtZXMgYW5kIGNhbm5vdCBjb250YWluIGRvdHNcbiAgICAvLyBzbyB0aGVyZSdzIG5vIGRhbmdlciBvZiBjb2xsaXNpb25zLlxuICAgIGxldCBuID0gZS5wcm9qZWN0SWQ7XG4gICAgcmV0dXJuIGUuaXNEZWZhdWx0RGF0YWJhc2UgfHwgKG4gKz0gXCIuXCIgKyBlLmRhdGFiYXNlKSwgXCJmaXJlc3RvcmUvXCIgKyB0ICsgXCIvXCIgKyBuICsgXCIvXCI7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgc2V0IG9mIGNoYW5nZXMgdG8gd2hhdCBkb2N1bWVudHMgYXJlIGN1cnJlbnRseSBpbiB2aWV3IGFuZCBvdXQgb2YgdmlldyBmb3JcbiAqIGEgZ2l2ZW4gcXVlcnkuIFRoZXNlIGNoYW5nZXMgYXJlIHNlbnQgdG8gdGhlIExvY2FsU3RvcmUgYnkgdGhlIFZpZXcgKHZpYVxuICogdGhlIFN5bmNFbmdpbmUpIGFuZCBhcmUgdXNlZCB0byBwaW4gLyB1bnBpbiBkb2N1bWVudHMgYXMgYXBwcm9wcmlhdGUuXG4gKi9cbmNsYXNzIF9fUFJJVkFURV9Mb2NhbFZpZXdDaGFuZ2VzIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuLCByKSB7XG4gICAgICAgIHRoaXMudGFyZ2V0SWQgPSBlLCB0aGlzLmZyb21DYWNoZSA9IHQsIHRoaXMua2kgPSBuLCB0aGlzLnFpID0gcjtcbiAgICB9XG4gICAgc3RhdGljIFFpKGUsIHQpIHtcbiAgICAgICAgbGV0IG4gPSBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKSwgciA9IF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpO1xuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdC5kb2NDaGFuZ2VzKSBzd2l0Y2ggKGUudHlwZSkge1xuICAgICAgICAgIGNhc2UgMCAvKiBDaGFuZ2VUeXBlLkFkZGVkICovIDpcbiAgICAgICAgICAgIG4gPSBuLmFkZChlLmRvYy5rZXkpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIDEgLyogQ2hhbmdlVHlwZS5SZW1vdmVkICovIDpcbiAgICAgICAgICAgIHIgPSByLmFkZChlLmRvYy5rZXkpO1xuIC8vIGRvIG5vdGhpbmdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX0xvY2FsVmlld0NoYW5nZXMoZSwgdC5mcm9tQ2FjaGUsIG4sIHIpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjMgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSB0cmFja2VyIHRvIGtlZXAgYSByZWNvcmQgb2YgaW1wb3J0YW50IGRldGFpbHMgZHVyaW5nIGRhdGFiYXNlIGxvY2FsIHF1ZXJ5XG4gKiBleGVjdXRpb24uXG4gKi8gY2xhc3MgUXVlcnlDb250ZXh0IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvdW50cyB0aGUgbnVtYmVyIG9mIGRvY3VtZW50cyBwYXNzZWQgdGhyb3VnaCBkdXJpbmcgbG9jYWwgcXVlcnkgZXhlY3V0aW9uLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fZG9jdW1lbnRSZWFkQ291bnQgPSAwO1xuICAgIH1cbiAgICBnZXQgZG9jdW1lbnRSZWFkQ291bnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kb2N1bWVudFJlYWRDb3VudDtcbiAgICB9XG4gICAgaW5jcmVtZW50RG9jdW1lbnRSZWFkQ291bnQoZSkge1xuICAgICAgICB0aGlzLl9kb2N1bWVudFJlYWRDb3VudCArPSBlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogVGhlIEZpcmVzdG9yZSBxdWVyeSBlbmdpbmUuXG4gKlxuICogRmlyZXN0b3JlIHF1ZXJpZXMgY2FuIGJlIGV4ZWN1dGVkIGluIHRocmVlIG1vZGVzLiBUaGUgUXVlcnkgRW5naW5lIGRldGVybWluZXNcbiAqIHdoYXQgbW9kZSB0byB1c2UgYmFzZWQgb24gd2hhdCBkYXRhIGlzIHBlcnNpc3RlZC4gVGhlIG1vZGUgb25seSBkZXRlcm1pbmVzXG4gKiB0aGUgcnVudGltZSBjb21wbGV4aXR5IG9mIHRoZSBxdWVyeSAtIHRoZSByZXN1bHQgc2V0IGlzIGVxdWl2YWxlbnQgYWNyb3NzIGFsbFxuICogaW1wbGVtZW50YXRpb25zLlxuICpcbiAqIFRoZSBRdWVyeSBlbmdpbmUgd2lsbCB1c2UgaW5kZXhlZC1iYXNlZCBleGVjdXRpb24gaWYgYSB1c2VyIGhhcyBjb25maWd1cmVkXG4gKiBhbnkgaW5kZXggdGhhdCBjYW4gYmUgdXNlZCB0byBleGVjdXRlIHF1ZXJ5ICh2aWEgYHNldEluZGV4Q29uZmlndXJhdGlvbigpYCkuXG4gKiBPdGhlcndpc2UsIHRoZSBlbmdpbmUgd2lsbCB0cnkgdG8gb3B0aW1pemUgdGhlIHF1ZXJ5IGJ5IHJlLXVzaW5nIGEgcHJldmlvdXNseVxuICogcGVyc2lzdGVkIHF1ZXJ5IHJlc3VsdC4gSWYgdGhhdCBpcyBub3QgcG9zc2libGUsIHRoZSBxdWVyeSB3aWxsIGJlIGV4ZWN1dGVkXG4gKiB2aWEgYSBmdWxsIGNvbGxlY3Rpb24gc2Nhbi5cbiAqXG4gKiBJbmRleC1iYXNlZCBleGVjdXRpb24gaXMgdGhlIGRlZmF1bHQgd2hlbiBhdmFpbGFibGUuIFRoZSBxdWVyeSBlbmdpbmVcbiAqIHN1cHBvcnRzIHBhcnRpYWwgaW5kZXhlZCBleGVjdXRpb24gYW5kIG1lcmdlcyB0aGUgcmVzdWx0IGZyb20gdGhlIGluZGV4XG4gKiBsb29rdXAgd2l0aCBkb2N1bWVudHMgdGhhdCBoYXZlIG5vdCB5ZXQgYmVlbiBpbmRleGVkLiBUaGUgaW5kZXggZXZhbHVhdGlvblxuICogbWF0Y2hlcyB0aGUgYmFja2VuZCdzIGZvcm1hdCBhbmQgYXMgc3VjaCwgdGhlIFNESyBjYW4gdXNlIGluZGV4aW5nIGZvciBhbGxcbiAqIHF1ZXJpZXMgdGhhdCB0aGUgYmFja2VuZCBzdXBwb3J0cy5cbiAqXG4gKiBJZiBubyBpbmRleCBleGlzdHMsIHRoZSBxdWVyeSBlbmdpbmUgdHJpZXMgdG8gdGFrZSBhZHZhbnRhZ2Ugb2YgdGhlIHRhcmdldFxuICogZG9jdW1lbnQgbWFwcGluZyBpbiB0aGUgVGFyZ2V0Q2FjaGUuIFRoZXNlIG1hcHBpbmdzIGV4aXN0cyBmb3IgYWxsIHF1ZXJpZXNcbiAqIHRoYXQgaGF2ZSBiZWVuIHN5bmNlZCB3aXRoIHRoZSBiYWNrZW5kIGF0IGxlYXN0IG9uY2UgYW5kIGFsbG93IHRoZSBxdWVyeVxuICogZW5naW5lIHRvIG9ubHkgcmVhZCBkb2N1bWVudHMgdGhhdCBwcmV2aW91c2x5IG1hdGNoZWQgYSBxdWVyeSBwbHVzIGFueVxuICogZG9jdW1lbnRzIHRoYXQgd2VyZSBlZGl0ZWQgYWZ0ZXIgdGhlIHF1ZXJ5IHdhcyBsYXN0IGxpc3RlbmVkIHRvLlxuICpcbiAqIFRoZXJlIGFyZSBzb21lIGNhc2VzIHdoZW4gdGhpcyBvcHRpbWl6YXRpb24gaXMgbm90IGd1YXJhbnRlZWQgdG8gcHJvZHVjZVxuICogdGhlIHNhbWUgcmVzdWx0cyBhcyBmdWxsIGNvbGxlY3Rpb24gc2NhbnMuIEluIHRoZXNlIGNhc2VzLCBxdWVyeVxuICogcHJvY2Vzc2luZyBmYWxscyBiYWNrIHRvIGZ1bGwgc2NhbnMuIFRoZXNlIGNhc2VzIGFyZTpcbiAqXG4gKiAtIExpbWl0IHF1ZXJpZXMgd2hlcmUgYSBkb2N1bWVudCB0aGF0IG1hdGNoZWQgdGhlIHF1ZXJ5IHByZXZpb3VzbHkgbm8gbG9uZ2VyXG4gKiAgIG1hdGNoZXMgdGhlIHF1ZXJ5LlxuICpcbiAqIC0gTGltaXQgcXVlcmllcyB3aGVyZSBhIGRvY3VtZW50IGVkaXQgbWF5IGNhdXNlIHRoZSBkb2N1bWVudCB0byBzb3J0IGJlbG93XG4gKiAgIGFub3RoZXIgZG9jdW1lbnQgdGhhdCBpcyBpbiB0aGUgbG9jYWwgY2FjaGUuXG4gKlxuICogLSBRdWVyaWVzIHRoYXQgaGF2ZSBuZXZlciBiZWVuIENVUlJFTlQgb3IgZnJlZSBvZiBsaW1ibyBkb2N1bWVudHMuXG4gKi9cbmNsYXNzIF9fUFJJVkFURV9RdWVyeUVuZ2luZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuS2kgPSAhMSwgdGhpcy4kaSA9ICExLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNESyBvbmx5IGRlY2lkZXMgd2hldGhlciBpdCBzaG91bGQgY3JlYXRlIGluZGV4IHdoZW4gY29sbGVjdGlvbiBzaXplIGlzXG4gICAgICAgICAqIGxhcmdlciB0aGFuIHRoaXMuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLlVpID0gMTAwLCB0aGlzLldpID0gODtcbiAgICB9XG4gICAgLyoqIFNldHMgdGhlIGRvY3VtZW50IHZpZXcgdG8gcXVlcnkgYWdhaW5zdC4gKi8gICAgaW5pdGlhbGl6ZShlLCB0KSB7XG4gICAgICAgIHRoaXMuR2kgPSBlLCB0aGlzLmluZGV4TWFuYWdlciA9IHQsIHRoaXMuS2kgPSAhMDtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYWxsIGxvY2FsIGRvY3VtZW50cyBtYXRjaGluZyB0aGUgc3BlY2lmaWVkIHF1ZXJ5LiAqLyAgICBnZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5KGUsIHQsIG4sIHIpIHtcbiAgICAgICAgLy8gU3RvcmVzIHRoZSByZXN1bHQgZnJvbSBleGVjdXRpbmcgdGhlIHF1ZXJ5OyB1c2luZyB0aGlzIG9iamVjdCBpcyBtb3JlXG4gICAgICAgIC8vIGNvbnZlbmllbnQgdGhhbiBwYXNzaW5nIHRoZSByZXN1bHQgYmV0d2VlbiBzdGVwcyBvZiB0aGUgcGVyc2lzdGVuY2VcbiAgICAgICAgLy8gdHJhbnNhY3Rpb24gYW5kIGltcHJvdmVzIHJlYWRhYmlsaXR5IGNvbXBhcmF0aXZlbHkuXG4gICAgICAgIGNvbnN0IGkgPSB7XG4gICAgICAgICAgICByZXN1bHQ6IG51bGxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMuemkoZSwgdCkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBpLnJlc3VsdCA9IGU7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWkucmVzdWx0KSByZXR1cm4gdGhpcy5qaShlLCB0LCByLCBuKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgICAgICBpLnJlc3VsdCA9IGU7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICBpZiAoaS5yZXN1bHQpIHJldHVybjtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBuZXcgUXVlcnlDb250ZXh0O1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuSGkoZSwgdCwgbikubmV4dCgociA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGkucmVzdWx0ID0gciwgdGhpcy4kaSkgcmV0dXJuIHRoaXMuSmkoZSwgdCwgbiwgci5zaXplKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGkucmVzdWx0KSk7XG4gICAgfVxuICAgIEppKGUsIHQsIG4sIHIpIHtcbiAgICAgICAgcmV0dXJuIG4uZG9jdW1lbnRSZWFkQ291bnQgPCB0aGlzLlVpID8gKF9fUFJJVkFURV9nZXRMb2dMZXZlbCgpIDw9IExvZ0xldmVsLkRFQlVHICYmIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlF1ZXJ5RW5naW5lXCIsIFwiU0RLIHdpbGwgbm90IGNyZWF0ZSBjYWNoZSBpbmRleGVzIGZvciBxdWVyeTpcIiwgX19QUklWQVRFX3N0cmluZ2lmeVF1ZXJ5KHQpLCBcInNpbmNlIGl0IG9ubHkgY3JlYXRlcyBjYWNoZSBpbmRleGVzIGZvciBjb2xsZWN0aW9uIGNvbnRhaW5zXCIsIFwibW9yZSB0aGFuIG9yIGVxdWFsIHRvXCIsIHRoaXMuVWksIFwiZG9jdW1lbnRzXCIpLCBcbiAgICAgICAgUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUoKSkgOiAoX19QUklWQVRFX2dldExvZ0xldmVsKCkgPD0gTG9nTGV2ZWwuREVCVUcgJiYgX19QUklWQVRFX2xvZ0RlYnVnKFwiUXVlcnlFbmdpbmVcIiwgXCJRdWVyeTpcIiwgX19QUklWQVRFX3N0cmluZ2lmeVF1ZXJ5KHQpLCBcInNjYW5zXCIsIG4uZG9jdW1lbnRSZWFkQ291bnQsIFwibG9jYWwgZG9jdW1lbnRzIGFuZCByZXR1cm5zXCIsIHIsIFwiZG9jdW1lbnRzIGFzIHJlc3VsdHMuXCIpLCBcbiAgICAgICAgbi5kb2N1bWVudFJlYWRDb3VudCA+IHRoaXMuV2kgKiByID8gKF9fUFJJVkFURV9nZXRMb2dMZXZlbCgpIDw9IExvZ0xldmVsLkRFQlVHICYmIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlF1ZXJ5RW5naW5lXCIsIFwiVGhlIFNESyBkZWNpZGVzIHRvIGNyZWF0ZSBjYWNoZSBpbmRleGVzIGZvciBxdWVyeTpcIiwgX19QUklWQVRFX3N0cmluZ2lmeVF1ZXJ5KHQpLCBcImFzIHVzaW5nIGNhY2hlIGluZGV4ZXMgbWF5IGhlbHAgaW1wcm92ZSBwZXJmb3JtYW5jZS5cIiksIFxuICAgICAgICB0aGlzLmluZGV4TWFuYWdlci5jcmVhdGVUYXJnZXRJbmRleGVzKGUsIF9fUFJJVkFURV9xdWVyeVRvVGFyZ2V0KHQpKSkgOiBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZSgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGVyZm9ybXMgYW4gaW5kZXhlZCBxdWVyeSB0aGF0IGV2YWx1YXRlcyB0aGUgcXVlcnkgYmFzZWQgb24gYSBjb2xsZWN0aW9uJ3NcbiAgICAgKiBwZXJzaXN0ZWQgaW5kZXggdmFsdWVzLiBSZXR1cm5zIGBudWxsYCBpZiBhbiBpbmRleCBpcyBub3QgYXZhaWxhYmxlLlxuICAgICAqLyAgICB6aShlLCB0KSB7XG4gICAgICAgIGlmIChfX1BSSVZBVEVfcXVlcnlNYXRjaGVzQWxsRG9jdW1lbnRzKHQpKSBcbiAgICAgICAgLy8gUXVlcmllcyB0aGF0IG1hdGNoIGFsbCBkb2N1bWVudHMgZG9uJ3QgYmVuZWZpdCBmcm9tIHVzaW5nXG4gICAgICAgIC8vIGtleS1iYXNlZCBsb29rdXBzLiBJdCBpcyBtb3JlIGVmZmljaWVudCB0byBzY2FuIGFsbCBkb2N1bWVudHMgaW4gYVxuICAgICAgICAvLyBjb2xsZWN0aW9uLCByYXRoZXIgdGhhbiB0byBwZXJmb3JtIGluZGl2aWR1YWwgbG9va3Vwcy5cbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKG51bGwpO1xuICAgICAgICBsZXQgbiA9IF9fUFJJVkFURV9xdWVyeVRvVGFyZ2V0KHQpO1xuICAgICAgICByZXR1cm4gdGhpcy5pbmRleE1hbmFnZXIuZ2V0SW5kZXhUeXBlKGUsIG4pLm5leHQoKHIgPT4gMCAvKiBJbmRleFR5cGUuTk9ORSAqLyA9PT0gciA/IG51bGwgOiAobnVsbCAhPT0gdC5saW1pdCAmJiAxIC8qIEluZGV4VHlwZS5QQVJUSUFMICovID09PSByICYmIChcbiAgICAgICAgLy8gV2UgY2Fubm90IGFwcGx5IGEgbGltaXQgZm9yIHRhcmdldHMgdGhhdCBhcmUgc2VydmVkIHVzaW5nIGEgcGFydGlhbFxuICAgICAgICAvLyBpbmRleC4gSWYgYSBwYXJ0aWFsIGluZGV4IHdpbGwgYmUgdXNlZCB0byBzZXJ2ZSB0aGUgdGFyZ2V0LCB0aGVcbiAgICAgICAgLy8gcXVlcnkgbWF5IHJldHVybiBhIHN1cGVyc2V0IG9mIGRvY3VtZW50cyB0aGF0IG1hdGNoIHRoZSB0YXJnZXRcbiAgICAgICAgLy8gKGUuZy4gaWYgdGhlIGluZGV4IGRvZXNuJ3QgaW5jbHVkZSBhbGwgdGhlIHRhcmdldCdzIGZpbHRlcnMpLCBvclxuICAgICAgICAvLyBtYXkgcmV0dXJuIHRoZSBjb3JyZWN0IHNldCBvZiBkb2N1bWVudHMgaW4gdGhlIHdyb25nIG9yZGVyIChlLmcuIGlmXG4gICAgICAgIC8vIHRoZSBpbmRleCBkb2Vzbid0IGluY2x1ZGUgYSBzZWdtZW50IGZvciBvbmUgb2YgdGhlIG9yZGVyQnlzKS5cbiAgICAgICAgLy8gVGhlcmVmb3JlLCBhIGxpbWl0IHNob3VsZCBub3QgYmUgYXBwbGllZCBpbiBzdWNoIGNhc2VzLlxuICAgICAgICB0ID0gX19QUklWQVRFX3F1ZXJ5V2l0aExpbWl0KHQsIG51bGwsIFwiRlwiIC8qIExpbWl0VHlwZS5GaXJzdCAqLyksIG4gPSBfX1BSSVZBVEVfcXVlcnlUb1RhcmdldCh0KSksIFxuICAgICAgICB0aGlzLmluZGV4TWFuYWdlci5nZXREb2N1bWVudHNNYXRjaGluZ1RhcmdldChlLCBuKS5uZXh0KChyID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoLi4ucik7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5HaS5nZXREb2N1bWVudHMoZSwgaSkubmV4dCgociA9PiB0aGlzLmluZGV4TWFuYWdlci5nZXRNaW5PZmZzZXQoZSwgbikubmV4dCgobiA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IHRoaXMuWWkodCwgcik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuWmkodCwgcywgaSwgbi5yZWFkVGltZSkgPyB0aGlzLnppKGUsIF9fUFJJVkFURV9xdWVyeVdpdGhMaW1pdCh0LCBudWxsLCBcIkZcIiAvKiBMaW1pdFR5cGUuRmlyc3QgKi8pKSA6IHRoaXMuWGkoZSwgcywgdCwgbik7XG4gICAgICAgICAgICB9KSkpKTtcbiAgICAgICAgfSkpKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtcyBhIHF1ZXJ5IGJhc2VkIG9uIHRoZSB0YXJnZXQncyBwZXJzaXN0ZWQgcXVlcnkgbWFwcGluZy4gUmV0dXJuc1xuICAgICAqIGBudWxsYCBpZiB0aGUgbWFwcGluZyBpcyBub3QgYXZhaWxhYmxlIG9yIGNhbm5vdCBiZSB1c2VkLlxuICAgICAqLyAgICBqaShlLCB0LCBuLCByKSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfcXVlcnlNYXRjaGVzQWxsRG9jdW1lbnRzKHQpIHx8IHIuaXNFcXVhbChTbmFwc2hvdFZlcnNpb24ubWluKCkpID8gUGVyc2lzdGVuY2VQcm9taXNlLnJlc29sdmUobnVsbCkgOiB0aGlzLkdpLmdldERvY3VtZW50cyhlLCBuKS5uZXh0KChpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSB0aGlzLllpKHQsIGkpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuWmkodCwgcywgbiwgcikgPyBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShudWxsKSA6IChfX1BSSVZBVEVfZ2V0TG9nTGV2ZWwoKSA8PSBMb2dMZXZlbC5ERUJVRyAmJiBfX1BSSVZBVEVfbG9nRGVidWcoXCJRdWVyeUVuZ2luZVwiLCBcIlJlLXVzaW5nIHByZXZpb3VzIHJlc3VsdCBmcm9tICVzIHRvIGV4ZWN1dGUgcXVlcnk6ICVzXCIsIHIudG9TdHJpbmcoKSwgX19QUklWQVRFX3N0cmluZ2lmeVF1ZXJ5KHQpKSwgXG4gICAgICAgICAgICB0aGlzLlhpKGUsIHMsIHQsIF9fUFJJVkFURV9uZXdJbmRleE9mZnNldFN1Y2Nlc3NvckZyb21SZWFkVGltZShyLCAtMSkpLm5leHQoKGUgPT4gZSkpKTtcbiAgICAgICAgfSkpO1xuICAgICAgICAvLyBRdWVyaWVzIHRoYXQgaGF2ZSBuZXZlciBzZWVuIGEgc25hcHNob3Qgd2l0aG91dCBsaW1ibyBmcmVlIGRvY3VtZW50c1xuICAgICAgICAvLyBzaG91bGQgYWxzbyBiZSBydW4gYXMgYSBmdWxsIGNvbGxlY3Rpb24gc2Nhbi5cbiAgICAgICAgfVxuICAgIC8qKiBBcHBsaWVzIHRoZSBxdWVyeSBmaWx0ZXIgYW5kIHNvcnRpbmcgdG8gdGhlIHByb3ZpZGVkIGRvY3VtZW50cy4gICovICAgIFlpKGUsIHQpIHtcbiAgICAgICAgLy8gU29ydCB0aGUgZG9jdW1lbnRzIGFuZCByZS1hcHBseSB0aGUgcXVlcnkgZmlsdGVyIHNpbmNlIHByZXZpb3VzbHlcbiAgICAgICAgLy8gbWF0Y2hpbmcgZG9jdW1lbnRzIGRvIG5vdCBuZWNlc3NhcmlseSBzdGlsbCBtYXRjaCB0aGUgcXVlcnkuXG4gICAgICAgIGxldCBuID0gbmV3IFNvcnRlZFNldChfX1BSSVZBVEVfbmV3UXVlcnlDb21wYXJhdG9yKGUpKTtcbiAgICAgICAgcmV0dXJuIHQuZm9yRWFjaCgoKHQsIHIpID0+IHtcbiAgICAgICAgICAgIF9fUFJJVkFURV9xdWVyeU1hdGNoZXMoZSwgcikgJiYgKG4gPSBuLmFkZChyKSk7XG4gICAgICAgIH0pKSwgbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lcyBpZiBhIGxpbWl0IHF1ZXJ5IG5lZWRzIHRvIGJlIHJlZmlsbGVkIGZyb20gY2FjaGUsIG1ha2luZyBpdFxuICAgICAqIGluZWxpZ2libGUgZm9yIGluZGV4LWZyZWUgZXhlY3V0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHF1ZXJ5IC0gVGhlIHF1ZXJ5LlxuICAgICAqIEBwYXJhbSBzb3J0ZWRQcmV2aW91c1Jlc3VsdHMgLSBUaGUgZG9jdW1lbnRzIHRoYXQgbWF0Y2hlZCB0aGUgcXVlcnkgd2hlbiBpdFxuICAgICAqIHdhcyBsYXN0IHN5bmNocm9uaXplZCwgc29ydGVkIGJ5IHRoZSBxdWVyeSdzIGNvbXBhcmF0b3IuXG4gICAgICogQHBhcmFtIHJlbW90ZUtleXMgLSBUaGUgZG9jdW1lbnQga2V5cyB0aGF0IG1hdGNoZWQgdGhlIHF1ZXJ5IGF0IHRoZSBsYXN0XG4gICAgICogc25hcHNob3QuXG4gICAgICogQHBhcmFtIGxpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiAtIFRoZSB2ZXJzaW9uIG9mIHRoZSBzbmFwc2hvdCB3aGVuIHRoZVxuICAgICAqIHF1ZXJ5IHdhcyBsYXN0IHN5bmNocm9uaXplZC5cbiAgICAgKi8gICAgWmkoZSwgdCwgbiwgcikge1xuICAgICAgICBpZiAobnVsbCA9PT0gZS5saW1pdCkgXG4gICAgICAgIC8vIFF1ZXJpZXMgd2l0aG91dCBsaW1pdHMgZG8gbm90IG5lZWQgdG8gYmUgcmVmaWxsZWQuXG4gICAgICAgIHJldHVybiAhMTtcbiAgICAgICAgaWYgKG4uc2l6ZSAhPT0gdC5zaXplKSBcbiAgICAgICAgLy8gVGhlIHF1ZXJ5IG5lZWRzIHRvIGJlIHJlZmlsbGVkIGlmIGEgcHJldmlvdXNseSBtYXRjaGluZyBkb2N1bWVudCBub1xuICAgICAgICAvLyBsb25nZXIgbWF0Y2hlcy5cbiAgICAgICAgcmV0dXJuICEwO1xuICAgICAgICAvLyBMaW1pdCBxdWVyaWVzIGFyZSBub3QgZWxpZ2libGUgZm9yIGluZGV4LWZyZWUgcXVlcnkgZXhlY3V0aW9uIGlmIHRoZXJlIGlzXG4gICAgICAgIC8vIGEgcG90ZW50aWFsIHRoYXQgYW4gb2xkZXIgZG9jdW1lbnQgZnJvbSBjYWNoZSBub3cgc29ydHMgYmVmb3JlIGEgZG9jdW1lbnRcbiAgICAgICAgLy8gdGhhdCB3YXMgcHJldmlvdXNseSBwYXJ0IG9mIHRoZSBsaW1pdC4gVGhpcywgaG93ZXZlciwgY2FuIG9ubHkgaGFwcGVuIGlmXG4gICAgICAgIC8vIHRoZSBkb2N1bWVudCBhdCB0aGUgZWRnZSBvZiB0aGUgbGltaXQgZ29lcyBvdXQgb2YgbGltaXQuXG4gICAgICAgIC8vIElmIGEgZG9jdW1lbnQgdGhhdCBpcyBub3QgdGhlIGxpbWl0IGJvdW5kYXJ5IHNvcnRzIGRpZmZlcmVudGx5LFxuICAgICAgICAvLyB0aGUgYm91bmRhcnkgb2YgdGhlIGxpbWl0IGl0c2VsZiBkaWQgbm90IGNoYW5nZSBhbmQgZG9jdW1lbnRzIGZyb20gY2FjaGVcbiAgICAgICAgLy8gd2lsbCBjb250aW51ZSB0byBiZSBcInJlamVjdGVkXCIgYnkgdGhpcyBib3VuZGFyeS4gVGhlcmVmb3JlLCB3ZSBjYW4gaWdub3JlXG4gICAgICAgIC8vIGFueSBtb2RpZmljYXRpb25zIHRoYXQgZG9uJ3QgYWZmZWN0IHRoZSBsYXN0IGRvY3VtZW50LlxuICAgICAgICAgICAgICAgIGNvbnN0IGkgPSBcIkZcIiAvKiBMaW1pdFR5cGUuRmlyc3QgKi8gPT09IGUubGltaXRUeXBlID8gdC5sYXN0KCkgOiB0LmZpcnN0KCk7XG4gICAgICAgIHJldHVybiAhIWkgJiYgKGkuaGFzUGVuZGluZ1dyaXRlcyB8fCBpLnZlcnNpb24uY29tcGFyZVRvKHIpID4gMCk7XG4gICAgfVxuICAgIEhpKGUsIHQsIG4pIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9nZXRMb2dMZXZlbCgpIDw9IExvZ0xldmVsLkRFQlVHICYmIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlF1ZXJ5RW5naW5lXCIsIFwiVXNpbmcgZnVsbCBjb2xsZWN0aW9uIHNjYW4gdG8gZXhlY3V0ZSBxdWVyeTpcIiwgX19QUklWQVRFX3N0cmluZ2lmeVF1ZXJ5KHQpKSwgXG4gICAgICAgIHRoaXMuR2kuZ2V0RG9jdW1lbnRzTWF0Y2hpbmdRdWVyeShlLCB0LCBJbmRleE9mZnNldC5taW4oKSwgbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbWJpbmVzIHRoZSByZXN1bHRzIGZyb20gYW4gaW5kZXhlZCBleGVjdXRpb24gd2l0aCB0aGUgcmVtYWluaW5nIGRvY3VtZW50c1xuICAgICAqIHRoYXQgaGF2ZSBub3QgeWV0IGJlZW4gaW5kZXhlZC5cbiAgICAgKi8gICAgWGkoZSwgdCwgbiwgcikge1xuICAgICAgICAvLyBSZXRyaWV2ZSBhbGwgcmVzdWx0cyBmb3IgZG9jdW1lbnRzIHRoYXQgd2VyZSB1cGRhdGVkIHNpbmNlIHRoZSBvZmZzZXQuXG4gICAgICAgIHJldHVybiB0aGlzLkdpLmdldERvY3VtZW50c01hdGNoaW5nUXVlcnkoZSwgbiwgcikubmV4dCgoZSA9PiAoXG4gICAgICAgIC8vIE1lcmdlIHdpdGggZXhpc3RpbmcgcmVzdWx0c1xuICAgICAgICB0LmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgZSA9IGUuaW5zZXJ0KHQua2V5LCB0KTtcbiAgICAgICAgfSkpLCBlKSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogSW1wbGVtZW50cyBgTG9jYWxTdG9yZWAgaW50ZXJmYWNlLlxuICpcbiAqIE5vdGU6IHNvbWUgZmllbGQgZGVmaW5lZCBpbiB0aGlzIGNsYXNzIG1pZ2h0IGhhdmUgcHVibGljIGFjY2VzcyBsZXZlbCwgYnV0XG4gKiB0aGUgY2xhc3MgaXMgbm90IGV4cG9ydGVkIHNvIHRoZXkgYXJlIG9ubHkgYWNjZXNzaWJsZSBmcm9tIHRoaXMgbW9kdWxlLlxuICogVGhpcyBpcyB1c2VmdWwgdG8gaW1wbGVtZW50IG9wdGlvbmFsIGZlYXR1cmVzIChsaWtlIGJ1bmRsZXMpIGluIGZyZWVcbiAqIGZ1bmN0aW9ucywgc3VjaCB0aGF0IHRoZXkgYXJlIHRyZWUtc2hha2VhYmxlLlxuICovXG5jbGFzcyBfX1BSSVZBVEVfTG9jYWxTdG9yZUltcGwge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBNYW5hZ2VzIG91ciBpbi1tZW1vcnkgb3IgZHVyYWJsZSBwZXJzaXN0ZW5jZS4gKi9cbiAgICBlLCB0LCBuLCByKSB7XG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2UgPSBlLCB0aGlzLmVzID0gdCwgdGhpcy5zZXJpYWxpemVyID0gciwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBNYXBzIGEgdGFyZ2V0SUQgdG8gZGF0YSBhYm91dCBpdHMgdGFyZ2V0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBQT1JUSU5HIE5PVEU6IFdlIGFyZSB1c2luZyBhbiBpbW11dGFibGUgZGF0YSBzdHJ1Y3R1cmUgb24gV2ViIHRvIG1ha2UgcmUtcnVuc1xuICAgICAgICAgKiBvZiBgYXBwbHlSZW1vdGVFdmVudCgpYCBpZGVtcG90ZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50cyA9IG5ldyBTb3J0ZWRNYXAoX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IpLCBcbiAgICAgICAgLyoqIE1hcHMgYSB0YXJnZXQgdG8gaXRzIHRhcmdldElELiAqL1xuICAgICAgICAvLyBUT0RPKHd1YW5keSk6IEV2YWx1YXRlIGlmIFRhcmdldElkIGNhbiBiZSBwYXJ0IG9mIFRhcmdldC5cbiAgICAgICAgdGhpcy5ucyA9IG5ldyBPYmplY3RNYXAoKGUgPT4gX19QUklWQVRFX2Nhbm9uaWZ5VGFyZ2V0KGUpKSwgX19QUklWQVRFX3RhcmdldEVxdWFscyksIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSBwZXIgY29sbGVjdGlvbiBncm91cCBpbmRleCBvZiB0aGUgbGFzdCByZWFkIHRpbWUgcHJvY2Vzc2VkIGJ5XG4gICAgICAgICAqIGBnZXROZXdEb2N1bWVudENoYW5nZXMoKWAuXG4gICAgICAgICAqXG4gICAgICAgICAqIFBPUlRJTkcgTk9URTogVGhpcyBpcyBvbmx5IHVzZWQgZm9yIG11bHRpLXRhYiBzeW5jaHJvbml6YXRpb24uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnJzID0gbmV3IE1hcCwgdGhpcy5zcyA9IGUuZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSgpLCB0aGlzLnFyID0gZS5nZXRUYXJnZXRDYWNoZSgpLCBcbiAgICAgICAgdGhpcy5LciA9IGUuZ2V0QnVuZGxlQ2FjaGUoKSwgdGhpcy5vcyhuKTtcbiAgICB9XG4gICAgb3MoZSkge1xuICAgICAgICAvLyBUT0RPKGluZGV4aW5nKTogQWRkIHNwZWMgdGVzdHMgdGhhdCB0ZXN0IHRoZXNlIGNvbXBvbmVudHMgY2hhbmdlIGFmdGVyIGFcbiAgICAgICAgLy8gdXNlciBjaGFuZ2VcbiAgICAgICAgdGhpcy5kb2N1bWVudE92ZXJsYXlDYWNoZSA9IHRoaXMucGVyc2lzdGVuY2UuZ2V0RG9jdW1lbnRPdmVybGF5Q2FjaGUoZSksIHRoaXMuaW5kZXhNYW5hZ2VyID0gdGhpcy5wZXJzaXN0ZW5jZS5nZXRJbmRleE1hbmFnZXIoZSksIFxuICAgICAgICB0aGlzLm11dGF0aW9uUXVldWUgPSB0aGlzLnBlcnNpc3RlbmNlLmdldE11dGF0aW9uUXVldWUoZSwgdGhpcy5pbmRleE1hbmFnZXIpLCB0aGlzLmxvY2FsRG9jdW1lbnRzID0gbmV3IExvY2FsRG9jdW1lbnRzVmlldyh0aGlzLnNzLCB0aGlzLm11dGF0aW9uUXVldWUsIHRoaXMuZG9jdW1lbnRPdmVybGF5Q2FjaGUsIHRoaXMuaW5kZXhNYW5hZ2VyKSwgXG4gICAgICAgIHRoaXMuc3Muc2V0SW5kZXhNYW5hZ2VyKHRoaXMuaW5kZXhNYW5hZ2VyKSwgdGhpcy5lcy5pbml0aWFsaXplKHRoaXMubG9jYWxEb2N1bWVudHMsIHRoaXMuaW5kZXhNYW5hZ2VyKTtcbiAgICB9XG4gICAgY29sbGVjdEdhcmJhZ2UoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkNvbGxlY3QgZ2FyYmFnZVwiLCBcInJlYWR3cml0ZS1wcmltYXJ5XCIsICh0ID0+IGUuY29sbGVjdCh0LCB0aGlzLnRzKSkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX25ld0xvY2FsU3RvcmUoXG4vKiogTWFuYWdlcyBvdXIgaW4tbWVtb3J5IG9yIGR1cmFibGUgcGVyc2lzdGVuY2UuICovXG5lLCB0LCBuLCByKSB7XG4gICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfTG9jYWxTdG9yZUltcGwoZSwgdCwgbiwgcik7XG59XG5cbi8qKlxuICogVGVsbHMgdGhlIExvY2FsU3RvcmUgdGhhdCB0aGUgY3VycmVudGx5IGF1dGhlbnRpY2F0ZWQgdXNlciBoYXMgY2hhbmdlZC5cbiAqXG4gKiBJbiByZXNwb25zZSB0aGUgbG9jYWwgc3RvcmUgc3dpdGNoZXMgdGhlIG11dGF0aW9uIHF1ZXVlIHRvIHRoZSBuZXcgdXNlciBhbmRcbiAqIHJldHVybnMgYW55IHJlc3VsdGluZyBkb2N1bWVudCBjaGFuZ2VzLlxuICovXG4vLyBQT1JUSU5HIE5PVEU6IEFuZHJvaWQgYW5kIGlPUyBvbmx5IHJldHVybiB0aGUgZG9jdW1lbnRzIGFmZmVjdGVkIGJ5IHRoZVxuLy8gY2hhbmdlLlxuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX2xvY2FsU3RvcmVIYW5kbGVVc2VyQ2hhbmdlKGUsIHQpIHtcbiAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICByZXR1cm4gYXdhaXQgbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkhhbmRsZSB1c2VyIGNoYW5nZVwiLCBcInJlYWRvbmx5XCIsIChlID0+IHtcbiAgICAgICAgLy8gU3dhcCBvdXQgdGhlIG11dGF0aW9uIHF1ZXVlLCBncmFiYmluZyB0aGUgcGVuZGluZyBtdXRhdGlvbiBiYXRjaGVzXG4gICAgICAgIC8vIGJlZm9yZSBhbmQgYWZ0ZXIuXG4gICAgICAgIGxldCByO1xuICAgICAgICByZXR1cm4gbi5tdXRhdGlvblF1ZXVlLmdldEFsbE11dGF0aW9uQmF0Y2hlcyhlKS5uZXh0KChpID0+IChyID0gaSwgbi5vcyh0KSwgbi5tdXRhdGlvblF1ZXVlLmdldEFsbE11dGF0aW9uQmF0Y2hlcyhlKSkpKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBbXSwgcyA9IFtdO1xuICAgICAgICAgICAgLy8gVW5pb24gdGhlIG9sZC9uZXcgY2hhbmdlZCBrZXlzLlxuICAgICAgICAgICAgbGV0IG8gPSBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZSBvZiByKSB7XG4gICAgICAgICAgICAgICAgaS5wdXNoKGUuYmF0Y2hJZCk7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIGUubXV0YXRpb25zKSBvID0gby5hZGQodC5rZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChjb25zdCBlIG9mIHQpIHtcbiAgICAgICAgICAgICAgICBzLnB1c2goZS5iYXRjaElkKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHQgb2YgZS5tdXRhdGlvbnMpIG8gPSBvLmFkZCh0LmtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBSZXR1cm4gdGhlIHNldCBvZiBhbGwgKHBvdGVudGlhbGx5KSBjaGFuZ2VkIGRvY3VtZW50cyBhbmQgdGhlIGxpc3RcbiAgICAgICAgICAgIC8vIG9mIG11dGF0aW9uIGJhdGNoIElEcyB0aGF0IHdlcmUgYWZmZWN0ZWQgYnkgY2hhbmdlLlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4ubG9jYWxEb2N1bWVudHMuZ2V0RG9jdW1lbnRzKGUsIG8pLm5leHQoKGUgPT4gKHtcbiAgICAgICAgICAgICAgICBfczogZSxcbiAgICAgICAgICAgICAgICByZW1vdmVkQmF0Y2hJZHM6IGksXG4gICAgICAgICAgICAgICAgYWRkZWRCYXRjaElkczogc1xuICAgICAgICAgICAgfSkpKTtcbiAgICAgICAgfSkpO1xuICAgIH0pKTtcbn1cblxuLyogQWNjZXB0cyBsb2NhbGx5IGdlbmVyYXRlZCBNdXRhdGlvbnMgYW5kIGNvbW1pdCB0aGVtIHRvIHN0b3JhZ2UuICovXG4vKipcbiAqIEFja25vd2xlZGdlcyB0aGUgZ2l2ZW4gYmF0Y2guXG4gKlxuICogT24gdGhlIGhhcHB5IHBhdGggd2hlbiBhIGJhdGNoIGlzIGFja25vd2xlZGdlZCwgdGhlIGxvY2FsIHN0b3JlIHdpbGxcbiAqXG4gKiAgKyByZW1vdmUgdGhlIGJhdGNoIGZyb20gdGhlIG11dGF0aW9uIHF1ZXVlO1xuICogICsgYXBwbHkgdGhlIGNoYW5nZXMgdG8gdGhlIHJlbW90ZSBkb2N1bWVudCBjYWNoZTtcbiAqICArIHJlY2FsY3VsYXRlIHRoZSBsYXRlbmN5IGNvbXBlbnNhdGVkIHZpZXcgaW1wbGllZCBieSB0aG9zZSBjaGFuZ2VzICh0aGVyZVxuICogICAgbWF5IGJlIG11dGF0aW9ucyBpbiB0aGUgcXVldWUgdGhhdCBhZmZlY3QgdGhlIGRvY3VtZW50cyBidXQgaGF2ZW4ndCBiZWVuXG4gKiAgICBhY2tub3dsZWRnZWQgeWV0KTsgYW5kXG4gKiAgKyBnaXZlIHRoZSBjaGFuZ2VkIGRvY3VtZW50cyBiYWNrIHRoZSBzeW5jIGVuZ2luZVxuICpcbiAqIEByZXR1cm5zIFRoZSByZXN1bHRpbmcgKG1vZGlmaWVkKSBkb2N1bWVudHMuXG4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV9sb2NhbFN0b3JlQWNrbm93bGVkZ2VCYXRjaChlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJBY2tub3dsZWRnZSBiYXRjaFwiLCBcInJlYWR3cml0ZS1wcmltYXJ5XCIsIChlID0+IHtcbiAgICAgICAgY29uc3QgciA9IHQuYmF0Y2gua2V5cygpLCBpID0gbi5zcy5uZXdDaGFuZ2VCdWZmZXIoe1xuICAgICAgICAgICAgdHJhY2tSZW1vdmFsczogITBcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfYXBwbHlXcml0ZVRvUmVtb3RlRG9jdW1lbnRzKGUsIHQsIG4sIHIpIHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBuLmJhdGNoLCBzID0gaS5rZXlzKCk7XG4gICAgICAgICAgICBsZXQgbyA9IFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgICAgICByZXR1cm4gcy5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgICAgICBvID0gby5uZXh0KCgoKSA9PiByLmdldEVudHJ5KHQsIGUpKSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBuLmRvY1ZlcnNpb25zLmdldChlKTtcbiAgICAgICAgICAgICAgICAgICAgX19QUklWQVRFX2hhcmRBc3NlcnQobnVsbCAhPT0gcyksIHQudmVyc2lvbi5jb21wYXJlVG8ocykgPCAwICYmIChpLmFwcGx5VG9SZW1vdGVEb2N1bWVudCh0LCBuKSwgXG4gICAgICAgICAgICAgICAgICAgIHQuaXNWYWxpZERvY3VtZW50KCkgJiYgKFxuICAgICAgICAgICAgICAgICAgICAvLyBXZSB1c2UgdGhlIGNvbW1pdFZlcnNpb24gYXMgdGhlIHJlYWRUaW1lIHJhdGhlciB0aGFuIHRoZVxuICAgICAgICAgICAgICAgICAgICAvLyBkb2N1bWVudCdzIHVwZGF0ZVRpbWUgc2luY2UgdGhlIHVwZGF0ZVRpbWUgaXMgbm90IGFkdmFuY2VkXG4gICAgICAgICAgICAgICAgICAgIC8vIGZvciB1cGRhdGVzIHRoYXQgZG8gbm90IG1vZGlmeSB0aGUgdW5kZXJseWluZyBkb2N1bWVudC5cbiAgICAgICAgICAgICAgICAgICAgdC5zZXRSZWFkVGltZShuLmNvbW1pdFZlcnNpb24pLCByLmFkZEVudHJ5KHQpKSk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfSkpLCBvLm5leHQoKCgpID0+IGUubXV0YXRpb25RdWV1ZS5yZW1vdmVNdXRhdGlvbkJhdGNoKHQsIGkpKSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqIFJldHVybnMgdGhlIGxvY2FsIHZpZXcgb2YgdGhlIGRvY3VtZW50cyBhZmZlY3RlZCBieSBhIG11dGF0aW9uIGJhdGNoLiAqL1xuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuICAgICAgICAobiwgZSwgdCwgaSkubmV4dCgoKCkgPT4gaS5hcHBseShlKSkpLm5leHQoKCgpID0+IG4ubXV0YXRpb25RdWV1ZS5wZXJmb3JtQ29uc2lzdGVuY3lDaGVjayhlKSkpLm5leHQoKCgpID0+IG4uZG9jdW1lbnRPdmVybGF5Q2FjaGUucmVtb3ZlT3ZlcmxheXNGb3JCYXRjaElkKGUsIHIsIHQuYmF0Y2guYmF0Y2hJZCkpKS5uZXh0KCgoKSA9PiBuLmxvY2FsRG9jdW1lbnRzLnJlY2FsY3VsYXRlQW5kU2F2ZU92ZXJsYXlzRm9yRG9jdW1lbnRLZXlzKGUsIGZ1bmN0aW9uIF9fUFJJVkFURV9nZXRLZXlzV2l0aFRyYW5zZm9ybVJlc3VsdHMoZSkge1xuICAgICAgICAgICAgbGV0IHQgPSBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKTtcbiAgICAgICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgZS5tdXRhdGlvblJlc3VsdHMubGVuZ3RoOyArK24pIHtcbiAgICAgICAgICAgICAgICBlLm11dGF0aW9uUmVzdWx0c1tuXS50cmFuc2Zvcm1SZXN1bHRzLmxlbmd0aCA+IDAgJiYgKHQgPSB0LmFkZChlLmJhdGNoLm11dGF0aW9uc1tuXS5rZXkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0O1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogUmVtb3ZlcyBtdXRhdGlvbnMgZnJvbSB0aGUgTXV0YXRpb25RdWV1ZSBmb3IgdGhlIHNwZWNpZmllZCBiYXRjaDtcbiAqIExvY2FsRG9jdW1lbnRzIHdpbGwgYmUgcmVjYWxjdWxhdGVkLlxuICpcbiAqIEByZXR1cm5zIFRoZSByZXN1bHRpbmcgbW9kaWZpZWQgZG9jdW1lbnRzLlxuICovICh0KSkpKS5uZXh0KCgoKSA9PiBuLmxvY2FsRG9jdW1lbnRzLmdldERvY3VtZW50cyhlLCByKSkpO1xuICAgIH0pKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBsYXN0IGNvbnNpc3RlbnQgc25hcHNob3QgcHJvY2Vzc2VkICh1c2VkIGJ5IHRoZSBSZW1vdGVTdG9yZSB0b1xuICogZGV0ZXJtaW5lIHdoZXRoZXIgdG8gYnVmZmVyIGluY29taW5nIHNuYXBzaG90cyBmcm9tIHRoZSBiYWNrZW5kKS5cbiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX2xvY2FsU3RvcmVHZXRMYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uKGUpIHtcbiAgICBjb25zdCB0ID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICByZXR1cm4gdC5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkdldCBsYXN0IHJlbW90ZSBzbmFwc2hvdCB2ZXJzaW9uXCIsIFwicmVhZG9ubHlcIiwgKGUgPT4gdC5xci5nZXRMYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uKGUpKSk7XG59XG5cbi8qKlxuICogVXBkYXRlcyB0aGUgXCJncm91bmQtc3RhdGVcIiAocmVtb3RlKSBkb2N1bWVudHMuIFdlIGFzc3VtZSB0aGF0IHRoZSByZW1vdGVcbiAqIGV2ZW50IHJlZmxlY3RzIGFueSB3cml0ZSBiYXRjaGVzIHRoYXQgaGF2ZSBiZWVuIGFja25vd2xlZGdlZCBvciByZWplY3RlZFxuICogKGkuZS4gd2UgZG8gbm90IHJlLWFwcGx5IGxvY2FsIG11dGF0aW9ucyB0byB1cGRhdGVzIGZyb20gdGhpcyBldmVudCkuXG4gKlxuICogTG9jYWxEb2N1bWVudHMgYXJlIHJlLWNhbGN1bGF0ZWQgaWYgdGhlcmUgYXJlIHJlbWFpbmluZyBtdXRhdGlvbnMgaW4gdGhlXG4gKiBxdWV1ZS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfbG9jYWxTdG9yZUFwcGx5UmVtb3RlRXZlbnRUb0xvY2FsQ2FjaGUoZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpLCByID0gdC5zbmFwc2hvdFZlcnNpb247XG4gICAgbGV0IGkgPSBuLnRzO1xuICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiQXBwbHkgcmVtb3RlIGV2ZW50XCIsIFwicmVhZHdyaXRlLXByaW1hcnlcIiwgKGUgPT4ge1xuICAgICAgICBjb25zdCBzID0gbi5zcy5uZXdDaGFuZ2VCdWZmZXIoe1xuICAgICAgICAgICAgdHJhY2tSZW1vdmFsczogITBcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIFJlc2V0IG5ld1RhcmdldERhdGFCeVRhcmdldE1hcCBpbiBjYXNlIHRoaXMgdHJhbnNhY3Rpb24gZ2V0cyByZS1ydW4uXG4gICAgICAgICAgICAgICAgaSA9IG4udHM7XG4gICAgICAgIGNvbnN0IG8gPSBbXTtcbiAgICAgICAgdC50YXJnZXRDaGFuZ2VzLmZvckVhY2goKChzLCBfKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBhID0gaS5nZXQoXyk7XG4gICAgICAgICAgICBpZiAoIWEpIHJldHVybjtcbiAgICAgICAgICAgIC8vIE9ubHkgdXBkYXRlIHRoZSByZW1vdGUga2V5cyBpZiB0aGUgdGFyZ2V0IGlzIHN0aWxsIGFjdGl2ZS4gVGhpc1xuICAgICAgICAgICAgLy8gZW5zdXJlcyB0aGF0IHdlIGNhbiBwZXJzaXN0IHRoZSB1cGRhdGVkIHRhcmdldCBkYXRhIGFsb25nIHdpdGhcbiAgICAgICAgICAgIC8vIHRoZSB1cGRhdGVkIGFzc2lnbm1lbnQuXG4gICAgICAgICAgICAgICAgICAgICAgICBvLnB1c2gobi5xci5yZW1vdmVNYXRjaGluZ0tleXMoZSwgcy5yZW1vdmVkRG9jdW1lbnRzLCBfKS5uZXh0KCgoKSA9PiBuLnFyLmFkZE1hdGNoaW5nS2V5cyhlLCBzLmFkZGVkRG9jdW1lbnRzLCBfKSkpKTtcbiAgICAgICAgICAgIGxldCB1ID0gYS53aXRoU2VxdWVuY2VOdW1iZXIoZS5jdXJyZW50U2VxdWVuY2VOdW1iZXIpO1xuICAgICAgICAgICAgbnVsbCAhPT0gdC50YXJnZXRNaXNtYXRjaGVzLmdldChfKSA/IHUgPSB1LndpdGhSZXN1bWVUb2tlbihCeXRlU3RyaW5nLkVNUFRZX0JZVEVfU1RSSU5HLCBTbmFwc2hvdFZlcnNpb24ubWluKCkpLndpdGhMYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uKFNuYXBzaG90VmVyc2lvbi5taW4oKSkgOiBzLnJlc3VtZVRva2VuLmFwcHJveGltYXRlQnl0ZVNpemUoKSA+IDAgJiYgKHUgPSB1LndpdGhSZXN1bWVUb2tlbihzLnJlc3VtZVRva2VuLCByKSksIFxuICAgICAgICAgICAgaSA9IGkuaW5zZXJ0KF8sIHUpLCBcbiAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgdGFyZ2V0IGRhdGEgaWYgdGhlcmUgYXJlIHRhcmdldCBjaGFuZ2VzIChvciBpZlxuICAgICAgICAgICAgLy8gc3VmZmljaWVudCB0aW1lIGhhcyBwYXNzZWQgc2luY2UgdGhlIGxhc3QgdXBkYXRlKS5cbiAgICAgICAgICAgIC8qKlxuICogUmV0dXJucyB0cnVlIGlmIHRoZSBuZXdUYXJnZXREYXRhIHNob3VsZCBiZSBwZXJzaXN0ZWQgZHVyaW5nIGFuIHVwZGF0ZSBvZlxuICogYW4gYWN0aXZlIHRhcmdldC4gVGFyZ2V0RGF0YSBzaG91bGQgYWx3YXlzIGJlIHBlcnNpc3RlZCB3aGVuIGEgdGFyZ2V0IGlzXG4gKiBiZWluZyByZWxlYXNlZCBhbmQgc2hvdWxkIG5vdCBjYWxsIHRoaXMgZnVuY3Rpb24uXG4gKlxuICogV2hpbGUgdGhlIHRhcmdldCBpcyBhY3RpdmUsIFRhcmdldERhdGEgdXBkYXRlcyBjYW4gYmUgb21pdHRlZCB3aGVuIG5vdGhpbmdcbiAqIGFib3V0IHRoZSB0YXJnZXQgaGFzIGNoYW5nZWQgZXhjZXB0IG1ldGFkYXRhIGxpa2UgdGhlIHJlc3VtZSB0b2tlbiBvclxuICogc25hcHNob3QgdmVyc2lvbi4gT2NjYXNpb25hbGx5IGl0J3Mgd29ydGggdGhlIGV4dHJhIHdyaXRlIHRvIHByZXZlbnQgdGhlc2VcbiAqIHZhbHVlcyBmcm9tIGdldHRpbmcgdG9vIHN0YWxlIGFmdGVyIGEgY3Jhc2gsIGJ1dCB0aGlzIGRvZXNuJ3QgaGF2ZSB0byBiZVxuICogdG9vIGZyZXF1ZW50LlxuICovXG4gICAgICAgICAgICBmdW5jdGlvbiBfX1BSSVZBVEVfc2hvdWxkUGVyc2lzdFRhcmdldERhdGEoZSwgdCwgbikge1xuICAgICAgICAgICAgICAgIC8vIEFsd2F5cyBwZXJzaXN0IHRhcmdldCBkYXRhIGlmIHdlIGRvbid0IGFscmVhZHkgaGF2ZSBhIHJlc3VtZSB0b2tlbi5cbiAgICAgICAgICAgICAgICBpZiAoMCA9PT0gZS5yZXN1bWVUb2tlbi5hcHByb3hpbWF0ZUJ5dGVTaXplKCkpIHJldHVybiAhMDtcbiAgICAgICAgICAgICAgICAvLyBEb24ndCBhbGxvdyByZXN1bWUgdG9rZW4gY2hhbmdlcyB0byBiZSBidWZmZXJlZCBpbmRlZmluaXRlbHkuIFRoaXNcbiAgICAgICAgICAgICAgICAvLyBhbGxvd3MgdXMgdG8gYmUgcmVhc29uYWJseSB1cC10by1kYXRlIGFmdGVyIGEgY3Jhc2ggYW5kIGF2b2lkcyBuZWVkaW5nXG4gICAgICAgICAgICAgICAgLy8gdG8gbG9vcCBvdmVyIGFsbCBhY3RpdmUgcXVlcmllcyBvbiBzaHV0ZG93bi4gRXNwZWNpYWxseSBpbiB0aGUgYnJvd3NlclxuICAgICAgICAgICAgICAgIC8vIHdlIG1heSBub3QgZ2V0IHRpbWUgdG8gZG8gYW55dGhpbmcgaW50ZXJlc3Rpbmcgd2hpbGUgdGhlIGN1cnJlbnQgdGFiIGlzXG4gICAgICAgICAgICAgICAgLy8gY2xvc2luZy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQuc25hcHNob3RWZXJzaW9uLnRvTWljcm9zZWNvbmRzKCkgLSBlLnNuYXBzaG90VmVyc2lvbi50b01pY3Jvc2Vjb25kcygpID49IDNlOCkgcmV0dXJuICEwO1xuICAgICAgICAgICAgICAgIC8vIE90aGVyd2lzZSBpZiB0aGUgb25seSB0aGluZyB0aGF0IGhhcyBjaGFuZ2VkIGFib3V0IGEgdGFyZ2V0IGlzIGl0cyByZXN1bWVcbiAgICAgICAgICAgICAgICAvLyB0b2tlbiBpdCdzIG5vdCB3b3J0aCBwZXJzaXN0aW5nLiBOb3RlIHRoYXQgdGhlIFJlbW90ZVN0b3JlIGtlZXBzIGFuXG4gICAgICAgICAgICAgICAgLy8gaW4tbWVtb3J5IHZpZXcgb2YgdGhlIGN1cnJlbnRseSBhY3RpdmUgdGFyZ2V0cyB3aGljaCBpbmNsdWRlcyB0aGUgY3VycmVudFxuICAgICAgICAgICAgICAgIC8vIHJlc3VtZSB0b2tlbiwgc28gc3RyZWFtIGZhaWx1cmUgb3IgdXNlciBjaGFuZ2VzIHdpbGwgc3RpbGwgdXNlIGFuXG4gICAgICAgICAgICAgICAgLy8gdXAtdG8tZGF0ZSByZXN1bWUgdG9rZW4gcmVnYXJkbGVzcyBvZiB3aGF0IHdlIGRvIGhlcmUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuLmFkZGVkRG9jdW1lbnRzLnNpemUgKyBuLm1vZGlmaWVkRG9jdW1lbnRzLnNpemUgKyBuLnJlbW92ZWREb2N1bWVudHMuc2l6ZSA+IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKipcbiAqIE5vdGlmaWVzIGxvY2FsIHN0b3JlIG9mIHRoZSBjaGFuZ2VkIHZpZXdzIHRvIGxvY2FsbHkgcGluIGRvY3VtZW50cy5cbiAqLyAoYSwgdSwgcykgJiYgby5wdXNoKG4ucXIudXBkYXRlVGFyZ2V0RGF0YShlLCB1KSk7XG4gICAgICAgIH0pKTtcbiAgICAgICAgbGV0IF8gPSBfX1BSSVZBVEVfbXV0YWJsZURvY3VtZW50TWFwKCksIGEgPSBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKTtcbiAgICAgICAgLy8gSEFDSzogVGhlIG9ubHkgcmVhc29uIHdlIGFsbG93IGEgbnVsbCBzbmFwc2hvdCB2ZXJzaW9uIGlzIHNvIHRoYXQgd2VcbiAgICAgICAgLy8gY2FuIHN5bnRoZXNpemUgcmVtb3RlIGV2ZW50cyB3aGVuIHdlIGdldCBwZXJtaXNzaW9uIGRlbmllZCBlcnJvcnMgd2hpbGVcbiAgICAgICAgLy8gdHJ5aW5nIHRvIHJlc29sdmUgdGhlIHN0YXRlIG9mIGEgbG9jYWxseSBjYWNoZWQgZG9jdW1lbnQgdGhhdCBpcyBpblxuICAgICAgICAvLyBsaW1iby5cbiAgICAgICAgaWYgKHQuZG9jdW1lbnRVcGRhdGVzLmZvckVhY2goKHIgPT4ge1xuICAgICAgICAgICAgdC5yZXNvbHZlZExpbWJvRG9jdW1lbnRzLmhhcyhyKSAmJiBvLnB1c2gobi5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZS51cGRhdGVMaW1ib0RvY3VtZW50KGUsIHIpKTtcbiAgICAgICAgfSkpLCBcbiAgICAgICAgLy8gRWFjaCBsb29wIGl0ZXJhdGlvbiBvbmx5IGFmZmVjdHMgaXRzIFwib3duXCIgZG9jLCBzbyBpdCdzIHNhZmUgdG8gZ2V0IGFsbFxuICAgICAgICAvLyB0aGUgcmVtb3RlIGRvY3VtZW50cyBpbiBhZHZhbmNlIGluIGEgc2luZ2xlIGNhbGwuXG4gICAgICAgIG8ucHVzaChfX1BSSVZBVEVfcG9wdWxhdGVEb2N1bWVudENoYW5nZUJ1ZmZlcihlLCBzLCB0LmRvY3VtZW50VXBkYXRlcykubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBfID0gZS51cywgYSA9IGUuY3M7XG4gICAgICAgIH0pKSksICFyLmlzRXF1YWwoU25hcHNob3RWZXJzaW9uLm1pbigpKSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IG4ucXIuZ2V0TGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbihlKS5uZXh0KCh0ID0+IG4ucXIuc2V0VGFyZ2V0c01ldGFkYXRhKGUsIGUuY3VycmVudFNlcXVlbmNlTnVtYmVyLCByKSkpO1xuICAgICAgICAgICAgby5wdXNoKHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW5jZVByb21pc2Uud2FpdEZvcihvKS5uZXh0KCgoKSA9PiBzLmFwcGx5KGUpKSkubmV4dCgoKCkgPT4gbi5sb2NhbERvY3VtZW50cy5nZXRMb2NhbFZpZXdPZkRvY3VtZW50cyhlLCBfLCBhKSkpLm5leHQoKCgpID0+IF8pKTtcbiAgICB9KSkudGhlbigoZSA9PiAobi50cyA9IGksIGUpKSk7XG59XG5cbi8qKlxuICogUG9wdWxhdGVzIGRvY3VtZW50IGNoYW5nZSBidWZmZXIgd2l0aCBkb2N1bWVudHMgZnJvbSBiYWNrZW5kIG9yIGEgYnVuZGxlLlxuICogUmV0dXJucyB0aGUgZG9jdW1lbnQgY2hhbmdlcyByZXN1bHRpbmcgZnJvbSBhcHBseWluZyB0aG9zZSBkb2N1bWVudHMsIGFuZFxuICogYWxzbyBhIHNldCBvZiBkb2N1bWVudHMgd2hvc2UgZXhpc3RlbmNlIHN0YXRlIGFyZSBjaGFuZ2VkIGFzIGEgcmVzdWx0LlxuICpcbiAqIEBwYXJhbSB0eG4gLSBUcmFuc2FjdGlvbiB0byB1c2UgdG8gcmVhZCBleGlzdGluZyBkb2N1bWVudHMgZnJvbSBzdG9yYWdlLlxuICogQHBhcmFtIGRvY3VtZW50QnVmZmVyIC0gRG9jdW1lbnQgYnVmZmVyIHRvIGNvbGxlY3QgdGhlIHJlc3VsdGVkIGNoYW5nZXMgdG8gYmVcbiAqICAgICAgICBhcHBsaWVkIHRvIHN0b3JhZ2UuXG4gKiBAcGFyYW0gZG9jdW1lbnRzIC0gRG9jdW1lbnRzIHRvIGJlIGFwcGxpZWQuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3BvcHVsYXRlRG9jdW1lbnRDaGFuZ2VCdWZmZXIoZSwgdCwgbikge1xuICAgIGxldCByID0gX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCksIGkgPSBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKTtcbiAgICByZXR1cm4gbi5mb3JFYWNoKChlID0+IHIgPSByLmFkZChlKSkpLCB0LmdldEVudHJpZXMoZSwgcikubmV4dCgoZSA9PiB7XG4gICAgICAgIGxldCByID0gX19QUklWQVRFX211dGFibGVEb2N1bWVudE1hcCgpO1xuICAgICAgICByZXR1cm4gbi5mb3JFYWNoKCgobiwgcykgPT4ge1xuICAgICAgICAgICAgY29uc3QgbyA9IGUuZ2V0KG4pO1xuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgc2VlIGlmIHRoZXJlIGlzIGEgZXhpc3RlbmNlIHN0YXRlIGNoYW5nZSBmb3IgdGhpcyBkb2N1bWVudC5cbiAgICAgICAgICAgICAgICAgICAgICAgIHMuaXNGb3VuZERvY3VtZW50KCkgIT09IG8uaXNGb3VuZERvY3VtZW50KCkgJiYgKGkgPSBpLmFkZChuKSksIFxuICAgICAgICAgICAgLy8gTm90ZTogVGhlIG9yZGVyIG9mIHRoZSBzdGVwcyBiZWxvdyBpcyBpbXBvcnRhbnQsIHNpbmNlIHdlIHdhbnRcbiAgICAgICAgICAgIC8vIHRvIGVuc3VyZSB0aGF0IHJlamVjdGVkIGxpbWJvIHJlc29sdXRpb25zICh3aGljaCBmYWJyaWNhdGVcbiAgICAgICAgICAgIC8vIE5vRG9jdW1lbnRzIHdpdGggU25hcHNob3RWZXJzaW9uLm1pbigpKSBuZXZlciBhZGQgZG9jdW1lbnRzIHRvXG4gICAgICAgICAgICAvLyBjYWNoZS5cbiAgICAgICAgICAgIHMuaXNOb0RvY3VtZW50KCkgJiYgcy52ZXJzaW9uLmlzRXF1YWwoU25hcHNob3RWZXJzaW9uLm1pbigpKSA/IChcbiAgICAgICAgICAgIC8vIE5vRG9jdW1lbnRzIHdpdGggU25hcHNob3RWZXJzaW9uLm1pbigpIGFyZSB1c2VkIGluIG1hbnVmYWN0dXJlZFxuICAgICAgICAgICAgLy8gZXZlbnRzLiBXZSByZW1vdmUgdGhlc2UgZG9jdW1lbnRzIGZyb20gY2FjaGUgc2luY2Ugd2UgbG9zdFxuICAgICAgICAgICAgLy8gYWNjZXNzLlxuICAgICAgICAgICAgdC5yZW1vdmVFbnRyeShuLCBzLnJlYWRUaW1lKSwgciA9IHIuaW5zZXJ0KG4sIHMpKSA6ICFvLmlzVmFsaWREb2N1bWVudCgpIHx8IHMudmVyc2lvbi5jb21wYXJlVG8oby52ZXJzaW9uKSA+IDAgfHwgMCA9PT0gcy52ZXJzaW9uLmNvbXBhcmVUbyhvLnZlcnNpb24pICYmIG8uaGFzUGVuZGluZ1dyaXRlcyA/ICh0LmFkZEVudHJ5KHMpLCBcbiAgICAgICAgICAgIHIgPSByLmluc2VydChuLCBzKSkgOiBfX1BSSVZBVEVfbG9nRGVidWcoXCJMb2NhbFN0b3JlXCIsIFwiSWdub3Jpbmcgb3V0ZGF0ZWQgd2F0Y2ggdXBkYXRlIGZvciBcIiwgbiwgXCIuIEN1cnJlbnQgdmVyc2lvbjpcIiwgby52ZXJzaW9uLCBcIiBXYXRjaCB2ZXJzaW9uOlwiLCBzLnZlcnNpb24pO1xuICAgICAgICB9KSksIHtcbiAgICAgICAgICAgIHVzOiByLFxuICAgICAgICAgICAgY3M6IGlcbiAgICAgICAgfTtcbiAgICB9KSk7XG59XG5cbi8qKlxuICogR2V0cyB0aGUgbXV0YXRpb24gYmF0Y2ggYWZ0ZXIgdGhlIHBhc3NlZCBpbiBiYXRjaElkIGluIHRoZSBtdXRhdGlvbiBxdWV1ZVxuICogb3IgbnVsbCBpZiBlbXB0eS5cbiAqIEBwYXJhbSBhZnRlckJhdGNoSWQgLSBJZiBwcm92aWRlZCwgdGhlIGJhdGNoIHRvIHNlYXJjaCBhZnRlci5cbiAqIEByZXR1cm5zIFRoZSBuZXh0IG11dGF0aW9uIG9yIG51bGwgaWYgdGhlcmUgd2Fzbid0IG9uZS5cbiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX2xvY2FsU3RvcmVHZXROZXh0TXV0YXRpb25CYXRjaChlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJHZXQgbmV4dCBtdXRhdGlvbiBiYXRjaFwiLCBcInJlYWRvbmx5XCIsIChlID0+ICh2b2lkIDAgPT09IHQgJiYgKHQgPSAtMSksIFxuICAgIG4ubXV0YXRpb25RdWV1ZS5nZXROZXh0TXV0YXRpb25CYXRjaEFmdGVyQmF0Y2hJZChlLCB0KSkpKTtcbn1cblxuLyoqXG4gKiBSZWFkcyB0aGUgY3VycmVudCB2YWx1ZSBvZiBhIERvY3VtZW50IHdpdGggYSBnaXZlbiBrZXkgb3IgbnVsbCBpZiBub3RcbiAqIGZvdW5kIC0gdXNlZCBmb3IgdGVzdGluZy5cbiAqL1xuLyoqXG4gKiBBc3NpZ25zIHRoZSBnaXZlbiB0YXJnZXQgYW4gaW50ZXJuYWwgSUQgc28gdGhhdCBpdHMgcmVzdWx0cyBjYW4gYmUgcGlubmVkIHNvXG4gKiB0aGV5IGRvbid0IGdldCBHQydkLiBBIHRhcmdldCBtdXN0IGJlIGFsbG9jYXRlZCBpbiB0aGUgbG9jYWwgc3RvcmUgYmVmb3JlXG4gKiB0aGUgc3RvcmUgY2FuIGJlIHVzZWQgdG8gbWFuYWdlIGl0cyB2aWV3LlxuICpcbiAqIEFsbG9jYXRpbmcgYW4gYWxyZWFkeSBhbGxvY2F0ZWQgYFRhcmdldGAgd2lsbCByZXR1cm4gdGhlIGV4aXN0aW5nIGBUYXJnZXREYXRhYFxuICogZm9yIHRoYXQgYFRhcmdldGAuXG4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV9sb2NhbFN0b3JlQWxsb2NhdGVUYXJnZXQoZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiQWxsb2NhdGUgdGFyZ2V0XCIsIFwicmVhZHdyaXRlXCIsIChlID0+IHtcbiAgICAgICAgbGV0IHI7XG4gICAgICAgIHJldHVybiBuLnFyLmdldFRhcmdldERhdGEoZSwgdCkubmV4dCgoaSA9PiBpID8gKFxuICAgICAgICAvLyBUaGlzIHRhcmdldCBoYXMgYmVlbiBsaXN0ZW5lZCB0byBwcmV2aW91c2x5LCBzbyByZXVzZSB0aGVcbiAgICAgICAgLy8gcHJldmlvdXMgdGFyZ2V0SUQuXG4gICAgICAgIC8vIFRPRE8obWNnKTogZnJlc2hlbiBsYXN0IGFjY2Vzc2VkIGRhdGU/XG4gICAgICAgIHIgPSBpLCBQZXJzaXN0ZW5jZVByb21pc2UucmVzb2x2ZShyKSkgOiBuLnFyLmFsbG9jYXRlVGFyZ2V0SWQoZSkubmV4dCgoaSA9PiAociA9IG5ldyBUYXJnZXREYXRhKHQsIGksIFwiVGFyZ2V0UHVycG9zZUxpc3RlblwiIC8qIFRhcmdldFB1cnBvc2UuTGlzdGVuICovICwgZS5jdXJyZW50U2VxdWVuY2VOdW1iZXIpLCBcbiAgICAgICAgbi5xci5hZGRUYXJnZXREYXRhKGUsIHIpLm5leHQoKCgpID0+IHIpKSkpKSkpO1xuICAgIH0pKS50aGVuKChlID0+IHtcbiAgICAgICAgLy8gSWYgTXVsdGktVGFiIGlzIGVuYWJsZWQsIHRoZSBleGlzdGluZyB0YXJnZXQgZGF0YSBtYXkgYmUgbmV3ZXIgdGhhblxuICAgICAgICAvLyB0aGUgaW4tbWVtb3J5IGRhdGFcbiAgICAgICAgY29uc3QgciA9IG4udHMuZ2V0KGUudGFyZ2V0SWQpO1xuICAgICAgICByZXR1cm4gKG51bGwgPT09IHIgfHwgZS5zbmFwc2hvdFZlcnNpb24uY29tcGFyZVRvKHIuc25hcHNob3RWZXJzaW9uKSA+IDApICYmIChuLnRzID0gbi50cy5pbnNlcnQoZS50YXJnZXRJZCwgZSksIFxuICAgICAgICBuLm5zLnNldCh0LCBlLnRhcmdldElkKSksIGU7XG4gICAgfSkpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIFRhcmdldERhdGEgYXMgc2VlbiBieSB0aGUgTG9jYWxTdG9yZSwgaW5jbHVkaW5nIHVwZGF0ZXMgdGhhdCBtYXlcbiAqIGhhdmUgbm90IHlldCBiZWVuIHBlcnNpc3RlZCB0byB0aGUgVGFyZ2V0Q2FjaGUuXG4gKi9cbi8vIFZpc2libGUgZm9yIHRlc3RpbmcuXG4vKipcbiAqIFVucGlucyBhbGwgdGhlIGRvY3VtZW50cyBhc3NvY2lhdGVkIHdpdGggdGhlIGdpdmVuIHRhcmdldC4gSWZcbiAqIGBrZWVwUGVyc2lzdGVkVGFyZ2V0RGF0YWAgaXMgc2V0IHRvIGZhbHNlIGFuZCBFYWdlciBHQyBlbmFibGVkLCB0aGUgbWV0aG9kXG4gKiBkaXJlY3RseSByZW1vdmVzIHRoZSBhc3NvY2lhdGVkIHRhcmdldCBkYXRhIGZyb20gdGhlIHRhcmdldCBjYWNoZS5cbiAqXG4gKiBSZWxlYXNpbmcgYSBub24tZXhpc3RpbmcgYFRhcmdldGAgaXMgYSBuby1vcC5cbiAqL1xuLy8gUE9SVElORyBOT1RFOiBga2VlcFBlcnNpc3RlZFRhcmdldERhdGFgIGlzIG11bHRpLXRhYiBvbmx5LlxuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX2xvY2FsU3RvcmVSZWxlYXNlVGFyZ2V0KGUsIHQsIG4pIHtcbiAgICBjb25zdCByID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKSwgaSA9IHIudHMuZ2V0KHQpLCBzID0gbiA/IFwicmVhZHdyaXRlXCIgOiBcInJlYWR3cml0ZS1wcmltYXJ5XCI7XG4gICAgdHJ5IHtcbiAgICAgICAgbiB8fCBhd2FpdCByLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiUmVsZWFzZSB0YXJnZXRcIiwgcywgKGUgPT4gci5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZS5yZW1vdmVUYXJnZXQoZSwgaSkpKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGlmICghX19QUklWQVRFX2lzSW5kZXhlZERiVHJhbnNhY3Rpb25FcnJvcihlKSkgdGhyb3cgZTtcbiAgICAgICAgLy8gQWxsIGByZWxlYXNlVGFyZ2V0YCBkb2VzIGlzIHJlY29yZCB0aGUgZmluYWwgbWV0YWRhdGEgc3RhdGUgZm9yIHRoZVxuICAgICAgICAvLyB0YXJnZXQsIGJ1dCB3ZSd2ZSBiZWVuIHJlY29yZGluZyB0aGlzIHBlcmlvZGljYWxseSBkdXJpbmcgdGFyZ2V0XG4gICAgICAgIC8vIGFjdGl2aXR5LiBJZiB3ZSBsb3NlIHRoaXMgd3JpdGUgdGhpcyBjb3VsZCBjYXVzZSBhIHZlcnkgc2xpZ2h0XG4gICAgICAgIC8vIGRpZmZlcmVuY2UgaW4gdGhlIG9yZGVyIG9mIHRhcmdldCBkZWxldGlvbiBkdXJpbmcgR0MsIGJ1dCB3ZVxuICAgICAgICAvLyBkb24ndCBkZWZpbmUgZXhhY3QgTFJVIHNlbWFudGljcyBzbyB0aGlzIGlzIGFjY2VwdGFibGUuXG4gICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkxvY2FsU3RvcmVcIiwgYEZhaWxlZCB0byB1cGRhdGUgc2VxdWVuY2UgbnVtYmVycyBmb3IgdGFyZ2V0ICR7dH06ICR7ZX1gKTtcbiAgICB9XG4gICAgci50cyA9IHIudHMucmVtb3ZlKHQpLCByLm5zLmRlbGV0ZShpLnRhcmdldCk7XG59XG5cbi8qKlxuICogUnVucyB0aGUgc3BlY2lmaWVkIHF1ZXJ5IGFnYWluc3QgdGhlIGxvY2FsIHN0b3JlIGFuZCByZXR1cm5zIHRoZSByZXN1bHRzLFxuICogcG90ZW50aWFsbHkgdGFraW5nIGFkdmFudGFnZSBvZiBxdWVyeSBkYXRhIGZyb20gcHJldmlvdXMgZXhlY3V0aW9ucyAoc3VjaFxuICogYXMgdGhlIHNldCBvZiByZW1vdGUga2V5cykuXG4gKlxuICogQHBhcmFtIHVzZVByZXZpb3VzUmVzdWx0cyAtIFdoZXRoZXIgcmVzdWx0cyBmcm9tIHByZXZpb3VzIGV4ZWN1dGlvbnMgY2FuXG4gKiBiZSB1c2VkIHRvIG9wdGltaXplIHRoaXMgcXVlcnkgZXhlY3V0aW9uLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9sb2NhbFN0b3JlRXhlY3V0ZVF1ZXJ5KGUsIHQsIG4pIHtcbiAgICBjb25zdCByID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICBsZXQgaSA9IFNuYXBzaG90VmVyc2lvbi5taW4oKSwgcyA9IF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpO1xuICAgIHJldHVybiByLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiRXhlY3V0ZSBxdWVyeVwiLCBcInJlYWR3cml0ZVwiLCAoLy8gVXNlIHJlYWR3cml0ZSBpbnN0ZWFkIG9mIHJlYWRvbmx5IHNvIGluZGV4ZXMgY2FuIGJlIGNyZWF0ZWRcbiAgICAvLyBVc2UgcmVhZHdyaXRlIGluc3RlYWQgb2YgcmVhZG9ubHkgc28gaW5kZXhlcyBjYW4gYmUgY3JlYXRlZFxuICAgIGUgPT4gZnVuY3Rpb24gX19QUklWQVRFX2xvY2FsU3RvcmVHZXRUYXJnZXREYXRhKGUsIHQsIG4pIHtcbiAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSksIGkgPSByLm5zLmdldChuKTtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gaSA/IFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKHIudHMuZ2V0KGkpKSA6IHIucXIuZ2V0VGFyZ2V0RGF0YSh0LCBuKTtcbiAgICB9KHIsIGUsIF9fUFJJVkFURV9xdWVyeVRvVGFyZ2V0KHQpKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgaWYgKHQpIHJldHVybiBpID0gdC5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uLCByLnFyLmdldE1hdGNoaW5nS2V5c0ZvclRhcmdldElkKGUsIHQudGFyZ2V0SWQpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgcyA9IGU7XG4gICAgICAgIH0pKTtcbiAgICB9KSkubmV4dCgoKCkgPT4gci5lcy5nZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5KGUsIHQsIG4gPyBpIDogU25hcHNob3RWZXJzaW9uLm1pbigpLCBuID8gcyA6IF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpKSkpLm5leHQoKGUgPT4gKF9fUFJJVkFURV9zZXRNYXhSZWFkVGltZShyLCBfX1BSSVZBVEVfcXVlcnlDb2xsZWN0aW9uR3JvdXAodCksIGUpLCBcbiAgICB7XG4gICAgICAgIGRvY3VtZW50czogZSxcbiAgICAgICAgbHM6IHNcbiAgICB9KSkpKSk7XG59XG5cbi8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG5mdW5jdGlvbiBfX1BSSVZBVEVfbG9jYWxTdG9yZUdldENhY2hlZFRhcmdldChlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSksIHIgPSBfX1BSSVZBVEVfZGVidWdDYXN0KG4ucXIpLCBpID0gbi50cy5nZXQodCk7XG4gICAgcmV0dXJuIGkgPyBQcm9taXNlLnJlc29sdmUoaS50YXJnZXQpIDogbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkdldCB0YXJnZXQgZGF0YVwiLCBcInJlYWRvbmx5XCIsIChlID0+IHIuX3QoZSwgdCkubmV4dCgoZSA9PiBlID8gZS50YXJnZXQgOiBudWxsKSkpKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBzZXQgb2YgZG9jdW1lbnRzIHRoYXQgaGF2ZSBiZWVuIHVwZGF0ZWQgc2luY2UgdGhlIGxhc3QgY2FsbC5cbiAqIElmIHRoaXMgaXMgdGhlIGZpcnN0IGNhbGwsIHJldHVybnMgdGhlIHNldCBvZiBjaGFuZ2VzIHNpbmNlIGNsaWVudFxuICogaW5pdGlhbGl6YXRpb24uIEZ1cnRoZXIgaW52b2NhdGlvbnMgd2lsbCByZXR1cm4gZG9jdW1lbnQgdGhhdCBoYXZlIGNoYW5nZWRcbiAqIHNpbmNlIHRoZSBwcmlvciBjYWxsLlxuICovXG4vLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuZnVuY3Rpb24gX19QUklWQVRFX2xvY2FsU3RvcmVHZXROZXdEb2N1bWVudENoYW5nZXMoZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpLCByID0gbi5ycy5nZXQodCkgfHwgU25hcHNob3RWZXJzaW9uLm1pbigpO1xuICAgIC8vIEdldCB0aGUgY3VycmVudCBtYXhpbXVtIHJlYWQgdGltZSBmb3IgdGhlIGNvbGxlY3Rpb24uIFRoaXMgc2hvdWxkIGFsd2F5c1xuICAgIC8vIGV4aXN0LCBidXQgdG8gcmVkdWNlIHRoZSBjaGFuY2UgZm9yIHJlZ3Jlc3Npb25zIHdlIGRlZmF1bHQgdG9cbiAgICAvLyBTbmFwc2hvdFZlcnNpb24uTWluKClcbiAgICAvLyBUT0RPKGluZGV4aW5nKTogQ29uc2lkZXIgcmVtb3ZpbmcgdGhlIGRlZmF1bHQgdmFsdWUuXG4gICAgICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiR2V0IG5ldyBkb2N1bWVudCBjaGFuZ2VzXCIsIFwicmVhZG9ubHlcIiwgKGUgPT4gbi5zcy5nZXRBbGxGcm9tQ29sbGVjdGlvbkdyb3VwKGUsIHQsIF9fUFJJVkFURV9uZXdJbmRleE9mZnNldFN1Y2Nlc3NvckZyb21SZWFkVGltZShyLCAtMSksIFxuICAgIC8qIGxpbWl0PSAqLyBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUikpKS50aGVuKChlID0+IChfX1BSSVZBVEVfc2V0TWF4UmVhZFRpbWUobiwgdCwgZSksIFxuICAgIGUpKSk7XG59XG5cbi8qKiBTZXRzIHRoZSBjb2xsZWN0aW9uIGdyb3VwJ3MgbWF4aW11bSByZWFkIHRpbWUgZnJvbSB0aGUgZ2l2ZW4gZG9jdW1lbnRzLiAqL1xuLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbmZ1bmN0aW9uIF9fUFJJVkFURV9zZXRNYXhSZWFkVGltZShlLCB0LCBuKSB7XG4gICAgbGV0IHIgPSBlLnJzLmdldCh0KSB8fCBTbmFwc2hvdFZlcnNpb24ubWluKCk7XG4gICAgbi5mb3JFYWNoKCgoZSwgdCkgPT4ge1xuICAgICAgICB0LnJlYWRUaW1lLmNvbXBhcmVUbyhyKSA+IDAgJiYgKHIgPSB0LnJlYWRUaW1lKTtcbiAgICB9KSksIGUucnMuc2V0KHQsIHIpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgdGFyZ2V0IHVzaW5nIHRoZSBnaXZlbiBidW5kbGUgbmFtZSwgd2hpY2ggd2lsbCBiZSB1c2VkIHRvXG4gKiBob2xkIHRoZSBrZXlzIG9mIGFsbCBkb2N1bWVudHMgZnJvbSB0aGUgYnVuZGxlIGluIHF1ZXJ5LWRvY3VtZW50IG1hcHBpbmdzLlxuICogVGhpcyBlbnN1cmVzIHRoYXQgdGhlIGxvYWRlZCBkb2N1bWVudHMgZG8gbm90IGdldCBnYXJiYWdlIGNvbGxlY3RlZFxuICogcmlnaHQgYXdheS5cbiAqL1xuLyoqXG4gKiBBcHBsaWVzIHRoZSBkb2N1bWVudHMgZnJvbSBhIGJ1bmRsZSB0byB0aGUgXCJncm91bmQtc3RhdGVcIiAocmVtb3RlKVxuICogZG9jdW1lbnRzLlxuICpcbiAqIExvY2FsRG9jdW1lbnRzIGFyZSByZS1jYWxjdWxhdGVkIGlmIHRoZXJlIGFyZSByZW1haW5pbmcgbXV0YXRpb25zIGluIHRoZVxuICogcXVldWUuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9sb2NhbFN0b3JlQXBwbHlCdW5kbGVkRG9jdW1lbnRzKGUsIHQsIG4sIHIpIHtcbiAgICBjb25zdCBpID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICBsZXQgcyA9IF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpLCBvID0gX19QUklWQVRFX211dGFibGVEb2N1bWVudE1hcCgpO1xuICAgIGZvciAoY29uc3QgZSBvZiBuKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0LmhzKGUubWV0YWRhdGEubmFtZSk7XG4gICAgICAgIGUuZG9jdW1lbnQgJiYgKHMgPSBzLmFkZChuKSk7XG4gICAgICAgIGNvbnN0IHIgPSB0LlBzKGUpO1xuICAgICAgICByLnNldFJlYWRUaW1lKHQuSXMoZS5tZXRhZGF0YS5yZWFkVGltZSkpLCBvID0gby5pbnNlcnQobiwgcik7XG4gICAgfVxuICAgIGNvbnN0IF8gPSBpLnNzLm5ld0NoYW5nZUJ1ZmZlcih7XG4gICAgICAgIHRyYWNrUmVtb3ZhbHM6ICEwXG4gICAgfSksIGEgPSBhd2FpdCBfX1BSSVZBVEVfbG9jYWxTdG9yZUFsbG9jYXRlVGFyZ2V0KGksIGZ1bmN0aW9uIF9fUFJJVkFURV91bWJyZWxsYVRhcmdldChlKSB7XG4gICAgICAgIC8vIEl0IGlzIE9LIHRoYXQgdGhlIHBhdGggdXNlZCBmb3IgdGhlIHF1ZXJ5IGlzIG5vdCB2YWxpZCwgYmVjYXVzZSB0aGlzIHdpbGxcbiAgICAgICAgLy8gbm90IGJlIHJlYWQgYW5kIHF1ZXJpZWQuXG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfcXVlcnlUb1RhcmdldChfX1BSSVZBVEVfbmV3UXVlcnlGb3JQYXRoKFJlc291cmNlUGF0aC5mcm9tU3RyaW5nKGBfX2J1bmRsZV9fL2RvY3MvJHtlfWApKSk7XG4gICAgfShyKSk7XG4gICAgLy8gQWxsb2NhdGVzIGEgdGFyZ2V0IHRvIGhvbGQgYWxsIGRvY3VtZW50IGtleXMgZnJvbSB0aGUgYnVuZGxlLCBzdWNoIHRoYXRcbiAgICAvLyB0aGV5IHdpbGwgbm90IGdldCBnYXJiYWdlIGNvbGxlY3RlZCByaWdodCBhd2F5LlxuICAgICAgICByZXR1cm4gaS5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkFwcGx5IGJ1bmRsZSBkb2N1bWVudHNcIiwgXCJyZWFkd3JpdGVcIiwgKGUgPT4gX19QUklWQVRFX3BvcHVsYXRlRG9jdW1lbnRDaGFuZ2VCdWZmZXIoZSwgXywgbykubmV4dCgodCA9PiAoXy5hcHBseShlKSwgXG4gICAgdCkpKS5uZXh0KCh0ID0+IGkucXIucmVtb3ZlTWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQoZSwgYS50YXJnZXRJZCkubmV4dCgoKCkgPT4gaS5xci5hZGRNYXRjaGluZ0tleXMoZSwgcywgYS50YXJnZXRJZCkpKS5uZXh0KCgoKSA9PiBpLmxvY2FsRG9jdW1lbnRzLmdldExvY2FsVmlld09mRG9jdW1lbnRzKGUsIHQudXMsIHQuY3MpKSkubmV4dCgoKCkgPT4gdC51cykpKSkpKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgcHJvbWlzZSBvZiBhIGJvb2xlYW4gdG8gaW5kaWNhdGUgaWYgdGhlIGdpdmVuIGJ1bmRsZSBoYXMgYWxyZWFkeVxuICogYmVlbiBsb2FkZWQgYW5kIHRoZSBjcmVhdGUgdGltZSBpcyBuZXdlciB0aGFuIHRoZSBjdXJyZW50IGxvYWRpbmcgYnVuZGxlLlxuICovXG4vKipcbiAqIFNhdmVzIHRoZSBnaXZlbiBgTmFtZWRRdWVyeWAgdG8gbG9jYWwgcGVyc2lzdGVuY2UuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9sb2NhbFN0b3JlU2F2ZU5hbWVkUXVlcnkoZSwgdCwgbiA9IF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpKSB7XG4gICAgLy8gQWxsb2NhdGUgYSB0YXJnZXQgZm9yIHRoZSBuYW1lZCBxdWVyeSBzdWNoIHRoYXQgaXQgY2FuIGJlIHJlc3VtZWRcbiAgICAvLyBmcm9tIGFzc29jaWF0ZWQgcmVhZCB0aW1lIGlmIHVzZXJzIHVzZSBpdCB0byBsaXN0ZW4uXG4gICAgLy8gTk9URTogdGhpcyBhbHNvIG1lYW5zIGlmIG5vIGNvcnJlc3BvbmRpbmcgdGFyZ2V0IGV4aXN0cywgdGhlIG5ldyB0YXJnZXRcbiAgICAvLyB3aWxsIHJlbWFpbiBhY3RpdmUgYW5kIHdpbGwgbm90IGdldCBjb2xsZWN0ZWQsIHVubGVzcyB1c2VycyBoYXBwZW4gdG9cbiAgICAvLyB1bmxpc3RlbiB0aGUgcXVlcnkgc29tZWhvdy5cbiAgICBjb25zdCByID0gYXdhaXQgX19QUklWQVRFX2xvY2FsU3RvcmVBbGxvY2F0ZVRhcmdldChlLCBfX1BSSVZBVEVfcXVlcnlUb1RhcmdldChfX1BSSVZBVEVfZnJvbUJ1bmRsZWRRdWVyeSh0LmJ1bmRsZWRRdWVyeSkpKSwgaSA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgcmV0dXJuIGkucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJTYXZlIG5hbWVkIHF1ZXJ5XCIsIFwicmVhZHdyaXRlXCIsIChlID0+IHtcbiAgICAgICAgY29uc3QgcyA9IF9fUFJJVkFURV9mcm9tVmVyc2lvbih0LnJlYWRUaW1lKTtcbiAgICAgICAgLy8gU2ltcGx5IHNhdmUgdGhlIHF1ZXJ5IGl0c2VsZiBpZiBpdCBpcyBvbGRlciB0aGFuIHdoYXQgdGhlIFNESyBhbHJlYWR5XG4gICAgICAgIC8vIGhhcy5cbiAgICAgICAgICAgICAgICBpZiAoci5zbmFwc2hvdFZlcnNpb24uY29tcGFyZVRvKHMpID49IDApIHJldHVybiBpLktyLnNhdmVOYW1lZFF1ZXJ5KGUsIHQpO1xuICAgICAgICAvLyBVcGRhdGUgZXhpc3RpbmcgdGFyZ2V0IGRhdGEgYmVjYXVzZSB0aGUgcXVlcnkgZnJvbSB0aGUgYnVuZGxlIGlzIG5ld2VyLlxuICAgICAgICAgICAgICAgIGNvbnN0IG8gPSByLndpdGhSZXN1bWVUb2tlbihCeXRlU3RyaW5nLkVNUFRZX0JZVEVfU1RSSU5HLCBzKTtcbiAgICAgICAgcmV0dXJuIGkudHMgPSBpLnRzLmluc2VydChvLnRhcmdldElkLCBvKSwgaS5xci51cGRhdGVUYXJnZXREYXRhKGUsIG8pLm5leHQoKCgpID0+IGkucXIucmVtb3ZlTWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQoZSwgci50YXJnZXRJZCkpKS5uZXh0KCgoKSA9PiBpLnFyLmFkZE1hdGNoaW5nS2V5cyhlLCBuLCByLnRhcmdldElkKSkpLm5leHQoKCgpID0+IGkuS3Iuc2F2ZU5hbWVkUXVlcnkoZSwgdCkpKTtcbiAgICB9KSk7XG59XG5cbi8qKiBBc3NlbWJsZXMgdGhlIGtleSBmb3IgYSBjbGllbnQgc3RhdGUgaW4gV2ViU3RvcmFnZSAqL1xuZnVuY3Rpb24gY3JlYXRlV2ViU3RvcmFnZUNsaWVudFN0YXRlS2V5KGUsIHQpIHtcbiAgICByZXR1cm4gYGZpcmVzdG9yZV9jbGllbnRzXyR7ZX1fJHt0fWA7XG59XG5cbi8vIFRoZSBmb3JtYXQgb2YgdGhlIFdlYlN0b3JhZ2Uga2V5IHRoYXQgc3RvcmVzIHRoZSBtdXRhdGlvbiBzdGF0ZSBpczpcbi8vICAgICBmaXJlc3RvcmVfbXV0YXRpb25zXzxwZXJzaXN0ZW5jZV9wcmVmaXg+XzxiYXRjaF9pZD5cbi8vICAgICAoZm9yIHVuYXV0aGVudGljYXRlZCB1c2Vycylcbi8vIG9yOiBmaXJlc3RvcmVfbXV0YXRpb25zXzxwZXJzaXN0ZW5jZV9wcmVmaXg+XzxiYXRjaF9pZD5fPHVzZXJfdWlkPlxuXG4vLyAndXNlcl91aWQnIGlzIGxhc3QgdG8gYXZvaWQgbmVlZGluZyB0byBlc2NhcGUgJ18nIGNoYXJhY3RlcnMgdGhhdCBpdCBtaWdodFxuLy8gY29udGFpbi5cbi8qKiBBc3NlbWJsZXMgdGhlIGtleSBmb3IgYSBtdXRhdGlvbiBiYXRjaCBpbiBXZWJTdG9yYWdlICovXG5mdW5jdGlvbiBjcmVhdGVXZWJTdG9yYWdlTXV0YXRpb25CYXRjaEtleShlLCB0LCBuKSB7XG4gICAgbGV0IHIgPSBgZmlyZXN0b3JlX211dGF0aW9uc18ke2V9XyR7bn1gO1xuICAgIHJldHVybiB0LmlzQXV0aGVudGljYXRlZCgpICYmIChyICs9IGBfJHt0LnVpZH1gKSwgcjtcbn1cblxuLy8gVGhlIGZvcm1hdCBvZiB0aGUgV2ViU3RvcmFnZSBrZXkgdGhhdCBzdG9yZXMgYSBxdWVyeSB0YXJnZXQncyBtZXRhZGF0YSBpczpcbi8vICAgICBmaXJlc3RvcmVfdGFyZ2V0c188cGVyc2lzdGVuY2VfcHJlZml4Pl88dGFyZ2V0X2lkPlxuLyoqIEFzc2VtYmxlcyB0aGUga2V5IGZvciBhIHF1ZXJ5IHN0YXRlIGluIFdlYlN0b3JhZ2UgKi9cbmZ1bmN0aW9uIGNyZWF0ZVdlYlN0b3JhZ2VRdWVyeVRhcmdldE1ldGFkYXRhS2V5KGUsIHQpIHtcbiAgICByZXR1cm4gYGZpcmVzdG9yZV90YXJnZXRzXyR7ZX1fJHt0fWA7XG59XG5cbi8vIFRoZSBXZWJTdG9yYWdlIHByZWZpeCB0aGF0IHN0b3JlcyB0aGUgcHJpbWFyeSB0YWIncyBvbmxpbmUgc3RhdGUuIFRoZVxuLy8gZm9ybWF0IG9mIHRoZSBrZXkgaXM6XG4vLyAgICAgZmlyZXN0b3JlX29ubGluZV9zdGF0ZV88cGVyc2lzdGVuY2VfcHJlZml4PlxuLyoqXG4gKiBIb2xkcyB0aGUgc3RhdGUgb2YgYSBtdXRhdGlvbiBiYXRjaCwgaW5jbHVkaW5nIGl0cyB1c2VyIElELCBiYXRjaCBJRCBhbmRcbiAqIHdoZXRoZXIgdGhlIGJhdGNoIGlzICdwZW5kaW5nJywgJ2Fja25vd2xlZGdlZCcgb3IgJ3JlamVjdGVkJy5cbiAqL1xuLy8gVmlzaWJsZSBmb3IgdGVzdGluZ1xuY2xhc3MgX19QUklWQVRFX011dGF0aW9uTWV0YWRhdGEge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4sIHIpIHtcbiAgICAgICAgdGhpcy51c2VyID0gZSwgdGhpcy5iYXRjaElkID0gdCwgdGhpcy5zdGF0ZSA9IG4sIHRoaXMuZXJyb3IgPSByO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBNdXRhdGlvbk1ldGFkYXRhIGZyb20gaXRzIEpTT04gcmVwcmVzZW50YXRpb24gaW4gV2ViU3RvcmFnZS5cbiAgICAgKiBMb2dzIGEgd2FybmluZyBhbmQgcmV0dXJucyBudWxsIGlmIHRoZSBmb3JtYXQgb2YgdGhlIGRhdGEgaXMgbm90IHZhbGlkLlxuICAgICAqLyAgICBzdGF0aWMgVHMoZSwgdCwgbikge1xuICAgICAgICBjb25zdCByID0gSlNPTi5wYXJzZShuKTtcbiAgICAgICAgbGV0IGksIHMgPSBcIm9iamVjdFwiID09IHR5cGVvZiByICYmIC0xICE9PSBbIFwicGVuZGluZ1wiLCBcImFja25vd2xlZGdlZFwiLCBcInJlamVjdGVkXCIgXS5pbmRleE9mKHIuc3RhdGUpICYmICh2b2lkIDAgPT09IHIuZXJyb3IgfHwgXCJvYmplY3RcIiA9PSB0eXBlb2Ygci5lcnJvcik7XG4gICAgICAgIHJldHVybiBzICYmIHIuZXJyb3IgJiYgKHMgPSBcInN0cmluZ1wiID09IHR5cGVvZiByLmVycm9yLm1lc3NhZ2UgJiYgXCJzdHJpbmdcIiA9PSB0eXBlb2Ygci5lcnJvci5jb2RlLCBcbiAgICAgICAgcyAmJiAoaSA9IG5ldyBGaXJlc3RvcmVFcnJvcihyLmVycm9yLmNvZGUsIHIuZXJyb3IubWVzc2FnZSkpKSwgcyA/IG5ldyBfX1BSSVZBVEVfTXV0YXRpb25NZXRhZGF0YShlLCB0LCByLnN0YXRlLCBpKSA6IChfX1BSSVZBVEVfbG9nRXJyb3IoXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBgRmFpbGVkIHRvIHBhcnNlIG11dGF0aW9uIHN0YXRlIGZvciBJRCAnJHt0fSc6ICR7bn1gKSwgXG4gICAgICAgIG51bGwpO1xuICAgIH1cbiAgICBFcygpIHtcbiAgICAgICAgY29uc3QgZSA9IHtcbiAgICAgICAgICAgIHN0YXRlOiB0aGlzLnN0YXRlLFxuICAgICAgICAgICAgdXBkYXRlVGltZU1zOiBEYXRlLm5vdygpXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0aGlzLmVycm9yICYmIChlLmVycm9yID0ge1xuICAgICAgICAgICAgY29kZTogdGhpcy5lcnJvci5jb2RlLFxuICAgICAgICAgICAgbWVzc2FnZTogdGhpcy5lcnJvci5tZXNzYWdlXG4gICAgICAgIH0pLCBKU09OLnN0cmluZ2lmeShlKTtcbiAgICB9XG59XG5cbi8qKlxuICogSG9sZHMgdGhlIHN0YXRlIG9mIGEgcXVlcnkgdGFyZ2V0LCBpbmNsdWRpbmcgaXRzIHRhcmdldCBJRCBhbmQgd2hldGhlciB0aGVcbiAqIHRhcmdldCBpcyAnbm90LWN1cnJlbnQnLCAnY3VycmVudCcgb3IgJ3JlamVjdGVkJy5cbiAqL1xuLy8gVmlzaWJsZSBmb3IgdGVzdGluZ1xuY2xhc3MgX19QUklWQVRFX1F1ZXJ5VGFyZ2V0TWV0YWRhdGEge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4pIHtcbiAgICAgICAgdGhpcy50YXJnZXRJZCA9IGUsIHRoaXMuc3RhdGUgPSB0LCB0aGlzLmVycm9yID0gbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGEgUXVlcnlUYXJnZXRNZXRhZGF0YSBmcm9tIGl0cyBKU09OIHJlcHJlc2VudGF0aW9uIGluIFdlYlN0b3JhZ2UuXG4gICAgICogTG9ncyBhIHdhcm5pbmcgYW5kIHJldHVybnMgbnVsbCBpZiB0aGUgZm9ybWF0IG9mIHRoZSBkYXRhIGlzIG5vdCB2YWxpZC5cbiAgICAgKi8gICAgc3RhdGljIFRzKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IEpTT04ucGFyc2UodCk7XG4gICAgICAgIGxldCByLCBpID0gXCJvYmplY3RcIiA9PSB0eXBlb2YgbiAmJiAtMSAhPT0gWyBcIm5vdC1jdXJyZW50XCIsIFwiY3VycmVudFwiLCBcInJlamVjdGVkXCIgXS5pbmRleE9mKG4uc3RhdGUpICYmICh2b2lkIDAgPT09IG4uZXJyb3IgfHwgXCJvYmplY3RcIiA9PSB0eXBlb2Ygbi5lcnJvcik7XG4gICAgICAgIHJldHVybiBpICYmIG4uZXJyb3IgJiYgKGkgPSBcInN0cmluZ1wiID09IHR5cGVvZiBuLmVycm9yLm1lc3NhZ2UgJiYgXCJzdHJpbmdcIiA9PSB0eXBlb2Ygbi5lcnJvci5jb2RlLCBcbiAgICAgICAgaSAmJiAociA9IG5ldyBGaXJlc3RvcmVFcnJvcihuLmVycm9yLmNvZGUsIG4uZXJyb3IubWVzc2FnZSkpKSwgaSA/IG5ldyBfX1BSSVZBVEVfUXVlcnlUYXJnZXRNZXRhZGF0YShlLCBuLnN0YXRlLCByKSA6IChfX1BSSVZBVEVfbG9nRXJyb3IoXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBgRmFpbGVkIHRvIHBhcnNlIHRhcmdldCBzdGF0ZSBmb3IgSUQgJyR7ZX0nOiAke3R9YCksIFxuICAgICAgICBudWxsKTtcbiAgICB9XG4gICAgRXMoKSB7XG4gICAgICAgIGNvbnN0IGUgPSB7XG4gICAgICAgICAgICBzdGF0ZTogdGhpcy5zdGF0ZSxcbiAgICAgICAgICAgIHVwZGF0ZVRpbWVNczogRGF0ZS5ub3coKVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGhpcy5lcnJvciAmJiAoZS5lcnJvciA9IHtcbiAgICAgICAgICAgIGNvZGU6IHRoaXMuZXJyb3IuY29kZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuZXJyb3IubWVzc2FnZVxuICAgICAgICB9KSwgSlNPTi5zdHJpbmdpZnkoZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIFRoaXMgY2xhc3MgcmVwcmVzZW50cyB0aGUgaW1tdXRhYmxlIENsaWVudFN0YXRlIGZvciBhIGNsaWVudCByZWFkIGZyb21cbiAqIFdlYlN0b3JhZ2UsIGNvbnRhaW5pbmcgdGhlIGxpc3Qgb2YgYWN0aXZlIHF1ZXJ5IHRhcmdldHMuXG4gKi8gY2xhc3MgX19QUklWQVRFX1JlbW90ZUNsaWVudFN0YXRlIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMuY2xpZW50SWQgPSBlLCB0aGlzLmFjdGl2ZVRhcmdldElkcyA9IHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhIFJlbW90ZUNsaWVudFN0YXRlIGZyb20gdGhlIEpTT04gcmVwcmVzZW50YXRpb24gaW4gV2ViU3RvcmFnZS5cbiAgICAgKiBMb2dzIGEgd2FybmluZyBhbmQgcmV0dXJucyBudWxsIGlmIHRoZSBmb3JtYXQgb2YgdGhlIGRhdGEgaXMgbm90IHZhbGlkLlxuICAgICAqLyAgICBzdGF0aWMgVHMoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gSlNPTi5wYXJzZSh0KTtcbiAgICAgICAgbGV0IHIgPSBcIm9iamVjdFwiID09IHR5cGVvZiBuICYmIG4uYWN0aXZlVGFyZ2V0SWRzIGluc3RhbmNlb2YgQXJyYXksIGkgPSBfX1BSSVZBVEVfdGFyZ2V0SWRTZXQoKTtcbiAgICAgICAgZm9yIChsZXQgZSA9IDA7IHIgJiYgZSA8IG4uYWN0aXZlVGFyZ2V0SWRzLmxlbmd0aDsgKytlKSByID0gaXNTYWZlSW50ZWdlcihuLmFjdGl2ZVRhcmdldElkc1tlXSksIFxuICAgICAgICBpID0gaS5hZGQobi5hY3RpdmVUYXJnZXRJZHNbZV0pO1xuICAgICAgICByZXR1cm4gciA/IG5ldyBfX1BSSVZBVEVfUmVtb3RlQ2xpZW50U3RhdGUoZSwgaSkgOiAoX19QUklWQVRFX2xvZ0Vycm9yKFwiU2hhcmVkQ2xpZW50U3RhdGVcIiwgYEZhaWxlZCB0byBwYXJzZSBjbGllbnQgZGF0YSBmb3IgaW5zdGFuY2UgJyR7ZX0nOiAke3R9YCksIFxuICAgICAgICBudWxsKTtcbiAgICB9XG59XG5cbi8qKlxuICogVGhpcyBjbGFzcyByZXByZXNlbnRzIHRoZSBvbmxpbmUgc3RhdGUgZm9yIGFsbCBjbGllbnRzIHBhcnRpY2lwYXRpbmcgaW5cbiAqIG11bHRpLXRhYi4gVGhlIG9ubGluZSBzdGF0ZSBpcyBvbmx5IHdyaXR0ZW4gdG8gYnkgdGhlIHByaW1hcnkgY2xpZW50LCBhbmRcbiAqIHVzZWQgaW4gc2Vjb25kYXJ5IGNsaWVudHMgdG8gdXBkYXRlIHRoZWlyIHF1ZXJ5IHZpZXdzLlxuICovIGNsYXNzIF9fUFJJVkFURV9TaGFyZWRPbmxpbmVTdGF0ZSB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICB0aGlzLmNsaWVudElkID0gZSwgdGhpcy5vbmxpbmVTdGF0ZSA9IHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhIFNoYXJlZE9ubGluZVN0YXRlIGZyb20gaXRzIEpTT04gcmVwcmVzZW50YXRpb24gaW4gV2ViU3RvcmFnZS5cbiAgICAgKiBMb2dzIGEgd2FybmluZyBhbmQgcmV0dXJucyBudWxsIGlmIHRoZSBmb3JtYXQgb2YgdGhlIGRhdGEgaXMgbm90IHZhbGlkLlxuICAgICAqLyAgICBzdGF0aWMgVHMoZSkge1xuICAgICAgICBjb25zdCB0ID0gSlNPTi5wYXJzZShlKTtcbiAgICAgICAgcmV0dXJuIFwib2JqZWN0XCIgPT0gdHlwZW9mIHQgJiYgLTEgIT09IFsgXCJVbmtub3duXCIsIFwiT25saW5lXCIsIFwiT2ZmbGluZVwiIF0uaW5kZXhPZih0Lm9ubGluZVN0YXRlKSAmJiBcInN0cmluZ1wiID09IHR5cGVvZiB0LmNsaWVudElkID8gbmV3IF9fUFJJVkFURV9TaGFyZWRPbmxpbmVTdGF0ZSh0LmNsaWVudElkLCB0Lm9ubGluZVN0YXRlKSA6IChfX1BSSVZBVEVfbG9nRXJyb3IoXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBgRmFpbGVkIHRvIHBhcnNlIG9ubGluZSBzdGF0ZTogJHtlfWApLCBcbiAgICAgICAgbnVsbCk7XG4gICAgfVxufVxuXG4vKipcbiAqIE1ldGFkYXRhIHN0YXRlIG9mIHRoZSBsb2NhbCBjbGllbnQuIFVubGlrZSBgUmVtb3RlQ2xpZW50U3RhdGVgLCB0aGlzIGNsYXNzIGlzXG4gKiBtdXRhYmxlIGFuZCBrZWVwcyB0cmFjayBvZiBhbGwgcGVuZGluZyBtdXRhdGlvbnMsIHdoaWNoIGFsbG93cyB1cyB0b1xuICogdXBkYXRlIHRoZSByYW5nZSBvZiBwZW5kaW5nIG11dGF0aW9uIGJhdGNoIElEcyBhcyBuZXcgbXV0YXRpb25zIGFyZSBhZGRlZCBvclxuICogcmVtb3ZlZC5cbiAqXG4gKiBUaGUgZGF0YSBpbiBgTG9jYWxDbGllbnRTdGF0ZWAgaXMgbm90IHJlYWQgZnJvbSBXZWJTdG9yYWdlIGFuZCBpbnN0ZWFkXG4gKiB1cGRhdGVkIHZpYSBpdHMgaW5zdGFuY2UgbWV0aG9kcy4gVGhlIHVwZGF0ZWQgc3RhdGUgY2FuIGJlIHNlcmlhbGl6ZWQgdmlhXG4gKiBgdG9XZWJTdG9yYWdlSlNPTigpYC5cbiAqL1xuLy8gVmlzaWJsZSBmb3IgdGVzdGluZy5cbmNsYXNzIF9fUFJJVkFURV9Mb2NhbENsaWVudFN0YXRlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5hY3RpdmVUYXJnZXRJZHMgPSBfX1BSSVZBVEVfdGFyZ2V0SWRTZXQoKTtcbiAgICB9XG4gICAgZHMoZSkge1xuICAgICAgICB0aGlzLmFjdGl2ZVRhcmdldElkcyA9IHRoaXMuYWN0aXZlVGFyZ2V0SWRzLmFkZChlKTtcbiAgICB9XG4gICAgQXMoZSkge1xuICAgICAgICB0aGlzLmFjdGl2ZVRhcmdldElkcyA9IHRoaXMuYWN0aXZlVGFyZ2V0SWRzLmRlbGV0ZShlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29udmVydHMgdGhpcyBlbnRyeSBpbnRvIGEgSlNPTi1lbmNvZGVkIGZvcm1hdCB3ZSBjYW4gdXNlIGZvciBXZWJTdG9yYWdlLlxuICAgICAqIERvZXMgbm90IGVuY29kZSBgY2xpZW50SWRgIGFzIGl0IGlzIHBhcnQgb2YgdGhlIGtleSBpbiBXZWJTdG9yYWdlLlxuICAgICAqLyAgICBFcygpIHtcbiAgICAgICAgY29uc3QgZSA9IHtcbiAgICAgICAgICAgIGFjdGl2ZVRhcmdldElkczogdGhpcy5hY3RpdmVUYXJnZXRJZHMudG9BcnJheSgpLFxuICAgICAgICAgICAgdXBkYXRlVGltZU1zOiBEYXRlLm5vdygpXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShlKTtcbiAgICB9XG59XG5cbi8qKlxuICogYFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZWAgdXNlcyBXZWJTdG9yYWdlICh3aW5kb3cubG9jYWxTdG9yYWdlKSBhcyB0aGVcbiAqIGJhY2tpbmcgc3RvcmUgZm9yIHRoZSBTaGFyZWRDbGllbnRTdGF0ZS4gSXQga2VlcHMgdHJhY2sgb2YgYWxsIGFjdGl2ZVxuICogY2xpZW50cyBhbmQgc3VwcG9ydHMgbW9kaWZpY2F0aW9ucyBvZiB0aGUgbG9jYWwgY2xpZW50J3MgZGF0YS5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuLCByLCBpKSB7XG4gICAgICAgIHRoaXMud2luZG93ID0gZSwgdGhpcy5zaSA9IHQsIHRoaXMucGVyc2lzdGVuY2VLZXkgPSBuLCB0aGlzLlJzID0gciwgdGhpcy5zeW5jRW5naW5lID0gbnVsbCwgXG4gICAgICAgIHRoaXMub25saW5lU3RhdGVIYW5kbGVyID0gbnVsbCwgdGhpcy5zZXF1ZW5jZU51bWJlckhhbmRsZXIgPSBudWxsLCB0aGlzLlZzID0gdGhpcy5mcy5iaW5kKHRoaXMpLCBcbiAgICAgICAgdGhpcy5ncyA9IG5ldyBTb3J0ZWRNYXAoX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IpLCB0aGlzLnN0YXJ0ZWQgPSAhMSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYXB0dXJlcyBXZWJTdG9yYWdlIGV2ZW50cyB0aGF0IG9jY3VyIGJlZm9yZSBgc3RhcnQoKWAgaXMgY2FsbGVkLiBUaGVzZVxuICAgICAgICAgKiBldmVudHMgYXJlIHJlcGxheWVkIG9uY2UgYFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZWAgaXMgc3RhcnRlZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucHMgPSBbXTtcbiAgICAgICAgLy8gRXNjYXBlIHRoZSBzcGVjaWFsIGNoYXJhY3RlcnMgbWVudGlvbmVkIGhlcmU6XG4gICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvR3VpZGUvUmVndWxhcl9FeHByZXNzaW9uc1xuICAgICAgICBjb25zdCBzID0gbi5yZXBsYWNlKC9bLiorP14ke30oKXxbXFxdXFxcXF0vZywgXCJcXFxcJCZcIik7XG4gICAgICAgIHRoaXMuc3RvcmFnZSA9IHRoaXMud2luZG93LmxvY2FsU3RvcmFnZSwgdGhpcy5jdXJyZW50VXNlciA9IGksIHRoaXMueXMgPSBjcmVhdGVXZWJTdG9yYWdlQ2xpZW50U3RhdGVLZXkodGhpcy5wZXJzaXN0ZW5jZUtleSwgdGhpcy5ScyksIFxuICAgICAgICB0aGlzLndzID0gXG4gICAgICAgIC8qKiBBc3NlbWJsZXMgdGhlIGtleSBmb3IgdGhlIGN1cnJlbnQgc2VxdWVuY2UgbnVtYmVyLiAqL1xuICAgICAgICBmdW5jdGlvbiBjcmVhdGVXZWJTdG9yYWdlU2VxdWVuY2VOdW1iZXJLZXkoZSkge1xuICAgICAgICAgICAgcmV0dXJuIGBmaXJlc3RvcmVfc2VxdWVuY2VfbnVtYmVyXyR7ZX1gO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovICh0aGlzLnBlcnNpc3RlbmNlS2V5KSwgdGhpcy5ncyA9IHRoaXMuZ3MuaW5zZXJ0KHRoaXMuUnMsIG5ldyBfX1BSSVZBVEVfTG9jYWxDbGllbnRTdGF0ZSksIFxuICAgICAgICB0aGlzLlNzID0gbmV3IFJlZ0V4cChgXmZpcmVzdG9yZV9jbGllbnRzXyR7c31fKFteX10qKSRgKSwgdGhpcy5icyA9IG5ldyBSZWdFeHAoYF5maXJlc3RvcmVfbXV0YXRpb25zXyR7c31fKFxcXFxkKykoPzpfKC4qKSk/JGApLCBcbiAgICAgICAgdGhpcy5EcyA9IG5ldyBSZWdFeHAoYF5maXJlc3RvcmVfdGFyZ2V0c18ke3N9XyhcXFxcZCspJGApLCB0aGlzLkNzID0gXG4gICAgICAgIC8qKiBBc3NlbWJsZXMgdGhlIGtleSBmb3IgdGhlIG9ubGluZSBzdGF0ZSBvZiB0aGUgcHJpbWFyeSB0YWIuICovXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZVdlYlN0b3JhZ2VPbmxpbmVTdGF0ZUtleShlKSB7XG4gICAgICAgICAgICByZXR1cm4gYGZpcmVzdG9yZV9vbmxpbmVfc3RhdGVfJHtlfWA7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVGhlIFdlYlN0b3JhZ2UgcHJlZml4IHRoYXQgcGxheXMgYXMgYSBldmVudCB0byBpbmRpY2F0ZSB0aGUgcmVtb3RlIGRvY3VtZW50c1xuICAgICAgICAvLyBtaWdodCBoYXZlIGNoYW5nZWQgZHVlIHRvIHNvbWUgc2Vjb25kYXJ5IHRhYnMgbG9hZGluZyBhIGJ1bmRsZS5cbiAgICAgICAgLy8gZm9ybWF0IG9mIHRoZSBrZXkgaXM6XG4gICAgICAgIC8vICAgICBmaXJlc3RvcmVfYnVuZGxlX2xvYWRlZF92Ml88cGVyc2lzdGVuY2VLZXk+XG4gICAgICAgIC8vIFRoZSB2ZXJzaW9uIGVuZGluZyB3aXRoIFwidjJcIiBzdG9yZXMgdGhlIGxpc3Qgb2YgbW9kaWZpZWQgY29sbGVjdGlvbiBncm91cHMuXG4gICAgICAgICh0aGlzLnBlcnNpc3RlbmNlS2V5KSwgdGhpcy52cyA9IGZ1bmN0aW9uIGNyZWF0ZUJ1bmRsZUxvYWRlZEtleShlKSB7XG4gICAgICAgICAgICByZXR1cm4gYGZpcmVzdG9yZV9idW5kbGVfbG9hZGVkX3YyXyR7ZX1gO1xuICAgICAgICB9XG4gICAgICAgIC8vIFRoZSBXZWJTdG9yYWdlIGtleSBwcmVmaXggZm9yIHRoZSBrZXkgdGhhdCBzdG9yZXMgdGhlIGxhc3Qgc2VxdWVuY2UgbnVtYmVyIGFsbG9jYXRlZC4gVGhlIGtleVxuICAgICAgICAvLyBsb29rcyBsaWtlICdmaXJlc3RvcmVfc2VxdWVuY2VfbnVtYmVyXzxwZXJzaXN0ZW5jZV9wcmVmaXg+Jy5cbiAgICAgICAgKHRoaXMucGVyc2lzdGVuY2VLZXkpLCBcbiAgICAgICAgLy8gUmF0aGVyIHRoYW4gYWRkaW5nIHRoZSBzdG9yYWdlIG9ic2VydmVyIGR1cmluZyBzdGFydCgpLCB3ZSBhZGQgdGhlXG4gICAgICAgIC8vIHN0b3JhZ2Ugb2JzZXJ2ZXIgZHVyaW5nIGluaXRpYWxpemF0aW9uLiBUaGlzIGVuc3VyZXMgdGhhdCB3ZSBjb2xsZWN0XG4gICAgICAgIC8vIGV2ZW50cyBiZWZvcmUgb3RoZXIgY29tcG9uZW50cyBwb3B1bGF0ZSB0aGVpciBpbml0aWFsIHN0YXRlIChkdXJpbmcgdGhlaXJcbiAgICAgICAgLy8gcmVzcGVjdGl2ZSBzdGFydCgpIGNhbGxzKS4gT3RoZXJ3aXNlLCB3ZSBtaWdodCBmb3IgZXhhbXBsZSBtaXNzIGFcbiAgICAgICAgLy8gbXV0YXRpb24gdGhhdCBpcyBhZGRlZCBhZnRlciBMb2NhbFN0b3JlJ3Mgc3RhcnQoKSBwcm9jZXNzZWQgdGhlIGV4aXN0aW5nXG4gICAgICAgIC8vIG11dGF0aW9ucyBidXQgYmVmb3JlIHdlIG9ic2VydmUgV2ViU3RvcmFnZSBldmVudHMuXG4gICAgICAgIHRoaXMud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzdG9yYWdlXCIsIHRoaXMuVnMpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyAndHJ1ZScgaWYgV2ViU3RvcmFnZSBpcyBhdmFpbGFibGUgaW4gdGhlIGN1cnJlbnQgZW52aXJvbm1lbnQuICovICAgIHN0YXRpYyBEKGUpIHtcbiAgICAgICAgcmV0dXJuICEoIWUgfHwgIWUubG9jYWxTdG9yYWdlKTtcbiAgICB9XG4gICAgYXN5bmMgc3RhcnQoKSB7XG4gICAgICAgIC8vIFJldHJpZXZlIHRoZSBsaXN0IG9mIGV4aXN0aW5nIGNsaWVudHMgdG8gYmFja2ZpbGwgdGhlIGRhdGEgaW5cbiAgICAgICAgLy8gU2hhcmVkQ2xpZW50U3RhdGUuXG4gICAgICAgIGNvbnN0IGUgPSBhd2FpdCB0aGlzLnN5bmNFbmdpbmUuQmkoKTtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIGUpIHtcbiAgICAgICAgICAgIGlmICh0ID09PSB0aGlzLlJzKSBjb250aW51ZTtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLmdldEl0ZW0oY3JlYXRlV2ViU3RvcmFnZUNsaWVudFN0YXRlS2V5KHRoaXMucGVyc2lzdGVuY2VLZXksIHQpKTtcbiAgICAgICAgICAgIGlmIChlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9SZW1vdGVDbGllbnRTdGF0ZS5Ucyh0LCBlKTtcbiAgICAgICAgICAgICAgICBuICYmICh0aGlzLmdzID0gdGhpcy5ncy5pbnNlcnQobi5jbGllbnRJZCwgbikpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuRnMoKTtcbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlcmUgaXMgYW4gZXhpc3Rpbmcgb25saW5lIHN0YXRlIGFuZCBjYWxsIHRoZSBjYWxsYmFjayBoYW5kbGVyXG4gICAgICAgIC8vIGlmIGFwcGxpY2FibGUuXG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLnN0b3JhZ2UuZ2V0SXRlbSh0aGlzLkNzKTtcbiAgICAgICAgaWYgKHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLk1zKHQpO1xuICAgICAgICAgICAgZSAmJiB0aGlzLnhzKGUpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiB0aGlzLnBzKSB0aGlzLmZzKGUpO1xuICAgICAgICB0aGlzLnBzID0gW10sIFxuICAgICAgICAvLyBSZWdpc3RlciBhIHdpbmRvdyB1bmxvYWQgaG9vayB0byByZW1vdmUgdGhlIGNsaWVudCBtZXRhZGF0YSBlbnRyeSBmcm9tXG4gICAgICAgIC8vIFdlYlN0b3JhZ2UgZXZlbiBpZiBgc2h1dGRvd24oKWAgd2FzIG5vdCBjYWxsZWQuXG4gICAgICAgIHRoaXMud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJwYWdlaGlkZVwiLCAoKCkgPT4gdGhpcy5zaHV0ZG93bigpKSksIHRoaXMuc3RhcnRlZCA9ICEwO1xuICAgIH1cbiAgICB3cml0ZVNlcXVlbmNlTnVtYmVyKGUpIHtcbiAgICAgICAgdGhpcy5zZXRJdGVtKHRoaXMud3MsIEpTT04uc3RyaW5naWZ5KGUpKTtcbiAgICB9XG4gICAgZ2V0QWxsQWN0aXZlUXVlcnlUYXJnZXRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5Pcyh0aGlzLmdzKTtcbiAgICB9XG4gICAgaXNBY3RpdmVRdWVyeVRhcmdldChlKSB7XG4gICAgICAgIGxldCB0ID0gITE7XG4gICAgICAgIHJldHVybiB0aGlzLmdzLmZvckVhY2goKChuLCByKSA9PiB7XG4gICAgICAgICAgICByLmFjdGl2ZVRhcmdldElkcy5oYXMoZSkgJiYgKHQgPSAhMCk7XG4gICAgICAgIH0pKSwgdDtcbiAgICB9XG4gICAgYWRkUGVuZGluZ011dGF0aW9uKGUpIHtcbiAgICAgICAgdGhpcy5OcyhlLCBcInBlbmRpbmdcIik7XG4gICAgfVxuICAgIHVwZGF0ZU11dGF0aW9uU3RhdGUoZSwgdCwgbikge1xuICAgICAgICB0aGlzLk5zKGUsIHQsIG4pLCBcbiAgICAgICAgLy8gT25jZSBhIGZpbmFsIG11dGF0aW9uIHJlc3VsdCBpcyBvYnNlcnZlZCBieSBvdGhlciBjbGllbnRzLCB0aGV5IG5vIGxvbmdlclxuICAgICAgICAvLyBhY2Nlc3MgdGhlIG11dGF0aW9uJ3MgbWV0YWRhdGEgZW50cnkuIFNpbmNlIFdlYlN0b3JhZ2UgcmVwbGF5cyBldmVudHNcbiAgICAgICAgLy8gaW4gb3JkZXIsIGl0IGlzIHNhZmUgdG8gZGVsZXRlIHRoZSBlbnRyeSByaWdodCBhZnRlciB1cGRhdGluZyBpdC5cbiAgICAgICAgdGhpcy5CcyhlKTtcbiAgICB9XG4gICAgYWRkTG9jYWxRdWVyeVRhcmdldChlKSB7XG4gICAgICAgIGxldCB0ID0gXCJub3QtY3VycmVudFwiO1xuICAgICAgICAvLyBMb29rdXAgYW4gZXhpc3RpbmcgcXVlcnkgc3RhdGUgaWYgdGhlIHRhcmdldCBJRCB3YXMgYWxyZWFkeSByZWdpc3RlcmVkXG4gICAgICAgIC8vIGJ5IGFub3RoZXIgdGFiXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNBY3RpdmVRdWVyeVRhcmdldChlKSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMuc3RvcmFnZS5nZXRJdGVtKGNyZWF0ZVdlYlN0b3JhZ2VRdWVyeVRhcmdldE1ldGFkYXRhS2V5KHRoaXMucGVyc2lzdGVuY2VLZXksIGUpKTtcbiAgICAgICAgICAgIGlmIChuKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV9RdWVyeVRhcmdldE1ldGFkYXRhLlRzKGUsIG4pO1xuICAgICAgICAgICAgICAgIHIgJiYgKHQgPSByLnN0YXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5Mcy5kcyhlKSwgdGhpcy5GcygpLCB0O1xuICAgIH1cbiAgICByZW1vdmVMb2NhbFF1ZXJ5VGFyZ2V0KGUpIHtcbiAgICAgICAgdGhpcy5Mcy5BcyhlKSwgdGhpcy5GcygpO1xuICAgIH1cbiAgICBpc0xvY2FsUXVlcnlUYXJnZXQoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5Mcy5hY3RpdmVUYXJnZXRJZHMuaGFzKGUpO1xuICAgIH1cbiAgICBjbGVhclF1ZXJ5U3RhdGUoZSkge1xuICAgICAgICB0aGlzLnJlbW92ZUl0ZW0oY3JlYXRlV2ViU3RvcmFnZVF1ZXJ5VGFyZ2V0TWV0YWRhdGFLZXkodGhpcy5wZXJzaXN0ZW5jZUtleSwgZSkpO1xuICAgIH1cbiAgICB1cGRhdGVRdWVyeVN0YXRlKGUsIHQsIG4pIHtcbiAgICAgICAgdGhpcy5rcyhlLCB0LCBuKTtcbiAgICB9XG4gICAgaGFuZGxlVXNlckNoYW5nZShlLCB0LCBuKSB7XG4gICAgICAgIHQuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICB0aGlzLkJzKGUpO1xuICAgICAgICB9KSksIHRoaXMuY3VycmVudFVzZXIgPSBlLCBuLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgdGhpcy5hZGRQZW5kaW5nTXV0YXRpb24oZSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgc2V0T25saW5lU3RhdGUoZSkge1xuICAgICAgICB0aGlzLnFzKGUpO1xuICAgIH1cbiAgICBub3RpZnlCdW5kbGVMb2FkZWQoZSkge1xuICAgICAgICB0aGlzLlFzKGUpO1xuICAgIH1cbiAgICBzaHV0ZG93bigpIHtcbiAgICAgICAgdGhpcy5zdGFydGVkICYmICh0aGlzLndpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwic3RvcmFnZVwiLCB0aGlzLlZzKSwgdGhpcy5yZW1vdmVJdGVtKHRoaXMueXMpLCBcbiAgICAgICAgdGhpcy5zdGFydGVkID0gITEpO1xuICAgIH1cbiAgICBnZXRJdGVtKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuc3RvcmFnZS5nZXRJdGVtKGUpO1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX2xvZ0RlYnVnKFwiU2hhcmVkQ2xpZW50U3RhdGVcIiwgXCJSRUFEXCIsIGUsIHQpLCB0O1xuICAgIH1cbiAgICBzZXRJdGVtKGUsIHQpIHtcbiAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiU2hhcmVkQ2xpZW50U3RhdGVcIiwgXCJTRVRcIiwgZSwgdCksIHRoaXMuc3RvcmFnZS5zZXRJdGVtKGUsIHQpO1xuICAgIH1cbiAgICByZW1vdmVJdGVtKGUpIHtcbiAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiU2hhcmVkQ2xpZW50U3RhdGVcIiwgXCJSRU1PVkVcIiwgZSksIHRoaXMuc3RvcmFnZS5yZW1vdmVJdGVtKGUpO1xuICAgIH1cbiAgICBmcyhlKSB7XG4gICAgICAgIC8vIE5vdGU6IFRoZSBmdW5jdGlvbiBpcyB0eXBlZCB0byB0YWtlIEV2ZW50IHRvIGJlIGludGVyZmFjZS1jb21wYXRpYmxlIHdpdGhcbiAgICAgICAgLy8gYFdpbmRvdy5hZGRFdmVudExpc3RlbmVyYC5cbiAgICAgICAgY29uc3QgdCA9IGU7XG4gICAgICAgIGlmICh0LnN0b3JhZ2VBcmVhID09PSB0aGlzLnN0b3JhZ2UpIHtcbiAgICAgICAgICAgIGlmIChfX1BSSVZBVEVfbG9nRGVidWcoXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBcIkVWRU5UXCIsIHQua2V5LCB0Lm5ld1ZhbHVlKSwgdC5rZXkgPT09IHRoaXMueXMpIHJldHVybiB2b2lkIF9fUFJJVkFURV9sb2dFcnJvcihcIlJlY2VpdmVkIFdlYlN0b3JhZ2Ugbm90aWZpY2F0aW9uIGZvciBsb2NhbCBjaGFuZ2UuIEFub3RoZXIgY2xpZW50IG1pZ2h0IGhhdmUgZ2FyYmFnZS1jb2xsZWN0ZWQgb3VyIHN0YXRlXCIpO1xuICAgICAgICAgICAgdGhpcy5zaS5lbnF1ZXVlUmV0cnlhYmxlKChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc3RhcnRlZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gdC5rZXkpIGlmICh0aGlzLlNzLnRlc3QodC5rZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSB0Lm5ld1ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMuS3ModC5rZXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRzKGUsIG51bGwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLlVzKHQua2V5LCB0Lm5ld1ZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZSkgcmV0dXJuIHRoaXMuJHMoZS5jbGllbnRJZCwgZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5icy50ZXN0KHQua2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IHQubmV3VmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gdGhpcy5Xcyh0LmtleSwgdC5uZXdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUpIHJldHVybiB0aGlzLkdzKGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuRHMudGVzdCh0LmtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSB0Lm5ld1ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMuenModC5rZXksIHQubmV3VmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlKSByZXR1cm4gdGhpcy5qcyhlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0LmtleSA9PT0gdGhpcy5Dcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IHQubmV3VmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gdGhpcy5Ncyh0Lm5ld1ZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZSkgcmV0dXJuIHRoaXMueHMoZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodC5rZXkgPT09IHRoaXMud3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBmdW5jdGlvbiBfX1BSSVZBVEVfZnJvbVdlYlN0b3JhZ2VTZXF1ZW5jZU51bWJlcihlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHQgPSBfX1BSSVZBVEVfTGlzdGVuU2VxdWVuY2UuX2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT0gZSkgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IEpTT04ucGFyc2UoZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9fUFJJVkFURV9oYXJkQXNzZXJ0KFwibnVtYmVyXCIgPT0gdHlwZW9mIG4pLCB0ID0gbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9fUFJJVkFURV9sb2dFcnJvcihcIlNoYXJlZENsaWVudFN0YXRlXCIsIFwiRmFpbGVkIHRvIHJlYWQgc2VxdWVuY2UgbnVtYmVyIGZyb20gV2ViU3RvcmFnZVwiLCBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvKipcbiAqIGBNZW1vcnlTaGFyZWRDbGllbnRTdGF0ZWAgaXMgYSBzaW1wbGUgaW1wbGVtZW50YXRpb24gb2YgU2hhcmVkQ2xpZW50U3RhdGUgZm9yXG4gKiBjbGllbnRzIHVzaW5nIG1lbW9yeSBwZXJzaXN0ZW5jZS4gVGhlIHN0YXRlIGluIHRoaXMgY2xhc3MgcmVtYWlucyBmdWxseVxuICogaXNvbGF0ZWQgYW5kIG5vIHN5bmNocm9uaXphdGlvbiBpcyBwZXJmb3JtZWQuXG4gKi8gKHQubmV3VmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZSAhPT0gX19QUklWQVRFX0xpc3RlblNlcXVlbmNlLl9lICYmIHRoaXMuc2VxdWVuY2VOdW1iZXJIYW5kbGVyKGUpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHQua2V5ID09PSB0aGlzLnZzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gdGhpcy5Icyh0Lm5ld1ZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKGUubWFwKChlID0+IHRoaXMuc3luY0VuZ2luZS5KcyhlKSkpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB0aGlzLnBzLnB1c2godCk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IExzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ncy5nZXQodGhpcy5Scyk7XG4gICAgfVxuICAgIEZzKCkge1xuICAgICAgICB0aGlzLnNldEl0ZW0odGhpcy55cywgdGhpcy5Mcy5FcygpKTtcbiAgICB9XG4gICAgTnMoZSwgdCwgbikge1xuICAgICAgICBjb25zdCByID0gbmV3IF9fUFJJVkFURV9NdXRhdGlvbk1ldGFkYXRhKHRoaXMuY3VycmVudFVzZXIsIGUsIHQsIG4pLCBpID0gY3JlYXRlV2ViU3RvcmFnZU11dGF0aW9uQmF0Y2hLZXkodGhpcy5wZXJzaXN0ZW5jZUtleSwgdGhpcy5jdXJyZW50VXNlciwgZSk7XG4gICAgICAgIHRoaXMuc2V0SXRlbShpLCByLkVzKCkpO1xuICAgIH1cbiAgICBCcyhlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBjcmVhdGVXZWJTdG9yYWdlTXV0YXRpb25CYXRjaEtleSh0aGlzLnBlcnNpc3RlbmNlS2V5LCB0aGlzLmN1cnJlbnRVc2VyLCBlKTtcbiAgICAgICAgdGhpcy5yZW1vdmVJdGVtKHQpO1xuICAgIH1cbiAgICBxcyhlKSB7XG4gICAgICAgIGNvbnN0IHQgPSB7XG4gICAgICAgICAgICBjbGllbnRJZDogdGhpcy5ScyxcbiAgICAgICAgICAgIG9ubGluZVN0YXRlOiBlXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc3RvcmFnZS5zZXRJdGVtKHRoaXMuQ3MsIEpTT04uc3RyaW5naWZ5KHQpKTtcbiAgICB9XG4gICAga3MoZSwgdCwgbikge1xuICAgICAgICBjb25zdCByID0gY3JlYXRlV2ViU3RvcmFnZVF1ZXJ5VGFyZ2V0TWV0YWRhdGFLZXkodGhpcy5wZXJzaXN0ZW5jZUtleSwgZSksIGkgPSBuZXcgX19QUklWQVRFX1F1ZXJ5VGFyZ2V0TWV0YWRhdGEoZSwgdCwgbik7XG4gICAgICAgIHRoaXMuc2V0SXRlbShyLCBpLkVzKCkpO1xuICAgIH1cbiAgICBRcyhlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBKU09OLnN0cmluZ2lmeShBcnJheS5mcm9tKGUpKTtcbiAgICAgICAgdGhpcy5zZXRJdGVtKHRoaXMudnMsIHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBjbGllbnQgc3RhdGUga2V5IGluIFdlYlN0b3JhZ2UuIFJldHVybnMgbnVsbCBpZiB0aGUga2V5IGRvZXMgbm90XG4gICAgICogbWF0Y2ggdGhlIGV4cGVjdGVkIGtleSBmb3JtYXQuXG4gICAgICovICAgIEtzKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuU3MuZXhlYyhlKTtcbiAgICAgICAgcmV0dXJuIHQgPyB0WzFdIDogbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGEgY2xpZW50IHN0YXRlIGluIFdlYlN0b3JhZ2UuIFJldHVybnMgJ251bGwnIGlmIHRoZSB2YWx1ZSBjb3VsZCBub3RcbiAgICAgKiBiZSBwYXJzZWQuXG4gICAgICovICAgIFVzKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuS3MoZSk7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfUmVtb3RlQ2xpZW50U3RhdGUuVHMobiwgdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhIG11dGF0aW9uIGJhdGNoIHN0YXRlIGluIFdlYlN0b3JhZ2UuIFJldHVybnMgJ251bGwnIGlmIHRoZSB2YWx1ZVxuICAgICAqIGNvdWxkIG5vdCBiZSBwYXJzZWQuXG4gICAgICovICAgIFdzKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuYnMuZXhlYyhlKSwgciA9IE51bWJlcihuWzFdKSwgaSA9IHZvaWQgMCAhPT0gblsyXSA/IG5bMl0gOiBudWxsO1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX011dGF0aW9uTWV0YWRhdGEuVHMobmV3IFVzZXIoaSksIHIsIHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBxdWVyeSB0YXJnZXQgc3RhdGUgZnJvbSBXZWJTdG9yYWdlLiBSZXR1cm5zICdudWxsJyBpZiB0aGUgdmFsdWVcbiAgICAgKiBjb3VsZCBub3QgYmUgcGFyc2VkLlxuICAgICAqLyAgICB6cyhlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLkRzLmV4ZWMoZSksIHIgPSBOdW1iZXIoblsxXSk7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfUXVlcnlUYXJnZXRNZXRhZGF0YS5UcyhyLCB0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGFuIG9ubGluZSBzdGF0ZSBmcm9tIFdlYlN0b3JhZ2UuIFJldHVybnMgJ251bGwnIGlmIHRoZSB2YWx1ZVxuICAgICAqIGNvdWxkIG5vdCBiZSBwYXJzZWQuXG4gICAgICovICAgIE1zKGUpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9TaGFyZWRPbmxpbmVTdGF0ZS5UcyhlKTtcbiAgICB9XG4gICAgSHMoZSkge1xuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShlKTtcbiAgICB9XG4gICAgYXN5bmMgR3MoZSkge1xuICAgICAgICBpZiAoZS51c2VyLnVpZCA9PT0gdGhpcy5jdXJyZW50VXNlci51aWQpIHJldHVybiB0aGlzLnN5bmNFbmdpbmUuWXMoZS5iYXRjaElkLCBlLnN0YXRlLCBlLmVycm9yKTtcbiAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiU2hhcmVkQ2xpZW50U3RhdGVcIiwgYElnbm9yaW5nIG11dGF0aW9uIGZvciBub24tYWN0aXZlIHVzZXIgJHtlLnVzZXIudWlkfWApO1xuICAgIH1cbiAgICBqcyhlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN5bmNFbmdpbmUuWnMoZS50YXJnZXRJZCwgZS5zdGF0ZSwgZS5lcnJvcik7XG4gICAgfVxuICAgICRzKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHQgPyB0aGlzLmdzLmluc2VydChlLCB0KSA6IHRoaXMuZ3MucmVtb3ZlKGUpLCByID0gdGhpcy5Pcyh0aGlzLmdzKSwgaSA9IHRoaXMuT3MobiksIHMgPSBbXSwgbyA9IFtdO1xuICAgICAgICByZXR1cm4gaS5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIHIuaGFzKGUpIHx8IHMucHVzaChlKTtcbiAgICAgICAgfSkpLCByLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgaS5oYXMoZSkgfHwgby5wdXNoKGUpO1xuICAgICAgICB9KSksIHRoaXMuc3luY0VuZ2luZS5YcyhzLCBvKS50aGVuKCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmdzID0gbjtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB4cyhlKSB7XG4gICAgICAgIC8vIFdlIGNoZWNrIHdoZXRoZXIgdGhlIGNsaWVudCB0aGF0IHdyb3RlIHRoaXMgb25saW5lIHN0YXRlIGlzIHN0aWxsIGFjdGl2ZVxuICAgICAgICAvLyBieSBjb21wYXJpbmcgaXRzIGNsaWVudCBJRCB0byB0aGUgbGlzdCBvZiBjbGllbnRzIGtlcHQgYWN0aXZlIGluXG4gICAgICAgIC8vIEluZGV4ZWREYi4gSWYgYSBjbGllbnQgZG9lcyBub3QgdXBkYXRlIHRoZWlyIEluZGV4ZWREYiBjbGllbnQgc3RhdGVcbiAgICAgICAgLy8gd2l0aGluIDUgc2Vjb25kcywgaXQgaXMgY29uc2lkZXJlZCBpbmFjdGl2ZSBhbmQgd2UgZG9uJ3QgZW1pdCBhbiBvbmxpbmVcbiAgICAgICAgLy8gc3RhdGUgZXZlbnQuXG4gICAgICAgIHRoaXMuZ3MuZ2V0KGUuY2xpZW50SWQpICYmIHRoaXMub25saW5lU3RhdGVIYW5kbGVyKGUub25saW5lU3RhdGUpO1xuICAgIH1cbiAgICBPcyhlKSB7XG4gICAgICAgIGxldCB0ID0gX19QUklWQVRFX3RhcmdldElkU2V0KCk7XG4gICAgICAgIHJldHVybiBlLmZvckVhY2goKChlLCBuKSA9PiB7XG4gICAgICAgICAgICB0ID0gdC51bmlvbldpdGgobi5hY3RpdmVUYXJnZXRJZHMpO1xuICAgICAgICB9KSksIHQ7XG4gICAgfVxufVxuXG5jbGFzcyBfX1BSSVZBVEVfTWVtb3J5U2hhcmVkQ2xpZW50U3RhdGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmVvID0gbmV3IF9fUFJJVkFURV9Mb2NhbENsaWVudFN0YXRlLCB0aGlzLm5vID0ge30sIHRoaXMub25saW5lU3RhdGVIYW5kbGVyID0gbnVsbCwgXG4gICAgICAgIHRoaXMuc2VxdWVuY2VOdW1iZXJIYW5kbGVyID0gbnVsbDtcbiAgICB9XG4gICAgYWRkUGVuZGluZ011dGF0aW9uKGUpIHtcbiAgICAgICAgLy8gTm8gb3AuXG4gICAgfVxuICAgIHVwZGF0ZU11dGF0aW9uU3RhdGUoZSwgdCwgbikge1xuICAgICAgICAvLyBObyBvcC5cbiAgICB9XG4gICAgYWRkTG9jYWxRdWVyeVRhcmdldChlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVvLmRzKGUpLCB0aGlzLm5vW2VdIHx8IFwibm90LWN1cnJlbnRcIjtcbiAgICB9XG4gICAgdXBkYXRlUXVlcnlTdGF0ZShlLCB0LCBuKSB7XG4gICAgICAgIHRoaXMubm9bZV0gPSB0O1xuICAgIH1cbiAgICByZW1vdmVMb2NhbFF1ZXJ5VGFyZ2V0KGUpIHtcbiAgICAgICAgdGhpcy5lby5BcyhlKTtcbiAgICB9XG4gICAgaXNMb2NhbFF1ZXJ5VGFyZ2V0KGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW8uYWN0aXZlVGFyZ2V0SWRzLmhhcyhlKTtcbiAgICB9XG4gICAgY2xlYXJRdWVyeVN0YXRlKGUpIHtcbiAgICAgICAgZGVsZXRlIHRoaXMubm9bZV07XG4gICAgfVxuICAgIGdldEFsbEFjdGl2ZVF1ZXJ5VGFyZ2V0cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW8uYWN0aXZlVGFyZ2V0SWRzO1xuICAgIH1cbiAgICBpc0FjdGl2ZVF1ZXJ5VGFyZ2V0KGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW8uYWN0aXZlVGFyZ2V0SWRzLmhhcyhlKTtcbiAgICB9XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVvID0gbmV3IF9fUFJJVkFURV9Mb2NhbENsaWVudFN0YXRlLCBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgaGFuZGxlVXNlckNoYW5nZShlLCB0LCBuKSB7XG4gICAgICAgIC8vIE5vIG9wLlxuICAgIH1cbiAgICBzZXRPbmxpbmVTdGF0ZShlKSB7XG4gICAgICAgIC8vIE5vIG9wLlxuICAgIH1cbiAgICBzaHV0ZG93bigpIHt9XG4gICAgd3JpdGVTZXF1ZW5jZU51bWJlcihlKSB7fVxuICAgIG5vdGlmeUJ1bmRsZUxvYWRlZChlKSB7XG4gICAgICAgIC8vIE5vIG9wLlxuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgX19QUklWQVRFX05vb3BDb25uZWN0aXZpdHlNb25pdG9yIHtcbiAgICBybyhlKSB7XG4gICAgICAgIC8vIE5vLW9wLlxuICAgIH1cbiAgICBzaHV0ZG93bigpIHtcbiAgICAgICAgLy8gTm8tb3AuXG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLy8gUmVmZXJlbmNlcyB0byBgd2luZG93YCBhcmUgZ3VhcmRlZCBieSBCcm93c2VyQ29ubmVjdGl2aXR5TW9uaXRvci5pc0F2YWlsYWJsZSgpXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1yZXN0cmljdGVkLWdsb2JhbHMgKi9cbi8qKlxuICogQnJvd3NlciBpbXBsZW1lbnRhdGlvbiBvZiBDb25uZWN0aXZpdHlNb25pdG9yLlxuICovXG5jbGFzcyBfX1BSSVZBVEVfQnJvd3NlckNvbm5lY3Rpdml0eU1vbml0b3Ige1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmlvID0gKCkgPT4gdGhpcy5zbygpLCB0aGlzLm9vID0gKCkgPT4gdGhpcy5fbygpLCB0aGlzLmFvID0gW10sIHRoaXMudW8oKTtcbiAgICB9XG4gICAgcm8oZSkge1xuICAgICAgICB0aGlzLmFvLnB1c2goZSk7XG4gICAgfVxuICAgIHNodXRkb3duKCkge1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm9ubGluZVwiLCB0aGlzLmlvKSwgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJvZmZsaW5lXCIsIHRoaXMub28pO1xuICAgIH1cbiAgICB1bygpIHtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJvbmxpbmVcIiwgdGhpcy5pbyksIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwib2ZmbGluZVwiLCB0aGlzLm9vKTtcbiAgICB9XG4gICAgc28oKSB7XG4gICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkNvbm5lY3Rpdml0eU1vbml0b3JcIiwgXCJOZXR3b3JrIGNvbm5lY3Rpdml0eSBjaGFuZ2VkOiBBVkFJTEFCTEVcIik7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiB0aGlzLmFvKSBlKDAgLyogTmV0d29ya1N0YXR1cy5BVkFJTEFCTEUgKi8pO1xuICAgIH1cbiAgICBfbygpIHtcbiAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiQ29ubmVjdGl2aXR5TW9uaXRvclwiLCBcIk5ldHdvcmsgY29ubmVjdGl2aXR5IGNoYW5nZWQ6IFVOQVZBSUxBQkxFXCIpO1xuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdGhpcy5hbykgZSgxIC8qIE5ldHdvcmtTdGF0dXMuVU5BVkFJTEFCTEUgKi8pO1xuICAgIH1cbiAgICAvLyBUT0RPKGNoZW5icmlhbik6IENvbnNpZGVyIHBhc3NpbmcgaW4gd2luZG93IGVpdGhlciBpbnRvIHRoaXMgY29tcG9uZW50IG9yXG4gICAgLy8gaGVyZSBmb3IgdGVzdGluZyB2aWEgRmFrZVdpbmRvdy5cbiAgICAvKiogQ2hlY2tzIHRoYXQgYWxsIHVzZWQgYXR0cmlidXRlcyBvZiB3aW5kb3cgYXJlIGF2YWlsYWJsZS4gKi9cbiAgICBzdGF0aWMgRCgpIHtcbiAgICAgICAgcmV0dXJuIFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIHdpbmRvdyAmJiB2b2lkIDAgIT09IHdpbmRvdy5hZGRFdmVudExpc3RlbmVyICYmIHZvaWQgMCAhPT0gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXI7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBUaGUgdmFsdWUgcmV0dXJuZWQgZnJvbSB0aGUgbW9zdCByZWNlbnQgaW52b2NhdGlvbiBvZlxuICogYGdlbmVyYXRlVW5pcXVlRGVidWdJZCgpYCwgb3IgbnVsbCBpZiBpdCBoYXMgbmV2ZXIgYmVlbiBpbnZva2VkLlxuICovIGxldCBBZSA9IG51bGw7XG5cbi8qKlxuICogR2VuZXJhdGVzIGFuZCByZXR1cm5zIGFuIGluaXRpYWwgdmFsdWUgZm9yIGBsYXN0VW5pcXVlRGVidWdJZGAuXG4gKlxuICogVGhlIHJldHVybmVkIHZhbHVlIGlzIHJhbmRvbWx5IHNlbGVjdGVkIGZyb20gYSByYW5nZSBvZiBpbnRlZ2VycyB0aGF0IGFyZVxuICogcmVwcmVzZW50ZWQgYXMgOCBoZXhhZGVjaW1hbCBkaWdpdHMuIFRoaXMgbWVhbnMgdGhhdCAod2l0aGluIHJlYXNvbikgYW55XG4gKiBudW1iZXJzIGdlbmVyYXRlZCBieSBpbmNyZW1lbnRpbmcgdGhlIHJldHVybmVkIG51bWJlciBieSAxIHdpbGwgYWxzbyBiZVxuICogcmVwcmVzZW50ZWQgYnkgOCBoZXhhZGVjaW1hbCBkaWdpdHMuIFRoaXMgbGVhZHMgdG8gYWxsIFwiSURzXCIgaGF2aW5nIHRoZSBzYW1lXG4gKiBsZW5ndGggd2hlbiBjb252ZXJ0ZWQgdG8gYSBoZXhhZGVjaW1hbCBzdHJpbmcsIG1ha2luZyByZWFkaW5nIGxvZ3MgY29udGFpbmluZ1xuICogdGhlc2UgSURzIGVhc2llciB0byBmb2xsb3cuIEFuZCBzaW5jZSB0aGUgcmV0dXJuIHZhbHVlIGlzIHJhbmRvbWx5IHNlbGVjdGVkXG4gKiBpdCB3aWxsIGhlbHAgdG8gZGlmZmVyZW50aWF0ZSBiZXR3ZWVuIGxvZ3MgZnJvbSBkaWZmZXJlbnQgZXhlY3V0aW9ucy5cbiAqL1xuLyoqXG4gKiBHZW5lcmF0ZXMgYW5kIHJldHVybnMgYSB1bmlxdWUgSUQgYXMgYSBoZXhhZGVjaW1hbCBzdHJpbmcuXG4gKlxuICogVGhlIHJldHVybmVkIElEIGlzIGludGVuZGVkIHRvIGJlIHVzZWQgaW4gZGVidWcgbG9nZ2luZyBtZXNzYWdlcyB0byBoZWxwXG4gKiBjb3JyZWxhdGUgbG9nIG1lc3NhZ2VzIHRoYXQgbWF5IGJlIHNwYXRpYWxseSBzZXBhcmF0ZWQgaW4gdGhlIGxvZ3MsIGJ1dFxuICogbG9naWNhbGx5IHJlbGF0ZWQuIEZvciBleGFtcGxlLCBhIG5ldHdvcmsgY29ubmVjdGlvbiBjb3VsZCBpbmNsdWRlIHRoZSBzYW1lXG4gKiBcImRlYnVnIElEXCIgc3RyaW5nIGluIGFsbCBvZiBpdHMgbG9nIG1lc3NhZ2VzIHRvIGhlbHAgdHJhY2UgYSBzcGVjaWZpY1xuICogY29ubmVjdGlvbiBvdmVyIHRpbWUuXG4gKlxuICogQHJldHVybiB0aGUgMTAtY2hhcmFjdGVyIGdlbmVyYXRlZCBJRCAoZS5nLiBcIjB4YTFiMmMzZDRcIikuXG4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV9nZW5lcmF0ZVVuaXF1ZURlYnVnSWQoKSB7XG4gICAgcmV0dXJuIG51bGwgPT09IEFlID8gQWUgPSBmdW5jdGlvbiBfX1BSSVZBVEVfZ2VuZXJhdGVJbml0aWFsVW5pcXVlRGVidWdJZCgpIHtcbiAgICAgICAgcmV0dXJuIDI2ODQzNTQ1NiArIE1hdGgucm91bmQoMjE0NzQ4MzY0OCAqIE1hdGgucmFuZG9tKCkpO1xuICAgIH0oKSA6IEFlKyssIFwiMHhcIiArIEFlLnRvU3RyaW5nKDE2KTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY29uc3QgUmUgPSB7XG4gICAgQmF0Y2hHZXREb2N1bWVudHM6IFwiYmF0Y2hHZXRcIixcbiAgICBDb21taXQ6IFwiY29tbWl0XCIsXG4gICAgUnVuUXVlcnk6IFwicnVuUXVlcnlcIixcbiAgICBSdW5BZ2dyZWdhdGlvblF1ZXJ5OiBcInJ1bkFnZ3JlZ2F0aW9uUXVlcnlcIlxufTtcblxuLyoqXG4gKiBNYXBzIFJQQyBuYW1lcyB0byB0aGUgY29ycmVzcG9uZGluZyBSRVNUIGVuZHBvaW50IG5hbWUuXG4gKlxuICogV2UgdXNlIGFycmF5IG5vdGF0aW9uIHRvIGF2b2lkIG1hbmdsaW5nLlxuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBQcm92aWRlcyBhIHNpbXBsZSBoZWxwZXIgY2xhc3MgdGhhdCBpbXBsZW1lbnRzIHRoZSBTdHJlYW0gaW50ZXJmYWNlIHRvXG4gKiBicmlkZ2UgdG8gb3RoZXIgaW1wbGVtZW50YXRpb25zIHRoYXQgYXJlIHN0cmVhbXMgYnV0IGRvIG5vdCBpbXBsZW1lbnQgdGhlXG4gKiBpbnRlcmZhY2UuIFRoZSBzdHJlYW0gY2FsbGJhY2tzIGFyZSBpbnZva2VkIHdpdGggdGhlIGNhbGxPbi4uLiBtZXRob2RzLlxuICovXG5jbGFzcyBfX1BSSVZBVEVfU3RyZWFtQnJpZGdlIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMuY28gPSBlLmNvLCB0aGlzLmxvID0gZS5sbztcbiAgICB9XG4gICAgaG8oZSkge1xuICAgICAgICB0aGlzLlBvID0gZTtcbiAgICB9XG4gICAgSW8oZSkge1xuICAgICAgICB0aGlzLlRvID0gZTtcbiAgICB9XG4gICAgb25NZXNzYWdlKGUpIHtcbiAgICAgICAgdGhpcy5FbyA9IGU7XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLmxvKCk7XG4gICAgfVxuICAgIHNlbmQoZSkge1xuICAgICAgICB0aGlzLmNvKGUpO1xuICAgIH1cbiAgICBBbygpIHtcbiAgICAgICAgdGhpcy5QbygpO1xuICAgIH1cbiAgICBSbyhlKSB7XG4gICAgICAgIHRoaXMuVG8oZSk7XG4gICAgfVxuICAgIFZvKGUpIHtcbiAgICAgICAgdGhpcy5FbyhlKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNvbnN0IFZlID0gXCJXZWJDaGFubmVsQ29ubmVjdGlvblwiO1xuXG5jbGFzcyBfX1BSSVZBVEVfV2ViQ2hhbm5lbENvbm5lY3Rpb24gZXh0ZW5kcyBcbi8qKlxuICogQmFzZSBjbGFzcyBmb3IgYWxsIFJlc3QtYmFzZWQgY29ubmVjdGlvbnMgdG8gdGhlIGJhY2tlbmQgKFdlYkNoYW5uZWwgYW5kXG4gKiBIVFRQKS5cbiAqL1xuY2xhc3MgX19QUklWQVRFX1Jlc3RDb25uZWN0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMuZGF0YWJhc2VJbmZvID0gZSwgdGhpcy5kYXRhYmFzZUlkID0gZS5kYXRhYmFzZUlkO1xuICAgICAgICBjb25zdCB0ID0gZS5zc2wgPyBcImh0dHBzXCIgOiBcImh0dHBcIiwgbiA9IGVuY29kZVVSSUNvbXBvbmVudCh0aGlzLmRhdGFiYXNlSWQucHJvamVjdElkKSwgciA9IGVuY29kZVVSSUNvbXBvbmVudCh0aGlzLmRhdGFiYXNlSWQuZGF0YWJhc2UpO1xuICAgICAgICB0aGlzLm1vID0gdCArIFwiOi8vXCIgKyBlLmhvc3QsIHRoaXMuZm8gPSBgcHJvamVjdHMvJHtufS9kYXRhYmFzZXMvJHtyfWAsIHRoaXMucG8gPSBcIihkZWZhdWx0KVwiID09PSB0aGlzLmRhdGFiYXNlSWQuZGF0YWJhc2UgPyBgcHJvamVjdF9pZD0ke259YCA6IGBwcm9qZWN0X2lkPSR7bn0mZGF0YWJhc2VfaWQ9JHtyfWA7XG4gICAgfVxuICAgIGdldCB5bygpIHtcbiAgICAgICAgLy8gQm90aCBgaW52b2tlUlBDKClgIGFuZCBgaW52b2tlU3RyZWFtaW5nUlBDKClgIHVzZSB0aGVpciBgcGF0aGAgYXJndW1lbnRzIHRvIGRldGVybWluZVxuICAgICAgICAvLyB3aGVyZSB0byBydW4gdGhlIHF1ZXJ5LCBhbmQgZXhwZWN0IHRoZSBgcmVxdWVzdGAgdG8gTk9UIHNwZWNpZnkgdGhlIFwicGF0aFwiLlxuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxuICAgIHdvKGUsIHQsIG4sIHIsIGkpIHtcbiAgICAgICAgY29uc3QgcyA9IF9fUFJJVkFURV9nZW5lcmF0ZVVuaXF1ZURlYnVnSWQoKSwgbyA9IHRoaXMuU28oZSwgdCk7XG4gICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlJlc3RDb25uZWN0aW9uXCIsIGBTZW5kaW5nIFJQQyAnJHtlfScgJHtzfTpgLCBvLCBuKTtcbiAgICAgICAgY29uc3QgXyA9IHtcbiAgICAgICAgICAgIFwiZ29vZ2xlLWNsb3VkLXJlc291cmNlLXByZWZpeFwiOiB0aGlzLmZvLFxuICAgICAgICAgICAgXCJ4LWdvb2ctcmVxdWVzdC1wYXJhbXNcIjogdGhpcy5wb1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGhpcy5ibyhfLCByLCBpKSwgdGhpcy5EbyhlLCBvLCBfLCBuKS50aGVuKCh0ID0+IChfX1BSSVZBVEVfbG9nRGVidWcoXCJSZXN0Q29ubmVjdGlvblwiLCBgUmVjZWl2ZWQgUlBDICcke2V9JyAke3N9OiBgLCB0KSwgXG4gICAgICAgIHQpKSwgKHQgPT4ge1xuICAgICAgICAgICAgdGhyb3cgX19QUklWQVRFX2xvZ1dhcm4oXCJSZXN0Q29ubmVjdGlvblwiLCBgUlBDICcke2V9JyAke3N9IGZhaWxlZCB3aXRoIGVycm9yOiBgLCB0LCBcInVybDogXCIsIG8sIFwicmVxdWVzdDpcIiwgbiksIFxuICAgICAgICAgICAgdDtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBDbyhlLCB0LCBuLCByLCBpLCBzKSB7XG4gICAgICAgIC8vIFRoZSBSRVNUIEFQSSBhdXRvbWF0aWNhbGx5IGFnZ3JlZ2F0ZXMgYWxsIG9mIHRoZSBzdHJlYW1lZCByZXN1bHRzLCBzbyB3ZVxuICAgICAgICAvLyBjYW4ganVzdCB1c2UgdGhlIG5vcm1hbCBpbnZva2UoKSBtZXRob2QuXG4gICAgICAgIHJldHVybiB0aGlzLndvKGUsIHQsIG4sIHIsIGkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNb2RpZmllcyB0aGUgaGVhZGVycyBmb3IgYSByZXF1ZXN0LCBhZGRpbmcgYW55IGF1dGhvcml6YXRpb24gdG9rZW4gaWZcbiAgICAgKiBwcmVzZW50IGFuZCBhbnkgYWRkaXRpb25hbCBoZWFkZXJzIGZvciB0aGUgcmVxdWVzdC5cbiAgICAgKi8gICAgYm8oZSwgdCwgbikge1xuICAgICAgICBlW1wiWC1Hb29nLUFwaS1DbGllbnRcIl0gPSBcbiAgICAgICAgLy8gU0RLX1ZFUlNJT04gaXMgdXBkYXRlZCB0byBkaWZmZXJlbnQgdmFsdWUgYXQgcnVudGltZSBkZXBlbmRpbmcgb24gdGhlIGVudHJ5IHBvaW50LFxuICAgICAgICAvLyBzbyB3ZSBuZWVkIHRvIGdldCBpdHMgdmFsdWUgd2hlbiB3ZSBuZWVkIGl0IGluIGEgZnVuY3Rpb24uXG4gICAgICAgIGZ1bmN0aW9uIF9fUFJJVkFURV9nZXRHb29nQXBpQ2xpZW50VmFsdWUoKSB7XG4gICAgICAgICAgICByZXR1cm4gXCJnbC1qcy8gZmlyZS9cIiArIFM7XG4gICAgICAgIH0oKSwgXG4gICAgICAgIC8vIENvbnRlbnQtVHlwZTogdGV4dC9wbGFpbiB3aWxsIGF2b2lkIHByZWZsaWdodCByZXF1ZXN0cyB3aGljaCBtaWdodFxuICAgICAgICAvLyBtZXNzIHdpdGggQ09SUyBhbmQgcmVkaXJlY3RzIGJ5IHByb3hpZXMuIElmIHdlIGFkZCBjdXN0b20gaGVhZGVyc1xuICAgICAgICAvLyB3ZSB3aWxsIG5lZWQgdG8gY2hhbmdlIHRoaXMgY29kZSB0byBwb3RlbnRpYWxseSB1c2UgdGhlICRodHRwT3ZlcndyaXRlXG4gICAgICAgIC8vIHBhcmFtZXRlciBzdXBwb3J0ZWQgYnkgRVNGIHRvIGF2b2lkIHRyaWdnZXJpbmcgcHJlZmxpZ2h0IHJlcXVlc3RzLlxuICAgICAgICBlW1wiQ29udGVudC1UeXBlXCJdID0gXCJ0ZXh0L3BsYWluXCIsIHRoaXMuZGF0YWJhc2VJbmZvLmFwcElkICYmIChlW1wiWC1GaXJlYmFzZS1HTVBJRFwiXSA9IHRoaXMuZGF0YWJhc2VJbmZvLmFwcElkKSwgXG4gICAgICAgIHQgJiYgdC5oZWFkZXJzLmZvckVhY2goKCh0LCBuKSA9PiBlW25dID0gdCkpLCBuICYmIG4uaGVhZGVycy5mb3JFYWNoKCgodCwgbikgPT4gZVtuXSA9IHQpKTtcbiAgICB9XG4gICAgU28oZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gUmVbZV07XG4gICAgICAgIHJldHVybiBgJHt0aGlzLm1vfS92MS8ke3R9OiR7bn1gO1xuICAgIH1cbn0ge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgc3VwZXIoZSksIHRoaXMuZm9yY2VMb25nUG9sbGluZyA9IGUuZm9yY2VMb25nUG9sbGluZywgdGhpcy5hdXRvRGV0ZWN0TG9uZ1BvbGxpbmcgPSBlLmF1dG9EZXRlY3RMb25nUG9sbGluZywgXG4gICAgICAgIHRoaXMudXNlRmV0Y2hTdHJlYW1zID0gZS51c2VGZXRjaFN0cmVhbXMsIHRoaXMubG9uZ1BvbGxpbmdPcHRpb25zID0gZS5sb25nUG9sbGluZ09wdGlvbnM7XG4gICAgfVxuICAgIERvKGUsIHQsIG4sIHIpIHtcbiAgICAgICAgY29uc3QgaSA9IF9fUFJJVkFURV9nZW5lcmF0ZVVuaXF1ZURlYnVnSWQoKTtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKCgocywgbykgPT4ge1xuICAgICAgICAgICAgY29uc3QgXyA9IG5ldyBYaHJJbztcbiAgICAgICAgICAgIF8uc2V0V2l0aENyZWRlbnRpYWxzKCEwKSwgXy5saXN0ZW5PbmNlKEV2ZW50VHlwZS5DT01QTEVURSwgKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF8uZ2V0TGFzdEVycm9yQ29kZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgY2FzZSBFcnJvckNvZGUuTk9fRVJST1I6XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gXy5nZXRSZXNwb25zZUpzb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhWZSwgYFhIUiBmb3IgUlBDICcke2V9JyAke2l9IHJlY2VpdmVkOmAsIEpTT04uc3RyaW5naWZ5KHQpKSwgXG4gICAgICAgICAgICAgICAgICAgICAgICBzKHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICBjYXNlIEVycm9yQ29kZS5USU1FT1VUOlxuICAgICAgICAgICAgICAgICAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFZlLCBgUlBDICcke2V9JyAke2l9IHRpbWVkIG91dGApLCBvKG5ldyBGaXJlc3RvcmVFcnJvcihELkRFQURMSU5FX0VYQ0VFREVELCBcIlJlcXVlc3QgdGltZSBvdXRcIikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICBjYXNlIEVycm9yQ29kZS5IVFRQX0VSUk9SOlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IF8uZ2V0U3RhdHVzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoX19QUklWQVRFX2xvZ0RlYnVnKFZlLCBgUlBDICcke2V9JyAke2l9IGZhaWxlZCB3aXRoIHN0YXR1czpgLCBuLCBcInJlc3BvbnNlIHRleHQ6XCIsIF8uZ2V0UmVzcG9uc2VUZXh0KCkpLCBcbiAgICAgICAgICAgICAgICAgICAgICAgIG4gPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGUgPSBfLmdldFJlc3BvbnNlSnNvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFycmF5LmlzQXJyYXkoZSkgJiYgKGUgPSBlWzBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gbnVsbCA9PSBlID8gdm9pZCAwIDogZS5lcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiB0LnN0YXR1cyAmJiB0Lm1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IGZ1bmN0aW9uIF9fUFJJVkFURV9tYXBDb2RlRnJvbUh0dHBSZXNwb25zZUVycm9yU3RhdHVzKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBlLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvXy9nLCBcIi1cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LnZhbHVlcyhEKS5pbmRleE9mKHQpID49IDAgPyB0IDogRC5VTktOT1dOO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KHQuc3RhdHVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyhuZXcgRmlyZXN0b3JlRXJyb3IoZSwgdC5tZXNzYWdlKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIG8obmV3IEZpcmVzdG9yZUVycm9yKEQuVU5LTk9XTiwgXCJTZXJ2ZXIgcmVzcG9uZGVkIHdpdGggc3RhdHVzIFwiICsgXy5nZXRTdGF0dXMoKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgd2UgcmVjZWl2ZWQgYW4gSFRUUF9FUlJPUiBidXQgdGhlcmUncyBubyBzdGF0dXMgY29kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGl0J3MgbW9zdCBwcm9iYWJseSBhIGNvbm5lY3Rpb24gaXNzdWVcbiAgICAgICAgICAgICAgICAgICAgICAgIG8obmV3IEZpcmVzdG9yZUVycm9yKEQuVU5BVkFJTEFCTEUsIFwiQ29ubmVjdGlvbiBmYWlsZWQuXCIpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGZhaWwoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhWZSwgYFJQQyAnJHtlfScgJHtpfSBjb21wbGV0ZWQuYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgY29uc3QgYSA9IEpTT04uc3RyaW5naWZ5KHIpO1xuICAgICAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFZlLCBgUlBDICcke2V9JyAke2l9IHNlbmRpbmcgcmVxdWVzdDpgLCByKSwgXy5zZW5kKHQsIFwiUE9TVFwiLCBhLCBuLCAxNSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgdm8oZSwgdCwgbikge1xuICAgICAgICBjb25zdCByID0gX19QUklWQVRFX2dlbmVyYXRlVW5pcXVlRGVidWdJZCgpLCBpID0gWyB0aGlzLm1vLCBcIi9cIiwgXCJnb29nbGUuZmlyZXN0b3JlLnYxLkZpcmVzdG9yZVwiLCBcIi9cIiwgZSwgXCIvY2hhbm5lbFwiIF0sIHMgPSBjcmVhdGVXZWJDaGFubmVsVHJhbnNwb3J0KCksIG8gPSBnZXRTdGF0RXZlbnRUYXJnZXQoKSwgXyA9IHtcbiAgICAgICAgICAgIC8vIFJlcXVpcmVkIGZvciBiYWNrZW5kIHN0aWNraW5lc3MsIHJvdXRpbmcgYmVoYXZpb3IgaXMgYmFzZWQgb24gdGhpc1xuICAgICAgICAgICAgLy8gcGFyYW1ldGVyLlxuICAgICAgICAgICAgaHR0cFNlc3Npb25JZFBhcmFtOiBcImdzZXNzaW9uaWRcIixcbiAgICAgICAgICAgIGluaXRNZXNzYWdlSGVhZGVyczoge30sXG4gICAgICAgICAgICBtZXNzYWdlVXJsUGFyYW1zOiB7XG4gICAgICAgICAgICAgICAgLy8gVGhpcyBwYXJhbSBpcyB1c2VkIHRvIGltcHJvdmUgcm91dGluZyBhbmQgcHJvamVjdCBpc29sYXRpb24gYnkgdGhlXG4gICAgICAgICAgICAgICAgLy8gYmFja2VuZCBhbmQgbXVzdCBiZSBpbmNsdWRlZCBpbiBldmVyeSByZXF1ZXN0LlxuICAgICAgICAgICAgICAgIGRhdGFiYXNlOiBgcHJvamVjdHMvJHt0aGlzLmRhdGFiYXNlSWQucHJvamVjdElkfS9kYXRhYmFzZXMvJHt0aGlzLmRhdGFiYXNlSWQuZGF0YWJhc2V9YFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNlbmRSYXdKc29uOiAhMCxcbiAgICAgICAgICAgIHN1cHBvcnRzQ3Jvc3NEb21haW5YaHI6ICEwLFxuICAgICAgICAgICAgaW50ZXJuYWxDaGFubmVsUGFyYW1zOiB7XG4gICAgICAgICAgICAgICAgLy8gT3ZlcnJpZGUgdGhlIGRlZmF1bHQgdGltZW91dCAocmFuZG9taXplZCBiZXR3ZWVuIDEwLTIwIHNlY29uZHMpIHNpbmNlXG4gICAgICAgICAgICAgICAgLy8gYSBsYXJnZSB3cml0ZSBiYXRjaCBvbiBhIHNsb3cgaW50ZXJuZXQgY29ubmVjdGlvbiBtYXkgdGFrZSBhIGxvbmdcbiAgICAgICAgICAgICAgICAvLyB0aW1lIHRvIHNlbmQgdG8gdGhlIGJhY2tlbmQuIFJhdGhlciB0aGFuIGhhdmUgV2ViQ2hhbm5lbCBpbXBvc2UgYVxuICAgICAgICAgICAgICAgIC8vIHRpZ2h0IHRpbWVvdXQgd2hpY2ggY291bGQgbGVhZCB0byBpbmZpbml0ZSB0aW1lb3V0cyBhbmQgcmV0cmllcywgd2VcbiAgICAgICAgICAgICAgICAvLyBzZXQgaXQgdmVyeSBsYXJnZSAoNS0xMCBtaW51dGVzKSBhbmQgcmVseSBvbiB0aGUgYnJvd3NlcidzIGJ1aWx0aW5cbiAgICAgICAgICAgICAgICAvLyB0aW1lb3V0cyB0byBraWNrIGluIGlmIHRoZSByZXF1ZXN0IGlzbid0IHdvcmtpbmcuXG4gICAgICAgICAgICAgICAgZm9yd2FyZENoYW5uZWxSZXF1ZXN0VGltZW91dE1zOiA2ZTVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmb3JjZUxvbmdQb2xsaW5nOiB0aGlzLmZvcmNlTG9uZ1BvbGxpbmcsXG4gICAgICAgICAgICBkZXRlY3RCdWZmZXJpbmdQcm94eTogdGhpcy5hdXRvRGV0ZWN0TG9uZ1BvbGxpbmdcbiAgICAgICAgfSwgYSA9IHRoaXMubG9uZ1BvbGxpbmdPcHRpb25zLnRpbWVvdXRTZWNvbmRzO1xuICAgICAgICB2b2lkIDAgIT09IGEgJiYgKF8ubG9uZ1BvbGxpbmdUaW1lb3V0ID0gTWF0aC5yb3VuZCgxZTMgKiBhKSksIHRoaXMudXNlRmV0Y2hTdHJlYW1zICYmIChfLnVzZUZldGNoU3RyZWFtcyA9ICEwKSwgXG4gICAgICAgIHRoaXMuYm8oXy5pbml0TWVzc2FnZUhlYWRlcnMsIHQsIG4pLCBcbiAgICAgICAgLy8gU2VuZGluZyB0aGUgY3VzdG9tIGhlYWRlcnMgd2UganVzdCBhZGRlZCB0byByZXF1ZXN0LmluaXRNZXNzYWdlSGVhZGVyc1xuICAgICAgICAvLyAoQXV0aG9yaXphdGlvbiwgZXRjLikgd2lsbCB0cmlnZ2VyIHRoZSBicm93c2VyIHRvIG1ha2UgYSBDT1JTIHByZWZsaWdodFxuICAgICAgICAvLyByZXF1ZXN0IGJlY2F1c2UgdGhlIFhIUiB3aWxsIG5vIGxvbmdlciBtZWV0IHRoZSBjcml0ZXJpYSBmb3IgYSBcInNpbXBsZVwiXG4gICAgICAgIC8vIENPUlMgcmVxdWVzdDpcbiAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSFRUUC9DT1JTI1NpbXBsZV9yZXF1ZXN0c1xuICAgICAgICAvLyBUaGVyZWZvcmUgdG8gYXZvaWQgdGhlIENPUlMgcHJlZmxpZ2h0IHJlcXVlc3QgKGFuIGV4dHJhIG5ldHdvcmtcbiAgICAgICAgLy8gcm91bmR0cmlwKSwgd2UgdXNlIHRoZSBlbmNvZGVJbml0TWVzc2FnZUhlYWRlcnMgb3B0aW9uIHRvIHNwZWNpZnkgdGhhdFxuICAgICAgICAvLyB0aGUgaGVhZGVycyBzaG91bGQgaW5zdGVhZCBiZSBlbmNvZGVkIGluIHRoZSByZXF1ZXN0J3MgUE9TVCBwYXlsb2FkLFxuICAgICAgICAvLyB3aGljaCBpcyByZWNvZ25pemVkIGJ5IHRoZSB3ZWJjaGFubmVsIGJhY2tlbmQuXG4gICAgICAgIF8uZW5jb2RlSW5pdE1lc3NhZ2VIZWFkZXJzID0gITA7XG4gICAgICAgIGNvbnN0IHUgPSBpLmpvaW4oXCJcIik7XG4gICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhWZSwgYENyZWF0aW5nIFJQQyAnJHtlfScgc3RyZWFtICR7cn06ICR7dX1gLCBfKTtcbiAgICAgICAgY29uc3QgYyA9IHMuY3JlYXRlV2ViQ2hhbm5lbCh1LCBfKTtcbiAgICAgICAgLy8gV2ViQ2hhbm5lbCBzdXBwb3J0cyBzZW5kaW5nIHRoZSBmaXJzdCBtZXNzYWdlIHdpdGggdGhlIGhhbmRzaGFrZSAtIHNhdmluZ1xuICAgICAgICAvLyBhIG5ldHdvcmsgcm91bmQgdHJpcC4gSG93ZXZlciwgaXQgd2lsbCBoYXZlIHRvIGNhbGwgc2VuZCBpbiB0aGUgc2FtZVxuICAgICAgICAvLyBKUyBldmVudCBsb29wIGFzIG9wZW4uIEluIG9yZGVyIHRvIGVuZm9yY2UgdGhpcywgd2UgZGVsYXkgYWN0dWFsbHlcbiAgICAgICAgLy8gb3BlbmluZyB0aGUgV2ViQ2hhbm5lbCB1bnRpbCBzZW5kIGlzIGNhbGxlZC4gV2hldGhlciB3ZSBoYXZlIGNhbGxlZFxuICAgICAgICAvLyBvcGVuIGlzIHRyYWNrZWQgd2l0aCB0aGlzIHZhcmlhYmxlLlxuICAgICAgICAgICAgICAgIGxldCBsID0gITEsIGggPSAhMTtcbiAgICAgICAgLy8gQSBmbGFnIHRvIGRldGVybWluZSB3aGV0aGVyIHRoZSBzdHJlYW0gd2FzIGNsb3NlZCAoYnkgdXMgb3IgdGhyb3VnaCBhblxuICAgICAgICAvLyBlcnJvci9jbG9zZSBldmVudCkgdG8gYXZvaWQgZGVsaXZlcmluZyBtdWx0aXBsZSBjbG9zZSBldmVudHMgb3Igc2VuZGluZ1xuICAgICAgICAvLyBvbiBhIGNsb3NlZCBzdHJlYW1cbiAgICAgICAgICAgICAgICBjb25zdCBQID0gbmV3IF9fUFJJVkFURV9TdHJlYW1CcmlkZ2Uoe1xuICAgICAgICAgICAgY286IHQgPT4ge1xuICAgICAgICAgICAgICAgIGggPyBfX1BSSVZBVEVfbG9nRGVidWcoVmUsIGBOb3Qgc2VuZGluZyBiZWNhdXNlIFJQQyAnJHtlfScgc3RyZWFtICR7cn0gaXMgY2xvc2VkOmAsIHQpIDogKGwgfHwgKF9fUFJJVkFURV9sb2dEZWJ1ZyhWZSwgYE9wZW5pbmcgUlBDICcke2V9JyBzdHJlYW0gJHtyfSB0cmFuc3BvcnQuYCksIFxuICAgICAgICAgICAgICAgIGMub3BlbigpLCBsID0gITApLCBfX1BSSVZBVEVfbG9nRGVidWcoVmUsIGBSUEMgJyR7ZX0nIHN0cmVhbSAke3J9IHNlbmRpbmc6YCwgdCksIFxuICAgICAgICAgICAgICAgIGMuc2VuZCh0KSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbG86ICgpID0+IGMuY2xvc2UoKVxuICAgICAgICB9KSwgX19QUklWQVRFX3VuZ3VhcmRlZEV2ZW50TGlzdGVuID0gKGUsIHQsIG4pID0+IHtcbiAgICAgICAgICAgIC8vIFRPRE8oZGltb25kKTogY2xvc3VyZSB0eXBpbmcgc2VlbXMgYnJva2VuIGJlY2F1c2UgV2ViQ2hhbm5lbCBkb2VzXG4gICAgICAgICAgICAvLyBub3QgaW1wbGVtZW50IGdvb2cuZXZlbnRzLkxpc3RlbmFibGVcbiAgICAgICAgICAgIGUubGlzdGVuKHQsIChlID0+IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBuKGUpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICAgICAgICAgICAgfSksIDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gQ2xvc3VyZSBldmVudHMgYXJlIGd1YXJkZWQgYW5kIGV4Y2VwdGlvbnMgYXJlIHN3YWxsb3dlZCwgc28gY2F0Y2ggYW55XG4gICAgICAgIC8vIGV4Y2VwdGlvbiBhbmQgcmV0aHJvdyB1c2luZyBhIHNldFRpbWVvdXQgc28gdGhleSBiZWNvbWUgdmlzaWJsZSBhZ2Fpbi5cbiAgICAgICAgLy8gTm90ZSB0aGF0IGV2ZW50dWFsbHkgdGhpcyBmdW5jdGlvbiBjb3VsZCBnbyBhd2F5IGlmIHdlIGFyZSBjb25maWRlbnRcbiAgICAgICAgLy8gZW5vdWdoIHRoZSBjb2RlIGlzIGV4Y2VwdGlvbiBmcmVlLlxuICAgICAgICAgICAgICAgIHJldHVybiBfX1BSSVZBVEVfdW5ndWFyZGVkRXZlbnRMaXN0ZW4oYywgV2ViQ2hhbm5lbC5FdmVudFR5cGUuT1BFTiwgKCgpID0+IHtcbiAgICAgICAgICAgIGggfHwgX19QUklWQVRFX2xvZ0RlYnVnKFZlLCBgUlBDICcke2V9JyBzdHJlYW0gJHtyfSB0cmFuc3BvcnQgb3BlbmVkLmApO1xuICAgICAgICB9KSksIF9fUFJJVkFURV91bmd1YXJkZWRFdmVudExpc3RlbihjLCBXZWJDaGFubmVsLkV2ZW50VHlwZS5DTE9TRSwgKCgpID0+IHtcbiAgICAgICAgICAgIGggfHwgKGggPSAhMCwgX19QUklWQVRFX2xvZ0RlYnVnKFZlLCBgUlBDICcke2V9JyBzdHJlYW0gJHtyfSB0cmFuc3BvcnQgY2xvc2VkYCksIFxuICAgICAgICAgICAgUC5SbygpKTtcbiAgICAgICAgfSkpLCBfX1BSSVZBVEVfdW5ndWFyZGVkRXZlbnRMaXN0ZW4oYywgV2ViQ2hhbm5lbC5FdmVudFR5cGUuRVJST1IsICh0ID0+IHtcbiAgICAgICAgICAgIGggfHwgKGggPSAhMCwgX19QUklWQVRFX2xvZ1dhcm4oVmUsIGBSUEMgJyR7ZX0nIHN0cmVhbSAke3J9IHRyYW5zcG9ydCBlcnJvcmVkOmAsIHQpLCBcbiAgICAgICAgICAgIFAuUm8obmV3IEZpcmVzdG9yZUVycm9yKEQuVU5BVkFJTEFCTEUsIFwiVGhlIG9wZXJhdGlvbiBjb3VsZCBub3QgYmUgY29tcGxldGVkXCIpKSk7XG4gICAgICAgIH0pKSwgX19QUklWQVRFX3VuZ3VhcmRlZEV2ZW50TGlzdGVuKGMsIFdlYkNoYW5uZWwuRXZlbnRUeXBlLk1FU1NBR0UsICh0ID0+IHtcbiAgICAgICAgICAgIHZhciBuO1xuICAgICAgICAgICAgaWYgKCFoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaSA9IHQuZGF0YVswXTtcbiAgICAgICAgICAgICAgICBfX1BSSVZBVEVfaGFyZEFzc2VydCghIWkpO1xuICAgICAgICAgICAgICAgIC8vIFRPRE8oYi8zNTE0Mzg5MSk6IFRoZXJlIGlzIGEgYnVnIGluIE9uZSBQbGF0Zm9ybSB0aGF0IGNhdXNlZCBlcnJvcnNcbiAgICAgICAgICAgICAgICAvLyAoYW5kIG9ubHkgZXJyb3JzKSB0byBiZSB3cmFwcGVkIGluIGFuIGV4dHJhIGFycmF5LiBUbyBiZSBmb3J3YXJkXG4gICAgICAgICAgICAgICAgLy8gY29tcGF0aWJsZSB3aXRoIHRoZSBidWcgd2UgbmVlZCB0byBjaGVjayBlaXRoZXIgY29uZGl0aW9uLiBUaGUgbGF0dGVyXG4gICAgICAgICAgICAgICAgLy8gY2FuIGJlIHJlbW92ZWQgb25jZSB0aGUgZml4IGhhcyBiZWVuIHJvbGxlZCBvdXQuXG4gICAgICAgICAgICAgICAgLy8gVXNlIGFueSBiZWNhdXNlIG1zZ0RhdGEuZXJyb3IgaXMgbm90IHR5cGVkLlxuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBpLCBvID0gcy5lcnJvciB8fCAobnVsbCA9PT0gKG4gPSBzWzBdKSB8fCB2b2lkIDAgPT09IG4gPyB2b2lkIDAgOiBuLmVycm9yKTtcbiAgICAgICAgICAgICAgICBpZiAobykge1xuICAgICAgICAgICAgICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoVmUsIGBSUEMgJyR7ZX0nIHN0cmVhbSAke3J9IHJlY2VpdmVkIGVycm9yOmAsIG8pO1xuICAgICAgICAgICAgICAgICAgICAvLyBlcnJvci5zdGF0dXMgd2lsbCBiZSBhIHN0cmluZyBsaWtlICdPSycgb3IgJ05PVF9GT1VORCcuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBvLnN0YXR1cztcbiAgICAgICAgICAgICAgICAgICAgbGV0IG4gPSBcbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gKiBNYXBzIGFuIGVycm9yIENvZGUgZnJvbSBhIEdSUEMgc3RhdHVzIGlkZW50aWZpZXIgbGlrZSAnTk9UX0ZPVU5EJy5cbiAqXG4gKiBAcmV0dXJucyBUaGUgQ29kZSBlcXVpdmFsZW50IHRvIHRoZSBnaXZlbiBzdGF0dXMgc3RyaW5nIG9yIHVuZGVmaW5lZCBpZlxuICogICAgIHRoZXJlIGlzIG5vIG1hdGNoLlxuICovXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIF9fUFJJVkFURV9tYXBDb2RlRnJvbVJwY1N0YXR1cyhlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBsb29rdXAgYnkgc3RyaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IGFlW2VdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZvaWQgMCAhPT0gdCkgcmV0dXJuIF9fUFJJVkFURV9tYXBDb2RlRnJvbVJwY0NvZGUodCk7XG4gICAgICAgICAgICAgICAgICAgIH0odCksIGkgPSBvLm1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgICAgIHZvaWQgMCA9PT0gbiAmJiAobiA9IEQuSU5URVJOQUwsIGkgPSBcIlVua25vd24gZXJyb3Igc3RhdHVzOiBcIiArIHQgKyBcIiB3aXRoIG1lc3NhZ2UgXCIgKyBvLm1lc3NhZ2UpLCBcbiAgICAgICAgICAgICAgICAgICAgLy8gTWFyayBjbG9zZWQgc28gbm8gZnVydGhlciBldmVudHMgYXJlIHByb3BhZ2F0ZWRcbiAgICAgICAgICAgICAgICAgICAgaCA9ICEwLCBQLlJvKG5ldyBGaXJlc3RvcmVFcnJvcihuLCBpKSksIGMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgX19QUklWQVRFX2xvZ0RlYnVnKFZlLCBgUlBDICcke2V9JyBzdHJlYW0gJHtyfSByZWNlaXZlZDpgLCBpKSwgUC5WbyhpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpLCBfX1BSSVZBVEVfdW5ndWFyZGVkRXZlbnRMaXN0ZW4obywgRXZlbnQuU1RBVF9FVkVOVCwgKHQgPT4ge1xuICAgICAgICAgICAgdC5zdGF0ID09PSBTdGF0LlBST1hZID8gX19QUklWQVRFX2xvZ0RlYnVnKFZlLCBgUlBDICcke2V9JyBzdHJlYW0gJHtyfSBkZXRlY3RlZCBidWZmZXJpbmcgcHJveHlgKSA6IHQuc3RhdCA9PT0gU3RhdC5OT1BST1hZICYmIF9fUFJJVkFURV9sb2dEZWJ1ZyhWZSwgYFJQQyAnJHtlfScgc3RyZWFtICR7cn0gZGV0ZWN0ZWQgbm8gYnVmZmVyaW5nIHByb3h5YCk7XG4gICAgICAgIH0pKSwgc2V0VGltZW91dCgoKCkgPT4ge1xuICAgICAgICAgICAgLy8gVGVjaG5pY2FsbHkgd2UgY291bGQvc2hvdWxkIHdhaXQgZm9yIHRoZSBXZWJDaGFubmVsIG9wZW5lZCBldmVudCxcbiAgICAgICAgICAgIC8vIGJ1dCBiZWNhdXNlIHdlIHdhbnQgdG8gc2VuZCB0aGUgZmlyc3QgbWVzc2FnZSB3aXRoIHRoZSBXZWJDaGFubmVsXG4gICAgICAgICAgICAvLyBoYW5kc2hha2Ugd2UgcHJldGVuZCB0aGUgY2hhbm5lbCBvcGVuZWQgaGVyZSAoYXN5bmNocm9ub3VzbHkpLCBhbmRcbiAgICAgICAgICAgIC8vIHRoZW4gZGVsYXkgdGhlIGFjdHVhbCBvcGVuIHVudGlsIHRoZSBmaXJzdCBtZXNzYWdlIGlzIHNlbnQuXG4gICAgICAgICAgICBQLkFvKCk7XG4gICAgICAgIH0pLCAwKSwgUDtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogSW5pdGlhbGl6ZXMgdGhlIFdlYkNoYW5uZWxDb25uZWN0aW9uIGZvciB0aGUgYnJvd3Nlci4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogVGhlIFBsYXRmb3JtJ3MgJ3dpbmRvdycgaW1wbGVtZW50YXRpb24gb3IgbnVsbCBpZiBub3QgYXZhaWxhYmxlLiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX2dldFdpbmRvdygpIHtcbiAgICAvLyBgd2luZG93YCBpcyBub3QgYWx3YXlzIGF2YWlsYWJsZSwgZS5nLiBpbiBSZWFjdE5hdGl2ZSBhbmQgV2ViV29ya2Vycy5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzXG4gICAgcmV0dXJuIFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIHdpbmRvdyA/IHdpbmRvdyA6IG51bGw7XG59XG5cbi8qKiBUaGUgUGxhdGZvcm0ncyAnZG9jdW1lbnQnIGltcGxlbWVudGF0aW9uIG9yIG51bGwgaWYgbm90IGF2YWlsYWJsZS4gKi8gZnVuY3Rpb24gZ2V0RG9jdW1lbnQoKSB7XG4gICAgLy8gYGRvY3VtZW50YCBpcyBub3QgYWx3YXlzIGF2YWlsYWJsZSwgZS5nLiBpbiBSZWFjdE5hdGl2ZSBhbmQgV2ViV29ya2Vycy5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzXG4gICAgcmV0dXJuIFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIGRvY3VtZW50ID8gZG9jdW1lbnQgOiBudWxsO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfbmV3U2VyaWFsaXplcihlKSB7XG4gICAgcmV0dXJuIG5ldyBKc29uUHJvdG9TZXJpYWxpemVyKGUsIC8qIHVzZVByb3RvM0pzb249ICovICEwKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBoZWxwZXIgZm9yIHJ1bm5pbmcgZGVsYXllZCB0YXNrcyBmb2xsb3dpbmcgYW4gZXhwb25lbnRpYWwgYmFja29mZiBjdXJ2ZVxuICogYmV0d2VlbiBhdHRlbXB0cy5cbiAqXG4gKiBFYWNoIGRlbGF5IGlzIG1hZGUgdXAgb2YgYSBcImJhc2VcIiBkZWxheSB3aGljaCBmb2xsb3dzIHRoZSBleHBvbmVudGlhbFxuICogYmFja29mZiBjdXJ2ZSwgYW5kIGEgKy8tIDUwJSBcImppdHRlclwiIHRoYXQgaXMgY2FsY3VsYXRlZCBhbmQgYWRkZWQgdG8gdGhlXG4gKiBiYXNlIGRlbGF5LiBUaGlzIHByZXZlbnRzIGNsaWVudHMgZnJvbSBhY2NpZGVudGFsbHkgc3luY2hyb25pemluZyB0aGVpclxuICogZGVsYXlzIGNhdXNpbmcgc3Bpa2VzIG9mIGxvYWQgdG8gdGhlIGJhY2tlbmQuXG4gKi9cbmNsYXNzIF9fUFJJVkFURV9FeHBvbmVudGlhbEJhY2tvZmYge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBBc3luY1F1ZXVlIHRvIHJ1biBiYWNrb2ZmIG9wZXJhdGlvbnMgb24uXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogVGhlIElEIHRvIHVzZSB3aGVuIHNjaGVkdWxpbmcgYmFja29mZiBvcGVyYXRpb25zIG9uIHRoZSBBc3luY1F1ZXVlLlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIFRoZSBpbml0aWFsIGRlbGF5ICh1c2VkIGFzIHRoZSBiYXNlIGRlbGF5IG9uIHRoZSBmaXJzdCByZXRyeSBhdHRlbXB0KS5cbiAgICAgKiBOb3RlIHRoYXQgaml0dGVyIHdpbGwgc3RpbGwgYmUgYXBwbGllZCwgc28gdGhlIGFjdHVhbCBkZWxheSBjb3VsZCBiZSBhc1xuICAgICAqIGxpdHRsZSBhcyAwLjUqaW5pdGlhbERlbGF5TXMuXG4gICAgICovXG4gICAgbiA9IDFlM1xuICAgIC8qKlxuICAgICAqIFRoZSBtdWx0aXBsaWVyIHRvIHVzZSB0byBkZXRlcm1pbmUgdGhlIGV4dGVuZGVkIGJhc2UgZGVsYXkgYWZ0ZXIgZWFjaFxuICAgICAqIGF0dGVtcHQuXG4gICAgICovICwgciA9IDEuNVxuICAgIC8qKlxuICAgICAqIFRoZSBtYXhpbXVtIGJhc2UgZGVsYXkgYWZ0ZXIgd2hpY2ggbm8gZnVydGhlciBiYWNrb2ZmIGlzIHBlcmZvcm1lZC5cbiAgICAgKiBOb3RlIHRoYXQgaml0dGVyIHdpbGwgc3RpbGwgYmUgYXBwbGllZCwgc28gdGhlIGFjdHVhbCBkZWxheSBjb3VsZCBiZSBhc1xuICAgICAqIG11Y2ggYXMgMS41Km1heERlbGF5TXMuXG4gICAgICovICwgaSA9IDZlNCkge1xuICAgICAgICB0aGlzLnNpID0gZSwgdGhpcy50aW1lcklkID0gdCwgdGhpcy5GbyA9IG4sIHRoaXMuTW8gPSByLCB0aGlzLnhvID0gaSwgdGhpcy5PbyA9IDAsIFxuICAgICAgICB0aGlzLk5vID0gbnVsbCwgXG4gICAgICAgIC8qKiBUaGUgbGFzdCBiYWNrb2ZmIGF0dGVtcHQsIGFzIGVwb2NoIG1pbGxpc2Vjb25kcy4gKi9cbiAgICAgICAgdGhpcy5CbyA9IERhdGUubm93KCksIHRoaXMucmVzZXQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXRzIHRoZSBiYWNrb2ZmIGRlbGF5LlxuICAgICAqXG4gICAgICogVGhlIHZlcnkgbmV4dCBiYWNrb2ZmQW5kV2FpdCgpIHdpbGwgaGF2ZSBubyBkZWxheS4gSWYgaXQgaXMgY2FsbGVkIGFnYWluXG4gICAgICogKGkuZS4gZHVlIHRvIGFuIGVycm9yKSwgaW5pdGlhbERlbGF5TXMgKHBsdXMgaml0dGVyKSB3aWxsIGJlIHVzZWQsIGFuZFxuICAgICAqIHN1YnNlcXVlbnQgb25lcyB3aWxsIGluY3JlYXNlIGFjY29yZGluZyB0byB0aGUgYmFja29mZkZhY3Rvci5cbiAgICAgKi8gICAgcmVzZXQoKSB7XG4gICAgICAgIHRoaXMuT28gPSAwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXNldHMgdGhlIGJhY2tvZmYgZGVsYXkgdG8gdGhlIG1heGltdW0gZGVsYXkgKGUuZy4gZm9yIHVzZSBhZnRlciBhXG4gICAgICogUkVTT1VSQ0VfRVhIQVVTVEVEIGVycm9yKS5cbiAgICAgKi8gICAgTG8oKSB7XG4gICAgICAgIHRoaXMuT28gPSB0aGlzLnhvO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIGFmdGVyIGN1cnJlbnREZWxheU1zLCBhbmQgaW5jcmVhc2VzIHRoZVxuICAgICAqIGRlbGF5IGZvciBhbnkgc3Vic2VxdWVudCBhdHRlbXB0cy4gSWYgdGhlcmUgd2FzIGEgcGVuZGluZyBiYWNrb2ZmIG9wZXJhdGlvblxuICAgICAqIGFscmVhZHksIGl0IHdpbGwgYmUgY2FuY2VsZWQuXG4gICAgICovICAgIGtvKGUpIHtcbiAgICAgICAgLy8gQ2FuY2VsIGFueSBwZW5kaW5nIGJhY2tvZmYgb3BlcmF0aW9uLlxuICAgICAgICB0aGlzLmNhbmNlbCgpO1xuICAgICAgICAvLyBGaXJzdCBzY2hlZHVsZSB1c2luZyB0aGUgY3VycmVudCBiYXNlICh3aGljaCBtYXkgYmUgMCBhbmQgc2hvdWxkIGJlXG4gICAgICAgIC8vIGhvbm9yZWQgYXMgc3VjaCkuXG4gICAgICAgIGNvbnN0IHQgPSBNYXRoLmZsb29yKHRoaXMuT28gKyB0aGlzLnFvKCkpLCBuID0gTWF0aC5tYXgoMCwgRGF0ZS5ub3coKSAtIHRoaXMuQm8pLCByID0gTWF0aC5tYXgoMCwgdCAtIG4pO1xuICAgICAgICAvLyBHdWFyZCBhZ2FpbnN0IGxhc3RBdHRlbXB0VGltZSBiZWluZyBpbiB0aGUgZnV0dXJlIGR1ZSB0byBhIGNsb2NrIGNoYW5nZS5cbiAgICAgICAgICAgICAgICByID4gMCAmJiBfX1BSSVZBVEVfbG9nRGVidWcoXCJFeHBvbmVudGlhbEJhY2tvZmZcIiwgYEJhY2tpbmcgb2ZmIGZvciAke3J9IG1zIChiYXNlIGRlbGF5OiAke3RoaXMuT299IG1zLCBkZWxheSB3aXRoIGppdHRlcjogJHt0fSBtcywgbGFzdCBhdHRlbXB0OiAke259IG1zIGFnbylgKSwgXG4gICAgICAgIHRoaXMuTm8gPSB0aGlzLnNpLmVucXVldWVBZnRlckRlbGF5KHRoaXMudGltZXJJZCwgciwgKCgpID0+ICh0aGlzLkJvID0gRGF0ZS5ub3coKSwgXG4gICAgICAgIGUoKSkpKSwgXG4gICAgICAgIC8vIEFwcGx5IGJhY2tvZmYgZmFjdG9yIHRvIGRldGVybWluZSBuZXh0IGRlbGF5IGFuZCBlbnN1cmUgaXQgaXMgd2l0aGluXG4gICAgICAgIC8vIGJvdW5kcy5cbiAgICAgICAgdGhpcy5PbyAqPSB0aGlzLk1vLCB0aGlzLk9vIDwgdGhpcy5GbyAmJiAodGhpcy5PbyA9IHRoaXMuRm8pLCB0aGlzLk9vID4gdGhpcy54byAmJiAodGhpcy5PbyA9IHRoaXMueG8pO1xuICAgIH1cbiAgICBRbygpIHtcbiAgICAgICAgbnVsbCAhPT0gdGhpcy5ObyAmJiAodGhpcy5Oby5za2lwRGVsYXkoKSwgdGhpcy5ObyA9IG51bGwpO1xuICAgIH1cbiAgICBjYW5jZWwoKSB7XG4gICAgICAgIG51bGwgIT09IHRoaXMuTm8gJiYgKHRoaXMuTm8uY2FuY2VsKCksIHRoaXMuTm8gPSBudWxsKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYSByYW5kb20gdmFsdWUgaW4gdGhlIHJhbmdlIFstY3VycmVudEJhc2VNcy8yLCBjdXJyZW50QmFzZU1zLzJdICovICAgIHFvKCkge1xuICAgICAgICByZXR1cm4gKE1hdGgucmFuZG9tKCkgLSAuNSkgKiB0aGlzLk9vO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBQZXJzaXN0ZW50U3RyZWFtIGlzIGFuIGFic3RyYWN0IGJhc2UgY2xhc3MgdGhhdCByZXByZXNlbnRzIGEgc3RyZWFtaW5nIFJQQ1xuICogdG8gdGhlIEZpcmVzdG9yZSBiYWNrZW5kLiBJdCdzIGJ1aWx0IG9uIHRvcCBvZiB0aGUgY29ubmVjdGlvbnMgb3duIHN1cHBvcnRcbiAqIGZvciBzdHJlYW1pbmcgUlBDcywgYW5kIGFkZHMgc2V2ZXJhbCBjcml0aWNhbCBmZWF0dXJlcyBmb3Igb3VyIGNsaWVudHM6XG4gKlxuICogICAtIEV4cG9uZW50aWFsIGJhY2tvZmYgb24gZmFpbHVyZVxuICogICAtIEF1dGhlbnRpY2F0aW9uIHZpYSBDcmVkZW50aWFsc1Byb3ZpZGVyXG4gKiAgIC0gRGlzcGF0Y2hpbmcgYWxsIGNhbGxiYWNrcyBpbnRvIHRoZSBzaGFyZWQgd29ya2VyIHF1ZXVlXG4gKiAgIC0gQ2xvc2luZyBpZGxlIHN0cmVhbXMgYWZ0ZXIgNjAgc2Vjb25kcyBvZiBpbmFjdGl2aXR5XG4gKlxuICogU3ViY2xhc3NlcyBvZiBQZXJzaXN0ZW50U3RyZWFtIGltcGxlbWVudCBzZXJpYWxpemF0aW9uIG9mIG1vZGVscyB0byBhbmRcbiAqIGZyb20gdGhlIEpTT04gcmVwcmVzZW50YXRpb24gb2YgdGhlIHByb3RvY29sIGJ1ZmZlcnMgZm9yIGEgc3BlY2lmaWNcbiAqIHN0cmVhbWluZyBSUEMuXG4gKlxuICogIyMgU3RhcnRpbmcgYW5kIFN0b3BwaW5nXG4gKlxuICogU3RyZWFtaW5nIFJQQ3MgYXJlIHN0YXRlZnVsIGFuZCBuZWVkIHRvIGJlIHN0YXJ0KCllZCBiZWZvcmUgbWVzc2FnZXMgY2FuXG4gKiBiZSBzZW50IGFuZCByZWNlaXZlZC4gVGhlIFBlcnNpc3RlbnRTdHJlYW0gd2lsbCBjYWxsIHRoZSBvbk9wZW4oKSBmdW5jdGlvblxuICogb2YgdGhlIGxpc3RlbmVyIG9uY2UgdGhlIHN0cmVhbSBpcyByZWFkeSB0byBhY2NlcHQgcmVxdWVzdHMuXG4gKlxuICogU2hvdWxkIGEgc3RhcnQoKSBmYWlsLCBQZXJzaXN0ZW50U3RyZWFtIHdpbGwgY2FsbCB0aGUgcmVnaXN0ZXJlZCBvbkNsb3NlKClcbiAqIGxpc3RlbmVyIHdpdGggYSBGaXJlc3RvcmVFcnJvciBpbmRpY2F0aW5nIHdoYXQgd2VudCB3cm9uZy5cbiAqXG4gKiBBIFBlcnNpc3RlbnRTdHJlYW0gY2FuIGJlIHN0YXJ0ZWQgYW5kIHN0b3BwZWQgcmVwZWF0ZWRseS5cbiAqXG4gKiBHZW5lcmljIHR5cGVzOlxuICogIFNlbmRUeXBlOiBUaGUgdHlwZSBvZiB0aGUgb3V0Z29pbmcgbWVzc2FnZSBvZiB0aGUgdW5kZXJseWluZ1xuICogICAgY29ubmVjdGlvbiBzdHJlYW1cbiAqICBSZWNlaXZlVHlwZTogVGhlIHR5cGUgb2YgdGhlIGluY29taW5nIG1lc3NhZ2Ugb2YgdGhlIHVuZGVybHlpbmdcbiAqICAgIGNvbm5lY3Rpb24gc3RyZWFtXG4gKiAgTGlzdGVuZXJUeXBlOiBUaGUgdHlwZSBvZiB0aGUgbGlzdGVuZXIgdGhhdCB3aWxsIGJlIHVzZWQgZm9yIGNhbGxiYWNrc1xuICovXG5jbGFzcyBfX1BSSVZBVEVfUGVyc2lzdGVudFN0cmVhbSB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbiwgciwgaSwgcywgbywgXykge1xuICAgICAgICB0aGlzLnNpID0gZSwgdGhpcy5LbyA9IG4sIHRoaXMuJG8gPSByLCB0aGlzLmNvbm5lY3Rpb24gPSBpLCB0aGlzLmF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyID0gcywgXG4gICAgICAgIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFsc1Byb3ZpZGVyID0gbywgdGhpcy5saXN0ZW5lciA9IF8sIHRoaXMuc3RhdGUgPSAwIC8qIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5Jbml0aWFsICovICwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGNsb3NlIGNvdW50IHRoYXQncyBpbmNyZW1lbnRlZCBldmVyeSB0aW1lIHRoZSBzdHJlYW0gaXMgY2xvc2VkOyB1c2VkIGJ5XG4gICAgICAgICAqIGdldENsb3NlR3VhcmRlZERpc3BhdGNoZXIoKSB0byBpbnZhbGlkYXRlIGNhbGxiYWNrcyB0aGF0IGhhcHBlbiBhZnRlclxuICAgICAgICAgKiBjbG9zZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuVW8gPSAwLCB0aGlzLldvID0gbnVsbCwgdGhpcy5HbyA9IG51bGwsIHRoaXMuc3RyZWFtID0gbnVsbCwgdGhpcy56byA9IG5ldyBfX1BSSVZBVEVfRXhwb25lbnRpYWxCYWNrb2ZmKGUsIHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgc3RhcnQoKSBoYXMgYmVlbiBjYWxsZWQgYW5kIG5vIGVycm9yIGhhcyBvY2N1cnJlZC4gVHJ1ZVxuICAgICAqIGluZGljYXRlcyB0aGUgc3RyZWFtIGlzIG9wZW4gb3IgaW4gdGhlIHByb2Nlc3Mgb2Ygb3BlbmluZyAod2hpY2hcbiAgICAgKiBlbmNvbXBhc3NlcyByZXNwZWN0aW5nIGJhY2tvZmYsIGdldHRpbmcgYXV0aCB0b2tlbnMsIGFuZCBzdGFydGluZyB0aGVcbiAgICAgKiBhY3R1YWwgUlBDKS4gVXNlIGlzT3BlbigpIHRvIGRldGVybWluZSBpZiB0aGUgc3RyZWFtIGlzIG9wZW4gYW5kIHJlYWR5IGZvclxuICAgICAqIG91dGJvdW5kIHJlcXVlc3RzLlxuICAgICAqLyAgICBqbygpIHtcbiAgICAgICAgcmV0dXJuIDEgLyogUGVyc2lzdGVudFN0cmVhbVN0YXRlLlN0YXJ0aW5nICovID09PSB0aGlzLnN0YXRlIHx8IDUgLyogUGVyc2lzdGVudFN0cmVhbVN0YXRlLkJhY2tvZmYgKi8gPT09IHRoaXMuc3RhdGUgfHwgdGhpcy5IbygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIHVuZGVybHlpbmcgUlBDIGlzIG9wZW4gKHRoZSBvbk9wZW4oKSBsaXN0ZW5lciBoYXMgYmVlblxuICAgICAqIGNhbGxlZCkgYW5kIHRoZSBzdHJlYW0gaXMgcmVhZHkgZm9yIG91dGJvdW5kIHJlcXVlc3RzLlxuICAgICAqLyAgICBIbygpIHtcbiAgICAgICAgcmV0dXJuIDIgLyogUGVyc2lzdGVudFN0cmVhbVN0YXRlLk9wZW4gKi8gPT09IHRoaXMuc3RhdGUgfHwgMyAvKiBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuSGVhbHRoeSAqLyA9PT0gdGhpcy5zdGF0ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RhcnRzIHRoZSBSUEMuIE9ubHkgYWxsb3dlZCBpZiBpc1N0YXJ0ZWQoKSByZXR1cm5zIGZhbHNlLiBUaGUgc3RyZWFtIGlzXG4gICAgICogbm90IGltbWVkaWF0ZWx5IHJlYWR5IGZvciB1c2U6IG9uT3BlbigpIHdpbGwgYmUgaW52b2tlZCB3aGVuIHRoZSBSUEMgaXNcbiAgICAgKiByZWFkeSBmb3Igb3V0Ym91bmQgcmVxdWVzdHMsIGF0IHdoaWNoIHBvaW50IGlzT3BlbigpIHdpbGwgcmV0dXJuIHRydWUuXG4gICAgICpcbiAgICAgKiBXaGVuIHN0YXJ0IHJldHVybnMsIGlzU3RhcnRlZCgpIHdpbGwgcmV0dXJuIHRydWUuXG4gICAgICovICAgIHN0YXJ0KCkge1xuICAgICAgICA0IC8qIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5FcnJvciAqLyAhPT0gdGhpcy5zdGF0ZSA/IHRoaXMuYXV0aCgpIDogdGhpcy5KbygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdG9wcyB0aGUgUlBDLiBUaGlzIGNhbGwgaXMgaWRlbXBvdGVudCBhbmQgYWxsb3dlZCByZWdhcmRsZXNzIG9mIHRoZVxuICAgICAqIGN1cnJlbnQgaXNTdGFydGVkKCkgc3RhdGUuXG4gICAgICpcbiAgICAgKiBXaGVuIHN0b3AgcmV0dXJucywgaXNTdGFydGVkKCkgYW5kIGlzT3BlbigpIHdpbGwgYm90aCByZXR1cm4gZmFsc2UuXG4gICAgICovICAgIGFzeW5jIHN0b3AoKSB7XG4gICAgICAgIHRoaXMuam8oKSAmJiBhd2FpdCB0aGlzLmNsb3NlKDAgLyogUGVyc2lzdGVudFN0cmVhbVN0YXRlLkluaXRpYWwgKi8pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZnRlciBhbiBlcnJvciB0aGUgc3RyZWFtIHdpbGwgdXN1YWxseSBiYWNrIG9mZiBvbiB0aGUgbmV4dCBhdHRlbXB0IHRvXG4gICAgICogc3RhcnQgaXQuIElmIHRoZSBlcnJvciB3YXJyYW50cyBhbiBpbW1lZGlhdGUgcmVzdGFydCBvZiB0aGUgc3RyZWFtLCB0aGVcbiAgICAgKiBzZW5kZXIgY2FuIHVzZSB0aGlzIHRvIGluZGljYXRlIHRoYXQgdGhlIHJlY2VpdmVyIHNob3VsZCBub3QgYmFjayBvZmYuXG4gICAgICpcbiAgICAgKiBFYWNoIGVycm9yIHdpbGwgY2FsbCB0aGUgb25DbG9zZSgpIGxpc3RlbmVyLiBUaGF0IGZ1bmN0aW9uIGNhbiBkZWNpZGUgdG9cbiAgICAgKiBpbmhpYml0IGJhY2tvZmYgaWYgcmVxdWlyZWQuXG4gICAgICovICAgIFlvKCkge1xuICAgICAgICB0aGlzLnN0YXRlID0gMCAvKiBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuSW5pdGlhbCAqLyAsIHRoaXMuem8ucmVzZXQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWFya3MgdGhpcyBzdHJlYW0gYXMgaWRsZS4gSWYgbm8gZnVydGhlciBhY3Rpb25zIGFyZSBwZXJmb3JtZWQgb24gdGhlXG4gICAgICogc3RyZWFtIGZvciBvbmUgbWludXRlLCB0aGUgc3RyZWFtIHdpbGwgYXV0b21hdGljYWxseSBjbG9zZSBpdHNlbGYgYW5kXG4gICAgICogbm90aWZ5IHRoZSBzdHJlYW0ncyBvbkNsb3NlKCkgaGFuZGxlciB3aXRoIFN0YXR1cy5PSy4gVGhlIHN0cmVhbSB3aWxsIHRoZW5cbiAgICAgKiBiZSBpbiBhICFpc1N0YXJ0ZWQoKSBzdGF0ZSwgcmVxdWlyaW5nIHRoZSBjYWxsZXIgdG8gc3RhcnQgdGhlIHN0cmVhbSBhZ2FpblxuICAgICAqIGJlZm9yZSBmdXJ0aGVyIHVzZS5cbiAgICAgKlxuICAgICAqIE9ubHkgc3RyZWFtcyB0aGF0IGFyZSBpbiBzdGF0ZSAnT3BlbicgY2FuIGJlIG1hcmtlZCBpZGxlLCBhcyBhbGwgb3RoZXJcbiAgICAgKiBzdGF0ZXMgaW1wbHkgcGVuZGluZyBuZXR3b3JrIG9wZXJhdGlvbnMuXG4gICAgICovICAgIFpvKCkge1xuICAgICAgICAvLyBTdGFydHMgdGhlIGlkbGUgdGltZSBpZiB3ZSBhcmUgaW4gc3RhdGUgJ09wZW4nIGFuZCBhcmUgbm90IHlldCBhbHJlYWR5XG4gICAgICAgIC8vIHJ1bm5pbmcgYSB0aW1lciAoaW4gd2hpY2ggY2FzZSB0aGUgcHJldmlvdXMgaWRsZSB0aW1lb3V0IHN0aWxsIGFwcGxpZXMpLlxuICAgICAgICB0aGlzLkhvKCkgJiYgbnVsbCA9PT0gdGhpcy5XbyAmJiAodGhpcy5XbyA9IHRoaXMuc2kuZW5xdWV1ZUFmdGVyRGVsYXkodGhpcy5LbywgNmU0LCAoKCkgPT4gdGhpcy5YbygpKSkpO1xuICAgIH1cbiAgICAvKiogU2VuZHMgYSBtZXNzYWdlIHRvIHRoZSB1bmRlcmx5aW5nIHN0cmVhbS4gKi8gICAgZV8oZSkge1xuICAgICAgICB0aGlzLnRfKCksIHRoaXMuc3RyZWFtLnNlbmQoZSk7XG4gICAgfVxuICAgIC8qKiBDYWxsZWQgYnkgdGhlIGlkbGUgdGltZXIgd2hlbiB0aGUgc3RyZWFtIHNob3VsZCBjbG9zZSBkdWUgdG8gaW5hY3Rpdml0eS4gKi8gICAgYXN5bmMgWG8oKSB7XG4gICAgICAgIGlmICh0aGlzLkhvKCkpIFxuICAgICAgICAvLyBXaGVuIHRpbWluZyBvdXQgYW4gaWRsZSBzdHJlYW0gdGhlcmUncyBubyByZWFzb24gdG8gZm9yY2UgdGhlIHN0cmVhbSBpbnRvIGJhY2tvZmYgd2hlblxuICAgICAgICAvLyBpdCByZXN0YXJ0cyBzbyBzZXQgdGhlIHN0cmVhbSBzdGF0ZSB0byBJbml0aWFsIGluc3RlYWQgb2YgRXJyb3IuXG4gICAgICAgIHJldHVybiB0aGlzLmNsb3NlKDAgLyogUGVyc2lzdGVudFN0cmVhbVN0YXRlLkluaXRpYWwgKi8pO1xuICAgIH1cbiAgICAvKiogTWFya3MgdGhlIHN0cmVhbSBhcyBhY3RpdmUgYWdhaW4uICovICAgIHRfKCkge1xuICAgICAgICB0aGlzLldvICYmICh0aGlzLldvLmNhbmNlbCgpLCB0aGlzLldvID0gbnVsbCk7XG4gICAgfVxuICAgIC8qKiBDYW5jZWxzIHRoZSBoZWFsdGggY2hlY2sgZGVsYXllZCBvcGVyYXRpb24uICovICAgIG5fKCkge1xuICAgICAgICB0aGlzLkdvICYmICh0aGlzLkdvLmNhbmNlbCgpLCB0aGlzLkdvID0gbnVsbCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsb3NlcyB0aGUgc3RyZWFtIGFuZCBjbGVhbnMgdXAgYXMgbmVjZXNzYXJ5OlxuICAgICAqXG4gICAgICogKiBjbG9zZXMgdGhlIHVuZGVybHlpbmcgR1JQQyBzdHJlYW07XG4gICAgICogKiBjYWxscyB0aGUgb25DbG9zZSBoYW5kbGVyIHdpdGggdGhlIGdpdmVuICdlcnJvcic7XG4gICAgICogKiBzZXRzIGludGVybmFsIHN0cmVhbSBzdGF0ZSB0byAnZmluYWxTdGF0ZSc7XG4gICAgICogKiBhZGp1c3RzIHRoZSBiYWNrb2ZmIHRpbWVyIGJhc2VkIG9uIHRoZSBlcnJvclxuICAgICAqXG4gICAgICogQSBuZXcgc3RyZWFtIGNhbiBiZSBvcGVuZWQgYnkgY2FsbGluZyBzdGFydCgpLlxuICAgICAqXG4gICAgICogQHBhcmFtIGZpbmFsU3RhdGUgLSB0aGUgaW50ZW5kZWQgc3RhdGUgb2YgdGhlIHN0cmVhbSBhZnRlciBjbG9zaW5nLlxuICAgICAqIEBwYXJhbSBlcnJvciAtIHRoZSBlcnJvciB0aGUgY29ubmVjdGlvbiB3YXMgY2xvc2VkIHdpdGguXG4gICAgICovICAgIGFzeW5jIGNsb3NlKGUsIHQpIHtcbiAgICAgICAgLy8gQ2FuY2VsIGFueSBvdXRzdGFuZGluZyB0aW1lcnMgKHRoZXkncmUgZ3VhcmFudGVlZCBub3QgdG8gZXhlY3V0ZSkuXG4gICAgICAgIHRoaXMudF8oKSwgdGhpcy5uXygpLCB0aGlzLnpvLmNhbmNlbCgpLCBcbiAgICAgICAgLy8gSW52YWxpZGF0ZXMgYW55IHN0cmVhbS1yZWxhdGVkIGNhbGxiYWNrcyAoZS5nLiBmcm9tIGF1dGggb3IgdGhlXG4gICAgICAgIC8vIHVuZGVybHlpbmcgc3RyZWFtKSwgZ3VhcmFudGVlaW5nIHRoZXkgd29uJ3QgZXhlY3V0ZS5cbiAgICAgICAgdGhpcy5VbysrLCA0IC8qIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5FcnJvciAqLyAhPT0gZSA/IFxuICAgICAgICAvLyBJZiB0aGlzIGlzIGFuIGludGVudGlvbmFsIGNsb3NlIGVuc3VyZSB3ZSBkb24ndCBkZWxheSBvdXIgbmV4dCBjb25uZWN0aW9uIGF0dGVtcHQuXG4gICAgICAgIHRoaXMuem8ucmVzZXQoKSA6IHQgJiYgdC5jb2RlID09PSBELlJFU09VUkNFX0VYSEFVU1RFRCA/IChcbiAgICAgICAgLy8gTG9nIHRoZSBlcnJvci4gKFByb2JhYmx5IGVpdGhlciAncXVvdGEgZXhjZWVkZWQnIG9yICdtYXggcXVldWUgbGVuZ3RoIHJlYWNoZWQnLilcbiAgICAgICAgX19QUklWQVRFX2xvZ0Vycm9yKHQudG9TdHJpbmcoKSksIF9fUFJJVkFURV9sb2dFcnJvcihcIlVzaW5nIG1heGltdW0gYmFja29mZiBkZWxheSB0byBwcmV2ZW50IG92ZXJsb2FkaW5nIHRoZSBiYWNrZW5kLlwiKSwgXG4gICAgICAgIHRoaXMuem8uTG8oKSkgOiB0ICYmIHQuY29kZSA9PT0gRC5VTkFVVEhFTlRJQ0FURUQgJiYgMyAvKiBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuSGVhbHRoeSAqLyAhPT0gdGhpcy5zdGF0ZSAmJiAoXG4gICAgICAgIC8vIFwidW5hdXRoZW50aWNhdGVkXCIgZXJyb3IgbWVhbnMgdGhlIHRva2VuIHdhcyByZWplY3RlZC4gVGhpcyBzaG91bGQgcmFyZWx5XG4gICAgICAgIC8vIGhhcHBlbiBzaW5jZSBib3RoIEF1dGggYW5kIEFwcENoZWNrIGVuc3VyZSBhIHN1ZmZpY2llbnQgVFRMIHdoZW4gd2VcbiAgICAgICAgLy8gcmVxdWVzdCBhIHRva2VuLiBJZiBhIHVzZXIgbWFudWFsbHkgcmVzZXRzIHRoZWlyIHN5c3RlbSBjbG9jayB0aGlzIGNhblxuICAgICAgICAvLyBmYWlsLCBob3dldmVyLiBJbiB0aGlzIGNhc2UsIHdlIHNob3VsZCBnZXQgYSBDb2RlLlVOQVVUSEVOVElDQVRFRCBlcnJvclxuICAgICAgICAvLyBiZWZvcmUgd2UgcmVjZWl2ZWQgdGhlIGZpcnN0IG1lc3NhZ2UgYW5kIHdlIG5lZWQgdG8gaW52YWxpZGF0ZSB0aGUgdG9rZW5cbiAgICAgICAgLy8gdG8gZW5zdXJlIHRoYXQgd2UgZmV0Y2ggYSBuZXcgdG9rZW4uXG4gICAgICAgIHRoaXMuYXV0aENyZWRlbnRpYWxzUHJvdmlkZXIuaW52YWxpZGF0ZVRva2VuKCksIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFsc1Byb3ZpZGVyLmludmFsaWRhdGVUb2tlbigpKSwgXG4gICAgICAgIC8vIENsZWFuIHVwIHRoZSB1bmRlcmx5aW5nIHN0cmVhbSBiZWNhdXNlIHdlIGFyZSBubyBsb25nZXIgaW50ZXJlc3RlZCBpbiBldmVudHMuXG4gICAgICAgIG51bGwgIT09IHRoaXMuc3RyZWFtICYmICh0aGlzLnJfKCksIHRoaXMuc3RyZWFtLmNsb3NlKCksIHRoaXMuc3RyZWFtID0gbnVsbCksIFxuICAgICAgICAvLyBUaGlzIHN0YXRlIG11c3QgYmUgYXNzaWduZWQgYmVmb3JlIGNhbGxpbmcgb25DbG9zZSgpIHRvIGFsbG93IHRoZSBjYWxsYmFjayB0b1xuICAgICAgICAvLyBpbmhpYml0IGJhY2tvZmYgb3Igb3RoZXJ3aXNlIG1hbmlwdWxhdGUgdGhlIHN0YXRlIGluIGl0cyBub24tc3RhcnRlZCBzdGF0ZS5cbiAgICAgICAgdGhpcy5zdGF0ZSA9IGUsIFxuICAgICAgICAvLyBOb3RpZnkgdGhlIGxpc3RlbmVyIHRoYXQgdGhlIHN0cmVhbSBjbG9zZWQuXG4gICAgICAgIGF3YWl0IHRoaXMubGlzdGVuZXIuSW8odCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbiBiZSBvdmVycmlkZGVuIHRvIHBlcmZvcm0gYWRkaXRpb25hbCBjbGVhbnVwIGJlZm9yZSB0aGUgc3RyZWFtIGlzIGNsb3NlZC5cbiAgICAgKiBDYWxsaW5nIHN1cGVyLnRlYXJEb3duKCkgaXMgbm90IHJlcXVpcmVkLlxuICAgICAqLyAgICByXygpIHt9XG4gICAgYXV0aCgpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IDEgLyogUGVyc2lzdGVudFN0cmVhbVN0YXRlLlN0YXJ0aW5nICovO1xuICAgICAgICBjb25zdCBlID0gdGhpcy5pXyh0aGlzLlVvKSwgdCA9IHRoaXMuVW87XG4gICAgICAgIC8vIFRPRE8obWlrZWxlaGVuKTogSnVzdCB1c2UgZGlzcGF0Y2hJZk5vdENsb3NlZCwgYnV0IHNlZSBUT0RPIGJlbG93LlxuICAgICAgICAgICAgICAgIFByb21pc2UuYWxsKFsgdGhpcy5hdXRoQ3JlZGVudGlhbHNQcm92aWRlci5nZXRUb2tlbigpLCB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbHNQcm92aWRlci5nZXRUb2tlbigpIF0pLnRoZW4oKChbZSwgbl0pID0+IHtcbiAgICAgICAgICAgIC8vIFN0cmVhbSBjYW4gYmUgc3RvcHBlZCB3aGlsZSB3YWl0aW5nIGZvciBhdXRoZW50aWNhdGlvbi5cbiAgICAgICAgICAgIC8vIFRPRE8obWlrZWxlaGVuKTogV2UgcmVhbGx5IHNob3VsZCBqdXN0IHVzZSBkaXNwYXRjaElmTm90Q2xvc2VkXG4gICAgICAgICAgICAvLyBhbmQgbGV0IHRoaXMgZGlzcGF0Y2ggb250byB0aGUgcXVldWUsIGJ1dCB0aGF0IG9wZW5lZCBhIHNwZWMgdGVzdCBjYW5cbiAgICAgICAgICAgIC8vIG9mIHdvcm1zIHRoYXQgSSBkb24ndCB3YW50IHRvIGRlYWwgd2l0aCBpbiB0aGlzIFBSLlxuICAgICAgICAgICAgdGhpcy5VbyA9PT0gdCAmJiBcbiAgICAgICAgICAgIC8vIE5vcm1hbGx5IHdlJ2QgaGF2ZSB0byBzY2hlZHVsZSB0aGUgY2FsbGJhY2sgb24gdGhlIEFzeW5jUXVldWUuXG4gICAgICAgICAgICAvLyBIb3dldmVyLCB0aGUgZm9sbG93aW5nIGNhbGxzIGFyZSBzYWZlIHRvIGJlIGNhbGxlZCBvdXRzaWRlIHRoZVxuICAgICAgICAgICAgLy8gQXN5bmNRdWV1ZSBzaW5jZSB0aGV5IGRvbid0IGNoYWluIGFzeW5jaHJvbm91cyBjYWxsc1xuICAgICAgICAgICAgdGhpcy5zXyhlLCBuKTtcbiAgICAgICAgfSksICh0ID0+IHtcbiAgICAgICAgICAgIGUoKCgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gbmV3IEZpcmVzdG9yZUVycm9yKEQuVU5LTk9XTiwgXCJGZXRjaGluZyBhdXRoIHRva2VuIGZhaWxlZDogXCIgKyB0Lm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm9fKGUpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHNfKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuaV8odGhpcy5Vbyk7XG4gICAgICAgIHRoaXMuc3RyZWFtID0gdGhpcy5fXyhlLCB0KSwgdGhpcy5zdHJlYW0uaG8oKCgpID0+IHtcbiAgICAgICAgICAgIG4oKCgpID0+ICh0aGlzLnN0YXRlID0gMiAvKiBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuT3BlbiAqLyAsIHRoaXMuR28gPSB0aGlzLnNpLmVucXVldWVBZnRlckRlbGF5KHRoaXMuJG8sIDFlNCwgKCgpID0+ICh0aGlzLkhvKCkgJiYgKHRoaXMuc3RhdGUgPSAzIC8qIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5IZWFsdGh5ICovKSwgXG4gICAgICAgICAgICBQcm9taXNlLnJlc29sdmUoKSkpKSwgdGhpcy5saXN0ZW5lci5obygpKSkpO1xuICAgICAgICB9KSksIHRoaXMuc3RyZWFtLklvKChlID0+IHtcbiAgICAgICAgICAgIG4oKCgpID0+IHRoaXMub18oZSkpKTtcbiAgICAgICAgfSkpLCB0aGlzLnN0cmVhbS5vbk1lc3NhZ2UoKGUgPT4ge1xuICAgICAgICAgICAgbigoKCkgPT4gdGhpcy5vbk1lc3NhZ2UoZSkpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBKbygpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IDUgLyogUGVyc2lzdGVudFN0cmVhbVN0YXRlLkJhY2tvZmYgKi8gLCB0aGlzLnpvLmtvKChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gMCAvKiBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuSW5pdGlhbCAqLyAsIHRoaXMuc3RhcnQoKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvLyBWaXNpYmxlIGZvciB0ZXN0c1xuICAgIG9fKGUpIHtcbiAgICAgICAgLy8gSW4gdGhlb3J5IHRoZSBzdHJlYW0gY291bGQgY2xvc2UgY2xlYW5seSwgaG93ZXZlciwgaW4gb3VyIGN1cnJlbnQgbW9kZWxcbiAgICAgICAgLy8gd2UgbmV2ZXIgZXhwZWN0IHRoaXMgdG8gaGFwcGVuIGJlY2F1c2UgaWYgd2Ugc3RvcCBhIHN0cmVhbSBvdXJzZWx2ZXMsXG4gICAgICAgIC8vIHRoaXMgY2FsbGJhY2sgd2lsbCBuZXZlciBiZSBjYWxsZWQuIFRvIHByZXZlbnQgY2FzZXMgd2hlcmUgd2UgcmV0cnlcbiAgICAgICAgLy8gd2l0aG91dCBhIGJhY2tvZmYgYWNjaWRlbnRhbGx5LCB3ZSBzZXQgdGhlIHN0cmVhbSB0byBlcnJvciBpbiBhbGwgY2FzZXMuXG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfbG9nRGVidWcoXCJQZXJzaXN0ZW50U3RyZWFtXCIsIGBjbG9zZSB3aXRoIGVycm9yOiAke2V9YCksIHRoaXMuc3RyZWFtID0gbnVsbCwgXG4gICAgICAgIHRoaXMuY2xvc2UoNCAvKiBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuRXJyb3IgKi8gLCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIFwiZGlzcGF0Y2hlclwiIGZ1bmN0aW9uIHRoYXQgZGlzcGF0Y2hlcyBvcGVyYXRpb25zIG9udG8gdGhlXG4gICAgICogQXN5bmNRdWV1ZSBidXQgb25seSBydW5zIHRoZW0gaWYgY2xvc2VDb3VudCByZW1haW5zIHVuY2hhbmdlZC4gVGhpcyBhbGxvd3NcbiAgICAgKiB1cyB0byB0dXJuIGF1dGggLyBzdHJlYW0gY2FsbGJhY2tzIGludG8gbm8tb3BzIGlmIHRoZSBzdHJlYW0gaXMgY2xvc2VkIC9cbiAgICAgKiByZS1vcGVuZWQsIGV0Yy5cbiAgICAgKi8gICAgaV8oZSkge1xuICAgICAgICByZXR1cm4gdCA9PiB7XG4gICAgICAgICAgICB0aGlzLnNpLmVucXVldWVBbmRGb3JnZXQoKCgpID0+IHRoaXMuVW8gPT09IGUgPyB0KCkgOiAoX19QUklWQVRFX2xvZ0RlYnVnKFwiUGVyc2lzdGVudFN0cmVhbVwiLCBcInN0cmVhbSBjYWxsYmFjayBza2lwcGVkIGJ5IGdldENsb3NlR3VhcmRlZERpc3BhdGNoZXIuXCIpLCBcbiAgICAgICAgICAgIFByb21pc2UucmVzb2x2ZSgpKSkpO1xuICAgICAgICB9O1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIFBlcnNpc3RlbnRTdHJlYW0gdGhhdCBpbXBsZW1lbnRzIHRoZSBMaXN0ZW4gUlBDLlxuICpcbiAqIE9uY2UgdGhlIExpc3RlbiBzdHJlYW0gaGFzIGNhbGxlZCB0aGUgb25PcGVuKCkgbGlzdGVuZXIsIGFueSBudW1iZXIgb2ZcbiAqIGxpc3RlbigpIGFuZCB1bmxpc3RlbigpIGNhbGxzIGNhbiBiZSBtYWRlIHRvIGNvbnRyb2wgd2hhdCBjaGFuZ2VzIHdpbGwgYmVcbiAqIHNlbnQgZnJvbSB0aGUgc2VydmVyIGZvciBMaXN0ZW5SZXNwb25zZXMuXG4gKi8gY2xhc3MgX19QUklWQVRFX1BlcnNpc3RlbnRMaXN0ZW5TdHJlYW0gZXh0ZW5kcyBfX1BSSVZBVEVfUGVyc2lzdGVudFN0cmVhbSB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbiwgciwgaSwgcykge1xuICAgICAgICBzdXBlcihlLCBcImxpc3Rlbl9zdHJlYW1fY29ubmVjdGlvbl9iYWNrb2ZmXCIgLyogVGltZXJJZC5MaXN0ZW5TdHJlYW1Db25uZWN0aW9uQmFja29mZiAqLyAsIFwibGlzdGVuX3N0cmVhbV9pZGxlXCIgLyogVGltZXJJZC5MaXN0ZW5TdHJlYW1JZGxlICovICwgXCJoZWFsdGhfY2hlY2tfdGltZW91dFwiIC8qIFRpbWVySWQuSGVhbHRoQ2hlY2tUaW1lb3V0ICovICwgdCwgbiwgciwgcyksIFxuICAgICAgICB0aGlzLnNlcmlhbGl6ZXIgPSBpO1xuICAgIH1cbiAgICBfXyhlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb24udm8oXCJMaXN0ZW5cIiwgZSwgdCk7XG4gICAgfVxuICAgIG9uTWVzc2FnZShlKSB7XG4gICAgICAgIC8vIEEgc3VjY2Vzc2Z1bCByZXNwb25zZSBtZWFucyB0aGUgc3RyZWFtIGlzIGhlYWx0aHlcbiAgICAgICAgdGhpcy56by5yZXNldCgpO1xuICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX2Zyb21XYXRjaENoYW5nZSh0aGlzLnNlcmlhbGl6ZXIsIGUpLCBuID0gZnVuY3Rpb24gX19QUklWQVRFX3ZlcnNpb25Gcm9tTGlzdGVuUmVzcG9uc2UoZSkge1xuICAgICAgICAgICAgLy8gV2UgaGF2ZSBvbmx5IHJlYWNoZWQgYSBjb25zaXN0ZW50IHNuYXBzaG90IGZvciB0aGUgZW50aXJlIHN0cmVhbSBpZiB0aGVyZVxuICAgICAgICAgICAgLy8gaXMgYSByZWFkX3RpbWUgc2V0IGFuZCBpdCBhcHBsaWVzIHRvIGFsbCB0YXJnZXRzIChpLmUuIHRoZSBsaXN0IG9mXG4gICAgICAgICAgICAvLyB0YXJnZXRzIGlzIGVtcHR5KS4gVGhlIGJhY2tlbmQgaXMgZ3VhcmFudGVlZCB0byBzZW5kIHN1Y2ggcmVzcG9uc2VzLlxuICAgICAgICAgICAgaWYgKCEoXCJ0YXJnZXRDaGFuZ2VcIiBpbiBlKSkgcmV0dXJuIFNuYXBzaG90VmVyc2lvbi5taW4oKTtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBlLnRhcmdldENoYW5nZTtcbiAgICAgICAgICAgIHJldHVybiB0LnRhcmdldElkcyAmJiB0LnRhcmdldElkcy5sZW5ndGggPyBTbmFwc2hvdFZlcnNpb24ubWluKCkgOiB0LnJlYWRUaW1lID8gX19QUklWQVRFX2Zyb21WZXJzaW9uKHQucmVhZFRpbWUpIDogU25hcHNob3RWZXJzaW9uLm1pbigpO1xuICAgICAgICB9KGUpO1xuICAgICAgICByZXR1cm4gdGhpcy5saXN0ZW5lci5hXyh0LCBuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXJzIGludGVyZXN0IGluIHRoZSByZXN1bHRzIG9mIHRoZSBnaXZlbiB0YXJnZXQuIElmIHRoZSB0YXJnZXRcbiAgICAgKiBpbmNsdWRlcyBhIHJlc3VtZVRva2VuIGl0IHdpbGwgYmUgaW5jbHVkZWQgaW4gdGhlIHJlcXVlc3QuIFJlc3VsdHMgdGhhdFxuICAgICAqIGFmZmVjdCB0aGUgdGFyZ2V0IHdpbGwgYmUgc3RyZWFtZWQgYmFjayBhcyBXYXRjaENoYW5nZSBtZXNzYWdlcyB0aGF0XG4gICAgICogcmVmZXJlbmNlIHRoZSB0YXJnZXRJZC5cbiAgICAgKi8gICAgdV8oZSkge1xuICAgICAgICBjb25zdCB0ID0ge307XG4gICAgICAgIHQuZGF0YWJhc2UgPSBfX1BSSVZBVEVfZ2V0RW5jb2RlZERhdGFiYXNlSWQodGhpcy5zZXJpYWxpemVyKSwgdC5hZGRUYXJnZXQgPSBmdW5jdGlvbiBfX1BSSVZBVEVfdG9UYXJnZXQoZSwgdCkge1xuICAgICAgICAgICAgbGV0IG47XG4gICAgICAgICAgICBjb25zdCByID0gdC50YXJnZXQ7XG4gICAgICAgICAgICBpZiAobiA9IF9fUFJJVkFURV90YXJnZXRJc0RvY3VtZW50VGFyZ2V0KHIpID8ge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50czogX19QUklWQVRFX3RvRG9jdW1lbnRzVGFyZ2V0KGUsIHIpXG4gICAgICAgICAgICB9IDoge1xuICAgICAgICAgICAgICAgIHF1ZXJ5OiBfX1BSSVZBVEVfdG9RdWVyeVRhcmdldChlLCByKVxuICAgICAgICAgICAgfSwgbi50YXJnZXRJZCA9IHQudGFyZ2V0SWQsIHQucmVzdW1lVG9rZW4uYXBwcm94aW1hdGVCeXRlU2l6ZSgpID4gMCkge1xuICAgICAgICAgICAgICAgIG4ucmVzdW1lVG9rZW4gPSBfX1BSSVZBVEVfdG9CeXRlcyhlLCB0LnJlc3VtZVRva2VuKTtcbiAgICAgICAgICAgICAgICBjb25zdCByID0gX19QUklWQVRFX3RvSW50MzJQcm90byhlLCB0LmV4cGVjdGVkQ291bnQpO1xuICAgICAgICAgICAgICAgIG51bGwgIT09IHIgJiYgKG4uZXhwZWN0ZWRDb3VudCA9IHIpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0LnNuYXBzaG90VmVyc2lvbi5jb21wYXJlVG8oU25hcHNob3RWZXJzaW9uLm1pbigpKSA+IDApIHtcbiAgICAgICAgICAgICAgICAvLyBUT0RPKHd1YW5keSk6IENvbnNpZGVyIHJlbW92aW5nIGFib3ZlIGNoZWNrIGJlY2F1c2UgaXQgaXMgbW9zdCBsaWtlbHkgdHJ1ZS5cbiAgICAgICAgICAgICAgICAvLyBSaWdodCBub3csIG1hbnkgdGVzdHMgZGVwZW5kIG9uIHRoaXMgYmVoYXZpb3VyIHRob3VnaCAobGVhdmluZyBtaW4oKSBvdXRcbiAgICAgICAgICAgICAgICAvLyBvZiBzZXJpYWxpemF0aW9uKS5cbiAgICAgICAgICAgICAgICBuLnJlYWRUaW1lID0gdG9UaW1lc3RhbXAoZSwgdC5zbmFwc2hvdFZlcnNpb24udG9UaW1lc3RhbXAoKSk7XG4gICAgICAgICAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV90b0ludDMyUHJvdG8oZSwgdC5leHBlY3RlZENvdW50KTtcbiAgICAgICAgICAgICAgICBudWxsICE9PSByICYmIChuLmV4cGVjdGVkQ291bnQgPSByKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuO1xuICAgICAgICB9KHRoaXMuc2VyaWFsaXplciwgZSk7XG4gICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfdG9MaXN0ZW5SZXF1ZXN0TGFiZWxzKHRoaXMuc2VyaWFsaXplciwgZSk7XG4gICAgICAgIG4gJiYgKHQubGFiZWxzID0gbiksIHRoaXMuZV8odCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVucmVnaXN0ZXJzIGludGVyZXN0IGluIHRoZSByZXN1bHRzIG9mIHRoZSB0YXJnZXQgYXNzb2NpYXRlZCB3aXRoIHRoZVxuICAgICAqIGdpdmVuIHRhcmdldElkLlxuICAgICAqLyAgICBjXyhlKSB7XG4gICAgICAgIGNvbnN0IHQgPSB7fTtcbiAgICAgICAgdC5kYXRhYmFzZSA9IF9fUFJJVkFURV9nZXRFbmNvZGVkRGF0YWJhc2VJZCh0aGlzLnNlcmlhbGl6ZXIpLCB0LnJlbW92ZVRhcmdldCA9IGUsIFxuICAgICAgICB0aGlzLmVfKHQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIFN0cmVhbSB0aGF0IGltcGxlbWVudHMgdGhlIFdyaXRlIFJQQy5cbiAqXG4gKiBUaGUgV3JpdGUgUlBDIHJlcXVpcmVzIHRoZSBjYWxsZXIgdG8gbWFpbnRhaW4gc3BlY2lhbCBzdHJlYW1Ub2tlblxuICogc3RhdGUgaW4gYmV0d2VlbiBjYWxscywgdG8gaGVscCB0aGUgc2VydmVyIHVuZGVyc3RhbmQgd2hpY2ggcmVzcG9uc2VzIHRoZVxuICogY2xpZW50IGhhcyBwcm9jZXNzZWQgYnkgdGhlIHRpbWUgdGhlIG5leHQgcmVxdWVzdCBpcyBtYWRlLiBFdmVyeSByZXNwb25zZVxuICogd2lsbCBjb250YWluIGEgc3RyZWFtVG9rZW47IHRoaXMgdmFsdWUgbXVzdCBiZSBwYXNzZWQgdG8gdGhlIG5leHRcbiAqIHJlcXVlc3QuXG4gKlxuICogQWZ0ZXIgY2FsbGluZyBzdGFydCgpIG9uIHRoaXMgc3RyZWFtLCB0aGUgbmV4dCByZXF1ZXN0IG11c3QgYmUgYSBoYW5kc2hha2UsXG4gKiBjb250YWluaW5nIHdoYXRldmVyIHN0cmVhbVRva2VuIGlzIG9uIGhhbmQuIE9uY2UgYSByZXNwb25zZSB0byB0aGlzXG4gKiByZXF1ZXN0IGlzIHJlY2VpdmVkLCBhbGwgcGVuZGluZyBtdXRhdGlvbnMgbWF5IGJlIHN1Ym1pdHRlZC4gV2hlblxuICogc3VibWl0dGluZyBtdWx0aXBsZSBiYXRjaGVzIG9mIG11dGF0aW9ucyBhdCB0aGUgc2FtZSB0aW1lLCBpdCdzXG4gKiBva2F5IHRvIHVzZSB0aGUgc2FtZSBzdHJlYW1Ub2tlbiBmb3IgdGhlIGNhbGxzIHRvIHdyaXRlTXV0YXRpb25zLlxuICpcbiAqIFRPRE8oYi8zMzI3MTIzNSk6IFVzZSBwcm90byB0eXBlc1xuICovIGNsYXNzIF9fUFJJVkFURV9QZXJzaXN0ZW50V3JpdGVTdHJlYW0gZXh0ZW5kcyBfX1BSSVZBVEVfUGVyc2lzdGVudFN0cmVhbSB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbiwgciwgaSwgcykge1xuICAgICAgICBzdXBlcihlLCBcIndyaXRlX3N0cmVhbV9jb25uZWN0aW9uX2JhY2tvZmZcIiAvKiBUaW1lcklkLldyaXRlU3RyZWFtQ29ubmVjdGlvbkJhY2tvZmYgKi8gLCBcIndyaXRlX3N0cmVhbV9pZGxlXCIgLyogVGltZXJJZC5Xcml0ZVN0cmVhbUlkbGUgKi8gLCBcImhlYWx0aF9jaGVja190aW1lb3V0XCIgLyogVGltZXJJZC5IZWFsdGhDaGVja1RpbWVvdXQgKi8gLCB0LCBuLCByLCBzKSwgXG4gICAgICAgIHRoaXMuc2VyaWFsaXplciA9IGksIHRoaXMubF8gPSAhMTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVHJhY2tzIHdoZXRoZXIgb3Igbm90IGEgaGFuZHNoYWtlIGhhcyBiZWVuIHN1Y2Nlc3NmdWxseSBleGNoYW5nZWQgYW5kXG4gICAgICogdGhlIHN0cmVhbSBpcyByZWFkeSB0byBhY2NlcHQgbXV0YXRpb25zLlxuICAgICAqLyAgICBnZXQgaF8oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxfO1xuICAgIH1cbiAgICAvLyBPdmVycmlkZSBvZiBQZXJzaXN0ZW50U3RyZWFtLnN0YXJ0XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIHRoaXMubF8gPSAhMSwgdGhpcy5sYXN0U3RyZWFtVG9rZW4gPSB2b2lkIDAsIHN1cGVyLnN0YXJ0KCk7XG4gICAgfVxuICAgIHJfKCkge1xuICAgICAgICB0aGlzLmxfICYmIHRoaXMuUF8oW10pO1xuICAgIH1cbiAgICBfXyhlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb24udm8oXCJXcml0ZVwiLCBlLCB0KTtcbiAgICB9XG4gICAgb25NZXNzYWdlKGUpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAvLyBBbHdheXMgY2FwdHVyZSB0aGUgbGFzdCBzdHJlYW0gdG9rZW4uXG4gICAgICAgIF9fUFJJVkFURV9oYXJkQXNzZXJ0KCEhZS5zdHJlYW1Ub2tlbiksIHRoaXMubGFzdFN0cmVhbVRva2VuID0gZS5zdHJlYW1Ub2tlbiwgdGhpcy5sXykge1xuICAgICAgICAgICAgLy8gQSBzdWNjZXNzZnVsIGZpcnN0IHdyaXRlIHJlc3BvbnNlIG1lYW5zIHRoZSBzdHJlYW0gaXMgaGVhbHRoeSxcbiAgICAgICAgICAgIC8vIE5vdGUsIHRoYXQgd2UgY291bGQgY29uc2lkZXIgYSBzdWNjZXNzZnVsIGhhbmRzaGFrZSBoZWFsdGh5LCBob3dldmVyLFxuICAgICAgICAgICAgLy8gdGhlIHdyaXRlIGl0c2VsZiBtaWdodCBiZSBjYXVzaW5nIGFuIGVycm9yIHdlIHdhbnQgdG8gYmFjayBvZmYgZnJvbS5cbiAgICAgICAgICAgIHRoaXMuem8ucmVzZXQoKTtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfZnJvbVdyaXRlUmVzdWx0cyhlLndyaXRlUmVzdWx0cywgZS5jb21taXRUaW1lKSwgbiA9IF9fUFJJVkFURV9mcm9tVmVyc2lvbihlLmNvbW1pdFRpbWUpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubGlzdGVuZXIuSV8obiwgdCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVGhlIGZpcnN0IHJlc3BvbnNlIGlzIGFsd2F5cyB0aGUgaGFuZHNoYWtlIHJlc3BvbnNlXG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfaGFyZEFzc2VydCghZS53cml0ZVJlc3VsdHMgfHwgMCA9PT0gZS53cml0ZVJlc3VsdHMubGVuZ3RoKSwgdGhpcy5sXyA9ICEwLCBcbiAgICAgICAgdGhpcy5saXN0ZW5lci5UXygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kcyBhbiBpbml0aWFsIHN0cmVhbVRva2VuIHRvIHRoZSBzZXJ2ZXIsIHBlcmZvcm1pbmcgdGhlIGhhbmRzaGFrZVxuICAgICAqIHJlcXVpcmVkIHRvIG1ha2UgdGhlIFN0cmVhbWluZ1dyaXRlIFJQQyB3b3JrLiBTdWJzZXF1ZW50XG4gICAgICogY2FsbHMgc2hvdWxkIHdhaXQgdW50aWwgb25IYW5kc2hha2VDb21wbGV0ZSB3YXMgY2FsbGVkLlxuICAgICAqLyAgICBFXygpIHtcbiAgICAgICAgLy8gVE9ETyhkaW1vbmQpOiBTdXBwb3J0IHN0cmVhbSByZXN1bXB0aW9uLiBXZSBpbnRlbnRpb25hbGx5IGRvIG5vdCBzZXQgdGhlXG4gICAgICAgIC8vIHN0cmVhbSB0b2tlbiBvbiB0aGUgaGFuZHNoYWtlLCBpZ25vcmluZyBhbnkgc3RyZWFtIHRva2VuIHdlIG1pZ2h0IGhhdmUuXG4gICAgICAgIGNvbnN0IGUgPSB7fTtcbiAgICAgICAgZS5kYXRhYmFzZSA9IF9fUFJJVkFURV9nZXRFbmNvZGVkRGF0YWJhc2VJZCh0aGlzLnNlcmlhbGl6ZXIpLCB0aGlzLmVfKGUpO1xuICAgIH1cbiAgICAvKiogU2VuZHMgYSBncm91cCBvZiBtdXRhdGlvbnMgdG8gdGhlIEZpcmVzdG9yZSBiYWNrZW5kIHRvIGFwcGx5LiAqLyAgICBQXyhlKSB7XG4gICAgICAgIGNvbnN0IHQgPSB7XG4gICAgICAgICAgICBzdHJlYW1Ub2tlbjogdGhpcy5sYXN0U3RyZWFtVG9rZW4sXG4gICAgICAgICAgICB3cml0ZXM6IGUubWFwKChlID0+IHRvTXV0YXRpb24odGhpcy5zZXJpYWxpemVyLCBlKSkpXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZV8odCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBEYXRhc3RvcmUgYW5kIGl0cyByZWxhdGVkIG1ldGhvZHMgYXJlIGEgd3JhcHBlciBhcm91bmQgdGhlIGV4dGVybmFsIEdvb2dsZVxuICogQ2xvdWQgRGF0YXN0b3JlIGdycGMgQVBJLCB3aGljaCBwcm92aWRlcyBhbiBpbnRlcmZhY2UgdGhhdCBpcyBtb3JlIGNvbnZlbmllbnRcbiAqIGZvciB0aGUgcmVzdCBvZiB0aGUgY2xpZW50IFNESyBhcmNoaXRlY3R1cmUgdG8gY29uc3VtZS5cbiAqL1xuLyoqXG4gKiBBbiBpbXBsZW1lbnRhdGlvbiBvZiBEYXRhc3RvcmUgdGhhdCBleHBvc2VzIGFkZGl0aW9uYWwgc3RhdGUgZm9yIGludGVybmFsXG4gKiBjb25zdW1wdGlvbi5cbiAqL1xuY2xhc3MgX19QUklWQVRFX0RhdGFzdG9yZUltcGwgZXh0ZW5kcyBjbGFzcyBEYXRhc3RvcmUge30ge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4sIHIpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5hdXRoQ3JlZGVudGlhbHMgPSBlLCB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbHMgPSB0LCB0aGlzLmNvbm5lY3Rpb24gPSBuLCBcbiAgICAgICAgdGhpcy5zZXJpYWxpemVyID0gciwgdGhpcy5kXyA9ICExO1xuICAgIH1cbiAgICBBXygpIHtcbiAgICAgICAgaWYgKHRoaXMuZF8pIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELkZBSUxFRF9QUkVDT05ESVRJT04sIFwiVGhlIGNsaWVudCBoYXMgYWxyZWFkeSBiZWVuIHRlcm1pbmF0ZWQuXCIpO1xuICAgIH1cbiAgICAvKiogSW52b2tlcyB0aGUgcHJvdmlkZWQgUlBDIHdpdGggYXV0aCBhbmQgQXBwQ2hlY2sgdG9rZW5zLiAqLyAgICB3byhlLCB0LCBuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkFfKCksIFByb21pc2UuYWxsKFsgdGhpcy5hdXRoQ3JlZGVudGlhbHMuZ2V0VG9rZW4oKSwgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxzLmdldFRva2VuKCkgXSkudGhlbigoKFtyLCBpXSkgPT4gdGhpcy5jb25uZWN0aW9uLndvKGUsIHQsIG4sIHIsIGkpKSkuY2F0Y2goKGUgPT4ge1xuICAgICAgICAgICAgdGhyb3cgXCJGaXJlYmFzZUVycm9yXCIgPT09IGUubmFtZSA/IChlLmNvZGUgPT09IEQuVU5BVVRIRU5USUNBVEVEICYmICh0aGlzLmF1dGhDcmVkZW50aWFscy5pbnZhbGlkYXRlVG9rZW4oKSwgXG4gICAgICAgICAgICB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbHMuaW52YWxpZGF0ZVRva2VuKCkpLCBlKSA6IG5ldyBGaXJlc3RvcmVFcnJvcihELlVOS05PV04sIGUudG9TdHJpbmcoKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqIEludm9rZXMgdGhlIHByb3ZpZGVkIFJQQyB3aXRoIHN0cmVhbWVkIHJlc3VsdHMgd2l0aCBhdXRoIGFuZCBBcHBDaGVjayB0b2tlbnMuICovICAgIENvKGUsIHQsIG4sIHIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuQV8oKSwgUHJvbWlzZS5hbGwoWyB0aGlzLmF1dGhDcmVkZW50aWFscy5nZXRUb2tlbigpLCB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbHMuZ2V0VG9rZW4oKSBdKS50aGVuKCgoW2ksIHNdKSA9PiB0aGlzLmNvbm5lY3Rpb24uQ28oZSwgdCwgbiwgaSwgcywgcikpKS5jYXRjaCgoZSA9PiB7XG4gICAgICAgICAgICB0aHJvdyBcIkZpcmViYXNlRXJyb3JcIiA9PT0gZS5uYW1lID8gKGUuY29kZSA9PT0gRC5VTkFVVEhFTlRJQ0FURUQgJiYgKHRoaXMuYXV0aENyZWRlbnRpYWxzLmludmFsaWRhdGVUb2tlbigpLCBcbiAgICAgICAgICAgIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFscy5pbnZhbGlkYXRlVG9rZW4oKSksIGUpIDogbmV3IEZpcmVzdG9yZUVycm9yKEQuVU5LTk9XTiwgZS50b1N0cmluZygpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB0ZXJtaW5hdGUoKSB7XG4gICAgICAgIHRoaXMuZF8gPSAhMDtcbiAgICB9XG59XG5cbi8vIFRPRE8oZmlyZXN0b3JleHApOiBNYWtlIHN1cmUgdGhlcmUgaXMgb25seSBvbmUgRGF0YXN0b3JlIGluc3RhbmNlIHBlclxuLy8gZmlyZXN0b3JlLWV4cCBjbGllbnQuXG5hc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfaW52b2tlUnVuQWdncmVnYXRpb25RdWVyeVJwYyhlLCB0LCBuKSB7XG4gICAgdmFyIHI7XG4gICAgY29uc3QgaSA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSksIHtyZXF1ZXN0OiBzLCBSXzogb30gPSBmdW5jdGlvbiBfX1BSSVZBVEVfdG9SdW5BZ2dyZWdhdGlvblF1ZXJ5UmVxdWVzdChlLCB0LCBuKSB7XG4gICAgICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfdG9RdWVyeVRhcmdldChlLCB0KSwgaSA9IHt9LCBzID0gW107XG4gICAgICAgIGxldCBvID0gMDtcbiAgICAgICAgcmV0dXJuIG4uZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICAvLyBNYXAgYWxsIGNsaWVudC1zaWRlIGFsaWFzZXMgdG8gYSB1bmlxdWUgc2hvcnQtZm9ybVxuICAgICAgICAgICAgLy8gYWxpYXMuIFRoaXMgYXZvaWRzIGlzc3VlcyB3aXRoIGNsaWVudC1zaWRlIGFsaWFzZXMgdGhhdFxuICAgICAgICAgICAgLy8gZXhjZWVkIHRoZSAxNTAwLWJ5dGUgc3RyaW5nIHNpemUgbGltaXQuXG4gICAgICAgICAgICBjb25zdCB0ID0gXCJhZ2dyZWdhdGVfXCIgKyBvKys7XG4gICAgICAgICAgICBpW3RdID0gZS5hbGlhcywgXCJjb3VudFwiID09PSBlLmFnZ3JlZ2F0ZVR5cGUgPyBzLnB1c2goe1xuICAgICAgICAgICAgICAgIGFsaWFzOiB0LFxuICAgICAgICAgICAgICAgIGNvdW50OiB7fVxuICAgICAgICAgICAgfSkgOiBcImF2Z1wiID09PSBlLmFnZ3JlZ2F0ZVR5cGUgPyBzLnB1c2goe1xuICAgICAgICAgICAgICAgIGFsaWFzOiB0LFxuICAgICAgICAgICAgICAgIGF2Zzoge1xuICAgICAgICAgICAgICAgICAgICBmaWVsZDogX19QUklWQVRFX3RvRmllbGRQYXRoUmVmZXJlbmNlKGUuZmllbGRQYXRoKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pIDogXCJzdW1cIiA9PT0gZS5hZ2dyZWdhdGVUeXBlICYmIHMucHVzaCh7XG4gICAgICAgICAgICAgICAgYWxpYXM6IHQsXG4gICAgICAgICAgICAgICAgc3VtOiB7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkOiBfX1BSSVZBVEVfdG9GaWVsZFBhdGhSZWZlcmVuY2UoZS5maWVsZFBhdGgpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pKSwge1xuICAgICAgICAgICAgcmVxdWVzdDoge1xuICAgICAgICAgICAgICAgIHN0cnVjdHVyZWRBZ2dyZWdhdGlvblF1ZXJ5OiB7XG4gICAgICAgICAgICAgICAgICAgIGFnZ3JlZ2F0aW9uczogcyxcbiAgICAgICAgICAgICAgICAgICAgc3RydWN0dXJlZFF1ZXJ5OiByLnN0cnVjdHVyZWRRdWVyeVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcGFyZW50OiByLnBhcmVudFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFJfOiBpXG4gICAgICAgIH07XG4gICAgfShpLnNlcmlhbGl6ZXIsIGZ1bmN0aW9uIF9fUFJJVkFURV9xdWVyeVRvQWdncmVnYXRlVGFyZ2V0KGUpIHtcbiAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgICAgIHJldHVybiB0LlBlIHx8IChcbiAgICAgICAgLy8gRG8gbm90IGluY2x1ZGUgaW1wbGljaXQgb3JkZXItYnlzIGZvciBhZ2dyZWdhdGUgcXVlcmllcy5cbiAgICAgICAgdC5QZSA9IF9fUFJJVkFURV9fcXVlcnlUb1RhcmdldCh0LCBlLmV4cGxpY2l0T3JkZXJCeSkpLCB0LlBlO1xuICAgIH0odCksIG4pLCBfID0gcy5wYXJlbnQ7XG4gICAgaS5jb25uZWN0aW9uLnlvIHx8IGRlbGV0ZSBzLnBhcmVudDtcbiAgICBjb25zdCBhID0gKGF3YWl0IGkuQ28oXCJSdW5BZ2dyZWdhdGlvblF1ZXJ5XCIsIF8sIHMsIC8qZXhwZWN0ZWRSZXNwb25zZUNvdW50PSovIDEpKS5maWx0ZXIoKGUgPT4gISFlLnJlc3VsdCkpO1xuICAgIC8vIE9taXQgUnVuQWdncmVnYXRpb25RdWVyeVJlc3BvbnNlIHRoYXQgb25seSBjb250YWluIHJlYWRUaW1lcy5cbiAgICAgICAgX19QUklWQVRFX2hhcmRBc3NlcnQoMSA9PT0gYS5sZW5ndGgpO1xuICAgIC8vIFJlbWFwIHRoZSBzaG9ydC1mb3JtIGFsaWFzZXMgdGhhdCB3ZXJlIHNlbnQgdG8gdGhlIHNlcnZlclxuICAgIC8vIHRvIHRoZSBjbGllbnQtc2lkZSBhbGlhc2VzLiBVc2VycyB3aWxsIGFjY2VzcyB0aGUgcmVzdWx0c1xuICAgIC8vIHVzaW5nIHRoZSBjbGllbnQtc2lkZSBhbGlhcy5cbiAgICBjb25zdCB1ID0gbnVsbCA9PT0gKHIgPSBhWzBdLnJlc3VsdCkgfHwgdm9pZCAwID09PSByID8gdm9pZCAwIDogci5hZ2dyZWdhdGVGaWVsZHM7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKHUpLnJlZHVjZSgoKGUsIHQpID0+IChlW29bdF1dID0gdVt0XSwgZSkpLCB7fSk7XG59XG5cbi8qKlxuICogQSBjb21wb25lbnQgdXNlZCBieSB0aGUgUmVtb3RlU3RvcmUgdG8gdHJhY2sgdGhlIE9ubGluZVN0YXRlICh0aGF0IGlzLFxuICogd2hldGhlciBvciBub3QgdGhlIGNsaWVudCBhcyBhIHdob2xlIHNob3VsZCBiZSBjb25zaWRlcmVkIHRvIGJlIG9ubGluZSBvclxuICogb2ZmbGluZSksIGltcGxlbWVudGluZyB0aGUgYXBwcm9wcmlhdGUgaGV1cmlzdGljcy5cbiAqXG4gKiBJbiBwYXJ0aWN1bGFyLCB3aGVuIHRoZSBjbGllbnQgaXMgdHJ5aW5nIHRvIGNvbm5lY3QgdG8gdGhlIGJhY2tlbmQsIHdlXG4gKiBhbGxvdyB1cCB0byBNQVhfV0FUQ0hfU1RSRUFNX0ZBSUxVUkVTIHdpdGhpbiBPTkxJTkVfU1RBVEVfVElNRU9VVF9NUyBmb3JcbiAqIGEgY29ubmVjdGlvbiB0byBzdWNjZWVkLiBJZiB3ZSBoYXZlIHRvbyBtYW55IGZhaWx1cmVzIG9yIHRoZSB0aW1lb3V0IGVsYXBzZXMsXG4gKiB0aGVuIHdlIHNldCB0aGUgT25saW5lU3RhdGUgdG8gT2ZmbGluZSwgYW5kIHRoZSBjbGllbnQgd2lsbCBiZWhhdmUgYXMgaWZcbiAqIGl0IGlzIG9mZmxpbmUgKGdldCgpcyB3aWxsIHJldHVybiBjYWNoZWQgZGF0YSwgZXRjLikuXG4gKi9cbmNsYXNzIF9fUFJJVkFURV9PbmxpbmVTdGF0ZVRyYWNrZXIge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgdGhpcy5hc3luY1F1ZXVlID0gZSwgdGhpcy5vbmxpbmVTdGF0ZUhhbmRsZXIgPSB0LCBcbiAgICAgICAgLyoqIFRoZSBjdXJyZW50IE9ubGluZVN0YXRlLiAqL1xuICAgICAgICB0aGlzLnN0YXRlID0gXCJVbmtub3duXCIgLyogT25saW5lU3RhdGUuVW5rbm93biAqLyAsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSBjb3VudCBvZiBjb25zZWN1dGl2ZSBmYWlsdXJlcyB0byBvcGVuIHRoZSBzdHJlYW0uIElmIGl0IHJlYWNoZXMgdGhlXG4gICAgICAgICAqIG1heGltdW0gZGVmaW5lZCBieSBNQVhfV0FUQ0hfU1RSRUFNX0ZBSUxVUkVTLCB3ZSdsbCBzZXQgdGhlIE9ubGluZVN0YXRlIHRvXG4gICAgICAgICAqIE9mZmxpbmUuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLlZfID0gMCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIHRpbWVyIHRoYXQgZWxhcHNlcyBhZnRlciBPTkxJTkVfU1RBVEVfVElNRU9VVF9NUywgYXQgd2hpY2ggcG9pbnQgd2VcbiAgICAgICAgICogdHJhbnNpdGlvbiBmcm9tIE9ubGluZVN0YXRlLlVua25vd24gdG8gT25saW5lU3RhdGUuT2ZmbGluZSB3aXRob3V0IHdhaXRpbmdcbiAgICAgICAgICogZm9yIHRoZSBzdHJlYW0gdG8gYWN0dWFsbHkgZmFpbCAoTUFYX1dBVENIX1NUUkVBTV9GQUlMVVJFUyB0aW1lcykuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm1fID0gbnVsbCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaGV0aGVyIHRoZSBjbGllbnQgc2hvdWxkIGxvZyBhIHdhcm5pbmcgbWVzc2FnZSBpZiBpdCBmYWlscyB0byBjb25uZWN0IHRvXG4gICAgICAgICAqIHRoZSBiYWNrZW5kIChpbml0aWFsbHkgdHJ1ZSwgY2xlYXJlZCBhZnRlciBhIHN1Y2Nlc3NmdWwgc3RyZWFtLCBvciBpZiB3ZSd2ZVxuICAgICAgICAgKiBsb2dnZWQgdGhlIG1lc3NhZ2UgYWxyZWFkeSkuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmZfID0gITA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGxlZCBieSBSZW1vdGVTdG9yZSB3aGVuIGEgd2F0Y2ggc3RyZWFtIGlzIHN0YXJ0ZWQgKGluY2x1ZGluZyBvbiBlYWNoXG4gICAgICogYmFja29mZiBhdHRlbXB0KS5cbiAgICAgKlxuICAgICAqIElmIHRoaXMgaXMgdGhlIGZpcnN0IGF0dGVtcHQsIGl0IHNldHMgdGhlIE9ubGluZVN0YXRlIHRvIFVua25vd24gYW5kIHN0YXJ0c1xuICAgICAqIHRoZSBvbmxpbmVTdGF0ZVRpbWVyLlxuICAgICAqLyAgICBnXygpIHtcbiAgICAgICAgMCA9PT0gdGhpcy5WXyAmJiAodGhpcy5wXyhcIlVua25vd25cIiAvKiBPbmxpbmVTdGF0ZS5Vbmtub3duICovKSwgdGhpcy5tXyA9IHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQWZ0ZXJEZWxheShcIm9ubGluZV9zdGF0ZV90aW1lb3V0XCIgLyogVGltZXJJZC5PbmxpbmVTdGF0ZVRpbWVvdXQgKi8gLCAxZTQsICgoKSA9PiAodGhpcy5tXyA9IG51bGwsIFxuICAgICAgICB0aGlzLnlfKFwiQmFja2VuZCBkaWRuJ3QgcmVzcG9uZCB3aXRoaW4gMTAgc2Vjb25kcy5cIiksIHRoaXMucF8oXCJPZmZsaW5lXCIgLyogT25saW5lU3RhdGUuT2ZmbGluZSAqLyksIFxuICAgICAgICBQcm9taXNlLnJlc29sdmUoKSkpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgb3VyIE9ubGluZVN0YXRlIGFzIGFwcHJvcHJpYXRlIGFmdGVyIHRoZSB3YXRjaCBzdHJlYW0gcmVwb3J0cyBhXG4gICAgICogZmFpbHVyZS4gVGhlIGZpcnN0IGZhaWx1cmUgbW92ZXMgdXMgdG8gdGhlICdVbmtub3duJyBzdGF0ZS4gV2UgdGhlbiBtYXlcbiAgICAgKiBhbGxvdyBtdWx0aXBsZSBmYWlsdXJlcyAoYmFzZWQgb24gTUFYX1dBVENIX1NUUkVBTV9GQUlMVVJFUykgYmVmb3JlIHdlXG4gICAgICogYWN0dWFsbHkgdHJhbnNpdGlvbiB0byB0aGUgJ09mZmxpbmUnIHN0YXRlLlxuICAgICAqLyAgICB3XyhlKSB7XG4gICAgICAgIFwiT25saW5lXCIgLyogT25saW5lU3RhdGUuT25saW5lICovID09PSB0aGlzLnN0YXRlID8gdGhpcy5wXyhcIlVua25vd25cIiAvKiBPbmxpbmVTdGF0ZS5Vbmtub3duICovKSA6ICh0aGlzLlZfKyssIFxuICAgICAgICB0aGlzLlZfID49IDEgJiYgKHRoaXMuU18oKSwgdGhpcy55XyhgQ29ubmVjdGlvbiBmYWlsZWQgMSB0aW1lcy4gTW9zdCByZWNlbnQgZXJyb3I6ICR7ZS50b1N0cmluZygpfWApLCBcbiAgICAgICAgdGhpcy5wXyhcIk9mZmxpbmVcIiAvKiBPbmxpbmVTdGF0ZS5PZmZsaW5lICovKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFeHBsaWNpdGx5IHNldHMgdGhlIE9ubGluZVN0YXRlIHRvIHRoZSBzcGVjaWZpZWQgc3RhdGUuXG4gICAgICpcbiAgICAgKiBOb3RlIHRoYXQgdGhpcyByZXNldHMgb3VyIHRpbWVycyAvIGZhaWx1cmUgY291bnRlcnMsIGV0Yy4gdXNlZCBieSBvdXJcbiAgICAgKiBPZmZsaW5lIGhldXJpc3RpY3MsIHNvIG11c3Qgbm90IGJlIHVzZWQgaW4gcGxhY2Ugb2ZcbiAgICAgKiBoYW5kbGVXYXRjaFN0cmVhbVN0YXJ0KCkgYW5kIGhhbmRsZVdhdGNoU3RyZWFtRmFpbHVyZSgpLlxuICAgICAqLyAgICBzZXQoZSkge1xuICAgICAgICB0aGlzLlNfKCksIHRoaXMuVl8gPSAwLCBcIk9ubGluZVwiIC8qIE9ubGluZVN0YXRlLk9ubGluZSAqLyA9PT0gZSAmJiAoXG4gICAgICAgIC8vIFdlJ3ZlIGNvbm5lY3RlZCB0byB3YXRjaCBhdCBsZWFzdCBvbmNlLiBEb24ndCB3YXJuIHRoZSBkZXZlbG9wZXJcbiAgICAgICAgLy8gYWJvdXQgYmVpbmcgb2ZmbGluZSBnb2luZyBmb3J3YXJkLlxuICAgICAgICB0aGlzLmZfID0gITEpLCB0aGlzLnBfKGUpO1xuICAgIH1cbiAgICBwXyhlKSB7XG4gICAgICAgIGUgIT09IHRoaXMuc3RhdGUgJiYgKHRoaXMuc3RhdGUgPSBlLCB0aGlzLm9ubGluZVN0YXRlSGFuZGxlcihlKSk7XG4gICAgfVxuICAgIHlfKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IGBDb3VsZCBub3QgcmVhY2ggQ2xvdWQgRmlyZXN0b3JlIGJhY2tlbmQuICR7ZX1cXG5UaGlzIHR5cGljYWxseSBpbmRpY2F0ZXMgdGhhdCB5b3VyIGRldmljZSBkb2VzIG5vdCBoYXZlIGEgaGVhbHRoeSBJbnRlcm5ldCBjb25uZWN0aW9uIGF0IHRoZSBtb21lbnQuIFRoZSBjbGllbnQgd2lsbCBvcGVyYXRlIGluIG9mZmxpbmUgbW9kZSB1bnRpbCBpdCBpcyBhYmxlIHRvIHN1Y2Nlc3NmdWxseSBjb25uZWN0IHRvIHRoZSBiYWNrZW5kLmA7XG4gICAgICAgIHRoaXMuZl8gPyAoX19QUklWQVRFX2xvZ0Vycm9yKHQpLCB0aGlzLmZfID0gITEpIDogX19QUklWQVRFX2xvZ0RlYnVnKFwiT25saW5lU3RhdGVUcmFja2VyXCIsIHQpO1xuICAgIH1cbiAgICBTXygpIHtcbiAgICAgICAgbnVsbCAhPT0gdGhpcy5tXyAmJiAodGhpcy5tXy5jYW5jZWwoKSwgdGhpcy5tXyA9IG51bGwpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgX19QUklWQVRFX1JlbW90ZVN0b3JlSW1wbCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIGxvY2FsIHN0b3JlLCB1c2VkIHRvIGZpbGwgdGhlIHdyaXRlIHBpcGVsaW5lIHdpdGggb3V0Ym91bmQgbXV0YXRpb25zLlxuICAgICAqL1xuICAgIGUsIFxuICAgIC8qKiBUaGUgY2xpZW50LXNpZGUgcHJveHkgZm9yIGludGVyYWN0aW5nIHdpdGggdGhlIGJhY2tlbmQuICovXG4gICAgdCwgbiwgciwgaSkge1xuICAgICAgICB0aGlzLmxvY2FsU3RvcmUgPSBlLCB0aGlzLmRhdGFzdG9yZSA9IHQsIHRoaXMuYXN5bmNRdWV1ZSA9IG4sIHRoaXMucmVtb3RlU3luY2VyID0ge30sIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSBsaXN0IG9mIHVwIHRvIE1BWF9QRU5ESU5HX1dSSVRFUyB3cml0ZXMgdGhhdCB3ZSBoYXZlIGZldGNoZWQgZnJvbSB0aGVcbiAgICAgICAgICogTG9jYWxTdG9yZSB2aWEgZmlsbFdyaXRlUGlwZWxpbmUoKSBhbmQgaGF2ZSBvciB3aWxsIHNlbmQgdG8gdGhlIHdyaXRlXG4gICAgICAgICAqIHN0cmVhbS5cbiAgICAgICAgICpcbiAgICAgICAgICogV2hlbmV2ZXIgd3JpdGVQaXBlbGluZS5sZW5ndGggPiAwIHRoZSBSZW1vdGVTdG9yZSB3aWxsIGF0dGVtcHQgdG8gc3RhcnQgb3JcbiAgICAgICAgICogcmVzdGFydCB0aGUgd3JpdGUgc3RyZWFtLiBXaGVuIHRoZSBzdHJlYW0gaXMgZXN0YWJsaXNoZWQgdGhlIHdyaXRlcyBpbiB0aGVcbiAgICAgICAgICogcGlwZWxpbmUgd2lsbCBiZSBzZW50IGluIG9yZGVyLlxuICAgICAgICAgKlxuICAgICAgICAgKiBXcml0ZXMgcmVtYWluIGluIHdyaXRlUGlwZWxpbmUgdW50aWwgdGhleSBhcmUgYWNrbm93bGVkZ2VkIGJ5IHRoZSBiYWNrZW5kXG4gICAgICAgICAqIGFuZCB0aHVzIHdpbGwgYXV0b21hdGljYWxseSBiZSByZS1zZW50IGlmIHRoZSBzdHJlYW0gaXMgaW50ZXJydXB0ZWQgL1xuICAgICAgICAgKiByZXN0YXJ0ZWQgYmVmb3JlIHRoZXkncmUgYWNrbm93bGVkZ2VkLlxuICAgICAgICAgKlxuICAgICAgICAgKiBXcml0ZSByZXNwb25zZXMgZnJvbSB0aGUgYmFja2VuZCBhcmUgbGlua2VkIHRvIHRoZWlyIG9yaWdpbmF0aW5nIHJlcXVlc3RcbiAgICAgICAgICogcHVyZWx5IGJhc2VkIG9uIG9yZGVyLCBhbmQgc28gd2UgY2FuIGp1c3Qgc2hpZnQoKSB3cml0ZXMgZnJvbSB0aGUgZnJvbnQgb2ZcbiAgICAgICAgICogdGhlIHdyaXRlUGlwZWxpbmUgYXMgd2UgcmVjZWl2ZSByZXNwb25zZXMuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmJfID0gW10sIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSBtYXBwaW5nIG9mIHdhdGNoZWQgdGFyZ2V0cyB0aGF0IHRoZSBjbGllbnQgY2FyZXMgYWJvdXQgdHJhY2tpbmcgYW5kIHRoZVxuICAgICAgICAgKiB1c2VyIGhhcyBleHBsaWNpdGx5IGNhbGxlZCBhICdsaXN0ZW4nIGZvciB0aGlzIHRhcmdldC5cbiAgICAgICAgICpcbiAgICAgICAgICogVGhlc2UgdGFyZ2V0cyBtYXkgb3IgbWF5IG5vdCBoYXZlIGJlZW4gc2VudCB0byBvciBhY2tub3dsZWRnZWQgYnkgdGhlXG4gICAgICAgICAqIHNlcnZlci4gT24gcmUtZXN0YWJsaXNoaW5nIHRoZSBsaXN0ZW4gc3RyZWFtLCB0aGVzZSB0YXJnZXRzIHNob3VsZCBiZSBzZW50XG4gICAgICAgICAqIHRvIHRoZSBzZXJ2ZXIuIFRoZSB0YXJnZXRzIHJlbW92ZWQgd2l0aCB1bmxpc3RlbnMgYXJlIHJlbW92ZWQgZWFnZXJseVxuICAgICAgICAgKiB3aXRob3V0IHdhaXRpbmcgZm9yIGNvbmZpcm1hdGlvbiBmcm9tIHRoZSBsaXN0ZW4gc3RyZWFtLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5EXyA9IG5ldyBNYXAsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSBzZXQgb2YgcmVhc29ucyBmb3Igd2h5IHRoZSBSZW1vdGVTdG9yZSBtYXkgYmUgb2ZmbGluZS4gSWYgZW1wdHksIHRoZVxuICAgICAgICAgKiBSZW1vdGVTdG9yZSBtYXkgc3RhcnQgaXRzIG5ldHdvcmsgY29ubmVjdGlvbnMuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLkNfID0gbmV3IFNldCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFdmVudCBoYW5kbGVycyB0aGF0IGdldCBjYWxsZWQgd2hlbiB0aGUgbmV0d29yayBpcyBkaXNhYmxlZCBvciBlbmFibGVkLlxuICAgICAgICAgKlxuICAgICAgICAgKiBQT1JUSU5HIE5PVEU6IFRoZXNlIGZ1bmN0aW9ucyBhcmUgdXNlZCBvbiB0aGUgV2ViIGNsaWVudCB0byBjcmVhdGUgdGhlXG4gICAgICAgICAqIHVuZGVybHlpbmcgc3RyZWFtcyAodG8gc3VwcG9ydCB0cmVlLXNoYWtlYWJsZSBzdHJlYW1zKS4gT24gQW5kcm9pZCBhbmQgaU9TLFxuICAgICAgICAgKiB0aGUgc3RyZWFtcyBhcmUgY3JlYXRlZCBkdXJpbmcgY29uc3RydWN0aW9uIG9mIFJlbW90ZVN0b3JlLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy52XyA9IFtdLCB0aGlzLkZfID0gaSwgdGhpcy5GXy5ybygoZSA9PiB7XG4gICAgICAgICAgICBuLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBQb3J0aW5nIE5vdGU6IFVubGlrZSBpT1MsIGByZXN0YXJ0TmV0d29yaygpYCBpcyBjYWxsZWQgZXZlbiB3aGVuIHRoZVxuICAgICAgICAgICAgICAgIC8vIG5ldHdvcmsgYmVjb21lcyB1bnJlYWNoYWJsZSBhcyB3ZSBkb24ndCBoYXZlIGFueSBvdGhlciB3YXkgdG8gdGVhclxuICAgICAgICAgICAgICAgIC8vIGRvd24gb3VyIHN0cmVhbXMuXG4gICAgICAgICAgICAgICAgX19QUklWQVRFX2NhblVzZU5ldHdvcmsodGhpcykgJiYgKF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlJlbW90ZVN0b3JlXCIsIFwiUmVzdGFydGluZyBzdHJlYW1zIGZvciBuZXR3b3JrIHJlYWNoYWJpbGl0eSBjaGFuZ2UuXCIpLCBcbiAgICAgICAgICAgICAgICBhd2FpdCBhc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfcmVzdGFydE5ldHdvcmsoZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICAgICAgICAgICAgICAgICAgdC5DXy5hZGQoNCAvKiBPZmZsaW5lQ2F1c2UuQ29ubmVjdGl2aXR5Q2hhbmdlICovKSwgYXdhaXQgX19QUklWQVRFX2Rpc2FibGVOZXR3b3JrSW50ZXJuYWwodCksIFxuICAgICAgICAgICAgICAgICAgICB0Lk1fLnNldChcIlVua25vd25cIiAvKiBPbmxpbmVTdGF0ZS5Vbmtub3duICovKSwgdC5DXy5kZWxldGUoNCAvKiBPZmZsaW5lQ2F1c2UuQ29ubmVjdGl2aXR5Q2hhbmdlICovKSwgXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IF9fUFJJVkFURV9lbmFibGVOZXR3b3JrSW50ZXJuYWwodCk7XG4gICAgICAgICAgICAgICAgfSh0aGlzKSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKSwgdGhpcy5NXyA9IG5ldyBfX1BSSVZBVEVfT25saW5lU3RhdGVUcmFja2VyKG4sIHIpO1xuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX2VuYWJsZU5ldHdvcmtJbnRlcm5hbChlKSB7XG4gICAgaWYgKF9fUFJJVkFURV9jYW5Vc2VOZXR3b3JrKGUpKSBmb3IgKGNvbnN0IHQgb2YgZS52XykgYXdhaXQgdCgvKiBlbmFibGVkPSAqLyAhMCk7XG59XG5cbi8qKlxuICogVGVtcG9yYXJpbHkgZGlzYWJsZXMgdGhlIG5ldHdvcmsuIFRoZSBuZXR3b3JrIGNhbiBiZSByZS1lbmFibGVkIHVzaW5nXG4gKiBlbmFibGVOZXR3b3JrKCkuXG4gKi8gYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX2Rpc2FibGVOZXR3b3JrSW50ZXJuYWwoZSkge1xuICAgIGZvciAoY29uc3QgdCBvZiBlLnZfKSBhd2FpdCB0KC8qIGVuYWJsZWQ9ICovICExKTtcbn1cblxuLyoqXG4gKiBTdGFydHMgbmV3IGxpc3RlbiBmb3IgdGhlIGdpdmVuIHRhcmdldC4gVXNlcyByZXN1bWUgdG9rZW4gaWYgcHJvdmlkZWQuIEl0XG4gKiBpcyBhIG5vLW9wIGlmIHRoZSB0YXJnZXQgb2YgZ2l2ZW4gYFRhcmdldERhdGFgIGlzIGFscmVhZHkgYmVpbmcgbGlzdGVuZWQgdG8uXG4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV9yZW1vdGVTdG9yZUxpc3RlbihlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgbi5EXy5oYXModC50YXJnZXRJZCkgfHwgKFxuICAgIC8vIE1hcmsgdGhpcyBhcyBzb21ldGhpbmcgdGhlIGNsaWVudCBpcyBjdXJyZW50bHkgbGlzdGVuaW5nIGZvci5cbiAgICBuLkRfLnNldCh0LnRhcmdldElkLCB0KSwgX19QUklWQVRFX3Nob3VsZFN0YXJ0V2F0Y2hTdHJlYW0obikgPyBcbiAgICAvLyBUaGUgbGlzdGVuIHdpbGwgYmUgc2VudCBpbiBvbldhdGNoU3RyZWFtT3BlblxuICAgIF9fUFJJVkFURV9zdGFydFdhdGNoU3RyZWFtKG4pIDogX19QUklWQVRFX2Vuc3VyZVdhdGNoU3RyZWFtKG4pLkhvKCkgJiYgX19QUklWQVRFX3NlbmRXYXRjaFJlcXVlc3QobiwgdCkpO1xufVxuXG4vKipcbiAqIFJlbW92ZXMgdGhlIGxpc3RlbiBmcm9tIHNlcnZlci4gSXQgaXMgYSBuby1vcCBpZiB0aGUgZ2l2ZW4gdGFyZ2V0IGlkIGlzXG4gKiBub3QgYmVpbmcgbGlzdGVuZWQgdG8uXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3JlbW90ZVN0b3JlVW5saXN0ZW4oZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpLCByID0gX19QUklWQVRFX2Vuc3VyZVdhdGNoU3RyZWFtKG4pO1xuICAgIG4uRF8uZGVsZXRlKHQpLCByLkhvKCkgJiYgX19QUklWQVRFX3NlbmRVbndhdGNoUmVxdWVzdChuLCB0KSwgMCA9PT0gbi5EXy5zaXplICYmIChyLkhvKCkgPyByLlpvKCkgOiBfX1BSSVZBVEVfY2FuVXNlTmV0d29yayhuKSAmJiBcbiAgICAvLyBSZXZlcnQgdG8gT25saW5lU3RhdGUuVW5rbm93biBpZiB0aGUgd2F0Y2ggc3RyZWFtIGlzIG5vdCBvcGVuIGFuZCB3ZVxuICAgIC8vIGhhdmUgbm8gbGlzdGVuZXJzLCBzaW5jZSB3aXRob3V0IGFueSBsaXN0ZW5zIHRvIHNlbmQgd2UgY2Fubm90XG4gICAgLy8gY29uZmlybSBpZiB0aGUgc3RyZWFtIGlzIGhlYWx0aHkgYW5kIHVwZ3JhZGUgdG8gT25saW5lU3RhdGUuT25saW5lLlxuICAgIG4uTV8uc2V0KFwiVW5rbm93blwiIC8qIE9ubGluZVN0YXRlLlVua25vd24gKi8pKTtcbn1cblxuLyoqXG4gKiBXZSBuZWVkIHRvIGluY3JlbWVudCB0aGUgdGhlIGV4cGVjdGVkIG51bWJlciBvZiBwZW5kaW5nIHJlc3BvbnNlcyB3ZSdyZSBkdWVcbiAqIGZyb20gd2F0Y2ggc28gd2Ugd2FpdCBmb3IgdGhlIGFjayB0byBwcm9jZXNzIGFueSBtZXNzYWdlcyBmcm9tIHRoaXMgdGFyZ2V0LlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9zZW5kV2F0Y2hSZXF1ZXN0KGUsIHQpIHtcbiAgICBpZiAoZS54Xy5PZSh0LnRhcmdldElkKSwgdC5yZXN1bWVUb2tlbi5hcHByb3hpbWF0ZUJ5dGVTaXplKCkgPiAwIHx8IHQuc25hcHNob3RWZXJzaW9uLmNvbXBhcmVUbyhTbmFwc2hvdFZlcnNpb24ubWluKCkpID4gMCkge1xuICAgICAgICBjb25zdCBuID0gZS5yZW1vdGVTeW5jZXIuZ2V0UmVtb3RlS2V5c0ZvclRhcmdldCh0LnRhcmdldElkKS5zaXplO1xuICAgICAgICB0ID0gdC53aXRoRXhwZWN0ZWRDb3VudChuKTtcbiAgICB9XG4gICAgX19QUklWQVRFX2Vuc3VyZVdhdGNoU3RyZWFtKGUpLnVfKHQpO1xufVxuXG4vKipcbiAqIFdlIG5lZWQgdG8gaW5jcmVtZW50IHRoZSBleHBlY3RlZCBudW1iZXIgb2YgcGVuZGluZyByZXNwb25zZXMgd2UncmUgZHVlXG4gKiBmcm9tIHdhdGNoIHNvIHdlIHdhaXQgZm9yIHRoZSByZW1vdmFsIG9uIHRoZSBzZXJ2ZXIgYmVmb3JlIHdlIHByb2Nlc3MgYW55XG4gKiBtZXNzYWdlcyBmcm9tIHRoaXMgdGFyZ2V0LlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9zZW5kVW53YXRjaFJlcXVlc3QoZSwgdCkge1xuICAgIGUueF8uT2UodCksIF9fUFJJVkFURV9lbnN1cmVXYXRjaFN0cmVhbShlKS5jXyh0KTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3N0YXJ0V2F0Y2hTdHJlYW0oZSkge1xuICAgIGUueF8gPSBuZXcgX19QUklWQVRFX1dhdGNoQ2hhbmdlQWdncmVnYXRvcih7XG4gICAgICAgIGdldFJlbW90ZUtleXNGb3JUYXJnZXQ6IHQgPT4gZS5yZW1vdGVTeW5jZXIuZ2V0UmVtb3RlS2V5c0ZvclRhcmdldCh0KSxcbiAgICAgICAgX3Q6IHQgPT4gZS5EXy5nZXQodCkgfHwgbnVsbCxcbiAgICAgICAgbnQ6ICgpID0+IGUuZGF0YXN0b3JlLnNlcmlhbGl6ZXIuZGF0YWJhc2VJZFxuICAgIH0pLCBfX1BSSVZBVEVfZW5zdXJlV2F0Y2hTdHJlYW0oZSkuc3RhcnQoKSwgZS5NXy5nXygpO1xufVxuXG4vKipcbiAqIFJldHVybnMgd2hldGhlciB0aGUgd2F0Y2ggc3RyZWFtIHNob3VsZCBiZSBzdGFydGVkIGJlY2F1c2UgaXQncyBuZWNlc3NhcnlcbiAqIGFuZCBoYXMgbm90IHlldCBiZWVuIHN0YXJ0ZWQuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3Nob3VsZFN0YXJ0V2F0Y2hTdHJlYW0oZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfY2FuVXNlTmV0d29yayhlKSAmJiAhX19QUklWQVRFX2Vuc3VyZVdhdGNoU3RyZWFtKGUpLmpvKCkgJiYgZS5EXy5zaXplID4gMDtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2NhblVzZU5ldHdvcmsoZSkge1xuICAgIHJldHVybiAwID09PSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpLkNfLnNpemU7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9jbGVhblVwV2F0Y2hTdHJlYW1TdGF0ZShlKSB7XG4gICAgZS54XyA9IHZvaWQgMDtcbn1cblxuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX29uV2F0Y2hTdHJlYW1PcGVuKGUpIHtcbiAgICBlLkRfLmZvckVhY2goKCh0LCBuKSA9PiB7XG4gICAgICAgIF9fUFJJVkFURV9zZW5kV2F0Y2hSZXF1ZXN0KGUsIHQpO1xuICAgIH0pKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX29uV2F0Y2hTdHJlYW1DbG9zZShlLCB0KSB7XG4gICAgX19QUklWQVRFX2NsZWFuVXBXYXRjaFN0cmVhbVN0YXRlKGUpLCBcbiAgICAvLyBJZiB3ZSBzdGlsbCBuZWVkIHRoZSB3YXRjaCBzdHJlYW0sIHJldHJ5IHRoZSBjb25uZWN0aW9uLlxuICAgIF9fUFJJVkFURV9zaG91bGRTdGFydFdhdGNoU3RyZWFtKGUpID8gKGUuTV8ud18odCksIF9fUFJJVkFURV9zdGFydFdhdGNoU3RyZWFtKGUpKSA6IFxuICAgIC8vIE5vIG5lZWQgdG8gcmVzdGFydCB3YXRjaCBzdHJlYW0gYmVjYXVzZSB0aGVyZSBhcmUgbm8gYWN0aXZlIHRhcmdldHMuXG4gICAgLy8gVGhlIG9ubGluZSBzdGF0ZSBpcyBzZXQgdG8gdW5rbm93biBiZWNhdXNlIHRoZXJlIGlzIG5vIGFjdGl2ZSBhdHRlbXB0XG4gICAgLy8gYXQgZXN0YWJsaXNoaW5nIGEgY29ubmVjdGlvblxuICAgIGUuTV8uc2V0KFwiVW5rbm93blwiIC8qIE9ubGluZVN0YXRlLlVua25vd24gKi8pO1xufVxuXG5hc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfb25XYXRjaFN0cmVhbUNoYW5nZShlLCB0LCBuKSB7XG4gICAgaWYgKFxuICAgIC8vIE1hcmsgdGhlIGNsaWVudCBhcyBvbmxpbmUgc2luY2Ugd2UgZ290IGEgbWVzc2FnZSBmcm9tIHRoZSBzZXJ2ZXJcbiAgICBlLk1fLnNldChcIk9ubGluZVwiIC8qIE9ubGluZVN0YXRlLk9ubGluZSAqLyksIHQgaW5zdGFuY2VvZiBfX1BSSVZBVEVfV2F0Y2hUYXJnZXRDaGFuZ2UgJiYgMiAvKiBXYXRjaFRhcmdldENoYW5nZVN0YXRlLlJlbW92ZWQgKi8gPT09IHQuc3RhdGUgJiYgdC5jYXVzZSkgXG4gICAgLy8gVGhlcmUgd2FzIGFuIGVycm9yIG9uIGEgdGFyZ2V0LCBkb24ndCB3YWl0IGZvciBhIGNvbnNpc3RlbnQgc25hcHNob3RcbiAgICAvLyB0byByYWlzZSBldmVudHNcbiAgICB0cnkge1xuICAgICAgICBhd2FpdCBcbiAgICAgICAgLyoqIEhhbmRsZXMgYW4gZXJyb3Igb24gYSB0YXJnZXQgKi9cbiAgICAgICAgYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX2hhbmRsZVRhcmdldEVycm9yKGUsIHQpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0LmNhdXNlO1xuICAgICAgICAgICAgZm9yIChjb25zdCByIG9mIHQudGFyZ2V0SWRzKSBcbiAgICAgICAgICAgIC8vIEEgd2F0Y2hlZCB0YXJnZXQgbWlnaHQgaGF2ZSBiZWVuIHJlbW92ZWQgYWxyZWFkeS5cbiAgICAgICAgICAgIGUuRF8uaGFzKHIpICYmIChhd2FpdCBlLnJlbW90ZVN5bmNlci5yZWplY3RMaXN0ZW4ociwgbiksIGUuRF8uZGVsZXRlKHIpLCBlLnhfLnJlbW92ZVRhcmdldChyKSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBBdHRlbXB0cyB0byBmaWxsIG91ciB3cml0ZSBwaXBlbGluZSB3aXRoIHdyaXRlcyBmcm9tIHRoZSBMb2NhbFN0b3JlLlxuICpcbiAqIENhbGxlZCBpbnRlcm5hbGx5IHRvIGJvb3RzdHJhcCBvciByZWZpbGwgdGhlIHdyaXRlIHBpcGVsaW5lIGFuZCBieVxuICogU3luY0VuZ2luZSB3aGVuZXZlciB0aGVyZSBhcmUgbmV3IG11dGF0aW9ucyB0byBwcm9jZXNzLlxuICpcbiAqIFN0YXJ0cyB0aGUgd3JpdGUgc3RyZWFtIGlmIG5lY2Vzc2FyeS5cbiAqLyAoZSwgdCk7XG4gICAgfSBjYXRjaCAobikge1xuICAgICAgICBfX1BSSVZBVEVfbG9nRGVidWcoXCJSZW1vdGVTdG9yZVwiLCBcIkZhaWxlZCB0byByZW1vdmUgdGFyZ2V0cyAlczogJXMgXCIsIHQudGFyZ2V0SWRzLmpvaW4oXCIsXCIpLCBuKSwgXG4gICAgICAgIGF3YWl0IF9fUFJJVkFURV9kaXNhYmxlTmV0d29ya1VudGlsUmVjb3ZlcnkoZSwgbik7XG4gICAgfSBlbHNlIGlmICh0IGluc3RhbmNlb2YgX19QUklWQVRFX0RvY3VtZW50V2F0Y2hDaGFuZ2UgPyBlLnhfLiRlKHQpIDogdCBpbnN0YW5jZW9mIF9fUFJJVkFURV9FeGlzdGVuY2VGaWx0ZXJDaGFuZ2UgPyBlLnhfLkplKHQpIDogZS54Xy5HZSh0KSwgXG4gICAgIW4uaXNFcXVhbChTbmFwc2hvdFZlcnNpb24ubWluKCkpKSB0cnkge1xuICAgICAgICBjb25zdCB0ID0gYXdhaXQgX19QUklWQVRFX2xvY2FsU3RvcmVHZXRMYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uKGUubG9jYWxTdG9yZSk7XG4gICAgICAgIG4uY29tcGFyZVRvKHQpID49IDAgJiYgXG4gICAgICAgIC8vIFdlIGhhdmUgcmVjZWl2ZWQgYSB0YXJnZXQgY2hhbmdlIHdpdGggYSBnbG9iYWwgc25hcHNob3QgaWYgdGhlIHNuYXBzaG90XG4gICAgICAgIC8vIHZlcnNpb24gaXMgbm90IGVxdWFsIHRvIFNuYXBzaG90VmVyc2lvbi5taW4oKS5cbiAgICAgICAgYXdhaXQgXG4gICAgICAgIC8qKlxuICogVGFrZXMgYSBiYXRjaCBvZiBjaGFuZ2VzIGZyb20gdGhlIERhdGFzdG9yZSwgcmVwYWNrYWdlcyB0aGVtIGFzIGFcbiAqIFJlbW90ZUV2ZW50LCBhbmQgcGFzc2VzIHRoYXQgb24gdG8gdGhlIGxpc3RlbmVyLCB3aGljaCBpcyB0eXBpY2FsbHkgdGhlXG4gKiBTeW5jRW5naW5lLlxuICovXG4gICAgICAgIGZ1bmN0aW9uIF9fUFJJVkFURV9yYWlzZVdhdGNoU25hcHNob3QoZSwgdCkge1xuICAgICAgICAgICAgY29uc3QgbiA9IGUueF8uaXQodCk7XG4gICAgICAgICAgICAvLyBVcGRhdGUgaW4tbWVtb3J5IHJlc3VtZSB0b2tlbnMuIExvY2FsU3RvcmUgd2lsbCB1cGRhdGUgdGhlXG4gICAgICAgICAgICAvLyBwZXJzaXN0ZW50IHZpZXcgb2YgdGhlc2Ugd2hlbiBhcHBseWluZyB0aGUgY29tcGxldGVkIFJlbW90ZUV2ZW50LlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4udGFyZ2V0Q2hhbmdlcy5mb3JFYWNoKCgobiwgcikgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChuLnJlc3VtZVRva2VuLmFwcHJveGltYXRlQnl0ZVNpemUoKSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaSA9IGUuRF8uZ2V0KHIpO1xuICAgICAgICAgICAgICAgICAgICAvLyBBIHdhdGNoZWQgdGFyZ2V0IG1pZ2h0IGhhdmUgYmVlbiByZW1vdmVkIGFscmVhZHkuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSAmJiBlLkRfLnNldChyLCBpLndpdGhSZXN1bWVUb2tlbihuLnJlc3VtZVRva2VuLCB0KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkpLCBcbiAgICAgICAgICAgIC8vIFJlLWVzdGFibGlzaCBsaXN0ZW5zIGZvciB0aGUgdGFyZ2V0cyB0aGF0IGhhdmUgYmVlbiBpbnZhbGlkYXRlZCBieVxuICAgICAgICAgICAgLy8gZXhpc3RlbmNlIGZpbHRlciBtaXNtYXRjaGVzLlxuICAgICAgICAgICAgbi50YXJnZXRNaXNtYXRjaGVzLmZvckVhY2goKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgciA9IGUuRF8uZ2V0KHQpO1xuICAgICAgICAgICAgICAgIGlmICghcikgXG4gICAgICAgICAgICAgICAgLy8gQSB3YXRjaGVkIHRhcmdldCBtaWdodCBoYXZlIGJlZW4gcmVtb3ZlZCBhbHJlYWR5LlxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAvLyBDbGVhciB0aGUgcmVzdW1lIHRva2VuIGZvciB0aGUgdGFyZ2V0LCBzaW5jZSB3ZSdyZSBpbiBhIGtub3duIG1pc21hdGNoXG4gICAgICAgICAgICAgICAgLy8gc3RhdGUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuRF8uc2V0KHQsIHIud2l0aFJlc3VtZVRva2VuKEJ5dGVTdHJpbmcuRU1QVFlfQllURV9TVFJJTkcsIHIuc25hcHNob3RWZXJzaW9uKSksIFxuICAgICAgICAgICAgICAgIC8vIENhdXNlIGEgaGFyZCByZXNldCBieSB1bndhdGNoaW5nIGFuZCByZXdhdGNoaW5nIGltbWVkaWF0ZWx5LCBidXRcbiAgICAgICAgICAgICAgICAvLyBkZWxpYmVyYXRlbHkgZG9uJ3Qgc2VuZCBhIHJlc3VtZSB0b2tlbiBzbyB0aGF0IHdlIGdldCBhIGZ1bGwgdXBkYXRlLlxuICAgICAgICAgICAgICAgIF9fUFJJVkFURV9zZW5kVW53YXRjaFJlcXVlc3QoZSwgdCk7XG4gICAgICAgICAgICAgICAgLy8gTWFyayB0aGUgdGFyZ2V0IHdlIHNlbmQgYXMgYmVpbmcgb24gYmVoYWxmIG9mIGFuIGV4aXN0ZW5jZSBmaWx0ZXJcbiAgICAgICAgICAgICAgICAvLyBtaXNtYXRjaCwgYnV0IGRvbid0IGFjdHVhbGx5IHJldGFpbiB0aGF0IGluIGxpc3RlblRhcmdldHMuIFRoaXMgZW5zdXJlc1xuICAgICAgICAgICAgICAgIC8vIHRoYXQgd2UgZmxhZyB0aGUgZmlyc3QgcmUtbGlzdGVuIHRoaXMgd2F5IHdpdGhvdXQgaW1wYWN0aW5nIGZ1dHVyZVxuICAgICAgICAgICAgICAgIC8vIGxpc3RlbnMgb2YgdGhpcyB0YXJnZXQgKHRoYXQgbWlnaHQgaGFwcGVuIGUuZy4gb24gcmVjb25uZWN0KS5cbiAgICAgICAgICAgICAgICBjb25zdCBpID0gbmV3IFRhcmdldERhdGEoci50YXJnZXQsIHQsIG4sIHIuc2VxdWVuY2VOdW1iZXIpO1xuICAgICAgICAgICAgICAgIF9fUFJJVkFURV9zZW5kV2F0Y2hSZXF1ZXN0KGUsIGkpO1xuICAgICAgICAgICAgfSkpLCBlLnJlbW90ZVN5bmNlci5hcHBseVJlbW90ZUV2ZW50KG4pO1xuICAgICAgICB9KGUsIG4pO1xuICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiUmVtb3RlU3RvcmVcIiwgXCJGYWlsZWQgdG8gcmFpc2Ugc25hcHNob3Q6XCIsIHQpLCBhd2FpdCBfX1BSSVZBVEVfZGlzYWJsZU5ldHdvcmtVbnRpbFJlY292ZXJ5KGUsIHQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZWNvdmVyeSBsb2dpYyBmb3IgSW5kZXhlZERCIGVycm9ycyB0aGF0IHRha2VzIHRoZSBuZXR3b3JrIG9mZmxpbmUgdW50aWxcbiAqIGBvcGAgc3VjY2VlZHMuIFJldHJpZXMgYXJlIHNjaGVkdWxlZCB3aXRoIGJhY2tvZmYgdXNpbmdcbiAqIGBlbnF1ZXVlUmV0cnlhYmxlKClgLiBJZiBgb3AoKWAgaXMgbm90IHByb3ZpZGVkLCBJbmRleGVkREIgYWNjZXNzIGlzXG4gKiB2YWxpZGF0ZWQgdmlhIGEgZ2VuZXJpYyBvcGVyYXRpb24uXG4gKlxuICogVGhlIHJldHVybmVkIFByb21pc2UgaXMgcmVzb2x2ZWQgb25jZSB0aGUgbmV0d29yayBpcyBkaXNhYmxlZCBhbmQgYmVmb3JlXG4gKiBhbnkgcmV0cnkgYXR0ZW1wdC5cbiAqLyBhc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfZGlzYWJsZU5ldHdvcmtVbnRpbFJlY292ZXJ5KGUsIHQsIG4pIHtcbiAgICBpZiAoIV9fUFJJVkFURV9pc0luZGV4ZWREYlRyYW5zYWN0aW9uRXJyb3IodCkpIHRocm93IHQ7XG4gICAgZS5DXy5hZGQoMSAvKiBPZmZsaW5lQ2F1c2UuSW5kZXhlZERiRmFpbGVkICovKSwgXG4gICAgLy8gRGlzYWJsZSBuZXR3b3JrIGFuZCByYWlzZSBvZmZsaW5lIHNuYXBzaG90c1xuICAgIGF3YWl0IF9fUFJJVkFURV9kaXNhYmxlTmV0d29ya0ludGVybmFsKGUpLCBlLk1fLnNldChcIk9mZmxpbmVcIiAvKiBPbmxpbmVTdGF0ZS5PZmZsaW5lICovKSwgXG4gICAgbiB8fCAoXG4gICAgLy8gVXNlIGEgc2ltcGxlIHJlYWQgb3BlcmF0aW9uIHRvIGRldGVybWluZSBpZiBJbmRleGVkREIgcmVjb3ZlcmVkLlxuICAgIC8vIElkZWFsbHksIHdlIHdvdWxkIGV4cG9zZSBhIGhlYWx0aCBjaGVjayBkaXJlY3RseSBvbiBTaW1wbGVEYiwgYnV0XG4gICAgLy8gUmVtb3RlU3RvcmUgb25seSBoYXMgYWNjZXNzIHRvIHBlcnNpc3RlbmNlIHRocm91Z2ggTG9jYWxTdG9yZS5cbiAgICBuID0gKCkgPT4gX19QUklWQVRFX2xvY2FsU3RvcmVHZXRMYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uKGUubG9jYWxTdG9yZSkpLCBcbiAgICAvLyBQcm9iZSBJbmRleGVkREIgcGVyaW9kaWNhbGx5IGFuZCByZS1lbmFibGUgbmV0d29ya1xuICAgIGUuYXN5bmNRdWV1ZS5lbnF1ZXVlUmV0cnlhYmxlKChhc3luYyAoKSA9PiB7XG4gICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlJlbW90ZVN0b3JlXCIsIFwiUmV0cnlpbmcgSW5kZXhlZERCIGFjY2Vzc1wiKSwgYXdhaXQgbigpLCBlLkNfLmRlbGV0ZSgxIC8qIE9mZmxpbmVDYXVzZS5JbmRleGVkRGJGYWlsZWQgKi8pLCBcbiAgICAgICAgYXdhaXQgX19QUklWQVRFX2VuYWJsZU5ldHdvcmtJbnRlcm5hbChlKTtcbiAgICB9KSk7XG59XG5cbi8qKlxuICogRXhlY3V0ZXMgYG9wYC4gSWYgYG9wYCBmYWlscywgdGFrZXMgdGhlIG5ldHdvcmsgb2ZmbGluZSB1bnRpbCBgb3BgXG4gKiBzdWNjZWVkcy4gUmV0dXJucyBhZnRlciB0aGUgZmlyc3QgYXR0ZW1wdC5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfZXhlY3V0ZVdpdGhSZWNvdmVyeShlLCB0KSB7XG4gICAgcmV0dXJuIHQoKS5jYXRjaCgobiA9PiBfX1BSSVZBVEVfZGlzYWJsZU5ldHdvcmtVbnRpbFJlY292ZXJ5KGUsIG4sIHQpKSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9maWxsV3JpdGVQaXBlbGluZShlKSB7XG4gICAgY29uc3QgdCA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSksIG4gPSBfX1BSSVZBVEVfZW5zdXJlV3JpdGVTdHJlYW0odCk7XG4gICAgbGV0IHIgPSB0LmJfLmxlbmd0aCA+IDAgPyB0LmJfW3QuYl8ubGVuZ3RoIC0gMV0uYmF0Y2hJZCA6IC0xO1xuICAgIGZvciAoO19fUFJJVkFURV9jYW5BZGRUb1dyaXRlUGlwZWxpbmUodCk7ICkgdHJ5IHtcbiAgICAgICAgY29uc3QgZSA9IGF3YWl0IF9fUFJJVkFURV9sb2NhbFN0b3JlR2V0TmV4dE11dGF0aW9uQmF0Y2godC5sb2NhbFN0b3JlLCByKTtcbiAgICAgICAgaWYgKG51bGwgPT09IGUpIHtcbiAgICAgICAgICAgIDAgPT09IHQuYl8ubGVuZ3RoICYmIG4uWm8oKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHIgPSBlLmJhdGNoSWQsIF9fUFJJVkFURV9hZGRUb1dyaXRlUGlwZWxpbmUodCwgZSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBhd2FpdCBfX1BSSVZBVEVfZGlzYWJsZU5ldHdvcmtVbnRpbFJlY292ZXJ5KHQsIGUpO1xuICAgIH1cbiAgICBfX1BSSVZBVEVfc2hvdWxkU3RhcnRXcml0ZVN0cmVhbSh0KSAmJiBfX1BSSVZBVEVfc3RhcnRXcml0ZVN0cmVhbSh0KTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgd2UgY2FuIGFkZCB0byB0aGUgd3JpdGUgcGlwZWxpbmUgKGkuZS4gdGhlIG5ldHdvcmsgaXNcbiAqIGVuYWJsZWQgYW5kIHRoZSB3cml0ZSBwaXBlbGluZSBpcyBub3QgZnVsbCkuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2NhbkFkZFRvV3JpdGVQaXBlbGluZShlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9jYW5Vc2VOZXR3b3JrKGUpICYmIGUuYl8ubGVuZ3RoIDwgMTA7XG59XG5cbi8qKlxuICogUXVldWVzIGFkZGl0aW9uYWwgd3JpdGVzIHRvIGJlIHNlbnQgdG8gdGhlIHdyaXRlIHN0cmVhbSwgc2VuZGluZyB0aGVtXG4gKiBpbW1lZGlhdGVseSBpZiB0aGUgd3JpdGUgc3RyZWFtIGlzIGVzdGFibGlzaGVkLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9hZGRUb1dyaXRlUGlwZWxpbmUoZSwgdCkge1xuICAgIGUuYl8ucHVzaCh0KTtcbiAgICBjb25zdCBuID0gX19QUklWQVRFX2Vuc3VyZVdyaXRlU3RyZWFtKGUpO1xuICAgIG4uSG8oKSAmJiBuLmhfICYmIG4uUF8odC5tdXRhdGlvbnMpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfc2hvdWxkU3RhcnRXcml0ZVN0cmVhbShlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9jYW5Vc2VOZXR3b3JrKGUpICYmICFfX1BSSVZBVEVfZW5zdXJlV3JpdGVTdHJlYW0oZSkuam8oKSAmJiBlLmJfLmxlbmd0aCA+IDA7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9zdGFydFdyaXRlU3RyZWFtKGUpIHtcbiAgICBfX1BSSVZBVEVfZW5zdXJlV3JpdGVTdHJlYW0oZSkuc3RhcnQoKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX29uV3JpdGVTdHJlYW1PcGVuKGUpIHtcbiAgICBfX1BSSVZBVEVfZW5zdXJlV3JpdGVTdHJlYW0oZSkuRV8oKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX29uV3JpdGVIYW5kc2hha2VDb21wbGV0ZShlKSB7XG4gICAgY29uc3QgdCA9IF9fUFJJVkFURV9lbnN1cmVXcml0ZVN0cmVhbShlKTtcbiAgICAvLyBTZW5kIHRoZSB3cml0ZSBwaXBlbGluZSBub3cgdGhhdCB0aGUgc3RyZWFtIGlzIGVzdGFibGlzaGVkLlxuICAgICAgICBmb3IgKGNvbnN0IG4gb2YgZS5iXykgdC5QXyhuLm11dGF0aW9ucyk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9vbk11dGF0aW9uUmVzdWx0KGUsIHQsIG4pIHtcbiAgICBjb25zdCByID0gZS5iXy5zaGlmdCgpLCBpID0gTXV0YXRpb25CYXRjaFJlc3VsdC5mcm9tKHIsIHQsIG4pO1xuICAgIGF3YWl0IF9fUFJJVkFURV9leGVjdXRlV2l0aFJlY292ZXJ5KGUsICgoKSA9PiBlLnJlbW90ZVN5bmNlci5hcHBseVN1Y2Nlc3NmdWxXcml0ZShpKSkpLCBcbiAgICAvLyBJdCdzIHBvc3NpYmxlIHRoYXQgd2l0aCB0aGUgY29tcGxldGlvbiBvZiB0aGlzIG11dGF0aW9uIGFub3RoZXJcbiAgICAvLyBzbG90IGhhcyBmcmVlZCB1cC5cbiAgICBhd2FpdCBfX1BSSVZBVEVfZmlsbFdyaXRlUGlwZWxpbmUoZSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9vbldyaXRlU3RyZWFtQ2xvc2UoZSwgdCkge1xuICAgIC8vIElmIHRoZSB3cml0ZSBzdHJlYW0gY2xvc2VkIGFmdGVyIHRoZSB3cml0ZSBoYW5kc2hha2UgY29tcGxldGVzLCBhIHdyaXRlXG4gICAgLy8gb3BlcmF0aW9uIGZhaWxlZCBhbmQgd2UgZmFpbCB0aGUgcGVuZGluZyBvcGVyYXRpb24uXG4gICAgdCAmJiBfX1BSSVZBVEVfZW5zdXJlV3JpdGVTdHJlYW0oZSkuaF8gJiYgXG4gICAgLy8gVGhpcyBlcnJvciBhZmZlY3RzIHRoZSBhY3R1YWwgd3JpdGUuXG4gICAgYXdhaXQgYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX2hhbmRsZVdyaXRlRXJyb3IoZSwgdCkge1xuICAgICAgICAvLyBPbmx5IGhhbmRsZSBwZXJtYW5lbnQgZXJyb3JzIGhlcmUuIElmIGl0J3MgdHJhbnNpZW50LCBqdXN0IGxldCB0aGUgcmV0cnlcbiAgICAgICAgLy8gbG9naWMga2ljayBpbi5cbiAgICAgICAgaWYgKGZ1bmN0aW9uIF9fUFJJVkFURV9pc1Blcm1hbmVudFdyaXRlRXJyb3IoZSkge1xuICAgICAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9pc1Blcm1hbmVudEVycm9yKGUpICYmIGUgIT09IEQuQUJPUlRFRDtcbiAgICAgICAgfSh0LmNvZGUpKSB7XG4gICAgICAgICAgICAvLyBUaGlzIHdhcyBhIHBlcm1hbmVudCBlcnJvciwgdGhlIHJlcXVlc3QgaXRzZWxmIHdhcyB0aGUgcHJvYmxlbVxuICAgICAgICAgICAgLy8gc28gaXQncyBub3QgZ29pbmcgdG8gc3VjY2VlZCBpZiB3ZSByZXNlbmQgaXQuXG4gICAgICAgICAgICBjb25zdCBuID0gZS5iXy5zaGlmdCgpO1xuICAgICAgICAgICAgLy8gSW4gdGhpcyBjYXNlIGl0J3MgYWxzbyB1bmxpa2VseSB0aGF0IHRoZSBzZXJ2ZXIgaXRzZWxmIGlzIG1lbHRpbmdcbiAgICAgICAgICAgIC8vIGRvd24gLS0gdGhpcyB3YXMganVzdCBhIGJhZCByZXF1ZXN0IHNvIGluaGliaXQgYmFja29mZiBvbiB0aGUgbmV4dFxuICAgICAgICAgICAgLy8gcmVzdGFydC5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9fUFJJVkFURV9lbnN1cmVXcml0ZVN0cmVhbShlKS5ZbygpLCBhd2FpdCBfX1BSSVZBVEVfZXhlY3V0ZVdpdGhSZWNvdmVyeShlLCAoKCkgPT4gZS5yZW1vdGVTeW5jZXIucmVqZWN0RmFpbGVkV3JpdGUobi5iYXRjaElkLCB0KSkpLCBcbiAgICAgICAgICAgIC8vIEl0J3MgcG9zc2libGUgdGhhdCB3aXRoIHRoZSBjb21wbGV0aW9uIG9mIHRoaXMgbXV0YXRpb25cbiAgICAgICAgICAgIC8vIGFub3RoZXIgc2xvdCBoYXMgZnJlZWQgdXAuXG4gICAgICAgICAgICBhd2FpdCBfX1BSSVZBVEVfZmlsbFdyaXRlUGlwZWxpbmUoZSk7XG4gICAgICAgIH1cbiAgICB9KGUsIHQpLCBcbiAgICAvLyBUaGUgd3JpdGUgc3RyZWFtIG1pZ2h0IGhhdmUgYmVlbiBzdGFydGVkIGJ5IHJlZmlsbGluZyB0aGUgd3JpdGVcbiAgICAvLyBwaXBlbGluZSBmb3IgZmFpbGVkIHdyaXRlc1xuICAgIF9fUFJJVkFURV9zaG91bGRTdGFydFdyaXRlU3RyZWFtKGUpICYmIF9fUFJJVkFURV9zdGFydFdyaXRlU3RyZWFtKGUpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfcmVtb3RlU3RvcmVIYW5kbGVDcmVkZW50aWFsQ2hhbmdlKGUsIHQpIHtcbiAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICBuLmFzeW5jUXVldWUudmVyaWZ5T3BlcmF0aW9uSW5Qcm9ncmVzcygpLCBfX1BSSVZBVEVfbG9nRGVidWcoXCJSZW1vdGVTdG9yZVwiLCBcIlJlbW90ZVN0b3JlIHJlY2VpdmVkIG5ldyBjcmVkZW50aWFsc1wiKTtcbiAgICBjb25zdCByID0gX19QUklWQVRFX2NhblVzZU5ldHdvcmsobik7XG4gICAgLy8gVGVhciBkb3duIGFuZCByZS1jcmVhdGUgb3VyIG5ldHdvcmsgc3RyZWFtcy4gVGhpcyB3aWxsIGVuc3VyZSB3ZSBnZXQgYVxuICAgIC8vIGZyZXNoIGF1dGggdG9rZW4gZm9yIHRoZSBuZXcgdXNlciBhbmQgcmUtZmlsbCB0aGUgd3JpdGUgcGlwZWxpbmUgd2l0aFxuICAgIC8vIG5ldyBtdXRhdGlvbnMgZnJvbSB0aGUgTG9jYWxTdG9yZSAoc2luY2UgbXV0YXRpb25zIGFyZSBwZXItdXNlcikuXG4gICAgICAgIG4uQ18uYWRkKDMgLyogT2ZmbGluZUNhdXNlLkNyZWRlbnRpYWxDaGFuZ2UgKi8pLCBhd2FpdCBfX1BSSVZBVEVfZGlzYWJsZU5ldHdvcmtJbnRlcm5hbChuKSwgXG4gICAgciAmJiBcbiAgICAvLyBEb24ndCBzZXQgdGhlIG5ldHdvcmsgc3RhdHVzIHRvIFVua25vd24gaWYgd2UgYXJlIG9mZmxpbmUuXG4gICAgbi5NXy5zZXQoXCJVbmtub3duXCIgLyogT25saW5lU3RhdGUuVW5rbm93biAqLyksIGF3YWl0IG4ucmVtb3RlU3luY2VyLmhhbmRsZUNyZWRlbnRpYWxDaGFuZ2UodCksIFxuICAgIG4uQ18uZGVsZXRlKDMgLyogT2ZmbGluZUNhdXNlLkNyZWRlbnRpYWxDaGFuZ2UgKi8pLCBhd2FpdCBfX1BSSVZBVEVfZW5hYmxlTmV0d29ya0ludGVybmFsKG4pO1xufVxuXG4vKipcbiAqIFRvZ2dsZXMgdGhlIG5ldHdvcmsgc3RhdGUgd2hlbiB0aGUgY2xpZW50IGdhaW5zIG9yIGxvc2VzIGl0cyBwcmltYXJ5IGxlYXNlLlxuICovIGFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9yZW1vdGVTdG9yZUFwcGx5UHJpbWFyeVN0YXRlKGUsIHQpIHtcbiAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICB0ID8gKG4uQ18uZGVsZXRlKDIgLyogT2ZmbGluZUNhdXNlLklzU2Vjb25kYXJ5ICovKSwgYXdhaXQgX19QUklWQVRFX2VuYWJsZU5ldHdvcmtJbnRlcm5hbChuKSkgOiB0IHx8IChuLkNfLmFkZCgyIC8qIE9mZmxpbmVDYXVzZS5Jc1NlY29uZGFyeSAqLyksIFxuICAgIGF3YWl0IF9fUFJJVkFURV9kaXNhYmxlTmV0d29ya0ludGVybmFsKG4pLCBuLk1fLnNldChcIlVua25vd25cIiAvKiBPbmxpbmVTdGF0ZS5Vbmtub3duICovKSk7XG59XG5cbi8qKlxuICogSWYgbm90IHlldCBpbml0aWFsaXplZCwgcmVnaXN0ZXJzIHRoZSBXYXRjaFN0cmVhbSBhbmQgaXRzIG5ldHdvcmsgc3RhdGVcbiAqIGNhbGxiYWNrIHdpdGggYHJlbW90ZVN0b3JlSW1wbGAuIFJldHVybnMgdGhlIGV4aXN0aW5nIHN0cmVhbSBpZiBvbmUgaXNcbiAqIGFscmVhZHkgYXZhaWxhYmxlLlxuICpcbiAqIFBPUlRJTkcgTk9URTogT24gaU9TIGFuZCBBbmRyb2lkLCB0aGUgV2F0Y2hTdHJlYW0gZ2V0cyByZWdpc3RlcmVkIG9uIHN0YXJ0dXAuXG4gKiBUaGlzIGlzIG5vdCBkb25lIG9uIFdlYiB0byBhbGxvdyBpdCB0byBiZSB0cmVlLXNoYWtlbi5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfZW5zdXJlV2F0Y2hTdHJlYW0oZSkge1xuICAgIHJldHVybiBlLk9fIHx8IChcbiAgICAvLyBDcmVhdGUgc3RyZWFtIChidXQgbm90ZSB0aGF0IGl0IGlzIG5vdCBzdGFydGVkIHlldCkuXG4gICAgZS5PXyA9IGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdQZXJzaXN0ZW50V2F0Y2hTdHJlYW0oZSwgdCwgbikge1xuICAgICAgICBjb25zdCByID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICAgICAgcmV0dXJuIHIuQV8oKSwgbmV3IF9fUFJJVkFURV9QZXJzaXN0ZW50TGlzdGVuU3RyZWFtKHQsIHIuY29ubmVjdGlvbiwgci5hdXRoQ3JlZGVudGlhbHMsIHIuYXBwQ2hlY2tDcmVkZW50aWFscywgci5zZXJpYWxpemVyLCBuKTtcbiAgICB9XG4gICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gKGUuZGF0YXN0b3JlLCBlLmFzeW5jUXVldWUsIHtcbiAgICAgICAgaG86IF9fUFJJVkFURV9vbldhdGNoU3RyZWFtT3Blbi5iaW5kKG51bGwsIGUpLFxuICAgICAgICBJbzogX19QUklWQVRFX29uV2F0Y2hTdHJlYW1DbG9zZS5iaW5kKG51bGwsIGUpLFxuICAgICAgICBhXzogX19QUklWQVRFX29uV2F0Y2hTdHJlYW1DaGFuZ2UuYmluZChudWxsLCBlKVxuICAgIH0pLCBlLnZfLnB1c2goKGFzeW5jIHQgPT4ge1xuICAgICAgICB0ID8gKGUuT18uWW8oKSwgX19QUklWQVRFX3Nob3VsZFN0YXJ0V2F0Y2hTdHJlYW0oZSkgPyBfX1BSSVZBVEVfc3RhcnRXYXRjaFN0cmVhbShlKSA6IGUuTV8uc2V0KFwiVW5rbm93blwiIC8qIE9ubGluZVN0YXRlLlVua25vd24gKi8pKSA6IChhd2FpdCBlLk9fLnN0b3AoKSwgXG4gICAgICAgIF9fUFJJVkFURV9jbGVhblVwV2F0Y2hTdHJlYW1TdGF0ZShlKSk7XG4gICAgfSkpKSwgZS5PXztcbn1cblxuLyoqXG4gKiBJZiBub3QgeWV0IGluaXRpYWxpemVkLCByZWdpc3RlcnMgdGhlIFdyaXRlU3RyZWFtIGFuZCBpdHMgbmV0d29yayBzdGF0ZVxuICogY2FsbGJhY2sgd2l0aCBgcmVtb3RlU3RvcmVJbXBsYC4gUmV0dXJucyB0aGUgZXhpc3Rpbmcgc3RyZWFtIGlmIG9uZSBpc1xuICogYWxyZWFkeSBhdmFpbGFibGUuXG4gKlxuICogUE9SVElORyBOT1RFOiBPbiBpT1MgYW5kIEFuZHJvaWQsIHRoZSBXcml0ZVN0cmVhbSBnZXRzIHJlZ2lzdGVyZWQgb24gc3RhcnR1cC5cbiAqIFRoaXMgaXMgbm90IGRvbmUgb24gV2ViIHRvIGFsbG93IGl0IHRvIGJlIHRyZWUtc2hha2VuLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9lbnN1cmVXcml0ZVN0cmVhbShlKSB7XG4gICAgcmV0dXJuIGUuTl8gfHwgKFxuICAgIC8vIENyZWF0ZSBzdHJlYW0gKGJ1dCBub3RlIHRoYXQgaXQgaXMgbm90IHN0YXJ0ZWQgeWV0KS5cbiAgICBlLk5fID0gZnVuY3Rpb24gX19QUklWQVRFX25ld1BlcnNpc3RlbnRXcml0ZVN0cmVhbShlLCB0LCBuKSB7XG4gICAgICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgICAgICByZXR1cm4gci5BXygpLCBuZXcgX19QUklWQVRFX1BlcnNpc3RlbnRXcml0ZVN0cmVhbSh0LCByLmNvbm5lY3Rpb24sIHIuYXV0aENyZWRlbnRpYWxzLCByLmFwcENoZWNrQ3JlZGVudGlhbHMsIHIuc2VyaWFsaXplciwgbik7XG4gICAgfShlLmRhdGFzdG9yZSwgZS5hc3luY1F1ZXVlLCB7XG4gICAgICAgIGhvOiBfX1BSSVZBVEVfb25Xcml0ZVN0cmVhbU9wZW4uYmluZChudWxsLCBlKSxcbiAgICAgICAgSW86IF9fUFJJVkFURV9vbldyaXRlU3RyZWFtQ2xvc2UuYmluZChudWxsLCBlKSxcbiAgICAgICAgVF86IF9fUFJJVkFURV9vbldyaXRlSGFuZHNoYWtlQ29tcGxldGUuYmluZChudWxsLCBlKSxcbiAgICAgICAgSV86IF9fUFJJVkFURV9vbk11dGF0aW9uUmVzdWx0LmJpbmQobnVsbCwgZSlcbiAgICB9KSwgZS52Xy5wdXNoKChhc3luYyB0ID0+IHtcbiAgICAgICAgdCA/IChlLk5fLllvKCksIFxuICAgICAgICAvLyBUaGlzIHdpbGwgc3RhcnQgdGhlIHdyaXRlIHN0cmVhbSBpZiBuZWNlc3NhcnkuXG4gICAgICAgIGF3YWl0IF9fUFJJVkFURV9maWxsV3JpdGVQaXBlbGluZShlKSkgOiAoYXdhaXQgZS5OXy5zdG9wKCksIGUuYl8ubGVuZ3RoID4gMCAmJiAoX19QUklWQVRFX2xvZ0RlYnVnKFwiUmVtb3RlU3RvcmVcIiwgYFN0b3BwaW5nIHdyaXRlIHN0cmVhbSB3aXRoICR7ZS5iXy5sZW5ndGh9IHBlbmRpbmcgd3JpdGVzYCksIFxuICAgICAgICBlLmJfID0gW10pKTtcbiAgICB9KSkpLCBlLk5fO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBSZXByZXNlbnRzIGFuIG9wZXJhdGlvbiBzY2hlZHVsZWQgdG8gYmUgcnVuIGluIHRoZSBmdXR1cmUgb24gYW4gQXN5bmNRdWV1ZS5cbiAqXG4gKiBJdCBpcyBjcmVhdGVkIHZpYSBEZWxheWVkT3BlcmF0aW9uLmNyZWF0ZUFuZFNjaGVkdWxlKCkuXG4gKlxuICogU3VwcG9ydHMgY2FuY2VsbGF0aW9uICh2aWEgY2FuY2VsKCkpIGFuZCBlYXJseSBleGVjdXRpb24gKHZpYSBza2lwRGVsYXkoKSkuXG4gKlxuICogTm90ZTogV2UgaW1wbGVtZW50IGBQcm9taXNlTGlrZWAgaW5zdGVhZCBvZiBgUHJvbWlzZWAsIGFzIHRoZSBgUHJvbWlzZWAgdHlwZVxuICogaW4gbmV3ZXIgdmVyc2lvbnMgb2YgVHlwZVNjcmlwdCBkZWZpbmVzIGBmaW5hbGx5YCwgd2hpY2ggaXMgbm90IGF2YWlsYWJsZSBpblxuICogSUUuXG4gKi9cbmNsYXNzIERlbGF5ZWRPcGVyYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4sIHIsIGkpIHtcbiAgICAgICAgdGhpcy5hc3luY1F1ZXVlID0gZSwgdGhpcy50aW1lcklkID0gdCwgdGhpcy50YXJnZXRUaW1lTXMgPSBuLCB0aGlzLm9wID0gciwgdGhpcy5yZW1vdmFsQ2FsbGJhY2sgPSBpLCBcbiAgICAgICAgdGhpcy5kZWZlcnJlZCA9IG5ldyBfX1BSSVZBVEVfRGVmZXJyZWQsIHRoaXMudGhlbiA9IHRoaXMuZGVmZXJyZWQucHJvbWlzZS50aGVuLmJpbmQodGhpcy5kZWZlcnJlZC5wcm9taXNlKSwgXG4gICAgICAgIC8vIEl0J3Mgbm9ybWFsIGZvciB0aGUgZGVmZXJyZWQgcHJvbWlzZSB0byBiZSBjYW5jZWxlZCAoZHVlIHRvIGNhbmNlbGxhdGlvbilcbiAgICAgICAgLy8gYW5kIHNvIHdlIGF0dGFjaCBhIGR1bW15IGNhdGNoIGNhbGxiYWNrIHRvIGF2b2lkXG4gICAgICAgIC8vICdVbmhhbmRsZWRQcm9taXNlUmVqZWN0aW9uV2FybmluZycgbG9nIHNwYW0uXG4gICAgICAgIHRoaXMuZGVmZXJyZWQucHJvbWlzZS5jYXRjaCgoZSA9PiB7fSkpO1xuICAgIH1cbiAgICBnZXQgcHJvbWlzZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVmZXJyZWQucHJvbWlzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgcmV0dXJucyBhIERlbGF5ZWRPcGVyYXRpb24gdGhhdCBoYXMgYmVlbiBzY2hlZHVsZWQgdG8gYmVcbiAgICAgKiBleGVjdXRlZCBvbiB0aGUgcHJvdmlkZWQgYXN5bmNRdWV1ZSBhZnRlciB0aGUgcHJvdmlkZWQgZGVsYXlNcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhc3luY1F1ZXVlIC0gVGhlIHF1ZXVlIHRvIHNjaGVkdWxlIHRoZSBvcGVyYXRpb24gb24uXG4gICAgICogQHBhcmFtIGlkIC0gQSBUaW1lciBJRCBpZGVudGlmeWluZyB0aGUgdHlwZSBvZiBvcGVyYXRpb24gdGhpcyBpcy5cbiAgICAgKiBAcGFyYW0gZGVsYXlNcyAtIFRoZSBkZWxheSAobXMpIGJlZm9yZSB0aGUgb3BlcmF0aW9uIHNob3VsZCBiZSBzY2hlZHVsZWQuXG4gICAgICogQHBhcmFtIG9wIC0gVGhlIG9wZXJhdGlvbiB0byBydW4uXG4gICAgICogQHBhcmFtIHJlbW92YWxDYWxsYmFjayAtIEEgY2FsbGJhY2sgdG8gYmUgY2FsbGVkIHN5bmNocm9ub3VzbHkgb25jZSB0aGVcbiAgICAgKiAgIG9wZXJhdGlvbiBpcyBleGVjdXRlZCBvciBjYW5jZWxlZCwgbm90aWZ5aW5nIHRoZSBBc3luY1F1ZXVlIHRvIHJlbW92ZSBpdFxuICAgICAqICAgZnJvbSBpdHMgZGVsYXllZE9wZXJhdGlvbnMgbGlzdC5cbiAgICAgKiAgIFBPUlRJTkcgTk9URTogVGhpcyBleGlzdHMgdG8gcHJldmVudCBtYWtpbmcgcmVtb3ZlRGVsYXllZE9wZXJhdGlvbigpIGFuZFxuICAgICAqICAgdGhlIERlbGF5ZWRPcGVyYXRpb24gY2xhc3MgcHVibGljLlxuICAgICAqLyAgICBzdGF0aWMgY3JlYXRlQW5kU2NoZWR1bGUoZSwgdCwgbiwgciwgaSkge1xuICAgICAgICBjb25zdCBzID0gRGF0ZS5ub3coKSArIG4sIG8gPSBuZXcgRGVsYXllZE9wZXJhdGlvbihlLCB0LCBzLCByLCBpKTtcbiAgICAgICAgcmV0dXJuIG8uc3RhcnQobiksIG87XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0YXJ0cyB0aGUgdGltZXIuIFRoaXMgaXMgY2FsbGVkIGltbWVkaWF0ZWx5IGFmdGVyIGNvbnN0cnVjdGlvbiBieVxuICAgICAqIGNyZWF0ZUFuZFNjaGVkdWxlKCkuXG4gICAgICovICAgIHN0YXJ0KGUpIHtcbiAgICAgICAgdGhpcy50aW1lckhhbmRsZSA9IHNldFRpbWVvdXQoKCgpID0+IHRoaXMuaGFuZGxlRGVsYXlFbGFwc2VkKCkpLCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUXVldWVzIHRoZSBvcGVyYXRpb24gdG8gcnVuIGltbWVkaWF0ZWx5IChpZiBpdCBoYXNuJ3QgYWxyZWFkeSBiZWVuIHJ1biBvclxuICAgICAqIGNhbmNlbGVkKS5cbiAgICAgKi8gICAgc2tpcERlbGF5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5oYW5kbGVEZWxheUVsYXBzZWQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FuY2VscyB0aGUgb3BlcmF0aW9uIGlmIGl0IGhhc24ndCBhbHJlYWR5IGJlZW4gZXhlY3V0ZWQgb3IgY2FuY2VsZWQuIFRoZVxuICAgICAqIHByb21pc2Ugd2lsbCBiZSByZWplY3RlZC5cbiAgICAgKlxuICAgICAqIEFzIGxvbmcgYXMgdGhlIG9wZXJhdGlvbiBoYXMgbm90IHlldCBiZWVuIHJ1biwgY2FsbGluZyBjYW5jZWwoKSBwcm92aWRlcyBhXG4gICAgICogZ3VhcmFudGVlIHRoYXQgdGhlIG9wZXJhdGlvbiB3aWxsIG5vdCBiZSBydW4uXG4gICAgICovICAgIGNhbmNlbChlKSB7XG4gICAgICAgIG51bGwgIT09IHRoaXMudGltZXJIYW5kbGUgJiYgKHRoaXMuY2xlYXJUaW1lb3V0KCksIHRoaXMuZGVmZXJyZWQucmVqZWN0KG5ldyBGaXJlc3RvcmVFcnJvcihELkNBTkNFTExFRCwgXCJPcGVyYXRpb24gY2FuY2VsbGVkXCIgKyAoZSA/IFwiOiBcIiArIGUgOiBcIlwiKSkpKTtcbiAgICB9XG4gICAgaGFuZGxlRGVsYXlFbGFwc2VkKCkge1xuICAgICAgICB0aGlzLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoKCkgPT4gbnVsbCAhPT0gdGhpcy50aW1lckhhbmRsZSA/ICh0aGlzLmNsZWFyVGltZW91dCgpLCBcbiAgICAgICAgdGhpcy5vcCgpLnRoZW4oKGUgPT4gdGhpcy5kZWZlcnJlZC5yZXNvbHZlKGUpKSkpIDogUHJvbWlzZS5yZXNvbHZlKCkpKTtcbiAgICB9XG4gICAgY2xlYXJUaW1lb3V0KCkge1xuICAgICAgICBudWxsICE9PSB0aGlzLnRpbWVySGFuZGxlICYmICh0aGlzLnJlbW92YWxDYWxsYmFjayh0aGlzKSwgY2xlYXJUaW1lb3V0KHRoaXMudGltZXJIYW5kbGUpLCBcbiAgICAgICAgdGhpcy50aW1lckhhbmRsZSA9IG51bGwpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgRmlyZXN0b3JlRXJyb3IgdGhhdCBjYW4gYmUgc3VyZmFjZWQgdG8gdGhlIHVzZXIgaWYgdGhlIHByb3ZpZGVkXG4gKiBlcnJvciBpcyBhbiBJbmRleGVkRGJUcmFuc2FjdGlvbkVycm9yLiBSZS10aHJvd3MgdGhlIGVycm9yIG90aGVyd2lzZS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfd3JhcEluVXNlckVycm9ySWZSZWNvdmVyYWJsZShlLCB0KSB7XG4gICAgaWYgKF9fUFJJVkFURV9sb2dFcnJvcihcIkFzeW5jUXVldWVcIiwgYCR7dH06ICR7ZX1gKSwgX19QUklWQVRFX2lzSW5kZXhlZERiVHJhbnNhY3Rpb25FcnJvcihlKSkgcmV0dXJuIG5ldyBGaXJlc3RvcmVFcnJvcihELlVOQVZBSUxBQkxFLCBgJHt0fTogJHtlfWApO1xuICAgIHRocm93IGU7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIERvY3VtZW50U2V0IGlzIGFuIGltbXV0YWJsZSAoY29weS1vbi13cml0ZSkgY29sbGVjdGlvbiB0aGF0IGhvbGRzIGRvY3VtZW50c1xuICogaW4gb3JkZXIgc3BlY2lmaWVkIGJ5IHRoZSBwcm92aWRlZCBjb21wYXJhdG9yLiBXZSBhbHdheXMgYWRkIGEgZG9jdW1lbnQga2V5XG4gKiBjb21wYXJhdG9yIG9uIHRvcCBvZiB3aGF0IGlzIHByb3ZpZGVkIHRvIGd1YXJhbnRlZSBkb2N1bWVudCBlcXVhbGl0eSBiYXNlZCBvblxuICogdGhlIGtleS5cbiAqLyBjbGFzcyBEb2N1bWVudFNldCB7XG4gICAgLyoqIFRoZSBkZWZhdWx0IG9yZGVyaW5nIGlzIGJ5IGtleSBpZiB0aGUgY29tcGFyYXRvciBpcyBvbWl0dGVkICovXG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICAvLyBXZSBhcmUgYWRkaW5nIGRvY3VtZW50IGtleSBjb21wYXJhdG9yIHRvIHRoZSBlbmQgYXMgaXQncyB0aGUgb25seVxuICAgICAgICAvLyBndWFyYW50ZWVkIHVuaXF1ZSBwcm9wZXJ0eSBvZiBhIGRvY3VtZW50LlxuICAgICAgICB0aGlzLmNvbXBhcmF0b3IgPSBlID8gKHQsIG4pID0+IGUodCwgbikgfHwgRG9jdW1lbnRLZXkuY29tcGFyYXRvcih0LmtleSwgbi5rZXkpIDogKGUsIHQpID0+IERvY3VtZW50S2V5LmNvbXBhcmF0b3IoZS5rZXksIHQua2V5KSwgXG4gICAgICAgIHRoaXMua2V5ZWRNYXAgPSBkb2N1bWVudE1hcCgpLCB0aGlzLnNvcnRlZFNldCA9IG5ldyBTb3J0ZWRNYXAodGhpcy5jb21wYXJhdG9yKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhbiBlbXB0eSBjb3B5IG9mIHRoZSBleGlzdGluZyBEb2N1bWVudFNldCwgdXNpbmcgdGhlIHNhbWVcbiAgICAgKiBjb21wYXJhdG9yLlxuICAgICAqLyAgICBzdGF0aWMgZW1wdHlTZXQoZSkge1xuICAgICAgICByZXR1cm4gbmV3IERvY3VtZW50U2V0KGUuY29tcGFyYXRvcik7XG4gICAgfVxuICAgIGhhcyhlKSB7XG4gICAgICAgIHJldHVybiBudWxsICE9IHRoaXMua2V5ZWRNYXAuZ2V0KGUpO1xuICAgIH1cbiAgICBnZXQoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5rZXllZE1hcC5nZXQoZSk7XG4gICAgfVxuICAgIGZpcnN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zb3J0ZWRTZXQubWluS2V5KCk7XG4gICAgfVxuICAgIGxhc3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNvcnRlZFNldC5tYXhLZXkoKTtcbiAgICB9XG4gICAgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc29ydGVkU2V0LmlzRW1wdHkoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIHByb3ZpZGVkIGtleSBpbiB0aGUgZG9jdW1lbnQgc2V0LCBvciAtMSBpZiB0aGVcbiAgICAgKiBkb2N1bWVudCBrZXkgaXMgbm90IHByZXNlbnQgaW4gdGhlIHNldDtcbiAgICAgKi8gICAgaW5kZXhPZihlKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmtleWVkTWFwLmdldChlKTtcbiAgICAgICAgcmV0dXJuIHQgPyB0aGlzLnNvcnRlZFNldC5pbmRleE9mKHQpIDogLTE7XG4gICAgfVxuICAgIGdldCBzaXplKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zb3J0ZWRTZXQuc2l6ZTtcbiAgICB9XG4gICAgLyoqIEl0ZXJhdGVzIGRvY3VtZW50cyBpbiBvcmRlciBkZWZpbmVkIGJ5IFwiY29tcGFyYXRvclwiICovICAgIGZvckVhY2goZSkge1xuICAgICAgICB0aGlzLnNvcnRlZFNldC5pbm9yZGVyVHJhdmVyc2FsKCgodCwgbikgPT4gKGUodCksICExKSkpO1xuICAgIH1cbiAgICAvKiogSW5zZXJ0cyBvciB1cGRhdGVzIGEgZG9jdW1lbnQgd2l0aCB0aGUgc2FtZSBrZXkgKi8gICAgYWRkKGUpIHtcbiAgICAgICAgLy8gRmlyc3QgcmVtb3ZlIHRoZSBlbGVtZW50IGlmIHdlIGhhdmUgaXQuXG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmRlbGV0ZShlLmtleSk7XG4gICAgICAgIHJldHVybiB0LmNvcHkodC5rZXllZE1hcC5pbnNlcnQoZS5rZXksIGUpLCB0LnNvcnRlZFNldC5pbnNlcnQoZSwgbnVsbCkpO1xuICAgIH1cbiAgICAvKiogRGVsZXRlcyBhIGRvY3VtZW50IHdpdGggYSBnaXZlbiBrZXkgKi8gICAgZGVsZXRlKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuZ2V0KGUpO1xuICAgICAgICByZXR1cm4gdCA/IHRoaXMuY29weSh0aGlzLmtleWVkTWFwLnJlbW92ZShlKSwgdGhpcy5zb3J0ZWRTZXQucmVtb3ZlKHQpKSA6IHRoaXM7XG4gICAgfVxuICAgIGlzRXF1YWwoZSkge1xuICAgICAgICBpZiAoIShlIGluc3RhbmNlb2YgRG9jdW1lbnRTZXQpKSByZXR1cm4gITE7XG4gICAgICAgIGlmICh0aGlzLnNpemUgIT09IGUuc2l6ZSkgcmV0dXJuICExO1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5zb3J0ZWRTZXQuZ2V0SXRlcmF0b3IoKSwgbiA9IGUuc29ydGVkU2V0LmdldEl0ZXJhdG9yKCk7XG4gICAgICAgIGZvciAoO3QuaGFzTmV4dCgpOyApIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0LmdldE5leHQoKS5rZXksIHIgPSBuLmdldE5leHQoKS5rZXk7XG4gICAgICAgICAgICBpZiAoIWUuaXNFcXVhbChyKSkgcmV0dXJuICExO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICBlLnB1c2godC50b1N0cmluZygpKTtcbiAgICAgICAgfSkpLCAwID09PSBlLmxlbmd0aCA/IFwiRG9jdW1lbnRTZXQgKClcIiA6IFwiRG9jdW1lbnRTZXQgKFxcbiAgXCIgKyBlLmpvaW4oXCIgIFxcblwiKSArIFwiXFxuKVwiO1xuICAgIH1cbiAgICBjb3B5KGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBEb2N1bWVudFNldDtcbiAgICAgICAgcmV0dXJuIG4uY29tcGFyYXRvciA9IHRoaXMuY29tcGFyYXRvciwgbi5rZXllZE1hcCA9IGUsIG4uc29ydGVkU2V0ID0gdCwgbjtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIERvY3VtZW50Q2hhbmdlU2V0IGtlZXBzIHRyYWNrIG9mIGEgc2V0IG9mIGNoYW5nZXMgdG8gZG9jcyBpbiBhIHF1ZXJ5LCBtZXJnaW5nXG4gKiBkdXBsaWNhdGUgZXZlbnRzIGZvciB0aGUgc2FtZSBkb2MuXG4gKi8gY2xhc3MgX19QUklWQVRFX0RvY3VtZW50Q2hhbmdlU2V0IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5CXyA9IG5ldyBTb3J0ZWRNYXAoRG9jdW1lbnRLZXkuY29tcGFyYXRvcik7XG4gICAgfVxuICAgIHRyYWNrKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IGUuZG9jLmtleSwgbiA9IHRoaXMuQl8uZ2V0KHQpO1xuICAgICAgICBuID8gXG4gICAgICAgIC8vIE1lcmdlIHRoZSBuZXcgY2hhbmdlIHdpdGggdGhlIGV4aXN0aW5nIGNoYW5nZS5cbiAgICAgICAgMCAvKiBDaGFuZ2VUeXBlLkFkZGVkICovICE9PSBlLnR5cGUgJiYgMyAvKiBDaGFuZ2VUeXBlLk1ldGFkYXRhICovID09PSBuLnR5cGUgPyB0aGlzLkJfID0gdGhpcy5CXy5pbnNlcnQodCwgZSkgOiAzIC8qIENoYW5nZVR5cGUuTWV0YWRhdGEgKi8gPT09IGUudHlwZSAmJiAxIC8qIENoYW5nZVR5cGUuUmVtb3ZlZCAqLyAhPT0gbi50eXBlID8gdGhpcy5CXyA9IHRoaXMuQl8uaW5zZXJ0KHQsIHtcbiAgICAgICAgICAgIHR5cGU6IG4udHlwZSxcbiAgICAgICAgICAgIGRvYzogZS5kb2NcbiAgICAgICAgfSkgOiAyIC8qIENoYW5nZVR5cGUuTW9kaWZpZWQgKi8gPT09IGUudHlwZSAmJiAyIC8qIENoYW5nZVR5cGUuTW9kaWZpZWQgKi8gPT09IG4udHlwZSA/IHRoaXMuQl8gPSB0aGlzLkJfLmluc2VydCh0LCB7XG4gICAgICAgICAgICB0eXBlOiAyIC8qIENoYW5nZVR5cGUuTW9kaWZpZWQgKi8gLFxuICAgICAgICAgICAgZG9jOiBlLmRvY1xuICAgICAgICB9KSA6IDIgLyogQ2hhbmdlVHlwZS5Nb2RpZmllZCAqLyA9PT0gZS50eXBlICYmIDAgLyogQ2hhbmdlVHlwZS5BZGRlZCAqLyA9PT0gbi50eXBlID8gdGhpcy5CXyA9IHRoaXMuQl8uaW5zZXJ0KHQsIHtcbiAgICAgICAgICAgIHR5cGU6IDAgLyogQ2hhbmdlVHlwZS5BZGRlZCAqLyAsXG4gICAgICAgICAgICBkb2M6IGUuZG9jXG4gICAgICAgIH0pIDogMSAvKiBDaGFuZ2VUeXBlLlJlbW92ZWQgKi8gPT09IGUudHlwZSAmJiAwIC8qIENoYW5nZVR5cGUuQWRkZWQgKi8gPT09IG4udHlwZSA/IHRoaXMuQl8gPSB0aGlzLkJfLnJlbW92ZSh0KSA6IDEgLyogQ2hhbmdlVHlwZS5SZW1vdmVkICovID09PSBlLnR5cGUgJiYgMiAvKiBDaGFuZ2VUeXBlLk1vZGlmaWVkICovID09PSBuLnR5cGUgPyB0aGlzLkJfID0gdGhpcy5CXy5pbnNlcnQodCwge1xuICAgICAgICAgICAgdHlwZTogMSAvKiBDaGFuZ2VUeXBlLlJlbW92ZWQgKi8gLFxuICAgICAgICAgICAgZG9jOiBuLmRvY1xuICAgICAgICB9KSA6IDAgLyogQ2hhbmdlVHlwZS5BZGRlZCAqLyA9PT0gZS50eXBlICYmIDEgLyogQ2hhbmdlVHlwZS5SZW1vdmVkICovID09PSBuLnR5cGUgPyB0aGlzLkJfID0gdGhpcy5CXy5pbnNlcnQodCwge1xuICAgICAgICAgICAgdHlwZTogMiAvKiBDaGFuZ2VUeXBlLk1vZGlmaWVkICovICxcbiAgICAgICAgICAgIGRvYzogZS5kb2NcbiAgICAgICAgfSkgOiBcbiAgICAgICAgLy8gVGhpcyBpbmNsdWRlcyB0aGVzZSBjYXNlcywgd2hpY2ggZG9uJ3QgbWFrZSBzZW5zZTpcbiAgICAgICAgLy8gQWRkZWQtPkFkZGVkXG4gICAgICAgIC8vIFJlbW92ZWQtPlJlbW92ZWRcbiAgICAgICAgLy8gTW9kaWZpZWQtPkFkZGVkXG4gICAgICAgIC8vIFJlbW92ZWQtPk1vZGlmaWVkXG4gICAgICAgIC8vIE1ldGFkYXRhLT5BZGRlZFxuICAgICAgICAvLyBSZW1vdmVkLT5NZXRhZGF0YVxuICAgICAgICBmYWlsKCkgOiB0aGlzLkJfID0gdGhpcy5CXy5pbnNlcnQodCwgZSk7XG4gICAgfVxuICAgIExfKCkge1xuICAgICAgICBjb25zdCBlID0gW107XG4gICAgICAgIHJldHVybiB0aGlzLkJfLmlub3JkZXJUcmF2ZXJzYWwoKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICBlLnB1c2gobik7XG4gICAgICAgIH0pKSwgZTtcbiAgICB9XG59XG5cbmNsYXNzIFZpZXdTbmFwc2hvdCB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbiwgciwgaSwgcywgbywgXywgYSkge1xuICAgICAgICB0aGlzLnF1ZXJ5ID0gZSwgdGhpcy5kb2NzID0gdCwgdGhpcy5vbGREb2NzID0gbiwgdGhpcy5kb2NDaGFuZ2VzID0gciwgdGhpcy5tdXRhdGVkS2V5cyA9IGksIFxuICAgICAgICB0aGlzLmZyb21DYWNoZSA9IHMsIHRoaXMuc3luY1N0YXRlQ2hhbmdlZCA9IG8sIHRoaXMuZXhjbHVkZXNNZXRhZGF0YUNoYW5nZXMgPSBfLCBcbiAgICAgICAgdGhpcy5oYXNDYWNoZWRSZXN1bHRzID0gYTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYSB2aWV3IHNuYXBzaG90IGFzIGlmIGFsbCBkb2N1bWVudHMgaW4gdGhlIHNuYXBzaG90IHdlcmUgYWRkZWQuICovICAgIHN0YXRpYyBmcm9tSW5pdGlhbERvY3VtZW50cyhlLCB0LCBuLCByLCBpKSB7XG4gICAgICAgIGNvbnN0IHMgPSBbXTtcbiAgICAgICAgcmV0dXJuIHQuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICBzLnB1c2goe1xuICAgICAgICAgICAgICAgIHR5cGU6IDAgLyogQ2hhbmdlVHlwZS5BZGRlZCAqLyAsXG4gICAgICAgICAgICAgICAgZG9jOiBlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSkpLCBuZXcgVmlld1NuYXBzaG90KGUsIHQsIERvY3VtZW50U2V0LmVtcHR5U2V0KHQpLCBzLCBuLCByLCBcbiAgICAgICAgLyogc3luY1N0YXRlQ2hhbmdlZD0gKi8gITAsIFxuICAgICAgICAvKiBleGNsdWRlc01ldGFkYXRhQ2hhbmdlcz0gKi8gITEsIGkpO1xuICAgIH1cbiAgICBnZXQgaGFzUGVuZGluZ1dyaXRlcygpIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLm11dGF0ZWRLZXlzLmlzRW1wdHkoKTtcbiAgICB9XG4gICAgaXNFcXVhbChlKSB7XG4gICAgICAgIGlmICghKHRoaXMuZnJvbUNhY2hlID09PSBlLmZyb21DYWNoZSAmJiB0aGlzLmhhc0NhY2hlZFJlc3VsdHMgPT09IGUuaGFzQ2FjaGVkUmVzdWx0cyAmJiB0aGlzLnN5bmNTdGF0ZUNoYW5nZWQgPT09IGUuc3luY1N0YXRlQ2hhbmdlZCAmJiB0aGlzLm11dGF0ZWRLZXlzLmlzRXF1YWwoZS5tdXRhdGVkS2V5cykgJiYgX19QUklWQVRFX3F1ZXJ5RXF1YWxzKHRoaXMucXVlcnksIGUucXVlcnkpICYmIHRoaXMuZG9jcy5pc0VxdWFsKGUuZG9jcykgJiYgdGhpcy5vbGREb2NzLmlzRXF1YWwoZS5vbGREb2NzKSkpIHJldHVybiAhMTtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuZG9jQ2hhbmdlcywgbiA9IGUuZG9jQ2hhbmdlcztcbiAgICAgICAgaWYgKHQubGVuZ3RoICE9PSBuLmxlbmd0aCkgcmV0dXJuICExO1xuICAgICAgICBmb3IgKGxldCBlID0gMDsgZSA8IHQubGVuZ3RoOyBlKyspIGlmICh0W2VdLnR5cGUgIT09IG5bZV0udHlwZSB8fCAhdFtlXS5kb2MuaXNFcXVhbChuW2VdLmRvYykpIHJldHVybiAhMTtcbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogSG9sZHMgdGhlIGxpc3RlbmVycyBhbmQgdGhlIGxhc3QgcmVjZWl2ZWQgVmlld1NuYXBzaG90IGZvciBhIHF1ZXJ5IGJlaW5nXG4gKiB0cmFja2VkIGJ5IEV2ZW50TWFuYWdlci5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfUXVlcnlMaXN0ZW5lcnNJbmZvIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5rXyA9IHZvaWQgMCwgdGhpcy5saXN0ZW5lcnMgPSBbXTtcbiAgICB9XG59XG5cbmNsYXNzIF9fUFJJVkFURV9FdmVudE1hbmFnZXJJbXBsIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5xdWVyaWVzID0gbmV3IE9iamVjdE1hcCgoZSA9PiBfX1BSSVZBVEVfY2Fub25pZnlRdWVyeShlKSksIF9fUFJJVkFURV9xdWVyeUVxdWFscyksIFxuICAgICAgICB0aGlzLm9ubGluZVN0YXRlID0gXCJVbmtub3duXCIgLyogT25saW5lU3RhdGUuVW5rbm93biAqLyAsIHRoaXMucV8gPSBuZXcgU2V0O1xuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX2V2ZW50TWFuYWdlckxpc3RlbihlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSksIHIgPSB0LnF1ZXJ5O1xuICAgIGxldCBpID0gITEsIHMgPSBuLnF1ZXJpZXMuZ2V0KHIpO1xuICAgIGlmIChzIHx8IChpID0gITAsIHMgPSBuZXcgX19QUklWQVRFX1F1ZXJ5TGlzdGVuZXJzSW5mbyksIGkpIHRyeSB7XG4gICAgICAgIHMua18gPSBhd2FpdCBuLm9uTGlzdGVuKHIpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV93cmFwSW5Vc2VyRXJyb3JJZlJlY292ZXJhYmxlKGUsIGBJbml0aWFsaXphdGlvbiBvZiBxdWVyeSAnJHtfX1BSSVZBVEVfc3RyaW5naWZ5UXVlcnkodC5xdWVyeSl9JyBmYWlsZWRgKTtcbiAgICAgICAgcmV0dXJuIHZvaWQgdC5vbkVycm9yKG4pO1xuICAgIH1cbiAgICBpZiAobi5xdWVyaWVzLnNldChyLCBzKSwgcy5saXN0ZW5lcnMucHVzaCh0KSwgXG4gICAgLy8gUnVuIGdsb2JhbCBzbmFwc2hvdCBsaXN0ZW5lcnMgaWYgYSBjb25zaXN0ZW50IHNuYXBzaG90IGhhcyBiZWVuIGVtaXR0ZWQuXG4gICAgdC5RXyhuLm9ubGluZVN0YXRlKSwgcy5rXykge1xuICAgICAgICB0LktfKHMua18pICYmIF9fUFJJVkFURV9yYWlzZVNuYXBzaG90c0luU3luY0V2ZW50KG4pO1xuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX2V2ZW50TWFuYWdlclVubGlzdGVuKGUsIHQpIHtcbiAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKSwgciA9IHQucXVlcnk7XG4gICAgbGV0IGkgPSAhMTtcbiAgICBjb25zdCBzID0gbi5xdWVyaWVzLmdldChyKTtcbiAgICBpZiAocykge1xuICAgICAgICBjb25zdCBlID0gcy5saXN0ZW5lcnMuaW5kZXhPZih0KTtcbiAgICAgICAgZSA+PSAwICYmIChzLmxpc3RlbmVycy5zcGxpY2UoZSwgMSksIGkgPSAwID09PSBzLmxpc3RlbmVycy5sZW5ndGgpO1xuICAgIH1cbiAgICBpZiAoaSkgcmV0dXJuIG4ucXVlcmllcy5kZWxldGUociksIG4ub25Vbmxpc3RlbihyKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2V2ZW50TWFuYWdlck9uV2F0Y2hDaGFuZ2UoZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgIGxldCByID0gITE7XG4gICAgZm9yIChjb25zdCBlIG9mIHQpIHtcbiAgICAgICAgY29uc3QgdCA9IGUucXVlcnksIGkgPSBuLnF1ZXJpZXMuZ2V0KHQpO1xuICAgICAgICBpZiAoaSkge1xuICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIGkubGlzdGVuZXJzKSB0LktfKGUpICYmIChyID0gITApO1xuICAgICAgICAgICAgaS5rXyA9IGU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgciAmJiBfX1BSSVZBVEVfcmFpc2VTbmFwc2hvdHNJblN5bmNFdmVudChuKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2V2ZW50TWFuYWdlck9uV2F0Y2hFcnJvcihlLCB0LCBuKSB7XG4gICAgY29uc3QgciA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSksIGkgPSByLnF1ZXJpZXMuZ2V0KHQpO1xuICAgIGlmIChpKSBmb3IgKGNvbnN0IGUgb2YgaS5saXN0ZW5lcnMpIGUub25FcnJvcihuKTtcbiAgICAvLyBSZW1vdmUgYWxsIGxpc3RlbmVycy4gTk9URTogV2UgZG9uJ3QgbmVlZCB0byBjYWxsIHN5bmNFbmdpbmUudW5saXN0ZW4oKVxuICAgIC8vIGFmdGVyIGFuIGVycm9yLlxuICAgICAgICByLnF1ZXJpZXMuZGVsZXRlKHQpO1xufVxuXG4vLyBDYWxsIGFsbCBnbG9iYWwgc25hcHNob3QgbGlzdGVuZXJzIHRoYXQgaGF2ZSBiZWVuIHNldC5cbmZ1bmN0aW9uIF9fUFJJVkFURV9yYWlzZVNuYXBzaG90c0luU3luY0V2ZW50KGUpIHtcbiAgICBlLnFfLmZvckVhY2goKGUgPT4ge1xuICAgICAgICBlLm5leHQoKTtcbiAgICB9KSk7XG59XG5cbi8qKlxuICogUXVlcnlMaXN0ZW5lciB0YWtlcyBhIHNlcmllcyBvZiBpbnRlcm5hbCB2aWV3IHNuYXBzaG90cyBhbmQgZGV0ZXJtaW5lc1xuICogd2hlbiB0byByYWlzZSB0aGUgZXZlbnQuXG4gKlxuICogSXQgdXNlcyBhbiBPYnNlcnZlciB0byBkaXNwYXRjaCBldmVudHMuXG4gKi8gY2xhc3MgX19QUklWQVRFX1F1ZXJ5TGlzdGVuZXIge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4pIHtcbiAgICAgICAgdGhpcy5xdWVyeSA9IGUsIHRoaXMuVV8gPSB0LCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEluaXRpYWwgc25hcHNob3RzIChlLmcuIGZyb20gY2FjaGUpIG1heSBub3QgYmUgcHJvcGFnYXRlZCB0byB0aGUgd3JhcHBlZFxuICAgICAgICAgKiBvYnNlcnZlci4gVGhpcyBmbGFnIGlzIHNldCB0byB0cnVlIG9uY2Ugd2UndmUgYWN0dWFsbHkgcmFpc2VkIGFuIGV2ZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5XXyA9ICExLCB0aGlzLkdfID0gbnVsbCwgdGhpcy5vbmxpbmVTdGF0ZSA9IFwiVW5rbm93blwiIC8qIE9ubGluZVN0YXRlLlVua25vd24gKi8gLCBcbiAgICAgICAgdGhpcy5vcHRpb25zID0gbiB8fCB7fTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwbGllcyB0aGUgbmV3IFZpZXdTbmFwc2hvdCB0byB0aGlzIGxpc3RlbmVyLCByYWlzaW5nIGEgdXNlci1mYWNpbmcgZXZlbnRcbiAgICAgKiBpZiBhcHBsaWNhYmxlIChkZXBlbmRpbmcgb24gd2hhdCBjaGFuZ2VkLCB3aGV0aGVyIHRoZSB1c2VyIGhhcyBvcHRlZCBpbnRvXG4gICAgICogbWV0YWRhdGEtb25seSBjaGFuZ2VzLCBldGMuKS4gUmV0dXJucyB0cnVlIGlmIGEgdXNlci1mYWNpbmcgZXZlbnQgd2FzXG4gICAgICogaW5kZWVkIHJhaXNlZC5cbiAgICAgKi8gICAgS18oZSkge1xuICAgICAgICBpZiAoIXRoaXMub3B0aW9ucy5pbmNsdWRlTWV0YWRhdGFDaGFuZ2VzKSB7XG4gICAgICAgICAgICAvLyBSZW1vdmUgdGhlIG1ldGFkYXRhIG9ubHkgY2hhbmdlcy5cbiAgICAgICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgbiBvZiBlLmRvY0NoYW5nZXMpIDMgLyogQ2hhbmdlVHlwZS5NZXRhZGF0YSAqLyAhPT0gbi50eXBlICYmIHQucHVzaChuKTtcbiAgICAgICAgICAgIGUgPSBuZXcgVmlld1NuYXBzaG90KGUucXVlcnksIGUuZG9jcywgZS5vbGREb2NzLCB0LCBlLm11dGF0ZWRLZXlzLCBlLmZyb21DYWNoZSwgZS5zeW5jU3RhdGVDaGFuZ2VkLCBcbiAgICAgICAgICAgIC8qIGV4Y2x1ZGVzTWV0YWRhdGFDaGFuZ2VzPSAqLyAhMCwgZS5oYXNDYWNoZWRSZXN1bHRzKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgdCA9ICExO1xuICAgICAgICByZXR1cm4gdGhpcy5XXyA/IHRoaXMuel8oZSkgJiYgKHRoaXMuVV8ubmV4dChlKSwgdCA9ICEwKSA6IHRoaXMual8oZSwgdGhpcy5vbmxpbmVTdGF0ZSkgJiYgKHRoaXMuSF8oZSksIFxuICAgICAgICB0ID0gITApLCB0aGlzLkdfID0gZSwgdDtcbiAgICB9XG4gICAgb25FcnJvcihlKSB7XG4gICAgICAgIHRoaXMuVV8uZXJyb3IoZSk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIHdoZXRoZXIgYSBzbmFwc2hvdCB3YXMgcmFpc2VkLiAqLyAgICBRXyhlKSB7XG4gICAgICAgIHRoaXMub25saW5lU3RhdGUgPSBlO1xuICAgICAgICBsZXQgdCA9ICExO1xuICAgICAgICByZXR1cm4gdGhpcy5HXyAmJiAhdGhpcy5XXyAmJiB0aGlzLmpfKHRoaXMuR18sIGUpICYmICh0aGlzLkhfKHRoaXMuR18pLCB0ID0gITApLCBcbiAgICAgICAgdDtcbiAgICB9XG4gICAgal8oZSwgdCkge1xuICAgICAgICAvLyBBbHdheXMgcmFpc2UgdGhlIGZpcnN0IGV2ZW50IHdoZW4gd2UncmUgc3luY2VkXG4gICAgICAgIGlmICghZS5mcm9tQ2FjaGUpIHJldHVybiAhMDtcbiAgICAgICAgLy8gTk9URTogV2UgY29uc2lkZXIgT25saW5lU3RhdGUuVW5rbm93biBhcyBvbmxpbmUgKGl0IHNob3VsZCBiZWNvbWUgT2ZmbGluZVxuICAgICAgICAvLyBvciBPbmxpbmUgaWYgd2Ugd2FpdCBsb25nIGVub3VnaCkuXG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IFwiT2ZmbGluZVwiIC8qIE9ubGluZVN0YXRlLk9mZmxpbmUgKi8gIT09IHQ7XG4gICAgICAgIC8vIERvbid0IHJhaXNlIHRoZSBldmVudCBpZiB3ZSdyZSBvbmxpbmUsIGFyZW4ndCBzeW5jZWQgeWV0IChjaGVja2VkXG4gICAgICAgIC8vIGFib3ZlKSBhbmQgYXJlIHdhaXRpbmcgZm9yIGEgc3luYy5cbiAgICAgICAgICAgICAgICByZXR1cm4gKCF0aGlzLm9wdGlvbnMuSl8gfHwgIW4pICYmICghZS5kb2NzLmlzRW1wdHkoKSB8fCBlLmhhc0NhY2hlZFJlc3VsdHMgfHwgXCJPZmZsaW5lXCIgLyogT25saW5lU3RhdGUuT2ZmbGluZSAqLyA9PT0gdCk7XG4gICAgICAgIC8vIFJhaXNlIGRhdGEgZnJvbSBjYWNoZSBpZiB3ZSBoYXZlIGFueSBkb2N1bWVudHMsIGhhdmUgY2FjaGVkIHJlc3VsdHMgYmVmb3JlLFxuICAgICAgICAvLyBvciB3ZSBhcmUgb2ZmbGluZS5cbiAgICAgICAgfVxuICAgIHpfKGUpIHtcbiAgICAgICAgLy8gV2UgZG9uJ3QgbmVlZCB0byBoYW5kbGUgaW5jbHVkZURvY3VtZW50TWV0YWRhdGFDaGFuZ2VzIGhlcmUgYmVjYXVzZVxuICAgICAgICAvLyB0aGUgTWV0YWRhdGEgb25seSBjaGFuZ2VzIGhhdmUgYWxyZWFkeSBiZWVuIHN0cmlwcGVkIG91dCBpZiBuZWVkZWQuXG4gICAgICAgIC8vIEF0IHRoaXMgcG9pbnQgdGhlIG9ubHkgY2hhbmdlcyB3ZSB3aWxsIHNlZSBhcmUgdGhlIG9uZXMgd2Ugc2hvdWxkXG4gICAgICAgIC8vIHByb3BhZ2F0ZS5cbiAgICAgICAgaWYgKGUuZG9jQ2hhbmdlcy5sZW5ndGggPiAwKSByZXR1cm4gITA7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLkdfICYmIHRoaXMuR18uaGFzUGVuZGluZ1dyaXRlcyAhPT0gZS5oYXNQZW5kaW5nV3JpdGVzO1xuICAgICAgICByZXR1cm4gISghZS5zeW5jU3RhdGVDaGFuZ2VkICYmICF0KSAmJiAhMCA9PT0gdGhpcy5vcHRpb25zLmluY2x1ZGVNZXRhZGF0YUNoYW5nZXM7XG4gICAgICAgIC8vIEdlbmVyYWxseSB3ZSBzaG91bGQgaGF2ZSBoaXQgb25lIG9mIHRoZSBjYXNlcyBhYm92ZSwgYnV0IGl0J3MgcG9zc2libGVcbiAgICAgICAgLy8gdG8gZ2V0IGhlcmUgaWYgdGhlcmUgd2VyZSBvbmx5IG1ldGFkYXRhIGRvY0NoYW5nZXMgYW5kIHRoZXkgZ290XG4gICAgICAgIC8vIHN0cmlwcGVkIG91dC5cbiAgICAgICAgfVxuICAgIEhfKGUpIHtcbiAgICAgICAgZSA9IFZpZXdTbmFwc2hvdC5mcm9tSW5pdGlhbERvY3VtZW50cyhlLnF1ZXJ5LCBlLmRvY3MsIGUubXV0YXRlZEtleXMsIGUuZnJvbUNhY2hlLCBlLmhhc0NhY2hlZFJlc3VsdHMpLCBcbiAgICAgICAgdGhpcy5XXyA9ICEwLCB0aGlzLlVfLm5leHQoZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIGNvbXBsZXRlIGVsZW1lbnQgaW4gdGhlIGJ1bmRsZSBzdHJlYW0sIHRvZ2V0aGVyIHdpdGggdGhlIGJ5dGUgbGVuZ3RoIGl0XG4gKiBvY2N1cGllcyBpbiB0aGUgc3RyZWFtLlxuICovIGNsYXNzIF9fUFJJVkFURV9TaXplZEJ1bmRsZUVsZW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKGUsIFxuICAgIC8vIEhvdyBtYW55IGJ5dGVzIHRoaXMgZWxlbWVudCB0YWtlcyB0byBzdG9yZSBpbiB0aGUgYnVuZGxlLlxuICAgIHQpIHtcbiAgICAgICAgdGhpcy5ZXyA9IGUsIHRoaXMuYnl0ZUxlbmd0aCA9IHQ7XG4gICAgfVxuICAgIFpfKCkge1xuICAgICAgICByZXR1cm4gXCJtZXRhZGF0YVwiIGluIHRoaXMuWV87XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBIZWxwZXIgdG8gY29udmVydCBvYmplY3RzIGZyb20gYnVuZGxlcyB0byBtb2RlbCBvYmplY3RzIGluIHRoZSBTREsuXG4gKi8gY2xhc3MgX19QUklWQVRFX0J1bmRsZUNvbnZlcnRlckltcGwge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5zZXJpYWxpemVyID0gZTtcbiAgICB9XG4gICAgaHMoZSkge1xuICAgICAgICByZXR1cm4gZnJvbU5hbWUodGhpcy5zZXJpYWxpemVyLCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29udmVydHMgYSBCdW5kbGVEb2N1bWVudCB0byBhIE11dGFibGVEb2N1bWVudC5cbiAgICAgKi8gICAgUHMoZSkge1xuICAgICAgICByZXR1cm4gZS5tZXRhZGF0YS5leGlzdHMgPyBfX1BSSVZBVEVfZnJvbURvY3VtZW50KHRoaXMuc2VyaWFsaXplciwgZS5kb2N1bWVudCwgITEpIDogTXV0YWJsZURvY3VtZW50Lm5ld05vRG9jdW1lbnQodGhpcy5ocyhlLm1ldGFkYXRhLm5hbWUpLCB0aGlzLklzKGUubWV0YWRhdGEucmVhZFRpbWUpKTtcbiAgICB9XG4gICAgSXMoZSkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX2Zyb21WZXJzaW9uKGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIGNsYXNzIHRvIHByb2Nlc3MgdGhlIGVsZW1lbnRzIGZyb20gYSBidW5kbGUsIGxvYWQgdGhlbSBpbnRvIGxvY2FsXG4gKiBzdG9yYWdlIGFuZCBwcm92aWRlIHByb2dyZXNzIHVwZGF0ZSB3aGlsZSBsb2FkaW5nLlxuICovIGNsYXNzIF9fUFJJVkFURV9CdW5kbGVMb2FkZXIge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4pIHtcbiAgICAgICAgdGhpcy5YXyA9IGUsIHRoaXMubG9jYWxTdG9yZSA9IHQsIHRoaXMuc2VyaWFsaXplciA9IG4sIFxuICAgICAgICAvKiogQmF0Y2hlZCBxdWVyaWVzIHRvIGJlIHNhdmVkIGludG8gc3RvcmFnZSAqL1xuICAgICAgICB0aGlzLnF1ZXJpZXMgPSBbXSwgXG4gICAgICAgIC8qKiBCYXRjaGVkIGRvY3VtZW50cyB0byBiZSBzYXZlZCBpbnRvIHN0b3JhZ2UgKi9cbiAgICAgICAgdGhpcy5kb2N1bWVudHMgPSBbXSwgXG4gICAgICAgIC8qKiBUaGUgY29sbGVjdGlvbiBncm91cHMgYWZmZWN0ZWQgYnkgdGhpcyBidW5kbGUuICovXG4gICAgICAgIHRoaXMuY29sbGVjdGlvbkdyb3VwcyA9IG5ldyBTZXQsIHRoaXMucHJvZ3Jlc3MgPSBfX1BSSVZBVEVfYnVuZGxlSW5pdGlhbFByb2dyZXNzKGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIGFuIGVsZW1lbnQgZnJvbSB0aGUgYnVuZGxlIHRvIHRoZSBsb2FkZXIuXG4gICAgICpcbiAgICAgKiBSZXR1cm5zIGEgbmV3IHByb2dyZXNzIGlmIGFkZGluZyB0aGUgZWxlbWVudCBsZWFkcyB0byBhIG5ldyBwcm9ncmVzcyxcbiAgICAgKiBvdGhlcndpc2UgcmV0dXJucyBudWxsLlxuICAgICAqLyAgICBlYShlKSB7XG4gICAgICAgIHRoaXMucHJvZ3Jlc3MuYnl0ZXNMb2FkZWQgKz0gZS5ieXRlTGVuZ3RoO1xuICAgICAgICBsZXQgdCA9IHRoaXMucHJvZ3Jlc3MuZG9jdW1lbnRzTG9hZGVkO1xuICAgICAgICBpZiAoZS5ZXy5uYW1lZFF1ZXJ5KSB0aGlzLnF1ZXJpZXMucHVzaChlLllfLm5hbWVkUXVlcnkpOyBlbHNlIGlmIChlLllfLmRvY3VtZW50TWV0YWRhdGEpIHtcbiAgICAgICAgICAgIHRoaXMuZG9jdW1lbnRzLnB1c2goe1xuICAgICAgICAgICAgICAgIG1ldGFkYXRhOiBlLllfLmRvY3VtZW50TWV0YWRhdGFcbiAgICAgICAgICAgIH0pLCBlLllfLmRvY3VtZW50TWV0YWRhdGEuZXhpc3RzIHx8ICsrdDtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBSZXNvdXJjZVBhdGguZnJvbVN0cmluZyhlLllfLmRvY3VtZW50TWV0YWRhdGEubmFtZSk7XG4gICAgICAgICAgICB0aGlzLmNvbGxlY3Rpb25Hcm91cHMuYWRkKG4uZ2V0KG4ubGVuZ3RoIC0gMikpO1xuICAgICAgICB9IGVsc2UgZS5ZXy5kb2N1bWVudCAmJiAodGhpcy5kb2N1bWVudHNbdGhpcy5kb2N1bWVudHMubGVuZ3RoIC0gMV0uZG9jdW1lbnQgPSBlLllfLmRvY3VtZW50LCBcbiAgICAgICAgKyt0KTtcbiAgICAgICAgcmV0dXJuIHQgIT09IHRoaXMucHJvZ3Jlc3MuZG9jdW1lbnRzTG9hZGVkID8gKHRoaXMucHJvZ3Jlc3MuZG9jdW1lbnRzTG9hZGVkID0gdCwgXG4gICAgICAgIE9iamVjdC5hc3NpZ24oe30sIHRoaXMucHJvZ3Jlc3MpKSA6IG51bGw7XG4gICAgfVxuICAgIHRhKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IG5ldyBNYXAsIG4gPSBuZXcgX19QUklWQVRFX0J1bmRsZUNvbnZlcnRlckltcGwodGhpcy5zZXJpYWxpemVyKTtcbiAgICAgICAgZm9yIChjb25zdCByIG9mIGUpIGlmIChyLm1ldGFkYXRhLnF1ZXJpZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBuLmhzKHIubWV0YWRhdGEubmFtZSk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG4gb2Ygci5tZXRhZGF0YS5xdWVyaWVzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgciA9ICh0LmdldChuKSB8fCBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKSkuYWRkKGUpO1xuICAgICAgICAgICAgICAgIHQuc2V0KG4sIHIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgdGhlIHByb2dyZXNzIHRvICdTdWNjZXNzJyBhbmQgcmV0dXJuIHRoZSB1cGRhdGVkIHByb2dyZXNzLlxuICAgICAqLyAgICBhc3luYyBjb21wbGV0ZSgpIHtcbiAgICAgICAgY29uc3QgZSA9IGF3YWl0IF9fUFJJVkFURV9sb2NhbFN0b3JlQXBwbHlCdW5kbGVkRG9jdW1lbnRzKHRoaXMubG9jYWxTdG9yZSwgbmV3IF9fUFJJVkFURV9CdW5kbGVDb252ZXJ0ZXJJbXBsKHRoaXMuc2VyaWFsaXplciksIHRoaXMuZG9jdW1lbnRzLCB0aGlzLlhfLmlkKSwgdCA9IHRoaXMudGEodGhpcy5kb2N1bWVudHMpO1xuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdGhpcy5xdWVyaWVzKSBhd2FpdCBfX1BSSVZBVEVfbG9jYWxTdG9yZVNhdmVOYW1lZFF1ZXJ5KHRoaXMubG9jYWxTdG9yZSwgZSwgdC5nZXQoZS5uYW1lKSk7XG4gICAgICAgIHJldHVybiB0aGlzLnByb2dyZXNzLnRhc2tTdGF0ZSA9IFwiU3VjY2Vzc1wiLCB7XG4gICAgICAgICAgICBwcm9ncmVzczogdGhpcy5wcm9ncmVzcyxcbiAgICAgICAgICAgIG5hOiB0aGlzLmNvbGxlY3Rpb25Hcm91cHMsXG4gICAgICAgICAgICByYTogZVxuICAgICAgICB9O1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgYExvYWRCdW5kbGVUYXNrUHJvZ3Jlc3NgIHJlcHJlc2VudGluZyB0aGUgaW5pdGlhbCBwcm9ncmVzcyBvZlxuICogbG9hZGluZyBhIGJ1bmRsZS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfYnVuZGxlSW5pdGlhbFByb2dyZXNzKGUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0YXNrU3RhdGU6IFwiUnVubmluZ1wiLFxuICAgICAgICBkb2N1bWVudHNMb2FkZWQ6IDAsXG4gICAgICAgIGJ5dGVzTG9hZGVkOiAwLFxuICAgICAgICB0b3RhbERvY3VtZW50czogZS50b3RhbERvY3VtZW50cyxcbiAgICAgICAgdG90YWxCeXRlczogZS50b3RhbEJ5dGVzXG4gICAgfTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgYExvYWRCdW5kbGVUYXNrUHJvZ3Jlc3NgIHJlcHJlc2VudGluZyB0aGUgcHJvZ3Jlc3MgdGhhdCB0aGUgbG9hZGluZ1xuICogaGFzIHN1Y2NlZWRlZC5cbiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmNsYXNzIF9fUFJJVkFURV9BZGRlZExpbWJvRG9jdW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5rZXkgPSBlO1xuICAgIH1cbn1cblxuY2xhc3MgX19QUklWQVRFX1JlbW92ZWRMaW1ib0RvY3VtZW50IHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMua2V5ID0gZTtcbiAgICB9XG59XG5cbi8qKlxuICogVmlldyBpcyByZXNwb25zaWJsZSBmb3IgY29tcHV0aW5nIHRoZSBmaW5hbCBtZXJnZWQgdHJ1dGggb2Ygd2hhdCBkb2NzIGFyZSBpblxuICogYSBxdWVyeS4gSXQgZ2V0cyBub3RpZmllZCBvZiBsb2NhbCBhbmQgcmVtb3RlIGNoYW5nZXMgdG8gZG9jcywgYW5kIGFwcGxpZXNcbiAqIHRoZSBxdWVyeSBmaWx0ZXJzIGFuZCBsaW1pdHMgdG8gZGV0ZXJtaW5lIHRoZSBtb3N0IGNvcnJlY3QgcG9zc2libGUgcmVzdWx0cy5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfVmlldyB7XG4gICAgY29uc3RydWN0b3IoZSwgXG4gICAgLyoqIERvY3VtZW50cyBpbmNsdWRlZCBpbiB0aGUgcmVtb3RlIHRhcmdldCAqL1xuICAgIHQpIHtcbiAgICAgICAgdGhpcy5xdWVyeSA9IGUsIHRoaXMuaWEgPSB0LCB0aGlzLnNhID0gbnVsbCwgdGhpcy5oYXNDYWNoZWRSZXN1bHRzID0gITEsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSBmbGFnIHdoZXRoZXIgdGhlIHZpZXcgaXMgY3VycmVudCB3aXRoIHRoZSBiYWNrZW5kLiBBIHZpZXcgaXMgY29uc2lkZXJlZFxuICAgICAgICAgKiBjdXJyZW50IGFmdGVyIGl0IGhhcyBzZWVuIHRoZSBjdXJyZW50IGZsYWcgZnJvbSB0aGUgYmFja2VuZCBhbmQgZGlkIG5vdFxuICAgICAgICAgKiBsb3NlIGNvbnNpc3RlbmN5IHdpdGhpbiB0aGUgd2F0Y2ggc3RyZWFtIChlLmcuIGJlY2F1c2Ugb2YgYW4gZXhpc3RlbmNlXG4gICAgICAgICAqIGZpbHRlciBtaXNtYXRjaCkuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmN1cnJlbnQgPSAhMSwgXG4gICAgICAgIC8qKiBEb2N1bWVudHMgaW4gdGhlIHZpZXcgYnV0IG5vdCBpbiB0aGUgcmVtb3RlIHRhcmdldCAqL1xuICAgICAgICB0aGlzLm9hID0gX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCksIFxuICAgICAgICAvKiogRG9jdW1lbnQgS2V5cyB0aGF0IGhhdmUgbG9jYWwgY2hhbmdlcyAqL1xuICAgICAgICB0aGlzLm11dGF0ZWRLZXlzID0gX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCksIHRoaXMuX2EgPSBfX1BSSVZBVEVfbmV3UXVlcnlDb21wYXJhdG9yKGUpLCBcbiAgICAgICAgdGhpcy5hYSA9IG5ldyBEb2N1bWVudFNldCh0aGlzLl9hKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIHNldCBvZiByZW1vdGUgZG9jdW1lbnRzIHRoYXQgdGhlIHNlcnZlciBoYXMgdG9sZCB1cyBiZWxvbmdzIHRvIHRoZSB0YXJnZXQgYXNzb2NpYXRlZCB3aXRoXG4gICAgICogdGhpcyB2aWV3LlxuICAgICAqLyAgICBnZXQgdWEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlhO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJdGVyYXRlcyBvdmVyIGEgc2V0IG9mIGRvYyBjaGFuZ2VzLCBhcHBsaWVzIHRoZSBxdWVyeSBsaW1pdCwgYW5kIGNvbXB1dGVzXG4gICAgICogd2hhdCB0aGUgbmV3IHJlc3VsdHMgc2hvdWxkIGJlLCB3aGF0IHRoZSBjaGFuZ2VzIHdlcmUsIGFuZCB3aGV0aGVyIHdlIG1heVxuICAgICAqIG5lZWQgdG8gZ28gYmFjayB0byB0aGUgbG9jYWwgY2FjaGUgZm9yIG1vcmUgcmVzdWx0cy4gRG9lcyBub3QgbWFrZSBhbnlcbiAgICAgKiBjaGFuZ2VzIHRvIHRoZSB2aWV3LlxuICAgICAqIEBwYXJhbSBkb2NDaGFuZ2VzIC0gVGhlIGRvYyBjaGFuZ2VzIHRvIGFwcGx5IHRvIHRoaXMgdmlldy5cbiAgICAgKiBAcGFyYW0gcHJldmlvdXNDaGFuZ2VzIC0gSWYgdGhpcyBpcyBiZWluZyBjYWxsZWQgd2l0aCBhIHJlZmlsbCwgdGhlbiBzdGFydFxuICAgICAqICAgICAgICB3aXRoIHRoaXMgc2V0IG9mIGRvY3MgYW5kIGNoYW5nZXMgaW5zdGVhZCBvZiB0aGUgY3VycmVudCB2aWV3LlxuICAgICAqIEByZXR1cm5zIGEgbmV3IHNldCBvZiBkb2NzLCBjaGFuZ2VzLCBhbmQgcmVmaWxsIGZsYWcuXG4gICAgICovICAgIGNhKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHQgPyB0LmxhIDogbmV3IF9fUFJJVkFURV9Eb2N1bWVudENoYW5nZVNldCwgciA9IHQgPyB0LmFhIDogdGhpcy5hYTtcbiAgICAgICAgbGV0IGkgPSB0ID8gdC5tdXRhdGVkS2V5cyA6IHRoaXMubXV0YXRlZEtleXMsIHMgPSByLCBvID0gITE7XG4gICAgICAgIC8vIFRyYWNrIHRoZSBsYXN0IGRvYyBpbiBhIChmdWxsKSBsaW1pdC4gVGhpcyBpcyBuZWNlc3NhcnksIGJlY2F1c2Ugc29tZVxuICAgICAgICAvLyB1cGRhdGUgKGEgZGVsZXRlLCBvciBhbiB1cGRhdGUgbW92aW5nIGEgZG9jIHBhc3QgdGhlIG9sZCBsaW1pdCkgbWlnaHRcbiAgICAgICAgLy8gbWVhbiB0aGVyZSBpcyBzb21lIG90aGVyIGRvY3VtZW50IGluIHRoZSBsb2NhbCBjYWNoZSB0aGF0IGVpdGhlciBzaG91bGRcbiAgICAgICAgLy8gY29tZSAoMSkgYmV0d2VlbiB0aGUgb2xkIGxhc3QgbGltaXQgZG9jIGFuZCB0aGUgbmV3IGxhc3QgZG9jdW1lbnQsIGluIHRoZVxuICAgICAgICAvLyBjYXNlIG9mIHVwZGF0ZXMsIG9yICgyKSBhZnRlciB0aGUgbmV3IGxhc3QgZG9jdW1lbnQsIGluIHRoZSBjYXNlIG9mXG4gICAgICAgIC8vIGRlbGV0ZXMuIFNvIHdlIGtlZXAgdGhpcyBkb2MgYXQgdGhlIG9sZCBsaW1pdCB0byBjb21wYXJlIHRoZSB1cGRhdGVzIHRvLlxuICAgICAgICAvLyBOb3RlIHRoYXQgdGhpcyBzaG91bGQgbmV2ZXIgZ2V0IHVzZWQgaW4gYSByZWZpbGwgKHdoZW4gcHJldmlvdXNDaGFuZ2VzIGlzXG4gICAgICAgIC8vIHNldCksIGJlY2F1c2UgdGhlcmUgd2lsbCBvbmx5IGJlIGFkZHMgLS0gbm8gZGVsZXRlcyBvciB1cGRhdGVzLlxuICAgICAgICBjb25zdCBfID0gXCJGXCIgLyogTGltaXRUeXBlLkZpcnN0ICovID09PSB0aGlzLnF1ZXJ5LmxpbWl0VHlwZSAmJiByLnNpemUgPT09IHRoaXMucXVlcnkubGltaXQgPyByLmxhc3QoKSA6IG51bGwsIGEgPSBcIkxcIiAvKiBMaW1pdFR5cGUuTGFzdCAqLyA9PT0gdGhpcy5xdWVyeS5saW1pdFR5cGUgJiYgci5zaXplID09PSB0aGlzLnF1ZXJ5LmxpbWl0ID8gci5maXJzdCgpIDogbnVsbDtcbiAgICAgICAgLy8gRHJvcCBkb2N1bWVudHMgb3V0IHRvIG1lZXQgbGltaXQvbGltaXRUb0xhc3QgcmVxdWlyZW1lbnQuXG4gICAgICAgIGlmIChlLmlub3JkZXJUcmF2ZXJzYWwoKChlLCB0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCB1ID0gci5nZXQoZSksIGMgPSBfX1BSSVZBVEVfcXVlcnlNYXRjaGVzKHRoaXMucXVlcnksIHQpID8gdCA6IG51bGwsIGwgPSAhIXUgJiYgdGhpcy5tdXRhdGVkS2V5cy5oYXModS5rZXkpLCBoID0gISFjICYmIChjLmhhc0xvY2FsTXV0YXRpb25zIHx8IFxuICAgICAgICAgICAgLy8gV2Ugb25seSBjb25zaWRlciBjb21taXR0ZWQgbXV0YXRpb25zIGZvciBkb2N1bWVudHMgdGhhdCB3ZXJlXG4gICAgICAgICAgICAvLyBtdXRhdGVkIGR1cmluZyB0aGUgbGlmZXRpbWUgb2YgdGhlIHZpZXcuXG4gICAgICAgICAgICB0aGlzLm11dGF0ZWRLZXlzLmhhcyhjLmtleSkgJiYgYy5oYXNDb21taXR0ZWRNdXRhdGlvbnMpO1xuICAgICAgICAgICAgbGV0IFAgPSAhMTtcbiAgICAgICAgICAgIC8vIENhbGN1bGF0ZSBjaGFuZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1ICYmIGMpIHtcbiAgICAgICAgICAgICAgICB1LmRhdGEuaXNFcXVhbChjLmRhdGEpID8gbCAhPT0gaCAmJiAobi50cmFjayh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IDMgLyogQ2hhbmdlVHlwZS5NZXRhZGF0YSAqLyAsXG4gICAgICAgICAgICAgICAgICAgIGRvYzogY1xuICAgICAgICAgICAgICAgIH0pLCBQID0gITApIDogdGhpcy5oYSh1LCBjKSB8fCAobi50cmFjayh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IDIgLyogQ2hhbmdlVHlwZS5Nb2RpZmllZCAqLyAsXG4gICAgICAgICAgICAgICAgICAgIGRvYzogY1xuICAgICAgICAgICAgICAgIH0pLCBQID0gITAsIChfICYmIHRoaXMuX2EoYywgXykgPiAwIHx8IGEgJiYgdGhpcy5fYShjLCBhKSA8IDApICYmIChcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGRvYyBtb3ZlZCBmcm9tIGluc2lkZSB0aGUgbGltaXQgdG8gb3V0c2lkZSB0aGUgbGltaXQuXG4gICAgICAgICAgICAgICAgLy8gVGhhdCBtZWFucyB0aGVyZSBtYXkgYmUgc29tZSBvdGhlciBkb2MgaW4gdGhlIGxvY2FsIGNhY2hlXG4gICAgICAgICAgICAgICAgLy8gdGhhdCBzaG91bGQgYmUgaW5jbHVkZWQgaW5zdGVhZC5cbiAgICAgICAgICAgICAgICBvID0gITApKTtcbiAgICAgICAgICAgIH0gZWxzZSAhdSAmJiBjID8gKG4udHJhY2soe1xuICAgICAgICAgICAgICAgIHR5cGU6IDAgLyogQ2hhbmdlVHlwZS5BZGRlZCAqLyAsXG4gICAgICAgICAgICAgICAgZG9jOiBjXG4gICAgICAgICAgICB9KSwgUCA9ICEwKSA6IHUgJiYgIWMgJiYgKG4udHJhY2soe1xuICAgICAgICAgICAgICAgIHR5cGU6IDEgLyogQ2hhbmdlVHlwZS5SZW1vdmVkICovICxcbiAgICAgICAgICAgICAgICBkb2M6IHVcbiAgICAgICAgICAgIH0pLCBQID0gITAsIChfIHx8IGEpICYmIChcbiAgICAgICAgICAgIC8vIEEgZG9jIHdhcyByZW1vdmVkIGZyb20gYSBmdWxsIGxpbWl0IHF1ZXJ5LiBXZSdsbCBuZWVkIHRvXG4gICAgICAgICAgICAvLyByZXF1ZXJ5IGZyb20gdGhlIGxvY2FsIGNhY2hlIHRvIHNlZSBpZiB3ZSBrbm93IGFib3V0IHNvbWUgb3RoZXJcbiAgICAgICAgICAgIC8vIGRvYyB0aGF0IHNob3VsZCBiZSBpbiB0aGUgcmVzdWx0cy5cbiAgICAgICAgICAgIG8gPSAhMCkpO1xuICAgICAgICAgICAgUCAmJiAoYyA/IChzID0gcy5hZGQoYyksIGkgPSBoID8gaS5hZGQoZSkgOiBpLmRlbGV0ZShlKSkgOiAocyA9IHMuZGVsZXRlKGUpLCBpID0gaS5kZWxldGUoZSkpKTtcbiAgICAgICAgfSkpLCBudWxsICE9PSB0aGlzLnF1ZXJ5LmxpbWl0KSBmb3IgKDtzLnNpemUgPiB0aGlzLnF1ZXJ5LmxpbWl0OyApIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBcIkZcIiAvKiBMaW1pdFR5cGUuRmlyc3QgKi8gPT09IHRoaXMucXVlcnkubGltaXRUeXBlID8gcy5sYXN0KCkgOiBzLmZpcnN0KCk7XG4gICAgICAgICAgICBzID0gcy5kZWxldGUoZS5rZXkpLCBpID0gaS5kZWxldGUoZS5rZXkpLCBuLnRyYWNrKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAxIC8qIENoYW5nZVR5cGUuUmVtb3ZlZCAqLyAsXG4gICAgICAgICAgICAgICAgZG9jOiBlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYWE6IHMsXG4gICAgICAgICAgICBsYTogbixcbiAgICAgICAgICAgIFppOiBvLFxuICAgICAgICAgICAgbXV0YXRlZEtleXM6IGlcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaGEoZSwgdCkge1xuICAgICAgICAvLyBXZSBzdXBwcmVzcyB0aGUgaW5pdGlhbCBjaGFuZ2UgZXZlbnQgZm9yIGRvY3VtZW50cyB0aGF0IHdlcmUgbW9kaWZpZWQgYXNcbiAgICAgICAgLy8gcGFydCBvZiBhIHdyaXRlIGFja25vd2xlZGdtZW50IChlLmcuIHdoZW4gdGhlIHZhbHVlIG9mIGEgc2VydmVyIHRyYW5zZm9ybVxuICAgICAgICAvLyBpcyBhcHBsaWVkKSBhcyBXYXRjaCB3aWxsIHNlbmQgdXMgdGhlIHNhbWUgZG9jdW1lbnQgYWdhaW4uXG4gICAgICAgIC8vIEJ5IHN1cHByZXNzaW5nIHRoZSBldmVudCwgd2Ugb25seSByYWlzZSB0d28gdXNlciB2aXNpYmxlIGV2ZW50cyAob25lIHdpdGhcbiAgICAgICAgLy8gYGhhc1BlbmRpbmdXcml0ZXNgIGFuZCB0aGUgZmluYWwgc3RhdGUgb2YgdGhlIGRvY3VtZW50KSBpbnN0ZWFkIG9mIHRocmVlXG4gICAgICAgIC8vIChvbmUgd2l0aCBgaGFzUGVuZGluZ1dyaXRlc2AsIHRoZSBtb2RpZmllZCBkb2N1bWVudCB3aXRoXG4gICAgICAgIC8vIGBoYXNQZW5kaW5nV3JpdGVzYCBhbmQgdGhlIGZpbmFsIHN0YXRlIG9mIHRoZSBkb2N1bWVudCkuXG4gICAgICAgIHJldHVybiBlLmhhc0xvY2FsTXV0YXRpb25zICYmIHQuaGFzQ29tbWl0dGVkTXV0YXRpb25zICYmICF0Lmhhc0xvY2FsTXV0YXRpb25zO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSB2aWV3IHdpdGggdGhlIGdpdmVuIFZpZXdEb2N1bWVudENoYW5nZXMgYW5kIG9wdGlvbmFsbHkgdXBkYXRlc1xuICAgICAqIGxpbWJvIGRvY3MgYW5kIHN5bmMgc3RhdGUgZnJvbSB0aGUgcHJvdmlkZWQgdGFyZ2V0IGNoYW5nZS5cbiAgICAgKiBAcGFyYW0gZG9jQ2hhbmdlcyAtIFRoZSBzZXQgb2YgY2hhbmdlcyB0byBtYWtlIHRvIHRoZSB2aWV3J3MgZG9jcy5cbiAgICAgKiBAcGFyYW0gbGltYm9SZXNvbHV0aW9uRW5hYmxlZCAtIFdoZXRoZXIgdG8gdXBkYXRlIGxpbWJvIGRvY3VtZW50cyBiYXNlZCBvblxuICAgICAqICAgICAgICB0aGlzIGNoYW5nZS5cbiAgICAgKiBAcGFyYW0gdGFyZ2V0Q2hhbmdlIC0gQSB0YXJnZXQgY2hhbmdlIHRvIGFwcGx5IGZvciBjb21wdXRpbmcgbGltYm8gZG9jcyBhbmRcbiAgICAgKiAgICAgICAgc3luYyBzdGF0ZS5cbiAgICAgKiBAcGFyYW0gdGFyZ2V0SXNQZW5kaW5nUmVzZXQgLSBXaGV0aGVyIHRoZSB0YXJnZXQgaXMgcGVuZGluZyB0byByZXNldCBkdWUgdG9cbiAgICAgKiAgICAgICAgZXhpc3RlbmNlIGZpbHRlciBtaXNtYXRjaC4gSWYgbm90IGV4cGxpY2l0bHkgc3BlY2lmaWVkLCBpdCBpcyB0cmVhdGVkXG4gICAgICogICAgICAgIGVxdWl2YWxlbnRseSB0byBgZmFsc2VgLlxuICAgICAqIEByZXR1cm5zIEEgbmV3IFZpZXdDaGFuZ2Ugd2l0aCB0aGUgZ2l2ZW4gZG9jcywgY2hhbmdlcywgYW5kIHN5bmMgc3RhdGUuXG4gICAgICovXG4gICAgLy8gUE9SVElORyBOT1RFOiBUaGUgaU9TL0FuZHJvaWQgY2xpZW50cyBhbHdheXMgY29tcHV0ZSBsaW1ibyBkb2N1bWVudCBjaGFuZ2VzLlxuICAgIGFwcGx5Q2hhbmdlcyhlLCB0LCBuLCByKSB7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLmFhO1xuICAgICAgICB0aGlzLmFhID0gZS5hYSwgdGhpcy5tdXRhdGVkS2V5cyA9IGUubXV0YXRlZEtleXM7XG4gICAgICAgIC8vIFNvcnQgY2hhbmdlcyBiYXNlZCBvbiB0eXBlIGFuZCBxdWVyeSBjb21wYXJhdG9yXG4gICAgICAgIGNvbnN0IHMgPSBlLmxhLkxfKCk7XG4gICAgICAgIHMuc29ydCgoKGUsIHQpID0+IGZ1bmN0aW9uIF9fUFJJVkFURV9jb21wYXJlQ2hhbmdlVHlwZShlLCB0KSB7XG4gICAgICAgICAgICBjb25zdCBvcmRlciA9IGUgPT4ge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgY2FzZSAwIC8qIENoYW5nZVR5cGUuQWRkZWQgKi8gOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcblxuICAgICAgICAgICAgICAgICAgY2FzZSAyIC8qIENoYW5nZVR5cGUuTW9kaWZpZWQgKi8gOlxuICAgICAgICAgICAgICAgICAgY2FzZSAzIC8qIENoYW5nZVR5cGUuTWV0YWRhdGEgKi8gOlxuICAgICAgICAgICAgICAgICAgICAvLyBBIG1ldGFkYXRhIGNoYW5nZSBpcyBjb252ZXJ0ZWQgdG8gYSBtb2RpZmllZCBjaGFuZ2UgYXQgdGhlIHB1YmxpY1xuICAgICAgICAgICAgICAgICAgICAvLyBhcGkgbGF5ZXIuICBTaW5jZSB3ZSBzb3J0IGJ5IGRvY3VtZW50IGtleSBhbmQgdGhlbiBjaGFuZ2UgdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgLy8gbWV0YWRhdGEgYW5kIG1vZGlmaWVkIGNoYW5nZXMgbXVzdCBiZSBzb3J0ZWQgZXF1aXZhbGVudGx5LlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMjtcblxuICAgICAgICAgICAgICAgICAgY2FzZSAxIC8qIENoYW5nZVR5cGUuUmVtb3ZlZCAqLyA6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAwO1xuXG4gICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFpbCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gb3JkZXIoZSkgLSBvcmRlcih0KTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyAoZS50eXBlLCB0LnR5cGUpIHx8IHRoaXMuX2EoZS5kb2MsIHQuZG9jKSkpLCB0aGlzLlBhKG4pLCByID0gbnVsbCAhPSByICYmIHI7XG4gICAgICAgIGNvbnN0IG8gPSB0ICYmICFyID8gdGhpcy5JYSgpIDogW10sIF8gPSAwID09PSB0aGlzLm9hLnNpemUgJiYgdGhpcy5jdXJyZW50ICYmICFyID8gMSAvKiBTeW5jU3RhdGUuU3luY2VkICovIDogMCAvKiBTeW5jU3RhdGUuTG9jYWwgKi8gLCBhID0gXyAhPT0gdGhpcy5zYTtcbiAgICAgICAgLy8gV2UgYXJlIGF0IHN5bmNlZCBzdGF0ZSBpZiB0aGVyZSBpcyBubyBsaW1ibyBkb2NzIGFyZSB3YWl0aW5nIHRvIGJlIHJlc29sdmVkLCB2aWV3IGlzIGN1cnJlbnRcbiAgICAgICAgLy8gd2l0aCB0aGUgYmFja2VuZCwgYW5kIHRoZSBxdWVyeSBpcyBub3QgcGVuZGluZyB0byByZXNldCBkdWUgdG8gZXhpc3RlbmNlIGZpbHRlciBtaXNtYXRjaC5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zYSA9IF8sIDAgIT09IHMubGVuZ3RoIHx8IGEpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc25hcHNob3Q6IG5ldyBWaWV3U25hcHNob3QodGhpcy5xdWVyeSwgZS5hYSwgaSwgcywgZS5tdXRhdGVkS2V5cywgMCAvKiBTeW5jU3RhdGUuTG9jYWwgKi8gPT09IF8sIGEsIFxuICAgICAgICAgICAgICAgIC8qIGV4Y2x1ZGVzTWV0YWRhdGFDaGFuZ2VzPSAqLyAhMSwgISFuICYmIG4ucmVzdW1lVG9rZW4uYXBwcm94aW1hdGVCeXRlU2l6ZSgpID4gMCksXG4gICAgICAgICAgICAgICAgVGE6IG9cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgLy8gbm8gY2hhbmdlc1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgVGE6IG9cbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwbGllcyBhbiBPbmxpbmVTdGF0ZSBjaGFuZ2UgdG8gdGhlIHZpZXcsIHBvdGVudGlhbGx5IGdlbmVyYXRpbmcgYVxuICAgICAqIFZpZXdDaGFuZ2UgaWYgdGhlIHZpZXcncyBzeW5jU3RhdGUgY2hhbmdlcyBhcyBhIHJlc3VsdC5cbiAgICAgKi8gICAgUV8oZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50ICYmIFwiT2ZmbGluZVwiIC8qIE9ubGluZVN0YXRlLk9mZmxpbmUgKi8gPT09IGUgPyAoXG4gICAgICAgIC8vIElmIHdlJ3JlIG9mZmxpbmUsIHNldCBgY3VycmVudGAgdG8gZmFsc2UgYW5kIHRoZW4gY2FsbCBhcHBseUNoYW5nZXMoKVxuICAgICAgICAvLyB0byByZWZyZXNoIG91ciBzeW5jU3RhdGUgYW5kIGdlbmVyYXRlIGEgVmlld0NoYW5nZSBhcyBhcHByb3ByaWF0ZS4gV2VcbiAgICAgICAgLy8gYXJlIGd1YXJhbnRlZWQgdG8gZ2V0IGEgbmV3IFRhcmdldENoYW5nZSB0aGF0IHNldHMgYGN1cnJlbnRgIGJhY2sgdG9cbiAgICAgICAgLy8gdHJ1ZSBvbmNlIHRoZSBjbGllbnQgaXMgYmFjayBvbmxpbmUuXG4gICAgICAgIHRoaXMuY3VycmVudCA9ICExLCB0aGlzLmFwcGx5Q2hhbmdlcyh7XG4gICAgICAgICAgICBhYTogdGhpcy5hYSxcbiAgICAgICAgICAgIGxhOiBuZXcgX19QUklWQVRFX0RvY3VtZW50Q2hhbmdlU2V0LFxuICAgICAgICAgICAgbXV0YXRlZEtleXM6IHRoaXMubXV0YXRlZEtleXMsXG4gICAgICAgICAgICBaaTogITFcbiAgICAgICAgfSwgXG4gICAgICAgIC8qIGxpbWJvUmVzb2x1dGlvbkVuYWJsZWQ9ICovICExKSkgOiB7XG4gICAgICAgICAgICBUYTogW11cbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBkb2MgZm9yIHRoZSBnaXZlbiBrZXkgc2hvdWxkIGJlIGluIGxpbWJvLlxuICAgICAqLyAgICBFYShlKSB7XG4gICAgICAgIC8vIElmIHRoZSByZW1vdGUgZW5kIHNheXMgaXQncyBwYXJ0IG9mIHRoaXMgcXVlcnksIGl0J3Mgbm90IGluIGxpbWJvLlxuICAgICAgICByZXR1cm4gIXRoaXMuaWEuaGFzKGUpICYmIChcbiAgICAgICAgLy8gVGhlIGxvY2FsIHN0b3JlIGRvZXNuJ3QgdGhpbmsgaXQncyBhIHJlc3VsdCwgc28gaXQgc2hvdWxkbid0IGJlIGluIGxpbWJvLlxuICAgICAgICAhIXRoaXMuYWEuaGFzKGUpICYmICF0aGlzLmFhLmdldChlKS5oYXNMb2NhbE11dGF0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgc3luY2VkRG9jdW1lbnRzLCBjdXJyZW50LCBhbmQgbGltYm8gZG9jcyBiYXNlZCBvbiB0aGUgZ2l2ZW4gY2hhbmdlLlxuICAgICAqIFJldHVybnMgdGhlIGxpc3Qgb2YgY2hhbmdlcyB0byB3aGljaCBkb2NzIGFyZSBpbiBsaW1iby5cbiAgICAgKi8gICAgUGEoZSkge1xuICAgICAgICBlICYmIChlLmFkZGVkRG9jdW1lbnRzLmZvckVhY2goKGUgPT4gdGhpcy5pYSA9IHRoaXMuaWEuYWRkKGUpKSksIGUubW9kaWZpZWREb2N1bWVudHMuZm9yRWFjaCgoZSA9PiB7fSkpLCBcbiAgICAgICAgZS5yZW1vdmVkRG9jdW1lbnRzLmZvckVhY2goKGUgPT4gdGhpcy5pYSA9IHRoaXMuaWEuZGVsZXRlKGUpKSksIHRoaXMuY3VycmVudCA9IGUuY3VycmVudCk7XG4gICAgfVxuICAgIElhKCkge1xuICAgICAgICAvLyBXZSBjYW4gb25seSBkZXRlcm1pbmUgbGltYm8gZG9jdW1lbnRzIHdoZW4gd2UncmUgaW4tc3luYyB3aXRoIHRoZSBzZXJ2ZXIuXG4gICAgICAgIGlmICghdGhpcy5jdXJyZW50KSByZXR1cm4gW107XG4gICAgICAgIC8vIFRPRE8oa2xpbXQpOiBEbyB0aGlzIGluY3JlbWVudGFsbHkgc28gdGhhdCBpdCdzIG5vdCBxdWFkcmF0aWMgd2hlblxuICAgICAgICAvLyB1cGRhdGluZyBtYW55IGRvY3VtZW50cy5cbiAgICAgICAgICAgICAgICBjb25zdCBlID0gdGhpcy5vYTtcbiAgICAgICAgdGhpcy5vYSA9IF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpLCB0aGlzLmFhLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgdGhpcy5FYShlLmtleSkgJiYgKHRoaXMub2EgPSB0aGlzLm9hLmFkZChlLmtleSkpO1xuICAgICAgICB9KSk7XG4gICAgICAgIC8vIERpZmYgdGhlIG5ldyBsaW1ibyBkb2NzIHdpdGggdGhlIG9sZCBsaW1ibyBkb2NzLlxuICAgICAgICBjb25zdCB0ID0gW107XG4gICAgICAgIHJldHVybiBlLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgdGhpcy5vYS5oYXMoZSkgfHwgdC5wdXNoKG5ldyBfX1BSSVZBVEVfUmVtb3ZlZExpbWJvRG9jdW1lbnQoZSkpO1xuICAgICAgICB9KSksIHRoaXMub2EuZm9yRWFjaCgobiA9PiB7XG4gICAgICAgICAgICBlLmhhcyhuKSB8fCB0LnB1c2gobmV3IF9fUFJJVkFURV9BZGRlZExpbWJvRG9jdW1lbnQobikpO1xuICAgICAgICB9KSksIHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSB0aGUgaW4tbWVtb3J5IHN0YXRlIG9mIHRoZSBjdXJyZW50IHZpZXcgd2l0aCB0aGUgc3RhdGUgcmVhZCBmcm9tXG4gICAgICogcGVyc2lzdGVuY2UuXG4gICAgICpcbiAgICAgKiBXZSB1cGRhdGUgdGhlIHF1ZXJ5IHZpZXcgd2hlbmV2ZXIgYSBjbGllbnQncyBwcmltYXJ5IHN0YXR1cyBjaGFuZ2VzOlxuICAgICAqIC0gV2hlbiBhIGNsaWVudCB0cmFuc2l0aW9ucyBmcm9tIHByaW1hcnkgdG8gc2Vjb25kYXJ5LCBpdCBjYW4gbWlzc1xuICAgICAqICAgTG9jYWxTdG9yYWdlIHVwZGF0ZXMgYW5kIGl0cyBxdWVyeSB2aWV3cyBtYXkgdGVtcG9yYXJpbHkgbm90IGJlXG4gICAgICogICBzeW5jaHJvbml6ZWQgd2l0aCB0aGUgc3RhdGUgb24gZGlzay5cbiAgICAgKiAtIEZvciBzZWNvbmRhcnkgdG8gcHJpbWFyeSB0cmFuc2l0aW9ucywgdGhlIGNsaWVudCBuZWVkcyB0byB1cGRhdGUgdGhlIGxpc3RcbiAgICAgKiAgIG9mIGBzeW5jZWREb2N1bWVudHNgIHNpbmNlIHNlY29uZGFyeSBjbGllbnRzIHVwZGF0ZSB0aGVpciBxdWVyeSB2aWV3c1xuICAgICAqICAgYmFzZWQgcHVyZWx5IG9uIHN5bnRoZXNpemVkIFJlbW90ZUV2ZW50cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBxdWVyeVJlc3VsdC5kb2N1bWVudHMgLSBUaGUgZG9jdW1lbnRzIHRoYXQgbWF0Y2ggdGhlIHF1ZXJ5IGFjY29yZGluZ1xuICAgICAqIHRvIHRoZSBMb2NhbFN0b3JlLlxuICAgICAqIEBwYXJhbSBxdWVyeVJlc3VsdC5yZW1vdGVLZXlzIC0gVGhlIGtleXMgb2YgdGhlIGRvY3VtZW50cyB0aGF0IG1hdGNoIHRoZVxuICAgICAqIHF1ZXJ5IGFjY29yZGluZyB0byB0aGUgYmFja2VuZC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSBWaWV3Q2hhbmdlIHRoYXQgcmVzdWx0ZWQgZnJvbSB0aGlzIHN5bmNocm9uaXphdGlvbi5cbiAgICAgKi9cbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5LlxuICAgIGRhKGUpIHtcbiAgICAgICAgdGhpcy5pYSA9IGUubHMsIHRoaXMub2EgPSBfX1BSSVZBVEVfZG9jdW1lbnRLZXlTZXQoKTtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuY2EoZS5kb2N1bWVudHMpO1xuICAgICAgICByZXR1cm4gdGhpcy5hcHBseUNoYW5nZXModCwgLyogbGltYm9SZXNvbHV0aW9uRW5hYmxlZD0gKi8gITApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgdmlldyBzbmFwc2hvdCBhcyBpZiB0aGlzIHF1ZXJ5IHdhcyBqdXN0IGxpc3RlbmVkIHRvLiBDb250YWluc1xuICAgICAqIGEgZG9jdW1lbnQgYWRkIGZvciBldmVyeSBleGlzdGluZyBkb2N1bWVudCBhbmQgdGhlIGBmcm9tQ2FjaGVgIGFuZFxuICAgICAqIGBoYXNQZW5kaW5nV3JpdGVzYCBzdGF0dXMgb2YgdGhlIGFscmVhZHkgZXN0YWJsaXNoZWQgdmlldy5cbiAgICAgKi9cbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5LlxuICAgIEFhKCkge1xuICAgICAgICByZXR1cm4gVmlld1NuYXBzaG90LmZyb21Jbml0aWFsRG9jdW1lbnRzKHRoaXMucXVlcnksIHRoaXMuYWEsIHRoaXMubXV0YXRlZEtleXMsIDAgLyogU3luY1N0YXRlLkxvY2FsICovID09PSB0aGlzLnNhLCB0aGlzLmhhc0NhY2hlZFJlc3VsdHMpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBRdWVyeVZpZXcgY29udGFpbnMgYWxsIG9mIHRoZSBkYXRhIHRoYXQgU3luY0VuZ2luZSBuZWVkcyB0byBrZWVwIHRyYWNrIG9mIGZvclxuICogYSBwYXJ0aWN1bGFyIHF1ZXJ5LlxuICovXG5jbGFzcyBfX1BSSVZBVEVfUXVlcnlWaWV3IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgcXVlcnkgaXRzZWxmLlxuICAgICAqL1xuICAgIGUsIFxuICAgIC8qKlxuICAgICAqIFRoZSB0YXJnZXQgbnVtYmVyIGNyZWF0ZWQgYnkgdGhlIGNsaWVudCB0aGF0IGlzIHVzZWQgaW4gdGhlIHdhdGNoXG4gICAgICogc3RyZWFtIHRvIGlkZW50aWZ5IHRoaXMgcXVlcnkuXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogVGhlIHZpZXcgaXMgcmVzcG9uc2libGUgZm9yIGNvbXB1dGluZyB0aGUgZmluYWwgbWVyZ2VkIHRydXRoIG9mIHdoYXRcbiAgICAgKiBkb2NzIGFyZSBpbiB0aGUgcXVlcnkuIEl0IGdldHMgbm90aWZpZWQgb2YgbG9jYWwgYW5kIHJlbW90ZSBjaGFuZ2VzLFxuICAgICAqIGFuZCBhcHBsaWVzIHRoZSBxdWVyeSBmaWx0ZXJzIGFuZCBsaW1pdHMgdG8gZGV0ZXJtaW5lIHRoZSBtb3N0IGNvcnJlY3RcbiAgICAgKiBwb3NzaWJsZSByZXN1bHRzLlxuICAgICAqL1xuICAgIG4pIHtcbiAgICAgICAgdGhpcy5xdWVyeSA9IGUsIHRoaXMudGFyZ2V0SWQgPSB0LCB0aGlzLnZpZXcgPSBuO1xuICAgIH1cbn1cblxuLyoqIFRyYWNrcyBhIGxpbWJvIHJlc29sdXRpb24uICovIGNsYXNzIExpbWJvUmVzb2x1dGlvbiB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLmtleSA9IGUsIFxuICAgICAgICAvKipcbiAgICAgICAgICogU2V0IHRvIHRydWUgb25jZSB3ZSd2ZSByZWNlaXZlZCBhIGRvY3VtZW50LiBUaGlzIGlzIHVzZWQgaW5cbiAgICAgICAgICogZ2V0UmVtb3RlS2V5c0ZvclRhcmdldCgpIGFuZCB1bHRpbWF0ZWx5IHVzZWQgYnkgV2F0Y2hDaGFuZ2VBZ2dyZWdhdG9yIHRvXG4gICAgICAgICAqIGRlY2lkZSB3aGV0aGVyIGl0IG5lZWRzIHRvIG1hbnVmYWN0dXJlIGEgZGVsZXRlIGV2ZW50IGZvciB0aGUgdGFyZ2V0IG9uY2VcbiAgICAgICAgICogdGhlIHRhcmdldCBpcyBDVVJSRU5ULlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5SYSA9ICExO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBbiBpbXBsZW1lbnRhdGlvbiBvZiBgU3luY0VuZ2luZWAgY29vcmRpbmF0aW5nIHdpdGggb3RoZXIgcGFydHMgb2YgU0RLLlxuICpcbiAqIFRoZSBwYXJ0cyBvZiBTeW5jRW5naW5lIHRoYXQgYWN0IGFzIGEgY2FsbGJhY2sgdG8gUmVtb3RlU3RvcmUgbmVlZCB0byBiZVxuICogcmVnaXN0ZXJlZCBpbmRpdmlkdWFsbHkuIFRoaXMgaXMgZG9uZSBpbiBgc3luY0VuZ2luZVdyaXRlKClgIGFuZFxuICogYHN5bmNFbmdpbmVMaXN0ZW4oKWAgKGFzIHdlbGwgYXMgYGFwcGx5UHJpbWFyeVN0YXRlKClgKSBhcyB0aGVzZSBtZXRob2RzXG4gKiBzZXJ2ZSBhcyBlbnRyeSBwb2ludHMgdG8gUmVtb3RlU3RvcmUncyBmdW5jdGlvbmFsaXR5LlxuICpcbiAqIE5vdGU6IHNvbWUgZmllbGQgZGVmaW5lZCBpbiB0aGlzIGNsYXNzIG1pZ2h0IGhhdmUgcHVibGljIGFjY2VzcyBsZXZlbCwgYnV0XG4gKiB0aGUgY2xhc3MgaXMgbm90IGV4cG9ydGVkIHNvIHRoZXkgYXJlIG9ubHkgYWNjZXNzaWJsZSBmcm9tIHRoaXMgbW9kdWxlLlxuICogVGhpcyBpcyB1c2VmdWwgdG8gaW1wbGVtZW50IG9wdGlvbmFsIGZlYXR1cmVzIChsaWtlIGJ1bmRsZXMpIGluIGZyZWVcbiAqIGZ1bmN0aW9ucywgc3VjaCB0aGF0IHRoZXkgYXJlIHRyZWUtc2hha2VhYmxlLlxuICovIGNsYXNzIF9fUFJJVkFURV9TeW5jRW5naW5lSW1wbCB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbiwgXG4gICAgLy8gUE9SVElORyBOT1RFOiBNYW5hZ2VzIHN0YXRlIHN5bmNocm9uaXphdGlvbiBpbiBtdWx0aS10YWIgZW52aXJvbm1lbnRzLlxuICAgIHIsIGksIHMpIHtcbiAgICAgICAgdGhpcy5sb2NhbFN0b3JlID0gZSwgdGhpcy5yZW1vdGVTdG9yZSA9IHQsIHRoaXMuZXZlbnRNYW5hZ2VyID0gbiwgdGhpcy5zaGFyZWRDbGllbnRTdGF0ZSA9IHIsIFxuICAgICAgICB0aGlzLmN1cnJlbnRVc2VyID0gaSwgdGhpcy5tYXhDb25jdXJyZW50TGltYm9SZXNvbHV0aW9ucyA9IHMsIHRoaXMuVmEgPSB7fSwgdGhpcy5tYSA9IG5ldyBPYmplY3RNYXAoKGUgPT4gX19QUklWQVRFX2Nhbm9uaWZ5UXVlcnkoZSkpLCBfX1BSSVZBVEVfcXVlcnlFcXVhbHMpLCBcbiAgICAgICAgdGhpcy5mYSA9IG5ldyBNYXAsIFxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGtleXMgb2YgZG9jdW1lbnRzIHRoYXQgYXJlIGluIGxpbWJvIGZvciB3aGljaCB3ZSBoYXZlbid0IHlldCBzdGFydGVkIGFcbiAgICAgICAgICogbGltYm8gcmVzb2x1dGlvbiBxdWVyeS4gVGhlIHN0cmluZ3MgaW4gdGhpcyBzZXQgYXJlIHRoZSByZXN1bHQgb2YgY2FsbGluZ1xuICAgICAgICAgKiBga2V5LnBhdGguY2Fub25pY2FsU3RyaW5nKClgIHdoZXJlIGBrZXlgIGlzIGEgYERvY3VtZW50S2V5YCBvYmplY3QuXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoZSBgU2V0YCB0eXBlIHdhcyBjaG9zZW4gYmVjYXVzZSBpdCBwcm92aWRlcyBlZmZpY2llbnQgbG9va3VwIGFuZCByZW1vdmFsXG4gICAgICAgICAqIG9mIGFyYml0cmFyeSBlbGVtZW50cyBhbmQgaXQgYWxzbyBtYWludGFpbnMgaW5zZXJ0aW9uIG9yZGVyLCBwcm92aWRpbmcgdGhlXG4gICAgICAgICAqIGRlc2lyZWQgcXVldWUtbGlrZSBGSUZPIHNlbWFudGljcy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZ2EgPSBuZXcgU2V0LCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEtlZXBzIHRyYWNrIG9mIHRoZSB0YXJnZXQgSUQgZm9yIGVhY2ggZG9jdW1lbnQgdGhhdCBpcyBpbiBsaW1ibyB3aXRoIGFuXG4gICAgICAgICAqIGFjdGl2ZSB0YXJnZXQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnBhID0gbmV3IFNvcnRlZE1hcChEb2N1bWVudEtleS5jb21wYXJhdG9yKSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBLZWVwcyB0cmFjayBvZiB0aGUgaW5mb3JtYXRpb24gYWJvdXQgYW4gYWN0aXZlIGxpbWJvIHJlc29sdXRpb24gZm9yIGVhY2hcbiAgICAgICAgICogYWN0aXZlIHRhcmdldCBJRCB0aGF0IHdhcyBzdGFydGVkIGZvciB0aGUgcHVycG9zZSBvZiBsaW1ibyByZXNvbHV0aW9uLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy55YSA9IG5ldyBNYXAsIHRoaXMud2EgPSBuZXcgX19QUklWQVRFX1JlZmVyZW5jZVNldCwgXG4gICAgICAgIC8qKiBTdG9yZXMgdXNlciBjb21wbGV0aW9uIGhhbmRsZXJzLCBpbmRleGVkIGJ5IFVzZXIgYW5kIEJhdGNoSWQuICovXG4gICAgICAgIHRoaXMuU2EgPSB7fSwgXG4gICAgICAgIC8qKiBTdG9yZXMgdXNlciBjYWxsYmFja3Mgd2FpdGluZyBmb3IgYWxsIHBlbmRpbmcgd3JpdGVzIHRvIGJlIGFja25vd2xlZGdlZC4gKi9cbiAgICAgICAgdGhpcy5iYSA9IG5ldyBNYXAsIHRoaXMuRGEgPSBfX1BSSVZBVEVfVGFyZ2V0SWRHZW5lcmF0b3IuTm4oKSwgdGhpcy5vbmxpbmVTdGF0ZSA9IFwiVW5rbm93blwiIC8qIE9ubGluZVN0YXRlLlVua25vd24gKi8gLCBcbiAgICAgICAgLy8gVGhlIHByaW1hcnkgc3RhdGUgaXMgc2V0IHRvIGB0cnVlYCBvciBgZmFsc2VgIGltbWVkaWF0ZWx5IGFmdGVyIEZpcmVzdG9yZVxuICAgICAgICAvLyBzdGFydHVwLiBJbiB0aGUgaW50ZXJpbSwgYSBjbGllbnQgc2hvdWxkIG9ubHkgYmUgY29uc2lkZXJlZCBwcmltYXJ5IGlmXG4gICAgICAgIC8vIGBpc1ByaW1hcnlgIGlzIHRydWUuXG4gICAgICAgIHRoaXMuQ2EgPSB2b2lkIDA7XG4gICAgfVxuICAgIGdldCBpc1ByaW1hcnlDbGllbnQoKSB7XG4gICAgICAgIHJldHVybiAhMCA9PT0gdGhpcy5DYTtcbiAgICB9XG59XG5cbi8qKlxuICogSW5pdGlhdGVzIHRoZSBuZXcgbGlzdGVuLCByZXNvbHZlcyBwcm9taXNlIHdoZW4gbGlzdGVuIGVucXVldWVkIHRvIHRoZVxuICogc2VydmVyLiBBbGwgdGhlIHN1YnNlcXVlbnQgdmlldyBzbmFwc2hvdHMgb3IgZXJyb3JzIGFyZSBzZW50IHRvIHRoZVxuICogc3Vic2NyaWJlZCBoYW5kbGVycy4gUmV0dXJucyB0aGUgaW5pdGlhbCBzbmFwc2hvdC5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX3N5bmNFbmdpbmVMaXN0ZW4oZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZW5zdXJlV2F0Y2hDYWxsYmFja3MoZSk7XG4gICAgbGV0IHIsIGk7XG4gICAgY29uc3QgcyA9IG4ubWEuZ2V0KHQpO1xuICAgIGlmIChzKSBcbiAgICAvLyBQT1JUSU5HIE5PVEU6IFdpdGggTXVsdGktVGFiIFdlYiwgaXQgaXMgcG9zc2libGUgdGhhdCBhIHF1ZXJ5IHZpZXdcbiAgICAvLyBhbHJlYWR5IGV4aXN0cyB3aGVuIEV2ZW50TWFuYWdlciBjYWxscyB1cyBmb3IgdGhlIGZpcnN0IHRpbWUuIFRoaXNcbiAgICAvLyBoYXBwZW5zIHdoZW4gdGhlIHByaW1hcnkgdGFiIGlzIGFscmVhZHkgbGlzdGVuaW5nIHRvIHRoaXMgcXVlcnkgb25cbiAgICAvLyBiZWhhbGYgb2YgYW5vdGhlciB0YWIgYW5kIHRoZSB1c2VyIG9mIHRoZSBwcmltYXJ5IGFsc28gc3RhcnRzIGxpc3RlbmluZ1xuICAgIC8vIHRvIHRoZSBxdWVyeS4gRXZlbnRNYW5hZ2VyIHdpbGwgbm90IGhhdmUgYW4gYXNzaWduZWQgdGFyZ2V0IElEIGluIHRoaXNcbiAgICAvLyBjYXNlIGFuZCBjYWxscyBgbGlzdGVuYCB0byBvYnRhaW4gdGhpcyBJRC5cbiAgICByID0gcy50YXJnZXRJZCwgbi5zaGFyZWRDbGllbnRTdGF0ZS5hZGRMb2NhbFF1ZXJ5VGFyZ2V0KHIpLCBpID0gcy52aWV3LkFhKCk7IGVsc2Uge1xuICAgICAgICBjb25zdCBlID0gYXdhaXQgX19QUklWQVRFX2xvY2FsU3RvcmVBbGxvY2F0ZVRhcmdldChuLmxvY2FsU3RvcmUsIF9fUFJJVkFURV9xdWVyeVRvVGFyZ2V0KHQpKSwgcyA9IG4uc2hhcmVkQ2xpZW50U3RhdGUuYWRkTG9jYWxRdWVyeVRhcmdldChlLnRhcmdldElkKTtcbiAgICAgICAgciA9IGUudGFyZ2V0SWQsIGkgPSBhd2FpdCBfX1BSSVZBVEVfaW5pdGlhbGl6ZVZpZXdBbmRDb21wdXRlU25hcHNob3QobiwgdCwgciwgXCJjdXJyZW50XCIgPT09IHMsIGUucmVzdW1lVG9rZW4pLCBcbiAgICAgICAgbi5pc1ByaW1hcnlDbGllbnQgJiYgX19QUklWQVRFX3JlbW90ZVN0b3JlTGlzdGVuKG4ucmVtb3RlU3RvcmUsIGUpO1xuICAgIH1cbiAgICByZXR1cm4gaTtcbn1cblxuLyoqXG4gKiBSZWdpc3RlcnMgYSB2aWV3IGZvciBhIHByZXZpb3VzbHkgdW5rbm93biBxdWVyeSBhbmQgY29tcHV0ZXMgaXRzIGluaXRpYWxcbiAqIHNuYXBzaG90LlxuICovIGFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9pbml0aWFsaXplVmlld0FuZENvbXB1dGVTbmFwc2hvdChlLCB0LCBuLCByLCBpKSB7XG4gICAgLy8gUE9SVElORyBOT1RFOiBPbiBXZWIgb25seSwgd2UgaW5qZWN0IHRoZSBjb2RlIHRoYXQgcmVnaXN0ZXJzIG5ldyBMaW1ib1xuICAgIC8vIHRhcmdldHMgYmFzZWQgb24gdmlldyBjaGFuZ2VzLiBUaGlzIGFsbG93cyB1cyB0byBvbmx5IGRlcGVuZCBvbiBMaW1ib1xuICAgIC8vIGNoYW5nZXMgd2hlbiB1c2VyIGNvZGUgaW5jbHVkZXMgcXVlcmllcy5cbiAgICBlLnZhID0gKHQsIG4sIHIpID0+IGFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9hcHBseURvY0NoYW5nZXMoZSwgdCwgbiwgcikge1xuICAgICAgICBsZXQgaSA9IHQudmlldy5jYShuKTtcbiAgICAgICAgaS5aaSAmJiAoXG4gICAgICAgIC8vIFRoZSBxdWVyeSBoYXMgYSBsaW1pdCBhbmQgc29tZSBkb2NzIHdlcmUgcmVtb3ZlZCwgc28gd2UgbmVlZFxuICAgICAgICAvLyB0byByZS1ydW4gdGhlIHF1ZXJ5IGFnYWluc3QgdGhlIGxvY2FsIHN0b3JlIHRvIG1ha2Ugc3VyZSB3ZVxuICAgICAgICAvLyBkaWRuJ3QgbG9zZSBhbnkgZ29vZCBkb2NzIHRoYXQgaGFkIGJlZW4gcGFzdCB0aGUgbGltaXQuXG4gICAgICAgIGkgPSBhd2FpdCBfX1BSSVZBVEVfbG9jYWxTdG9yZUV4ZWN1dGVRdWVyeShlLmxvY2FsU3RvcmUsIHQucXVlcnksIFxuICAgICAgICAvKiB1c2VQcmV2aW91c1Jlc3VsdHM9ICovICExKS50aGVuKCgoe2RvY3VtZW50czogZX0pID0+IHQudmlldy5jYShlLCBpKSkpKTtcbiAgICAgICAgY29uc3QgcyA9IHIgJiYgci50YXJnZXRDaGFuZ2VzLmdldCh0LnRhcmdldElkKSwgbyA9IHIgJiYgbnVsbCAhPSByLnRhcmdldE1pc21hdGNoZXMuZ2V0KHQudGFyZ2V0SWQpLCBfID0gdC52aWV3LmFwcGx5Q2hhbmdlcyhpLCBcbiAgICAgICAgLyogbGltYm9SZXNvbHV0aW9uRW5hYmxlZD0gKi8gZS5pc1ByaW1hcnlDbGllbnQsIHMsIG8pO1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3VwZGF0ZVRyYWNrZWRMaW1ib3MoZSwgdC50YXJnZXRJZCwgXy5UYSksIF8uc25hcHNob3Q7XG4gICAgfShlLCB0LCBuLCByKTtcbiAgICBjb25zdCBzID0gYXdhaXQgX19QUklWQVRFX2xvY2FsU3RvcmVFeGVjdXRlUXVlcnkoZS5sb2NhbFN0b3JlLCB0LCBcbiAgICAvKiB1c2VQcmV2aW91c1Jlc3VsdHM9ICovICEwKSwgbyA9IG5ldyBfX1BSSVZBVEVfVmlldyh0LCBzLmxzKSwgXyA9IG8uY2Eocy5kb2N1bWVudHMpLCBhID0gVGFyZ2V0Q2hhbmdlLmNyZWF0ZVN5bnRoZXNpemVkVGFyZ2V0Q2hhbmdlRm9yQ3VycmVudENoYW5nZShuLCByICYmIFwiT2ZmbGluZVwiIC8qIE9ubGluZVN0YXRlLk9mZmxpbmUgKi8gIT09IGUub25saW5lU3RhdGUsIGkpLCB1ID0gby5hcHBseUNoYW5nZXMoXywgXG4gICAgLyogbGltYm9SZXNvbHV0aW9uRW5hYmxlZD0gKi8gZS5pc1ByaW1hcnlDbGllbnQsIGEpO1xuICAgIF9fUFJJVkFURV91cGRhdGVUcmFja2VkTGltYm9zKGUsIG4sIHUuVGEpO1xuICAgIGNvbnN0IGMgPSBuZXcgX19QUklWQVRFX1F1ZXJ5Vmlldyh0LCBuLCBvKTtcbiAgICByZXR1cm4gZS5tYS5zZXQodCwgYyksIGUuZmEuaGFzKG4pID8gZS5mYS5nZXQobikucHVzaCh0KSA6IGUuZmEuc2V0KG4sIFsgdCBdKSwgdS5zbmFwc2hvdDtcbn1cblxuLyoqIFN0b3BzIGxpc3RlbmluZyB0byB0aGUgcXVlcnkuICovIGFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9zeW5jRW5naW5lVW5saXN0ZW4oZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpLCByID0gbi5tYS5nZXQodCksIGkgPSBuLmZhLmdldChyLnRhcmdldElkKTtcbiAgICBpZiAoaS5sZW5ndGggPiAxKSByZXR1cm4gbi5mYS5zZXQoci50YXJnZXRJZCwgaS5maWx0ZXIoKGUgPT4gIV9fUFJJVkFURV9xdWVyeUVxdWFscyhlLCB0KSkpKSwgXG4gICAgdm9pZCBuLm1hLmRlbGV0ZSh0KTtcbiAgICAvLyBObyBvdGhlciBxdWVyaWVzIGFyZSBtYXBwZWQgdG8gdGhlIHRhcmdldCwgY2xlYW4gdXAgdGhlIHF1ZXJ5IGFuZCB0aGUgdGFyZ2V0LlxuICAgICAgICBpZiAobi5pc1ByaW1hcnlDbGllbnQpIHtcbiAgICAgICAgLy8gV2UgbmVlZCB0byByZW1vdmUgdGhlIGxvY2FsIHF1ZXJ5IHRhcmdldCBmaXJzdCB0byBhbGxvdyB1cyB0byB2ZXJpZnlcbiAgICAgICAgLy8gd2hldGhlciBhbnkgb3RoZXIgY2xpZW50IGlzIHN0aWxsIGludGVyZXN0ZWQgaW4gdGhpcyB0YXJnZXQuXG4gICAgICAgIG4uc2hhcmVkQ2xpZW50U3RhdGUucmVtb3ZlTG9jYWxRdWVyeVRhcmdldChyLnRhcmdldElkKTtcbiAgICAgICAgbi5zaGFyZWRDbGllbnRTdGF0ZS5pc0FjdGl2ZVF1ZXJ5VGFyZ2V0KHIudGFyZ2V0SWQpIHx8IGF3YWl0IF9fUFJJVkFURV9sb2NhbFN0b3JlUmVsZWFzZVRhcmdldChuLmxvY2FsU3RvcmUsIHIudGFyZ2V0SWQsIFxuICAgICAgICAvKmtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhPSovICExKS50aGVuKCgoKSA9PiB7XG4gICAgICAgICAgICBuLnNoYXJlZENsaWVudFN0YXRlLmNsZWFyUXVlcnlTdGF0ZShyLnRhcmdldElkKSwgX19QUklWQVRFX3JlbW90ZVN0b3JlVW5saXN0ZW4obi5yZW1vdGVTdG9yZSwgci50YXJnZXRJZCksIFxuICAgICAgICAgICAgX19QUklWQVRFX3JlbW92ZUFuZENsZWFudXBUYXJnZXQobiwgci50YXJnZXRJZCk7XG4gICAgICAgIH0pKS5jYXRjaChfX1BSSVZBVEVfaWdub3JlSWZQcmltYXJ5TGVhc2VMb3NzKTtcbiAgICB9IGVsc2UgX19QUklWQVRFX3JlbW92ZUFuZENsZWFudXBUYXJnZXQobiwgci50YXJnZXRJZCksIGF3YWl0IF9fUFJJVkFURV9sb2NhbFN0b3JlUmVsZWFzZVRhcmdldChuLmxvY2FsU3RvcmUsIHIudGFyZ2V0SWQsIFxuICAgIC8qa2VlcFBlcnNpc3RlZFRhcmdldERhdGE9Ki8gITApO1xufVxuXG4vKipcbiAqIEluaXRpYXRlcyB0aGUgd3JpdGUgb2YgbG9jYWwgbXV0YXRpb24gYmF0Y2ggd2hpY2ggaW52b2x2ZXMgYWRkaW5nIHRoZVxuICogd3JpdGVzIHRvIHRoZSBtdXRhdGlvbiBxdWV1ZSwgbm90aWZ5aW5nIHRoZSByZW1vdGUgc3RvcmUgYWJvdXQgbmV3XG4gKiBtdXRhdGlvbnMgYW5kIHJhaXNpbmcgZXZlbnRzIGZvciBhbnkgY2hhbmdlcyB0aGlzIHdyaXRlIGNhdXNlZC5cbiAqXG4gKiBUaGUgcHJvbWlzZSByZXR1cm5lZCBieSB0aGlzIGNhbGwgaXMgcmVzb2x2ZWQgd2hlbiB0aGUgYWJvdmUgc3RlcHNcbiAqIGhhdmUgY29tcGxldGVkLCAqbm90KiB3aGVuIHRoZSB3cml0ZSB3YXMgYWNrZWQgYnkgdGhlIGJhY2tlbmQuIFRoZVxuICogdXNlckNhbGxiYWNrIGlzIHJlc29sdmVkIG9uY2UgdGhlIHdyaXRlIHdhcyBhY2tlZC9yZWplY3RlZCBieSB0aGVcbiAqIGJhY2tlbmQgKG9yIGZhaWxlZCBsb2NhbGx5IGZvciBhbnkgb3RoZXIgcmVhc29uKS5cbiAqLyBhc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfc3luY0VuZ2luZVdyaXRlKGUsIHQsIG4pIHtcbiAgICBjb25zdCByID0gX19QUklWQVRFX3N5bmNFbmdpbmVFbnN1cmVXcml0ZUNhbGxiYWNrcyhlKTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBlID0gYXdhaXQgZnVuY3Rpb24gX19QUklWQVRFX2xvY2FsU3RvcmVXcml0ZUxvY2FsbHkoZSwgdCkge1xuICAgICAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSksIHIgPSBUaW1lc3RhbXAubm93KCksIGkgPSB0LnJlZHVjZSgoKGUsIHQpID0+IGUuYWRkKHQua2V5KSksIF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpKTtcbiAgICAgICAgICAgIGxldCBzLCBvO1xuICAgICAgICAgICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJMb2NhbGx5IHdyaXRlIG11dGF0aW9uc1wiLCBcInJlYWR3cml0ZVwiLCAoZSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gRmlndXJlIG91dCB3aGljaCBrZXlzIGRvIG5vdCBoYXZlIGEgcmVtb3RlIHZlcnNpb24gaW4gdGhlIGNhY2hlLCB0aGlzXG4gICAgICAgICAgICAgICAgLy8gaXMgbmVlZGVkIHRvIGNyZWF0ZSB0aGUgcmlnaHQgb3ZlcmxheSBtdXRhdGlvbjogaWYgbm8gcmVtb3RlIHZlcnNpb25cbiAgICAgICAgICAgICAgICAvLyBwcmVzZW50cywgd2UgZG8gbm90IG5lZWQgdG8gY3JlYXRlIG92ZXJsYXlzIGFzIHBhdGNoIG11dGF0aW9ucy5cbiAgICAgICAgICAgICAgICAvLyBUT0RPKE92ZXJsYXkpOiBJcyB0aGVyZSBhIGJldHRlciB3YXkgdG8gZGV0ZXJtaW5lIHRoaXM/IFVzaW5nIHRoZVxuICAgICAgICAgICAgICAgIC8vICBkb2N1bWVudCB2ZXJzaW9uIGRvZXMgbm90IHdvcmsgYmVjYXVzZSBsb2NhbCBtdXRhdGlvbnMgc2V0IHRoZW0gYmFja1xuICAgICAgICAgICAgICAgIC8vICB0byAwLlxuICAgICAgICAgICAgICAgIGxldCBfID0gX19QUklWQVRFX211dGFibGVEb2N1bWVudE1hcCgpLCBhID0gX19QUklWQVRFX2RvY3VtZW50S2V5U2V0KCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG4uc3MuZ2V0RW50cmllcyhlLCBpKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgXyA9IGUsIF8uZm9yRWFjaCgoKGUsIHQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHQuaXNWYWxpZERvY3VtZW50KCkgfHwgKGEgPSBhLmFkZChlKSk7XG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB9KSkubmV4dCgoKCkgPT4gbi5sb2NhbERvY3VtZW50cy5nZXRPdmVybGF5ZWREb2N1bWVudHMoZSwgXykpKS5uZXh0KChpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcyA9IGk7XG4gICAgICAgICAgICAgICAgICAgIC8vIEZvciBub24taWRlbXBvdGVudCBtdXRhdGlvbnMgKHN1Y2ggYXMgYEZpZWxkVmFsdWUuaW5jcmVtZW50KClgKSxcbiAgICAgICAgICAgICAgICAgICAgLy8gd2UgcmVjb3JkIHRoZSBiYXNlIHN0YXRlIGluIGEgc2VwYXJhdGUgcGF0Y2ggbXV0YXRpb24uIFRoaXMgaXNcbiAgICAgICAgICAgICAgICAgICAgLy8gbGF0ZXIgdXNlZCB0byBndWFyYW50ZWUgY29uc2lzdGVudCB2YWx1ZXMgYW5kIHByZXZlbnRzIGZsaWNrZXJcbiAgICAgICAgICAgICAgICAgICAgLy8gZXZlbiBpZiB0aGUgYmFja2VuZCBzZW5kcyB1cyBhbiB1cGRhdGUgdGhhdCBhbHJlYWR5IGluY2x1ZGVzIG91clxuICAgICAgICAgICAgICAgICAgICAvLyB0cmFuc2Zvcm0uXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG8gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBlIG9mIHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfbXV0YXRpb25FeHRyYWN0QmFzZVZhbHVlKGUsIHMuZ2V0KGUua2V5KS5vdmVybGF5ZWREb2N1bWVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBudWxsICE9IHQgJiYgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBOT1RFOiBUaGUgYmFzZSBzdGF0ZSBzaG91bGQgb25seSBiZSBhcHBsaWVkIGlmIHRoZXJlJ3Mgc29tZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXhpc3RpbmcgZG9jdW1lbnQgdG8gb3ZlcnJpZGUsIHNvIHVzZSBhIFByZWNvbmRpdGlvbiBvZlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXhpc3RzPXRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgIG8ucHVzaChuZXcgX19QUklWQVRFX1BhdGNoTXV0YXRpb24oZS5rZXksIHQsIF9fUFJJVkFURV9leHRyYWN0RmllbGRNYXNrKHQudmFsdWUubWFwVmFsdWUpLCBQcmVjb25kaXRpb24uZXhpc3RzKCEwKSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuLm11dGF0aW9uUXVldWUuYWRkTXV0YXRpb25CYXRjaChlLCByLCBvLCB0KTtcbiAgICAgICAgICAgICAgICB9KSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIG8gPSB0O1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByID0gdC5hcHBseVRvTG9jYWxEb2N1bWVudFNldChzLCBhKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4uZG9jdW1lbnRPdmVybGF5Q2FjaGUuc2F2ZU92ZXJsYXlzKGUsIHQuYmF0Y2hJZCwgcik7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfSkpLnRoZW4oKCgpID0+ICh7XG4gICAgICAgICAgICAgICAgYmF0Y2hJZDogby5iYXRjaElkLFxuICAgICAgICAgICAgICAgIGNoYW5nZXM6IF9fUFJJVkFURV9jb252ZXJ0T3ZlcmxheWVkRG9jdW1lbnRNYXBUb0RvY3VtZW50TWFwKHMpXG4gICAgICAgICAgICB9KSkpO1xuICAgICAgICB9KHIubG9jYWxTdG9yZSwgdCk7XG4gICAgICAgIHIuc2hhcmVkQ2xpZW50U3RhdGUuYWRkUGVuZGluZ011dGF0aW9uKGUuYmF0Y2hJZCksIGZ1bmN0aW9uIF9fUFJJVkFURV9hZGRNdXRhdGlvbkNhbGxiYWNrKGUsIHQsIG4pIHtcbiAgICAgICAgICAgIGxldCByID0gZS5TYVtlLmN1cnJlbnRVc2VyLnRvS2V5KCldO1xuICAgICAgICAgICAgciB8fCAociA9IG5ldyBTb3J0ZWRNYXAoX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IpKTtcbiAgICAgICAgICAgIHIgPSByLmluc2VydCh0LCBuKSwgZS5TYVtlLmN1cnJlbnRVc2VyLnRvS2V5KCldID0gcjtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIFJlc29sdmVzIG9yIHJlamVjdHMgdGhlIHVzZXIgY2FsbGJhY2sgZm9yIHRoZSBnaXZlbiBiYXRjaCBhbmQgdGhlbiBkaXNjYXJkc1xuICogaXQuXG4gKi8gKHIsIGUuYmF0Y2hJZCwgbiksIGF3YWl0IF9fUFJJVkFURV9zeW5jRW5naW5lRW1pdE5ld1NuYXBzQW5kTm90aWZ5TG9jYWxTdG9yZShyLCBlLmNoYW5nZXMpLCBcbiAgICAgICAgYXdhaXQgX19QUklWQVRFX2ZpbGxXcml0ZVBpcGVsaW5lKHIucmVtb3RlU3RvcmUpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gSWYgd2UgY2FuJ3QgcGVyc2lzdCB0aGUgbXV0YXRpb24sIHdlIHJlamVjdCB0aGUgdXNlciBjYWxsYmFjayBhbmRcbiAgICAgICAgLy8gZG9uJ3Qgc2VuZCB0aGUgbXV0YXRpb24uIFRoZSB1c2VyIGNhbiB0aGVuIHJldHJ5IHRoZSB3cml0ZS5cbiAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV93cmFwSW5Vc2VyRXJyb3JJZlJlY292ZXJhYmxlKGUsIFwiRmFpbGVkIHRvIHBlcnNpc3Qgd3JpdGVcIik7XG4gICAgICAgIG4ucmVqZWN0KHQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBcHBsaWVzIG9uZSByZW1vdGUgZXZlbnQgdG8gdGhlIHN5bmMgZW5naW5lLCBub3RpZnlpbmcgYW55IHZpZXdzIG9mIHRoZVxuICogY2hhbmdlcywgYW5kIHJlbGVhc2luZyBhbnkgcGVuZGluZyBtdXRhdGlvbiBiYXRjaGVzIHRoYXQgd291bGQgYmVjb21lXG4gKiB2aXNpYmxlIGJlY2F1c2Ugb2YgdGhlIHNuYXBzaG90IHZlcnNpb24gdGhlIHJlbW90ZSBldmVudCBjb250YWlucy5cbiAqLyBhc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfc3luY0VuZ2luZUFwcGx5UmVtb3RlRXZlbnQoZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGUgPSBhd2FpdCBfX1BSSVZBVEVfbG9jYWxTdG9yZUFwcGx5UmVtb3RlRXZlbnRUb0xvY2FsQ2FjaGUobi5sb2NhbFN0b3JlLCB0KTtcbiAgICAgICAgLy8gVXBkYXRlIGByZWNlaXZlZERvY3VtZW50YCBhcyBhcHByb3ByaWF0ZSBmb3IgYW55IGxpbWJvIHRhcmdldHMuXG4gICAgICAgICAgICAgICAgdC50YXJnZXRDaGFuZ2VzLmZvckVhY2goKChlLCB0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCByID0gbi55YS5nZXQodCk7XG4gICAgICAgICAgICByICYmIChcbiAgICAgICAgICAgIC8vIFNpbmNlIHRoaXMgaXMgYSBsaW1ibyByZXNvbHV0aW9uIGxvb2t1cCwgaXQncyBmb3IgYSBzaW5nbGUgZG9jdW1lbnRcbiAgICAgICAgICAgIC8vIGFuZCBpdCBjb3VsZCBiZSBhZGRlZCwgbW9kaWZpZWQsIG9yIHJlbW92ZWQsIGJ1dCBub3QgYSBjb21iaW5hdGlvbi5cbiAgICAgICAgICAgIF9fUFJJVkFURV9oYXJkQXNzZXJ0KGUuYWRkZWREb2N1bWVudHMuc2l6ZSArIGUubW9kaWZpZWREb2N1bWVudHMuc2l6ZSArIGUucmVtb3ZlZERvY3VtZW50cy5zaXplIDw9IDEpLCBcbiAgICAgICAgICAgIGUuYWRkZWREb2N1bWVudHMuc2l6ZSA+IDAgPyByLlJhID0gITAgOiBlLm1vZGlmaWVkRG9jdW1lbnRzLnNpemUgPiAwID8gX19QUklWQVRFX2hhcmRBc3NlcnQoci5SYSkgOiBlLnJlbW92ZWREb2N1bWVudHMuc2l6ZSA+IDAgJiYgKF9fUFJJVkFURV9oYXJkQXNzZXJ0KHIuUmEpLCBcbiAgICAgICAgICAgIHIuUmEgPSAhMSkpO1xuICAgICAgICB9KSksIGF3YWl0IF9fUFJJVkFURV9zeW5jRW5naW5lRW1pdE5ld1NuYXBzQW5kTm90aWZ5TG9jYWxTdG9yZShuLCBlLCB0KTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGF3YWl0IF9fUFJJVkFURV9pZ25vcmVJZlByaW1hcnlMZWFzZUxvc3MoZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEFwcGxpZXMgYW4gT25saW5lU3RhdGUgY2hhbmdlIHRvIHRoZSBzeW5jIGVuZ2luZSBhbmQgbm90aWZpZXMgYW55IHZpZXdzIG9mXG4gKiB0aGUgY2hhbmdlLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9zeW5jRW5naW5lQXBwbHlPbmxpbmVTdGF0ZUNoYW5nZShlLCB0LCBuKSB7XG4gICAgY29uc3QgciA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgLy8gSWYgd2UgYXJlIHRoZSBzZWNvbmRhcnkgY2xpZW50LCB3ZSBleHBsaWNpdGx5IGlnbm9yZSB0aGUgcmVtb3RlIHN0b3JlJ3NcbiAgICAvLyBvbmxpbmUgc3RhdGUgKHRoZSBsb2NhbCBjbGllbnQgbWF5IGdvIG9mZmxpbmUsIGV2ZW4gdGhvdWdoIHRoZSBwcmltYXJ5XG4gICAgLy8gdGFiIHJlbWFpbnMgb25saW5lKSBhbmQgb25seSBhcHBseSB0aGUgcHJpbWFyeSB0YWIncyBvbmxpbmUgc3RhdGUgZnJvbVxuICAgIC8vIFNoYXJlZENsaWVudFN0YXRlLlxuICAgICAgICBpZiAoci5pc1ByaW1hcnlDbGllbnQgJiYgMCAvKiBPbmxpbmVTdGF0ZVNvdXJjZS5SZW1vdGVTdG9yZSAqLyA9PT0gbiB8fCAhci5pc1ByaW1hcnlDbGllbnQgJiYgMSAvKiBPbmxpbmVTdGF0ZVNvdXJjZS5TaGFyZWRDbGllbnRTdGF0ZSAqLyA9PT0gbikge1xuICAgICAgICBjb25zdCBlID0gW107XG4gICAgICAgIHIubWEuZm9yRWFjaCgoKG4sIHIpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSByLnZpZXcuUV8odCk7XG4gICAgICAgICAgICBpLnNuYXBzaG90ICYmIGUucHVzaChpLnNuYXBzaG90KTtcbiAgICAgICAgfSkpLCBmdW5jdGlvbiBfX1BSSVZBVEVfZXZlbnRNYW5hZ2VyT25PbmxpbmVTdGF0ZUNoYW5nZShlLCB0KSB7XG4gICAgICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICAgICAgICAgIG4ub25saW5lU3RhdGUgPSB0O1xuICAgICAgICAgICAgbGV0IHIgPSAhMTtcbiAgICAgICAgICAgIG4ucXVlcmllcy5mb3JFYWNoKCgoZSwgbikgPT4ge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZSBvZiBuLmxpc3RlbmVycykgXG4gICAgICAgICAgICAgICAgLy8gUnVuIGdsb2JhbCBzbmFwc2hvdCBsaXN0ZW5lcnMgaWYgYSBjb25zaXN0ZW50IHNuYXBzaG90IGhhcyBiZWVuIGVtaXR0ZWQuXG4gICAgICAgICAgICAgICAgZS5RXyh0KSAmJiAociA9ICEwKTtcbiAgICAgICAgICAgIH0pKSwgciAmJiBfX1BSSVZBVEVfcmFpc2VTbmFwc2hvdHNJblN5bmNFdmVudChuKTtcbiAgICAgICAgfShyLmV2ZW50TWFuYWdlciwgdCksIGUubGVuZ3RoICYmIHIuVmEuYV8oZSksIHIub25saW5lU3RhdGUgPSB0LCByLmlzUHJpbWFyeUNsaWVudCAmJiByLnNoYXJlZENsaWVudFN0YXRlLnNldE9ubGluZVN0YXRlKHQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZWplY3RzIHRoZSBsaXN0ZW4gZm9yIHRoZSBnaXZlbiB0YXJnZXRJRC4gVGhpcyBjYW4gYmUgdHJpZ2dlcmVkIGJ5IHRoZVxuICogYmFja2VuZCBmb3IgYW55IGFjdGl2ZSB0YXJnZXQuXG4gKlxuICogQHBhcmFtIHN5bmNFbmdpbmUgLSBUaGUgc3luYyBlbmdpbmUgaW1wbGVtZW50YXRpb24uXG4gKiBAcGFyYW0gdGFyZ2V0SWQgLSBUaGUgdGFyZ2V0SUQgY29ycmVzcG9uZHMgdG8gb25lIHByZXZpb3VzbHkgaW5pdGlhdGVkIGJ5IHRoZVxuICogdXNlciBhcyBwYXJ0IG9mIFRhcmdldERhdGEgcGFzc2VkIHRvIGxpc3RlbigpIG9uIFJlbW90ZVN0b3JlLlxuICogQHBhcmFtIGVyciAtIEEgZGVzY3JpcHRpb24gb2YgdGhlIGNvbmRpdGlvbiB0aGF0IGhhcyBmb3JjZWQgdGhlIHJlamVjdGlvbi5cbiAqIE5lYXJseSBhbHdheXMgdGhpcyB3aWxsIGJlIGFuIGluZGljYXRpb24gdGhhdCB0aGUgdXNlciBpcyBubyBsb25nZXJcbiAqIGF1dGhvcml6ZWQgdG8gc2VlIHRoZSBkYXRhIG1hdGNoaW5nIHRoZSB0YXJnZXQuXG4gKi8gYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX3N5bmNFbmdpbmVSZWplY3RMaXN0ZW4oZSwgdCwgbikge1xuICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuXG4gICAgICAgIHIuc2hhcmVkQ2xpZW50U3RhdGUudXBkYXRlUXVlcnlTdGF0ZSh0LCBcInJlamVjdGVkXCIsIG4pO1xuICAgIGNvbnN0IGkgPSByLnlhLmdldCh0KSwgcyA9IGkgJiYgaS5rZXk7XG4gICAgaWYgKHMpIHtcbiAgICAgICAgLy8gVE9ETyhrbGltdCk6IFdlIHJlYWxseSBvbmx5IHNob3VsZCBkbyB0aGUgZm9sbG93aW5nIG9uIHBlcm1pc3Npb25cbiAgICAgICAgLy8gZGVuaWVkIGVycm9ycywgYnV0IHdlIGRvbid0IGhhdmUgdGhlIGNhdXNlIGNvZGUgaGVyZS5cbiAgICAgICAgLy8gSXQncyBhIGxpbWJvIGRvYy4gQ3JlYXRlIGEgc3ludGhldGljIGV2ZW50IHNheWluZyBpdCB3YXMgZGVsZXRlZC5cbiAgICAgICAgLy8gVGhpcyBpcyBraW5kIG9mIGEgaGFjay4gSWRlYWxseSwgd2Ugd291bGQgaGF2ZSBhIG1ldGhvZCBpbiB0aGUgbG9jYWxcbiAgICAgICAgLy8gc3RvcmUgdG8gcHVyZ2UgYSBkb2N1bWVudC4gSG93ZXZlciwgaXQgd291bGQgYmUgdHJpY2t5IHRvIGtlZXAgYWxsIG9mXG4gICAgICAgIC8vIHRoZSBsb2NhbCBzdG9yZSdzIGludmFyaWFudHMgd2l0aCBhbm90aGVyIG1ldGhvZC5cbiAgICAgICAgbGV0IGUgPSBuZXcgU29ydGVkTWFwKERvY3VtZW50S2V5LmNvbXBhcmF0b3IpO1xuICAgICAgICAvLyBUT0RPKGIvMjE3MTg5MjE2KTogVGhpcyBsaW1ibyBkb2N1bWVudCBzaG91bGQgaWRlYWxseSBoYXZlIGEgcmVhZCB0aW1lLFxuICAgICAgICAvLyBzbyB0aGF0IGl0IGlzIHBpY2tlZCB1cCBieSBhbnkgcmVhZC10aW1lIGJhc2VkIHNjYW5zLiBUaGUgYmFja2VuZCxcbiAgICAgICAgLy8gaG93ZXZlciwgZG9lcyBub3Qgc2VuZCBhIHJlYWQgdGltZSBmb3IgdGFyZ2V0IHJlbW92YWxzLlxuICAgICAgICAgICAgICAgIGUgPSBlLmluc2VydChzLCBNdXRhYmxlRG9jdW1lbnQubmV3Tm9Eb2N1bWVudChzLCBTbmFwc2hvdFZlcnNpb24ubWluKCkpKTtcbiAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpLmFkZChzKSwgaSA9IG5ldyBSZW1vdGVFdmVudChTbmFwc2hvdFZlcnNpb24ubWluKCksIFxuICAgICAgICAvKiB0YXJnZXRDaGFuZ2VzPSAqLyBuZXcgTWFwLCBcbiAgICAgICAgLyogdGFyZ2V0TWlzbWF0Y2hlcz0gKi8gbmV3IFNvcnRlZE1hcChfX1BSSVZBVEVfcHJpbWl0aXZlQ29tcGFyYXRvciksIGUsIG4pO1xuICAgICAgICBhd2FpdCBfX1BSSVZBVEVfc3luY0VuZ2luZUFwcGx5UmVtb3RlRXZlbnQociwgaSksIFxuICAgICAgICAvLyBTaW5jZSB0aGlzIHF1ZXJ5IGZhaWxlZCwgd2Ugd29uJ3Qgd2FudCB0byBtYW51YWxseSB1bmxpc3RlbiB0byBpdC5cbiAgICAgICAgLy8gV2Ugb25seSByZW1vdmUgaXQgZnJvbSBib29ra2VlcGluZyBhZnRlciB3ZSBzdWNjZXNzZnVsbHkgYXBwbGllZCB0aGVcbiAgICAgICAgLy8gUmVtb3RlRXZlbnQuIElmIGBhcHBseVJlbW90ZUV2ZW50KClgIHRocm93cywgd2Ugd2FudCB0byByZS1saXN0ZW4gdG9cbiAgICAgICAgLy8gdGhpcyBxdWVyeSB3aGVuIHRoZSBSZW1vdGVTdG9yZSByZXN0YXJ0cyB0aGUgV2F0Y2ggc3RyZWFtLCB3aGljaCBzaG91bGRcbiAgICAgICAgLy8gcmUtdHJpZ2dlciB0aGUgdGFyZ2V0IGZhaWx1cmUuXG4gICAgICAgIHIucGEgPSByLnBhLnJlbW92ZShzKSwgci55YS5kZWxldGUodCksIF9fUFJJVkFURV9wdW1wRW5xdWV1ZWRMaW1ib1Jlc29sdXRpb25zKHIpO1xuICAgIH0gZWxzZSBhd2FpdCBfX1BSSVZBVEVfbG9jYWxTdG9yZVJlbGVhc2VUYXJnZXQoci5sb2NhbFN0b3JlLCB0LCBcbiAgICAvKiBrZWVwUGVyc2lzdGVkVGFyZ2V0RGF0YSAqLyAhMSkudGhlbigoKCkgPT4gX19QUklWQVRFX3JlbW92ZUFuZENsZWFudXBUYXJnZXQociwgdCwgbikpKS5jYXRjaChfX1BSSVZBVEVfaWdub3JlSWZQcmltYXJ5TGVhc2VMb3NzKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX3N5bmNFbmdpbmVBcHBseVN1Y2Nlc3NmdWxXcml0ZShlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSksIHIgPSB0LmJhdGNoLmJhdGNoSWQ7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZSA9IGF3YWl0IF9fUFJJVkFURV9sb2NhbFN0b3JlQWNrbm93bGVkZ2VCYXRjaChuLmxvY2FsU3RvcmUsIHQpO1xuICAgICAgICAvLyBUaGUgbG9jYWwgc3RvcmUgbWF5IG9yIG1heSBub3QgYmUgYWJsZSB0byBhcHBseSB0aGUgd3JpdGUgcmVzdWx0IGFuZFxuICAgICAgICAvLyByYWlzZSBldmVudHMgaW1tZWRpYXRlbHkgKGRlcGVuZGluZyBvbiB3aGV0aGVyIHRoZSB3YXRjaGVyIGlzIGNhdWdodFxuICAgICAgICAvLyB1cCksIHNvIHdlIHJhaXNlIHVzZXIgY2FsbGJhY2tzIGZpcnN0IHNvIHRoYXQgdGhleSBjb25zaXN0ZW50bHkgaGFwcGVuXG4gICAgICAgIC8vIGJlZm9yZSBsaXN0ZW4gZXZlbnRzLlxuICAgICAgICAgICAgICAgIF9fUFJJVkFURV9wcm9jZXNzVXNlckNhbGxiYWNrKG4sIHIsIC8qZXJyb3I9Ki8gbnVsbCksIF9fUFJJVkFURV90cmlnZ2VyUGVuZGluZ1dyaXRlc0NhbGxiYWNrcyhuLCByKSwgXG4gICAgICAgIG4uc2hhcmVkQ2xpZW50U3RhdGUudXBkYXRlTXV0YXRpb25TdGF0ZShyLCBcImFja25vd2xlZGdlZFwiKSwgYXdhaXQgX19QUklWQVRFX3N5bmNFbmdpbmVFbWl0TmV3U25hcHNBbmROb3RpZnlMb2NhbFN0b3JlKG4sIGUpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgYXdhaXQgX19QUklWQVRFX2lnbm9yZUlmUHJpbWFyeUxlYXNlTG9zcyhlKTtcbiAgICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9zeW5jRW5naW5lUmVqZWN0RmFpbGVkV3JpdGUoZSwgdCwgbikge1xuICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGUgPSBhd2FpdCBmdW5jdGlvbiBfX1BSSVZBVEVfbG9jYWxTdG9yZVJlamVjdEJhdGNoKGUsIHQpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgICAgICAgICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJSZWplY3QgYmF0Y2hcIiwgXCJyZWFkd3JpdGUtcHJpbWFyeVwiLCAoZSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IHI7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG4ubXV0YXRpb25RdWV1ZS5sb29rdXBNdXRhdGlvbkJhdGNoKGUsIHQpLm5leHQoKHQgPT4gKF9fUFJJVkFURV9oYXJkQXNzZXJ0KG51bGwgIT09IHQpLCBcbiAgICAgICAgICAgICAgICByID0gdC5rZXlzKCksIG4ubXV0YXRpb25RdWV1ZS5yZW1vdmVNdXRhdGlvbkJhdGNoKGUsIHQpKSkpLm5leHQoKCgpID0+IG4ubXV0YXRpb25RdWV1ZS5wZXJmb3JtQ29uc2lzdGVuY3lDaGVjayhlKSkpLm5leHQoKCgpID0+IG4uZG9jdW1lbnRPdmVybGF5Q2FjaGUucmVtb3ZlT3ZlcmxheXNGb3JCYXRjaElkKGUsIHIsIHQpKSkubmV4dCgoKCkgPT4gbi5sb2NhbERvY3VtZW50cy5yZWNhbGN1bGF0ZUFuZFNhdmVPdmVybGF5c0ZvckRvY3VtZW50S2V5cyhlLCByKSkpLm5leHQoKCgpID0+IG4ubG9jYWxEb2N1bWVudHMuZ2V0RG9jdW1lbnRzKGUsIHIpKSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBSZXR1cm5zIHRoZSBsYXJnZXN0IChsYXRlc3QpIGJhdGNoIGlkIGluIG11dGF0aW9uIHF1ZXVlIHRoYXQgaXMgcGVuZGluZ1xuICogc2VydmVyIHJlc3BvbnNlLlxuICpcbiAqIFJldHVybnMgYEJBVENISURfVU5LTk9XTmAgaWYgdGhlIHF1ZXVlIGlzIGVtcHR5LlxuICovIChyLmxvY2FsU3RvcmUsIHQpO1xuICAgICAgICAvLyBUaGUgbG9jYWwgc3RvcmUgbWF5IG9yIG1heSBub3QgYmUgYWJsZSB0byBhcHBseSB0aGUgd3JpdGUgcmVzdWx0IGFuZFxuICAgICAgICAvLyByYWlzZSBldmVudHMgaW1tZWRpYXRlbHkgKGRlcGVuZGluZyBvbiB3aGV0aGVyIHRoZSB3YXRjaGVyIGlzIGNhdWdodCB1cCksXG4gICAgICAgIC8vIHNvIHdlIHJhaXNlIHVzZXIgY2FsbGJhY2tzIGZpcnN0IHNvIHRoYXQgdGhleSBjb25zaXN0ZW50bHkgaGFwcGVuIGJlZm9yZVxuICAgICAgICAvLyBsaXN0ZW4gZXZlbnRzLlxuICAgICAgICAgICAgICAgIF9fUFJJVkFURV9wcm9jZXNzVXNlckNhbGxiYWNrKHIsIHQsIG4pLCBfX1BSSVZBVEVfdHJpZ2dlclBlbmRpbmdXcml0ZXNDYWxsYmFja3MociwgdCksIFxuICAgICAgICByLnNoYXJlZENsaWVudFN0YXRlLnVwZGF0ZU11dGF0aW9uU3RhdGUodCwgXCJyZWplY3RlZFwiLCBuKSwgYXdhaXQgX19QUklWQVRFX3N5bmNFbmdpbmVFbWl0TmV3U25hcHNBbmROb3RpZnlMb2NhbFN0b3JlKHIsIGUpO1xuICAgIH0gY2F0Y2ggKG4pIHtcbiAgICAgICAgYXdhaXQgX19QUklWQVRFX2lnbm9yZUlmUHJpbWFyeUxlYXNlTG9zcyhuKTtcbiAgICB9XG59XG5cbi8qKlxuICogUmVnaXN0ZXJzIGEgdXNlciBjYWxsYmFjayB0aGF0IHJlc29sdmVzIHdoZW4gYWxsIHBlbmRpbmcgbXV0YXRpb25zIGF0IHRoZSBtb21lbnQgb2YgY2FsbGluZ1xuICogYXJlIGFja25vd2xlZGdlZCAuXG4gKi8gYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX3N5bmNFbmdpbmVSZWdpc3RlclBlbmRpbmdXcml0ZXNDYWxsYmFjayhlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgX19QUklWQVRFX2NhblVzZU5ldHdvcmsobi5yZW1vdGVTdG9yZSkgfHwgX19QUklWQVRFX2xvZ0RlYnVnKFwiU3luY0VuZ2luZVwiLCBcIlRoZSBuZXR3b3JrIGlzIGRpc2FibGVkLiBUaGUgdGFzayByZXR1cm5lZCBieSAnYXdhaXRQZW5kaW5nV3JpdGVzKCknIHdpbGwgbm90IGNvbXBsZXRlIHVudGlsIHRoZSBuZXR3b3JrIGlzIGVuYWJsZWQuXCIpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGUgPSBhd2FpdCBmdW5jdGlvbiBfX1BSSVZBVEVfbG9jYWxTdG9yZUdldEhpZ2hlc3RVbmFja25vd2xlZGdlZEJhdGNoSWQoZSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgICAgICAgICByZXR1cm4gdC5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkdldCBoaWdoZXN0IHVuYWNrbm93bGVkZ2VkIGJhdGNoIGlkXCIsIFwicmVhZG9ubHlcIiwgKGUgPT4gdC5tdXRhdGlvblF1ZXVlLmdldEhpZ2hlc3RVbmFja25vd2xlZGdlZEJhdGNoSWQoZSkpKTtcbiAgICAgICAgfShuLmxvY2FsU3RvcmUpO1xuICAgICAgICBpZiAoLTEgPT09IGUpIFxuICAgICAgICAvLyBUcmlnZ2VyIHRoZSBjYWxsYmFjayByaWdodCBhd2F5IGlmIHRoZXJlIGlzIG5vIHBlbmRpbmcgd3JpdGVzIGF0IHRoZSBtb21lbnQuXG4gICAgICAgIHJldHVybiB2b2lkIHQucmVzb2x2ZSgpO1xuICAgICAgICBjb25zdCByID0gbi5iYS5nZXQoZSkgfHwgW107XG4gICAgICAgIHIucHVzaCh0KSwgbi5iYS5zZXQoZSwgcik7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX3dyYXBJblVzZXJFcnJvcklmUmVjb3ZlcmFibGUoZSwgXCJJbml0aWFsaXphdGlvbiBvZiB3YWl0Rm9yUGVuZGluZ1dyaXRlcygpIG9wZXJhdGlvbiBmYWlsZWRcIik7XG4gICAgICAgIHQucmVqZWN0KG4pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBUcmlnZ2VycyB0aGUgY2FsbGJhY2tzIHRoYXQgYXJlIHdhaXRpbmcgZm9yIHRoaXMgYmF0Y2ggaWQgdG8gZ2V0IGFja25vd2xlZGdlZCBieSBzZXJ2ZXIsXG4gKiBpZiB0aGVyZSBhcmUgYW55LlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV90cmlnZ2VyUGVuZGluZ1dyaXRlc0NhbGxiYWNrcyhlLCB0KSB7XG4gICAgKGUuYmEuZ2V0KHQpIHx8IFtdKS5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgZS5yZXNvbHZlKCk7XG4gICAgfSkpLCBlLmJhLmRlbGV0ZSh0KTtcbn1cblxuLyoqIFJlamVjdCBhbGwgb3V0c3RhbmRpbmcgY2FsbGJhY2tzIHdhaXRpbmcgZm9yIHBlbmRpbmcgd3JpdGVzIHRvIGNvbXBsZXRlLiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfcHJvY2Vzc1VzZXJDYWxsYmFjayhlLCB0LCBuKSB7XG4gICAgY29uc3QgciA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgbGV0IGkgPSByLlNhW3IuY3VycmVudFVzZXIudG9LZXkoKV07XG4gICAgLy8gTk9URTogTXV0YXRpb25zIHJlc3RvcmVkIGZyb20gcGVyc2lzdGVuY2Ugd29uJ3QgaGF2ZSBjYWxsYmFja3MsIHNvIGl0J3NcbiAgICAvLyBva2F5IGZvciB0aGVyZSB0byBiZSBubyBjYWxsYmFjayBmb3IgdGhpcyBJRC5cbiAgICAgICAgaWYgKGkpIHtcbiAgICAgICAgY29uc3QgZSA9IGkuZ2V0KHQpO1xuICAgICAgICBlICYmIChuID8gZS5yZWplY3QobikgOiBlLnJlc29sdmUoKSwgaSA9IGkucmVtb3ZlKHQpKSwgci5TYVtyLmN1cnJlbnRVc2VyLnRvS2V5KCldID0gaTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9yZW1vdmVBbmRDbGVhbnVwVGFyZ2V0KGUsIHQsIG4gPSBudWxsKSB7XG4gICAgZS5zaGFyZWRDbGllbnRTdGF0ZS5yZW1vdmVMb2NhbFF1ZXJ5VGFyZ2V0KHQpO1xuICAgIGZvciAoY29uc3QgciBvZiBlLmZhLmdldCh0KSkgZS5tYS5kZWxldGUociksIG4gJiYgZS5WYS5GYShyLCBuKTtcbiAgICBpZiAoZS5mYS5kZWxldGUodCksIGUuaXNQcmltYXJ5Q2xpZW50KSB7XG4gICAgICAgIGUud2EuUnIodCkuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICBlLndhLmNvbnRhaW5zS2V5KHQpIHx8IFxuICAgICAgICAgICAgLy8gV2UgcmVtb3ZlZCB0aGUgbGFzdCByZWZlcmVuY2UgZm9yIHRoaXMga2V5XG4gICAgICAgICAgICBfX1BSSVZBVEVfcmVtb3ZlTGltYm9UYXJnZXQoZSwgdCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9yZW1vdmVMaW1ib1RhcmdldChlLCB0KSB7XG4gICAgZS5nYS5kZWxldGUodC5wYXRoLmNhbm9uaWNhbFN0cmluZygpKTtcbiAgICAvLyBJdCdzIHBvc3NpYmxlIHRoYXQgdGhlIHRhcmdldCBhbHJlYWR5IGdvdCByZW1vdmVkIGJlY2F1c2UgdGhlIHF1ZXJ5IGZhaWxlZC4gSW4gdGhhdCBjYXNlLFxuICAgIC8vIHRoZSBrZXkgd29uJ3QgZXhpc3QgaW4gYGxpbWJvVGFyZ2V0c0J5S2V5YC4gT25seSBkbyB0aGUgY2xlYW51cCBpZiB3ZSBzdGlsbCBoYXZlIHRoZSB0YXJnZXQuXG4gICAgY29uc3QgbiA9IGUucGEuZ2V0KHQpO1xuICAgIG51bGwgIT09IG4gJiYgKF9fUFJJVkFURV9yZW1vdGVTdG9yZVVubGlzdGVuKGUucmVtb3RlU3RvcmUsIG4pLCBlLnBhID0gZS5wYS5yZW1vdmUodCksIFxuICAgIGUueWEuZGVsZXRlKG4pLCBfX1BSSVZBVEVfcHVtcEVucXVldWVkTGltYm9SZXNvbHV0aW9ucyhlKSk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV91cGRhdGVUcmFja2VkTGltYm9zKGUsIHQsIG4pIHtcbiAgICBmb3IgKGNvbnN0IHIgb2YgbikgaWYgKHIgaW5zdGFuY2VvZiBfX1BSSVZBVEVfQWRkZWRMaW1ib0RvY3VtZW50KSBlLndhLmFkZFJlZmVyZW5jZShyLmtleSwgdCksIFxuICAgIF9fUFJJVkFURV90cmFja0xpbWJvQ2hhbmdlKGUsIHIpOyBlbHNlIGlmIChyIGluc3RhbmNlb2YgX19QUklWQVRFX1JlbW92ZWRMaW1ib0RvY3VtZW50KSB7XG4gICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlN5bmNFbmdpbmVcIiwgXCJEb2N1bWVudCBubyBsb25nZXIgaW4gbGltYm86IFwiICsgci5rZXkpLCBlLndhLnJlbW92ZVJlZmVyZW5jZShyLmtleSwgdCk7XG4gICAgICAgIGUud2EuY29udGFpbnNLZXkoci5rZXkpIHx8IFxuICAgICAgICAvLyBXZSByZW1vdmVkIHRoZSBsYXN0IHJlZmVyZW5jZSBmb3IgdGhpcyBrZXlcbiAgICAgICAgX19QUklWQVRFX3JlbW92ZUxpbWJvVGFyZ2V0KGUsIHIua2V5KTtcbiAgICB9IGVsc2UgZmFpbCgpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdHJhY2tMaW1ib0NoYW5nZShlLCB0KSB7XG4gICAgY29uc3QgbiA9IHQua2V5LCByID0gbi5wYXRoLmNhbm9uaWNhbFN0cmluZygpO1xuICAgIGUucGEuZ2V0KG4pIHx8IGUuZ2EuaGFzKHIpIHx8IChfX1BSSVZBVEVfbG9nRGVidWcoXCJTeW5jRW5naW5lXCIsIFwiTmV3IGRvY3VtZW50IGluIGxpbWJvOiBcIiArIG4pLCBcbiAgICBlLmdhLmFkZChyKSwgX19QUklWQVRFX3B1bXBFbnF1ZXVlZExpbWJvUmVzb2x1dGlvbnMoZSkpO1xufVxuXG4vKipcbiAqIFN0YXJ0cyBsaXN0ZW5zIGZvciBkb2N1bWVudHMgaW4gbGltYm8gdGhhdCBhcmUgZW5xdWV1ZWQgZm9yIHJlc29sdXRpb24sXG4gKiBzdWJqZWN0IHRvIGEgbWF4aW11bSBudW1iZXIgb2YgY29uY3VycmVudCByZXNvbHV0aW9ucy5cbiAqXG4gKiBXaXRob3V0IGJvdW5kaW5nIHRoZSBudW1iZXIgb2YgY29uY3VycmVudCByZXNvbHV0aW9ucywgdGhlIHNlcnZlciBjYW4gZmFpbFxuICogd2l0aCBcInJlc291cmNlIGV4aGF1c3RlZFwiIGVycm9ycyB3aGljaCBjYW4gbGVhZCB0byBwYXRob2xvZ2ljYWwgY2xpZW50XG4gKiBiZWhhdmlvciBhcyBzZWVuIGluIGh0dHBzOi8vZ2l0aHViLmNvbS9maXJlYmFzZS9maXJlYmFzZS1qcy1zZGsvaXNzdWVzLzI2ODMuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3B1bXBFbnF1ZXVlZExpbWJvUmVzb2x1dGlvbnMoZSkge1xuICAgIGZvciAoO2UuZ2Euc2l6ZSA+IDAgJiYgZS5wYS5zaXplIDwgZS5tYXhDb25jdXJyZW50TGltYm9SZXNvbHV0aW9uczsgKSB7XG4gICAgICAgIGNvbnN0IHQgPSBlLmdhLnZhbHVlcygpLm5leHQoKS52YWx1ZTtcbiAgICAgICAgZS5nYS5kZWxldGUodCk7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgRG9jdW1lbnRLZXkoUmVzb3VyY2VQYXRoLmZyb21TdHJpbmcodCkpLCByID0gZS5EYS5uZXh0KCk7XG4gICAgICAgIGUueWEuc2V0KHIsIG5ldyBMaW1ib1Jlc29sdXRpb24obikpLCBlLnBhID0gZS5wYS5pbnNlcnQobiwgciksIF9fUFJJVkFURV9yZW1vdGVTdG9yZUxpc3RlbihlLnJlbW90ZVN0b3JlLCBuZXcgVGFyZ2V0RGF0YShfX1BSSVZBVEVfcXVlcnlUb1RhcmdldChfX1BSSVZBVEVfbmV3UXVlcnlGb3JQYXRoKG4ucGF0aCkpLCByLCBcIlRhcmdldFB1cnBvc2VMaW1ib1Jlc29sdXRpb25cIiAvKiBUYXJnZXRQdXJwb3NlLkxpbWJvUmVzb2x1dGlvbiAqLyAsIF9fUFJJVkFURV9MaXN0ZW5TZXF1ZW5jZS5fZSkpO1xuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX3N5bmNFbmdpbmVFbWl0TmV3U25hcHNBbmROb3RpZnlMb2NhbFN0b3JlKGUsIHQsIG4pIHtcbiAgICBjb25zdCByID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKSwgaSA9IFtdLCBzID0gW10sIG8gPSBbXTtcbiAgICByLm1hLmlzRW1wdHkoKSB8fCAoci5tYS5mb3JFYWNoKCgoZSwgXykgPT4ge1xuICAgICAgICBvLnB1c2goci52YShfLCB0LCBuKS50aGVuKChlID0+IHtcbiAgICAgICAgICAgIC8vIFVwZGF0ZSB2aWV3cyBpZiB0aGVyZSBhcmUgYWN0dWFsIGNoYW5nZXMuXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAvLyBJZiB0aGVyZSBhcmUgY2hhbmdlcywgb3Igd2UgYXJlIGhhbmRsaW5nIGEgZ2xvYmFsIHNuYXBzaG90LCBub3RpZnlcbiAgICAgICAgICAgIC8vIHNlY29uZGFyeSBjbGllbnRzIHRvIHVwZGF0ZSBxdWVyeSBzdGF0ZS5cbiAgICAgICAgICAgIChlIHx8IG4pICYmIHIuaXNQcmltYXJ5Q2xpZW50ICYmIHIuc2hhcmVkQ2xpZW50U3RhdGUudXBkYXRlUXVlcnlTdGF0ZShfLnRhcmdldElkLCAobnVsbCA9PSBlID8gdm9pZCAwIDogZS5mcm9tQ2FjaGUpID8gXCJub3QtY3VycmVudFwiIDogXCJjdXJyZW50XCIpLCBcbiAgICAgICAgICAgIGUpIHtcbiAgICAgICAgICAgICAgICBpLnB1c2goZSk7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9Mb2NhbFZpZXdDaGFuZ2VzLlFpKF8udGFyZ2V0SWQsIGUpO1xuICAgICAgICAgICAgICAgIHMucHVzaCh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpKTtcbiAgICB9KSksIGF3YWl0IFByb21pc2UuYWxsKG8pLCByLlZhLmFfKGkpLCBhd2FpdCBhc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfbG9jYWxTdG9yZU5vdGlmeUxvY2FsVmlld0NoYW5nZXMoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJub3RpZnlMb2NhbFZpZXdDaGFuZ2VzXCIsIFwicmVhZHdyaXRlXCIsIChlID0+IFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKHQsICh0ID0+IFBlcnNpc3RlbmNlUHJvbWlzZS5mb3JFYWNoKHQua2ksIChyID0+IG4ucGVyc2lzdGVuY2UucmVmZXJlbmNlRGVsZWdhdGUuYWRkUmVmZXJlbmNlKGUsIHQudGFyZ2V0SWQsIHIpKSkubmV4dCgoKCkgPT4gUGVyc2lzdGVuY2VQcm9taXNlLmZvckVhY2godC5xaSwgKHIgPT4gbi5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZS5yZW1vdmVSZWZlcmVuY2UoZSwgdC50YXJnZXRJZCwgcikpKSkpKSkpKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgaWYgKCFfX1BSSVZBVEVfaXNJbmRleGVkRGJUcmFuc2FjdGlvbkVycm9yKGUpKSB0aHJvdyBlO1xuICAgICAgICAgICAgLy8gSWYgYG5vdGlmeUxvY2FsVmlld0NoYW5nZXNgIGZhaWxzLCB3ZSBkaWQgbm90IGFkdmFuY2UgdGhlIHNlcXVlbmNlXG4gICAgICAgICAgICAvLyBudW1iZXIgZm9yIHRoZSBkb2N1bWVudHMgdGhhdCB3ZXJlIGluY2x1ZGVkIGluIHRoaXMgdHJhbnNhY3Rpb24uXG4gICAgICAgICAgICAvLyBUaGlzIG1pZ2h0IHRyaWdnZXIgdGhlbSB0byBiZSBkZWxldGVkIGVhcmxpZXIgdGhhbiB0aGV5IG90aGVyd2lzZVxuICAgICAgICAgICAgLy8gd291bGQgaGF2ZSwgYnV0IGl0IHNob3VsZCBub3QgaW52YWxpZGF0ZSB0aGUgaW50ZWdyaXR5IG9mIHRoZSBkYXRhLlxuICAgICAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiTG9jYWxTdG9yZVwiLCBcIkZhaWxlZCB0byB1cGRhdGUgc2VxdWVuY2UgbnVtYmVyczogXCIgKyBlKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdCkge1xuICAgICAgICAgICAgY29uc3QgdCA9IGUudGFyZ2V0SWQ7XG4gICAgICAgICAgICBpZiAoIWUuZnJvbUNhY2hlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IG4udHMuZ2V0KHQpLCByID0gZS5zbmFwc2hvdFZlcnNpb24sIGkgPSBlLndpdGhMYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uKHIpO1xuICAgICAgICAgICAgICAgIC8vIEFkdmFuY2UgdGhlIGxhc3QgbGltYm8gZnJlZSBzbmFwc2hvdCB2ZXJzaW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4udHMgPSBuLnRzLmluc2VydCh0LCBpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0oci5sb2NhbFN0b3JlLCBzKSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9zeW5jRW5naW5lSGFuZGxlQ3JlZGVudGlhbENoYW5nZShlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgaWYgKCFuLmN1cnJlbnRVc2VyLmlzRXF1YWwodCkpIHtcbiAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiU3luY0VuZ2luZVwiLCBcIlVzZXIgY2hhbmdlLiBOZXcgdXNlcjpcIiwgdC50b0tleSgpKTtcbiAgICAgICAgY29uc3QgZSA9IGF3YWl0IF9fUFJJVkFURV9sb2NhbFN0b3JlSGFuZGxlVXNlckNoYW5nZShuLmxvY2FsU3RvcmUsIHQpO1xuICAgICAgICBuLmN1cnJlbnRVc2VyID0gdCwgXG4gICAgICAgIC8vIEZhaWxzIHRhc2tzIHdhaXRpbmcgZm9yIHBlbmRpbmcgd3JpdGVzIHJlcXVlc3RlZCBieSBwcmV2aW91cyB1c2VyLlxuICAgICAgICBmdW5jdGlvbiBfX1BSSVZBVEVfcmVqZWN0T3V0c3RhbmRpbmdQZW5kaW5nV3JpdGVzQ2FsbGJhY2tzKGUsIHQpIHtcbiAgICAgICAgICAgIGUuYmEuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgZS5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZS5yZWplY3QobmV3IEZpcmVzdG9yZUVycm9yKEQuQ0FOQ0VMTEVELCB0KSk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfSkpLCBlLmJhLmNsZWFyKCk7XG4gICAgICAgIH0obiwgXCInd2FpdEZvclBlbmRpbmdXcml0ZXMnIHByb21pc2UgaXMgcmVqZWN0ZWQgZHVlIHRvIGEgdXNlciBjaGFuZ2UuXCIpLCBcbiAgICAgICAgLy8gVE9ETyhiLzExNDIyNjQxNyk6IENvbnNpZGVyIGNhbGxpbmcgdGhpcyBvbmx5IGluIHRoZSBwcmltYXJ5IHRhYi5cbiAgICAgICAgbi5zaGFyZWRDbGllbnRTdGF0ZS5oYW5kbGVVc2VyQ2hhbmdlKHQsIGUucmVtb3ZlZEJhdGNoSWRzLCBlLmFkZGVkQmF0Y2hJZHMpLCBhd2FpdCBfX1BSSVZBVEVfc3luY0VuZ2luZUVtaXROZXdTbmFwc0FuZE5vdGlmeUxvY2FsU3RvcmUobiwgZS5fcyk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfc3luY0VuZ2luZUdldFJlbW90ZUtleXNGb3JUYXJnZXQoZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpLCByID0gbi55YS5nZXQodCk7XG4gICAgaWYgKHIgJiYgci5SYSkgcmV0dXJuIF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpLmFkZChyLmtleSk7XG4gICAge1xuICAgICAgICBsZXQgZSA9IF9fUFJJVkFURV9kb2N1bWVudEtleVNldCgpO1xuICAgICAgICBjb25zdCByID0gbi5mYS5nZXQodCk7XG4gICAgICAgIGlmICghcikgcmV0dXJuIGU7XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiByKSB7XG4gICAgICAgICAgICBjb25zdCByID0gbi5tYS5nZXQodCk7XG4gICAgICAgICAgICBlID0gZS51bmlvbldpdGgoci52aWV3LnVhKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZTtcbiAgICB9XG59XG5cbi8qKlxuICogUmVjb25jaWxlIHRoZSBsaXN0IG9mIHN5bmNlZCBkb2N1bWVudHMgaW4gYW4gZXhpc3RpbmcgdmlldyB3aXRoIHRob3NlXG4gKiBmcm9tIHBlcnNpc3RlbmNlLlxuICovIGFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9zeW5jaHJvbml6ZVZpZXdBbmRDb21wdXRlU25hcHNob3QoZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpLCByID0gYXdhaXQgX19QUklWQVRFX2xvY2FsU3RvcmVFeGVjdXRlUXVlcnkobi5sb2NhbFN0b3JlLCB0LnF1ZXJ5LCBcbiAgICAvKiB1c2VQcmV2aW91c1Jlc3VsdHM9ICovICEwKSwgaSA9IHQudmlldy5kYShyKTtcbiAgICByZXR1cm4gbi5pc1ByaW1hcnlDbGllbnQgJiYgX19QUklWQVRFX3VwZGF0ZVRyYWNrZWRMaW1ib3MobiwgdC50YXJnZXRJZCwgaS5UYSksIFxuICAgIGk7XG59XG5cbi8qKlxuICogUmV0cmlldmVzIG5ld2x5IGNoYW5nZWQgZG9jdW1lbnRzIGZyb20gcmVtb3RlIGRvY3VtZW50IGNhY2hlIGFuZCByYWlzZXNcbiAqIHNuYXBzaG90cyBpZiBuZWVkZWQuXG4gKi9cbi8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG5hc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfc3luY0VuZ2luZVN5bmNocm9uaXplV2l0aENoYW5nZWREb2N1bWVudHMoZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgIHJldHVybiBfX1BSSVZBVEVfbG9jYWxTdG9yZUdldE5ld0RvY3VtZW50Q2hhbmdlcyhuLmxvY2FsU3RvcmUsIHQpLnRoZW4oKGUgPT4gX19QUklWQVRFX3N5bmNFbmdpbmVFbWl0TmV3U25hcHNBbmROb3RpZnlMb2NhbFN0b3JlKG4sIGUpKSk7XG59XG5cbi8qKiBBcHBsaWVzIGEgbXV0YXRpb24gc3RhdGUgdG8gYW4gZXhpc3RpbmcgYmF0Y2guICAqL1xuLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbmFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9zeW5jRW5naW5lQXBwbHlCYXRjaFN0YXRlKGUsIHQsIG4sIHIpIHtcbiAgICBjb25zdCBpID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKSwgcyA9IGF3YWl0IGZ1bmN0aW9uIF9fUFJJVkFURV9sb2NhbFN0b3JlTG9va3VwTXV0YXRpb25Eb2N1bWVudHMoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKSwgciA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3Qobi5tdXRhdGlvblF1ZXVlKTtcbiAgICAgICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJMb29rdXAgbXV0YXRpb24gZG9jdW1lbnRzXCIsIFwicmVhZG9ubHlcIiwgKGUgPT4gci5DbihlLCB0KS5uZXh0KCh0ID0+IHQgPyBuLmxvY2FsRG9jdW1lbnRzLmdldERvY3VtZW50cyhlLCB0KSA6IFBlcnNpc3RlbmNlUHJvbWlzZS5yZXNvbHZlKG51bGwpKSkpKTtcbiAgICB9XG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbiAgICAoaS5sb2NhbFN0b3JlLCB0KTtcbiAgICBudWxsICE9PSBzID8gKFwicGVuZGluZ1wiID09PSBuID8gXG4gICAgLy8gSWYgd2UgYXJlIHRoZSBwcmltYXJ5IGNsaWVudCwgd2UgbmVlZCB0byBzZW5kIHRoaXMgd3JpdGUgdG8gdGhlXG4gICAgLy8gYmFja2VuZC4gU2Vjb25kYXJ5IGNsaWVudHMgd2lsbCBpZ25vcmUgdGhlc2Ugd3JpdGVzIHNpbmNlIHRoZWlyIHJlbW90ZVxuICAgIC8vIGNvbm5lY3Rpb24gaXMgZGlzYWJsZWQuXG4gICAgYXdhaXQgX19QUklWQVRFX2ZpbGxXcml0ZVBpcGVsaW5lKGkucmVtb3RlU3RvcmUpIDogXCJhY2tub3dsZWRnZWRcIiA9PT0gbiB8fCBcInJlamVjdGVkXCIgPT09IG4gPyAoXG4gICAgLy8gTk9URTogQm90aCB0aGVzZSBtZXRob2RzIGFyZSBuby1vcHMgZm9yIGJhdGNoZXMgdGhhdCBvcmlnaW5hdGVkIGZyb21cbiAgICAvLyBvdGhlciBjbGllbnRzLlxuICAgIF9fUFJJVkFURV9wcm9jZXNzVXNlckNhbGxiYWNrKGksIHQsIHIgfHwgbnVsbCksIF9fUFJJVkFURV90cmlnZ2VyUGVuZGluZ1dyaXRlc0NhbGxiYWNrcyhpLCB0KSwgXG4gICAgZnVuY3Rpb24gX19QUklWQVRFX2xvY2FsU3RvcmVSZW1vdmVDYWNoZWRNdXRhdGlvbkJhdGNoTWV0YWRhdGEoZSwgdCkge1xuICAgICAgICBfX1BSSVZBVEVfZGVidWdDYXN0KF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSkubXV0YXRpb25RdWV1ZSkuRm4odCk7XG4gICAgfVxuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG4gICAgKGkubG9jYWxTdG9yZSwgdCkpIDogZmFpbCgpLCBhd2FpdCBfX1BSSVZBVEVfc3luY0VuZ2luZUVtaXROZXdTbmFwc0FuZE5vdGlmeUxvY2FsU3RvcmUoaSwgcykpIDogXG4gICAgLy8gQSB0aHJvdHRsZWQgdGFiIG1heSBub3QgaGF2ZSBzZWVuIHRoZSBtdXRhdGlvbiBiZWZvcmUgaXQgd2FzIGNvbXBsZXRlZFxuICAgIC8vIGFuZCByZW1vdmVkIGZyb20gdGhlIG11dGF0aW9uIHF1ZXVlLCBpbiB3aGljaCBjYXNlIHdlIHdvbid0IGhhdmUgY2FjaGVkXG4gICAgLy8gdGhlIGFmZmVjdGVkIGRvY3VtZW50cy4gSW4gdGhpcyBjYXNlIHdlIGNhbiBzYWZlbHkgaWdub3JlIHRoZSB1cGRhdGVcbiAgICAvLyBzaW5jZSB0aGF0IG1lYW5zIHdlIGRpZG4ndCBhcHBseSB0aGUgbXV0YXRpb24gbG9jYWxseSBhdCBhbGwgKGlmIHdlXG4gICAgLy8gaGFkLCB3ZSB3b3VsZCBoYXZlIGNhY2hlZCB0aGUgYWZmZWN0ZWQgZG9jdW1lbnRzKSwgYW5kIHNvIHdlIHdpbGwganVzdFxuICAgIC8vIHNlZSBhbnkgcmVzdWx0aW5nIGRvY3VtZW50IGNoYW5nZXMgdmlhIG5vcm1hbCByZW1vdGUgZG9jdW1lbnQgdXBkYXRlc1xuICAgIC8vIGFzIGFwcGxpY2FibGUuXG4gICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiU3luY0VuZ2luZVwiLCBcIkNhbm5vdCBhcHBseSBtdXRhdGlvbiBiYXRjaCB3aXRoIGlkOiBcIiArIHQpO1xufVxuXG4vKiogQXBwbGllcyBhIHF1ZXJ5IHRhcmdldCBjaGFuZ2UgZnJvbSBhIGRpZmZlcmVudCB0YWIuICovXG4vLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX3N5bmNFbmdpbmVBcHBseVByaW1hcnlTdGF0ZShlLCB0KSB7XG4gICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgaWYgKF9fUFJJVkFURV9lbnN1cmVXYXRjaENhbGxiYWNrcyhuKSwgX19QUklWQVRFX3N5bmNFbmdpbmVFbnN1cmVXcml0ZUNhbGxiYWNrcyhuKSwgXG4gICAgITAgPT09IHQgJiYgITAgIT09IG4uQ2EpIHtcbiAgICAgICAgLy8gU2Vjb25kYXJ5IHRhYnMgb25seSBtYWludGFpbiBWaWV3cyBmb3IgdGhlaXIgbG9jYWwgbGlzdGVuZXJzIGFuZCB0aGVcbiAgICAgICAgLy8gVmlld3MgaW50ZXJuYWwgc3RhdGUgbWF5IG5vdCBiZSAxMDAlIHBvcHVsYXRlZCAoaW4gcGFydGljdWxhclxuICAgICAgICAvLyBzZWNvbmRhcnkgdGFicyBkb24ndCB0cmFjayBzeW5jZWREb2N1bWVudHMsIHRoZSBzZXQgb2YgZG9jdW1lbnRzIHRoZVxuICAgICAgICAvLyBzZXJ2ZXIgY29uc2lkZXJzIHRvIGJlIGluIHRoZSB0YXJnZXQpLiBTbyB3aGVuIGEgc2Vjb25kYXJ5IGJlY29tZXNcbiAgICAgICAgLy8gcHJpbWFyeSwgd2UgbmVlZCB0byBuZWVkIHRvIG1ha2Ugc3VyZSB0aGF0IGFsbCB2aWV3cyBmb3IgYWxsIHRhcmdldHNcbiAgICAgICAgLy8gbWF0Y2ggdGhlIHN0YXRlIG9uIGRpc2suXG4gICAgICAgIGNvbnN0IGUgPSBuLnNoYXJlZENsaWVudFN0YXRlLmdldEFsbEFjdGl2ZVF1ZXJ5VGFyZ2V0cygpLCB0ID0gYXdhaXQgX19QUklWQVRFX3N5bmNocm9uaXplUXVlcnlWaWV3c0FuZFJhaXNlU25hcHNob3RzKG4sIGUudG9BcnJheSgpKTtcbiAgICAgICAgbi5DYSA9ICEwLCBhd2FpdCBfX1BSSVZBVEVfcmVtb3RlU3RvcmVBcHBseVByaW1hcnlTdGF0ZShuLnJlbW90ZVN0b3JlLCAhMCk7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiB0KSBfX1BSSVZBVEVfcmVtb3RlU3RvcmVMaXN0ZW4obi5yZW1vdGVTdG9yZSwgZSk7XG4gICAgfSBlbHNlIGlmICghMSA9PT0gdCAmJiAhMSAhPT0gbi5DYSkge1xuICAgICAgICBjb25zdCBlID0gW107XG4gICAgICAgIGxldCB0ID0gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIG4uZmEuZm9yRWFjaCgoKHIsIGkpID0+IHtcbiAgICAgICAgICAgIG4uc2hhcmVkQ2xpZW50U3RhdGUuaXNMb2NhbFF1ZXJ5VGFyZ2V0KGkpID8gZS5wdXNoKGkpIDogdCA9IHQudGhlbigoKCkgPT4gKF9fUFJJVkFURV9yZW1vdmVBbmRDbGVhbnVwVGFyZ2V0KG4sIGkpLCBcbiAgICAgICAgICAgIF9fUFJJVkFURV9sb2NhbFN0b3JlUmVsZWFzZVRhcmdldChuLmxvY2FsU3RvcmUsIGksIFxuICAgICAgICAgICAgLyprZWVwUGVyc2lzdGVkVGFyZ2V0RGF0YT0qLyAhMCkpKSksIF9fUFJJVkFURV9yZW1vdGVTdG9yZVVubGlzdGVuKG4ucmVtb3RlU3RvcmUsIGkpO1xuICAgICAgICB9KSksIGF3YWl0IHQsIGF3YWl0IF9fUFJJVkFURV9zeW5jaHJvbml6ZVF1ZXJ5Vmlld3NBbmRSYWlzZVNuYXBzaG90cyhuLCBlKSwgXG4gICAgICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG4gICAgICAgIGZ1bmN0aW9uIF9fUFJJVkFURV9yZXNldExpbWJvRG9jdW1lbnRzKGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgICAgICAgICAgdC55YS5mb3JFYWNoKCgoZSwgbikgPT4ge1xuICAgICAgICAgICAgICAgIF9fUFJJVkFURV9yZW1vdGVTdG9yZVVubGlzdGVuKHQucmVtb3RlU3RvcmUsIG4pO1xuICAgICAgICAgICAgfSkpLCB0LndhLlZyKCksIHQueWEgPSBuZXcgTWFwLCB0LnBhID0gbmV3IFNvcnRlZE1hcChEb2N1bWVudEtleS5jb21wYXJhdG9yKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIFJlY29uY2lsZSB0aGUgcXVlcnkgdmlld3Mgb2YgdGhlIHByb3ZpZGVkIHF1ZXJ5IHRhcmdldHMgd2l0aCB0aGUgc3RhdGUgZnJvbVxuICogcGVyc2lzdGVuY2UuIFJhaXNlcyBzbmFwc2hvdHMgZm9yIGFueSBjaGFuZ2VzIHRoYXQgYWZmZWN0IHRoZSBsb2NhbFxuICogY2xpZW50IGFuZCByZXR1cm5zIHRoZSB1cGRhdGVkIHN0YXRlIG9mIGFsbCB0YXJnZXQncyBxdWVyeSBkYXRhLlxuICpcbiAqIEBwYXJhbSBzeW5jRW5naW5lIC0gVGhlIHN5bmMgZW5naW5lIGltcGxlbWVudGF0aW9uXG4gKiBAcGFyYW0gdGFyZ2V0cyAtIHRoZSBsaXN0IG9mIHRhcmdldHMgd2l0aCB2aWV3cyB0aGF0IG5lZWQgdG8gYmUgcmVjb21wdXRlZFxuICogQHBhcmFtIHRyYW5zaXRpb25Ub1ByaW1hcnkgLSBgdHJ1ZWAgaWZmIHRoZSB0YWIgdHJhbnNpdGlvbnMgZnJvbSBhIHNlY29uZGFyeVxuICogdGFiIHRvIGEgcHJpbWFyeSB0YWJcbiAqL1xuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuICAgICAgICAobiksIG4uQ2EgPSAhMSwgYXdhaXQgX19QUklWQVRFX3JlbW90ZVN0b3JlQXBwbHlQcmltYXJ5U3RhdGUobi5yZW1vdGVTdG9yZSwgITEpO1xuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX3N5bmNocm9uaXplUXVlcnlWaWV3c0FuZFJhaXNlU25hcHNob3RzKGUsIHQsIG4pIHtcbiAgICBjb25zdCByID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKSwgaSA9IFtdLCBzID0gW107XG4gICAgZm9yIChjb25zdCBlIG9mIHQpIHtcbiAgICAgICAgbGV0IHQ7XG4gICAgICAgIGNvbnN0IG4gPSByLmZhLmdldChlKTtcbiAgICAgICAgaWYgKG4gJiYgMCAhPT0gbi5sZW5ndGgpIHtcbiAgICAgICAgICAgIC8vIEZvciBxdWVyaWVzIHRoYXQgaGF2ZSBhIGxvY2FsIFZpZXcsIHdlIGZldGNoIHRoZWlyIGN1cnJlbnQgc3RhdGVcbiAgICAgICAgICAgIC8vIGZyb20gTG9jYWxTdG9yZSAoYXMgdGhlIHJlc3VtZSB0b2tlbiBhbmQgdGhlIHNuYXBzaG90IHZlcnNpb25cbiAgICAgICAgICAgIC8vIG1pZ2h0IGhhdmUgY2hhbmdlZCkgYW5kIHJlY29uY2lsZSB0aGVpciB2aWV3cyB3aXRoIHRoZSBwZXJzaXN0ZWRcbiAgICAgICAgICAgIC8vIHN0YXRlICh0aGUgbGlzdCBvZiBzeW5jZWREb2N1bWVudHMgbWF5IGhhdmUgZ290dGVuIG91dCBvZiBzeW5jKS5cbiAgICAgICAgICAgIHQgPSBhd2FpdCBfX1BSSVZBVEVfbG9jYWxTdG9yZUFsbG9jYXRlVGFyZ2V0KHIubG9jYWxTdG9yZSwgX19QUklWQVRFX3F1ZXJ5VG9UYXJnZXQoblswXSkpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBlIG9mIG4pIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gci5tYS5nZXQoZSksIG4gPSBhd2FpdCBfX1BSSVZBVEVfc3luY2hyb25pemVWaWV3QW5kQ29tcHV0ZVNuYXBzaG90KHIsIHQpO1xuICAgICAgICAgICAgICAgIG4uc25hcHNob3QgJiYgcy5wdXNoKG4uc25hcHNob3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gRm9yIHF1ZXJpZXMgdGhhdCBuZXZlciBleGVjdXRlZCBvbiB0aGlzIGNsaWVudCwgd2UgbmVlZCB0b1xuICAgICAgICAgICAgLy8gYWxsb2NhdGUgdGhlIHRhcmdldCBpbiBMb2NhbFN0b3JlIGFuZCBpbml0aWFsaXplIGEgbmV3IFZpZXcuXG4gICAgICAgICAgICBjb25zdCBuID0gYXdhaXQgX19QUklWQVRFX2xvY2FsU3RvcmVHZXRDYWNoZWRUYXJnZXQoci5sb2NhbFN0b3JlLCBlKTtcbiAgICAgICAgICAgIHQgPSBhd2FpdCBfX1BSSVZBVEVfbG9jYWxTdG9yZUFsbG9jYXRlVGFyZ2V0KHIubG9jYWxTdG9yZSwgbiksIGF3YWl0IF9fUFJJVkFURV9pbml0aWFsaXplVmlld0FuZENvbXB1dGVTbmFwc2hvdChyLCBfX1BSSVZBVEVfc3ludGhlc2l6ZVRhcmdldFRvUXVlcnkobiksIGUsIFxuICAgICAgICAgICAgLypjdXJyZW50PSovICExLCB0LnJlc3VtZVRva2VuKTtcbiAgICAgICAgfVxuICAgICAgICBpLnB1c2godCk7XG4gICAgfVxuICAgIHJldHVybiByLlZhLmFfKHMpLCBpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBgUXVlcnlgIG9iamVjdCBmcm9tIHRoZSBzcGVjaWZpZWQgYFRhcmdldGAuIFRoZXJlIGlzIG5vIHdheSB0b1xuICogb2J0YWluIHRoZSBvcmlnaW5hbCBgUXVlcnlgLCBzbyB3ZSBzeW50aGVzaXplIGEgYFF1ZXJ5YCBmcm9tIHRoZSBgVGFyZ2V0YFxuICogb2JqZWN0LlxuICpcbiAqIFRoZSBzeW50aGVzaXplZCByZXN1bHQgbWlnaHQgYmUgZGlmZmVyZW50IGZyb20gdGhlIG9yaWdpbmFsIGBRdWVyeWAsIGJ1dFxuICogc2luY2UgdGhlIHN5bnRoZXNpemVkIGBRdWVyeWAgc2hvdWxkIHJldHVybiB0aGUgc2FtZSByZXN1bHRzIGFzIHRoZVxuICogb3JpZ2luYWwgb25lIChvbmx5IHRoZSBwcmVzZW50YXRpb24gb2YgcmVzdWx0cyBtaWdodCBkaWZmZXIpLCB0aGUgcG90ZW50aWFsXG4gKiBkaWZmZXJlbmNlIHdpbGwgbm90IGNhdXNlIGlzc3Vlcy5cbiAqL1xuLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbmZ1bmN0aW9uIF9fUFJJVkFURV9zeW50aGVzaXplVGFyZ2V0VG9RdWVyeShlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9uZXdRdWVyeShlLnBhdGgsIGUuY29sbGVjdGlvbkdyb3VwLCBlLm9yZGVyQnksIGUuZmlsdGVycywgZS5saW1pdCwgXCJGXCIgLyogTGltaXRUeXBlLkZpcnN0ICovICwgZS5zdGFydEF0LCBlLmVuZEF0KTtcbn1cblxuLyoqIFJldHVybnMgdGhlIElEcyBvZiB0aGUgY2xpZW50cyB0aGF0IGFyZSBjdXJyZW50bHkgYWN0aXZlLiAqL1xuLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbmZ1bmN0aW9uIF9fUFJJVkFURV9zeW5jRW5naW5lR2V0QWN0aXZlQ2xpZW50cyhlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9sb2NhbFN0b3JlR2V0QWN0aXZlQ2xpZW50cyhlKSB7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfZGVidWdDYXN0KF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSkucGVyc2lzdGVuY2UpLkJpKCk7XG4gICAgfShfX1BSSVZBVEVfZGVidWdDYXN0KGUpLmxvY2FsU3RvcmUpO1xufVxuXG4vKiogQXBwbGllcyBhIHF1ZXJ5IHRhcmdldCBjaGFuZ2UgZnJvbSBhIGRpZmZlcmVudCB0YWIuICovXG4vLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX3N5bmNFbmdpbmVBcHBseVRhcmdldFN0YXRlKGUsIHQsIG4sIHIpIHtcbiAgICBjb25zdCBpID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICBpZiAoaS5DYSkgXG4gICAgLy8gSWYgd2UgcmVjZWl2ZSBhIHRhcmdldCBzdGF0ZSBub3RpZmljYXRpb24gdmlhIFdlYlN0b3JhZ2UsIHdlIGFyZVxuICAgIC8vIGVpdGhlciBhbHJlYWR5IHNlY29uZGFyeSBvciBhbm90aGVyIHRhYiBoYXMgdGFrZW4gdGhlIHByaW1hcnkgbGVhc2UuXG4gICAgcmV0dXJuIHZvaWQgX19QUklWQVRFX2xvZ0RlYnVnKFwiU3luY0VuZ2luZVwiLCBcIklnbm9yaW5nIHVuZXhwZWN0ZWQgcXVlcnkgc3RhdGUgbm90aWZpY2F0aW9uLlwiKTtcbiAgICBjb25zdCBzID0gaS5mYS5nZXQodCk7XG4gICAgaWYgKHMgJiYgcy5sZW5ndGggPiAwKSBzd2l0Y2ggKG4pIHtcbiAgICAgIGNhc2UgXCJjdXJyZW50XCI6XG4gICAgICBjYXNlIFwibm90LWN1cnJlbnRcIjpcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgZSA9IGF3YWl0IF9fUFJJVkFURV9sb2NhbFN0b3JlR2V0TmV3RG9jdW1lbnRDaGFuZ2VzKGkubG9jYWxTdG9yZSwgX19QUklWQVRFX3F1ZXJ5Q29sbGVjdGlvbkdyb3VwKHNbMF0pKSwgciA9IFJlbW90ZUV2ZW50LmNyZWF0ZVN5bnRoZXNpemVkUmVtb3RlRXZlbnRGb3JDdXJyZW50Q2hhbmdlKHQsIFwiY3VycmVudFwiID09PSBuLCBCeXRlU3RyaW5nLkVNUFRZX0JZVEVfU1RSSU5HKTtcbiAgICAgICAgICAgIGF3YWl0IF9fUFJJVkFURV9zeW5jRW5naW5lRW1pdE5ld1NuYXBzQW5kTm90aWZ5TG9jYWxTdG9yZShpLCBlLCByKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgIGNhc2UgXCJyZWplY3RlZFwiOlxuICAgICAgICBhd2FpdCBfX1BSSVZBVEVfbG9jYWxTdG9yZVJlbGVhc2VUYXJnZXQoaS5sb2NhbFN0b3JlLCB0LCBcbiAgICAgICAgLyoga2VlcFBlcnNpc3RlZFRhcmdldERhdGEgKi8gITApLCBfX1BSSVZBVEVfcmVtb3ZlQW5kQ2xlYW51cFRhcmdldChpLCB0LCByKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGZhaWwoKTtcbiAgICB9XG59XG5cbi8qKiBBZGRzIG9yIHJlbW92ZXMgV2F0Y2ggdGFyZ2V0cyBmb3IgcXVlcmllcyBmcm9tIGRpZmZlcmVudCB0YWJzLiAqLyBhc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfc3luY0VuZ2luZUFwcGx5QWN0aXZlVGFyZ2V0c0NoYW5nZShlLCB0LCBuKSB7XG4gICAgY29uc3QgciA9IF9fUFJJVkFURV9lbnN1cmVXYXRjaENhbGxiYWNrcyhlKTtcbiAgICBpZiAoci5DYSkge1xuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdCkge1xuICAgICAgICAgICAgaWYgKHIuZmEuaGFzKGUpKSB7XG4gICAgICAgICAgICAgICAgLy8gQSB0YXJnZXQgbWlnaHQgaGF2ZSBiZWVuIGFkZGVkIGluIGEgcHJldmlvdXMgYXR0ZW1wdFxuICAgICAgICAgICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlN5bmNFbmdpbmVcIiwgXCJBZGRpbmcgYW4gYWxyZWFkeSBhY3RpdmUgdGFyZ2V0IFwiICsgZSk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB0ID0gYXdhaXQgX19QUklWQVRFX2xvY2FsU3RvcmVHZXRDYWNoZWRUYXJnZXQoci5sb2NhbFN0b3JlLCBlKSwgbiA9IGF3YWl0IF9fUFJJVkFURV9sb2NhbFN0b3JlQWxsb2NhdGVUYXJnZXQoci5sb2NhbFN0b3JlLCB0KTtcbiAgICAgICAgICAgIGF3YWl0IF9fUFJJVkFURV9pbml0aWFsaXplVmlld0FuZENvbXB1dGVTbmFwc2hvdChyLCBfX1BSSVZBVEVfc3ludGhlc2l6ZVRhcmdldFRvUXVlcnkodCksIG4udGFyZ2V0SWQsIFxuICAgICAgICAgICAgLypjdXJyZW50PSovICExLCBuLnJlc3VtZVRva2VuKSwgX19QUklWQVRFX3JlbW90ZVN0b3JlTGlzdGVuKHIucmVtb3RlU3RvcmUsIG4pO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiBuKSBcbiAgICAgICAgLy8gQ2hlY2sgdGhhdCB0aGUgdGFyZ2V0IGlzIHN0aWxsIGFjdGl2ZSBzaW5jZSB0aGUgdGFyZ2V0IG1pZ2h0IGhhdmUgYmVlblxuICAgICAgICAvLyByZW1vdmVkIGlmIGl0IGhhcyBiZWVuIHJlamVjdGVkIGJ5IHRoZSBiYWNrZW5kLlxuICAgICAgICByLmZhLmhhcyhlKSAmJiBcbiAgICAgICAgLy8gUmVsZWFzZSBxdWVyaWVzIHRoYXQgYXJlIHN0aWxsIGFjdGl2ZS5cbiAgICAgICAgYXdhaXQgX19QUklWQVRFX2xvY2FsU3RvcmVSZWxlYXNlVGFyZ2V0KHIubG9jYWxTdG9yZSwgZSwgXG4gICAgICAgIC8qIGtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhICovICExKS50aGVuKCgoKSA9PiB7XG4gICAgICAgICAgICBfX1BSSVZBVEVfcmVtb3RlU3RvcmVVbmxpc3RlbihyLnJlbW90ZVN0b3JlLCBlKSwgX19QUklWQVRFX3JlbW92ZUFuZENsZWFudXBUYXJnZXQociwgZSk7XG4gICAgICAgIH0pKS5jYXRjaChfX1BSSVZBVEVfaWdub3JlSWZQcmltYXJ5TGVhc2VMb3NzKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9lbnN1cmVXYXRjaENhbGxiYWNrcyhlKSB7XG4gICAgY29uc3QgdCA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgcmV0dXJuIHQucmVtb3RlU3RvcmUucmVtb3RlU3luY2VyLmFwcGx5UmVtb3RlRXZlbnQgPSBfX1BSSVZBVEVfc3luY0VuZ2luZUFwcGx5UmVtb3RlRXZlbnQuYmluZChudWxsLCB0KSwgXG4gICAgdC5yZW1vdGVTdG9yZS5yZW1vdGVTeW5jZXIuZ2V0UmVtb3RlS2V5c0ZvclRhcmdldCA9IF9fUFJJVkFURV9zeW5jRW5naW5lR2V0UmVtb3RlS2V5c0ZvclRhcmdldC5iaW5kKG51bGwsIHQpLCBcbiAgICB0LnJlbW90ZVN0b3JlLnJlbW90ZVN5bmNlci5yZWplY3RMaXN0ZW4gPSBfX1BSSVZBVEVfc3luY0VuZ2luZVJlamVjdExpc3Rlbi5iaW5kKG51bGwsIHQpLCBcbiAgICB0LlZhLmFfID0gX19QUklWQVRFX2V2ZW50TWFuYWdlck9uV2F0Y2hDaGFuZ2UuYmluZChudWxsLCB0LmV2ZW50TWFuYWdlciksIHQuVmEuRmEgPSBfX1BSSVZBVEVfZXZlbnRNYW5hZ2VyT25XYXRjaEVycm9yLmJpbmQobnVsbCwgdC5ldmVudE1hbmFnZXIpLCBcbiAgICB0O1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfc3luY0VuZ2luZUVuc3VyZVdyaXRlQ2FsbGJhY2tzKGUpIHtcbiAgICBjb25zdCB0ID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICByZXR1cm4gdC5yZW1vdGVTdG9yZS5yZW1vdGVTeW5jZXIuYXBwbHlTdWNjZXNzZnVsV3JpdGUgPSBfX1BSSVZBVEVfc3luY0VuZ2luZUFwcGx5U3VjY2Vzc2Z1bFdyaXRlLmJpbmQobnVsbCwgdCksIFxuICAgIHQucmVtb3RlU3RvcmUucmVtb3RlU3luY2VyLnJlamVjdEZhaWxlZFdyaXRlID0gX19QUklWQVRFX3N5bmNFbmdpbmVSZWplY3RGYWlsZWRXcml0ZS5iaW5kKG51bGwsIHQpLCBcbiAgICB0O1xufVxuXG4vKipcbiAqIExvYWRzIGEgRmlyZXN0b3JlIGJ1bmRsZSBpbnRvIHRoZSBTREsuIFRoZSByZXR1cm5lZCBwcm9taXNlIHJlc29sdmVzIHdoZW5cbiAqIHRoZSBidW5kbGUgZmluaXNoZWQgbG9hZGluZy5cbiAqXG4gKiBAcGFyYW0gc3luY0VuZ2luZSAtIFN5bmNFbmdpbmUgdG8gdXNlLlxuICogQHBhcmFtIGJ1bmRsZVJlYWRlciAtIEJ1bmRsZSB0byBsb2FkIGludG8gdGhlIFNESy5cbiAqIEBwYXJhbSB0YXNrIC0gTG9hZEJ1bmRsZVRhc2sgdXNlZCB0byB1cGRhdGUgdGhlIGxvYWRpbmcgcHJvZ3Jlc3MgdG8gcHVibGljIEFQSS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfc3luY0VuZ2luZUxvYWRCdW5kbGUoZSwgdCwgbikge1xuICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcbiAgICAgICAgKFxuICAgIC8qKiBMb2FkcyBhIGJ1bmRsZSBhbmQgcmV0dXJucyB0aGUgbGlzdCBvZiBhZmZlY3RlZCBjb2xsZWN0aW9uIGdyb3Vwcy4gKi9cbiAgICBhc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfbG9hZEJ1bmRsZUltcGwoZSwgdCwgbikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgciA9IGF3YWl0IHQuZ2V0TWV0YWRhdGEoKTtcbiAgICAgICAgICAgIGlmIChhd2FpdCBmdW5jdGlvbiBfX1BSSVZBVEVfbG9jYWxTdG9yZUhhc05ld2VyQnVuZGxlKGUsIHQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKSwgciA9IF9fUFJJVkFURV9mcm9tVmVyc2lvbih0LmNyZWF0ZVRpbWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiaGFzTmV3ZXJCdW5kbGVcIiwgXCJyZWFkb25seVwiLCAoZSA9PiBuLktyLmdldEJ1bmRsZU1ldGFkYXRhKGUsIHQuaWQpKSkudGhlbigoZSA9PiAhIWUgJiYgZS5jcmVhdGVUaW1lLmNvbXBhcmVUbyhyKSA+PSAwKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKipcbiAqIFNhdmVzIHRoZSBnaXZlbiBgQnVuZGxlTWV0YWRhdGFgIHRvIGxvY2FsIHBlcnNpc3RlbmNlLlxuICovIChlLmxvY2FsU3RvcmUsIHIpKSByZXR1cm4gYXdhaXQgdC5jbG9zZSgpLCBuLl9jb21wbGV0ZVdpdGgoZnVuY3Rpb24gX19QUklWQVRFX2J1bmRsZVN1Y2Nlc3NQcm9ncmVzcyhlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgdGFza1N0YXRlOiBcIlN1Y2Nlc3NcIixcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnRzTG9hZGVkOiBlLnRvdGFsRG9jdW1lbnRzLFxuICAgICAgICAgICAgICAgICAgICBieXRlc0xvYWRlZDogZS50b3RhbEJ5dGVzLFxuICAgICAgICAgICAgICAgICAgICB0b3RhbERvY3VtZW50czogZS50b3RhbERvY3VtZW50cyxcbiAgICAgICAgICAgICAgICAgICAgdG90YWxCeXRlczogZS50b3RhbEJ5dGVzXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0ocikpLCBQcm9taXNlLnJlc29sdmUobmV3IFNldCk7XG4gICAgICAgICAgICBuLl91cGRhdGVQcm9ncmVzcyhfX1BSSVZBVEVfYnVuZGxlSW5pdGlhbFByb2dyZXNzKHIpKTtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBuZXcgX19QUklWQVRFX0J1bmRsZUxvYWRlcihyLCBlLmxvY2FsU3RvcmUsIHQuc2VyaWFsaXplcik7XG4gICAgICAgICAgICBsZXQgcyA9IGF3YWl0IHQuTWEoKTtcbiAgICAgICAgICAgIGZvciAoO3M7ICkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBhd2FpdCBpLmVhKHMpO1xuICAgICAgICAgICAgICAgIGUgJiYgbi5fdXBkYXRlUHJvZ3Jlc3MoZSksIHMgPSBhd2FpdCB0Lk1hKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBvID0gYXdhaXQgaS5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IF9fUFJJVkFURV9zeW5jRW5naW5lRW1pdE5ld1NuYXBzQW5kTm90aWZ5TG9jYWxTdG9yZShlLCBvLnJhLCBcbiAgICAgICAgICAgIC8qIHJlbW90ZUV2ZW50ICovIHZvaWQgMCksIFxuICAgICAgICAgICAgLy8gU2F2ZSBtZXRhZGF0YSwgc28gbG9hZGluZyB0aGUgc2FtZSBidW5kbGUgd2lsbCBza2lwLlxuICAgICAgICAgICAgYXdhaXQgZnVuY3Rpb24gX19QUklWQVRFX2xvY2FsU3RvcmVTYXZlQnVuZGxlKGUsIHQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIlNhdmUgYnVuZGxlXCIsIFwicmVhZHdyaXRlXCIsIChlID0+IG4uS3Iuc2F2ZUJ1bmRsZU1ldGFkYXRhKGUsIHQpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKipcbiAqIFJldHVybnMgYSBwcm9taXNlIG9mIGEgYE5hbWVkUXVlcnlgIGFzc29jaWF0ZWQgd2l0aCBnaXZlbiBxdWVyeSBuYW1lLiBQcm9taXNlXG4gKiByZXNvbHZlcyB0byB1bmRlZmluZWQgaWYgbm8gcGVyc2lzdGVkIGRhdGEgY2FuIGJlIGZvdW5kLlxuICovIChlLmxvY2FsU3RvcmUsIHIpLCBuLl9jb21wbGV0ZVdpdGgoby5wcm9ncmVzcyksIFByb21pc2UucmVzb2x2ZShvLm5hKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9sb2dXYXJuKFwiU3luY0VuZ2luZVwiLCBgTG9hZGluZyBidW5kbGUgZmFpbGVkIHdpdGggJHtlfWApLCBuLl9mYWlsV2l0aChlKSwgXG4gICAgICAgICAgICBQcm9taXNlLnJlc29sdmUobmV3IFNldCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbiAgICAvKipcbiAqIFByb3ZpZGVzIGFsbCBjb21wb25lbnRzIG5lZWRlZCBmb3IgRmlyZXN0b3JlIHdpdGggaW4tbWVtb3J5IHBlcnNpc3RlbmNlLlxuICogVXNlcyBFYWdlckdDIGdhcmJhZ2UgY29sbGVjdGlvbi5cbiAqLykociwgdCwgbikudGhlbigoZSA9PiB7XG4gICAgICAgIHIuc2hhcmVkQ2xpZW50U3RhdGUubm90aWZ5QnVuZGxlTG9hZGVkKGUpO1xuICAgIH0pKTtcbn1cblxuY2xhc3MgTWVtb3J5T2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5zeW5jaHJvbml6ZVRhYnMgPSAhMTtcbiAgICB9XG4gICAgYXN5bmMgaW5pdGlhbGl6ZShlKSB7XG4gICAgICAgIHRoaXMuc2VyaWFsaXplciA9IF9fUFJJVkFURV9uZXdTZXJpYWxpemVyKGUuZGF0YWJhc2VJbmZvLmRhdGFiYXNlSWQpLCB0aGlzLnNoYXJlZENsaWVudFN0YXRlID0gdGhpcy5jcmVhdGVTaGFyZWRDbGllbnRTdGF0ZShlKSwgXG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2UgPSB0aGlzLmNyZWF0ZVBlcnNpc3RlbmNlKGUpLCBhd2FpdCB0aGlzLnBlcnNpc3RlbmNlLnN0YXJ0KCksIHRoaXMubG9jYWxTdG9yZSA9IHRoaXMuY3JlYXRlTG9jYWxTdG9yZShlKSwgXG4gICAgICAgIHRoaXMuZ2NTY2hlZHVsZXIgPSB0aGlzLmNyZWF0ZUdhcmJhZ2VDb2xsZWN0aW9uU2NoZWR1bGVyKGUsIHRoaXMubG9jYWxTdG9yZSksIHRoaXMuaW5kZXhCYWNrZmlsbGVyU2NoZWR1bGVyID0gdGhpcy5jcmVhdGVJbmRleEJhY2tmaWxsZXJTY2hlZHVsZXIoZSwgdGhpcy5sb2NhbFN0b3JlKTtcbiAgICB9XG4gICAgY3JlYXRlR2FyYmFnZUNvbGxlY3Rpb25TY2hlZHVsZXIoZSwgdCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY3JlYXRlSW5kZXhCYWNrZmlsbGVyU2NoZWR1bGVyKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNyZWF0ZUxvY2FsU3RvcmUoZSkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX25ld0xvY2FsU3RvcmUodGhpcy5wZXJzaXN0ZW5jZSwgbmV3IF9fUFJJVkFURV9RdWVyeUVuZ2luZSwgZS5pbml0aWFsVXNlciwgdGhpcy5zZXJpYWxpemVyKTtcbiAgICB9XG4gICAgY3JlYXRlUGVyc2lzdGVuY2UoZSkge1xuICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9NZW1vcnlQZXJzaXN0ZW5jZShfX1BSSVZBVEVfTWVtb3J5RWFnZXJEZWxlZ2F0ZS5qciwgdGhpcy5zZXJpYWxpemVyKTtcbiAgICB9XG4gICAgY3JlYXRlU2hhcmVkQ2xpZW50U3RhdGUoZSkge1xuICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9NZW1vcnlTaGFyZWRDbGllbnRTdGF0ZTtcbiAgICB9XG4gICAgYXN5bmMgdGVybWluYXRlKCkge1xuICAgICAgICB0aGlzLmdjU2NoZWR1bGVyICYmIHRoaXMuZ2NTY2hlZHVsZXIuc3RvcCgpLCBhd2FpdCB0aGlzLnNoYXJlZENsaWVudFN0YXRlLnNodXRkb3duKCksIFxuICAgICAgICBhd2FpdCB0aGlzLnBlcnNpc3RlbmNlLnNodXRkb3duKCk7XG4gICAgfVxufVxuXG5jbGFzcyBfX1BSSVZBVEVfTHJ1R2NNZW1vcnlPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIgZXh0ZW5kcyBNZW1vcnlPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5jYWNoZVNpemVCeXRlcyA9IGU7XG4gICAgfVxuICAgIGNyZWF0ZUdhcmJhZ2VDb2xsZWN0aW9uU2NoZWR1bGVyKGUsIHQpIHtcbiAgICAgICAgX19QUklWQVRFX2hhcmRBc3NlcnQodGhpcy5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZSBpbnN0YW5jZW9mIF9fUFJJVkFURV9NZW1vcnlMcnVEZWxlZ2F0ZSk7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLnBlcnNpc3RlbmNlLnJlZmVyZW5jZURlbGVnYXRlLmdhcmJhZ2VDb2xsZWN0b3I7XG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX0xydVNjaGVkdWxlcihuLCBlLmFzeW5jUXVldWUsIHQpO1xuICAgIH1cbiAgICBjcmVhdGVQZXJzaXN0ZW5jZShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSB2b2lkIDAgIT09IHRoaXMuY2FjaGVTaXplQnl0ZXMgPyBMcnVQYXJhbXMud2l0aENhY2hlU2l6ZSh0aGlzLmNhY2hlU2l6ZUJ5dGVzKSA6IExydVBhcmFtcy5ERUZBVUxUO1xuICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9NZW1vcnlQZXJzaXN0ZW5jZSgoZSA9PiBfX1BSSVZBVEVfTWVtb3J5THJ1RGVsZWdhdGUuanIoZSwgdCkpLCB0aGlzLnNlcmlhbGl6ZXIpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBQcm92aWRlcyBhbGwgY29tcG9uZW50cyBuZWVkZWQgZm9yIEZpcmVzdG9yZSB3aXRoIEluZGV4ZWREQiBwZXJzaXN0ZW5jZS5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfSW5kZXhlZERiT2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyIGV4dGVuZHMgTWVtb3J5T2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMueGEgPSBlLCB0aGlzLmNhY2hlU2l6ZUJ5dGVzID0gdCwgdGhpcy5mb3JjZU93bmVyc2hpcCA9IG4sIHRoaXMuc3luY2hyb25pemVUYWJzID0gITE7XG4gICAgfVxuICAgIGFzeW5jIGluaXRpYWxpemUoZSkge1xuICAgICAgICBhd2FpdCBzdXBlci5pbml0aWFsaXplKGUpLCBhd2FpdCB0aGlzLnhhLmluaXRpYWxpemUodGhpcywgZSksIFxuICAgICAgICAvLyBFbnF1ZXVlIHdyaXRlcyBmcm9tIGEgcHJldmlvdXMgc2Vzc2lvblxuICAgICAgICBhd2FpdCBfX1BSSVZBVEVfc3luY0VuZ2luZUVuc3VyZVdyaXRlQ2FsbGJhY2tzKHRoaXMueGEuc3luY0VuZ2luZSksIGF3YWl0IF9fUFJJVkFURV9maWxsV3JpdGVQaXBlbGluZSh0aGlzLnhhLnJlbW90ZVN0b3JlKSwgXG4gICAgICAgIC8vIE5PVEU6IFRoaXMgd2lsbCBpbW1lZGlhdGVseSBjYWxsIHRoZSBsaXN0ZW5lciwgc28gd2UgbWFrZSBzdXJlIHRvXG4gICAgICAgIC8vIHNldCBpdCBhZnRlciBsb2NhbFN0b3JlIC8gcmVtb3RlU3RvcmUgYXJlIHN0YXJ0ZWQuXG4gICAgICAgIGF3YWl0IHRoaXMucGVyc2lzdGVuY2UubWkoKCgpID0+ICh0aGlzLmdjU2NoZWR1bGVyICYmICF0aGlzLmdjU2NoZWR1bGVyLnN0YXJ0ZWQgJiYgdGhpcy5nY1NjaGVkdWxlci5zdGFydCgpLCBcbiAgICAgICAgdGhpcy5pbmRleEJhY2tmaWxsZXJTY2hlZHVsZXIgJiYgIXRoaXMuaW5kZXhCYWNrZmlsbGVyU2NoZWR1bGVyLnN0YXJ0ZWQgJiYgdGhpcy5pbmRleEJhY2tmaWxsZXJTY2hlZHVsZXIuc3RhcnQoKSwgXG4gICAgICAgIFByb21pc2UucmVzb2x2ZSgpKSkpO1xuICAgIH1cbiAgICBjcmVhdGVMb2NhbFN0b3JlKGUpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9uZXdMb2NhbFN0b3JlKHRoaXMucGVyc2lzdGVuY2UsIG5ldyBfX1BSSVZBVEVfUXVlcnlFbmdpbmUsIGUuaW5pdGlhbFVzZXIsIHRoaXMuc2VyaWFsaXplcik7XG4gICAgfVxuICAgIGNyZWF0ZUdhcmJhZ2VDb2xsZWN0aW9uU2NoZWR1bGVyKGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMucGVyc2lzdGVuY2UucmVmZXJlbmNlRGVsZWdhdGUuZ2FyYmFnZUNvbGxlY3RvcjtcbiAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfTHJ1U2NoZWR1bGVyKG4sIGUuYXN5bmNRdWV1ZSwgdCk7XG4gICAgfVxuICAgIGNyZWF0ZUluZGV4QmFja2ZpbGxlclNjaGVkdWxlcihlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgX19QUklWQVRFX0luZGV4QmFja2ZpbGxlcih0LCB0aGlzLnBlcnNpc3RlbmNlKTtcbiAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfSW5kZXhCYWNrZmlsbGVyU2NoZWR1bGVyKGUuYXN5bmNRdWV1ZSwgbik7XG4gICAgfVxuICAgIGNyZWF0ZVBlcnNpc3RlbmNlKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9pbmRleGVkRGJTdG9yYWdlUHJlZml4KGUuZGF0YWJhc2VJbmZvLmRhdGFiYXNlSWQsIGUuZGF0YWJhc2VJbmZvLnBlcnNpc3RlbmNlS2V5KSwgbiA9IHZvaWQgMCAhPT0gdGhpcy5jYWNoZVNpemVCeXRlcyA/IExydVBhcmFtcy53aXRoQ2FjaGVTaXplKHRoaXMuY2FjaGVTaXplQnl0ZXMpIDogTHJ1UGFyYW1zLkRFRkFVTFQ7XG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX0luZGV4ZWREYlBlcnNpc3RlbmNlKHRoaXMuc3luY2hyb25pemVUYWJzLCB0LCBlLmNsaWVudElkLCBuLCBlLmFzeW5jUXVldWUsIF9fUFJJVkFURV9nZXRXaW5kb3coKSwgZ2V0RG9jdW1lbnQoKSwgdGhpcy5zZXJpYWxpemVyLCB0aGlzLnNoYXJlZENsaWVudFN0YXRlLCAhIXRoaXMuZm9yY2VPd25lcnNoaXApO1xuICAgIH1cbiAgICBjcmVhdGVTaGFyZWRDbGllbnRTdGF0ZShlKSB7XG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX01lbW9yeVNoYXJlZENsaWVudFN0YXRlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBQcm92aWRlcyBhbGwgY29tcG9uZW50cyBuZWVkZWQgZm9yIEZpcmVzdG9yZSB3aXRoIG11bHRpLXRhYiBJbmRleGVkREJcbiAqIHBlcnNpc3RlbmNlLlxuICpcbiAqIEluIHRoZSBsZWdhY3kgY2xpZW50LCB0aGlzIHByb3ZpZGVyIGlzIHVzZWQgdG8gcHJvdmlkZSBib3RoIG11bHRpLXRhYiBhbmRcbiAqIG5vbi1tdWx0aS10YWIgcGVyc2lzdGVuY2Ugc2luY2Ugd2UgY2Fubm90IHRlbGwgYXQgYnVpbGQgdGltZSB3aGV0aGVyXG4gKiBgc3luY2hyb25pemVUYWJzYCB3aWxsIGJlIGVuYWJsZWQuXG4gKi8gY2xhc3MgX19QUklWQVRFX011bHRpVGFiT2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyIGV4dGVuZHMgX19QUklWQVRFX0luZGV4ZWREYk9mZmxpbmVDb21wb25lbnRQcm92aWRlciB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICBzdXBlcihlLCB0LCAvKiBmb3JjZU93bmVyc2hpcD0gKi8gITEpLCB0aGlzLnhhID0gZSwgdGhpcy5jYWNoZVNpemVCeXRlcyA9IHQsIHRoaXMuc3luY2hyb25pemVUYWJzID0gITA7XG4gICAgfVxuICAgIGFzeW5jIGluaXRpYWxpemUoZSkge1xuICAgICAgICBhd2FpdCBzdXBlci5pbml0aWFsaXplKGUpO1xuICAgICAgICBjb25zdCB0ID0gdGhpcy54YS5zeW5jRW5naW5lO1xuICAgICAgICB0aGlzLnNoYXJlZENsaWVudFN0YXRlIGluc3RhbmNlb2YgX19QUklWQVRFX1dlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZSAmJiAodGhpcy5zaGFyZWRDbGllbnRTdGF0ZS5zeW5jRW5naW5lID0ge1xuICAgICAgICAgICAgWXM6IF9fUFJJVkFURV9zeW5jRW5naW5lQXBwbHlCYXRjaFN0YXRlLmJpbmQobnVsbCwgdCksXG4gICAgICAgICAgICBaczogX19QUklWQVRFX3N5bmNFbmdpbmVBcHBseVRhcmdldFN0YXRlLmJpbmQobnVsbCwgdCksXG4gICAgICAgICAgICBYczogX19QUklWQVRFX3N5bmNFbmdpbmVBcHBseUFjdGl2ZVRhcmdldHNDaGFuZ2UuYmluZChudWxsLCB0KSxcbiAgICAgICAgICAgIEJpOiBfX1BSSVZBVEVfc3luY0VuZ2luZUdldEFjdGl2ZUNsaWVudHMuYmluZChudWxsLCB0KSxcbiAgICAgICAgICAgIEpzOiBfX1BSSVZBVEVfc3luY0VuZ2luZVN5bmNocm9uaXplV2l0aENoYW5nZWREb2N1bWVudHMuYmluZChudWxsLCB0KVxuICAgICAgICB9LCBhd2FpdCB0aGlzLnNoYXJlZENsaWVudFN0YXRlLnN0YXJ0KCkpLCBcbiAgICAgICAgLy8gTk9URTogVGhpcyB3aWxsIGltbWVkaWF0ZWx5IGNhbGwgdGhlIGxpc3RlbmVyLCBzbyB3ZSBtYWtlIHN1cmUgdG9cbiAgICAgICAgLy8gc2V0IGl0IGFmdGVyIGxvY2FsU3RvcmUgLyByZW1vdGVTdG9yZSBhcmUgc3RhcnRlZC5cbiAgICAgICAgYXdhaXQgdGhpcy5wZXJzaXN0ZW5jZS5taSgoYXN5bmMgZSA9PiB7XG4gICAgICAgICAgICBhd2FpdCBfX1BSSVZBVEVfc3luY0VuZ2luZUFwcGx5UHJpbWFyeVN0YXRlKHRoaXMueGEuc3luY0VuZ2luZSwgZSksIHRoaXMuZ2NTY2hlZHVsZXIgJiYgKGUgJiYgIXRoaXMuZ2NTY2hlZHVsZXIuc3RhcnRlZCA/IHRoaXMuZ2NTY2hlZHVsZXIuc3RhcnQoKSA6IGUgfHwgdGhpcy5nY1NjaGVkdWxlci5zdG9wKCkpLCBcbiAgICAgICAgICAgIHRoaXMuaW5kZXhCYWNrZmlsbGVyU2NoZWR1bGVyICYmIChlICYmICF0aGlzLmluZGV4QmFja2ZpbGxlclNjaGVkdWxlci5zdGFydGVkID8gdGhpcy5pbmRleEJhY2tmaWxsZXJTY2hlZHVsZXIuc3RhcnQoKSA6IGUgfHwgdGhpcy5pbmRleEJhY2tmaWxsZXJTY2hlZHVsZXIuc3RvcCgpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBjcmVhdGVTaGFyZWRDbGllbnRTdGF0ZShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfZ2V0V2luZG93KCk7XG4gICAgICAgIGlmICghX19QUklWQVRFX1dlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZS5EKHQpKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5VTklNUExFTUVOVEVELCBcIkluZGV4ZWREQiBwZXJzaXN0ZW5jZSBpcyBvbmx5IGF2YWlsYWJsZSBvbiBwbGF0Zm9ybXMgdGhhdCBzdXBwb3J0IExvY2FsU3RvcmFnZS5cIik7XG4gICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfaW5kZXhlZERiU3RvcmFnZVByZWZpeChlLmRhdGFiYXNlSW5mby5kYXRhYmFzZUlkLCBlLmRhdGFiYXNlSW5mby5wZXJzaXN0ZW5jZUtleSk7XG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX1dlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZSh0LCBlLmFzeW5jUXVldWUsIG4sIGUuY2xpZW50SWQsIGUuaW5pdGlhbFVzZXIpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBJbml0aWFsaXplcyBhbmQgd2lyZXMgdGhlIGNvbXBvbmVudHMgdGhhdCBhcmUgbmVlZGVkIHRvIGludGVyZmFjZSB3aXRoIHRoZVxuICogbmV0d29yay5cbiAqLyBjbGFzcyBPbmxpbmVDb21wb25lbnRQcm92aWRlciB7XG4gICAgYXN5bmMgaW5pdGlhbGl6ZShlLCB0KSB7XG4gICAgICAgIHRoaXMubG9jYWxTdG9yZSB8fCAodGhpcy5sb2NhbFN0b3JlID0gZS5sb2NhbFN0b3JlLCB0aGlzLnNoYXJlZENsaWVudFN0YXRlID0gZS5zaGFyZWRDbGllbnRTdGF0ZSwgXG4gICAgICAgIHRoaXMuZGF0YXN0b3JlID0gdGhpcy5jcmVhdGVEYXRhc3RvcmUodCksIHRoaXMucmVtb3RlU3RvcmUgPSB0aGlzLmNyZWF0ZVJlbW90ZVN0b3JlKHQpLCBcbiAgICAgICAgdGhpcy5ldmVudE1hbmFnZXIgPSB0aGlzLmNyZWF0ZUV2ZW50TWFuYWdlcih0KSwgdGhpcy5zeW5jRW5naW5lID0gdGhpcy5jcmVhdGVTeW5jRW5naW5lKHQsIFxuICAgICAgICAvKiBzdGFydEFzUHJpbWFyeT0qLyAhZS5zeW5jaHJvbml6ZVRhYnMpLCB0aGlzLnNoYXJlZENsaWVudFN0YXRlLm9ubGluZVN0YXRlSGFuZGxlciA9IGUgPT4gX19QUklWQVRFX3N5bmNFbmdpbmVBcHBseU9ubGluZVN0YXRlQ2hhbmdlKHRoaXMuc3luY0VuZ2luZSwgZSwgMSAvKiBPbmxpbmVTdGF0ZVNvdXJjZS5TaGFyZWRDbGllbnRTdGF0ZSAqLyksIFxuICAgICAgICB0aGlzLnJlbW90ZVN0b3JlLnJlbW90ZVN5bmNlci5oYW5kbGVDcmVkZW50aWFsQ2hhbmdlID0gX19QUklWQVRFX3N5bmNFbmdpbmVIYW5kbGVDcmVkZW50aWFsQ2hhbmdlLmJpbmQobnVsbCwgdGhpcy5zeW5jRW5naW5lKSwgXG4gICAgICAgIGF3YWl0IF9fUFJJVkFURV9yZW1vdGVTdG9yZUFwcGx5UHJpbWFyeVN0YXRlKHRoaXMucmVtb3RlU3RvcmUsIHRoaXMuc3luY0VuZ2luZS5pc1ByaW1hcnlDbGllbnQpKTtcbiAgICB9XG4gICAgY3JlYXRlRXZlbnRNYW5hZ2VyKGUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdFdmVudE1hbmFnZXIoKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9FdmVudE1hbmFnZXJJbXBsO1xuICAgICAgICB9KCk7XG4gICAgfVxuICAgIGNyZWF0ZURhdGFzdG9yZShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfbmV3U2VyaWFsaXplcihlLmRhdGFiYXNlSW5mby5kYXRhYmFzZUlkKSwgbiA9IGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdDb25uZWN0aW9uKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX1dlYkNoYW5uZWxDb25uZWN0aW9uKGUpO1xuICAgICAgICB9XG4gICAgICAgIC8qKiBSZXR1cm4gdGhlIFBsYXRmb3JtLXNwZWNpZmljIGNvbm5lY3Rpdml0eSBtb25pdG9yLiAqLyAoZS5kYXRhYmFzZUluZm8pO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX25ld0RhdGFzdG9yZShlLCB0LCBuLCByKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9EYXRhc3RvcmVJbXBsKGUsIHQsIG4sIHIpO1xuICAgICAgICB9KGUuYXV0aENyZWRlbnRpYWxzLCBlLmFwcENoZWNrQ3JlZGVudGlhbHMsIG4sIHQpO1xuICAgIH1cbiAgICBjcmVhdGVSZW1vdGVTdG9yZShlKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfbmV3UmVtb3RlU3RvcmUoZSwgdCwgbiwgciwgaSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfUmVtb3RlU3RvcmVJbXBsKGUsIHQsIG4sIHIsIGkpO1xuICAgICAgICB9XG4gICAgICAgIC8qKiBSZS1lbmFibGVzIHRoZSBuZXR3b3JrLiBJZGVtcG90ZW50LiAqLyAodGhpcy5sb2NhbFN0b3JlLCB0aGlzLmRhdGFzdG9yZSwgZS5hc3luY1F1ZXVlLCAoZSA9PiBfX1BSSVZBVEVfc3luY0VuZ2luZUFwcGx5T25saW5lU3RhdGVDaGFuZ2UodGhpcy5zeW5jRW5naW5lLCBlLCAwIC8qIE9ubGluZVN0YXRlU291cmNlLlJlbW90ZVN0b3JlICovKSksIGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdDb25uZWN0aXZpdHlNb25pdG9yKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9Ccm93c2VyQ29ubmVjdGl2aXR5TW9uaXRvci5EKCkgPyBuZXcgX19QUklWQVRFX0Jyb3dzZXJDb25uZWN0aXZpdHlNb25pdG9yIDogbmV3IF9fUFJJVkFURV9Ob29wQ29ubmVjdGl2aXR5TW9uaXRvcjtcbiAgICAgICAgfSgpKTtcbiAgICB9XG4gICAgY3JlYXRlU3luY0VuZ2luZShlLCB0KSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfbmV3U3luY0VuZ2luZShlLCB0LCBuLCBcbiAgICAgICAgLy8gUE9SVElORyBOT1RFOiBNYW5hZ2VzIHN0YXRlIHN5bmNocm9uaXphdGlvbiBpbiBtdWx0aS10YWIgZW52aXJvbm1lbnRzLlxuICAgICAgICByLCBpLCBzLCBvKSB7XG4gICAgICAgICAgICBjb25zdCBfID0gbmV3IF9fUFJJVkFURV9TeW5jRW5naW5lSW1wbChlLCB0LCBuLCByLCBpLCBzKTtcbiAgICAgICAgICAgIHJldHVybiBvICYmIChfLkNhID0gITApLCBfO1xuICAgICAgICB9KHRoaXMubG9jYWxTdG9yZSwgdGhpcy5yZW1vdGVTdG9yZSwgdGhpcy5ldmVudE1hbmFnZXIsIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUsIGUuaW5pdGlhbFVzZXIsIGUubWF4Q29uY3VycmVudExpbWJvUmVzb2x1dGlvbnMsIHQpO1xuICAgIH1cbiAgICB0ZXJtaW5hdGUoKSB7XG4gICAgICAgIHJldHVybiBhc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfcmVtb3RlU3RvcmVTaHV0ZG93bihlKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICAgICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIlJlbW90ZVN0b3JlXCIsIFwiUmVtb3RlU3RvcmUgc2h1dHRpbmcgZG93bi5cIiksIHQuQ18uYWRkKDUgLyogT2ZmbGluZUNhdXNlLlNodXRkb3duICovKSwgXG4gICAgICAgICAgICBhd2FpdCBfX1BSSVZBVEVfZGlzYWJsZU5ldHdvcmtJbnRlcm5hbCh0KSwgdC5GXy5zaHV0ZG93bigpLCBcbiAgICAgICAgICAgIC8vIFNldCB0aGUgT25saW5lU3RhdGUgdG8gVW5rbm93biAocmF0aGVyIHRoYW4gT2ZmbGluZSkgdG8gYXZvaWQgcG90ZW50aWFsbHlcbiAgICAgICAgICAgIC8vIHRyaWdnZXJpbmcgc3B1cmlvdXMgbGlzdGVuZXIgZXZlbnRzIHdpdGggY2FjaGVkIGRhdGEsIGV0Yy5cbiAgICAgICAgICAgIHQuTV8uc2V0KFwiVW5rbm93blwiIC8qIE9ubGluZVN0YXRlLlVua25vd24gKi8pO1xuICAgICAgICB9KHRoaXMucmVtb3RlU3RvcmUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogSG93IG1hbnkgYnl0ZXMgdG8gcmVhZCBlYWNoIHRpbWUgd2hlbiBgUmVhZGFibGVTdHJlYW1SZWFkZXIucmVhZCgpYCBpc1xuICogY2FsbGVkLiBPbmx5IGFwcGxpY2FibGUgZm9yIGJ5dGUgc3RyZWFtcyB0aGF0IHdlIGNvbnRyb2wgKGUuZy4gdGhvc2UgYmFja2VkXG4gKiBieSBhbiBVSW50OEFycmF5KS5cbiAqL1xuLyoqXG4gKiBCdWlsZHMgYSBgQnl0ZVN0cmVhbVJlYWRlcmAgZnJvbSBhIFVJbnQ4QXJyYXkuXG4gKiBAcGFyYW0gc291cmNlIC0gVGhlIGRhdGEgc291cmNlIHRvIHVzZS5cbiAqIEBwYXJhbSBieXRlc1BlclJlYWQgLSBIb3cgbWFueSBieXRlcyBlYWNoIGByZWFkKClgIGZyb20gdGhlIHJldHVybmVkIHJlYWRlclxuICogICAgICAgIHdpbGwgcmVhZC5cbiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX3RvQnl0ZVN0cmVhbVJlYWRlckhlbHBlcihlLCB0ID0gMTAyNDApIHtcbiAgICBsZXQgbiA9IDA7XG4gICAgLy8gVGhlIFR5cGVTY3JpcHQgZGVmaW5pdGlvbiBmb3IgUmVhZGFibGVTdHJlYW1SZWFkZXIgY2hhbmdlZC4gV2UgdXNlXG4gICAgLy8gYGFueWAgaGVyZSB0byBhbGxvdyB0aGlzIGNvZGUgdG8gY29tcGlsZSB3aXRoIGRpZmZlcmVudCB2ZXJzaW9ucy5cbiAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL21pY3Jvc29mdC9UeXBlU2NyaXB0L2lzc3Vlcy80Mjk3MFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIGFzeW5jIHJlYWQoKSB7XG4gICAgICAgICAgICBpZiAobiA8IGUuYnl0ZUxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBlLnNsaWNlKG4sIG4gKyB0KSxcbiAgICAgICAgICAgICAgICAgICAgZG9uZTogITFcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHJldHVybiBuICs9IHQsIHI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGRvbmU6ICEwXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICBhc3luYyBjYW5jZWwoKSB7fSxcbiAgICAgICAgcmVsZWFzZUxvY2soKSB7fSxcbiAgICAgICAgY2xvc2VkOiBQcm9taXNlLnJlc29sdmUoKVxuICAgIH07XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIE9uIHdlYiwgYSBgUmVhZGFibGVTdHJlYW1gIGlzIHdyYXBwZWQgYXJvdW5kIGJ5IGEgYEJ5dGVTdHJlYW1SZWFkZXJgLlxuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLypcbiAqIEEgd3JhcHBlciBpbXBsZW1lbnRhdGlvbiBvZiBPYnNlcnZlcjxUPiB0aGF0IHdpbGwgZGlzcGF0Y2ggZXZlbnRzXG4gKiBhc3luY2hyb25vdXNseS4gVG8gYWxsb3cgaW1tZWRpYXRlIHNpbGVuY2luZywgYSBtdXRlIGNhbGwgaXMgYWRkZWQgd2hpY2hcbiAqIGNhdXNlcyBldmVudHMgc2NoZWR1bGVkIHRvIG5vIGxvbmdlciBiZSByYWlzZWQuXG4gKi9cbmNsYXNzIF9fUFJJVkFURV9Bc3luY09ic2VydmVyIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIgPSBlLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZW4gc2V0IHRvIHRydWUsIHdpbGwgbm90IHJhaXNlIGZ1dHVyZSBldmVudHMuIE5lY2Vzc2FyeSB0byBkZWFsIHdpdGhcbiAgICAgICAgICogYXN5bmMgZGV0YWNobWVudCBvZiBsaXN0ZW5lci5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubXV0ZWQgPSAhMTtcbiAgICB9XG4gICAgbmV4dChlKSB7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIubmV4dCAmJiB0aGlzLk9hKHRoaXMub2JzZXJ2ZXIubmV4dCwgZSk7XG4gICAgfVxuICAgIGVycm9yKGUpIHtcbiAgICAgICAgdGhpcy5vYnNlcnZlci5lcnJvciA/IHRoaXMuT2EodGhpcy5vYnNlcnZlci5lcnJvciwgZSkgOiBfX1BSSVZBVEVfbG9nRXJyb3IoXCJVbmNhdWdodCBFcnJvciBpbiBzbmFwc2hvdCBsaXN0ZW5lcjpcIiwgZS50b1N0cmluZygpKTtcbiAgICB9XG4gICAgTmEoKSB7XG4gICAgICAgIHRoaXMubXV0ZWQgPSAhMDtcbiAgICB9XG4gICAgT2EoZSwgdCkge1xuICAgICAgICB0aGlzLm11dGVkIHx8IHNldFRpbWVvdXQoKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMubXV0ZWQgfHwgZSh0KTtcbiAgICAgICAgfSksIDApO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBjbGFzcyByZXByZXNlbnRpbmcgYSBidW5kbGUuXG4gKlxuICogVGFrZXMgYSBidW5kbGUgc3RyZWFtIG9yIGJ1ZmZlciwgYW5kIHByZXNlbnRzIGFic3RyYWN0aW9ucyB0byByZWFkIGJ1bmRsZWRcbiAqIGVsZW1lbnRzIG91dCBvZiB0aGUgdW5kZXJseWluZyBjb250ZW50LlxuICovIGNsYXNzIF9fUFJJVkFURV9CdW5kbGVSZWFkZXJJbXBsIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKiogVGhlIHJlYWRlciB0byByZWFkIGZyb20gdW5kZXJseWluZyBiaW5hcnkgYnVuZGxlIGRhdGEgc291cmNlLiAqL1xuICAgIGUsIHQpIHtcbiAgICAgICAgdGhpcy5CYSA9IGUsIHRoaXMuc2VyaWFsaXplciA9IHQsIFxuICAgICAgICAvKiogQ2FjaGVkIGJ1bmRsZSBtZXRhZGF0YS4gKi9cbiAgICAgICAgdGhpcy5tZXRhZGF0YSA9IG5ldyBfX1BSSVZBVEVfRGVmZXJyZWQsIFxuICAgICAgICAvKipcbiAgICAgICAgICogSW50ZXJuYWwgYnVmZmVyIHRvIGhvbGQgYnVuZGxlIGNvbnRlbnQsIGFjY3VtdWxhdGluZyBpbmNvbXBsZXRlIGVsZW1lbnRcbiAgICAgICAgICogY29udGVudC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYnVmZmVyID0gbmV3IFVpbnQ4QXJyYXksIHRoaXMuTGEgPSBmdW5jdGlvbiBfX1BSSVZBVEVfbmV3VGV4dERlY29kZXIoKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFRleHREZWNvZGVyKFwidXRmLThcIik7XG4gICAgICAgIH0oKSwgXG4gICAgICAgIC8vIFJlYWQgdGhlIG1ldGFkYXRhICh3aGljaCBpcyB0aGUgZmlyc3QgZWxlbWVudCkuXG4gICAgICAgIHRoaXMua2EoKS50aGVuKChlID0+IHtcbiAgICAgICAgICAgIGUgJiYgZS5aXygpID8gdGhpcy5tZXRhZGF0YS5yZXNvbHZlKGUuWV8ubWV0YWRhdGEpIDogdGhpcy5tZXRhZGF0YS5yZWplY3QobmV3IEVycm9yKGBUaGUgZmlyc3QgZWxlbWVudCBvZiB0aGUgYnVuZGxlIGlzIG5vdCBhIG1ldGFkYXRhLCBpdCBpc1xcbiAgICAgICAgICAgICAke0pTT04uc3RyaW5naWZ5KG51bGwgPT0gZSA/IHZvaWQgMCA6IGUuWV8pfWApKTtcbiAgICAgICAgfSksIChlID0+IHRoaXMubWV0YWRhdGEucmVqZWN0KGUpKSk7XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5CYS5jYW5jZWwoKTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0TWV0YWRhdGEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1ldGFkYXRhLnByb21pc2U7XG4gICAgfVxuICAgIGFzeW5jIE1hKCkge1xuICAgICAgICAvLyBNYWtlcyBzdXJlIG1ldGFkYXRhIGlzIHJlYWQgYmVmb3JlIHByb2NlZWRpbmcuXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmdldE1ldGFkYXRhKCksIHRoaXMua2EoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVhZHMgZnJvbSB0aGUgaGVhZCBvZiBpbnRlcm5hbCBidWZmZXIsIGFuZCBwdWxsaW5nIG1vcmUgZGF0YSBmcm9tXG4gICAgICogdW5kZXJseWluZyBzdHJlYW0gaWYgYSBjb21wbGV0ZSBlbGVtZW50IGNhbm5vdCBiZSBmb3VuZCwgdW50aWwgYW5cbiAgICAgKiBlbGVtZW50KGluY2x1ZGluZyB0aGUgcHJlZml4ZWQgbGVuZ3RoIGFuZCB0aGUgSlNPTiBzdHJpbmcpIGlzIGZvdW5kLlxuICAgICAqXG4gICAgICogT25jZSBhIGNvbXBsZXRlIGVsZW1lbnQgaXMgcmVhZCwgaXQgaXMgZHJvcHBlZCBmcm9tIGludGVybmFsIGJ1ZmZlci5cbiAgICAgKlxuICAgICAqIFJldHVybnMgZWl0aGVyIHRoZSBidW5kbGVkIGVsZW1lbnQsIG9yIG51bGwgaWYgd2UgaGF2ZSByZWFjaGVkIHRoZSBlbmQgb2ZcbiAgICAgKiB0aGUgc3RyZWFtLlxuICAgICAqLyAgICBhc3luYyBrYSgpIHtcbiAgICAgICAgY29uc3QgZSA9IGF3YWl0IHRoaXMucWEoKTtcbiAgICAgICAgaWYgKG51bGwgPT09IGUpIHJldHVybiBudWxsO1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5MYS5kZWNvZGUoZSksIG4gPSBOdW1iZXIodCk7XG4gICAgICAgIGlzTmFOKG4pICYmIHRoaXMuUWEoYGxlbmd0aCBzdHJpbmcgKCR7dH0pIGlzIG5vdCB2YWxpZCBudW1iZXJgKTtcbiAgICAgICAgY29uc3QgciA9IGF3YWl0IHRoaXMuS2Eobik7XG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX1NpemVkQnVuZGxlRWxlbWVudChKU09OLnBhcnNlKHIpLCBlLmxlbmd0aCArIG4pO1xuICAgIH1cbiAgICAvKiogRmlyc3QgaW5kZXggb2YgJ3snIGZyb20gdGhlIHVuZGVybHlpbmcgYnVmZmVyLiAqLyAgICAkYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYnVmZmVyLmZpbmRJbmRleCgoZSA9PiBlID09PSBcIntcIi5jaGFyQ29kZUF0KDApKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlYWRzIGZyb20gdGhlIGJlZ2lubmluZyBvZiB0aGUgaW50ZXJuYWwgYnVmZmVyLCB1bnRpbCB0aGUgZmlyc3QgJ3snLCBhbmRcbiAgICAgKiByZXR1cm4gdGhlIGNvbnRlbnQuXG4gICAgICpcbiAgICAgKiBJZiByZWFjaGVkIGVuZCBvZiB0aGUgc3RyZWFtLCByZXR1cm5zIGEgbnVsbC5cbiAgICAgKi8gICAgYXN5bmMgcWEoKSB7XG4gICAgICAgIGZvciAoO3RoaXMuJGEoKSA8IDA7ICkge1xuICAgICAgICAgICAgaWYgKGF3YWl0IHRoaXMuVWEoKSkgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQnJva2Ugb3V0IG9mIHRoZSBsb29wIGJlY2F1c2UgdW5kZXJseWluZyBzdHJlYW0gaXMgY2xvc2VkLCBhbmQgdGhlcmVcbiAgICAgICAgLy8gaGFwcGVucyB0byBiZSBubyBtb3JlIGRhdGEgdG8gcHJvY2Vzcy5cbiAgICAgICAgICAgICAgICBpZiAoMCA9PT0gdGhpcy5idWZmZXIubGVuZ3RoKSByZXR1cm4gbnVsbDtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuJGEoKTtcbiAgICAgICAgLy8gQnJva2Ugb3V0IG9mIHRoZSBsb29wIGJlY2F1c2UgdW5kZXJseWluZyBzdHJlYW0gaXMgY2xvc2VkLCBidXQgc3RpbGxcbiAgICAgICAgLy8gY2Fubm90IGZpbmQgYW4gb3BlbiBicmFja2V0LlxuICAgICAgICAgICAgICAgIGUgPCAwICYmIHRoaXMuUWEoXCJSZWFjaGVkIHRoZSBlbmQgb2YgYnVuZGxlIHdoZW4gYSBsZW5ndGggc3RyaW5nIGlzIGV4cGVjdGVkLlwiKTtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuYnVmZmVyLnNsaWNlKDAsIGUpO1xuICAgICAgICAvLyBVcGRhdGUgdGhlIGludGVybmFsIGJ1ZmZlciB0byBkcm9wIHRoZSByZWFkIGxlbmd0aC5cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5idWZmZXIgPSB0aGlzLmJ1ZmZlci5zbGljZShlKSwgdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVhZHMgZnJvbSBhIHNwZWNpZmllZCBwb3NpdGlvbiBmcm9tIHRoZSBpbnRlcm5hbCBidWZmZXIsIGZvciBhIHNwZWNpZmllZFxuICAgICAqIG51bWJlciBvZiBieXRlcywgcHVsbGluZyBtb3JlIGRhdGEgZnJvbSB0aGUgdW5kZXJseWluZyBzdHJlYW0gaWYgbmVlZGVkLlxuICAgICAqXG4gICAgICogUmV0dXJucyBhIHN0cmluZyBkZWNvZGVkIGZyb20gdGhlIHJlYWQgYnl0ZXMuXG4gICAgICovICAgIGFzeW5jIEthKGUpIHtcbiAgICAgICAgZm9yICg7dGhpcy5idWZmZXIubGVuZ3RoIDwgZTsgKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLlVhKCkgJiYgdGhpcy5RYShcIlJlYWNoZWQgdGhlIGVuZCBvZiBidW5kbGUgd2hlbiBtb3JlIGlzIGV4cGVjdGVkLlwiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0ID0gdGhpcy5MYS5kZWNvZGUodGhpcy5idWZmZXIuc2xpY2UoMCwgZSkpO1xuICAgICAgICAvLyBVcGRhdGUgdGhlIGludGVybmFsIGJ1ZmZlciB0byBkcm9wIHRoZSByZWFkIGpzb24gc3RyaW5nLlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlciA9IHRoaXMuYnVmZmVyLnNsaWNlKGUpLCB0O1xuICAgIH1cbiAgICBRYShlKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcbiAgICAgICAgdGhyb3cgdGhpcy5CYS5jYW5jZWwoKSwgbmV3IEVycm9yKGBJbnZhbGlkIGJ1bmRsZSBmb3JtYXQ6ICR7ZX1gKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHVsbHMgbW9yZSBkYXRhIGZyb20gdW5kZXJseWluZyBzdHJlYW0gdG8gaW50ZXJuYWwgYnVmZmVyLlxuICAgICAqIFJldHVybnMgYSBib29sZWFuIGluZGljYXRpbmcgd2hldGhlciB0aGUgc3RyZWFtIGlzIGZpbmlzaGVkLlxuICAgICAqLyAgICBhc3luYyBVYSgpIHtcbiAgICAgICAgY29uc3QgZSA9IGF3YWl0IHRoaXMuQmEucmVhZCgpO1xuICAgICAgICBpZiAoIWUuZG9uZSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IG5ldyBVaW50OEFycmF5KHRoaXMuYnVmZmVyLmxlbmd0aCArIGUudmFsdWUubGVuZ3RoKTtcbiAgICAgICAgICAgIHQuc2V0KHRoaXMuYnVmZmVyKSwgdC5zZXQoZS52YWx1ZSwgdGhpcy5idWZmZXIubGVuZ3RoKSwgdGhpcy5idWZmZXIgPSB0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlLmRvbmU7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBJbnRlcm5hbCB0cmFuc2FjdGlvbiBvYmplY3QgcmVzcG9uc2libGUgZm9yIGFjY3VtdWxhdGluZyB0aGUgbXV0YXRpb25zIHRvXG4gKiBwZXJmb3JtIGFuZCB0aGUgYmFzZSB2ZXJzaW9ucyBmb3IgYW55IGRvY3VtZW50cyByZWFkLlxuICovXG5jbGFzcyBUcmFuc2FjdGlvbiQyIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHRoaXMuZGF0YXN0b3JlID0gZSwgXG4gICAgICAgIC8vIFRoZSB2ZXJzaW9uIG9mIGVhY2ggZG9jdW1lbnQgdGhhdCB3YXMgcmVhZCBkdXJpbmcgdGhpcyB0cmFuc2FjdGlvbi5cbiAgICAgICAgdGhpcy5yZWFkVmVyc2lvbnMgPSBuZXcgTWFwLCB0aGlzLm11dGF0aW9ucyA9IFtdLCB0aGlzLmNvbW1pdHRlZCA9ICExLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgZGVmZXJyZWQgdXNhZ2UgZXJyb3IgdGhhdCBvY2N1cnJlZCBwcmV2aW91c2x5IGluIHRoaXMgdHJhbnNhY3Rpb24gdGhhdFxuICAgICAgICAgKiB3aWxsIGNhdXNlIHRoZSB0cmFuc2FjdGlvbiB0byBmYWlsIG9uY2UgaXQgYWN0dWFsbHkgY29tbWl0cy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubGFzdFdyaXRlRXJyb3IgPSBudWxsLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldCBvZiBkb2N1bWVudHMgdGhhdCBoYXZlIGJlZW4gd3JpdHRlbiBpbiB0aGUgdHJhbnNhY3Rpb24uXG4gICAgICAgICAqXG4gICAgICAgICAqIFdoZW4gdGhlcmUncyBtb3JlIHRoYW4gb25lIHdyaXRlIHRvIHRoZSBzYW1lIGtleSBpbiBhIHRyYW5zYWN0aW9uLCBhbnlcbiAgICAgICAgICogd3JpdGVzIGFmdGVyIHRoZSBmaXJzdCBhcmUgaGFuZGxlZCBkaWZmZXJlbnRseS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMud3JpdHRlbkRvY3MgPSBuZXcgU2V0O1xuICAgIH1cbiAgICBhc3luYyBsb29rdXAoZSkge1xuICAgICAgICBpZiAodGhpcy5lbnN1cmVDb21taXROb3RDYWxsZWQoKSwgdGhpcy5tdXRhdGlvbnMubGVuZ3RoID4gMCkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgXCJGaXJlc3RvcmUgdHJhbnNhY3Rpb25zIHJlcXVpcmUgYWxsIHJlYWRzIHRvIGJlIGV4ZWN1dGVkIGJlZm9yZSBhbGwgd3JpdGVzLlwiKTtcbiAgICAgICAgY29uc3QgdCA9IGF3YWl0IGFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9pbnZva2VCYXRjaEdldERvY3VtZW50c1JwYyhlLCB0KSB7XG4gICAgICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKSwgciA9IF9fUFJJVkFURV9nZXRFbmNvZGVkRGF0YWJhc2VJZChuLnNlcmlhbGl6ZXIpICsgXCIvZG9jdW1lbnRzXCIsIGkgPSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnRzOiB0Lm1hcCgoZSA9PiBfX1BSSVZBVEVfdG9OYW1lKG4uc2VyaWFsaXplciwgZSkpKVxuICAgICAgICAgICAgfSwgcyA9IGF3YWl0IG4uQ28oXCJCYXRjaEdldERvY3VtZW50c1wiLCByLCBpLCB0Lmxlbmd0aCksIG8gPSBuZXcgTWFwO1xuICAgICAgICAgICAgcy5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX2Zyb21CYXRjaEdldERvY3VtZW50c1Jlc3BvbnNlKG4uc2VyaWFsaXplciwgZSk7XG4gICAgICAgICAgICAgICAgby5zZXQodC5rZXkudG9TdHJpbmcoKSwgdCk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBjb25zdCBfID0gW107XG4gICAgICAgICAgICByZXR1cm4gdC5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gby5nZXQoZS50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICBfX1BSSVZBVEVfaGFyZEFzc2VydCghIXQpLCBfLnB1c2godCk7XG4gICAgICAgICAgICB9KSksIF87XG4gICAgICAgIH0odGhpcy5kYXRhc3RvcmUsIGUpO1xuICAgICAgICByZXR1cm4gdC5mb3JFYWNoKChlID0+IHRoaXMucmVjb3JkVmVyc2lvbihlKSkpLCB0O1xuICAgIH1cbiAgICBzZXQoZSwgdCkge1xuICAgICAgICB0aGlzLndyaXRlKHQudG9NdXRhdGlvbihlLCB0aGlzLnByZWNvbmRpdGlvbihlKSkpLCB0aGlzLndyaXR0ZW5Eb2NzLmFkZChlLnRvU3RyaW5nKCkpO1xuICAgIH1cbiAgICB1cGRhdGUoZSwgdCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy53cml0ZSh0LnRvTXV0YXRpb24oZSwgdGhpcy5wcmVjb25kaXRpb25Gb3JVcGRhdGUoZSkpKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhpcy5sYXN0V3JpdGVFcnJvciA9IGU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy53cml0dGVuRG9jcy5hZGQoZS50b1N0cmluZygpKTtcbiAgICB9XG4gICAgZGVsZXRlKGUpIHtcbiAgICAgICAgdGhpcy53cml0ZShuZXcgX19QUklWQVRFX0RlbGV0ZU11dGF0aW9uKGUsIHRoaXMucHJlY29uZGl0aW9uKGUpKSksIHRoaXMud3JpdHRlbkRvY3MuYWRkKGUudG9TdHJpbmcoKSk7XG4gICAgfVxuICAgIGFzeW5jIGNvbW1pdCgpIHtcbiAgICAgICAgaWYgKHRoaXMuZW5zdXJlQ29tbWl0Tm90Q2FsbGVkKCksIHRoaXMubGFzdFdyaXRlRXJyb3IpIHRocm93IHRoaXMubGFzdFdyaXRlRXJyb3I7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnJlYWRWZXJzaW9ucztcbiAgICAgICAgLy8gRm9yIGVhY2ggbXV0YXRpb24sIG5vdGUgdGhhdCB0aGUgZG9jIHdhcyB3cml0dGVuLlxuICAgICAgICAgICAgICAgIHRoaXMubXV0YXRpb25zLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgZS5kZWxldGUodC5rZXkudG9TdHJpbmcoKSk7XG4gICAgICAgIH0pKSwgXG4gICAgICAgIC8vIEZvciBlYWNoIGRvY3VtZW50IHRoYXQgd2FzIHJlYWQgYnV0IG5vdCB3cml0dGVuIHRvLCB3ZSB3YW50IHRvIHBlcmZvcm1cbiAgICAgICAgLy8gYSBgdmVyaWZ5YCBvcGVyYXRpb24uXG4gICAgICAgIGUuZm9yRWFjaCgoKGUsIHQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBEb2N1bWVudEtleS5mcm9tUGF0aCh0KTtcbiAgICAgICAgICAgIHRoaXMubXV0YXRpb25zLnB1c2gobmV3IF9fUFJJVkFURV9WZXJpZnlNdXRhdGlvbihuLCB0aGlzLnByZWNvbmRpdGlvbihuKSkpO1xuICAgICAgICB9KSksIGF3YWl0IGFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9pbnZva2VDb21taXRScGMoZSwgdCkge1xuICAgICAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSksIHIgPSBfX1BSSVZBVEVfZ2V0RW5jb2RlZERhdGFiYXNlSWQobi5zZXJpYWxpemVyKSArIFwiL2RvY3VtZW50c1wiLCBpID0ge1xuICAgICAgICAgICAgICAgIHdyaXRlczogdC5tYXAoKGUgPT4gdG9NdXRhdGlvbihuLnNlcmlhbGl6ZXIsIGUpKSlcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBhd2FpdCBuLndvKFwiQ29tbWl0XCIsIHIsIGkpO1xuICAgICAgICB9KHRoaXMuZGF0YXN0b3JlLCB0aGlzLm11dGF0aW9ucyksIHRoaXMuY29tbWl0dGVkID0gITA7XG4gICAgfVxuICAgIHJlY29yZFZlcnNpb24oZSkge1xuICAgICAgICBsZXQgdDtcbiAgICAgICAgaWYgKGUuaXNGb3VuZERvY3VtZW50KCkpIHQgPSBlLnZlcnNpb247IGVsc2Uge1xuICAgICAgICAgICAgaWYgKCFlLmlzTm9Eb2N1bWVudCgpKSB0aHJvdyBmYWlsKCk7XG4gICAgICAgICAgICAvLyBSZXByZXNlbnQgYSBkZWxldGVkIGRvYyB1c2luZyBTbmFwc2hvdFZlcnNpb24ubWluKCkuXG4gICAgICAgICAgICB0ID0gU25hcHNob3RWZXJzaW9uLm1pbigpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLnJlYWRWZXJzaW9ucy5nZXQoZS5rZXkudG9TdHJpbmcoKSk7XG4gICAgICAgIGlmIChuKSB7XG4gICAgICAgICAgICBpZiAoIXQuaXNFcXVhbChuKSkgXG4gICAgICAgICAgICAvLyBUaGlzIHRyYW5zYWN0aW9uIHdpbGwgZmFpbCBubyBtYXR0ZXIgd2hhdC5cbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELkFCT1JURUQsIFwiRG9jdW1lbnQgdmVyc2lvbiBjaGFuZ2VkIGJldHdlZW4gdHdvIHJlYWRzLlwiKTtcbiAgICAgICAgfSBlbHNlIHRoaXMucmVhZFZlcnNpb25zLnNldChlLmtleS50b1N0cmluZygpLCB0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgdmVyc2lvbiBvZiB0aGlzIGRvY3VtZW50IHdoZW4gaXQgd2FzIHJlYWQgaW4gdGhpcyB0cmFuc2FjdGlvbixcbiAgICAgKiBhcyBhIHByZWNvbmRpdGlvbiwgb3Igbm8gcHJlY29uZGl0aW9uIGlmIGl0IHdhcyBub3QgcmVhZC5cbiAgICAgKi8gICAgcHJlY29uZGl0aW9uKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMucmVhZFZlcnNpb25zLmdldChlLnRvU3RyaW5nKCkpO1xuICAgICAgICByZXR1cm4gIXRoaXMud3JpdHRlbkRvY3MuaGFzKGUudG9TdHJpbmcoKSkgJiYgdCA/IHQuaXNFcXVhbChTbmFwc2hvdFZlcnNpb24ubWluKCkpID8gUHJlY29uZGl0aW9uLmV4aXN0cyghMSkgOiBQcmVjb25kaXRpb24udXBkYXRlVGltZSh0KSA6IFByZWNvbmRpdGlvbi5ub25lKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHByZWNvbmRpdGlvbiBmb3IgYSBkb2N1bWVudCBpZiB0aGUgb3BlcmF0aW9uIGlzIGFuIHVwZGF0ZS5cbiAgICAgKi8gICAgcHJlY29uZGl0aW9uRm9yVXBkYXRlKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMucmVhZFZlcnNpb25zLmdldChlLnRvU3RyaW5nKCkpO1xuICAgICAgICAvLyBUaGUgZmlyc3QgdGltZSBhIGRvY3VtZW50IGlzIHdyaXR0ZW4sIHdlIHdhbnQgdG8gdGFrZSBpbnRvIGFjY291bnQgdGhlXG4gICAgICAgIC8vIHJlYWQgdGltZSBhbmQgZXhpc3RlbmNlXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLndyaXR0ZW5Eb2NzLmhhcyhlLnRvU3RyaW5nKCkpICYmIHQpIHtcbiAgICAgICAgICAgIGlmICh0LmlzRXF1YWwoU25hcHNob3RWZXJzaW9uLm1pbigpKSkgXG4gICAgICAgICAgICAvLyBUaGUgZG9jdW1lbnQgZG9lc24ndCBleGlzdCwgc28gZmFpbCB0aGUgdHJhbnNhY3Rpb24uXG4gICAgICAgICAgICAvLyBUaGlzIGhhcyB0byBiZSB2YWxpZGF0ZWQgbG9jYWxseSBiZWNhdXNlIHlvdSBjYW4ndCBzZW5kIGFcbiAgICAgICAgICAgIC8vIHByZWNvbmRpdGlvbiB0aGF0IGEgZG9jdW1lbnQgZG9lcyBub3QgZXhpc3Qgd2l0aG91dCBjaGFuZ2luZyB0aGVcbiAgICAgICAgICAgIC8vIHNlbWFudGljcyBvZiB0aGUgYmFja2VuZCB3cml0ZSB0byBiZSBhbiBpbnNlcnQuIFRoaXMgaXMgdGhlIHJldmVyc2VcbiAgICAgICAgICAgIC8vIG9mIHdoYXQgd2Ugd2FudCwgc2luY2Ugd2Ugd2FudCB0byBhc3NlcnQgdGhhdCB0aGUgZG9jdW1lbnQgZG9lc24ndFxuICAgICAgICAgICAgLy8gZXhpc3QgYnV0IHRoZW4gc2VuZCB0aGUgdXBkYXRlIGFuZCBoYXZlIGl0IGZhaWwuIFNpbmNlIHdlIGNhbid0XG4gICAgICAgICAgICAvLyBleHByZXNzIHRoYXQgdG8gdGhlIGJhY2tlbmQsIHdlIGhhdmUgdG8gdmFsaWRhdGUgbG9jYWxseS5cbiAgICAgICAgICAgIC8vIE5vdGU6IHRoaXMgY2FuIGNoYW5nZSBvbmNlIHdlIGNhbiBzZW5kIHNlcGFyYXRlIHZlcmlmeSB3cml0ZXMgaW4gdGhlXG4gICAgICAgICAgICAvLyB0cmFuc2FjdGlvbi5cbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELklOVkFMSURfQVJHVU1FTlQsIFwiQ2FuJ3QgdXBkYXRlIGEgZG9jdW1lbnQgdGhhdCBkb2Vzbid0IGV4aXN0LlwiKTtcbiAgICAgICAgICAgIC8vIERvY3VtZW50IGV4aXN0cywgYmFzZSBwcmVjb25kaXRpb24gb24gZG9jdW1lbnQgdXBkYXRlIHRpbWUuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJlY29uZGl0aW9uLnVwZGF0ZVRpbWUodCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gRG9jdW1lbnQgd2FzIG5vdCByZWFkLCBzbyB3ZSBqdXN0IHVzZSB0aGUgcHJlY29uZGl0aW9ucyBmb3IgYSBibGluZFxuICAgICAgICAvLyB1cGRhdGUuXG4gICAgICAgIHJldHVybiBQcmVjb25kaXRpb24uZXhpc3RzKCEwKTtcbiAgICB9XG4gICAgd3JpdGUoZSkge1xuICAgICAgICB0aGlzLmVuc3VyZUNvbW1pdE5vdENhbGxlZCgpLCB0aGlzLm11dGF0aW9ucy5wdXNoKGUpO1xuICAgIH1cbiAgICBlbnN1cmVDb21taXROb3RDYWxsZWQoKSB7fVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBUcmFuc2FjdGlvblJ1bm5lciBlbmNhcHN1bGF0ZXMgdGhlIGxvZ2ljIG5lZWRlZCB0byBydW4gYW5kIHJldHJ5IHRyYW5zYWN0aW9uc1xuICogd2l0aCBiYWNrb2ZmLlxuICovIGNsYXNzIF9fUFJJVkFURV9UcmFuc2FjdGlvblJ1bm5lciB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbiwgciwgaSkge1xuICAgICAgICB0aGlzLmFzeW5jUXVldWUgPSBlLCB0aGlzLmRhdGFzdG9yZSA9IHQsIHRoaXMub3B0aW9ucyA9IG4sIHRoaXMudXBkYXRlRnVuY3Rpb24gPSByLCBcbiAgICAgICAgdGhpcy5kZWZlcnJlZCA9IGksIHRoaXMuV2EgPSBuLm1heEF0dGVtcHRzLCB0aGlzLnpvID0gbmV3IF9fUFJJVkFURV9FeHBvbmVudGlhbEJhY2tvZmYodGhpcy5hc3luY1F1ZXVlLCBcInRyYW5zYWN0aW9uX3JldHJ5XCIgLyogVGltZXJJZC5UcmFuc2FjdGlvblJldHJ5ICovKTtcbiAgICB9XG4gICAgLyoqIFJ1bnMgdGhlIHRyYW5zYWN0aW9uIGFuZCBzZXRzIHRoZSByZXN1bHQgb24gZGVmZXJyZWQuICovICAgIHJ1bigpIHtcbiAgICAgICAgdGhpcy5XYSAtPSAxLCB0aGlzLkdhKCk7XG4gICAgfVxuICAgIEdhKCkge1xuICAgICAgICB0aGlzLnpvLmtvKChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBlID0gbmV3IFRyYW5zYWN0aW9uJDIodGhpcy5kYXRhc3RvcmUpLCB0ID0gdGhpcy56YShlKTtcbiAgICAgICAgICAgIHQgJiYgdC50aGVuKCh0ID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoKCkgPT4gZS5jb21taXQoKS50aGVuKCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGVmZXJyZWQucmVzb2x2ZSh0KTtcbiAgICAgICAgICAgICAgICB9KSkuY2F0Y2goKGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmphKGUpO1xuICAgICAgICAgICAgICAgIH0pKSkpO1xuICAgICAgICAgICAgfSkpLmNhdGNoKChlID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmphKGUpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHphKGUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLnVwZGF0ZUZ1bmN0aW9uKGUpO1xuICAgICAgICAgICAgcmV0dXJuICFfX1BSSVZBVEVfaXNOdWxsT3JVbmRlZmluZWQodCkgJiYgdC5jYXRjaCAmJiB0LnRoZW4gPyB0IDogKHRoaXMuZGVmZXJyZWQucmVqZWN0KEVycm9yKFwiVHJhbnNhY3Rpb24gY2FsbGJhY2sgbXVzdCByZXR1cm4gYSBQcm9taXNlXCIpKSwgXG4gICAgICAgICAgICBudWxsKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgLy8gRG8gbm90IHJldHJ5IGVycm9ycyB0aHJvd24gYnkgdXNlciBwcm92aWRlZCB1cGRhdGVGdW5jdGlvbi5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRlZmVycmVkLnJlamVjdChlKSwgbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBqYShlKSB7XG4gICAgICAgIHRoaXMuV2EgPiAwICYmIHRoaXMuSGEoZSkgPyAodGhpcy5XYSAtPSAxLCB0aGlzLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoKCkgPT4gKHRoaXMuR2EoKSwgXG4gICAgICAgIFByb21pc2UucmVzb2x2ZSgpKSkpKSA6IHRoaXMuZGVmZXJyZWQucmVqZWN0KGUpO1xuICAgIH1cbiAgICBIYShlKSB7XG4gICAgICAgIGlmIChcIkZpcmViYXNlRXJyb3JcIiA9PT0gZS5uYW1lKSB7XG4gICAgICAgICAgICAvLyBJbiB0cmFuc2FjdGlvbnMsIHRoZSBiYWNrZW5kIHdpbGwgZmFpbCBvdXRkYXRlZCByZWFkcyB3aXRoIEZBSUxFRF9QUkVDT05ESVRJT04gYW5kXG4gICAgICAgICAgICAvLyBub24tbWF0Y2hpbmcgZG9jdW1lbnQgdmVyc2lvbnMgd2l0aCBBQk9SVEVELiBUaGVzZSBlcnJvcnMgc2hvdWxkIGJlIHJldHJpZWQuXG4gICAgICAgICAgICBjb25zdCB0ID0gZS5jb2RlO1xuICAgICAgICAgICAgcmV0dXJuIFwiYWJvcnRlZFwiID09PSB0IHx8IFwiZmFpbGVkLXByZWNvbmRpdGlvblwiID09PSB0IHx8IFwiYWxyZWFkeS1leGlzdHNcIiA9PT0gdCB8fCAhX19QUklWQVRFX2lzUGVybWFuZW50RXJyb3IodCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogRmlyZXN0b3JlQ2xpZW50IGlzIGEgdG9wLWxldmVsIGNsYXNzIHRoYXQgY29uc3RydWN0cyBhbmQgb3ducyBhbGwgb2YgdGhlIC8vXG4gKiBwaWVjZXMgb2YgdGhlIGNsaWVudCBTREsgYXJjaGl0ZWN0dXJlLiBJdCBpcyByZXNwb25zaWJsZSBmb3IgY3JlYXRpbmcgdGhlIC8vXG4gKiBhc3luYyBxdWV1ZSB0aGF0IGlzIHNoYXJlZCBieSBhbGwgb2YgdGhlIG90aGVyIGNvbXBvbmVudHMgaW4gdGhlIHN5c3RlbS4gLy9cbiAqL1xuY2xhc3MgRmlyZXN0b3JlQ2xpZW50IHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBcbiAgICAvKipcbiAgICAgKiBBc3luY2hyb25vdXMgcXVldWUgcmVzcG9uc2libGUgZm9yIGFsbCBvZiBvdXIgaW50ZXJuYWwgcHJvY2Vzc2luZy4gV2hlblxuICAgICAqIHdlIGdldCBpbmNvbWluZyB3b3JrIGZyb20gdGhlIHVzZXIgKHZpYSBwdWJsaWMgQVBJKSBvciB0aGUgbmV0d29ya1xuICAgICAqIChpbmNvbWluZyBHUlBDIG1lc3NhZ2VzKSwgd2Ugc2hvdWxkIGFsd2F5cyBzY2hlZHVsZSBvbnRvIHRoaXMgcXVldWUuXG4gICAgICogVGhpcyBlbnN1cmVzIGFsbCBvZiBvdXIgd29yayBpcyBwcm9wZXJseSBzZXJpYWxpemVkIChlLmcuIHdlIGRvbid0XG4gICAgICogc3RhcnQgcHJvY2Vzc2luZyBhIG5ldyBvcGVyYXRpb24gd2hpbGUgdGhlIHByZXZpb3VzIG9uZSBpcyB3YWl0aW5nIGZvclxuICAgICAqIGFuIGFzeW5jIEkvTyB0byBjb21wbGV0ZSkuXG4gICAgICovXG4gICAgbiwgcikge1xuICAgICAgICB0aGlzLmF1dGhDcmVkZW50aWFscyA9IGUsIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFscyA9IHQsIHRoaXMuYXN5bmNRdWV1ZSA9IG4sIHRoaXMuZGF0YWJhc2VJbmZvID0gciwgXG4gICAgICAgIHRoaXMudXNlciA9IFVzZXIuVU5BVVRIRU5USUNBVEVELCB0aGlzLmNsaWVudElkID0gX19QUklWQVRFX0F1dG9JZC5uZXdJZCgpLCB0aGlzLmF1dGhDcmVkZW50aWFsTGlzdGVuZXIgPSAoKSA9PiBQcm9taXNlLnJlc29sdmUoKSwgXG4gICAgICAgIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFsTGlzdGVuZXIgPSAoKSA9PiBQcm9taXNlLnJlc29sdmUoKSwgdGhpcy5hdXRoQ3JlZGVudGlhbHMuc3RhcnQobiwgKGFzeW5jIGUgPT4ge1xuICAgICAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiRmlyZXN0b3JlQ2xpZW50XCIsIFwiUmVjZWl2ZWQgdXNlcj1cIiwgZS51aWQpLCBhd2FpdCB0aGlzLmF1dGhDcmVkZW50aWFsTGlzdGVuZXIoZSksIFxuICAgICAgICAgICAgdGhpcy51c2VyID0gZTtcbiAgICAgICAgfSkpLCB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbHMuc3RhcnQobiwgKGUgPT4gKF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkZpcmVzdG9yZUNsaWVudFwiLCBcIlJlY2VpdmVkIG5ldyBhcHAgY2hlY2sgdG9rZW49XCIsIGUpLCBcbiAgICAgICAgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxMaXN0ZW5lcihlLCB0aGlzLnVzZXIpKSkpO1xuICAgIH1cbiAgICBhc3luYyBnZXRDb25maWd1cmF0aW9uKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYXN5bmNRdWV1ZTogdGhpcy5hc3luY1F1ZXVlLFxuICAgICAgICAgICAgZGF0YWJhc2VJbmZvOiB0aGlzLmRhdGFiYXNlSW5mbyxcbiAgICAgICAgICAgIGNsaWVudElkOiB0aGlzLmNsaWVudElkLFxuICAgICAgICAgICAgYXV0aENyZWRlbnRpYWxzOiB0aGlzLmF1dGhDcmVkZW50aWFscyxcbiAgICAgICAgICAgIGFwcENoZWNrQ3JlZGVudGlhbHM6IHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFscyxcbiAgICAgICAgICAgIGluaXRpYWxVc2VyOiB0aGlzLnVzZXIsXG4gICAgICAgICAgICBtYXhDb25jdXJyZW50TGltYm9SZXNvbHV0aW9uczogMTAwXG4gICAgICAgIH07XG4gICAgfVxuICAgIHNldENyZWRlbnRpYWxDaGFuZ2VMaXN0ZW5lcihlKSB7XG4gICAgICAgIHRoaXMuYXV0aENyZWRlbnRpYWxMaXN0ZW5lciA9IGU7XG4gICAgfVxuICAgIHNldEFwcENoZWNrVG9rZW5DaGFuZ2VMaXN0ZW5lcihlKSB7XG4gICAgICAgIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFsTGlzdGVuZXIgPSBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGVja3MgdGhhdCB0aGUgY2xpZW50IGhhcyBub3QgYmVlbiB0ZXJtaW5hdGVkLiBFbnN1cmVzIHRoYXQgb3RoZXIgbWV0aG9kcyBvbiAvL1xuICAgICAqIHRoaXMgY2xhc3MgY2Fubm90IGJlIGNhbGxlZCBhZnRlciB0aGUgY2xpZW50IGlzIHRlcm1pbmF0ZWQuIC8vXG4gICAgICovICAgIHZlcmlmeU5vdFRlcm1pbmF0ZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLmFzeW5jUXVldWUuaXNTaHV0dGluZ0Rvd24pIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELkZBSUxFRF9QUkVDT05ESVRJT04sIFwiVGhlIGNsaWVudCBoYXMgYWxyZWFkeSBiZWVuIHRlcm1pbmF0ZWQuXCIpO1xuICAgIH1cbiAgICB0ZXJtaW5hdGUoKSB7XG4gICAgICAgIHRoaXMuYXN5bmNRdWV1ZS5lbnRlclJlc3RyaWN0ZWRNb2RlKCk7XG4gICAgICAgIGNvbnN0IGUgPSBuZXcgX19QUklWQVRFX0RlZmVycmVkO1xuICAgICAgICByZXR1cm4gdGhpcy5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXRFdmVuV2hpbGVSZXN0cmljdGVkKChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMuX29ubGluZUNvbXBvbmVudHMgJiYgYXdhaXQgdGhpcy5fb25saW5lQ29tcG9uZW50cy50ZXJtaW5hdGUoKSwgdGhpcy5fb2ZmbGluZUNvbXBvbmVudHMgJiYgYXdhaXQgdGhpcy5fb2ZmbGluZUNvbXBvbmVudHMudGVybWluYXRlKCksIFxuICAgICAgICAgICAgICAgIC8vIFRoZSBjcmVkZW50aWFscyBwcm92aWRlciBtdXN0IGJlIHRlcm1pbmF0ZWQgYWZ0ZXIgc2h1dHRpbmcgZG93biB0aGVcbiAgICAgICAgICAgICAgICAvLyBSZW1vdGVTdG9yZSBhcyBpdCB3aWxsIHByZXZlbnQgdGhlIFJlbW90ZVN0b3JlIGZyb20gcmV0cmlldmluZyBhdXRoXG4gICAgICAgICAgICAgICAgLy8gdG9rZW5zLlxuICAgICAgICAgICAgICAgIHRoaXMuYXV0aENyZWRlbnRpYWxzLnNodXRkb3duKCksIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFscy5zaHV0ZG93bigpLCBlLnJlc29sdmUoKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX3dyYXBJblVzZXJFcnJvcklmUmVjb3ZlcmFibGUodCwgXCJGYWlsZWQgdG8gc2h1dGRvd24gcGVyc2lzdGVuY2VcIik7XG4gICAgICAgICAgICAgICAgZS5yZWplY3Qobik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKSwgZS5wcm9taXNlO1xuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX3NldE9mZmxpbmVDb21wb25lbnRQcm92aWRlcihlLCB0KSB7XG4gICAgZS5hc3luY1F1ZXVlLnZlcmlmeU9wZXJhdGlvbkluUHJvZ3Jlc3MoKSwgX19QUklWQVRFX2xvZ0RlYnVnKFwiRmlyZXN0b3JlQ2xpZW50XCIsIFwiSW5pdGlhbGl6aW5nIE9mZmxpbmVDb21wb25lbnRQcm92aWRlclwiKTtcbiAgICBjb25zdCBuID0gYXdhaXQgZS5nZXRDb25maWd1cmF0aW9uKCk7XG4gICAgYXdhaXQgdC5pbml0aWFsaXplKG4pO1xuICAgIGxldCByID0gbi5pbml0aWFsVXNlcjtcbiAgICBlLnNldENyZWRlbnRpYWxDaGFuZ2VMaXN0ZW5lcigoYXN5bmMgZSA9PiB7XG4gICAgICAgIHIuaXNFcXVhbChlKSB8fCAoYXdhaXQgX19QUklWQVRFX2xvY2FsU3RvcmVIYW5kbGVVc2VyQ2hhbmdlKHQubG9jYWxTdG9yZSwgZSksIHIgPSBlKTtcbiAgICB9KSksIFxuICAgIC8vIFdoZW4gYSB1c2VyIGNhbGxzIGNsZWFyUGVyc2lzdGVuY2UoKSBpbiBvbmUgY2xpZW50LCBhbGwgb3RoZXIgY2xpZW50c1xuICAgIC8vIG5lZWQgdG8gYmUgdGVybWluYXRlZCB0byBhbGxvdyB0aGUgZGVsZXRlIHRvIHN1Y2NlZWQuXG4gICAgdC5wZXJzaXN0ZW5jZS5zZXREYXRhYmFzZURlbGV0ZWRMaXN0ZW5lcigoKCkgPT4gZS50ZXJtaW5hdGUoKSkpLCBlLl9vZmZsaW5lQ29tcG9uZW50cyA9IHQ7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9zZXRPbmxpbmVDb21wb25lbnRQcm92aWRlcihlLCB0KSB7XG4gICAgZS5hc3luY1F1ZXVlLnZlcmlmeU9wZXJhdGlvbkluUHJvZ3Jlc3MoKTtcbiAgICBjb25zdCBuID0gYXdhaXQgX19QUklWQVRFX2Vuc3VyZU9mZmxpbmVDb21wb25lbnRzKGUpO1xuICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkZpcmVzdG9yZUNsaWVudFwiLCBcIkluaXRpYWxpemluZyBPbmxpbmVDb21wb25lbnRQcm92aWRlclwiKTtcbiAgICBjb25zdCByID0gYXdhaXQgZS5nZXRDb25maWd1cmF0aW9uKCk7XG4gICAgYXdhaXQgdC5pbml0aWFsaXplKG4sIHIpLCBcbiAgICAvLyBUaGUgQ3JlZGVudGlhbENoYW5nZUxpc3RlbmVyIG9mIHRoZSBvbmxpbmUgY29tcG9uZW50IHByb3ZpZGVyIHRha2VzXG4gICAgLy8gcHJlY2VkZW5jZSBvdmVyIHRoZSBvZmZsaW5lIGNvbXBvbmVudCBwcm92aWRlci5cbiAgICBlLnNldENyZWRlbnRpYWxDaGFuZ2VMaXN0ZW5lcigoZSA9PiBfX1BSSVZBVEVfcmVtb3RlU3RvcmVIYW5kbGVDcmVkZW50aWFsQ2hhbmdlKHQucmVtb3RlU3RvcmUsIGUpKSksIFxuICAgIGUuc2V0QXBwQ2hlY2tUb2tlbkNoYW5nZUxpc3RlbmVyKCgoZSwgbikgPT4gX19QUklWQVRFX3JlbW90ZVN0b3JlSGFuZGxlQ3JlZGVudGlhbENoYW5nZSh0LnJlbW90ZVN0b3JlLCBuKSkpLCBcbiAgICBlLl9vbmxpbmVDb21wb25lbnRzID0gdDtcbn1cblxuLyoqXG4gKiBEZWNpZGVzIHdoZXRoZXIgdGhlIHByb3ZpZGVkIGVycm9yIGFsbG93cyB1cyB0byBncmFjZWZ1bGx5IGRpc2FibGVcbiAqIHBlcnNpc3RlbmNlIChhcyBvcHBvc2VkIHRvIGNyYXNoaW5nIHRoZSBjbGllbnQpLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9jYW5GYWxsYmFja0Zyb21JbmRleGVkRGJFcnJvcihlKSB7XG4gICAgcmV0dXJuIFwiRmlyZWJhc2VFcnJvclwiID09PSBlLm5hbWUgPyBlLmNvZGUgPT09IEQuRkFJTEVEX1BSRUNPTkRJVElPTiB8fCBlLmNvZGUgPT09IEQuVU5JTVBMRU1FTlRFRCA6ICEoXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgRE9NRXhjZXB0aW9uICYmIGUgaW5zdGFuY2VvZiBET01FeGNlcHRpb24pIHx8IChcbiAgICAvLyBXaGVuIHRoZSBicm93c2VyIGlzIG91dCBvZiBxdW90YSB3ZSBjb3VsZCBnZXQgZWl0aGVyIHF1b3RhIGV4Y2VlZGVkXG4gICAgLy8gb3IgYW4gYWJvcnRlZCBlcnJvciBkZXBlbmRpbmcgb24gd2hldGhlciB0aGUgZXJyb3IgaGFwcGVuZWQgZHVyaW5nXG4gICAgLy8gc2NoZW1hIG1pZ3JhdGlvbi5cbiAgICAyMiA9PT0gZS5jb2RlIHx8IDIwID09PSBlLmNvZGUgfHwgXG4gICAgLy8gRmlyZWZveCBQcml2YXRlIEJyb3dzaW5nIG1vZGUgZGlzYWJsZXMgSW5kZXhlZERiIGFuZCByZXR1cm5zXG4gICAgLy8gSU5WQUxJRF9TVEFURSBmb3IgYW55IHVzYWdlLlxuICAgIDExID09PSBlLmNvZGUpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfZW5zdXJlT2ZmbGluZUNvbXBvbmVudHMoZSkge1xuICAgIGlmICghZS5fb2ZmbGluZUNvbXBvbmVudHMpIGlmIChlLl91bmluaXRpYWxpemVkQ29tcG9uZW50c1Byb3ZpZGVyKSB7XG4gICAgICAgIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkZpcmVzdG9yZUNsaWVudFwiLCBcIlVzaW5nIHVzZXIgcHJvdmlkZWQgT2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyXCIpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgX19QUklWQVRFX3NldE9mZmxpbmVDb21wb25lbnRQcm92aWRlcihlLCBlLl91bmluaXRpYWxpemVkQ29tcG9uZW50c1Byb3ZpZGVyLl9vZmZsaW5lKTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQ7XG4gICAgICAgICAgICBpZiAoIV9fUFJJVkFURV9jYW5GYWxsYmFja0Zyb21JbmRleGVkRGJFcnJvcihuKSkgdGhyb3cgbjtcbiAgICAgICAgICAgIF9fUFJJVkFURV9sb2dXYXJuKFwiRXJyb3IgdXNpbmcgdXNlciBwcm92aWRlZCBjYWNoZS4gRmFsbGluZyBiYWNrIHRvIG1lbW9yeSBjYWNoZTogXCIgKyBuKSwgXG4gICAgICAgICAgICBhd2FpdCBfX1BSSVZBVEVfc2V0T2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyKGUsIG5ldyBNZW1vcnlPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkZpcmVzdG9yZUNsaWVudFwiLCBcIlVzaW5nIGRlZmF1bHQgT2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyXCIpLCBcbiAgICBhd2FpdCBfX1BSSVZBVEVfc2V0T2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyKGUsIG5ldyBNZW1vcnlPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIpO1xuICAgIHJldHVybiBlLl9vZmZsaW5lQ29tcG9uZW50cztcbn1cblxuYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX2Vuc3VyZU9ubGluZUNvbXBvbmVudHMoZSkge1xuICAgIHJldHVybiBlLl9vbmxpbmVDb21wb25lbnRzIHx8IChlLl91bmluaXRpYWxpemVkQ29tcG9uZW50c1Byb3ZpZGVyID8gKF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkZpcmVzdG9yZUNsaWVudFwiLCBcIlVzaW5nIHVzZXIgcHJvdmlkZWQgT25saW5lQ29tcG9uZW50UHJvdmlkZXJcIiksIFxuICAgIGF3YWl0IF9fUFJJVkFURV9zZXRPbmxpbmVDb21wb25lbnRQcm92aWRlcihlLCBlLl91bmluaXRpYWxpemVkQ29tcG9uZW50c1Byb3ZpZGVyLl9vbmxpbmUpKSA6IChfX1BSSVZBVEVfbG9nRGVidWcoXCJGaXJlc3RvcmVDbGllbnRcIiwgXCJVc2luZyBkZWZhdWx0IE9ubGluZUNvbXBvbmVudFByb3ZpZGVyXCIpLCBcbiAgICBhd2FpdCBfX1BSSVZBVEVfc2V0T25saW5lQ29tcG9uZW50UHJvdmlkZXIoZSwgbmV3IE9ubGluZUNvbXBvbmVudFByb3ZpZGVyKSkpLCBlLl9vbmxpbmVDb21wb25lbnRzO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZ2V0UGVyc2lzdGVuY2UoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfZW5zdXJlT2ZmbGluZUNvbXBvbmVudHMoZSkudGhlbigoZSA9PiBlLnBlcnNpc3RlbmNlKSk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9nZXRMb2NhbFN0b3JlKGUpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX2Vuc3VyZU9mZmxpbmVDb21wb25lbnRzKGUpLnRoZW4oKGUgPT4gZS5sb2NhbFN0b3JlKSk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9nZXRSZW1vdGVTdG9yZShlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9lbnN1cmVPbmxpbmVDb21wb25lbnRzKGUpLnRoZW4oKGUgPT4gZS5yZW1vdGVTdG9yZSkpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZ2V0U3luY0VuZ2luZShlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9lbnN1cmVPbmxpbmVDb21wb25lbnRzKGUpLnRoZW4oKGUgPT4gZS5zeW5jRW5naW5lKSk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9nZXREYXRhc3RvcmUoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfZW5zdXJlT25saW5lQ29tcG9uZW50cyhlKS50aGVuKChlID0+IGUuZGF0YXN0b3JlKSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9nZXRFdmVudE1hbmFnZXIoZSkge1xuICAgIGNvbnN0IHQgPSBhd2FpdCBfX1BSSVZBVEVfZW5zdXJlT25saW5lQ29tcG9uZW50cyhlKSwgbiA9IHQuZXZlbnRNYW5hZ2VyO1xuICAgIHJldHVybiBuLm9uTGlzdGVuID0gX19QUklWQVRFX3N5bmNFbmdpbmVMaXN0ZW4uYmluZChudWxsLCB0LnN5bmNFbmdpbmUpLCBuLm9uVW5saXN0ZW4gPSBfX1BSSVZBVEVfc3luY0VuZ2luZVVubGlzdGVuLmJpbmQobnVsbCwgdC5zeW5jRW5naW5lKSwgXG4gICAgbjtcbn1cblxuLyoqIEVuYWJsZXMgdGhlIG5ldHdvcmsgY29ubmVjdGlvbiBhbmQgcmUtZW5xdWV1ZXMgYWxsIHBlbmRpbmcgb3BlcmF0aW9ucy4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudEVuYWJsZU5ldHdvcmsoZSkge1xuICAgIHJldHVybiBlLmFzeW5jUXVldWUuZW5xdWV1ZSgoYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCB0ID0gYXdhaXQgX19QUklWQVRFX2dldFBlcnNpc3RlbmNlKGUpLCBuID0gYXdhaXQgX19QUklWQVRFX2dldFJlbW90ZVN0b3JlKGUpO1xuICAgICAgICByZXR1cm4gdC5zZXROZXR3b3JrRW5hYmxlZCghMCksIGZ1bmN0aW9uIF9fUFJJVkFURV9yZW1vdGVTdG9yZUVuYWJsZU5ldHdvcmsoZSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgICAgICAgICByZXR1cm4gdC5DXy5kZWxldGUoMCAvKiBPZmZsaW5lQ2F1c2UuVXNlckRpc2FibGVkICovKSwgX19QUklWQVRFX2VuYWJsZU5ldHdvcmtJbnRlcm5hbCh0KTtcbiAgICAgICAgfShuKTtcbiAgICB9KSk7XG59XG5cbi8qKiBEaXNhYmxlcyB0aGUgbmV0d29yayBjb25uZWN0aW9uLiBQZW5kaW5nIG9wZXJhdGlvbnMgd2lsbCBub3QgY29tcGxldGUuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9maXJlc3RvcmVDbGllbnREaXNhYmxlTmV0d29yayhlKSB7XG4gICAgcmV0dXJuIGUuYXN5bmNRdWV1ZS5lbnF1ZXVlKChhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCBfX1BSSVZBVEVfZ2V0UGVyc2lzdGVuY2UoZSksIG4gPSBhd2FpdCBfX1BSSVZBVEVfZ2V0UmVtb3RlU3RvcmUoZSk7XG4gICAgICAgIHJldHVybiB0LnNldE5ldHdvcmtFbmFibGVkKCExKSwgYXN5bmMgZnVuY3Rpb24gX19QUklWQVRFX3JlbW90ZVN0b3JlRGlzYWJsZU5ldHdvcmsoZSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgICAgICAgICB0LkNfLmFkZCgwIC8qIE9mZmxpbmVDYXVzZS5Vc2VyRGlzYWJsZWQgKi8pLCBhd2FpdCBfX1BSSVZBVEVfZGlzYWJsZU5ldHdvcmtJbnRlcm5hbCh0KSwgXG4gICAgICAgICAgICAvLyBTZXQgdGhlIE9ubGluZVN0YXRlIHRvIE9mZmxpbmUgc28gZ2V0KClzIHJldHVybiBmcm9tIGNhY2hlLCBldGMuXG4gICAgICAgICAgICB0Lk1fLnNldChcIk9mZmxpbmVcIiAvKiBPbmxpbmVTdGF0ZS5PZmZsaW5lICovKTtcbiAgICAgICAgfShuKTtcbiAgICB9KSk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIFByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIGFsbCB3cml0ZXMgdGhhdCB3ZXJlIHBlbmRpbmcgYXQgdGhlIHRpbWVcbiAqIHRoaXMgbWV0aG9kIHdhcyBjYWxsZWQgcmVjZWl2ZWQgc2VydmVyIGFja25vd2xlZGdlbWVudC4gQW4gYWNrbm93bGVkZ2VtZW50XG4gKiBjYW4gYmUgZWl0aGVyIGFjY2VwdGFuY2Ugb3IgcmVqZWN0aW9uLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9maXJlc3RvcmVDbGllbnRHZXREb2N1bWVudEZyb21Mb2NhbENhY2hlKGUsIHQpIHtcbiAgICBjb25zdCBuID0gbmV3IF9fUFJJVkFURV9EZWZlcnJlZDtcbiAgICByZXR1cm4gZS5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IGFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9yZWFkRG9jdW1lbnRGcm9tQ2FjaGUoZSwgdCwgbikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgciA9IGF3YWl0IGZ1bmN0aW9uIF9fUFJJVkFURV9sb2NhbFN0b3JlUmVhZERvY3VtZW50KGUsIHQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gX19QUklWQVRFX2RlYnVnQ2FzdChlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcInJlYWQgZG9jdW1lbnRcIiwgXCJyZWFkb25seVwiLCAoZSA9PiBuLmxvY2FsRG9jdW1lbnRzLmdldERvY3VtZW50KGUsIHQpKSk7XG4gICAgICAgICAgICB9KGUsIHQpO1xuICAgICAgICAgICAgci5pc0ZvdW5kRG9jdW1lbnQoKSA/IG4ucmVzb2x2ZShyKSA6IHIuaXNOb0RvY3VtZW50KCkgPyBuLnJlc29sdmUobnVsbCkgOiBuLnJlamVjdChuZXcgRmlyZXN0b3JlRXJyb3IoRC5VTkFWQUlMQUJMRSwgXCJGYWlsZWQgdG8gZ2V0IGRvY3VtZW50IGZyb20gY2FjaGUuIChIb3dldmVyLCB0aGlzIGRvY3VtZW50IG1heSBleGlzdCBvbiB0aGUgc2VydmVyLiBSdW4gYWdhaW4gd2l0aG91dCBzZXR0aW5nICdzb3VyY2UnIGluIHRoZSBHZXRPcHRpb25zIHRvIGF0dGVtcHQgdG8gcmV0cmlldmUgdGhlIGRvY3VtZW50IGZyb20gdGhlIHNlcnZlci4pXCIpKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV93cmFwSW5Vc2VyRXJyb3JJZlJlY292ZXJhYmxlKGUsIGBGYWlsZWQgdG8gZ2V0IGRvY3VtZW50ICcke3R9IGZyb20gY2FjaGVgKTtcbiAgICAgICAgICAgIG4ucmVqZWN0KHIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICogUmV0cmlldmVzIGEgbGF0ZW5jeS1jb21wZW5zYXRlZCBkb2N1bWVudCBmcm9tIHRoZSBiYWNrZW5kIHZpYSBhXG4gKiBTbmFwc2hvdExpc3RlbmVyLlxuICovIChhd2FpdCBfX1BSSVZBVEVfZ2V0TG9jYWxTdG9yZShlKSwgdCwgbikpKSwgbi5wcm9taXNlO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50R2V0RG9jdW1lbnRWaWFTbmFwc2hvdExpc3RlbmVyKGUsIHQsIG4gPSB7fSkge1xuICAgIGNvbnN0IHIgPSBuZXcgX19QUklWQVRFX0RlZmVycmVkO1xuICAgIHJldHVybiBlLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gZnVuY3Rpb24gX19QUklWQVRFX3JlYWREb2N1bWVudFZpYVNuYXBzaG90TGlzdGVuZXIoZSwgdCwgbiwgciwgaSkge1xuICAgICAgICBjb25zdCBzID0gbmV3IF9fUFJJVkFURV9Bc3luY09ic2VydmVyKHtcbiAgICAgICAgICAgIG5leHQ6IHMgPT4ge1xuICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBxdWVyeSBmaXJzdCBiZWZvcmUgcGFzc2luZyBldmVudCB0byB1c2VyIHRvIGF2b2lkXG4gICAgICAgICAgICAgICAgLy8gdXNlciBhY3Rpb25zIGFmZmVjdGluZyB0aGUgbm93IHN0YWxlIHF1ZXJ5LlxuICAgICAgICAgICAgICAgIHQuZW5xdWV1ZUFuZEZvcmdldCgoKCkgPT4gX19QUklWQVRFX2V2ZW50TWFuYWdlclVubGlzdGVuKGUsIG8pKSk7XG4gICAgICAgICAgICAgICAgY29uc3QgXyA9IHMuZG9jcy5oYXMobik7XG4gICAgICAgICAgICAgICAgIV8gJiYgcy5mcm9tQ2FjaGUgPyBcbiAgICAgICAgICAgICAgICAvLyBUT0RPKGRpbW9uZCk6IElmIHdlJ3JlIG9ubGluZSBhbmQgdGhlIGRvY3VtZW50IGRvZXNuJ3RcbiAgICAgICAgICAgICAgICAvLyBleGlzdCB0aGVuIHdlIHJlc29sdmUgd2l0aCBhIGRvYy5leGlzdHMgc2V0IHRvIGZhbHNlLiBJZlxuICAgICAgICAgICAgICAgIC8vIHdlJ3JlIG9mZmxpbmUgaG93ZXZlciwgd2UgcmVqZWN0IHRoZSBQcm9taXNlIGluIHRoaXNcbiAgICAgICAgICAgICAgICAvLyBjYXNlLiBUd28gb3B0aW9uczogMSkgQ2FjaGUgdGhlIG5lZ2F0aXZlIHJlc3BvbnNlIGZyb21cbiAgICAgICAgICAgICAgICAvLyB0aGUgc2VydmVyIHNvIHdlIGNhbiBkZWxpdmVyIHRoYXQgZXZlbiB3aGVuIHlvdSdyZVxuICAgICAgICAgICAgICAgIC8vIG9mZmxpbmUgMikgQWN0dWFsbHkgcmVqZWN0IHRoZSBQcm9taXNlIGluIHRoZSBvbmxpbmUgY2FzZVxuICAgICAgICAgICAgICAgIC8vIGlmIHRoZSBkb2N1bWVudCBkb2Vzbid0IGV4aXN0LlxuICAgICAgICAgICAgICAgIGkucmVqZWN0KG5ldyBGaXJlc3RvcmVFcnJvcihELlVOQVZBSUxBQkxFLCBcIkZhaWxlZCB0byBnZXQgZG9jdW1lbnQgYmVjYXVzZSB0aGUgY2xpZW50IGlzIG9mZmxpbmUuXCIpKSA6IF8gJiYgcy5mcm9tQ2FjaGUgJiYgciAmJiBcInNlcnZlclwiID09PSByLnNvdXJjZSA/IGkucmVqZWN0KG5ldyBGaXJlc3RvcmVFcnJvcihELlVOQVZBSUxBQkxFLCAnRmFpbGVkIHRvIGdldCBkb2N1bWVudCBmcm9tIHNlcnZlci4gKEhvd2V2ZXIsIHRoaXMgZG9jdW1lbnQgZG9lcyBleGlzdCBpbiB0aGUgbG9jYWwgY2FjaGUuIFJ1biBhZ2FpbiB3aXRob3V0IHNldHRpbmcgc291cmNlIHRvIFwic2VydmVyXCIgdG8gcmV0cmlldmUgdGhlIGNhY2hlZCBkb2N1bWVudC4pJykpIDogaS5yZXNvbHZlKHMpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBlID0+IGkucmVqZWN0KGUpXG4gICAgICAgIH0pLCBvID0gbmV3IF9fUFJJVkFURV9RdWVyeUxpc3RlbmVyKF9fUFJJVkFURV9uZXdRdWVyeUZvclBhdGgobi5wYXRoKSwgcywge1xuICAgICAgICAgICAgaW5jbHVkZU1ldGFkYXRhQ2hhbmdlczogITAsXG4gICAgICAgICAgICBKXzogITBcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfZXZlbnRNYW5hZ2VyTGlzdGVuKGUsIG8pO1xuICAgIH0oYXdhaXQgX19QUklWQVRFX2dldEV2ZW50TWFuYWdlcihlKSwgZS5hc3luY1F1ZXVlLCB0LCBuLCByKSkpLCByLnByb21pc2U7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9maXJlc3RvcmVDbGllbnRHZXREb2N1bWVudHNGcm9tTG9jYWxDYWNoZShlLCB0KSB7XG4gICAgY29uc3QgbiA9IG5ldyBfX1BSSVZBVEVfRGVmZXJyZWQ7XG4gICAgcmV0dXJuIGUuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiBhc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfZXhlY3V0ZVF1ZXJ5RnJvbUNhY2hlKGUsIHQsIG4pIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBhd2FpdCBfX1BSSVZBVEVfbG9jYWxTdG9yZUV4ZWN1dGVRdWVyeShlLCB0LCBcbiAgICAgICAgICAgIC8qIHVzZVByZXZpb3VzUmVzdWx0cz0gKi8gITApLCBpID0gbmV3IF9fUFJJVkFURV9WaWV3KHQsIHIubHMpLCBzID0gaS5jYShyLmRvY3VtZW50cyksIG8gPSBpLmFwcGx5Q2hhbmdlcyhzLCBcbiAgICAgICAgICAgIC8qIGxpbWJvUmVzb2x1dGlvbkVuYWJsZWQ9ICovICExKTtcbiAgICAgICAgICAgIG4ucmVzb2x2ZShvLnNuYXBzaG90KTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV93cmFwSW5Vc2VyRXJyb3JJZlJlY292ZXJhYmxlKGUsIGBGYWlsZWQgdG8gZXhlY3V0ZSBxdWVyeSAnJHt0fSBhZ2FpbnN0IGNhY2hlYCk7XG4gICAgICAgICAgICBuLnJlamVjdChyKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAqIFJldHJpZXZlcyBhIGxhdGVuY3ktY29tcGVuc2F0ZWQgcXVlcnkgc25hcHNob3QgZnJvbSB0aGUgYmFja2VuZCB2aWEgYVxuICogU25hcHNob3RMaXN0ZW5lci5cbiAqLyAoYXdhaXQgX19QUklWQVRFX2dldExvY2FsU3RvcmUoZSksIHQsIG4pKSksIG4ucHJvbWlzZTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudEdldERvY3VtZW50c1ZpYVNuYXBzaG90TGlzdGVuZXIoZSwgdCwgbiA9IHt9KSB7XG4gICAgY29uc3QgciA9IG5ldyBfX1BSSVZBVEVfRGVmZXJyZWQ7XG4gICAgcmV0dXJuIGUuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiBmdW5jdGlvbiBfX1BSSVZBVEVfZXhlY3V0ZVF1ZXJ5VmlhU25hcHNob3RMaXN0ZW5lcihlLCB0LCBuLCByLCBpKSB7XG4gICAgICAgIGNvbnN0IHMgPSBuZXcgX19QUklWQVRFX0FzeW5jT2JzZXJ2ZXIoe1xuICAgICAgICAgICAgbmV4dDogbiA9PiB7XG4gICAgICAgICAgICAgICAgLy8gUmVtb3ZlIHF1ZXJ5IGZpcnN0IGJlZm9yZSBwYXNzaW5nIGV2ZW50IHRvIHVzZXIgdG8gYXZvaWRcbiAgICAgICAgICAgICAgICAvLyB1c2VyIGFjdGlvbnMgYWZmZWN0aW5nIHRoZSBub3cgc3RhbGUgcXVlcnkuXG4gICAgICAgICAgICAgICAgdC5lbnF1ZXVlQW5kRm9yZ2V0KCgoKSA9PiBfX1BSSVZBVEVfZXZlbnRNYW5hZ2VyVW5saXN0ZW4oZSwgbykpKSwgbi5mcm9tQ2FjaGUgJiYgXCJzZXJ2ZXJcIiA9PT0gci5zb3VyY2UgPyBpLnJlamVjdChuZXcgRmlyZXN0b3JlRXJyb3IoRC5VTkFWQUlMQUJMRSwgJ0ZhaWxlZCB0byBnZXQgZG9jdW1lbnRzIGZyb20gc2VydmVyLiAoSG93ZXZlciwgdGhlc2UgZG9jdW1lbnRzIG1heSBleGlzdCBpbiB0aGUgbG9jYWwgY2FjaGUuIFJ1biBhZ2FpbiB3aXRob3V0IHNldHRpbmcgc291cmNlIHRvIFwic2VydmVyXCIgdG8gcmV0cmlldmUgdGhlIGNhY2hlZCBkb2N1bWVudHMuKScpKSA6IGkucmVzb2x2ZShuKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZSA9PiBpLnJlamVjdChlKVxuICAgICAgICB9KSwgbyA9IG5ldyBfX1BSSVZBVEVfUXVlcnlMaXN0ZW5lcihuLCBzLCB7XG4gICAgICAgICAgICBpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzOiAhMCxcbiAgICAgICAgICAgIEpfOiAhMFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9ldmVudE1hbmFnZXJMaXN0ZW4oZSwgbyk7XG4gICAgfShhd2FpdCBfX1BSSVZBVEVfZ2V0RXZlbnRNYW5hZ2VyKGUpLCBlLmFzeW5jUXVldWUsIHQsIG4sIHIpKSksIHIucHJvbWlzZTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudEFkZFNuYXBzaG90c0luU3luY0xpc3RlbmVyKGUsIHQpIHtcbiAgICBjb25zdCBuID0gbmV3IF9fUFJJVkFURV9Bc3luY09ic2VydmVyKHQpO1xuICAgIHJldHVybiBlLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gZnVuY3Rpb24gX19QUklWQVRFX2FkZFNuYXBzaG90c0luU3luY0xpc3RlbmVyKGUsIHQpIHtcbiAgICAgICAgX19QUklWQVRFX2RlYnVnQ2FzdChlKS5xXy5hZGQodCksIFxuICAgICAgICAvLyBJbW1lZGlhdGVseSBmaXJlIGFuIGluaXRpYWwgZXZlbnQsIGluZGljYXRpbmcgYWxsIGV4aXN0aW5nIGxpc3RlbmVyc1xuICAgICAgICAvLyBhcmUgaW4tc3luYy5cbiAgICAgICAgdC5uZXh0KCk7XG4gICAgfShhd2FpdCBfX1BSSVZBVEVfZ2V0RXZlbnRNYW5hZ2VyKGUpLCBuKSkpLCAoKSA9PiB7XG4gICAgICAgIG4uTmEoKSwgZS5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IGZ1bmN0aW9uIF9fUFJJVkFURV9yZW1vdmVTbmFwc2hvdHNJblN5bmNMaXN0ZW5lcihlLCB0KSB7XG4gICAgICAgICAgICBfX1BSSVZBVEVfZGVidWdDYXN0KGUpLnFfLmRlbGV0ZSh0KTtcbiAgICAgICAgfShhd2FpdCBfX1BSSVZBVEVfZ2V0RXZlbnRNYW5hZ2VyKGUpLCBuKSkpO1xuICAgIH07XG59XG5cbi8qKlxuICogVGFrZXMgYW4gdXBkYXRlRnVuY3Rpb24gaW4gd2hpY2ggYSBzZXQgb2YgcmVhZHMgYW5kIHdyaXRlcyBjYW4gYmUgcGVyZm9ybWVkXG4gKiBhdG9taWNhbGx5LiBJbiB0aGUgdXBkYXRlRnVuY3Rpb24sIHRoZSBjbGllbnQgY2FuIHJlYWQgYW5kIHdyaXRlIHZhbHVlc1xuICogdXNpbmcgdGhlIHN1cHBsaWVkIHRyYW5zYWN0aW9uIG9iamVjdC4gQWZ0ZXIgdGhlIHVwZGF0ZUZ1bmN0aW9uLCBhbGxcbiAqIGNoYW5nZXMgd2lsbCBiZSBjb21taXR0ZWQuIElmIGEgcmV0cnlhYmxlIGVycm9yIG9jY3VycyAoZXg6IHNvbWUgb3RoZXJcbiAqIGNsaWVudCBoYXMgY2hhbmdlZCBhbnkgb2YgdGhlIGRhdGEgcmVmZXJlbmNlZCksIHRoZW4gdGhlIHVwZGF0ZUZ1bmN0aW9uXG4gKiB3aWxsIGJlIGNhbGxlZCBhZ2FpbiBhZnRlciBhIGJhY2tvZmYuIElmIHRoZSB1cGRhdGVGdW5jdGlvbiBzdGlsbCBmYWlsc1xuICogYWZ0ZXIgYWxsIHJldHJpZXMsIHRoZW4gdGhlIHRyYW5zYWN0aW9uIHdpbGwgYmUgcmVqZWN0ZWQuXG4gKlxuICogVGhlIHRyYW5zYWN0aW9uIG9iamVjdCBwYXNzZWQgdG8gdGhlIHVwZGF0ZUZ1bmN0aW9uIGNvbnRhaW5zIG1ldGhvZHMgZm9yXG4gKiBhY2Nlc3NpbmcgZG9jdW1lbnRzIGFuZCBjb2xsZWN0aW9ucy4gVW5saWtlIG90aGVyIGRhdGFzdG9yZSBhY2Nlc3MsIGRhdGFcbiAqIGFjY2Vzc2VkIHdpdGggdGhlIHRyYW5zYWN0aW9uIHdpbGwgbm90IHJlZmxlY3QgbG9jYWwgY2hhbmdlcyB0aGF0IGhhdmUgbm90XG4gKiBiZWVuIGNvbW1pdHRlZC4gRm9yIHRoaXMgcmVhc29uLCBpdCBpcyByZXF1aXJlZCB0aGF0IGFsbCByZWFkcyBhcmVcbiAqIHBlcmZvcm1lZCBiZWZvcmUgYW55IHdyaXRlcy4gVHJhbnNhY3Rpb25zIG11c3QgYmUgcGVyZm9ybWVkIHdoaWxlIG9ubGluZS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50TG9hZEJ1bmRsZShlLCB0LCBuLCByKSB7XG4gICAgY29uc3QgaSA9IGZ1bmN0aW9uIF9fUFJJVkFURV9jcmVhdGVCdW5kbGVSZWFkZXIoZSwgdCkge1xuICAgICAgICBsZXQgbjtcbiAgICAgICAgbiA9IFwic3RyaW5nXCIgPT0gdHlwZW9mIGUgPyBfX1BSSVZBVEVfbmV3VGV4dEVuY29kZXIoKS5lbmNvZGUoZSkgOiBlO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX25ld0J1bmRsZVJlYWRlcihlLCB0KSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9CdW5kbGVSZWFkZXJJbXBsKGUsIHQpO1xuICAgICAgICB9KGZ1bmN0aW9uIF9fUFJJVkFURV90b0J5dGVTdHJlYW1SZWFkZXIoZSwgdCkge1xuICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBVaW50OEFycmF5KSByZXR1cm4gX19QUklWQVRFX3RvQnl0ZVN0cmVhbVJlYWRlckhlbHBlcihlLCB0KTtcbiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHJldHVybiBfX1BSSVZBVEVfdG9CeXRlU3RyZWFtUmVhZGVySGVscGVyKG5ldyBVaW50OEFycmF5KGUpLCB0KTtcbiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgUmVhZGFibGVTdHJlYW0pIHJldHVybiBlLmdldFJlYWRlcigpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU291cmNlIG9mIGB0b0J5dGVTdHJlYW1SZWFkZXJgIGhhcyB0byBiZSBhIEFycmF5QnVmZmVyIG9yIFJlYWRhYmxlU3RyZWFtXCIpO1xuICAgICAgICB9KG4pLCB0KTtcbiAgICB9KG4sIF9fUFJJVkFURV9uZXdTZXJpYWxpemVyKHQpKTtcbiAgICBlLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4ge1xuICAgICAgICBfX1BSSVZBVEVfc3luY0VuZ2luZUxvYWRCdW5kbGUoYXdhaXQgX19QUklWQVRFX2dldFN5bmNFbmdpbmUoZSksIGksIHIpO1xuICAgIH0pKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudEdldE5hbWVkUXVlcnkoZSwgdCkge1xuICAgIHJldHVybiBlLmFzeW5jUXVldWUuZW5xdWV1ZSgoYXN5bmMgKCkgPT4gZnVuY3Rpb24gX19QUklWQVRFX2xvY2FsU3RvcmVHZXROYW1lZFF1ZXJ5KGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9kZWJ1Z0Nhc3QoZSk7XG4gICAgICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiR2V0IG5hbWVkIHF1ZXJ5XCIsIFwicmVhZG9ubHlcIiwgKGUgPT4gbi5Lci5nZXROYW1lZFF1ZXJ5KGUsIHQpKSk7XG4gICAgfShhd2FpdCBfX1BSSVZBVEVfZ2V0TG9jYWxTdG9yZShlKSwgdCkpKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudFNldEluZGV4Q29uZmlndXJhdGlvbihlLCB0KSB7XG4gICAgcmV0dXJuIGUuYXN5bmNRdWV1ZS5lbnF1ZXVlKChhc3luYyAoKSA9PiBhc3luYyBmdW5jdGlvbiBfX1BSSVZBVEVfbG9jYWxTdG9yZUNvbmZpZ3VyZUZpZWxkSW5kZXhlcyhlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpLCByID0gbi5pbmRleE1hbmFnZXIsIGkgPSBbXTtcbiAgICAgICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJDb25maWd1cmUgaW5kZXhlc1wiLCBcInJlYWR3cml0ZVwiLCAoZSA9PiByLmdldEZpZWxkSW5kZXhlcyhlKS5uZXh0KChuID0+IFxuICAgICAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuICAgICAgICAvKipcbiAqIENvbXBhcmVzIHR3byBhcnJheSBmb3IgZXF1YWxpdHkgdXNpbmcgY29tcGFyYXRvci4gVGhlIG1ldGhvZCBjb21wdXRlcyB0aGVcbiAqIGludGVyc2VjdGlvbiBhbmQgaW52b2tlcyBgb25BZGRgIGZvciBldmVyeSBlbGVtZW50IHRoYXQgaXMgaW4gYGFmdGVyYCBidXQgbm90XG4gKiBgYmVmb3JlYC4gYG9uUmVtb3ZlYCBpcyBpbnZva2VkIGZvciBldmVyeSBlbGVtZW50IGluIGBiZWZvcmVgIGJ1dCBtaXNzaW5nXG4gKiBmcm9tIGBhZnRlcmAuXG4gKlxuICogVGhlIG1ldGhvZCBjcmVhdGVzIGEgY29weSBvZiBib3RoIGBiZWZvcmVgIGFuZCBgYWZ0ZXJgIGFuZCBydW5zIGluIE8obiBsb2dcbiAqIG4pLCB3aGVyZSBuIGlzIHRoZSBzaXplIG9mIHRoZSB0d28gbGlzdHMuXG4gKlxuICogQHBhcmFtIGJlZm9yZSAtIFRoZSBlbGVtZW50cyB0aGF0IGV4aXN0IGluIHRoZSBvcmlnaW5hbCBhcnJheS5cbiAqIEBwYXJhbSBhZnRlciAtIFRoZSBlbGVtZW50cyB0byBkaWZmIGFnYWluc3QgdGhlIG9yaWdpbmFsIGFycmF5LlxuICogQHBhcmFtIGNvbXBhcmF0b3IgLSBUaGUgY29tcGFyYXRvciBmb3IgdGhlIGVsZW1lbnRzIGluIGJlZm9yZSBhbmQgYWZ0ZXIuXG4gKiBAcGFyYW0gb25BZGQgLSBBIGZ1bmN0aW9uIHRvIGludm9rZSBmb3IgZXZlcnkgZWxlbWVudCB0aGF0IGlzIHBhcnQgb2YgYFxuICogYWZ0ZXJgIGJ1dCBub3QgYGJlZm9yZWAuXG4gKiBAcGFyYW0gb25SZW1vdmUgLSBBIGZ1bmN0aW9uIHRvIGludm9rZSBmb3IgZXZlcnkgZWxlbWVudCB0aGF0IGlzIHBhcnQgb2ZcbiAqIGBiZWZvcmVgIGJ1dCBub3QgYGFmdGVyYC5cbiAqL1xuICAgICAgICBmdW5jdGlvbiBfX1BSSVZBVEVfZGlmZkFycmF5cyhlLCB0LCBuLCByLCBpKSB7XG4gICAgICAgICAgICBlID0gWyAuLi5lIF0sIHQgPSBbIC4uLnQgXSwgZS5zb3J0KG4pLCB0LnNvcnQobik7XG4gICAgICAgICAgICBjb25zdCBzID0gZS5sZW5ndGgsIG8gPSB0Lmxlbmd0aDtcbiAgICAgICAgICAgIGxldCBfID0gMCwgYSA9IDA7XG4gICAgICAgICAgICBmb3IgKDtfIDwgbyAmJiBhIDwgczsgKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IG4oZVthXSwgdFtfXSk7XG4gICAgICAgICAgICAgICAgcyA8IDAgPyBcbiAgICAgICAgICAgICAgICAvLyBUaGUgZWxlbWVudCB3YXMgcmVtb3ZlZCBpZiB0aGUgbmV4dCBlbGVtZW50IGluIG91ciBvcmRlcmVkXG4gICAgICAgICAgICAgICAgLy8gd2Fsa3Rocm91Z2ggaXMgb25seSBpbiBgYmVmb3JlYC5cbiAgICAgICAgICAgICAgICBpKGVbYSsrXSkgOiBzID4gMCA/IFxuICAgICAgICAgICAgICAgIC8vIFRoZSBlbGVtZW50IHdhcyBhZGRlZCBpZiB0aGUgbmV4dCBlbGVtZW50IGluIG91ciBvcmRlcmVkIHdhbGt0aHJvdWdoXG4gICAgICAgICAgICAgICAgLy8gaXMgb25seSBpbiBgYWZ0ZXJgLlxuICAgICAgICAgICAgICAgIHIodFtfKytdKSA6IChfKyssIGErKyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKDtfIDwgbzsgKSByKHRbXysrXSk7XG4gICAgICAgICAgICBmb3IgKDthIDwgczsgKSBpKGVbYSsrXSk7XG4gICAgICAgIH0obiwgdCwgX19QUklWQVRFX2ZpZWxkSW5kZXhTZW1hbnRpY0NvbXBhcmF0b3IsICh0ID0+IHtcbiAgICAgICAgICAgIGkucHVzaChyLmFkZEZpZWxkSW5kZXgoZSwgdCkpO1xuICAgICAgICB9KSwgKHQgPT4ge1xuICAgICAgICAgICAgaS5wdXNoKHIuZGVsZXRlRmllbGRJbmRleChlLCB0KSk7XG4gICAgICAgIH0pKSkpLm5leHQoKCgpID0+IFBlcnNpc3RlbmNlUHJvbWlzZS53YWl0Rm9yKGkpKSkpKTtcbiAgICB9KGF3YWl0IF9fUFJJVkFURV9nZXRMb2NhbFN0b3JlKGUpLCB0KSkpO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50U2V0UGVyc2lzdGVudENhY2hlSW5kZXhBdXRvQ3JlYXRpb25FbmFibGVkKGUsIHQpIHtcbiAgICByZXR1cm4gZS5hc3luY1F1ZXVlLmVucXVldWUoKGFzeW5jICgpID0+IGZ1bmN0aW9uIF9fUFJJVkFURV9sb2NhbFN0b3JlU2V0SW5kZXhBdXRvQ3JlYXRpb25FbmFibGVkKGUsIHQpIHtcbiAgICAgICAgX19QUklWQVRFX2RlYnVnQ2FzdChlKS5lcy4kaSA9IHQ7XG4gICAgfShhd2FpdCBfX1BSSVZBVEVfZ2V0TG9jYWxTdG9yZShlKSwgdCkpKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudERlbGV0ZUFsbEZpZWxkSW5kZXhlcyhlKSB7XG4gICAgcmV0dXJuIGUuYXN5bmNRdWV1ZS5lbnF1ZXVlKChhc3luYyAoKSA9PiBmdW5jdGlvbiBfX1BSSVZBVEVfbG9jYWxTdG9yZURlbGV0ZUFsbEZpZWxkSW5kZXhlcyhlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfZGVidWdDYXN0KGUpLCBuID0gdC5pbmRleE1hbmFnZXI7XG4gICAgICAgIHJldHVybiB0LnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiRGVsZXRlIEFsbCBJbmRleGVzXCIsIFwicmVhZHdyaXRlXCIsIChlID0+IG4uZGVsZXRlQWxsRmllbGRJbmRleGVzKGUpKSk7XG4gICAgfVxuICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4gICAgLy8gVGhlIGZvcm1hdCBvZiB0aGUgTG9jYWxTdG9yYWdlIGtleSB0aGF0IHN0b3JlcyB0aGUgY2xpZW50IHN0YXRlIGlzOlxuICAgIC8vICAgICBmaXJlc3RvcmVfY2xpZW50c188cGVyc2lzdGVuY2VfcHJlZml4Pl88aW5zdGFuY2Vfa2V5PlxuICAgIChhd2FpdCBfX1BSSVZBVEVfZ2V0TG9jYWxTdG9yZShlKSkpKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjMgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQ29tcGFyZXMgdHdvIGBFeHBlcmltZW50YWxMb25nUG9sbGluZ09wdGlvbnNgIG9iamVjdHMgZm9yIGVxdWFsaXR5LlxuICovXG4vKipcbiAqIENyZWF0ZXMgYW5kIHJldHVybnMgYSBuZXcgYEV4cGVyaW1lbnRhbExvbmdQb2xsaW5nT3B0aW9uc2Agd2l0aCB0aGUgc2FtZVxuICogb3B0aW9uIHZhbHVlcyBhcyB0aGUgZ2l2ZW4gaW5zdGFuY2UuXG4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV9jbG9uZUxvbmdQb2xsaW5nT3B0aW9ucyhlKSB7XG4gICAgY29uc3QgdCA9IHt9O1xuICAgIHJldHVybiB2b2lkIDAgIT09IGUudGltZW91dFNlY29uZHMgJiYgKHQudGltZW91dFNlY29uZHMgPSBlLnRpbWVvdXRTZWNvbmRzKSwgdDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY29uc3QgbWUgPSBuZXcgTWFwO1xuXG4vKipcbiAqIEFuIGluc3RhbmNlIG1hcCB0aGF0IGVuc3VyZXMgb25seSBvbmUgRGF0YXN0b3JlIGV4aXN0cyBwZXIgRmlyZXN0b3JlXG4gKiBpbnN0YW5jZS5cbiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmZ1bmN0aW9uIF9fUFJJVkFURV92YWxpZGF0ZU5vbkVtcHR5QXJndW1lbnQoZSwgdCwgbikge1xuICAgIGlmICghbikgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgYEZ1bmN0aW9uICR7ZX0oKSBjYW5ub3QgYmUgY2FsbGVkIHdpdGggYW4gZW1wdHkgJHt0fS5gKTtcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZXMgdGhhdCB0d28gYm9vbGVhbiBvcHRpb25zIGFyZSBub3Qgc2V0IGF0IHRoZSBzYW1lIHRpbWUuXG4gKiBAaW50ZXJuYWxcbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfdmFsaWRhdGVJc05vdFVzZWRUb2dldGhlcihlLCB0LCBuLCByKSB7XG4gICAgaWYgKCEwID09PSB0ICYmICEwID09PSByKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5JTlZBTElEX0FSR1VNRU5ULCBgJHtlfSBhbmQgJHtufSBjYW5ub3QgYmUgdXNlZCB0b2dldGhlci5gKTtcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZXMgdGhhdCBgcGF0aGAgcmVmZXJzIHRvIGEgZG9jdW1lbnQgKGluZGljYXRlZCBieSB0aGUgZmFjdCBpdCBjb250YWluc1xuICogYW4gZXZlbiBudW1iZXJzIG9mIHNlZ21lbnRzKS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfdmFsaWRhdGVEb2N1bWVudFBhdGgoZSkge1xuICAgIGlmICghRG9jdW1lbnRLZXkuaXNEb2N1bWVudEtleShlKSkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgZG9jdW1lbnQgcmVmZXJlbmNlLiBEb2N1bWVudCByZWZlcmVuY2VzIG11c3QgaGF2ZSBhbiBldmVuIG51bWJlciBvZiBzZWdtZW50cywgYnV0ICR7ZX0gaGFzICR7ZS5sZW5ndGh9LmApO1xufVxuXG4vKipcbiAqIFZhbGlkYXRlcyB0aGF0IGBwYXRoYCByZWZlcnMgdG8gYSBjb2xsZWN0aW9uIChpbmRpY2F0ZWQgYnkgdGhlIGZhY3QgaXRcbiAqIGNvbnRhaW5zIGFuIG9kZCBudW1iZXJzIG9mIHNlZ21lbnRzKS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfdmFsaWRhdGVDb2xsZWN0aW9uUGF0aChlKSB7XG4gICAgaWYgKERvY3VtZW50S2V5LmlzRG9jdW1lbnRLZXkoZSkpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIGNvbGxlY3Rpb24gcmVmZXJlbmNlLiBDb2xsZWN0aW9uIHJlZmVyZW5jZXMgbXVzdCBoYXZlIGFuIG9kZCBudW1iZXIgb2Ygc2VnbWVudHMsIGJ1dCAke2V9IGhhcyAke2UubGVuZ3RofS5gKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgaXQncyBhIG5vbi1udWxsIG9iamVjdCB3aXRob3V0IGEgY3VzdG9tIHByb3RvdHlwZVxuICogKGkuZS4gZXhjbHVkZXMgQXJyYXksIERhdGUsIGV0Yy4pLlxuICovXG4vKiogUmV0dXJucyBhIHN0cmluZyBkZXNjcmliaW5nIHRoZSB0eXBlIC8gdmFsdWUgb2YgdGhlIHByb3ZpZGVkIGlucHV0LiAqL1xuZnVuY3Rpb24gX19QUklWQVRFX3ZhbHVlRGVzY3JpcHRpb24oZSkge1xuICAgIGlmICh2b2lkIDAgPT09IGUpIHJldHVybiBcInVuZGVmaW5lZFwiO1xuICAgIGlmIChudWxsID09PSBlKSByZXR1cm4gXCJudWxsXCI7XG4gICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIGUpIHJldHVybiBlLmxlbmd0aCA+IDIwICYmIChlID0gYCR7ZS5zdWJzdHJpbmcoMCwgMjApfS4uLmApLCBcbiAgICBKU09OLnN0cmluZ2lmeShlKTtcbiAgICBpZiAoXCJudW1iZXJcIiA9PSB0eXBlb2YgZSB8fCBcImJvb2xlYW5cIiA9PSB0eXBlb2YgZSkgcmV0dXJuIFwiXCIgKyBlO1xuICAgIGlmIChcIm9iamVjdFwiID09IHR5cGVvZiBlKSB7XG4gICAgICAgIGlmIChlIGluc3RhbmNlb2YgQXJyYXkpIHJldHVybiBcImFuIGFycmF5XCI7XG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBcbiAgICAgICAgICAgIC8qKiB0cnkgdG8gZ2V0IHRoZSBjb25zdHJ1Y3RvciBuYW1lIGZvciBhbiBvYmplY3QuICovXG4gICAgICAgICAgICBmdW5jdGlvbiBfX1BSSVZBVEVfdHJ5R2V0Q3VzdG9tT2JqZWN0VHlwZShlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGUuY29uc3RydWN0b3IpIHJldHVybiBlLmNvbnN0cnVjdG9yLm5hbWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKipcbiAqIENhc3RzIGBvYmpgIHRvIGBUYCwgb3B0aW9uYWxseSB1bndyYXBwaW5nIENvbXBhdCB0eXBlcyB0byBleHBvc2UgdGhlXG4gKiB1bmRlcmx5aW5nIGluc3RhbmNlLiBUaHJvd3MgaWYgIGBvYmpgIGlzIG5vdCBhbiBpbnN0YW5jZSBvZiBgVGAuXG4gKlxuICogVGhpcyBjYXN0IGlzIHVzZWQgaW4gdGhlIExpdGUgYW5kIEZ1bGwgU0RLIHRvIHZlcmlmeSBpbnN0YW5jZSB0eXBlcyBmb3JcbiAqIGFyZ3VtZW50cyBwYXNzZWQgdG8gdGhlIHB1YmxpYyBBUEkuXG4gKiBAaW50ZXJuYWxcbiAqLyAoZSk7XG4gICAgICAgICAgICByZXR1cm4gdCA/IGBhIGN1c3RvbSAke3R9IG9iamVjdGAgOiBcImFuIG9iamVjdFwiO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIGUgPyBcImEgZnVuY3Rpb25cIiA6IGZhaWwoKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2Nhc3QoZSwgXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxudCkge1xuICAgIGlmIChcIl9kZWxlZ2F0ZVwiIGluIGUgJiYgKFxuICAgIC8vIFVud3JhcCBDb21wYXQgdHlwZXNcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGUgPSBlLl9kZWxlZ2F0ZSksICEoZSBpbnN0YW5jZW9mIHQpKSB7XG4gICAgICAgIGlmICh0Lm5hbWUgPT09IGUuY29uc3RydWN0b3IubmFtZSkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgXCJUeXBlIGRvZXMgbm90IG1hdGNoIHRoZSBleHBlY3RlZCBpbnN0YW5jZS4gRGlkIHlvdSBwYXNzIGEgcmVmZXJlbmNlIGZyb20gYSBkaWZmZXJlbnQgRmlyZXN0b3JlIFNESz9cIik7XG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfdmFsdWVEZXNjcmlwdGlvbihlKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELklOVkFMSURfQVJHVU1FTlQsIGBFeHBlY3RlZCB0eXBlICcke3QubmFtZX0nLCBidXQgaXQgd2FzOiAke259YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGU7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV92YWxpZGF0ZVBvc2l0aXZlTnVtYmVyKGUsIHQpIHtcbiAgICBpZiAodCA8PSAwKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5JTlZBTElEX0FSR1VNRU5ULCBgRnVuY3Rpb24gJHtlfSgpIHJlcXVpcmVzIGEgcG9zaXRpdmUgbnVtYmVyLCBidXQgaXQgd2FzOiAke3R9LmApO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLy8gc2V0dGluZ3MoKSBkZWZhdWx0czpcbi8qKlxuICogQSBjb25jcmV0ZSB0eXBlIGRlc2NyaWJpbmcgYWxsIHRoZSB2YWx1ZXMgdGhhdCBjYW4gYmUgYXBwbGllZCB2aWEgYVxuICogdXNlci1zdXBwbGllZCBgRmlyZXN0b3JlU2V0dGluZ3NgIG9iamVjdC4gVGhpcyBpcyBhIHNlcGFyYXRlIHR5cGUgc28gdGhhdFxuICogZGVmYXVsdHMgY2FuIGJlIHN1cHBsaWVkIGFuZCB0aGUgdmFsdWUgY2FuIGJlIGNoZWNrZWQgZm9yIGVxdWFsaXR5LlxuICovXG5jbGFzcyBGaXJlc3RvcmVTZXR0aW5nc0ltcGwge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdmFyIHQsIG47XG4gICAgICAgIGlmICh2b2lkIDAgPT09IGUuaG9zdCkge1xuICAgICAgICAgICAgaWYgKHZvaWQgMCAhPT0gZS5zc2wpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELklOVkFMSURfQVJHVU1FTlQsIFwiQ2FuJ3QgcHJvdmlkZSBzc2wgb3B0aW9uIGlmIGhvc3Qgb3B0aW9uIGlzIG5vdCBzZXRcIik7XG4gICAgICAgICAgICB0aGlzLmhvc3QgPSBcImZpcmVzdG9yZS5nb29nbGVhcGlzLmNvbVwiLCB0aGlzLnNzbCA9IHRydWU7XG4gICAgICAgIH0gZWxzZSB0aGlzLmhvc3QgPSBlLmhvc3QsIHRoaXMuc3NsID0gbnVsbCA9PT0gKHQgPSBlLnNzbCkgfHwgdm9pZCAwID09PSB0IHx8IHQ7XG4gICAgICAgIGlmICh0aGlzLmNyZWRlbnRpYWxzID0gZS5jcmVkZW50aWFscywgdGhpcy5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzID0gISFlLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMsIFxuICAgICAgICB0aGlzLmxvY2FsQ2FjaGUgPSBlLmxvY2FsQ2FjaGUsIHZvaWQgMCA9PT0gZS5jYWNoZVNpemVCeXRlcykgdGhpcy5jYWNoZVNpemVCeXRlcyA9IDQxOTQzMDQwOyBlbHNlIHtcbiAgICAgICAgICAgIGlmICgtMSAhPT0gZS5jYWNoZVNpemVCeXRlcyAmJiBlLmNhY2hlU2l6ZUJ5dGVzIDwgMTA0ODU3NikgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgXCJjYWNoZVNpemVCeXRlcyBtdXN0IGJlIGF0IGxlYXN0IDEwNDg1NzZcIik7XG4gICAgICAgICAgICB0aGlzLmNhY2hlU2l6ZUJ5dGVzID0gZS5jYWNoZVNpemVCeXRlcztcbiAgICAgICAgfVxuICAgICAgICBfX1BSSVZBVEVfdmFsaWRhdGVJc05vdFVzZWRUb2dldGhlcihcImV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmdcIiwgZS5leHBlcmltZW50YWxGb3JjZUxvbmdQb2xsaW5nLCBcImV4cGVyaW1lbnRhbEF1dG9EZXRlY3RMb25nUG9sbGluZ1wiLCBlLmV4cGVyaW1lbnRhbEF1dG9EZXRlY3RMb25nUG9sbGluZyksIFxuICAgICAgICB0aGlzLmV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmcgPSAhIWUuZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZywgdGhpcy5leHBlcmltZW50YWxGb3JjZUxvbmdQb2xsaW5nID8gdGhpcy5leHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmcgPSAhMSA6IHZvaWQgMCA9PT0gZS5leHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmcgPyB0aGlzLmV4cGVyaW1lbnRhbEF1dG9EZXRlY3RMb25nUG9sbGluZyA9IHRydWUgOiBcbiAgICAgICAgLy8gRm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LCBjb2VyY2UgdGhlIHZhbHVlIHRvIGJvb2xlYW4gZXZlbiB0aG91Z2hcbiAgICAgICAgLy8gdGhlIFR5cGVTY3JpcHQgY29tcGlsZXIgaGFzIG5hcnJvd2VkIHRoZSB0eXBlIHRvIGJvb2xlYW4gYWxyZWFkeS5cbiAgICAgICAgLy8gbm9pbnNwZWN0aW9uIFBvaW50bGVzc0Jvb2xlYW5FeHByZXNzaW9uSlNcbiAgICAgICAgdGhpcy5leHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmcgPSAhIWUuZXhwZXJpbWVudGFsQXV0b0RldGVjdExvbmdQb2xsaW5nLCBcbiAgICAgICAgdGhpcy5leHBlcmltZW50YWxMb25nUG9sbGluZ09wdGlvbnMgPSBfX1BSSVZBVEVfY2xvbmVMb25nUG9sbGluZ09wdGlvbnMobnVsbCAhPT0gKG4gPSBlLmV4cGVyaW1lbnRhbExvbmdQb2xsaW5nT3B0aW9ucykgJiYgdm9pZCAwICE9PSBuID8gbiA6IHt9KSwgXG4gICAgICAgIGZ1bmN0aW9uIF9fUFJJVkFURV92YWxpZGF0ZUxvbmdQb2xsaW5nT3B0aW9ucyhlKSB7XG4gICAgICAgICAgICBpZiAodm9pZCAwICE9PSBlLnRpbWVvdXRTZWNvbmRzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzTmFOKGUudGltZW91dFNlY29uZHMpKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5JTlZBTElEX0FSR1VNRU5ULCBgaW52YWxpZCBsb25nIHBvbGxpbmcgdGltZW91dDogJHtlLnRpbWVvdXRTZWNvbmRzfSAobXVzdCBub3QgYmUgTmFOKWApO1xuICAgICAgICAgICAgICAgIGlmIChlLnRpbWVvdXRTZWNvbmRzIDwgNSkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgYGludmFsaWQgbG9uZyBwb2xsaW5nIHRpbWVvdXQ6ICR7ZS50aW1lb3V0U2Vjb25kc30gKG1pbmltdW0gYWxsb3dlZCB2YWx1ZSBpcyA1KWApO1xuICAgICAgICAgICAgICAgIGlmIChlLnRpbWVvdXRTZWNvbmRzID4gMzApIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELklOVkFMSURfQVJHVU1FTlQsIGBpbnZhbGlkIGxvbmcgcG9sbGluZyB0aW1lb3V0OiAke2UudGltZW91dFNlY29uZHN9IChtYXhpbXVtIGFsbG93ZWQgdmFsdWUgaXMgMzApYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbiAgICAgICAgLyoqXG4gKiBUaGUgQ2xvdWQgRmlyZXN0b3JlIHNlcnZpY2UgaW50ZXJmYWNlLlxuICpcbiAqIERvIG5vdCBjYWxsIHRoaXMgY29uc3RydWN0b3IgZGlyZWN0bHkuIEluc3RlYWQsIHVzZSB7QGxpbmsgKGdldEZpcmVzdG9yZToxKX0uXG4gKi8gKHRoaXMuZXhwZXJpbWVudGFsTG9uZ1BvbGxpbmdPcHRpb25zKSwgdGhpcy51c2VGZXRjaFN0cmVhbXMgPSAhIWUudXNlRmV0Y2hTdHJlYW1zO1xuICAgIH1cbiAgICBpc0VxdWFsKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaG9zdCA9PT0gZS5ob3N0ICYmIHRoaXMuc3NsID09PSBlLnNzbCAmJiB0aGlzLmNyZWRlbnRpYWxzID09PSBlLmNyZWRlbnRpYWxzICYmIHRoaXMuY2FjaGVTaXplQnl0ZXMgPT09IGUuY2FjaGVTaXplQnl0ZXMgJiYgdGhpcy5leHBlcmltZW50YWxGb3JjZUxvbmdQb2xsaW5nID09PSBlLmV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmcgJiYgdGhpcy5leHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmcgPT09IGUuZXhwZXJpbWVudGFsQXV0b0RldGVjdExvbmdQb2xsaW5nICYmIGZ1bmN0aW9uIF9fUFJJVkFURV9sb25nUG9sbGluZ09wdGlvbnNFcXVhbChlLCB0KSB7XG4gICAgICAgICAgICByZXR1cm4gZS50aW1lb3V0U2Vjb25kcyA9PT0gdC50aW1lb3V0U2Vjb25kcztcbiAgICAgICAgfSh0aGlzLmV4cGVyaW1lbnRhbExvbmdQb2xsaW5nT3B0aW9ucywgZS5leHBlcmltZW50YWxMb25nUG9sbGluZ09wdGlvbnMpICYmIHRoaXMuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcyA9PT0gZS5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzICYmIHRoaXMudXNlRmV0Y2hTdHJlYW1zID09PSBlLnVzZUZldGNoU3RyZWFtcztcbiAgICB9XG59XG5cbmNsYXNzIEZpcmVzdG9yZSQxIHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4sIHIpIHtcbiAgICAgICAgdGhpcy5fYXV0aENyZWRlbnRpYWxzID0gZSwgdGhpcy5fYXBwQ2hlY2tDcmVkZW50aWFscyA9IHQsIHRoaXMuX2RhdGFiYXNlSWQgPSBuLCBcbiAgICAgICAgdGhpcy5fYXBwID0gciwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaGV0aGVyIGl0J3MgYSBGaXJlc3RvcmUgb3IgRmlyZXN0b3JlIExpdGUgaW5zdGFuY2UuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnR5cGUgPSBcImZpcmVzdG9yZS1saXRlXCIsIHRoaXMuX3BlcnNpc3RlbmNlS2V5ID0gXCIobGl0ZSlcIiwgdGhpcy5fc2V0dGluZ3MgPSBuZXcgRmlyZXN0b3JlU2V0dGluZ3NJbXBsKHt9KSwgXG4gICAgICAgIHRoaXMuX3NldHRpbmdzRnJvemVuID0gITE7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSB7QGxpbmsgQGZpcmViYXNlL2FwcCNGaXJlYmFzZUFwcH0gYXNzb2NpYXRlZCB3aXRoIHRoaXMgYEZpcmVzdG9yZWAgc2VydmljZVxuICAgICAqIGluc3RhbmNlLlxuICAgICAqLyAgICBnZXQgYXBwKCkge1xuICAgICAgICBpZiAoIXRoaXMuX2FwcCkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJGaXJlc3RvcmUgd2FzIG5vdCBpbml0aWFsaXplZCB1c2luZyB0aGUgRmlyZWJhc2UgU0RLLiAnYXBwJyBpcyBub3QgYXZhaWxhYmxlXCIpO1xuICAgICAgICByZXR1cm4gdGhpcy5fYXBwO1xuICAgIH1cbiAgICBnZXQgX2luaXRpYWxpemVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2V0dGluZ3NGcm96ZW47XG4gICAgfVxuICAgIGdldCBfdGVybWluYXRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gdGhpcy5fdGVybWluYXRlVGFzaztcbiAgICB9XG4gICAgX3NldFNldHRpbmdzKGUpIHtcbiAgICAgICAgaWYgKHRoaXMuX3NldHRpbmdzRnJvemVuKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5GQUlMRURfUFJFQ09ORElUSU9OLCBcIkZpcmVzdG9yZSBoYXMgYWxyZWFkeSBiZWVuIHN0YXJ0ZWQgYW5kIGl0cyBzZXR0aW5ncyBjYW4gbm8gbG9uZ2VyIGJlIGNoYW5nZWQuIFlvdSBjYW4gb25seSBtb2RpZnkgc2V0dGluZ3MgYmVmb3JlIGNhbGxpbmcgYW55IG90aGVyIG1ldGhvZHMgb24gYSBGaXJlc3RvcmUgb2JqZWN0LlwiKTtcbiAgICAgICAgdGhpcy5fc2V0dGluZ3MgPSBuZXcgRmlyZXN0b3JlU2V0dGluZ3NJbXBsKGUpLCB2b2lkIDAgIT09IGUuY3JlZGVudGlhbHMgJiYgKHRoaXMuX2F1dGhDcmVkZW50aWFscyA9IGZ1bmN0aW9uIF9fUFJJVkFURV9tYWtlQXV0aENyZWRlbnRpYWxzUHJvdmlkZXIoZSkge1xuICAgICAgICAgICAgaWYgKCFlKSByZXR1cm4gbmV3IF9fUFJJVkFURV9FbXB0eUF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyO1xuICAgICAgICAgICAgc3dpdGNoIChlLnR5cGUpIHtcbiAgICAgICAgICAgICAgY2FzZSBcImZpcnN0UGFydHlcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9GaXJzdFBhcnR5QXV0aENyZWRlbnRpYWxzUHJvdmlkZXIoZS5zZXNzaW9uSW5kZXggfHwgXCIwXCIsIGUuaWFtVG9rZW4gfHwgbnVsbCwgZS5hdXRoVG9rZW5GYWN0b3J5IHx8IG51bGwpO1xuXG4gICAgICAgICAgICAgIGNhc2UgXCJwcm92aWRlclwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBlLmNsaWVudDtcblxuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELklOVkFMSURfQVJHVU1FTlQsIFwibWFrZUF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyIGZhaWxlZCBkdWUgdG8gaW52YWxpZCBjcmVkZW50aWFsIHR5cGVcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0oZS5jcmVkZW50aWFscykpO1xuICAgIH1cbiAgICBfZ2V0U2V0dGluZ3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZXR0aW5ncztcbiAgICB9XG4gICAgX2ZyZWV6ZVNldHRpbmdzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2V0dGluZ3NGcm96ZW4gPSAhMCwgdGhpcy5fc2V0dGluZ3M7XG4gICAgfVxuICAgIF9kZWxldGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl90ZXJtaW5hdGVUYXNrIHx8ICh0aGlzLl90ZXJtaW5hdGVUYXNrID0gdGhpcy5fdGVybWluYXRlKCkpLCB0aGlzLl90ZXJtaW5hdGVUYXNrO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhIEpTT04tc2VyaWFsaXphYmxlIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgYEZpcmVzdG9yZWAgaW5zdGFuY2UuICovICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGFwcDogdGhpcy5fYXBwLFxuICAgICAgICAgICAgZGF0YWJhc2VJZDogdGhpcy5fZGF0YWJhc2VJZCxcbiAgICAgICAgICAgIHNldHRpbmdzOiB0aGlzLl9zZXR0aW5nc1xuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUZXJtaW5hdGVzIGFsbCBjb21wb25lbnRzIHVzZWQgYnkgdGhpcyBjbGllbnQuIFN1YmNsYXNzZXMgY2FuIG92ZXJyaWRlXG4gICAgICogdGhpcyBtZXRob2QgdG8gY2xlYW4gdXAgdGhlaXIgb3duIGRlcGVuZGVuY2llcywgYnV0IG11c3QgYWxzbyBjYWxsIHRoaXNcbiAgICAgKiBtZXRob2QuXG4gICAgICpcbiAgICAgKiBPbmx5IGV2ZXIgY2FsbGVkIG9uY2UuXG4gICAgICovICAgIF90ZXJtaW5hdGUoKSB7XG4gICAgICAgIC8qKlxuICogUmVtb3ZlcyBhbGwgY29tcG9uZW50cyBhc3NvY2lhdGVkIHdpdGggdGhlIHByb3ZpZGVkIGluc3RhbmNlLiBNdXN0IGJlIGNhbGxlZFxuICogd2hlbiB0aGUgYEZpcmVzdG9yZWAgaW5zdGFuY2UgaXMgdGVybWluYXRlZC5cbiAqL1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX3JlbW92ZUNvbXBvbmVudHMoZSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IG1lLmdldChlKTtcbiAgICAgICAgICAgIHQgJiYgKF9fUFJJVkFURV9sb2dEZWJ1ZyhcIkNvbXBvbmVudFByb3ZpZGVyXCIsIFwiUmVtb3ZpbmcgRGF0YXN0b3JlXCIpLCBtZS5kZWxldGUoZSksIFxuICAgICAgICAgICAgdC50ZXJtaW5hdGUoKSk7XG4gICAgICAgIH0odGhpcyksIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBNb2RpZnkgdGhpcyBpbnN0YW5jZSB0byBjb21tdW5pY2F0ZSB3aXRoIHRoZSBDbG91ZCBGaXJlc3RvcmUgZW11bGF0b3IuXG4gKlxuICogTm90ZTogVGhpcyBtdXN0IGJlIGNhbGxlZCBiZWZvcmUgdGhpcyBpbnN0YW5jZSBoYXMgYmVlbiB1c2VkIHRvIGRvIGFueVxuICogb3BlcmF0aW9ucy5cbiAqXG4gKiBAcGFyYW0gZmlyZXN0b3JlIC0gVGhlIGBGaXJlc3RvcmVgIGluc3RhbmNlIHRvIGNvbmZpZ3VyZSB0byBjb25uZWN0IHRvIHRoZVxuICogZW11bGF0b3IuXG4gKiBAcGFyYW0gaG9zdCAtIHRoZSBlbXVsYXRvciBob3N0IChleDogbG9jYWxob3N0KS5cbiAqIEBwYXJhbSBwb3J0IC0gdGhlIGVtdWxhdG9yIHBvcnQgKGV4OiA5MDAwKS5cbiAqIEBwYXJhbSBvcHRpb25zLm1vY2tVc2VyVG9rZW4gLSB0aGUgbW9jayBhdXRoIHRva2VuIHRvIHVzZSBmb3IgdW5pdCB0ZXN0aW5nXG4gKiBTZWN1cml0eSBSdWxlcy5cbiAqLyBmdW5jdGlvbiBjb25uZWN0RmlyZXN0b3JlRW11bGF0b3IoZSwgdCwgbiwgciA9IHt9KSB7XG4gICAgdmFyIGk7XG4gICAgY29uc3QgcyA9IChlID0gX19QUklWQVRFX2Nhc3QoZSwgRmlyZXN0b3JlJDEpKS5fZ2V0U2V0dGluZ3MoKSwgbyA9IGAke3R9OiR7bn1gO1xuICAgIGlmIChcImZpcmVzdG9yZS5nb29nbGVhcGlzLmNvbVwiICE9PSBzLmhvc3QgJiYgcy5ob3N0ICE9PSBvICYmIF9fUFJJVkFURV9sb2dXYXJuKFwiSG9zdCBoYXMgYmVlbiBzZXQgaW4gYm90aCBzZXR0aW5ncygpIGFuZCBjb25uZWN0RmlyZXN0b3JlRW11bGF0b3IoKSwgZW11bGF0b3IgaG9zdCB3aWxsIGJlIHVzZWQuXCIpLCBcbiAgICBlLl9zZXRTZXR0aW5ncyhPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHMpLCB7XG4gICAgICAgIGhvc3Q6IG8sXG4gICAgICAgIHNzbDogITFcbiAgICB9KSksIHIubW9ja1VzZXJUb2tlbikge1xuICAgICAgICBsZXQgdCwgbjtcbiAgICAgICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIHIubW9ja1VzZXJUb2tlbikgdCA9IHIubW9ja1VzZXJUb2tlbiwgbiA9IFVzZXIuTU9DS19VU0VSOyBlbHNlIHtcbiAgICAgICAgICAgIC8vIExldCBjcmVhdGVNb2NrVXNlclRva2VuIHZhbGlkYXRlIGZpcnN0IChjYXRjaGVzIGNvbW1vbiBtaXN0YWtlcyBsaWtlXG4gICAgICAgICAgICAvLyBpbnZhbGlkIGZpZWxkIFwidWlkXCIgYW5kIG1pc3NpbmcgZmllbGQgXCJzdWJcIiAvIFwidXNlcl9pZFwiLilcbiAgICAgICAgICAgIHQgPSBjcmVhdGVNb2NrVXNlclRva2VuKHIubW9ja1VzZXJUb2tlbiwgbnVsbCA9PT0gKGkgPSBlLl9hcHApIHx8IHZvaWQgMCA9PT0gaSA/IHZvaWQgMCA6IGkub3B0aW9ucy5wcm9qZWN0SWQpO1xuICAgICAgICAgICAgY29uc3QgcyA9IHIubW9ja1VzZXJUb2tlbi5zdWIgfHwgci5tb2NrVXNlclRva2VuLnVzZXJfaWQ7XG4gICAgICAgICAgICBpZiAoIXMpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELklOVkFMSURfQVJHVU1FTlQsIFwibW9ja1VzZXJUb2tlbiBtdXN0IGNvbnRhaW4gJ3N1Yicgb3IgJ3VzZXJfaWQnIGZpZWxkIVwiKTtcbiAgICAgICAgICAgIG4gPSBuZXcgVXNlcihzKTtcbiAgICAgICAgfVxuICAgICAgICBlLl9hdXRoQ3JlZGVudGlhbHMgPSBuZXcgX19QUklWQVRFX0VtdWxhdG9yQXV0aENyZWRlbnRpYWxzUHJvdmlkZXIobmV3IF9fUFJJVkFURV9PQXV0aFRva2VuKHQsIG4pKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgYFF1ZXJ5YCByZWZlcnMgdG8gYSBxdWVyeSB3aGljaCB5b3UgY2FuIHJlYWQgb3IgbGlzdGVuIHRvLiBZb3UgY2FuIGFsc29cbiAqIGNvbnN0cnVjdCByZWZpbmVkIGBRdWVyeWAgb2JqZWN0cyBieSBhZGRpbmcgZmlsdGVycyBhbmQgb3JkZXJpbmcuXG4gKi8gY2xhc3MgUXVlcnkge1xuICAgIC8vIFRoaXMgaXMgdGhlIGxpdGUgdmVyc2lvbiBvZiB0aGUgUXVlcnkgY2xhc3MgaW4gdGhlIG1haW4gU0RLLlxuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yIHByb3RlY3RlZCAqL1xuICAgIGNvbnN0cnVjdG9yKGUsIFxuICAgIC8qKlxuICAgICAqIElmIHByb3ZpZGVkLCB0aGUgYEZpcmVzdG9yZURhdGFDb252ZXJ0ZXJgIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGluc3RhbmNlLlxuICAgICAqL1xuICAgIHQsIG4pIHtcbiAgICAgICAgdGhpcy5jb252ZXJ0ZXIgPSB0LCB0aGlzLl9xdWVyeSA9IG4sIFxuICAgICAgICAvKiogVGhlIHR5cGUgb2YgdGhpcyBGaXJlc3RvcmUgcmVmZXJlbmNlLiAqL1xuICAgICAgICB0aGlzLnR5cGUgPSBcInF1ZXJ5XCIsIHRoaXMuZmlyZXN0b3JlID0gZTtcbiAgICB9XG4gICAgd2l0aENvbnZlcnRlcihlKSB7XG4gICAgICAgIHJldHVybiBuZXcgUXVlcnkodGhpcy5maXJlc3RvcmUsIGUsIHRoaXMuX3F1ZXJ5KTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBgRG9jdW1lbnRSZWZlcmVuY2VgIHJlZmVycyB0byBhIGRvY3VtZW50IGxvY2F0aW9uIGluIGEgRmlyZXN0b3JlIGRhdGFiYXNlXG4gKiBhbmQgY2FuIGJlIHVzZWQgdG8gd3JpdGUsIHJlYWQsIG9yIGxpc3RlbiB0byB0aGUgbG9jYXRpb24uIFRoZSBkb2N1bWVudCBhdFxuICogdGhlIHJlZmVyZW5jZWQgbG9jYXRpb24gbWF5IG9yIG1heSBub3QgZXhpc3QuXG4gKi8gY2xhc3MgRG9jdW1lbnRSZWZlcmVuY2Uge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IoZSwgXG4gICAgLyoqXG4gICAgICogSWYgcHJvdmlkZWQsIHRoZSBgRmlyZXN0b3JlRGF0YUNvbnZlcnRlcmAgYXNzb2NpYXRlZCB3aXRoIHRoaXMgaW5zdGFuY2UuXG4gICAgICovXG4gICAgdCwgbikge1xuICAgICAgICB0aGlzLmNvbnZlcnRlciA9IHQsIHRoaXMuX2tleSA9IG4sIFxuICAgICAgICAvKiogVGhlIHR5cGUgb2YgdGhpcyBGaXJlc3RvcmUgcmVmZXJlbmNlLiAqL1xuICAgICAgICB0aGlzLnR5cGUgPSBcImRvY3VtZW50XCIsIHRoaXMuZmlyZXN0b3JlID0gZTtcbiAgICB9XG4gICAgZ2V0IF9wYXRoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fa2V5LnBhdGg7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBkb2N1bWVudCdzIGlkZW50aWZpZXIgd2l0aGluIGl0cyBjb2xsZWN0aW9uLlxuICAgICAqLyAgICBnZXQgaWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9rZXkucGF0aC5sYXN0U2VnbWVudCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIHBhdGggb2YgdGhlIHJlZmVyZW5jZWQgZG9jdW1lbnQgKHJlbGF0aXZlXG4gICAgICogdG8gdGhlIHJvb3Qgb2YgdGhlIGRhdGFiYXNlKS5cbiAgICAgKi8gICAgZ2V0IHBhdGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9rZXkucGF0aC5jYW5vbmljYWxTdHJpbmcoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGNvbGxlY3Rpb24gdGhpcyBgRG9jdW1lbnRSZWZlcmVuY2VgIGJlbG9uZ3MgdG8uXG4gICAgICovICAgIGdldCBwYXJlbnQoKSB7XG4gICAgICAgIHJldHVybiBuZXcgQ29sbGVjdGlvblJlZmVyZW5jZSh0aGlzLmZpcmVzdG9yZSwgdGhpcy5jb252ZXJ0ZXIsIHRoaXMuX2tleS5wYXRoLnBvcExhc3QoKSk7XG4gICAgfVxuICAgIHdpdGhDb252ZXJ0ZXIoZSkge1xuICAgICAgICByZXR1cm4gbmV3IERvY3VtZW50UmVmZXJlbmNlKHRoaXMuZmlyZXN0b3JlLCBlLCB0aGlzLl9rZXkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIGBDb2xsZWN0aW9uUmVmZXJlbmNlYCBvYmplY3QgY2FuIGJlIHVzZWQgZm9yIGFkZGluZyBkb2N1bWVudHMsIGdldHRpbmdcbiAqIGRvY3VtZW50IHJlZmVyZW5jZXMsIGFuZCBxdWVyeWluZyBmb3IgZG9jdW1lbnRzICh1c2luZyB7QGxpbmsgKHF1ZXJ5OjEpfSkuXG4gKi8gY2xhc3MgQ29sbGVjdGlvblJlZmVyZW5jZSBleHRlbmRzIFF1ZXJ5IHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4pIHtcbiAgICAgICAgc3VwZXIoZSwgdCwgX19QUklWQVRFX25ld1F1ZXJ5Rm9yUGF0aChuKSksIHRoaXMuX3BhdGggPSBuLCBcbiAgICAgICAgLyoqIFRoZSB0eXBlIG9mIHRoaXMgRmlyZXN0b3JlIHJlZmVyZW5jZS4gKi9cbiAgICAgICAgdGhpcy50eXBlID0gXCJjb2xsZWN0aW9uXCI7XG4gICAgfVxuICAgIC8qKiBUaGUgY29sbGVjdGlvbidzIGlkZW50aWZpZXIuICovICAgIGdldCBpZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3F1ZXJ5LnBhdGgubGFzdFNlZ21lbnQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBwYXRoIG9mIHRoZSByZWZlcmVuY2VkIGNvbGxlY3Rpb24gKHJlbGF0aXZlXG4gICAgICogdG8gdGhlIHJvb3Qgb2YgdGhlIGRhdGFiYXNlKS5cbiAgICAgKi8gICAgZ2V0IHBhdGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9xdWVyeS5wYXRoLmNhbm9uaWNhbFN0cmluZygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBIHJlZmVyZW5jZSB0byB0aGUgY29udGFpbmluZyBgRG9jdW1lbnRSZWZlcmVuY2VgIGlmIHRoaXMgaXMgYVxuICAgICAqIHN1YmNvbGxlY3Rpb24uIElmIHRoaXMgaXNuJ3QgYSBzdWJjb2xsZWN0aW9uLCB0aGUgcmVmZXJlbmNlIGlzIG51bGwuXG4gICAgICovICAgIGdldCBwYXJlbnQoKSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLl9wYXRoLnBvcExhc3QoKTtcbiAgICAgICAgcmV0dXJuIGUuaXNFbXB0eSgpID8gbnVsbCA6IG5ldyBEb2N1bWVudFJlZmVyZW5jZSh0aGlzLmZpcmVzdG9yZSwgXG4gICAgICAgIC8qIGNvbnZlcnRlcj0gKi8gbnVsbCwgbmV3IERvY3VtZW50S2V5KGUpKTtcbiAgICB9XG4gICAgd2l0aENvbnZlcnRlcihlKSB7XG4gICAgICAgIHJldHVybiBuZXcgQ29sbGVjdGlvblJlZmVyZW5jZSh0aGlzLmZpcmVzdG9yZSwgZSwgdGhpcy5fcGF0aCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBjb2xsZWN0aW9uKGUsIHQsIC4uLm4pIHtcbiAgICBpZiAoZSA9IGdldE1vZHVsYXJJbnN0YW5jZShlKSwgX19QUklWQVRFX3ZhbGlkYXRlTm9uRW1wdHlBcmd1bWVudChcImNvbGxlY3Rpb25cIiwgXCJwYXRoXCIsIHQpLCBlIGluc3RhbmNlb2YgRmlyZXN0b3JlJDEpIHtcbiAgICAgICAgY29uc3QgciA9IFJlc291cmNlUGF0aC5mcm9tU3RyaW5nKHQsIC4uLm4pO1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3ZhbGlkYXRlQ29sbGVjdGlvblBhdGgociksIG5ldyBDb2xsZWN0aW9uUmVmZXJlbmNlKGUsIC8qIGNvbnZlcnRlcj0gKi8gbnVsbCwgcik7XG4gICAgfVxuICAgIHtcbiAgICAgICAgaWYgKCEoZSBpbnN0YW5jZW9mIERvY3VtZW50UmVmZXJlbmNlIHx8IGUgaW5zdGFuY2VvZiBDb2xsZWN0aW9uUmVmZXJlbmNlKSkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgXCJFeHBlY3RlZCBmaXJzdCBhcmd1bWVudCB0byBjb2xsZWN0aW9uKCkgdG8gYmUgYSBDb2xsZWN0aW9uUmVmZXJlbmNlLCBhIERvY3VtZW50UmVmZXJlbmNlIG9yIEZpcmViYXNlRmlyZXN0b3JlXCIpO1xuICAgICAgICBjb25zdCByID0gZS5fcGF0aC5jaGlsZChSZXNvdXJjZVBhdGguZnJvbVN0cmluZyh0LCAuLi5uKSk7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfdmFsaWRhdGVDb2xsZWN0aW9uUGF0aChyKSwgbmV3IENvbGxlY3Rpb25SZWZlcmVuY2UoZS5maXJlc3RvcmUsIFxuICAgICAgICAvKiBjb252ZXJ0ZXI9ICovIG51bGwsIHIpO1xuICAgIH1cbn1cblxuLy8gVE9ETyhmaXJlc3RvcmVsaXRlKTogQ29uc2lkZXIgdXNpbmcgRXJyb3JGYWN0b3J5IC1cbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9maXJlYmFzZS9maXJlYmFzZS1qcy1zZGsvYmxvYi8wMTMxZTFmL3BhY2thZ2VzL3V0aWwvc3JjL2Vycm9ycy50cyNMMTA2XG4vKipcbiAqIENyZWF0ZXMgYW5kIHJldHVybnMgYSBuZXcgYFF1ZXJ5YCBpbnN0YW5jZSB0aGF0IGluY2x1ZGVzIGFsbCBkb2N1bWVudHMgaW4gdGhlXG4gKiBkYXRhYmFzZSB0aGF0IGFyZSBjb250YWluZWQgaW4gYSBjb2xsZWN0aW9uIG9yIHN1YmNvbGxlY3Rpb24gd2l0aCB0aGVcbiAqIGdpdmVuIGBjb2xsZWN0aW9uSWRgLlxuICpcbiAqIEBwYXJhbSBmaXJlc3RvcmUgLSBBIHJlZmVyZW5jZSB0byB0aGUgcm9vdCBgRmlyZXN0b3JlYCBpbnN0YW5jZS5cbiAqIEBwYXJhbSBjb2xsZWN0aW9uSWQgLSBJZGVudGlmaWVzIHRoZSBjb2xsZWN0aW9ucyB0byBxdWVyeSBvdmVyLiBFdmVyeVxuICogY29sbGVjdGlvbiBvciBzdWJjb2xsZWN0aW9uIHdpdGggdGhpcyBJRCBhcyB0aGUgbGFzdCBzZWdtZW50IG9mIGl0cyBwYXRoXG4gKiB3aWxsIGJlIGluY2x1ZGVkLiBDYW5ub3QgY29udGFpbiBhIHNsYXNoLlxuICogQHJldHVybnMgVGhlIGNyZWF0ZWQgYFF1ZXJ5YC5cbiAqLyBmdW5jdGlvbiBjb2xsZWN0aW9uR3JvdXAoZSwgdCkge1xuICAgIGlmIChlID0gX19QUklWQVRFX2Nhc3QoZSwgRmlyZXN0b3JlJDEpLCBfX1BSSVZBVEVfdmFsaWRhdGVOb25FbXB0eUFyZ3VtZW50KFwiY29sbGVjdGlvbkdyb3VwXCIsIFwiY29sbGVjdGlvbiBpZFwiLCB0KSwgXG4gICAgdC5pbmRleE9mKFwiL1wiKSA+PSAwKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBjb2xsZWN0aW9uIElEICcke3R9JyBwYXNzZWQgdG8gZnVuY3Rpb24gY29sbGVjdGlvbkdyb3VwKCkuIENvbGxlY3Rpb24gSURzIG11c3Qgbm90IGNvbnRhaW4gJy8nLmApO1xuICAgIHJldHVybiBuZXcgUXVlcnkoZSwgXG4gICAgLyogY29udmVydGVyPSAqLyBudWxsLCBmdW5jdGlvbiBfX1BSSVZBVEVfbmV3UXVlcnlGb3JDb2xsZWN0aW9uR3JvdXAoZSkge1xuICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9RdWVyeUltcGwoUmVzb3VyY2VQYXRoLmVtcHR5UGF0aCgpLCBlKTtcbiAgICB9KHQpKTtcbn1cblxuZnVuY3Rpb24gZG9jKGUsIHQsIC4uLm4pIHtcbiAgICBpZiAoZSA9IGdldE1vZHVsYXJJbnN0YW5jZShlKSwgXG4gICAgLy8gV2UgYWxsb3cgb21pc3Npb24gb2YgJ3BhdGhTdHJpbmcnIGJ1dCBleHBsaWNpdGx5IHByb2hpYml0IHBhc3NpbmcgaW4gYm90aFxuICAgIC8vICd1bmRlZmluZWQnIGFuZCAnbnVsbCcuXG4gICAgMSA9PT0gYXJndW1lbnRzLmxlbmd0aCAmJiAodCA9IF9fUFJJVkFURV9BdXRvSWQubmV3SWQoKSksIF9fUFJJVkFURV92YWxpZGF0ZU5vbkVtcHR5QXJndW1lbnQoXCJkb2NcIiwgXCJwYXRoXCIsIHQpLCBcbiAgICBlIGluc3RhbmNlb2YgRmlyZXN0b3JlJDEpIHtcbiAgICAgICAgY29uc3QgciA9IFJlc291cmNlUGF0aC5mcm9tU3RyaW5nKHQsIC4uLm4pO1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3ZhbGlkYXRlRG9jdW1lbnRQYXRoKHIpLCBuZXcgRG9jdW1lbnRSZWZlcmVuY2UoZSwgXG4gICAgICAgIC8qIGNvbnZlcnRlcj0gKi8gbnVsbCwgbmV3IERvY3VtZW50S2V5KHIpKTtcbiAgICB9XG4gICAge1xuICAgICAgICBpZiAoIShlIGluc3RhbmNlb2YgRG9jdW1lbnRSZWZlcmVuY2UgfHwgZSBpbnN0YW5jZW9mIENvbGxlY3Rpb25SZWZlcmVuY2UpKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5JTlZBTElEX0FSR1VNRU5ULCBcIkV4cGVjdGVkIGZpcnN0IGFyZ3VtZW50IHRvIGNvbGxlY3Rpb24oKSB0byBiZSBhIENvbGxlY3Rpb25SZWZlcmVuY2UsIGEgRG9jdW1lbnRSZWZlcmVuY2Ugb3IgRmlyZWJhc2VGaXJlc3RvcmVcIik7XG4gICAgICAgIGNvbnN0IHIgPSBlLl9wYXRoLmNoaWxkKFJlc291cmNlUGF0aC5mcm9tU3RyaW5nKHQsIC4uLm4pKTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV92YWxpZGF0ZURvY3VtZW50UGF0aChyKSwgbmV3IERvY3VtZW50UmVmZXJlbmNlKGUuZmlyZXN0b3JlLCBlIGluc3RhbmNlb2YgQ29sbGVjdGlvblJlZmVyZW5jZSA/IGUuY29udmVydGVyIDogbnVsbCwgbmV3IERvY3VtZW50S2V5KHIpKTtcbiAgICB9XG59XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIHRoZSBwcm92aWRlZCByZWZlcmVuY2VzIGFyZSBlcXVhbC5cbiAqXG4gKiBAcGFyYW0gbGVmdCAtIEEgcmVmZXJlbmNlIHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0gcmlnaHQgLSBBIHJlZmVyZW5jZSB0byBjb21wYXJlLlxuICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgcmVmZXJlbmNlcyBwb2ludCB0byB0aGUgc2FtZSBsb2NhdGlvbiBpbiB0aGUgc2FtZVxuICogRmlyZXN0b3JlIGRhdGFiYXNlLlxuICovIGZ1bmN0aW9uIHJlZkVxdWFsKGUsIHQpIHtcbiAgICByZXR1cm4gZSA9IGdldE1vZHVsYXJJbnN0YW5jZShlKSwgdCA9IGdldE1vZHVsYXJJbnN0YW5jZSh0KSwgKGUgaW5zdGFuY2VvZiBEb2N1bWVudFJlZmVyZW5jZSB8fCBlIGluc3RhbmNlb2YgQ29sbGVjdGlvblJlZmVyZW5jZSkgJiYgKHQgaW5zdGFuY2VvZiBEb2N1bWVudFJlZmVyZW5jZSB8fCB0IGluc3RhbmNlb2YgQ29sbGVjdGlvblJlZmVyZW5jZSkgJiYgKGUuZmlyZXN0b3JlID09PSB0LmZpcmVzdG9yZSAmJiBlLnBhdGggPT09IHQucGF0aCAmJiBlLmNvbnZlcnRlciA9PT0gdC5jb252ZXJ0ZXIpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgcHJvdmlkZWQgcXVlcmllcyBwb2ludCB0byB0aGUgc2FtZSBjb2xsZWN0aW9uIGFuZCBhcHBseVxuICogdGhlIHNhbWUgY29uc3RyYWludHMuXG4gKlxuICogQHBhcmFtIGxlZnQgLSBBIGBRdWVyeWAgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSByaWdodCAtIEEgYFF1ZXJ5YCB0byBjb21wYXJlLlxuICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgcmVmZXJlbmNlcyBwb2ludCB0byB0aGUgc2FtZSBsb2NhdGlvbiBpbiB0aGUgc2FtZVxuICogRmlyZXN0b3JlIGRhdGFiYXNlLlxuICovIGZ1bmN0aW9uIHF1ZXJ5RXF1YWwoZSwgdCkge1xuICAgIHJldHVybiBlID0gZ2V0TW9kdWxhckluc3RhbmNlKGUpLCB0ID0gZ2V0TW9kdWxhckluc3RhbmNlKHQpLCBlIGluc3RhbmNlb2YgUXVlcnkgJiYgdCBpbnN0YW5jZW9mIFF1ZXJ5ICYmIChlLmZpcmVzdG9yZSA9PT0gdC5maXJlc3RvcmUgJiYgX19QUklWQVRFX3F1ZXJ5RXF1YWxzKGUuX3F1ZXJ5LCB0Ll9xdWVyeSkgJiYgZS5jb252ZXJ0ZXIgPT09IHQuY29udmVydGVyKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgX19QUklWQVRFX0FzeW5jUXVldWVJbXBsIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgLy8gVGhlIGxhc3QgcHJvbWlzZSBpbiB0aGUgcXVldWUuXG4gICAgICAgIHRoaXMuSmEgPSBQcm9taXNlLnJlc29sdmUoKSwgXG4gICAgICAgIC8vIEEgbGlzdCBvZiByZXRyeWFibGUgb3BlcmF0aW9ucy4gUmV0cnlhYmxlIG9wZXJhdGlvbnMgYXJlIHJ1biBpbiBvcmRlciBhbmRcbiAgICAgICAgLy8gcmV0cmllZCB3aXRoIGJhY2tvZmYuXG4gICAgICAgIHRoaXMuWWEgPSBbXSwgXG4gICAgICAgIC8vIElzIHRoaXMgQXN5bmNRdWV1ZSBiZWluZyBzaHV0IGRvd24/IE9uY2UgaXQgaXMgc2V0IHRvIHRydWUsIGl0IHdpbGwgbm90XG4gICAgICAgIC8vIGJlIGNoYW5nZWQgYWdhaW4uXG4gICAgICAgIHRoaXMuWmEgPSAhMSwgXG4gICAgICAgIC8vIE9wZXJhdGlvbnMgc2NoZWR1bGVkIHRvIGJlIHF1ZXVlZCBpbiB0aGUgZnV0dXJlLiBPcGVyYXRpb25zIGFyZVxuICAgICAgICAvLyBhdXRvbWF0aWNhbGx5IHJlbW92ZWQgYWZ0ZXIgdGhleSBhcmUgcnVuIG9yIGNhbmNlbGVkLlxuICAgICAgICB0aGlzLlhhID0gW10sIFxuICAgICAgICAvLyB2aXNpYmxlIGZvciB0ZXN0aW5nXG4gICAgICAgIHRoaXMuZXUgPSBudWxsLCBcbiAgICAgICAgLy8gRmxhZyBzZXQgd2hpbGUgdGhlcmUncyBhbiBvdXRzdGFuZGluZyBBc3luY1F1ZXVlIG9wZXJhdGlvbiwgdXNlZCBmb3JcbiAgICAgICAgLy8gYXNzZXJ0aW9uIHNhbml0eS1jaGVja3MuXG4gICAgICAgIHRoaXMudHUgPSAhMSwgXG4gICAgICAgIC8vIEVuYWJsZWQgZHVyaW5nIHNodXRkb3duIG9uIFNhZmFyaSB0byBwcmV2ZW50IGZ1dHVyZSBhY2Nlc3MgdG8gSW5kZXhlZERCLlxuICAgICAgICB0aGlzLm51ID0gITEsIFxuICAgICAgICAvLyBMaXN0IG9mIFRpbWVySWRzIHRvIGZhc3QtZm9yd2FyZCBkZWxheXMgZm9yLlxuICAgICAgICB0aGlzLnJ1ID0gW10sIFxuICAgICAgICAvLyBCYWNrb2ZmIHRpbWVyIHVzZWQgdG8gc2NoZWR1bGUgcmV0cmllcyBmb3IgcmV0cnlhYmxlIG9wZXJhdGlvbnNcbiAgICAgICAgdGhpcy56byA9IG5ldyBfX1BSSVZBVEVfRXhwb25lbnRpYWxCYWNrb2ZmKHRoaXMsIFwiYXN5bmNfcXVldWVfcmV0cnlcIiAvKiBUaW1lcklkLkFzeW5jUXVldWVSZXRyeSAqLyksIFxuICAgICAgICAvLyBWaXNpYmlsaXR5IGhhbmRsZXIgdGhhdCB0cmlnZ2VycyBhbiBpbW1lZGlhdGUgcmV0cnkgb2YgYWxsIHJldHJ5YWJsZVxuICAgICAgICAvLyBvcGVyYXRpb25zLiBNZWFudCB0byBzcGVlZCB1cCByZWNvdmVyeSB3aGVuIHdlIHJlZ2FpbiBmaWxlIHN5c3RlbSBhY2Nlc3NcbiAgICAgICAgLy8gYWZ0ZXIgcGFnZSBjb21lcyBpbnRvIGZvcmVncm91bmQuXG4gICAgICAgIHRoaXMuaXUgPSAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBlID0gZ2V0RG9jdW1lbnQoKTtcbiAgICAgICAgICAgIGUgJiYgX19QUklWQVRFX2xvZ0RlYnVnKFwiQXN5bmNRdWV1ZVwiLCBcIlZpc2liaWxpdHkgc3RhdGUgY2hhbmdlZCB0byBcIiArIGUudmlzaWJpbGl0eVN0YXRlKSwgXG4gICAgICAgICAgICB0aGlzLnpvLlFvKCk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGUgPSBnZXREb2N1bWVudCgpO1xuICAgICAgICBlICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgZS5hZGRFdmVudExpc3RlbmVyICYmIGUuYWRkRXZlbnRMaXN0ZW5lcihcInZpc2liaWxpdHljaGFuZ2VcIiwgdGhpcy5pdSk7XG4gICAgfVxuICAgIGdldCBpc1NodXR0aW5nRG93bigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuWmE7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgYSBuZXcgb3BlcmF0aW9uIHRvIHRoZSBxdWV1ZSB3aXRob3V0IHdhaXRpbmcgZm9yIGl0IHRvIGNvbXBsZXRlIChpLmUuXG4gICAgICogd2UgaWdub3JlIHRoZSBQcm9taXNlIHJlc3VsdCkuXG4gICAgICovICAgIGVucXVldWVBbmRGb3JnZXQoZSkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXG4gICAgICAgIHRoaXMuZW5xdWV1ZShlKTtcbiAgICB9XG4gICAgZW5xdWV1ZUFuZEZvcmdldEV2ZW5XaGlsZVJlc3RyaWN0ZWQoZSkge1xuICAgICAgICB0aGlzLnN1KCksIFxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXG4gICAgICAgIHRoaXMub3UoZSk7XG4gICAgfVxuICAgIGVudGVyUmVzdHJpY3RlZE1vZGUoZSkge1xuICAgICAgICBpZiAoIXRoaXMuWmEpIHtcbiAgICAgICAgICAgIHRoaXMuWmEgPSAhMCwgdGhpcy5udSA9IGUgfHwgITE7XG4gICAgICAgICAgICBjb25zdCB0ID0gZ2V0RG9jdW1lbnQoKTtcbiAgICAgICAgICAgIHQgJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiB0LnJlbW92ZUV2ZW50TGlzdGVuZXIgJiYgdC5yZW1vdmVFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLCB0aGlzLml1KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbnF1ZXVlKGUpIHtcbiAgICAgICAgaWYgKHRoaXMuc3UoKSwgdGhpcy5aYSkgXG4gICAgICAgIC8vIFJldHVybiBhIFByb21pc2Ugd2hpY2ggbmV2ZXIgcmVzb2x2ZXMuXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgoKCkgPT4ge30pKTtcbiAgICAgICAgLy8gQ3JlYXRlIGEgZGVmZXJyZWQgUHJvbWlzZSB0aGF0IHdlIGNhbiByZXR1cm4gdG8gdGhlIGNhbGxlZS4gVGhpc1xuICAgICAgICAvLyBhbGxvd3MgdXMgdG8gcmV0dXJuIGEgXCJoYW5naW5nIFByb21pc2VcIiBvbmx5IHRvIHRoZSBjYWxsZWUgYW5kIHN0aWxsXG4gICAgICAgIC8vIGFkdmFuY2UgdGhlIHF1ZXVlIGV2ZW4gd2hlbiB0aGUgb3BlcmF0aW9uIGlzIG5vdCBydW4uXG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IG5ldyBfX1BSSVZBVEVfRGVmZXJyZWQ7XG4gICAgICAgIHJldHVybiB0aGlzLm91KCgoKSA9PiB0aGlzLlphICYmIHRoaXMubnUgPyBQcm9taXNlLnJlc29sdmUoKSA6IChlKCkudGhlbih0LnJlc29sdmUsIHQucmVqZWN0KSwgXG4gICAgICAgIHQucHJvbWlzZSkpKS50aGVuKCgoKSA9PiB0LnByb21pc2UpKTtcbiAgICB9XG4gICAgZW5xdWV1ZVJldHJ5YWJsZShlKSB7XG4gICAgICAgIHRoaXMuZW5xdWV1ZUFuZEZvcmdldCgoKCkgPT4gKHRoaXMuWWEucHVzaChlKSwgdGhpcy5fdSgpKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSdW5zIHRoZSBuZXh0IG9wZXJhdGlvbiBmcm9tIHRoZSByZXRyeWFibGUgcXVldWUuIElmIHRoZSBvcGVyYXRpb24gZmFpbHMsXG4gICAgICogcmVzY2hlZHVsZXMgd2l0aCBiYWNrb2ZmLlxuICAgICAqLyAgICBhc3luYyBfdSgpIHtcbiAgICAgICAgaWYgKDAgIT09IHRoaXMuWWEubGVuZ3RoKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuWWFbMF0oKSwgdGhpcy5ZYS5zaGlmdCgpLCB0aGlzLnpvLnJlc2V0KCk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFfX1BSSVZBVEVfaXNJbmRleGVkRGJUcmFuc2FjdGlvbkVycm9yKGUpKSB0aHJvdyBlO1xuIC8vIEZhaWx1cmUgd2lsbCBiZSBoYW5kbGVkIGJ5IEFzeW5jUXVldWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX19QUklWQVRFX2xvZ0RlYnVnKFwiQXN5bmNRdWV1ZVwiLCBcIk9wZXJhdGlvbiBmYWlsZWQgd2l0aCByZXRyeWFibGUgZXJyb3I6IFwiICsgZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLllhLmxlbmd0aCA+IDAgJiYgXG4gICAgICAgICAgICAvLyBJZiB0aGVyZSBhcmUgYWRkaXRpb25hbCBvcGVyYXRpb25zLCB3ZSByZS1zY2hlZHVsZSBgcmV0cnlOZXh0T3AoKWAuXG4gICAgICAgICAgICAvLyBUaGlzIGlzIG5lY2Vzc2FyeSB0byBydW4gcmV0cnlhYmxlIG9wZXJhdGlvbnMgdGhhdCBmYWlsZWQgZHVyaW5nXG4gICAgICAgICAgICAvLyB0aGVpciBpbml0aWFsIGF0dGVtcHQgc2luY2Ugd2UgZG9uJ3Qga25vdyB3aGV0aGVyIHRoZXkgYXJlIGFscmVhZHlcbiAgICAgICAgICAgIC8vIGVucXVldWVkLiBJZiwgZm9yIGV4YW1wbGUsIGBvcDFgLCBgb3AyYCwgYG9wM2AgYXJlIGVucXVldWVkIGFuZCBgb3AxYFxuICAgICAgICAgICAgLy8gbmVlZHMgdG8gIGJlIHJlLXJ1biwgd2Ugd2lsbCBydW4gYG9wMWAsIGBvcDFgLCBgb3AyYCB1c2luZyB0aGVcbiAgICAgICAgICAgIC8vIGFscmVhZHkgZW5xdWV1ZWQgY2FsbHMgdG8gYHJldHJ5TmV4dE9wKClgLiBgb3AzKClgIHdpbGwgdGhlbiBydW4gaW4gdGhlXG4gICAgICAgICAgICAvLyBjYWxsIHNjaGVkdWxlZCBoZXJlLlxuICAgICAgICAgICAgLy8gU2luY2UgYGJhY2tvZmZBbmRSdW4oKWAgY2FuY2VscyBhbiBleGlzdGluZyBiYWNrb2ZmIGFuZCBzY2hlZHVsZXMgYVxuICAgICAgICAgICAgLy8gbmV3IGJhY2tvZmYgb24gZXZlcnkgY2FsbCwgdGhlcmUgaXMgb25seSBldmVyIGEgc2luZ2xlIGFkZGl0aW9uYWxcbiAgICAgICAgICAgIC8vIG9wZXJhdGlvbiBpbiB0aGUgcXVldWUuXG4gICAgICAgICAgICB0aGlzLnpvLmtvKCgoKSA9PiB0aGlzLl91KCkpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBvdShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLkphLnRoZW4oKCgpID0+ICh0aGlzLnR1ID0gITAsIGUoKS5jYXRjaCgoZSA9PiB7XG4gICAgICAgICAgICB0aGlzLmV1ID0gZSwgdGhpcy50dSA9ICExO1xuICAgICAgICAgICAgY29uc3QgdCA9IFxuICAgICAgICAgICAgLyoqXG4gKiBDaHJvbWUgaW5jbHVkZXMgRXJyb3IubWVzc2FnZSBpbiBFcnJvci5zdGFjay4gT3RoZXIgYnJvd3NlcnMgZG8gbm90LlxuICogVGhpcyByZXR1cm5zIGV4cGVjdGVkIG91dHB1dCBvZiBtZXNzYWdlICsgc3RhY2sgd2hlbiBhdmFpbGFibGUuXG4gKiBAcGFyYW0gZXJyb3IgLSBFcnJvciBvciBGaXJlc3RvcmVFcnJvclxuICovXG4gICAgICAgICAgICBmdW5jdGlvbiBfX1BSSVZBVEVfZ2V0TWVzc2FnZU9yU3RhY2soZSkge1xuICAgICAgICAgICAgICAgIGxldCB0ID0gZS5tZXNzYWdlIHx8IFwiXCI7XG4gICAgICAgICAgICAgICAgZS5zdGFjayAmJiAodCA9IGUuc3RhY2suaW5jbHVkZXMoZS5tZXNzYWdlKSA/IGUuc3RhY2sgOiBlLm1lc3NhZ2UgKyBcIlxcblwiICsgZS5zdGFjayk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyAoZSk7XG4gICAgICAgICAgICAvLyBSZS10aHJvdyB0aGUgZXJyb3Igc28gdGhhdCB0aGlzLnRhaWwgYmVjb21lcyBhIHJlamVjdGVkIFByb21pc2UgYW5kXG4gICAgICAgICAgICAvLyBhbGwgZnVydGhlciBhdHRlbXB0cyB0byBjaGFpbiAodmlhIC50aGVuKSB3aWxsIGp1c3Qgc2hvcnQtY2lyY3VpdFxuICAgICAgICAgICAgLy8gYW5kIHJldHVybiB0aGUgcmVqZWN0ZWQgUHJvbWlzZS5cbiAgICAgICAgICAgIHRocm93IF9fUFJJVkFURV9sb2dFcnJvcihcIklOVEVSTkFMIFVOSEFORExFRCBFUlJPUjogXCIsIHQpLCBlO1xuICAgICAgICB9KSkudGhlbigoZSA9PiAodGhpcy50dSA9ICExLCBlKSkpKSkpO1xuICAgICAgICByZXR1cm4gdGhpcy5KYSA9IHQsIHQ7XG4gICAgfVxuICAgIGVucXVldWVBZnRlckRlbGF5KGUsIHQsIG4pIHtcbiAgICAgICAgdGhpcy5zdSgpLCBcbiAgICAgICAgLy8gRmFzdC1mb3J3YXJkIGRlbGF5cyBmb3IgdGltZXJJZHMgdGhhdCBoYXZlIGJlZW4gb3ZlcnJpZGVuLlxuICAgICAgICB0aGlzLnJ1LmluZGV4T2YoZSkgPiAtMSAmJiAodCA9IDApO1xuICAgICAgICBjb25zdCByID0gRGVsYXllZE9wZXJhdGlvbi5jcmVhdGVBbmRTY2hlZHVsZSh0aGlzLCBlLCB0LCBuLCAoZSA9PiB0aGlzLmF1KGUpKSk7XG4gICAgICAgIHJldHVybiB0aGlzLlhhLnB1c2gociksIHI7XG4gICAgfVxuICAgIHN1KCkge1xuICAgICAgICB0aGlzLmV1ICYmIGZhaWwoKTtcbiAgICB9XG4gICAgdmVyaWZ5T3BlcmF0aW9uSW5Qcm9ncmVzcygpIHt9XG4gICAgLyoqXG4gICAgICogV2FpdHMgdW50aWwgYWxsIGN1cnJlbnRseSBxdWV1ZWQgdGFza3MgYXJlIGZpbmlzaGVkIGV4ZWN1dGluZy4gRGVsYXllZFxuICAgICAqIG9wZXJhdGlvbnMgYXJlIG5vdCBydW4uXG4gICAgICovICAgIGFzeW5jIHV1KCkge1xuICAgICAgICAvLyBPcGVyYXRpb25zIGluIHRoZSBxdWV1ZSBwcmlvciB0byBkcmFpbmluZyBtYXkgaGF2ZSBlbnF1ZXVlZCBhZGRpdGlvbmFsXG4gICAgICAgIC8vIG9wZXJhdGlvbnMuIEtlZXAgZHJhaW5pbmcgdGhlIHF1ZXVlIHVudGlsIHRoZSB0YWlsIGlzIG5vIGxvbmdlciBhZHZhbmNlZCxcbiAgICAgICAgLy8gd2hpY2ggaW5kaWNhdGVzIHRoYXQgbm8gbW9yZSBuZXcgb3BlcmF0aW9ucyB3ZXJlIGVucXVldWVkIGFuZCB0aGF0IGFsbFxuICAgICAgICAvLyBvcGVyYXRpb25zIHdlcmUgZXhlY3V0ZWQuXG4gICAgICAgIGxldCBlO1xuICAgICAgICBkbyB7XG4gICAgICAgICAgICBlID0gdGhpcy5KYSwgYXdhaXQgZTtcbiAgICAgICAgfSB3aGlsZSAoZSAhPT0gdGhpcy5KYSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZvciBUZXN0czogRGV0ZXJtaW5lIGlmIGEgZGVsYXllZCBvcGVyYXRpb24gd2l0aCBhIHBhcnRpY3VsYXIgVGltZXJJZFxuICAgICAqIGV4aXN0cy5cbiAgICAgKi8gICAgY3UoZSkge1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgdGhpcy5YYSkgaWYgKHQudGltZXJJZCA9PT0gZSkgcmV0dXJuICEwO1xuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZvciBUZXN0czogUnVucyBzb21lIG9yIGFsbCBkZWxheWVkIG9wZXJhdGlvbnMgZWFybHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbGFzdFRpbWVySWQgLSBEZWxheWVkIG9wZXJhdGlvbnMgdXAgdG8gYW5kIGluY2x1ZGluZyB0aGlzIFRpbWVySWRcbiAgICAgKiB3aWxsIGJlIGRyYWluZWQuIFBhc3MgVGltZXJJZC5BbGwgdG8gcnVuIGFsbCBkZWxheWVkIG9wZXJhdGlvbnMuXG4gICAgICogQHJldHVybnMgYSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgb25jZSBhbGwgb3BlcmF0aW9ucyBoYXZlIGJlZW4gcnVuLlxuICAgICAqLyAgICBsdShlKSB7XG4gICAgICAgIC8vIE5vdGUgdGhhdCBkcmFpbmluZyBtYXkgZ2VuZXJhdGUgbW9yZSBkZWxheWVkIG9wcywgc28gd2UgZG8gdGhhdCBmaXJzdC5cbiAgICAgICAgcmV0dXJuIHRoaXMudXUoKS50aGVuKCgoKSA9PiB7XG4gICAgICAgICAgICAvLyBSdW4gb3BzIGluIHRoZSBzYW1lIG9yZGVyIHRoZXknZCBydW4gaWYgdGhleSByYW4gbmF0dXJhbGx5LlxuICAgICAgICAgICAgdGhpcy5YYS5zb3J0KCgoZSwgdCkgPT4gZS50YXJnZXRUaW1lTXMgLSB0LnRhcmdldFRpbWVNcykpO1xuICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIHRoaXMuWGEpIGlmICh0LnNraXBEZWxheSgpLCBcImFsbFwiIC8qIFRpbWVySWQuQWxsICovICE9PSBlICYmIHQudGltZXJJZCA9PT0gZSkgYnJlYWs7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy51dSgpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZvciBUZXN0czogU2tpcCBhbGwgc3Vic2VxdWVudCBkZWxheXMgZm9yIGEgdGltZXIgaWQuXG4gICAgICovICAgIGh1KGUpIHtcbiAgICAgICAgdGhpcy5ydS5wdXNoKGUpO1xuICAgIH1cbiAgICAvKiogQ2FsbGVkIG9uY2UgYSBEZWxheWVkT3BlcmF0aW9uIGlzIHJ1biBvciBjYW5jZWxlZC4gKi8gICAgYXUoZSkge1xuICAgICAgICAvLyBOT1RFOiBpbmRleE9mIC8gc2xpY2UgYXJlIE8obiksIGJ1dCBkZWxheWVkT3BlcmF0aW9ucyBpcyBleHBlY3RlZCB0byBiZSBzbWFsbC5cbiAgICAgICAgY29uc3QgdCA9IHRoaXMuWGEuaW5kZXhPZihlKTtcbiAgICAgICAgdGhpcy5YYS5zcGxpY2UodCwgMSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfaXNQYXJ0aWFsT2JzZXJ2ZXIoZSkge1xuICAgIC8qKlxuICogUmV0dXJucyB0cnVlIGlmIG9iaiBpcyBhbiBvYmplY3QgYW5kIGNvbnRhaW5zIGF0IGxlYXN0IG9uZSBvZiB0aGUgc3BlY2lmaWVkXG4gKiBtZXRob2RzLlxuICovXG4gICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9pbXBsZW1lbnRzQW55TWV0aG9kcyhlLCB0KSB7XG4gICAgICAgIGlmIChcIm9iamVjdFwiICE9IHR5cGVvZiBlIHx8IG51bGwgPT09IGUpIHJldHVybiAhMTtcbiAgICAgICAgY29uc3QgbiA9IGU7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiB0KSBpZiAoZSBpbiBuICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgbltlXSkgcmV0dXJuICEwO1xuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxuICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4gICAgLyoqXG4gKiBSZXByZXNlbnRzIHRoZSB0YXNrIG9mIGxvYWRpbmcgYSBGaXJlc3RvcmUgYnVuZGxlLiBJdCBwcm92aWRlcyBwcm9ncmVzcyBvZiBidW5kbGVcbiAqIGxvYWRpbmcsIGFzIHdlbGwgYXMgdGFzayBjb21wbGV0aW9uIGFuZCBlcnJvciBldmVudHMuXG4gKlxuICogVGhlIEFQSSBpcyBjb21wYXRpYmxlIHdpdGggYFByb21pc2U8TG9hZEJ1bmRsZVRhc2tQcm9ncmVzcz5gLlxuICovIChlLCBbIFwibmV4dFwiLCBcImVycm9yXCIsIFwiY29tcGxldGVcIiBdKTtcbn1cblxuY2xhc3MgTG9hZEJ1bmRsZVRhc2sge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLl9wcm9ncmVzc09ic2VydmVyID0ge30sIHRoaXMuX3Rhc2tDb21wbGV0aW9uUmVzb2x2ZXIgPSBuZXcgX19QUklWQVRFX0RlZmVycmVkLCBcbiAgICAgICAgdGhpcy5fbGFzdFByb2dyZXNzID0ge1xuICAgICAgICAgICAgdGFza1N0YXRlOiBcIlJ1bm5pbmdcIixcbiAgICAgICAgICAgIHRvdGFsQnl0ZXM6IDAsXG4gICAgICAgICAgICB0b3RhbERvY3VtZW50czogMCxcbiAgICAgICAgICAgIGJ5dGVzTG9hZGVkOiAwLFxuICAgICAgICAgICAgZG9jdW1lbnRzTG9hZGVkOiAwXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVycyBmdW5jdGlvbnMgdG8gbGlzdGVuIHRvIGJ1bmRsZSBsb2FkaW5nIHByb2dyZXNzIGV2ZW50cy5cbiAgICAgKiBAcGFyYW0gbmV4dCAtIENhbGxlZCB3aGVuIHRoZXJlIGlzIGEgcHJvZ3Jlc3MgdXBkYXRlIGZyb20gYnVuZGxlIGxvYWRpbmcuIFR5cGljYWxseSBgbmV4dGAgY2FsbHMgb2NjdXJcbiAgICAgKiAgIGVhY2ggdGltZSBhIEZpcmVzdG9yZSBkb2N1bWVudCBpcyBsb2FkZWQgZnJvbSB0aGUgYnVuZGxlLlxuICAgICAqIEBwYXJhbSBlcnJvciAtIENhbGxlZCB3aGVuIGFuIGVycm9yIG9jY3VycyBkdXJpbmcgYnVuZGxlIGxvYWRpbmcuIFRoZSB0YXNrIGFib3J0cyBhZnRlciByZXBvcnRpbmcgdGhlXG4gICAgICogICBlcnJvciwgYW5kIHRoZXJlIHNob3VsZCBiZSBubyBtb3JlIHVwZGF0ZXMgYWZ0ZXIgdGhpcy5cbiAgICAgKiBAcGFyYW0gY29tcGxldGUgLSBDYWxsZWQgd2hlbiB0aGUgbG9hZGluZyB0YXNrIGlzIGNvbXBsZXRlLlxuICAgICAqLyAgICBvblByb2dyZXNzKGUsIHQsIG4pIHtcbiAgICAgICAgdGhpcy5fcHJvZ3Jlc3NPYnNlcnZlciA9IHtcbiAgICAgICAgICAgIG5leHQ6IGUsXG4gICAgICAgICAgICBlcnJvcjogdCxcbiAgICAgICAgICAgIGNvbXBsZXRlOiBuXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEltcGxlbWVudHMgdGhlIGBQcm9taXNlPExvYWRCdW5kbGVUYXNrUHJvZ3Jlc3M+LmNhdGNoYCBpbnRlcmZhY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb25SZWplY3RlZCAtIENhbGxlZCB3aGVuIGFuIGVycm9yIG9jY3VycyBkdXJpbmcgYnVuZGxlIGxvYWRpbmcuXG4gICAgICovICAgIGNhdGNoKGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Rhc2tDb21wbGV0aW9uUmVzb2x2ZXIucHJvbWlzZS5jYXRjaChlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW1wbGVtZW50cyB0aGUgYFByb21pc2U8TG9hZEJ1bmRsZVRhc2tQcm9ncmVzcz4udGhlbmAgaW50ZXJmYWNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9uRnVsZmlsbGVkIC0gQ2FsbGVkIG9uIHRoZSBjb21wbGV0aW9uIG9mIHRoZSBsb2FkaW5nIHRhc2sgd2l0aCBhIGZpbmFsIGBMb2FkQnVuZGxlVGFza1Byb2dyZXNzYCB1cGRhdGUuXG4gICAgICogICBUaGUgdXBkYXRlIHdpbGwgYWx3YXlzIGhhdmUgaXRzIGB0YXNrU3RhdGVgIHNldCB0byBgXCJTdWNjZXNzXCJgLlxuICAgICAqIEBwYXJhbSBvblJlamVjdGVkIC0gQ2FsbGVkIHdoZW4gYW4gZXJyb3Igb2NjdXJzIGR1cmluZyBidW5kbGUgbG9hZGluZy5cbiAgICAgKi8gICAgdGhlbihlLCB0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl90YXNrQ29tcGxldGlvblJlc29sdmVyLnByb21pc2UudGhlbihlLCB0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTm90aWZpZXMgYWxsIG9ic2VydmVycyB0aGF0IGJ1bmRsZSBsb2FkaW5nIGhhcyBjb21wbGV0ZWQsIHdpdGggYSBwcm92aWRlZFxuICAgICAqIGBMb2FkQnVuZGxlVGFza1Byb2dyZXNzYCBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqLyAgICBfY29tcGxldGVXaXRoKGUpIHtcbiAgICAgICAgdGhpcy5fdXBkYXRlUHJvZ3Jlc3MoZSksIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIuY29tcGxldGUgJiYgdGhpcy5fcHJvZ3Jlc3NPYnNlcnZlci5jb21wbGV0ZSgpLCBcbiAgICAgICAgdGhpcy5fdGFza0NvbXBsZXRpb25SZXNvbHZlci5yZXNvbHZlKGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBOb3RpZmllcyBhbGwgb2JzZXJ2ZXJzIHRoYXQgYnVuZGxlIGxvYWRpbmcgaGFzIGZhaWxlZCwgd2l0aCBhIHByb3ZpZGVkXG4gICAgICogYEVycm9yYCBhcyB0aGUgcmVhc29uLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi8gICAgX2ZhaWxXaXRoKGUpIHtcbiAgICAgICAgdGhpcy5fbGFzdFByb2dyZXNzLnRhc2tTdGF0ZSA9IFwiRXJyb3JcIiwgdGhpcy5fcHJvZ3Jlc3NPYnNlcnZlci5uZXh0ICYmIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIubmV4dCh0aGlzLl9sYXN0UHJvZ3Jlc3MpLCBcbiAgICAgICAgdGhpcy5fcHJvZ3Jlc3NPYnNlcnZlci5lcnJvciAmJiB0aGlzLl9wcm9ncmVzc09ic2VydmVyLmVycm9yKGUpLCB0aGlzLl90YXNrQ29tcGxldGlvblJlc29sdmVyLnJlamVjdChlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTm90aWZpZXMgYSBwcm9ncmVzcyB1cGRhdGUgb2YgbG9hZGluZyBhIGJ1bmRsZS5cbiAgICAgKiBAcGFyYW0gcHJvZ3Jlc3MgLSBUaGUgbmV3IHByb2dyZXNzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi8gICAgX3VwZGF0ZVByb2dyZXNzKGUpIHtcbiAgICAgICAgdGhpcy5fbGFzdFByb2dyZXNzID0gZSwgdGhpcy5fcHJvZ3Jlc3NPYnNlcnZlci5uZXh0ICYmIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIubmV4dChlKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIENvbnN0YW50IHVzZWQgdG8gaW5kaWNhdGUgdGhlIExSVSBnYXJiYWdlIGNvbGxlY3Rpb24gc2hvdWxkIGJlIGRpc2FibGVkLlxuICogU2V0IHRoaXMgdmFsdWUgYXMgdGhlIGBjYWNoZVNpemVCeXRlc2Agb24gdGhlIHNldHRpbmdzIHBhc3NlZCB0byB0aGVcbiAqIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlLlxuICovIGNvbnN0IGZlID0gLTE7XG5cbi8qKlxuICogVGhlIENsb3VkIEZpcmVzdG9yZSBzZXJ2aWNlIGludGVyZmFjZS5cbiAqXG4gKiBEbyBub3QgY2FsbCB0aGlzIGNvbnN0cnVjdG9yIGRpcmVjdGx5LiBJbnN0ZWFkLCB1c2Uge0BsaW5rIChnZXRGaXJlc3RvcmU6MSl9LlxuICovIGNsYXNzIEZpcmVzdG9yZSBleHRlbmRzIEZpcmVzdG9yZSQxIHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4sIHIpIHtcbiAgICAgICAgc3VwZXIoZSwgdCwgbiwgciksIFxuICAgICAgICAvKipcbiAgICAgICAgICogV2hldGhlciBpdCdzIGEge0BsaW5rIEZpcmVzdG9yZX0gb3IgRmlyZXN0b3JlIExpdGUgaW5zdGFuY2UuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnR5cGUgPSBcImZpcmVzdG9yZVwiLCB0aGlzLl9xdWV1ZSA9IGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdBc3luY1F1ZXVlKCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfQXN5bmNRdWV1ZUltcGw7XG4gICAgICAgIH0oKSwgdGhpcy5fcGVyc2lzdGVuY2VLZXkgPSAobnVsbCA9PSByID8gdm9pZCAwIDogci5uYW1lKSB8fCBcIltERUZBVUxUXVwiO1xuICAgIH1cbiAgICBfdGVybWluYXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZmlyZXN0b3JlQ2xpZW50IHx8IFxuICAgICAgICAvLyBUaGUgY2xpZW50IG11c3QgYmUgaW5pdGlhbGl6ZWQgdG8gZW5zdXJlIHRoYXQgYWxsIHN1YnNlcXVlbnQgQVBJXG4gICAgICAgIC8vIHVzYWdlIHRocm93cyBhbiBleGNlcHRpb24uXG4gICAgICAgIF9fUFJJVkFURV9jb25maWd1cmVGaXJlc3RvcmUodGhpcyksIHRoaXMuX2ZpcmVzdG9yZUNsaWVudC50ZXJtaW5hdGUoKTtcbiAgICB9XG59XG5cbi8qKlxuICogSW5pdGlhbGl6ZXMgYSBuZXcgaW5zdGFuY2Ugb2Yge0BsaW5rIEZpcmVzdG9yZX0gd2l0aCB0aGUgcHJvdmlkZWQgc2V0dGluZ3MuXG4gKiBDYW4gb25seSBiZSBjYWxsZWQgYmVmb3JlIGFueSBvdGhlciBmdW5jdGlvbiwgaW5jbHVkaW5nXG4gKiB7QGxpbmsgKGdldEZpcmVzdG9yZToxKX0uIElmIHRoZSBjdXN0b20gc2V0dGluZ3MgYXJlIGVtcHR5LCB0aGlzIGZ1bmN0aW9uIGlzXG4gKiBlcXVpdmFsZW50IHRvIGNhbGxpbmcge0BsaW5rIChnZXRGaXJlc3RvcmU6MSl9LlxuICpcbiAqIEBwYXJhbSBhcHAgLSBUaGUge0BsaW5rIEBmaXJlYmFzZS9hcHAjRmlyZWJhc2VBcHB9IHdpdGggd2hpY2ggdGhlIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIHdpbGxcbiAqIGJlIGFzc29jaWF0ZWQuXG4gKiBAcGFyYW0gc2V0dGluZ3MgLSBBIHNldHRpbmdzIG9iamVjdCB0byBjb25maWd1cmUgdGhlIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlLlxuICogQHBhcmFtIGRhdGFiYXNlSWQgLSBUaGUgbmFtZSBvZiB0aGUgZGF0YWJhc2UuXG4gKiBAcmV0dXJucyBBIG5ld2x5IGluaXRpYWxpemVkIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlLlxuICovIGZ1bmN0aW9uIGluaXRpYWxpemVGaXJlc3RvcmUoZSwgdCwgbikge1xuICAgIG4gfHwgKG4gPSBcIihkZWZhdWx0KVwiKTtcbiAgICBjb25zdCByID0gX2dldFByb3ZpZGVyKGUsIFwiZmlyZXN0b3JlXCIpO1xuICAgIGlmIChyLmlzSW5pdGlhbGl6ZWQobikpIHtcbiAgICAgICAgY29uc3QgZSA9IHIuZ2V0SW1tZWRpYXRlKHtcbiAgICAgICAgICAgIGlkZW50aWZpZXI6IG5cbiAgICAgICAgfSksIGkgPSByLmdldE9wdGlvbnMobik7XG4gICAgICAgIGlmIChkZWVwRXF1YWwoaSwgdCkpIHJldHVybiBlO1xuICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5GQUlMRURfUFJFQ09ORElUSU9OLCBcImluaXRpYWxpemVGaXJlc3RvcmUoKSBoYXMgYWxyZWFkeSBiZWVuIGNhbGxlZCB3aXRoIGRpZmZlcmVudCBvcHRpb25zLiBUbyBhdm9pZCB0aGlzIGVycm9yLCBjYWxsIGluaXRpYWxpemVGaXJlc3RvcmUoKSB3aXRoIHRoZSBzYW1lIG9wdGlvbnMgYXMgd2hlbiBpdCB3YXMgb3JpZ2luYWxseSBjYWxsZWQsIG9yIGNhbGwgZ2V0RmlyZXN0b3JlKCkgdG8gcmV0dXJuIHRoZSBhbHJlYWR5IGluaXRpYWxpemVkIGluc3RhbmNlLlwiKTtcbiAgICB9XG4gICAgaWYgKHZvaWQgMCAhPT0gdC5jYWNoZVNpemVCeXRlcyAmJiB2b2lkIDAgIT09IHQubG9jYWxDYWNoZSkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgXCJjYWNoZSBhbmQgY2FjaGVTaXplQnl0ZXMgY2Fubm90IGJlIHNwZWNpZmllZCBhdCB0aGUgc2FtZSB0aW1lIGFzIGNhY2hlU2l6ZUJ5dGVzIHdpbGxiZSBkZXByZWNhdGVkLiBJbnN0ZWFkLCBzcGVjaWZ5IHRoZSBjYWNoZSBzaXplIGluIHRoZSBjYWNoZSBvYmplY3RcIik7XG4gICAgaWYgKHZvaWQgMCAhPT0gdC5jYWNoZVNpemVCeXRlcyAmJiAtMSAhPT0gdC5jYWNoZVNpemVCeXRlcyAmJiB0LmNhY2hlU2l6ZUJ5dGVzIDwgMTA0ODU3NikgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgXCJjYWNoZVNpemVCeXRlcyBtdXN0IGJlIGF0IGxlYXN0IDEwNDg1NzZcIik7XG4gICAgcmV0dXJuIHIuaW5pdGlhbGl6ZSh7XG4gICAgICAgIG9wdGlvbnM6IHQsXG4gICAgICAgIGluc3RhbmNlSWRlbnRpZmllcjogblxuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBnZXRGaXJlc3RvcmUodCwgbikge1xuICAgIGNvbnN0IHIgPSBcIm9iamVjdFwiID09IHR5cGVvZiB0ID8gdCA6IGdldEFwcCgpLCBpID0gXCJzdHJpbmdcIiA9PSB0eXBlb2YgdCA/IHQgOiBuIHx8IFwiKGRlZmF1bHQpXCIsIHMgPSBfZ2V0UHJvdmlkZXIociwgXCJmaXJlc3RvcmVcIikuZ2V0SW1tZWRpYXRlKHtcbiAgICAgICAgaWRlbnRpZmllcjogaVxuICAgIH0pO1xuICAgIGlmICghcy5faW5pdGlhbGl6ZWQpIHtcbiAgICAgICAgY29uc3QgZSA9IGdldERlZmF1bHRFbXVsYXRvckhvc3RuYW1lQW5kUG9ydChcImZpcmVzdG9yZVwiKTtcbiAgICAgICAgZSAmJiBjb25uZWN0RmlyZXN0b3JlRW11bGF0b3IocywgLi4uZSk7XG4gICAgfVxuICAgIHJldHVybiBzO1xufVxuXG4vKipcbiAqIEBpbnRlcm5hbFxuICovIGZ1bmN0aW9uIGVuc3VyZUZpcmVzdG9yZUNvbmZpZ3VyZWQoZSkge1xuICAgIHJldHVybiBlLl9maXJlc3RvcmVDbGllbnQgfHwgX19QUklWQVRFX2NvbmZpZ3VyZUZpcmVzdG9yZShlKSwgZS5fZmlyZXN0b3JlQ2xpZW50LnZlcmlmeU5vdFRlcm1pbmF0ZWQoKSwgXG4gICAgZS5fZmlyZXN0b3JlQ2xpZW50O1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfY29uZmlndXJlRmlyZXN0b3JlKGUpIHtcbiAgICB2YXIgdCwgbiwgcjtcbiAgICBjb25zdCBpID0gZS5fZnJlZXplU2V0dGluZ3MoKSwgcyA9IGZ1bmN0aW9uIF9fUFJJVkFURV9tYWtlRGF0YWJhc2VJbmZvKGUsIHQsIG4sIHIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRhYmFzZUluZm8oZSwgdCwgbiwgci5ob3N0LCByLnNzbCwgci5leHBlcmltZW50YWxGb3JjZUxvbmdQb2xsaW5nLCByLmV4cGVyaW1lbnRhbEF1dG9EZXRlY3RMb25nUG9sbGluZywgX19QUklWQVRFX2Nsb25lTG9uZ1BvbGxpbmdPcHRpb25zKHIuZXhwZXJpbWVudGFsTG9uZ1BvbGxpbmdPcHRpb25zKSwgci51c2VGZXRjaFN0cmVhbXMpO1xuICAgIH0oZS5fZGF0YWJhc2VJZCwgKG51bGwgPT09ICh0ID0gZS5fYXBwKSB8fCB2b2lkIDAgPT09IHQgPyB2b2lkIDAgOiB0Lm9wdGlvbnMuYXBwSWQpIHx8IFwiXCIsIGUuX3BlcnNpc3RlbmNlS2V5LCBpKTtcbiAgICBlLl9maXJlc3RvcmVDbGllbnQgPSBuZXcgRmlyZXN0b3JlQ2xpZW50KGUuX2F1dGhDcmVkZW50aWFscywgZS5fYXBwQ2hlY2tDcmVkZW50aWFscywgZS5fcXVldWUsIHMpLCBcbiAgICAobnVsbCA9PT0gKG4gPSBpLmxvY2FsQ2FjaGUpIHx8IHZvaWQgMCA9PT0gbiA/IHZvaWQgMCA6IG4uX29mZmxpbmVDb21wb25lbnRQcm92aWRlcikgJiYgKG51bGwgPT09IChyID0gaS5sb2NhbENhY2hlKSB8fCB2b2lkIDAgPT09IHIgPyB2b2lkIDAgOiByLl9vbmxpbmVDb21wb25lbnRQcm92aWRlcikgJiYgKGUuX2ZpcmVzdG9yZUNsaWVudC5fdW5pbml0aWFsaXplZENvbXBvbmVudHNQcm92aWRlciA9IHtcbiAgICAgICAgX29mZmxpbmVLaW5kOiBpLmxvY2FsQ2FjaGUua2luZCxcbiAgICAgICAgX29mZmxpbmU6IGkubG9jYWxDYWNoZS5fb2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyLFxuICAgICAgICBfb25saW5lOiBpLmxvY2FsQ2FjaGUuX29ubGluZUNvbXBvbmVudFByb3ZpZGVyXG4gICAgfSk7XG59XG5cbi8qKlxuICogQXR0ZW1wdHMgdG8gZW5hYmxlIHBlcnNpc3RlbnQgc3RvcmFnZSwgaWYgcG9zc2libGUuXG4gKlxuICogTXVzdCBiZSBjYWxsZWQgYmVmb3JlIGFueSBvdGhlciBmdW5jdGlvbnMgKG90aGVyIHRoYW5cbiAqIHtAbGluayBpbml0aWFsaXplRmlyZXN0b3JlfSwge0BsaW5rIChnZXRGaXJlc3RvcmU6MSl9IG9yXG4gKiB7QGxpbmsgY2xlYXJJbmRleGVkRGJQZXJzaXN0ZW5jZX0uXG4gKlxuICogSWYgdGhpcyBmYWlscywgYGVuYWJsZUluZGV4ZWREYlBlcnNpc3RlbmNlKClgIHdpbGwgcmVqZWN0IHRoZSBwcm9taXNlIGl0XG4gKiByZXR1cm5zLiBOb3RlIHRoYXQgZXZlbiBhZnRlciB0aGlzIGZhaWx1cmUsIHRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSB3aWxsXG4gKiByZW1haW4gdXNhYmxlLCBob3dldmVyIG9mZmxpbmUgcGVyc2lzdGVuY2Ugd2lsbCBiZSBkaXNhYmxlZC5cbiAqXG4gKiBUaGVyZSBhcmUgc2V2ZXJhbCByZWFzb25zIHdoeSB0aGlzIGNhbiBmYWlsLCB3aGljaCBjYW4gYmUgaWRlbnRpZmllZCBieVxuICogdGhlIGBjb2RlYCBvbiB0aGUgZXJyb3IuXG4gKlxuICogICAqIGZhaWxlZC1wcmVjb25kaXRpb246IFRoZSBhcHAgaXMgYWxyZWFkeSBvcGVuIGluIGFub3RoZXIgYnJvd3NlciB0YWIuXG4gKiAgICogdW5pbXBsZW1lbnRlZDogVGhlIGJyb3dzZXIgaXMgaW5jb21wYXRpYmxlIHdpdGggdGhlIG9mZmxpbmVcbiAqICAgICBwZXJzaXN0ZW5jZSBpbXBsZW1lbnRhdGlvbi5cbiAqXG4gKiBQZXJzaXN0ZW5jZSBjYW5ub3QgYmUgdXNlZCBpbiBhIE5vZGUuanMgZW52aXJvbm1lbnQuXG4gKlxuICogQHBhcmFtIGZpcmVzdG9yZSAtIFRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSB0byBlbmFibGUgcGVyc2lzdGVuY2UgZm9yLlxuICogQHBhcmFtIHBlcnNpc3RlbmNlU2V0dGluZ3MgLSBPcHRpb25hbCBzZXR0aW5ncyBvYmplY3QgdG8gY29uZmlndXJlXG4gKiBwZXJzaXN0ZW5jZS5cbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgcmVwcmVzZW50cyBzdWNjZXNzZnVsbHkgZW5hYmxpbmcgcGVyc2lzdGVudCBzdG9yYWdlLlxuICogQGRlcHJlY2F0ZWQgVGhpcyBmdW5jdGlvbiB3aWxsIGJlIHJlbW92ZWQgaW4gYSBmdXR1cmUgbWFqb3IgcmVsZWFzZS4gSW5zdGVhZCwgc2V0XG4gKiBgRmlyZXN0b3JlU2V0dGluZ3MubG9jYWxDYWNoZWAgdG8gYW4gaW5zdGFuY2Ugb2YgYFBlcnNpc3RlbnRMb2NhbENhY2hlYCB0b1xuICogdHVybiBvbiBJbmRleGVkRGIgY2FjaGUuIENhbGxpbmcgdGhpcyBmdW5jdGlvbiB3aGVuIGBGaXJlc3RvcmVTZXR0aW5ncy5sb2NhbENhY2hlYFxuICogaXMgYWxyZWFkeSBzcGVjaWZpZWQgd2lsbCB0aHJvdyBhbiBleGNlcHRpb24uXG4gKi8gZnVuY3Rpb24gZW5hYmxlSW5kZXhlZERiUGVyc2lzdGVuY2UoZSwgdCkge1xuICAgIF9fUFJJVkFURV92ZXJpZnlOb3RJbml0aWFsaXplZChlID0gX19QUklWQVRFX2Nhc3QoZSwgRmlyZXN0b3JlKSk7XG4gICAgY29uc3QgbiA9IGVuc3VyZUZpcmVzdG9yZUNvbmZpZ3VyZWQoZSk7XG4gICAgaWYgKG4uX3VuaW5pdGlhbGl6ZWRDb21wb25lbnRzUHJvdmlkZXIpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELkZBSUxFRF9QUkVDT05ESVRJT04sIFwiU0RLIGNhY2hlIGlzIGFscmVhZHkgc3BlY2lmaWVkLlwiKTtcbiAgICBfX1BSSVZBVEVfbG9nV2FybihcImVuYWJsZUluZGV4ZWREYlBlcnNpc3RlbmNlKCkgd2lsbCBiZSBkZXByZWNhdGVkIGluIHRoZSBmdXR1cmUsIHlvdSBjYW4gdXNlIGBGaXJlc3RvcmVTZXR0aW5ncy5jYWNoZWAgaW5zdGVhZC5cIik7XG4gICAgY29uc3QgciA9IGUuX2ZyZWV6ZVNldHRpbmdzKCksIGkgPSBuZXcgT25saW5lQ29tcG9uZW50UHJvdmlkZXI7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9zZXRQZXJzaXN0ZW5jZVByb3ZpZGVycyhuLCBpLCBuZXcgX19QUklWQVRFX0luZGV4ZWREYk9mZmxpbmVDb21wb25lbnRQcm92aWRlcihpLCByLmNhY2hlU2l6ZUJ5dGVzLCBudWxsID09IHQgPyB2b2lkIDAgOiB0LmZvcmNlT3duZXJzaGlwKSk7XG59XG5cbi8qKlxuICogQXR0ZW1wdHMgdG8gZW5hYmxlIG11bHRpLXRhYiBwZXJzaXN0ZW50IHN0b3JhZ2UsIGlmIHBvc3NpYmxlLiBJZiBlbmFibGVkXG4gKiBhY3Jvc3MgYWxsIHRhYnMsIGFsbCBvcGVyYXRpb25zIHNoYXJlIGFjY2VzcyB0byBsb2NhbCBwZXJzaXN0ZW5jZSwgaW5jbHVkaW5nXG4gKiBzaGFyZWQgZXhlY3V0aW9uIG9mIHF1ZXJpZXMgYW5kIGxhdGVuY3ktY29tcGVuc2F0ZWQgbG9jYWwgZG9jdW1lbnQgdXBkYXRlc1xuICogYWNyb3NzIGFsbCBjb25uZWN0ZWQgaW5zdGFuY2VzLlxuICpcbiAqIElmIHRoaXMgZmFpbHMsIGBlbmFibGVNdWx0aVRhYkluZGV4ZWREYlBlcnNpc3RlbmNlKClgIHdpbGwgcmVqZWN0IHRoZSBwcm9taXNlXG4gKiBpdCByZXR1cm5zLiBOb3RlIHRoYXQgZXZlbiBhZnRlciB0aGlzIGZhaWx1cmUsIHRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSB3aWxsXG4gKiByZW1haW4gdXNhYmxlLCBob3dldmVyIG9mZmxpbmUgcGVyc2lzdGVuY2Ugd2lsbCBiZSBkaXNhYmxlZC5cbiAqXG4gKiBUaGVyZSBhcmUgc2V2ZXJhbCByZWFzb25zIHdoeSB0aGlzIGNhbiBmYWlsLCB3aGljaCBjYW4gYmUgaWRlbnRpZmllZCBieVxuICogdGhlIGBjb2RlYCBvbiB0aGUgZXJyb3IuXG4gKlxuICogICAqIGZhaWxlZC1wcmVjb25kaXRpb246IFRoZSBhcHAgaXMgYWxyZWFkeSBvcGVuIGluIGFub3RoZXIgYnJvd3NlciB0YWIgYW5kXG4gKiAgICAgbXVsdGktdGFiIGlzIG5vdCBlbmFibGVkLlxuICogICAqIHVuaW1wbGVtZW50ZWQ6IFRoZSBicm93c2VyIGlzIGluY29tcGF0aWJsZSB3aXRoIHRoZSBvZmZsaW5lXG4gKiAgICAgcGVyc2lzdGVuY2UgaW1wbGVtZW50YXRpb24uXG4gKlxuICogQHBhcmFtIGZpcmVzdG9yZSAtIFRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSB0byBlbmFibGUgcGVyc2lzdGVuY2UgZm9yLlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCByZXByZXNlbnRzIHN1Y2Nlc3NmdWxseSBlbmFibGluZyBwZXJzaXN0ZW50XG4gKiBzdG9yYWdlLlxuICogQGRlcHJlY2F0ZWQgVGhpcyBmdW5jdGlvbiB3aWxsIGJlIHJlbW92ZWQgaW4gYSBmdXR1cmUgbWFqb3IgcmVsZWFzZS4gSW5zdGVhZCwgc2V0XG4gKiBgRmlyZXN0b3JlU2V0dGluZ3MubG9jYWxDYWNoZWAgdG8gYW4gaW5zdGFuY2Ugb2YgYFBlcnNpc3RlbnRMb2NhbENhY2hlYCB0b1xuICogdHVybiBvbiBpbmRleGVkZGIgY2FjaGUuIENhbGxpbmcgdGhpcyBmdW5jdGlvbiB3aGVuIGBGaXJlc3RvcmVTZXR0aW5ncy5sb2NhbENhY2hlYFxuICogaXMgYWxyZWFkeSBzcGVjaWZpZWQgd2lsbCB0aHJvdyBhbiBleGNlcHRpb24uXG4gKi8gZnVuY3Rpb24gZW5hYmxlTXVsdGlUYWJJbmRleGVkRGJQZXJzaXN0ZW5jZShlKSB7XG4gICAgX19QUklWQVRFX3ZlcmlmeU5vdEluaXRpYWxpemVkKGUgPSBfX1BSSVZBVEVfY2FzdChlLCBGaXJlc3RvcmUpKTtcbiAgICBjb25zdCB0ID0gZW5zdXJlRmlyZXN0b3JlQ29uZmlndXJlZChlKTtcbiAgICBpZiAodC5fdW5pbml0aWFsaXplZENvbXBvbmVudHNQcm92aWRlcikgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJTREsgY2FjaGUgaXMgYWxyZWFkeSBzcGVjaWZpZWQuXCIpO1xuICAgIF9fUFJJVkFURV9sb2dXYXJuKFwiZW5hYmxlTXVsdGlUYWJJbmRleGVkRGJQZXJzaXN0ZW5jZSgpIHdpbGwgYmUgZGVwcmVjYXRlZCBpbiB0aGUgZnV0dXJlLCB5b3UgY2FuIHVzZSBgRmlyZXN0b3JlU2V0dGluZ3MuY2FjaGVgIGluc3RlYWQuXCIpO1xuICAgIGNvbnN0IG4gPSBlLl9mcmVlemVTZXR0aW5ncygpLCByID0gbmV3IE9ubGluZUNvbXBvbmVudFByb3ZpZGVyO1xuICAgIHJldHVybiBfX1BSSVZBVEVfc2V0UGVyc2lzdGVuY2VQcm92aWRlcnModCwgciwgbmV3IF9fUFJJVkFURV9NdWx0aVRhYk9mZmxpbmVDb21wb25lbnRQcm92aWRlcihyLCBuLmNhY2hlU2l6ZUJ5dGVzKSk7XG59XG5cbi8qKlxuICogUmVnaXN0ZXJzIGJvdGggdGhlIGBPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXJgIGFuZCBgT25saW5lQ29tcG9uZW50UHJvdmlkZXJgLlxuICogSWYgdGhlIG9wZXJhdGlvbiBmYWlscyB3aXRoIGEgcmVjb3ZlcmFibGUgZXJyb3IgKHNlZVxuICogYGNhblJlY292ZXJGcm9tSW5kZXhlZERiRXJyb3IoKWAgYmVsb3cpLCB0aGUgcmV0dXJuZWQgUHJvbWlzZSBpcyByZWplY3RlZFxuICogYnV0IHRoZSBjbGllbnQgcmVtYWlucyB1c2FibGUuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3NldFBlcnNpc3RlbmNlUHJvdmlkZXJzKGUsIHQsIG4pIHtcbiAgICBjb25zdCByID0gbmV3IF9fUFJJVkFURV9EZWZlcnJlZDtcbiAgICByZXR1cm4gZS5hc3luY1F1ZXVlLmVucXVldWUoKGFzeW5jICgpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IF9fUFJJVkFURV9zZXRPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIoZSwgbiksIGF3YWl0IF9fUFJJVkFURV9zZXRPbmxpbmVDb21wb25lbnRQcm92aWRlcihlLCB0KSwgXG4gICAgICAgICAgICByLnJlc29sdmUoKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IGU7XG4gICAgICAgICAgICBpZiAoIV9fUFJJVkFURV9jYW5GYWxsYmFja0Zyb21JbmRleGVkRGJFcnJvcih0KSkgdGhyb3cgdDtcbiAgICAgICAgICAgIF9fUFJJVkFURV9sb2dXYXJuKFwiRXJyb3IgZW5hYmxpbmcgaW5kZXhlZGRiIGNhY2hlLiBGYWxsaW5nIGJhY2sgdG8gbWVtb3J5IGNhY2hlOiBcIiArIHQpLCBcbiAgICAgICAgICAgIHIucmVqZWN0KHQpO1xuICAgICAgICB9XG4gICAgfSkpLnRoZW4oKCgpID0+IHIucHJvbWlzZSkpO1xufVxuXG4vKipcbiAqIENsZWFycyB0aGUgcGVyc2lzdGVudCBzdG9yYWdlLiBUaGlzIGluY2x1ZGVzIHBlbmRpbmcgd3JpdGVzIGFuZCBjYWNoZWRcbiAqIGRvY3VtZW50cy5cbiAqXG4gKiBNdXN0IGJlIGNhbGxlZCB3aGlsZSB0aGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UgaXMgbm90IHN0YXJ0ZWQgKGFmdGVyIHRoZSBhcHAgaXNcbiAqIHRlcm1pbmF0ZWQgb3Igd2hlbiB0aGUgYXBwIGlzIGZpcnN0IGluaXRpYWxpemVkKS4gT24gc3RhcnR1cCwgdGhpcyBmdW5jdGlvblxuICogbXVzdCBiZSBjYWxsZWQgYmVmb3JlIG90aGVyIGZ1bmN0aW9ucyAob3RoZXIgdGhhbiB7QGxpbmtcbiAqIGluaXRpYWxpemVGaXJlc3RvcmV9IG9yIHtAbGluayAoZ2V0RmlyZXN0b3JlOjEpfSkpLiBJZiB0aGUge0BsaW5rIEZpcmVzdG9yZX1cbiAqIGluc3RhbmNlIGlzIHN0aWxsIHJ1bm5pbmcsIHRoZSBwcm9taXNlIHdpbGwgYmUgcmVqZWN0ZWQgd2l0aCB0aGUgZXJyb3IgY29kZVxuICogb2YgYGZhaWxlZC1wcmVjb25kaXRpb25gLlxuICpcbiAqIE5vdGU6IGBjbGVhckluZGV4ZWREYlBlcnNpc3RlbmNlKClgIGlzIHByaW1hcmlseSBpbnRlbmRlZCB0byBoZWxwIHdyaXRlXG4gKiByZWxpYWJsZSB0ZXN0cyB0aGF0IHVzZSBDbG91ZCBGaXJlc3RvcmUuIEl0IHVzZXMgYW4gZWZmaWNpZW50IG1lY2hhbmlzbSBmb3JcbiAqIGRyb3BwaW5nIGV4aXN0aW5nIGRhdGEgYnV0IGRvZXMgbm90IGF0dGVtcHQgdG8gc2VjdXJlbHkgb3ZlcndyaXRlIG9yXG4gKiBvdGhlcndpc2UgbWFrZSBjYWNoZWQgZGF0YSB1bnJlY292ZXJhYmxlLiBGb3IgYXBwbGljYXRpb25zIHRoYXQgYXJlIHNlbnNpdGl2ZVxuICogdG8gdGhlIGRpc2Nsb3N1cmUgb2YgY2FjaGVkIGRhdGEgaW4gYmV0d2VlbiB1c2VyIHNlc3Npb25zLCB3ZSBzdHJvbmdseVxuICogcmVjb21tZW5kIG5vdCBlbmFibGluZyBwZXJzaXN0ZW5jZSBhdCBhbGwuXG4gKlxuICogQHBhcmFtIGZpcmVzdG9yZSAtIFRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSB0byBjbGVhciBwZXJzaXN0ZW5jZSBmb3IuXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IGlzIHJlc29sdmVkIHdoZW4gdGhlIHBlcnNpc3RlbnQgc3RvcmFnZSBpc1xuICogY2xlYXJlZC4gT3RoZXJ3aXNlLCB0aGUgcHJvbWlzZSBpcyByZWplY3RlZCB3aXRoIGFuIGVycm9yLlxuICovIGZ1bmN0aW9uIGNsZWFySW5kZXhlZERiUGVyc2lzdGVuY2UoZSkge1xuICAgIGlmIChlLl9pbml0aWFsaXplZCAmJiAhZS5fdGVybWluYXRlZCkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJQZXJzaXN0ZW5jZSBjYW4gb25seSBiZSBjbGVhcmVkIGJlZm9yZSBhIEZpcmVzdG9yZSBpbnN0YW5jZSBpcyBpbml0aWFsaXplZCBvciBhZnRlciBpdCBpcyB0ZXJtaW5hdGVkLlwiKTtcbiAgICBjb25zdCB0ID0gbmV3IF9fUFJJVkFURV9EZWZlcnJlZDtcbiAgICByZXR1cm4gZS5fcXVldWUuZW5xdWV1ZUFuZEZvcmdldEV2ZW5XaGlsZVJlc3RyaWN0ZWQoKGFzeW5jICgpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IGFzeW5jIGZ1bmN0aW9uIF9fUFJJVkFURV9pbmRleGVkRGJDbGVhclBlcnNpc3RlbmNlKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoIV9fUFJJVkFURV9TaW1wbGVEYi5EKCkpIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gZSArIFwibWFpblwiO1xuICAgICAgICAgICAgICAgIGF3YWl0IF9fUFJJVkFURV9TaW1wbGVEYi5kZWxldGUodCk7XG4gICAgICAgICAgICB9KF9fUFJJVkFURV9pbmRleGVkRGJTdG9yYWdlUHJlZml4KGUuX2RhdGFiYXNlSWQsIGUuX3BlcnNpc3RlbmNlS2V5KSksIHQucmVzb2x2ZSgpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0LnJlamVjdChlKTtcbiAgICAgICAgfVxuICAgIH0pKSwgdC5wcm9taXNlO1xufVxuXG4vKipcbiAqIFdhaXRzIHVudGlsIGFsbCBjdXJyZW50bHkgcGVuZGluZyB3cml0ZXMgZm9yIHRoZSBhY3RpdmUgdXNlciBoYXZlIGJlZW5cbiAqIGFja25vd2xlZGdlZCBieSB0aGUgYmFja2VuZC5cbiAqXG4gKiBUaGUgcmV0dXJuZWQgcHJvbWlzZSByZXNvbHZlcyBpbW1lZGlhdGVseSBpZiB0aGVyZSBhcmUgbm8gb3V0c3RhbmRpbmcgd3JpdGVzLlxuICogT3RoZXJ3aXNlLCB0aGUgcHJvbWlzZSB3YWl0cyBmb3IgYWxsIHByZXZpb3VzbHkgaXNzdWVkIHdyaXRlcyAoaW5jbHVkaW5nXG4gKiB0aG9zZSB3cml0dGVuIGluIGEgcHJldmlvdXMgYXBwIHNlc3Npb24pLCBidXQgaXQgZG9lcyBub3Qgd2FpdCBmb3Igd3JpdGVzXG4gKiB0aGF0IHdlcmUgYWRkZWQgYWZ0ZXIgdGhlIGZ1bmN0aW9uIGlzIGNhbGxlZC4gSWYgeW91IHdhbnQgdG8gd2FpdCBmb3JcbiAqIGFkZGl0aW9uYWwgd3JpdGVzLCBjYWxsIGB3YWl0Rm9yUGVuZGluZ1dyaXRlcygpYCBhZ2Fpbi5cbiAqXG4gKiBBbnkgb3V0c3RhbmRpbmcgYHdhaXRGb3JQZW5kaW5nV3JpdGVzKClgIHByb21pc2VzIGFyZSByZWplY3RlZCBkdXJpbmcgdXNlclxuICogY2hhbmdlcy5cbiAqXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB3aGljaCByZXNvbHZlcyB3aGVuIGFsbCBjdXJyZW50bHkgcGVuZGluZyB3cml0ZXMgaGF2ZSBiZWVuXG4gKiBhY2tub3dsZWRnZWQgYnkgdGhlIGJhY2tlbmQuXG4gKi8gZnVuY3Rpb24gd2FpdEZvclBlbmRpbmdXcml0ZXMoZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50V2FpdEZvclBlbmRpbmdXcml0ZXMoZSkge1xuICAgICAgICBjb25zdCB0ID0gbmV3IF9fUFJJVkFURV9EZWZlcnJlZDtcbiAgICAgICAgcmV0dXJuIGUuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiBfX1BSSVZBVEVfc3luY0VuZ2luZVJlZ2lzdGVyUGVuZGluZ1dyaXRlc0NhbGxiYWNrKGF3YWl0IF9fUFJJVkFURV9nZXRTeW5jRW5naW5lKGUpLCB0KSkpLCBcbiAgICAgICAgdC5wcm9taXNlO1xuICAgIH0oZW5zdXJlRmlyZXN0b3JlQ29uZmlndXJlZChlID0gX19QUklWQVRFX2Nhc3QoZSwgRmlyZXN0b3JlKSkpO1xufVxuXG4vKipcbiAqIFJlLWVuYWJsZXMgdXNlIG9mIHRoZSBuZXR3b3JrIGZvciB0aGlzIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIGFmdGVyIGEgcHJpb3JcbiAqIGNhbGwgdG8ge0BsaW5rIGRpc2FibGVOZXR3b3JrfS5cbiAqXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IGlzIHJlc29sdmVkIG9uY2UgdGhlIG5ldHdvcmsgaGFzIGJlZW4gZW5hYmxlZC5cbiAqLyBmdW5jdGlvbiBlbmFibGVOZXR3b3JrKGUpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudEVuYWJsZU5ldHdvcmsoZW5zdXJlRmlyZXN0b3JlQ29uZmlndXJlZChlID0gX19QUklWQVRFX2Nhc3QoZSwgRmlyZXN0b3JlKSkpO1xufVxuXG4vKipcbiAqIERpc2FibGVzIG5ldHdvcmsgdXNhZ2UgZm9yIHRoaXMgaW5zdGFuY2UuIEl0IGNhbiBiZSByZS1lbmFibGVkIHZpYSB7QGxpbmtcbiAqIGVuYWJsZU5ldHdvcmt9LiBXaGlsZSB0aGUgbmV0d29yayBpcyBkaXNhYmxlZCwgYW55IHNuYXBzaG90IGxpc3RlbmVycyxcbiAqIGBnZXREb2MoKWAgb3IgYGdldERvY3MoKWAgY2FsbHMgd2lsbCByZXR1cm4gcmVzdWx0cyBmcm9tIGNhY2hlLCBhbmQgYW55IHdyaXRlXG4gKiBvcGVyYXRpb25zIHdpbGwgYmUgcXVldWVkIHVudGlsIHRoZSBuZXR3b3JrIGlzIHJlc3RvcmVkLlxuICpcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgaXMgcmVzb2x2ZWQgb25jZSB0aGUgbmV0d29yayBoYXMgYmVlbiBkaXNhYmxlZC5cbiAqLyBmdW5jdGlvbiBkaXNhYmxlTmV0d29yayhlKSB7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9maXJlc3RvcmVDbGllbnREaXNhYmxlTmV0d29yayhlbnN1cmVGaXJlc3RvcmVDb25maWd1cmVkKGUgPSBfX1BSSVZBVEVfY2FzdChlLCBGaXJlc3RvcmUpKSk7XG59XG5cbi8qKlxuICogVGVybWluYXRlcyB0aGUgcHJvdmlkZWQge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UuXG4gKlxuICogQWZ0ZXIgY2FsbGluZyBgdGVybWluYXRlKClgIG9ubHkgdGhlIGBjbGVhckluZGV4ZWREYlBlcnNpc3RlbmNlKClgIGZ1bmN0aW9uXG4gKiBtYXkgYmUgdXNlZC4gQW55IG90aGVyIGZ1bmN0aW9uIHdpbGwgdGhyb3cgYSBgRmlyZXN0b3JlRXJyb3JgLlxuICpcbiAqIFRvIHJlc3RhcnQgYWZ0ZXIgdGVybWluYXRpb24sIGNyZWF0ZSBhIG5ldyBpbnN0YW5jZSBvZiBGaXJlYmFzZUZpcmVzdG9yZSB3aXRoXG4gKiB7QGxpbmsgKGdldEZpcmVzdG9yZToxKX0uXG4gKlxuICogVGVybWluYXRpb24gZG9lcyBub3QgY2FuY2VsIGFueSBwZW5kaW5nIHdyaXRlcywgYW5kIGFueSBwcm9taXNlcyB0aGF0IGFyZVxuICogYXdhaXRpbmcgYSByZXNwb25zZSBmcm9tIHRoZSBzZXJ2ZXIgd2lsbCBub3QgYmUgcmVzb2x2ZWQuIElmIHlvdSBoYXZlXG4gKiBwZXJzaXN0ZW5jZSBlbmFibGVkLCB0aGUgbmV4dCB0aW1lIHlvdSBzdGFydCB0aGlzIGluc3RhbmNlLCBpdCB3aWxsIHJlc3VtZVxuICogc2VuZGluZyB0aGVzZSB3cml0ZXMgdG8gdGhlIHNlcnZlci5cbiAqXG4gKiBOb3RlOiBVbmRlciBub3JtYWwgY2lyY3Vtc3RhbmNlcywgY2FsbGluZyBgdGVybWluYXRlKClgIGlzIG5vdCByZXF1aXJlZC4gVGhpc1xuICogZnVuY3Rpb24gaXMgdXNlZnVsIG9ubHkgd2hlbiB5b3Ugd2FudCB0byBmb3JjZSB0aGlzIGluc3RhbmNlIHRvIHJlbGVhc2UgYWxsXG4gKiBvZiBpdHMgcmVzb3VyY2VzIG9yIGluIGNvbWJpbmF0aW9uIHdpdGggYGNsZWFySW5kZXhlZERiUGVyc2lzdGVuY2UoKWAgdG9cbiAqIGVuc3VyZSB0aGF0IGFsbCBsb2NhbCBzdGF0ZSBpcyBkZXN0cm95ZWQgYmV0d2VlbiB0ZXN0IHJ1bnMuXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCBpcyByZXNvbHZlZCB3aGVuIHRoZSBpbnN0YW5jZSBoYXMgYmVlbiBzdWNjZXNzZnVsbHlcbiAqIHRlcm1pbmF0ZWQuXG4gKi8gZnVuY3Rpb24gdGVybWluYXRlKGUpIHtcbiAgICByZXR1cm4gX3JlbW92ZVNlcnZpY2VJbnN0YW5jZShlLmFwcCwgXCJmaXJlc3RvcmVcIiwgZS5fZGF0YWJhc2VJZC5kYXRhYmFzZSksIGUuX2RlbGV0ZSgpO1xufVxuXG4vKipcbiAqIExvYWRzIGEgRmlyZXN0b3JlIGJ1bmRsZSBpbnRvIHRoZSBsb2NhbCBjYWNoZS5cbiAqXG4gKiBAcGFyYW0gZmlyZXN0b3JlIC0gVGhlIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIHRvIGxvYWQgYnVuZGxlcyBmb3IuXG4gKiBAcGFyYW0gYnVuZGxlRGF0YSAtIEFuIG9iamVjdCByZXByZXNlbnRpbmcgdGhlIGJ1bmRsZSB0byBiZSBsb2FkZWQuIFZhbGlkXG4gKiBvYmplY3RzIGFyZSBgQXJyYXlCdWZmZXJgLCBgUmVhZGFibGVTdHJlYW08VWludDhBcnJheT5gIG9yIGBzdHJpbmdgLlxuICpcbiAqIEByZXR1cm5zIEEgYExvYWRCdW5kbGVUYXNrYCBvYmplY3QsIHdoaWNoIG5vdGlmaWVzIGNhbGxlcnMgd2l0aCBwcm9ncmVzc1xuICogdXBkYXRlcywgYW5kIGNvbXBsZXRpb24gb3IgZXJyb3IgZXZlbnRzLiBJdCBjYW4gYmUgdXNlZCBhcyBhXG4gKiBgUHJvbWlzZTxMb2FkQnVuZGxlVGFza1Byb2dyZXNzPmAuXG4gKi8gZnVuY3Rpb24gbG9hZEJ1bmRsZShlLCB0KSB7XG4gICAgY29uc3QgbiA9IGVuc3VyZUZpcmVzdG9yZUNvbmZpZ3VyZWQoZSA9IF9fUFJJVkFURV9jYXN0KGUsIEZpcmVzdG9yZSkpLCByID0gbmV3IExvYWRCdW5kbGVUYXNrO1xuICAgIHJldHVybiBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50TG9hZEJ1bmRsZShuLCBlLl9kYXRhYmFzZUlkLCB0LCByKSwgcjtcbn1cblxuLyoqXG4gKiBSZWFkcyBhIEZpcmVzdG9yZSB7QGxpbmsgUXVlcnl9IGZyb20gbG9jYWwgY2FjaGUsIGlkZW50aWZpZWQgYnkgdGhlIGdpdmVuXG4gKiBuYW1lLlxuICpcbiAqIFRoZSBuYW1lZCBxdWVyaWVzIGFyZSBwYWNrYWdlZCAgaW50byBidW5kbGVzIG9uIHRoZSBzZXJ2ZXIgc2lkZSAoYWxvbmdcbiAqIHdpdGggcmVzdWx0aW5nIGRvY3VtZW50cyksIGFuZCBsb2FkZWQgdG8gbG9jYWwgY2FjaGUgdXNpbmcgYGxvYWRCdW5kbGVgLiBPbmNlXG4gKiBpbiBsb2NhbCBjYWNoZSwgdXNlIHRoaXMgbWV0aG9kIHRvIGV4dHJhY3QgYSB7QGxpbmsgUXVlcnl9IGJ5IG5hbWUuXG4gKlxuICogQHBhcmFtIGZpcmVzdG9yZSAtIFRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSB0byByZWFkIHRoZSBxdWVyeSBmcm9tLlxuICogQHBhcmFtIG5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgcXVlcnkuXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IGlzIHJlc29sdmVkIHdpdGggdGhlIFF1ZXJ5IG9yIGBudWxsYC5cbiAqLyBmdW5jdGlvbiBuYW1lZFF1ZXJ5KGUsIHQpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudEdldE5hbWVkUXVlcnkoZW5zdXJlRmlyZXN0b3JlQ29uZmlndXJlZChlID0gX19QUklWQVRFX2Nhc3QoZSwgRmlyZXN0b3JlKSksIHQpLnRoZW4oKHQgPT4gdCA/IG5ldyBRdWVyeShlLCBudWxsLCB0LnF1ZXJ5KSA6IG51bGwpKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3ZlcmlmeU5vdEluaXRpYWxpemVkKGUpIHtcbiAgICBpZiAoZS5faW5pdGlhbGl6ZWQgfHwgZS5fdGVybWluYXRlZCkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJGaXJlc3RvcmUgaGFzIGFscmVhZHkgYmVlbiBzdGFydGVkIGFuZCBwZXJzaXN0ZW5jZSBjYW4gbm8gbG9uZ2VyIGJlIGVuYWJsZWQuIFlvdSBjYW4gb25seSBlbmFibGUgcGVyc2lzdGVuY2UgYmVmb3JlIGNhbGxpbmcgYW55IG90aGVyIG1ldGhvZHMgb24gYSBGaXJlc3RvcmUgb2JqZWN0LlwiKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJlcHJlc2VudHMgYW4gYWdncmVnYXRpb24gdGhhdCBjYW4gYmUgcGVyZm9ybWVkIGJ5IEZpcmVzdG9yZS5cbiAqL1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFyc1xuY2xhc3MgQWdncmVnYXRlRmllbGQge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG5ldyBBZ2dyZWdhdGVGaWVsZDxUPlxuICAgICAqIEBwYXJhbSBhZ2dyZWdhdGVUeXBlIFNwZWNpZmllcyB0aGUgdHlwZSBvZiBhZ2dyZWdhdGlvbiBvcGVyYXRpb24gdG8gcGVyZm9ybS5cbiAgICAgKiBAcGFyYW0gX2ludGVybmFsRmllbGRQYXRoIE9wdGlvbmFsbHkgc3BlY2lmaWVzIHRoZSBmaWVsZCB0aGF0IGlzIGFnZ3JlZ2F0ZWQuXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZSA9IFwiY291bnRcIiwgdCkge1xuICAgICAgICB0aGlzLl9pbnRlcm5hbEZpZWxkUGF0aCA9IHQsIFxuICAgICAgICAvKiogQSB0eXBlIHN0cmluZyB0byB1bmlxdWVseSBpZGVudGlmeSBpbnN0YW5jZXMgb2YgdGhpcyBjbGFzcy4gKi9cbiAgICAgICAgdGhpcy50eXBlID0gXCJBZ2dyZWdhdGVGaWVsZFwiLCB0aGlzLmFnZ3JlZ2F0ZVR5cGUgPSBlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBUaGUgcmVzdWx0cyBvZiBleGVjdXRpbmcgYW4gYWdncmVnYXRpb24gcXVlcnkuXG4gKi8gY2xhc3MgQWdncmVnYXRlUXVlcnlTbmFwc2hvdCB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuKSB7XG4gICAgICAgIHRoaXMuX3VzZXJEYXRhV3JpdGVyID0gdCwgdGhpcy5fZGF0YSA9IG4sIFxuICAgICAgICAvKiogQSB0eXBlIHN0cmluZyB0byB1bmlxdWVseSBpZGVudGlmeSBpbnN0YW5jZXMgb2YgdGhpcyBjbGFzcy4gKi9cbiAgICAgICAgdGhpcy50eXBlID0gXCJBZ2dyZWdhdGVRdWVyeVNuYXBzaG90XCIsIHRoaXMucXVlcnkgPSBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSByZXN1bHRzIG9mIHRoZSBhZ2dyZWdhdGlvbnMgcGVyZm9ybWVkIG92ZXIgdGhlIHVuZGVybHlpbmdcbiAgICAgKiBxdWVyeS5cbiAgICAgKlxuICAgICAqIFRoZSBrZXlzIG9mIHRoZSByZXR1cm5lZCBvYmplY3Qgd2lsbCBiZSB0aGUgc2FtZSBhcyB0aG9zZSBvZiB0aGVcbiAgICAgKiBgQWdncmVnYXRlU3BlY2Agb2JqZWN0IHNwZWNpZmllZCB0byB0aGUgYWdncmVnYXRpb24gbWV0aG9kLCBhbmQgdGhlIHZhbHVlc1xuICAgICAqIHdpbGwgYmUgdGhlIGNvcnJlc3BvbmRpbmcgYWdncmVnYXRpb24gcmVzdWx0LlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIHJlc3VsdHMgb2YgdGhlIGFnZ3JlZ2F0aW9ucyBwZXJmb3JtZWQgb3ZlciB0aGUgdW5kZXJseWluZ1xuICAgICAqIHF1ZXJ5LlxuICAgICAqLyAgICBkYXRhKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdXNlckRhdGFXcml0ZXIuY29udmVydE9iamVjdE1hcCh0aGlzLl9kYXRhKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFuIGltbXV0YWJsZSBvYmplY3QgcmVwcmVzZW50aW5nIGFuIGFycmF5IG9mIGJ5dGVzLlxuICovIGNsYXNzIEJ5dGVzIHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5fYnl0ZVN0cmluZyA9IGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgYEJ5dGVzYCBvYmplY3QgZnJvbSB0aGUgZ2l2ZW4gQmFzZTY0IHN0cmluZywgY29udmVydGluZyBpdCB0b1xuICAgICAqIGJ5dGVzLlxuICAgICAqXG4gICAgICogQHBhcmFtIGJhc2U2NCAtIFRoZSBCYXNlNjQgc3RyaW5nIHVzZWQgdG8gY3JlYXRlIHRoZSBgQnl0ZXNgIG9iamVjdC5cbiAgICAgKi8gICAgc3RhdGljIGZyb21CYXNlNjRTdHJpbmcoZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBCeXRlcyhCeXRlU3RyaW5nLmZyb21CYXNlNjRTdHJpbmcoZSkpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5JTlZBTElEX0FSR1VNRU5ULCBcIkZhaWxlZCB0byBjb25zdHJ1Y3QgZGF0YSBmcm9tIEJhc2U2NCBzdHJpbmc6IFwiICsgZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBgQnl0ZXNgIG9iamVjdCBmcm9tIHRoZSBnaXZlbiBVaW50OEFycmF5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGFycmF5IC0gVGhlIFVpbnQ4QXJyYXkgdXNlZCB0byBjcmVhdGUgdGhlIGBCeXRlc2Agb2JqZWN0LlxuICAgICAqLyAgICBzdGF0aWMgZnJvbVVpbnQ4QXJyYXkoZSkge1xuICAgICAgICByZXR1cm4gbmV3IEJ5dGVzKEJ5dGVTdHJpbmcuZnJvbVVpbnQ4QXJyYXkoZSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSB1bmRlcmx5aW5nIGJ5dGVzIGFzIGEgQmFzZTY0LWVuY29kZWQgc3RyaW5nLlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIEJhc2U2NC1lbmNvZGVkIHN0cmluZyBjcmVhdGVkIGZyb20gdGhlIGBCeXRlc2Agb2JqZWN0LlxuICAgICAqLyAgICB0b0Jhc2U2NCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2J5dGVTdHJpbmcudG9CYXNlNjQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgdW5kZXJseWluZyBieXRlcyBpbiBhIG5ldyBgVWludDhBcnJheWAuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgVWludDhBcnJheSBjcmVhdGVkIGZyb20gdGhlIGBCeXRlc2Agb2JqZWN0LlxuICAgICAqLyAgICB0b1VpbnQ4QXJyYXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9ieXRlU3RyaW5nLnRvVWludDhBcnJheSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBgQnl0ZXNgIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBgQnl0ZXNgIG9iamVjdC5cbiAgICAgKi8gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBcIkJ5dGVzKGJhc2U2NDogXCIgKyB0aGlzLnRvQmFzZTY0KCkgKyBcIilcIjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoaXMgYEJ5dGVzYCBvYmplY3QgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdGhlciAtIFRoZSBgQnl0ZXNgIG9iamVjdCB0byBjb21wYXJlIGFnYWluc3QuXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGlzIGBCeXRlc2Agb2JqZWN0IGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBvbmUuXG4gICAgICovICAgIGlzRXF1YWwoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYnl0ZVN0cmluZy5pc0VxdWFsKGUuX2J5dGVTdHJpbmcpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBgRmllbGRQYXRoYCByZWZlcnMgdG8gYSBmaWVsZCBpbiBhIGRvY3VtZW50LiBUaGUgcGF0aCBtYXkgY29uc2lzdCBvZiBhXG4gKiBzaW5nbGUgZmllbGQgbmFtZSAocmVmZXJyaW5nIHRvIGEgdG9wLWxldmVsIGZpZWxkIGluIHRoZSBkb2N1bWVudCksIG9yIGFcbiAqIGxpc3Qgb2YgZmllbGQgbmFtZXMgKHJlZmVycmluZyB0byBhIG5lc3RlZCBmaWVsZCBpbiB0aGUgZG9jdW1lbnQpLlxuICpcbiAqIENyZWF0ZSBhIGBGaWVsZFBhdGhgIGJ5IHByb3ZpZGluZyBmaWVsZCBuYW1lcy4gSWYgbW9yZSB0aGFuIG9uZSBmaWVsZFxuICogbmFtZSBpcyBwcm92aWRlZCwgdGhlIHBhdGggd2lsbCBwb2ludCB0byBhIG5lc3RlZCBmaWVsZCBpbiBhIGRvY3VtZW50LlxuICovIGNsYXNzIEZpZWxkUGF0aCB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGBGaWVsZFBhdGhgIGZyb20gdGhlIHByb3ZpZGVkIGZpZWxkIG5hbWVzLiBJZiBtb3JlIHRoYW4gb25lIGZpZWxkXG4gICAgICogbmFtZSBpcyBwcm92aWRlZCwgdGhlIHBhdGggd2lsbCBwb2ludCB0byBhIG5lc3RlZCBmaWVsZCBpbiBhIGRvY3VtZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIGZpZWxkTmFtZXMgLSBBIGxpc3Qgb2YgZmllbGQgbmFtZXMuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoLi4uZSkge1xuICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IGUubGVuZ3RoOyArK3QpIGlmICgwID09PSBlW3RdLmxlbmd0aCkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgXCJJbnZhbGlkIGZpZWxkIG5hbWUgYXQgYXJndW1lbnQgJChpICsgMSkuIEZpZWxkIG5hbWVzIG11c3Qgbm90IGJlIGVtcHR5LlwiKTtcbiAgICAgICAgdGhpcy5faW50ZXJuYWxQYXRoID0gbmV3IEZpZWxkUGF0aCQxKGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBgRmllbGRQYXRoYCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqXG4gICAgICogQHBhcmFtIG90aGVyIC0gVGhlIGBGaWVsZFBhdGhgIHRvIGNvbXBhcmUgYWdhaW5zdC5cbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoaXMgYEZpZWxkUGF0aGAgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKi8gICAgaXNFcXVhbChlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pbnRlcm5hbFBhdGguaXNFcXVhbChlLl9pbnRlcm5hbFBhdGgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgc3BlY2lhbCBzZW50aW5lbCBgRmllbGRQYXRoYCB0byByZWZlciB0byB0aGUgSUQgb2YgYSBkb2N1bWVudC5cbiAqIEl0IGNhbiBiZSB1c2VkIGluIHF1ZXJpZXMgdG8gc29ydCBvciBmaWx0ZXIgYnkgdGhlIGRvY3VtZW50IElELlxuICovIGZ1bmN0aW9uIGRvY3VtZW50SWQoKSB7XG4gICAgcmV0dXJuIG5ldyBGaWVsZFBhdGgoXCJfX25hbWVfX1wiKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogU2VudGluZWwgdmFsdWVzIHRoYXQgY2FuIGJlIHVzZWQgd2hlbiB3cml0aW5nIGRvY3VtZW50IGZpZWxkcyB3aXRoIGBzZXQoKWBcbiAqIG9yIGB1cGRhdGUoKWAuXG4gKi8gY2xhc3MgRmllbGRWYWx1ZSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIF9tZXRob2ROYW1lIC0gVGhlIHB1YmxpYyBBUEkgZW5kcG9pbnQgdGhhdCByZXR1cm5zIHRoaXMgY2xhc3MuXG4gICAgICogQGhpZGVjb25zdHJ1Y3RvclxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5fbWV0aG9kTmFtZSA9IGU7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBpbW11dGFibGUgb2JqZWN0IHJlcHJlc2VudGluZyBhIGdlb2dyYXBoaWMgbG9jYXRpb24gaW4gRmlyZXN0b3JlLiBUaGVcbiAqIGxvY2F0aW9uIGlzIHJlcHJlc2VudGVkIGFzIGxhdGl0dWRlL2xvbmdpdHVkZSBwYWlyLlxuICpcbiAqIExhdGl0dWRlIHZhbHVlcyBhcmUgaW4gdGhlIHJhbmdlIG9mIFstOTAsIDkwXS5cbiAqIExvbmdpdHVkZSB2YWx1ZXMgYXJlIGluIHRoZSByYW5nZSBvZiBbLTE4MCwgMTgwXS5cbiAqLyBjbGFzcyBHZW9Qb2ludCB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBpbW11dGFibGUgYEdlb1BvaW50YCBvYmplY3Qgd2l0aCB0aGUgcHJvdmlkZWQgbGF0aXR1ZGUgYW5kXG4gICAgICogbG9uZ2l0dWRlIHZhbHVlcy5cbiAgICAgKiBAcGFyYW0gbGF0aXR1ZGUgLSBUaGUgbGF0aXR1ZGUgYXMgbnVtYmVyIGJldHdlZW4gLTkwIGFuZCA5MC5cbiAgICAgKiBAcGFyYW0gbG9uZ2l0dWRlIC0gVGhlIGxvbmdpdHVkZSBhcyBudW1iZXIgYmV0d2VlbiAtMTgwIGFuZCAxODAuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICBpZiAoIWlzRmluaXRlKGUpIHx8IGUgPCAtOTAgfHwgZSA+IDkwKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5JTlZBTElEX0FSR1VNRU5ULCBcIkxhdGl0dWRlIG11c3QgYmUgYSBudW1iZXIgYmV0d2VlbiAtOTAgYW5kIDkwLCBidXQgd2FzOiBcIiArIGUpO1xuICAgICAgICBpZiAoIWlzRmluaXRlKHQpIHx8IHQgPCAtMTgwIHx8IHQgPiAxODApIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELklOVkFMSURfQVJHVU1FTlQsIFwiTG9uZ2l0dWRlIG11c3QgYmUgYSBudW1iZXIgYmV0d2VlbiAtMTgwIGFuZCAxODAsIGJ1dCB3YXM6IFwiICsgdCk7XG4gICAgICAgIHRoaXMuX2xhdCA9IGUsIHRoaXMuX2xvbmcgPSB0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgbGF0aXR1ZGUgb2YgdGhpcyBgR2VvUG9pbnRgIGluc3RhbmNlLlxuICAgICAqLyAgICBnZXQgbGF0aXR1ZGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9sYXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBsb25naXR1ZGUgb2YgdGhpcyBgR2VvUG9pbnRgIGluc3RhbmNlLlxuICAgICAqLyAgICBnZXQgbG9uZ2l0dWRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbG9uZztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoaXMgYEdlb1BvaW50YCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqXG4gICAgICogQHBhcmFtIG90aGVyIC0gVGhlIGBHZW9Qb2ludGAgdG8gY29tcGFyZSBhZ2FpbnN0LlxuICAgICAqIEByZXR1cm5zIHRydWUgaWYgdGhpcyBgR2VvUG9pbnRgIGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBvbmUuXG4gICAgICovICAgIGlzRXF1YWwoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbGF0ID09PSBlLl9sYXQgJiYgdGhpcy5fbG9uZyA9PT0gZS5fbG9uZztcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYSBKU09OLXNlcmlhbGl6YWJsZSByZXByZXNlbnRhdGlvbiBvZiB0aGlzIEdlb1BvaW50LiAqLyAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBsYXRpdHVkZTogdGhpcy5fbGF0LFxuICAgICAgICAgICAgbG9uZ2l0dWRlOiB0aGlzLl9sb25nXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFjdHVhbGx5IHByaXZhdGUgdG8gSlMgY29uc3VtZXJzIG9mIG91ciBBUEksIHNvIHRoaXMgZnVuY3Rpb24gaXMgcHJlZml4ZWRcbiAgICAgKiB3aXRoIGFuIHVuZGVyc2NvcmUuXG4gICAgICovICAgIF9jb21wYXJlVG8oZSkge1xuICAgICAgICByZXR1cm4gX19QUklWQVRFX3ByaW1pdGl2ZUNvbXBhcmF0b3IodGhpcy5fbGF0LCBlLl9sYXQpIHx8IF9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yKHRoaXMuX2xvbmcsIGUuX2xvbmcpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY29uc3QgZ2UgPSAvXl9fLipfXyQvO1xuXG4vKiogVGhlIHJlc3VsdCBvZiBwYXJzaW5nIGRvY3VtZW50IGRhdGEgKGUuZy4gZm9yIGEgc2V0RGF0YSBjYWxsKS4gKi8gY2xhc3MgUGFyc2VkU2V0RGF0YSB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbikge1xuICAgICAgICB0aGlzLmRhdGEgPSBlLCB0aGlzLmZpZWxkTWFzayA9IHQsIHRoaXMuZmllbGRUcmFuc2Zvcm1zID0gbjtcbiAgICB9XG4gICAgdG9NdXRhdGlvbihlLCB0KSB7XG4gICAgICAgIHJldHVybiBudWxsICE9PSB0aGlzLmZpZWxkTWFzayA/IG5ldyBfX1BSSVZBVEVfUGF0Y2hNdXRhdGlvbihlLCB0aGlzLmRhdGEsIHRoaXMuZmllbGRNYXNrLCB0LCB0aGlzLmZpZWxkVHJhbnNmb3JtcykgOiBuZXcgX19QUklWQVRFX1NldE11dGF0aW9uKGUsIHRoaXMuZGF0YSwgdCwgdGhpcy5maWVsZFRyYW5zZm9ybXMpO1xuICAgIH1cbn1cblxuLyoqIFRoZSByZXN1bHQgb2YgcGFyc2luZyBcInVwZGF0ZVwiIGRhdGEgKGkuZS4gZm9yIGFuIHVwZGF0ZURhdGEgY2FsbCkuICovIGNsYXNzIFBhcnNlZFVwZGF0ZURhdGEge1xuICAgIGNvbnN0cnVjdG9yKGUsIFxuICAgIC8vIFRoZSBmaWVsZE1hc2sgZG9lcyBub3QgaW5jbHVkZSBkb2N1bWVudCB0cmFuc2Zvcm1zLlxuICAgIHQsIG4pIHtcbiAgICAgICAgdGhpcy5kYXRhID0gZSwgdGhpcy5maWVsZE1hc2sgPSB0LCB0aGlzLmZpZWxkVHJhbnNmb3JtcyA9IG47XG4gICAgfVxuICAgIHRvTXV0YXRpb24oZSwgdCkge1xuICAgICAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9QYXRjaE11dGF0aW9uKGUsIHRoaXMuZGF0YSwgdGhpcy5maWVsZE1hc2ssIHQsIHRoaXMuZmllbGRUcmFuc2Zvcm1zKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9pc1dyaXRlKGUpIHtcbiAgICBzd2l0Y2ggKGUpIHtcbiAgICAgIGNhc2UgMCAvKiBVc2VyRGF0YVNvdXJjZS5TZXQgKi8gOlxuIC8vIGZhbGwgdGhyb3VnaFxuICAgICAgICAgICAgICBjYXNlIDIgLyogVXNlckRhdGFTb3VyY2UuTWVyZ2VTZXQgKi8gOlxuIC8vIGZhbGwgdGhyb3VnaFxuICAgICAgICAgICAgICBjYXNlIDEgLyogVXNlckRhdGFTb3VyY2UuVXBkYXRlICovIDpcbiAgICAgICAgcmV0dXJuICEwO1xuXG4gICAgICBjYXNlIDMgLyogVXNlckRhdGFTb3VyY2UuQXJndW1lbnQgKi8gOlxuICAgICAgY2FzZSA0IC8qIFVzZXJEYXRhU291cmNlLkFycmF5QXJndW1lbnQgKi8gOlxuICAgICAgICByZXR1cm4gITE7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IGZhaWwoKTtcbiAgICB9XG59XG5cbi8qKiBBIFwiY29udGV4dFwiIG9iamVjdCBwYXNzZWQgYXJvdW5kIHdoaWxlIHBhcnNpbmcgdXNlciBkYXRhLiAqLyBjbGFzcyBfX1BSSVZBVEVfUGFyc2VDb250ZXh0SW1wbCB7XG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZXMgYSBQYXJzZUNvbnRleHQgd2l0aCB0aGUgZ2l2ZW4gc291cmNlIGFuZCBwYXRoLlxuICAgICAqXG4gICAgICogQHBhcmFtIHNldHRpbmdzIC0gVGhlIHNldHRpbmdzIGZvciB0aGUgcGFyc2VyLlxuICAgICAqIEBwYXJhbSBkYXRhYmFzZUlkIC0gVGhlIGRhdGFiYXNlIElEIG9mIHRoZSBGaXJlc3RvcmUgaW5zdGFuY2UuXG4gICAgICogQHBhcmFtIHNlcmlhbGl6ZXIgLSBUaGUgc2VyaWFsaXplciB0byB1c2UgdG8gZ2VuZXJhdGUgdGhlIFZhbHVlIHByb3RvLlxuICAgICAqIEBwYXJhbSBpZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzIC0gV2hldGhlciB0byBpZ25vcmUgdW5kZWZpbmVkIHByb3BlcnRpZXNcbiAgICAgKiByYXRoZXIgdGhhbiB0aHJvdy5cbiAgICAgKiBAcGFyYW0gZmllbGRUcmFuc2Zvcm1zIC0gQSBtdXRhYmxlIGxpc3Qgb2YgZmllbGQgdHJhbnNmb3JtcyBlbmNvdW50ZXJlZFxuICAgICAqIHdoaWxlIHBhcnNpbmcgdGhlIGRhdGEuXG4gICAgICogQHBhcmFtIGZpZWxkTWFzayAtIEEgbXV0YWJsZSBsaXN0IG9mIGZpZWxkIHBhdGhzIGVuY291bnRlcmVkIHdoaWxlIHBhcnNpbmdcbiAgICAgKiB0aGUgZGF0YS5cbiAgICAgKlxuICAgICAqIFRPRE8oYi8zNDg3MTEzMSk6IFdlIGRvbid0IHN1cHBvcnQgYXJyYXkgcGF0aHMgcmlnaHQgbm93LCBzbyBwYXRoIGNhbiBiZVxuICAgICAqIG51bGwgdG8gaW5kaWNhdGUgdGhlIGNvbnRleHQgcmVwcmVzZW50cyBhbnkgbG9jYXRpb24gd2l0aGluIGFuIGFycmF5IChpblxuICAgICAqIHdoaWNoIGNhc2UgY2VydGFpbiBmZWF0dXJlcyB3aWxsIG5vdCB3b3JrIGFuZCBlcnJvcnMgd2lsbCBiZSBzb21ld2hhdFxuICAgICAqIGNvbXByb21pc2VkKS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuLCByLCBpLCBzKSB7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSBlLCB0aGlzLmRhdGFiYXNlSWQgPSB0LCB0aGlzLnNlcmlhbGl6ZXIgPSBuLCB0aGlzLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMgPSByLCBcbiAgICAgICAgLy8gTWlub3IgaGFjazogSWYgZmllbGRUcmFuc2Zvcm1zIGlzIHVuZGVmaW5lZCwgd2UgYXNzdW1lIHRoaXMgaXMgYW5cbiAgICAgICAgLy8gZXh0ZXJuYWwgY2FsbCBhbmQgd2UgbmVlZCB0byB2YWxpZGF0ZSB0aGUgZW50aXJlIHBhdGguXG4gICAgICAgIHZvaWQgMCA9PT0gaSAmJiB0aGlzLlB1KCksIHRoaXMuZmllbGRUcmFuc2Zvcm1zID0gaSB8fCBbXSwgdGhpcy5maWVsZE1hc2sgPSBzIHx8IFtdO1xuICAgIH1cbiAgICBnZXQgcGF0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0dGluZ3MucGF0aDtcbiAgICB9XG4gICAgZ2V0IEl1KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXR0aW5ncy5JdTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYSBuZXcgY29udGV4dCB3aXRoIHRoZSBzcGVjaWZpZWQgc2V0dGluZ3Mgb3ZlcndyaXR0ZW4uICovICAgIFR1KGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfUGFyc2VDb250ZXh0SW1wbChPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHRoaXMuc2V0dGluZ3MpLCBlKSwgdGhpcy5kYXRhYmFzZUlkLCB0aGlzLnNlcmlhbGl6ZXIsIHRoaXMuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcywgdGhpcy5maWVsZFRyYW5zZm9ybXMsIHRoaXMuZmllbGRNYXNrKTtcbiAgICB9XG4gICAgRXUoZSkge1xuICAgICAgICB2YXIgdDtcbiAgICAgICAgY29uc3QgbiA9IG51bGwgPT09ICh0ID0gdGhpcy5wYXRoKSB8fCB2b2lkIDAgPT09IHQgPyB2b2lkIDAgOiB0LmNoaWxkKGUpLCByID0gdGhpcy5UdSh7XG4gICAgICAgICAgICBwYXRoOiBuLFxuICAgICAgICAgICAgZHU6ICExXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gci5BdShlKSwgcjtcbiAgICB9XG4gICAgUnUoZSkge1xuICAgICAgICB2YXIgdDtcbiAgICAgICAgY29uc3QgbiA9IG51bGwgPT09ICh0ID0gdGhpcy5wYXRoKSB8fCB2b2lkIDAgPT09IHQgPyB2b2lkIDAgOiB0LmNoaWxkKGUpLCByID0gdGhpcy5UdSh7XG4gICAgICAgICAgICBwYXRoOiBuLFxuICAgICAgICAgICAgZHU6ICExXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gci5QdSgpLCByO1xuICAgIH1cbiAgICBWdShlKSB7XG4gICAgICAgIC8vIFRPRE8oYi8zNDg3MTEzMSk6IFdlIGRvbid0IHN1cHBvcnQgYXJyYXkgcGF0aHMgcmlnaHQgbm93OyBzbyBtYWtlIHBhdGhcbiAgICAgICAgLy8gdW5kZWZpbmVkLlxuICAgICAgICByZXR1cm4gdGhpcy5UdSh7XG4gICAgICAgICAgICBwYXRoOiB2b2lkIDAsXG4gICAgICAgICAgICBkdTogITBcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG11KGUpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9jcmVhdGVFcnJvcihlLCB0aGlzLnNldHRpbmdzLm1ldGhvZE5hbWUsIHRoaXMuc2V0dGluZ3MuZnUgfHwgITEsIHRoaXMucGF0aCwgdGhpcy5zZXR0aW5ncy5ndSk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zICd0cnVlJyBpZiAnZmllbGRQYXRoJyB3YXMgdHJhdmVyc2VkIHdoZW4gY3JlYXRpbmcgdGhpcyBjb250ZXh0LiAqLyAgICBjb250YWlucyhlKSB7XG4gICAgICAgIHJldHVybiB2b2lkIDAgIT09IHRoaXMuZmllbGRNYXNrLmZpbmQoKHQgPT4gZS5pc1ByZWZpeE9mKHQpKSkgfHwgdm9pZCAwICE9PSB0aGlzLmZpZWxkVHJhbnNmb3Jtcy5maW5kKCh0ID0+IGUuaXNQcmVmaXhPZih0LmZpZWxkKSkpO1xuICAgIH1cbiAgICBQdSgpIHtcbiAgICAgICAgLy8gVE9ETyhiLzM0ODcxMTMxKTogUmVtb3ZlIG51bGwgY2hlY2sgb25jZSB3ZSBoYXZlIHByb3BlciBwYXRocyBmb3IgZmllbGRzXG4gICAgICAgIC8vIHdpdGhpbiBhcnJheXMuXG4gICAgICAgIGlmICh0aGlzLnBhdGgpIGZvciAobGV0IGUgPSAwOyBlIDwgdGhpcy5wYXRoLmxlbmd0aDsgZSsrKSB0aGlzLkF1KHRoaXMucGF0aC5nZXQoZSkpO1xuICAgIH1cbiAgICBBdShlKSB7XG4gICAgICAgIGlmICgwID09PSBlLmxlbmd0aCkgdGhyb3cgdGhpcy5tdShcIkRvY3VtZW50IGZpZWxkcyBtdXN0IG5vdCBiZSBlbXB0eVwiKTtcbiAgICAgICAgaWYgKF9fUFJJVkFURV9pc1dyaXRlKHRoaXMuSXUpICYmIGdlLnRlc3QoZSkpIHRocm93IHRoaXMubXUoJ0RvY3VtZW50IGZpZWxkcyBjYW5ub3QgYmVnaW4gYW5kIGVuZCB3aXRoIFwiX19cIicpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBIZWxwZXIgZm9yIHBhcnNpbmcgcmF3IHVzZXIgaW5wdXQgKHByb3ZpZGVkIHZpYSB0aGUgQVBJKSBpbnRvIGludGVybmFsIG1vZGVsXG4gKiBjbGFzc2VzLlxuICovIGNsYXNzIF9fUFJJVkFURV9Vc2VyRGF0YVJlYWRlciB7XG4gICAgY29uc3RydWN0b3IoZSwgdCwgbikge1xuICAgICAgICB0aGlzLmRhdGFiYXNlSWQgPSBlLCB0aGlzLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMgPSB0LCB0aGlzLnNlcmlhbGl6ZXIgPSBuIHx8IF9fUFJJVkFURV9uZXdTZXJpYWxpemVyKGUpO1xuICAgIH1cbiAgICAvKiogQ3JlYXRlcyBhIG5ldyB0b3AtbGV2ZWwgcGFyc2UgY29udGV4dC4gKi8gICAgcHUoZSwgdCwgbiwgciA9ICExKSB7XG4gICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX1BhcnNlQ29udGV4dEltcGwoe1xuICAgICAgICAgICAgSXU6IGUsXG4gICAgICAgICAgICBtZXRob2ROYW1lOiB0LFxuICAgICAgICAgICAgZ3U6IG4sXG4gICAgICAgICAgICBwYXRoOiBGaWVsZFBhdGgkMS5lbXB0eVBhdGgoKSxcbiAgICAgICAgICAgIGR1OiAhMSxcbiAgICAgICAgICAgIGZ1OiByXG4gICAgICAgIH0sIHRoaXMuZGF0YWJhc2VJZCwgdGhpcy5zZXJpYWxpemVyLCB0aGlzLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX25ld1VzZXJEYXRhUmVhZGVyKGUpIHtcbiAgICBjb25zdCB0ID0gZS5fZnJlZXplU2V0dGluZ3MoKSwgbiA9IF9fUFJJVkFURV9uZXdTZXJpYWxpemVyKGUuX2RhdGFiYXNlSWQpO1xuICAgIHJldHVybiBuZXcgX19QUklWQVRFX1VzZXJEYXRhUmVhZGVyKGUuX2RhdGFiYXNlSWQsICEhdC5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzLCBuKTtcbn1cblxuLyoqIFBhcnNlIGRvY3VtZW50IGRhdGEgZnJvbSBhIHNldCgpIGNhbGwuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9wYXJzZVNldERhdGEoZSwgdCwgbiwgciwgaSwgcyA9IHt9KSB7XG4gICAgY29uc3QgbyA9IGUucHUocy5tZXJnZSB8fCBzLm1lcmdlRmllbGRzID8gMiAvKiBVc2VyRGF0YVNvdXJjZS5NZXJnZVNldCAqLyA6IDAgLyogVXNlckRhdGFTb3VyY2UuU2V0ICovICwgdCwgbiwgaSk7XG4gICAgX19QUklWQVRFX3ZhbGlkYXRlUGxhaW5PYmplY3QoXCJEYXRhIG11c3QgYmUgYW4gb2JqZWN0LCBidXQgaXQgd2FzOlwiLCBvLCByKTtcbiAgICBjb25zdCBfID0gX19QUklWQVRFX3BhcnNlT2JqZWN0KHIsIG8pO1xuICAgIGxldCBhLCB1O1xuICAgIGlmIChzLm1lcmdlKSBhID0gbmV3IEZpZWxkTWFzayhvLmZpZWxkTWFzayksIHUgPSBvLmZpZWxkVHJhbnNmb3JtczsgZWxzZSBpZiAocy5tZXJnZUZpZWxkcykge1xuICAgICAgICBjb25zdCBlID0gW107XG4gICAgICAgIGZvciAoY29uc3QgciBvZiBzLm1lcmdlRmllbGRzKSB7XG4gICAgICAgICAgICBjb25zdCBpID0gX19QUklWQVRFX2ZpZWxkUGF0aEZyb21Bcmd1bWVudCQxKHQsIHIsIG4pO1xuICAgICAgICAgICAgaWYgKCFvLmNvbnRhaW5zKGkpKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5JTlZBTElEX0FSR1VNRU5ULCBgRmllbGQgJyR7aX0nIGlzIHNwZWNpZmllZCBpbiB5b3VyIGZpZWxkIG1hc2sgYnV0IG1pc3NpbmcgZnJvbSB5b3VyIGlucHV0IGRhdGEuYCk7XG4gICAgICAgICAgICBfX1BSSVZBVEVfZmllbGRNYXNrQ29udGFpbnMoZSwgaSkgfHwgZS5wdXNoKGkpO1xuICAgICAgICB9XG4gICAgICAgIGEgPSBuZXcgRmllbGRNYXNrKGUpLCB1ID0gby5maWVsZFRyYW5zZm9ybXMuZmlsdGVyKChlID0+IGEuY292ZXJzKGUuZmllbGQpKSk7XG4gICAgfSBlbHNlIGEgPSBudWxsLCB1ID0gby5maWVsZFRyYW5zZm9ybXM7XG4gICAgcmV0dXJuIG5ldyBQYXJzZWRTZXREYXRhKG5ldyBPYmplY3RWYWx1ZShfKSwgYSwgdSk7XG59XG5cbmNsYXNzIF9fUFJJVkFURV9EZWxldGVGaWVsZFZhbHVlSW1wbCBleHRlbmRzIEZpZWxkVmFsdWUge1xuICAgIF90b0ZpZWxkVHJhbnNmb3JtKGUpIHtcbiAgICAgICAgaWYgKDIgLyogVXNlckRhdGFTb3VyY2UuTWVyZ2VTZXQgKi8gIT09IGUuSXUpIHRocm93IDEgLyogVXNlckRhdGFTb3VyY2UuVXBkYXRlICovID09PSBlLkl1ID8gZS5tdShgJHt0aGlzLl9tZXRob2ROYW1lfSgpIGNhbiBvbmx5IGFwcGVhciBhdCB0aGUgdG9wIGxldmVsIG9mIHlvdXIgdXBkYXRlIGRhdGFgKSA6IGUubXUoYCR7dGhpcy5fbWV0aG9kTmFtZX0oKSBjYW5ub3QgYmUgdXNlZCB3aXRoIHNldCgpIHVubGVzcyB5b3UgcGFzcyB7bWVyZ2U6dHJ1ZX1gKTtcbiAgICAgICAgLy8gTm8gdHJhbnNmb3JtIHRvIGFkZCBmb3IgYSBkZWxldGUsIGJ1dCB3ZSBuZWVkIHRvIGFkZCBpdCB0byBvdXJcbiAgICAgICAgLy8gZmllbGRNYXNrIHNvIGl0IGdldHMgZGVsZXRlZC5cbiAgICAgICAgcmV0dXJuIGUuZmllbGRNYXNrLnB1c2goZS5wYXRoKSwgbnVsbDtcbiAgICB9XG4gICAgaXNFcXVhbChlKSB7XG4gICAgICAgIHJldHVybiBlIGluc3RhbmNlb2YgX19QUklWQVRFX0RlbGV0ZUZpZWxkVmFsdWVJbXBsO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgY2hpbGQgY29udGV4dCBmb3IgcGFyc2luZyBTZXJpYWxpemFibGVGaWVsZFZhbHVlcy5cbiAqXG4gKiBUaGlzIGlzIGRpZmZlcmVudCB0aGFuIGNhbGxpbmcgYFBhcnNlQ29udGV4dC5jb250ZXh0V2l0aGAgYmVjYXVzZSBpdCBrZWVwc1xuICogdGhlIGZpZWxkVHJhbnNmb3JtcyBhbmQgZmllbGRNYXNrIHNlcGFyYXRlLlxuICpcbiAqIFRoZSBjcmVhdGVkIGNvbnRleHQgaGFzIGl0cyBgZGF0YVNvdXJjZWAgc2V0IHRvIGBVc2VyRGF0YVNvdXJjZS5Bcmd1bWVudGAuXG4gKiBBbHRob3VnaCB0aGVzZSB2YWx1ZXMgYXJlIHVzZWQgd2l0aCB3cml0ZXMsIGFueSBlbGVtZW50cyBpbiB0aGVzZSBGaWVsZFZhbHVlc1xuICogYXJlIG5vdCBjb25zaWRlcmVkIHdyaXRlcyBzaW5jZSB0aGV5IGNhbm5vdCBjb250YWluIGFueSBGaWVsZFZhbHVlIHNlbnRpbmVscyxcbiAqIGV0Yy5cbiAqXG4gKiBAcGFyYW0gZmllbGRWYWx1ZSAtIFRoZSBzZW50aW5lbCBGaWVsZFZhbHVlIGZvciB3aGljaCB0byBjcmVhdGUgYSBjaGlsZFxuICogICAgIGNvbnRleHQuXG4gKiBAcGFyYW0gY29udGV4dCAtIFRoZSBwYXJlbnQgY29udGV4dC5cbiAqIEBwYXJhbSBhcnJheUVsZW1lbnQgLSBXaGV0aGVyIG9yIG5vdCB0aGUgRmllbGRWYWx1ZSBoYXMgYW4gYXJyYXkuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX2NyZWF0ZVNlbnRpbmVsQ2hpbGRDb250ZXh0KGUsIHQsIG4pIHtcbiAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9QYXJzZUNvbnRleHRJbXBsKHtcbiAgICAgICAgSXU6IDMgLyogVXNlckRhdGFTb3VyY2UuQXJndW1lbnQgKi8gLFxuICAgICAgICBndTogdC5zZXR0aW5ncy5ndSxcbiAgICAgICAgbWV0aG9kTmFtZTogZS5fbWV0aG9kTmFtZSxcbiAgICAgICAgZHU6IG5cbiAgICB9LCB0LmRhdGFiYXNlSWQsIHQuc2VyaWFsaXplciwgdC5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzKTtcbn1cblxuY2xhc3MgX19QUklWQVRFX1NlcnZlclRpbWVzdGFtcEZpZWxkVmFsdWVJbXBsIGV4dGVuZHMgRmllbGRWYWx1ZSB7XG4gICAgX3RvRmllbGRUcmFuc2Zvcm0oZSkge1xuICAgICAgICByZXR1cm4gbmV3IEZpZWxkVHJhbnNmb3JtKGUucGF0aCwgbmV3IF9fUFJJVkFURV9TZXJ2ZXJUaW1lc3RhbXBUcmFuc2Zvcm0pO1xuICAgIH1cbiAgICBpc0VxdWFsKGUpIHtcbiAgICAgICAgcmV0dXJuIGUgaW5zdGFuY2VvZiBfX1BSSVZBVEVfU2VydmVyVGltZXN0YW1wRmllbGRWYWx1ZUltcGw7XG4gICAgfVxufVxuXG5jbGFzcyBfX1BSSVZBVEVfQXJyYXlVbmlvbkZpZWxkVmFsdWVJbXBsIGV4dGVuZHMgRmllbGRWYWx1ZSB7XG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICBzdXBlcihlKSwgdGhpcy55dSA9IHQ7XG4gICAgfVxuICAgIF90b0ZpZWxkVHJhbnNmb3JtKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV9jcmVhdGVTZW50aW5lbENoaWxkQ29udGV4dCh0aGlzLCBlLCBcbiAgICAgICAgLyphcnJheT0qLyAhMCksIG4gPSB0aGlzLnl1Lm1hcCgoZSA9PiBfX1BSSVZBVEVfcGFyc2VEYXRhKGUsIHQpKSksIHIgPSBuZXcgX19QUklWQVRFX0FycmF5VW5pb25UcmFuc2Zvcm1PcGVyYXRpb24obik7XG4gICAgICAgIHJldHVybiBuZXcgRmllbGRUcmFuc2Zvcm0oZS5wYXRoLCByKTtcbiAgICB9XG4gICAgaXNFcXVhbChlKSB7XG4gICAgICAgIC8vIFRPRE8obXJzY2htaWR0KTogSW1wbGVtZW50IGlzRXF1YWxzXG4gICAgICAgIHJldHVybiB0aGlzID09PSBlO1xuICAgIH1cbn1cblxuY2xhc3MgX19QUklWQVRFX0FycmF5UmVtb3ZlRmllbGRWYWx1ZUltcGwgZXh0ZW5kcyBGaWVsZFZhbHVlIHtcbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHN1cGVyKGUpLCB0aGlzLnl1ID0gdDtcbiAgICB9XG4gICAgX3RvRmllbGRUcmFuc2Zvcm0oZSkge1xuICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX2NyZWF0ZVNlbnRpbmVsQ2hpbGRDb250ZXh0KHRoaXMsIGUsIFxuICAgICAgICAvKmFycmF5PSovICEwKSwgbiA9IHRoaXMueXUubWFwKChlID0+IF9fUFJJVkFURV9wYXJzZURhdGEoZSwgdCkpKSwgciA9IG5ldyBfX1BSSVZBVEVfQXJyYXlSZW1vdmVUcmFuc2Zvcm1PcGVyYXRpb24obik7XG4gICAgICAgIHJldHVybiBuZXcgRmllbGRUcmFuc2Zvcm0oZS5wYXRoLCByKTtcbiAgICB9XG4gICAgaXNFcXVhbChlKSB7XG4gICAgICAgIC8vIFRPRE8obXJzY2htaWR0KTogSW1wbGVtZW50IGlzRXF1YWxzXG4gICAgICAgIHJldHVybiB0aGlzID09PSBlO1xuICAgIH1cbn1cblxuY2xhc3MgX19QUklWQVRFX051bWVyaWNJbmNyZW1lbnRGaWVsZFZhbHVlSW1wbCBleHRlbmRzIEZpZWxkVmFsdWUge1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgc3VwZXIoZSksIHRoaXMud3UgPSB0O1xuICAgIH1cbiAgICBfdG9GaWVsZFRyYW5zZm9ybShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBuZXcgX19QUklWQVRFX051bWVyaWNJbmNyZW1lbnRUcmFuc2Zvcm1PcGVyYXRpb24oZS5zZXJpYWxpemVyLCB0b051bWJlcihlLnNlcmlhbGl6ZXIsIHRoaXMud3UpKTtcbiAgICAgICAgcmV0dXJuIG5ldyBGaWVsZFRyYW5zZm9ybShlLnBhdGgsIHQpO1xuICAgIH1cbiAgICBpc0VxdWFsKGUpIHtcbiAgICAgICAgLy8gVE9ETyhtcnNjaG1pZHQpOiBJbXBsZW1lbnQgaXNFcXVhbHNcbiAgICAgICAgcmV0dXJuIHRoaXMgPT09IGU7XG4gICAgfVxufVxuXG4vKiogUGFyc2UgdXBkYXRlIGRhdGEgZnJvbSBhbiB1cGRhdGUoKSBjYWxsLiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfcGFyc2VVcGRhdGVEYXRhKGUsIHQsIG4sIHIpIHtcbiAgICBjb25zdCBpID0gZS5wdSgxIC8qIFVzZXJEYXRhU291cmNlLlVwZGF0ZSAqLyAsIHQsIG4pO1xuICAgIF9fUFJJVkFURV92YWxpZGF0ZVBsYWluT2JqZWN0KFwiRGF0YSBtdXN0IGJlIGFuIG9iamVjdCwgYnV0IGl0IHdhczpcIiwgaSwgcik7XG4gICAgY29uc3QgcyA9IFtdLCBvID0gT2JqZWN0VmFsdWUuZW1wdHkoKTtcbiAgICBmb3JFYWNoKHIsICgoZSwgcikgPT4ge1xuICAgICAgICBjb25zdCBfID0gX19QUklWQVRFX2ZpZWxkUGF0aEZyb21Eb3RTZXBhcmF0ZWRTdHJpbmcodCwgZSwgbik7XG4gICAgICAgIC8vIEZvciBDb21wYXQgdHlwZXMsIHdlIGhhdmUgdG8gXCJleHRyYWN0XCIgdGhlIHVuZGVybHlpbmcgdHlwZXMgYmVmb3JlXG4gICAgICAgIC8vIHBlcmZvcm1pbmcgdmFsaWRhdGlvbi5cbiAgICAgICAgICAgICAgICByID0gZ2V0TW9kdWxhckluc3RhbmNlKHIpO1xuICAgICAgICBjb25zdCBhID0gaS5SdShfKTtcbiAgICAgICAgaWYgKHIgaW5zdGFuY2VvZiBfX1BSSVZBVEVfRGVsZXRlRmllbGRWYWx1ZUltcGwpIFxuICAgICAgICAvLyBBZGQgaXQgdG8gdGhlIGZpZWxkIG1hc2ssIGJ1dCBkb24ndCBhZGQgYW55dGhpbmcgdG8gdXBkYXRlRGF0YS5cbiAgICAgICAgcy5wdXNoKF8pOyBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBfX1BSSVZBVEVfcGFyc2VEYXRhKHIsIGEpO1xuICAgICAgICAgICAgbnVsbCAhPSBlICYmIChzLnB1c2goXyksIG8uc2V0KF8sIGUpKTtcbiAgICAgICAgfVxuICAgIH0pKTtcbiAgICBjb25zdCBfID0gbmV3IEZpZWxkTWFzayhzKTtcbiAgICByZXR1cm4gbmV3IFBhcnNlZFVwZGF0ZURhdGEobywgXywgaS5maWVsZFRyYW5zZm9ybXMpO1xufVxuXG4vKiogUGFyc2UgdXBkYXRlIGRhdGEgZnJvbSBhIGxpc3Qgb2YgZmllbGQvdmFsdWUgYXJndW1lbnRzLiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfcGFyc2VVcGRhdGVWYXJhcmdzKGUsIHQsIG4sIHIsIGksIHMpIHtcbiAgICBjb25zdCBvID0gZS5wdSgxIC8qIFVzZXJEYXRhU291cmNlLlVwZGF0ZSAqLyAsIHQsIG4pLCBfID0gWyBfX1BSSVZBVEVfZmllbGRQYXRoRnJvbUFyZ3VtZW50JDEodCwgciwgbikgXSwgYSA9IFsgaSBdO1xuICAgIGlmIChzLmxlbmd0aCAlIDIgIT0gMCkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgYEZ1bmN0aW9uICR7dH0oKSBuZWVkcyB0byBiZSBjYWxsZWQgd2l0aCBhbiBldmVuIG51bWJlciBvZiBhcmd1bWVudHMgdGhhdCBhbHRlcm5hdGUgYmV0d2VlbiBmaWVsZCBuYW1lcyBhbmQgdmFsdWVzLmApO1xuICAgIGZvciAobGV0IGUgPSAwOyBlIDwgcy5sZW5ndGg7IGUgKz0gMikgXy5wdXNoKF9fUFJJVkFURV9maWVsZFBhdGhGcm9tQXJndW1lbnQkMSh0LCBzW2VdKSksIFxuICAgIGEucHVzaChzW2UgKyAxXSk7XG4gICAgY29uc3QgdSA9IFtdLCBjID0gT2JqZWN0VmFsdWUuZW1wdHkoKTtcbiAgICAvLyBXZSBpdGVyYXRlIGluIHJldmVyc2Ugb3JkZXIgdG8gcGljayB0aGUgbGFzdCB2YWx1ZSBmb3IgYSBmaWVsZCBpZiB0aGVcbiAgICAvLyB1c2VyIHNwZWNpZmllZCB0aGUgZmllbGQgbXVsdGlwbGUgdGltZXMuXG4gICAgZm9yIChsZXQgZSA9IF8ubGVuZ3RoIC0gMTsgZSA+PSAwOyAtLWUpIGlmICghX19QUklWQVRFX2ZpZWxkTWFza0NvbnRhaW5zKHUsIF9bZV0pKSB7XG4gICAgICAgIGNvbnN0IHQgPSBfW2VdO1xuICAgICAgICBsZXQgbiA9IGFbZV07XG4gICAgICAgIC8vIEZvciBDb21wYXQgdHlwZXMsIHdlIGhhdmUgdG8gXCJleHRyYWN0XCIgdGhlIHVuZGVybHlpbmcgdHlwZXMgYmVmb3JlXG4gICAgICAgIC8vIHBlcmZvcm1pbmcgdmFsaWRhdGlvbi5cbiAgICAgICAgICAgICAgICBuID0gZ2V0TW9kdWxhckluc3RhbmNlKG4pO1xuICAgICAgICBjb25zdCByID0gby5SdSh0KTtcbiAgICAgICAgaWYgKG4gaW5zdGFuY2VvZiBfX1BSSVZBVEVfRGVsZXRlRmllbGRWYWx1ZUltcGwpIFxuICAgICAgICAvLyBBZGQgaXQgdG8gdGhlIGZpZWxkIG1hc2ssIGJ1dCBkb24ndCBhZGQgYW55dGhpbmcgdG8gdXBkYXRlRGF0YS5cbiAgICAgICAgdS5wdXNoKHQpOyBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBfX1BSSVZBVEVfcGFyc2VEYXRhKG4sIHIpO1xuICAgICAgICAgICAgbnVsbCAhPSBlICYmICh1LnB1c2godCksIGMuc2V0KHQsIGUpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBsID0gbmV3IEZpZWxkTWFzayh1KTtcbiAgICByZXR1cm4gbmV3IFBhcnNlZFVwZGF0ZURhdGEoYywgbCwgby5maWVsZFRyYW5zZm9ybXMpO1xufVxuXG4vKipcbiAqIFBhcnNlIGEgXCJxdWVyeSB2YWx1ZVwiIChlLmcuIHZhbHVlIGluIGEgd2hlcmUgZmlsdGVyIG9yIGEgdmFsdWUgaW4gYSBjdXJzb3JcbiAqIGJvdW5kKS5cbiAqXG4gKiBAcGFyYW0gYWxsb3dBcnJheXMgLSBXaGV0aGVyIHRoZSBxdWVyeSB2YWx1ZSBpcyBhbiBhcnJheSB0aGF0IG1heSBkaXJlY3RseVxuICogY29udGFpbiBhZGRpdGlvbmFsIGFycmF5cyAoZS5nLiB0aGUgb3BlcmFuZCBvZiBhbiBgaW5gIHF1ZXJ5KS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfcGFyc2VRdWVyeVZhbHVlKGUsIHQsIG4sIHIgPSAhMSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfcGFyc2VEYXRhKG4sIGUucHUociA/IDQgLyogVXNlckRhdGFTb3VyY2UuQXJyYXlBcmd1bWVudCAqLyA6IDMgLyogVXNlckRhdGFTb3VyY2UuQXJndW1lbnQgKi8gLCB0KSk7XG59XG5cbi8qKlxuICogUGFyc2VzIHVzZXIgZGF0YSB0byBQcm90b2J1ZiBWYWx1ZXMuXG4gKlxuICogQHBhcmFtIGlucHV0IC0gRGF0YSB0byBiZSBwYXJzZWQuXG4gKiBAcGFyYW0gY29udGV4dCAtIEEgY29udGV4dCBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBjdXJyZW50IHBhdGggYmVpbmcgcGFyc2VkLFxuICogdGhlIHNvdXJjZSBvZiB0aGUgZGF0YSBiZWluZyBwYXJzZWQsIGV0Yy5cbiAqIEByZXR1cm5zIFRoZSBwYXJzZWQgdmFsdWUsIG9yIG51bGwgaWYgdGhlIHZhbHVlIHdhcyBhIEZpZWxkVmFsdWUgc2VudGluZWxcbiAqIHRoYXQgc2hvdWxkIG5vdCBiZSBpbmNsdWRlZCBpbiB0aGUgcmVzdWx0aW5nIHBhcnNlZCBkYXRhLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9wYXJzZURhdGEoZSwgdCkge1xuICAgIGlmIChfX1BSSVZBVEVfbG9va3NMaWtlSnNvbk9iamVjdChcbiAgICAvLyBVbndyYXAgdGhlIEFQSSB0eXBlIGZyb20gdGhlIENvbXBhdCBTREsuIFRoaXMgd2lsbCByZXR1cm4gdGhlIEFQSSB0eXBlXG4gICAgLy8gZnJvbSBmaXJlc3RvcmUtZXhwLlxuICAgIGUgPSBnZXRNb2R1bGFySW5zdGFuY2UoZSkpKSByZXR1cm4gX19QUklWQVRFX3ZhbGlkYXRlUGxhaW5PYmplY3QoXCJVbnN1cHBvcnRlZCBmaWVsZCB2YWx1ZTpcIiwgdCwgZSksIFxuICAgIF9fUFJJVkFURV9wYXJzZU9iamVjdChlLCB0KTtcbiAgICBpZiAoZSBpbnN0YW5jZW9mIEZpZWxkVmFsdWUpIFxuICAgIC8vIEZpZWxkVmFsdWVzIHVzdWFsbHkgcGFyc2UgaW50byB0cmFuc2Zvcm1zIChleGNlcHQgZGVsZXRlRmllbGQoKSlcbiAgICAvLyBpbiB3aGljaCBjYXNlIHdlIGRvIG5vdCB3YW50IHRvIGluY2x1ZGUgdGhpcyBmaWVsZCBpbiBvdXIgcGFyc2VkIGRhdGFcbiAgICAvLyAoYXMgZG9pbmcgc28gd2lsbCBvdmVyd3JpdGUgdGhlIGZpZWxkIGRpcmVjdGx5IHByaW9yIHRvIHRoZSB0cmFuc2Zvcm1cbiAgICAvLyB0cnlpbmcgdG8gdHJhbnNmb3JtIGl0KS4gU28gd2UgZG9uJ3QgYWRkIHRoaXMgbG9jYXRpb24gdG9cbiAgICAvLyBjb250ZXh0LmZpZWxkTWFzayBhbmQgd2UgcmV0dXJuIG51bGwgYXMgb3VyIHBhcnNpbmcgcmVzdWx0LlxuICAgIC8qKlxuICogXCJQYXJzZXNcIiB0aGUgcHJvdmlkZWQgRmllbGRWYWx1ZUltcGwsIGFkZGluZyBhbnkgbmVjZXNzYXJ5IHRyYW5zZm9ybXMgdG9cbiAqIGNvbnRleHQuZmllbGRUcmFuc2Zvcm1zLlxuICovXG4gICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9wYXJzZVNlbnRpbmVsRmllbGRWYWx1ZShlLCB0KSB7XG4gICAgICAgIC8vIFNlbnRpbmVscyBhcmUgb25seSBzdXBwb3J0ZWQgd2l0aCB3cml0ZXMsIGFuZCBub3Qgd2l0aGluIGFycmF5cy5cbiAgICAgICAgaWYgKCFfX1BSSVZBVEVfaXNXcml0ZSh0Lkl1KSkgdGhyb3cgdC5tdShgJHtlLl9tZXRob2ROYW1lfSgpIGNhbiBvbmx5IGJlIHVzZWQgd2l0aCB1cGRhdGUoKSBhbmQgc2V0KClgKTtcbiAgICAgICAgaWYgKCF0LnBhdGgpIHRocm93IHQubXUoYCR7ZS5fbWV0aG9kTmFtZX0oKSBpcyBub3QgY3VycmVudGx5IHN1cHBvcnRlZCBpbnNpZGUgYXJyYXlzYCk7XG4gICAgICAgIGNvbnN0IG4gPSBlLl90b0ZpZWxkVHJhbnNmb3JtKHQpO1xuICAgICAgICBuICYmIHQuZmllbGRUcmFuc2Zvcm1zLnB1c2gobik7XG4gICAgfVxuICAgIC8qKlxuICogSGVscGVyIHRvIHBhcnNlIGEgc2NhbGFyIHZhbHVlIChpLmUuIG5vdCBhbiBPYmplY3QsIEFycmF5LCBvciBGaWVsZFZhbHVlKVxuICpcbiAqIEByZXR1cm5zIFRoZSBwYXJzZWQgdmFsdWVcbiAqLyAoZSwgdCksIG51bGw7XG4gICAgaWYgKHZvaWQgMCA9PT0gZSAmJiB0Lmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMpIFxuICAgIC8vIElmIHRoZSBpbnB1dCBpcyB1bmRlZmluZWQgaXQgY2FuIG5ldmVyIHBhcnRpY2lwYXRlIGluIHRoZSBmaWVsZE1hc2ssIHNvXG4gICAgLy8gZG9uJ3QgaGFuZGxlIHRoaXMgYmVsb3cuIElmIGBpZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzYCBpcyBmYWxzZSxcbiAgICAvLyBgcGFyc2VTY2FsYXJWYWx1ZWAgd2lsbCByZWplY3QgYW4gdW5kZWZpbmVkIHZhbHVlLlxuICAgIHJldHVybiBudWxsO1xuICAgIGlmIChcbiAgICAvLyBJZiBjb250ZXh0LnBhdGggaXMgbnVsbCB3ZSBhcmUgaW5zaWRlIGFuIGFycmF5IGFuZCB3ZSBkb24ndCBzdXBwb3J0XG4gICAgLy8gZmllbGQgbWFzayBwYXRocyBtb3JlIGdyYW51bGFyIHRoYW4gdGhlIHRvcC1sZXZlbCBhcnJheS5cbiAgICB0LnBhdGggJiYgdC5maWVsZE1hc2sucHVzaCh0LnBhdGgpLCBlIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgLy8gVE9ETyhiLzM0ODcxMTMxKTogSW5jbHVkZSB0aGUgcGF0aCBjb250YWluaW5nIHRoZSBhcnJheSBpbiB0aGUgZXJyb3JcbiAgICAgICAgLy8gbWVzc2FnZS5cbiAgICAgICAgLy8gSW4gdGhlIGNhc2Ugb2YgSU4gcXVlcmllcywgdGhlIHBhcnNlZCBkYXRhIGlzIGFuIGFycmF5IChyZXByZXNlbnRpbmdcbiAgICAgICAgLy8gdGhlIHNldCBvZiB2YWx1ZXMgdG8gYmUgaW5jbHVkZWQgZm9yIHRoZSBJTiBxdWVyeSkgdGhhdCBtYXkgZGlyZWN0bHlcbiAgICAgICAgLy8gY29udGFpbiBhZGRpdGlvbmFsIGFycmF5cyAoZWFjaCByZXByZXNlbnRpbmcgYW4gaW5kaXZpZHVhbCBmaWVsZFxuICAgICAgICAvLyB2YWx1ZSksIHNvIHdlIGRpc2FibGUgdGhpcyB2YWxpZGF0aW9uLlxuICAgICAgICBpZiAodC5zZXR0aW5ncy5kdSAmJiA0IC8qIFVzZXJEYXRhU291cmNlLkFycmF5QXJndW1lbnQgKi8gIT09IHQuSXUpIHRocm93IHQubXUoXCJOZXN0ZWQgYXJyYXlzIGFyZSBub3Qgc3VwcG9ydGVkXCIpO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX3BhcnNlQXJyYXkoZSwgdCkge1xuICAgICAgICAgICAgY29uc3QgbiA9IFtdO1xuICAgICAgICAgICAgbGV0IHIgPSAwO1xuICAgICAgICAgICAgZm9yIChjb25zdCBpIG9mIGUpIHtcbiAgICAgICAgICAgICAgICBsZXQgZSA9IF9fUFJJVkFURV9wYXJzZURhdGEoaSwgdC5WdShyKSk7XG4gICAgICAgICAgICAgICAgbnVsbCA9PSBlICYmIChcbiAgICAgICAgICAgICAgICAvLyBKdXN0IGluY2x1ZGUgbnVsbHMgaW4gdGhlIGFycmF5IGZvciBmaWVsZHMgYmVpbmcgcmVwbGFjZWQgd2l0aCBhXG4gICAgICAgICAgICAgICAgLy8gc2VudGluZWwuXG4gICAgICAgICAgICAgICAgZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgbnVsbFZhbHVlOiBcIk5VTExfVkFMVUVcIlxuICAgICAgICAgICAgICAgIH0pLCBuLnB1c2goZSksIHIrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgYXJyYXlWYWx1ZToge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZXM6IG5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KGUsIHQpO1xuICAgIH1cbiAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX3BhcnNlU2NhbGFyVmFsdWUoZSwgdCkge1xuICAgICAgICBpZiAobnVsbCA9PT0gKGUgPSBnZXRNb2R1bGFySW5zdGFuY2UoZSkpKSByZXR1cm4ge1xuICAgICAgICAgICAgbnVsbFZhbHVlOiBcIk5VTExfVkFMVUVcIlxuICAgICAgICB9O1xuICAgICAgICBpZiAoXCJudW1iZXJcIiA9PSB0eXBlb2YgZSkgcmV0dXJuIHRvTnVtYmVyKHQuc2VyaWFsaXplciwgZSk7XG4gICAgICAgIGlmIChcImJvb2xlYW5cIiA9PSB0eXBlb2YgZSkgcmV0dXJuIHtcbiAgICAgICAgICAgIGJvb2xlYW5WYWx1ZTogZVxuICAgICAgICB9O1xuICAgICAgICBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgZSkgcmV0dXJuIHtcbiAgICAgICAgICAgIHN0cmluZ1ZhbHVlOiBlXG4gICAgICAgIH07XG4gICAgICAgIGlmIChlIGluc3RhbmNlb2YgRGF0ZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IFRpbWVzdGFtcC5mcm9tRGF0ZShlKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdGltZXN0YW1wVmFsdWU6IHRvVGltZXN0YW1wKHQuc2VyaWFsaXplciwgbilcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBUaW1lc3RhbXApIHtcbiAgICAgICAgICAgIC8vIEZpcmVzdG9yZSBiYWNrZW5kIHRydW5jYXRlcyBwcmVjaXNpb24gZG93biB0byBtaWNyb3NlY29uZHMuIFRvIGVuc3VyZVxuICAgICAgICAgICAgLy8gb2ZmbGluZSBtb2RlIHdvcmtzIHRoZSBzYW1lIHdpdGggcmVnYXJkcyB0byB0cnVuY2F0aW9uLCBwZXJmb3JtIHRoZVxuICAgICAgICAgICAgLy8gdHJ1bmNhdGlvbiBpbW1lZGlhdGVseSB3aXRob3V0IHdhaXRpbmcgZm9yIHRoZSBiYWNrZW5kIHRvIGRvIHRoYXQuXG4gICAgICAgICAgICBjb25zdCBuID0gbmV3IFRpbWVzdGFtcChlLnNlY29uZHMsIDFlMyAqIE1hdGguZmxvb3IoZS5uYW5vc2Vjb25kcyAvIDFlMykpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXBWYWx1ZTogdG9UaW1lc3RhbXAodC5zZXJpYWxpemVyLCBuKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEdlb1BvaW50KSByZXR1cm4ge1xuICAgICAgICAgICAgZ2VvUG9pbnRWYWx1ZToge1xuICAgICAgICAgICAgICAgIGxhdGl0dWRlOiBlLmxhdGl0dWRlLFxuICAgICAgICAgICAgICAgIGxvbmdpdHVkZTogZS5sb25naXR1ZGVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBCeXRlcykgcmV0dXJuIHtcbiAgICAgICAgICAgIGJ5dGVzVmFsdWU6IF9fUFJJVkFURV90b0J5dGVzKHQuc2VyaWFsaXplciwgZS5fYnl0ZVN0cmluZylcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBEb2N1bWVudFJlZmVyZW5jZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQuZGF0YWJhc2VJZCwgciA9IGUuZmlyZXN0b3JlLl9kYXRhYmFzZUlkO1xuICAgICAgICAgICAgaWYgKCFyLmlzRXF1YWwobikpIHRocm93IHQubXUoYERvY3VtZW50IHJlZmVyZW5jZSBpcyBmb3IgZGF0YWJhc2UgJHtyLnByb2plY3RJZH0vJHtyLmRhdGFiYXNlfSBidXQgc2hvdWxkIGJlIGZvciBkYXRhYmFzZSAke24ucHJvamVjdElkfS8ke24uZGF0YWJhc2V9YCk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHJlZmVyZW5jZVZhbHVlOiBfX1BSSVZBVEVfdG9SZXNvdXJjZU5hbWUoZS5maXJlc3RvcmUuX2RhdGFiYXNlSWQgfHwgdC5kYXRhYmFzZUlkLCBlLl9rZXkucGF0aClcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgdC5tdShgVW5zdXBwb3J0ZWQgZmllbGQgdmFsdWU6ICR7X19QUklWQVRFX3ZhbHVlRGVzY3JpcHRpb24oZSl9YCk7XG4gICAgfVxuICAgIC8qKlxuICogQ2hlY2tzIHdoZXRoZXIgYW4gb2JqZWN0IGxvb2tzIGxpa2UgYSBKU09OIG9iamVjdCB0aGF0IHNob3VsZCBiZSBjb252ZXJ0ZWRcbiAqIGludG8gYSBzdHJ1Y3QuIE5vcm1hbCBjbGFzcy9wcm90b3R5cGUgaW5zdGFuY2VzIGFyZSBjb25zaWRlcmVkIHRvIGxvb2sgbGlrZVxuICogSlNPTiBvYmplY3RzIHNpbmNlIHRoZXkgc2hvdWxkIGJlIGNvbnZlcnRlZCB0byBhIHN0cnVjdCB2YWx1ZS4gQXJyYXlzLCBEYXRlcyxcbiAqIEdlb1BvaW50cywgZXRjLiBhcmUgbm90IGNvbnNpZGVyZWQgdG8gbG9vayBsaWtlIEpTT04gb2JqZWN0cyBzaW5jZSB0aGV5IG1hcFxuICogdG8gc3BlY2lmaWMgRmllbGRWYWx1ZSB0eXBlcyBvdGhlciB0aGFuIE9iamVjdFZhbHVlLlxuICovIChlLCB0KTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3BhcnNlT2JqZWN0KGUsIHQpIHtcbiAgICBjb25zdCBuID0ge307XG4gICAgcmV0dXJuIGlzRW1wdHkoZSkgPyBcbiAgICAvLyBJZiB3ZSBlbmNvdW50ZXIgYW4gZW1wdHkgb2JqZWN0LCB3ZSBleHBsaWNpdGx5IGFkZCBpdCB0byB0aGUgdXBkYXRlXG4gICAgLy8gbWFzayB0byBlbnN1cmUgdGhhdCB0aGUgc2VydmVyIGNyZWF0ZXMgYSBtYXAgZW50cnkuXG4gICAgdC5wYXRoICYmIHQucGF0aC5sZW5ndGggPiAwICYmIHQuZmllbGRNYXNrLnB1c2godC5wYXRoKSA6IGZvckVhY2goZSwgKChlLCByKSA9PiB7XG4gICAgICAgIGNvbnN0IGkgPSBfX1BSSVZBVEVfcGFyc2VEYXRhKHIsIHQuRXUoZSkpO1xuICAgICAgICBudWxsICE9IGkgJiYgKG5bZV0gPSBpKTtcbiAgICB9KSksIHtcbiAgICAgICAgbWFwVmFsdWU6IHtcbiAgICAgICAgICAgIGZpZWxkczogblxuICAgICAgICB9XG4gICAgfTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX2xvb2tzTGlrZUpzb25PYmplY3QoZSkge1xuICAgIHJldHVybiAhKFwib2JqZWN0XCIgIT0gdHlwZW9mIGUgfHwgbnVsbCA9PT0gZSB8fCBlIGluc3RhbmNlb2YgQXJyYXkgfHwgZSBpbnN0YW5jZW9mIERhdGUgfHwgZSBpbnN0YW5jZW9mIFRpbWVzdGFtcCB8fCBlIGluc3RhbmNlb2YgR2VvUG9pbnQgfHwgZSBpbnN0YW5jZW9mIEJ5dGVzIHx8IGUgaW5zdGFuY2VvZiBEb2N1bWVudFJlZmVyZW5jZSB8fCBlIGluc3RhbmNlb2YgRmllbGRWYWx1ZSk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV92YWxpZGF0ZVBsYWluT2JqZWN0KGUsIHQsIG4pIHtcbiAgICBpZiAoIV9fUFJJVkFURV9sb29rc0xpa2VKc29uT2JqZWN0KG4pIHx8ICFmdW5jdGlvbiBfX1BSSVZBVEVfaXNQbGFpbk9iamVjdChlKSB7XG4gICAgICAgIHJldHVybiBcIm9iamVjdFwiID09IHR5cGVvZiBlICYmIG51bGwgIT09IGUgJiYgKE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSA9PT0gT2JqZWN0LnByb3RvdHlwZSB8fCBudWxsID09PSBPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpO1xuICAgIH0obikpIHtcbiAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV92YWx1ZURlc2NyaXB0aW9uKG4pO1xuICAgICAgICB0aHJvdyBcImFuIG9iamVjdFwiID09PSByID8gdC5tdShlICsgXCIgYSBjdXN0b20gb2JqZWN0XCIpIDogdC5tdShlICsgXCIgXCIgKyByKTtcbiAgICB9XG59XG5cbi8qKlxuICogSGVscGVyIHRoYXQgY2FsbHMgZnJvbURvdFNlcGFyYXRlZFN0cmluZygpIGJ1dCB3cmFwcyBhbnkgZXJyb3IgdGhyb3duLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9maWVsZFBhdGhGcm9tQXJndW1lbnQkMShlLCB0LCBuKSB7XG4gICAgaWYgKChcbiAgICAvLyBJZiByZXF1aXJlZCwgcmVwbGFjZSB0aGUgRmllbGRQYXRoIENvbXBhdCBjbGFzcyB3aXRoIHdpdGggdGhlIGZpcmVzdG9yZS1leHBcbiAgICAvLyBGaWVsZFBhdGguXG4gICAgdCA9IGdldE1vZHVsYXJJbnN0YW5jZSh0KSkgaW5zdGFuY2VvZiBGaWVsZFBhdGgpIHJldHVybiB0Ll9pbnRlcm5hbFBhdGg7XG4gICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIHQpIHJldHVybiBfX1BSSVZBVEVfZmllbGRQYXRoRnJvbURvdFNlcGFyYXRlZFN0cmluZyhlLCB0KTtcbiAgICB0aHJvdyBfX1BSSVZBVEVfY3JlYXRlRXJyb3IoXCJGaWVsZCBwYXRoIGFyZ3VtZW50cyBtdXN0IGJlIG9mIHR5cGUgc3RyaW5nIG9yIFwiLCBlLCBcbiAgICAvKiBoYXNDb252ZXJ0ZXI9ICovICExLCBcbiAgICAvKiBwYXRoPSAqLyB2b2lkIDAsIG4pO1xufVxuXG4vKipcbiAqIE1hdGNoZXMgYW55IGNoYXJhY3RlcnMgaW4gYSBmaWVsZCBwYXRoIHN0cmluZyB0aGF0IGFyZSByZXNlcnZlZC5cbiAqLyBjb25zdCBwZSA9IG5ldyBSZWdFeHAoXCJbflxcXFwqL1xcXFxbXFxcXF1dXCIpO1xuXG4vKipcbiAqIFdyYXBzIGZyb21Eb3RTZXBhcmF0ZWRTdHJpbmcgd2l0aCBhbiBlcnJvciBtZXNzYWdlIGFib3V0IHRoZSBtZXRob2QgdGhhdFxuICogd2FzIHRocm93bi5cbiAqIEBwYXJhbSBtZXRob2ROYW1lIC0gVGhlIHB1YmxpY2x5IHZpc2libGUgbWV0aG9kIG5hbWVcbiAqIEBwYXJhbSBwYXRoIC0gVGhlIGRvdC1zZXBhcmF0ZWQgc3RyaW5nIGZvcm0gb2YgYSBmaWVsZCBwYXRoIHdoaWNoIHdpbGwgYmVcbiAqIHNwbGl0IG9uIGRvdHMuXG4gKiBAcGFyYW0gdGFyZ2V0RG9jIC0gVGhlIGRvY3VtZW50IGFnYWluc3Qgd2hpY2ggdGhlIGZpZWxkIHBhdGggd2lsbCBiZVxuICogZXZhbHVhdGVkLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9maWVsZFBhdGhGcm9tRG90U2VwYXJhdGVkU3RyaW5nKGUsIHQsIG4pIHtcbiAgICBpZiAodC5zZWFyY2gocGUpID49IDApIHRocm93IF9fUFJJVkFURV9jcmVhdGVFcnJvcihgSW52YWxpZCBmaWVsZCBwYXRoICgke3R9KS4gUGF0aHMgbXVzdCBub3QgY29udGFpbiAnficsICcqJywgJy8nLCAnWycsIG9yICddJ2AsIGUsIFxuICAgIC8qIGhhc0NvbnZlcnRlcj0gKi8gITEsIFxuICAgIC8qIHBhdGg9ICovIHZvaWQgMCwgbik7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIG5ldyBGaWVsZFBhdGgoLi4udC5zcGxpdChcIi5cIikpLl9pbnRlcm5hbFBhdGg7XG4gICAgfSBjYXRjaCAocikge1xuICAgICAgICB0aHJvdyBfX1BSSVZBVEVfY3JlYXRlRXJyb3IoYEludmFsaWQgZmllbGQgcGF0aCAoJHt0fSkuIFBhdGhzIG11c3Qgbm90IGJlIGVtcHR5LCBiZWdpbiB3aXRoICcuJywgZW5kIHdpdGggJy4nLCBvciBjb250YWluICcuLidgLCBlLCBcbiAgICAgICAgLyogaGFzQ29udmVydGVyPSAqLyAhMSwgXG4gICAgICAgIC8qIHBhdGg9ICovIHZvaWQgMCwgbik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfY3JlYXRlRXJyb3IoZSwgdCwgbiwgciwgaSkge1xuICAgIGNvbnN0IHMgPSByICYmICFyLmlzRW1wdHkoKSwgbyA9IHZvaWQgMCAhPT0gaTtcbiAgICBsZXQgXyA9IGBGdW5jdGlvbiAke3R9KCkgY2FsbGVkIHdpdGggaW52YWxpZCBkYXRhYDtcbiAgICBuICYmIChfICs9IFwiICh2aWEgYHRvRmlyZXN0b3JlKClgKVwiKSwgXyArPSBcIi4gXCI7XG4gICAgbGV0IGEgPSBcIlwiO1xuICAgIHJldHVybiAocyB8fCBvKSAmJiAoYSArPSBcIiAoZm91bmRcIiwgcyAmJiAoYSArPSBgIGluIGZpZWxkICR7cn1gKSwgbyAmJiAoYSArPSBgIGluIGRvY3VtZW50ICR7aX1gKSwgXG4gICAgYSArPSBcIilcIiksIG5ldyBGaXJlc3RvcmVFcnJvcihELklOVkFMSURfQVJHVU1FTlQsIF8gKyBlICsgYSk7XG59XG5cbi8qKiBDaGVja3MgYGhheXN0YWNrYCBpZiBGaWVsZFBhdGggYG5lZWRsZWAgaXMgcHJlc2VudC4gUnVucyBpbiBPKG4pLiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfZmllbGRNYXNrQ29udGFpbnMoZSwgdCkge1xuICAgIHJldHVybiBlLnNvbWUoKGUgPT4gZS5pc0VxdWFsKHQpKSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgYERvY3VtZW50U25hcHNob3RgIGNvbnRhaW5zIGRhdGEgcmVhZCBmcm9tIGEgZG9jdW1lbnQgaW4geW91ciBGaXJlc3RvcmVcbiAqIGRhdGFiYXNlLiBUaGUgZGF0YSBjYW4gYmUgZXh0cmFjdGVkIHdpdGggYC5kYXRhKClgIG9yIGAuZ2V0KDxmaWVsZD4pYCB0b1xuICogZ2V0IGEgc3BlY2lmaWMgZmllbGQuXG4gKlxuICogRm9yIGEgYERvY3VtZW50U25hcHNob3RgIHRoYXQgcG9pbnRzIHRvIGEgbm9uLWV4aXN0aW5nIGRvY3VtZW50LCBhbnkgZGF0YVxuICogYWNjZXNzIHdpbGwgcmV0dXJuICd1bmRlZmluZWQnLiBZb3UgY2FuIHVzZSB0aGUgYGV4aXN0cygpYCBtZXRob2QgdG9cbiAqIGV4cGxpY2l0bHkgdmVyaWZ5IGEgZG9jdW1lbnQncyBleGlzdGVuY2UuXG4gKi8gY2xhc3MgRG9jdW1lbnRTbmFwc2hvdCQxIHtcbiAgICAvLyBOb3RlOiBUaGlzIGNsYXNzIGlzIHN0cmlwcGVkIGRvd24gdmVyc2lvbiBvZiB0aGUgRG9jdW1lbnRTbmFwc2hvdCBpblxuICAgIC8vIHRoZSBsZWdhY3kgU0RLLiBUaGUgY2hhbmdlcyBhcmU6XG4gICAgLy8gLSBObyBzdXBwb3J0IGZvciBTbmFwc2hvdE1ldGFkYXRhLlxuICAgIC8vIC0gTm8gc3VwcG9ydCBmb3IgU25hcHNob3RPcHRpb25zLlxuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yIHByb3RlY3RlZCAqL1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4sIHIsIGkpIHtcbiAgICAgICAgdGhpcy5fZmlyZXN0b3JlID0gZSwgdGhpcy5fdXNlckRhdGFXcml0ZXIgPSB0LCB0aGlzLl9rZXkgPSBuLCB0aGlzLl9kb2N1bWVudCA9IHIsIFxuICAgICAgICB0aGlzLl9jb252ZXJ0ZXIgPSBpO1xuICAgIH1cbiAgICAvKiogUHJvcGVydHkgb2YgdGhlIGBEb2N1bWVudFNuYXBzaG90YCB0aGF0IHByb3ZpZGVzIHRoZSBkb2N1bWVudCdzIElELiAqLyAgICBnZXQgaWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9rZXkucGF0aC5sYXN0U2VnbWVudCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgYERvY3VtZW50UmVmZXJlbmNlYCBmb3IgdGhlIGRvY3VtZW50IGluY2x1ZGVkIGluIHRoZSBgRG9jdW1lbnRTbmFwc2hvdGAuXG4gICAgICovICAgIGdldCByZWYoKSB7XG4gICAgICAgIHJldHVybiBuZXcgRG9jdW1lbnRSZWZlcmVuY2UodGhpcy5fZmlyZXN0b3JlLCB0aGlzLl9jb252ZXJ0ZXIsIHRoaXMuX2tleSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNpZ25hbHMgd2hldGhlciBvciBub3QgdGhlIGRvY3VtZW50IGF0IHRoZSBzbmFwc2hvdCdzIGxvY2F0aW9uIGV4aXN0cy5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHRydWUgaWYgdGhlIGRvY3VtZW50IGV4aXN0cy5cbiAgICAgKi8gICAgZXhpc3RzKCkge1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gdGhpcy5fZG9jdW1lbnQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyBhbGwgZmllbGRzIGluIHRoZSBkb2N1bWVudCBhcyBhbiBgT2JqZWN0YC4gUmV0dXJucyBgdW5kZWZpbmVkYCBpZlxuICAgICAqIHRoZSBkb2N1bWVudCBkb2Vzbid0IGV4aXN0LlxuICAgICAqXG4gICAgICogQHJldHVybnMgQW4gYE9iamVjdGAgY29udGFpbmluZyBhbGwgZmllbGRzIGluIHRoZSBkb2N1bWVudCBvciBgdW5kZWZpbmVkYFxuICAgICAqIGlmIHRoZSBkb2N1bWVudCBkb2Vzbid0IGV4aXN0LlxuICAgICAqLyAgICBkYXRhKCkge1xuICAgICAgICBpZiAodGhpcy5fZG9jdW1lbnQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9jb252ZXJ0ZXIpIHtcbiAgICAgICAgICAgICAgICAvLyBXZSBvbmx5IHdhbnQgdG8gdXNlIHRoZSBjb252ZXJ0ZXIgYW5kIGNyZWF0ZSBhIG5ldyBEb2N1bWVudFNuYXBzaG90XG4gICAgICAgICAgICAgICAgLy8gaWYgYSBjb252ZXJ0ZXIgaGFzIGJlZW4gcHJvdmlkZWQuXG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IG5ldyBRdWVyeURvY3VtZW50U25hcHNob3QkMSh0aGlzLl9maXJlc3RvcmUsIHRoaXMuX3VzZXJEYXRhV3JpdGVyLCB0aGlzLl9rZXksIHRoaXMuX2RvY3VtZW50LCBcbiAgICAgICAgICAgICAgICAvKiBjb252ZXJ0ZXI9ICovIG51bGwpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9jb252ZXJ0ZXIuZnJvbUZpcmVzdG9yZShlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLl91c2VyRGF0YVdyaXRlci5jb252ZXJ0VmFsdWUodGhpcy5fZG9jdW1lbnQuZGF0YS52YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIHRoZSBmaWVsZCBzcGVjaWZpZWQgYnkgYGZpZWxkUGF0aGAuIFJldHVybnMgYHVuZGVmaW5lZGAgaWYgdGhlXG4gICAgICogZG9jdW1lbnQgb3IgZmllbGQgZG9lc24ndCBleGlzdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmaWVsZFBhdGggLSBUaGUgcGF0aCAoZm9yIGV4YW1wbGUgJ2Zvbycgb3IgJ2Zvby5iYXInKSB0byBhIHNwZWNpZmljXG4gICAgICogZmllbGQuXG4gICAgICogQHJldHVybnMgVGhlIGRhdGEgYXQgdGhlIHNwZWNpZmllZCBmaWVsZCBsb2NhdGlvbiBvciB1bmRlZmluZWQgaWYgbm8gc3VjaFxuICAgICAqIGZpZWxkIGV4aXN0cyBpbiB0aGUgZG9jdW1lbnQuXG4gICAgICovXG4gICAgLy8gV2UgYXJlIHVzaW5nIGBhbnlgIGhlcmUgdG8gYXZvaWQgYW4gZXhwbGljaXQgY2FzdCBieSBvdXIgdXNlcnMuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBnZXQoZSkge1xuICAgICAgICBpZiAodGhpcy5fZG9jdW1lbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLl9kb2N1bWVudC5kYXRhLmZpZWxkKF9fUFJJVkFURV9maWVsZFBhdGhGcm9tQXJndW1lbnQoXCJEb2N1bWVudFNuYXBzaG90LmdldFwiLCBlKSk7XG4gICAgICAgICAgICBpZiAobnVsbCAhPT0gdCkgcmV0dXJuIHRoaXMuX3VzZXJEYXRhV3JpdGVyLmNvbnZlcnRWYWx1ZSh0KTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyoqXG4gKiBBIGBRdWVyeURvY3VtZW50U25hcHNob3RgIGNvbnRhaW5zIGRhdGEgcmVhZCBmcm9tIGEgZG9jdW1lbnQgaW4geW91clxuICogRmlyZXN0b3JlIGRhdGFiYXNlIGFzIHBhcnQgb2YgYSBxdWVyeS4gVGhlIGRvY3VtZW50IGlzIGd1YXJhbnRlZWQgdG8gZXhpc3RcbiAqIGFuZCBpdHMgZGF0YSBjYW4gYmUgZXh0cmFjdGVkIHdpdGggYC5kYXRhKClgIG9yIGAuZ2V0KDxmaWVsZD4pYCB0byBnZXQgYVxuICogc3BlY2lmaWMgZmllbGQuXG4gKlxuICogQSBgUXVlcnlEb2N1bWVudFNuYXBzaG90YCBvZmZlcnMgdGhlIHNhbWUgQVBJIHN1cmZhY2UgYXMgYVxuICogYERvY3VtZW50U25hcHNob3RgLiBTaW5jZSBxdWVyeSByZXN1bHRzIGNvbnRhaW4gb25seSBleGlzdGluZyBkb2N1bWVudHMsIHRoZVxuICogYGV4aXN0c2AgcHJvcGVydHkgd2lsbCBhbHdheXMgYmUgdHJ1ZSBhbmQgYGRhdGEoKWAgd2lsbCBuZXZlciByZXR1cm5cbiAqICd1bmRlZmluZWQnLlxuICovIGNsYXNzIFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdCQxIGV4dGVuZHMgRG9jdW1lbnRTbmFwc2hvdCQxIHtcbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgYWxsIGZpZWxkcyBpbiB0aGUgZG9jdW1lbnQgYXMgYW4gYE9iamVjdGAuXG4gICAgICpcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAcmV0dXJucyBBbiBgT2JqZWN0YCBjb250YWluaW5nIGFsbCBmaWVsZHMgaW4gdGhlIGRvY3VtZW50LlxuICAgICAqL1xuICAgIGRhdGEoKSB7XG4gICAgICAgIHJldHVybiBzdXBlci5kYXRhKCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEhlbHBlciB0aGF0IGNhbGxzIGBmcm9tRG90U2VwYXJhdGVkU3RyaW5nKClgIGJ1dCB3cmFwcyBhbnkgZXJyb3IgdGhyb3duLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9maWVsZFBhdGhGcm9tQXJndW1lbnQoZSwgdCkge1xuICAgIHJldHVybiBcInN0cmluZ1wiID09IHR5cGVvZiB0ID8gX19QUklWQVRFX2ZpZWxkUGF0aEZyb21Eb3RTZXBhcmF0ZWRTdHJpbmcoZSwgdCkgOiB0IGluc3RhbmNlb2YgRmllbGRQYXRoID8gdC5faW50ZXJuYWxQYXRoIDogdC5fZGVsZWdhdGUuX2ludGVybmFsUGF0aDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gZnVuY3Rpb24gX19QUklWQVRFX3ZhbGlkYXRlSGFzRXhwbGljaXRPcmRlckJ5Rm9yTGltaXRUb0xhc3QoZSkge1xuICAgIGlmIChcIkxcIiAvKiBMaW1pdFR5cGUuTGFzdCAqLyA9PT0gZS5saW1pdFR5cGUgJiYgMCA9PT0gZS5leHBsaWNpdE9yZGVyQnkubGVuZ3RoKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5VTklNUExFTUVOVEVELCBcImxpbWl0VG9MYXN0KCkgcXVlcmllcyByZXF1aXJlIHNwZWNpZnlpbmcgYXQgbGVhc3Qgb25lIG9yZGVyQnkoKSBjbGF1c2VcIik7XG59XG5cbi8qKlxuICogQW4gYEFwcGxpYWJsZUNvbnN0cmFpbnRgIGlzIGFuIGFic3RyYWN0aW9uIG9mIGEgY29uc3RyYWludCB0aGF0IGNhbiBiZSBhcHBsaWVkXG4gKiB0byBhIEZpcmVzdG9yZSBxdWVyeS5cbiAqLyBjbGFzcyBBcHBsaWFibGVDb25zdHJhaW50IHt9XG5cbi8qKlxuICogQSBgUXVlcnlDb25zdHJhaW50YCBpcyB1c2VkIHRvIG5hcnJvdyB0aGUgc2V0IG9mIGRvY3VtZW50cyByZXR1cm5lZCBieSBhXG4gKiBGaXJlc3RvcmUgcXVlcnkuIGBRdWVyeUNvbnN0cmFpbnRgcyBhcmUgY3JlYXRlZCBieSBpbnZva2luZyB7QGxpbmsgd2hlcmV9LFxuICoge0BsaW5rIG9yZGVyQnl9LCB7QGxpbmsgKHN0YXJ0QXQ6MSl9LCB7QGxpbmsgKHN0YXJ0QWZ0ZXI6MSl9LCB7QGxpbmtcbiAqIChlbmRCZWZvcmU6MSl9LCB7QGxpbmsgKGVuZEF0OjEpfSwge0BsaW5rIGxpbWl0fSwge0BsaW5rIGxpbWl0VG9MYXN0fSBhbmRcbiAqIGNhbiB0aGVuIGJlIHBhc3NlZCB0byB7QGxpbmsgKHF1ZXJ5OjEpfSB0byBjcmVhdGUgYSBuZXcgcXVlcnkgaW5zdGFuY2UgdGhhdFxuICogYWxzbyBjb250YWlucyB0aGlzIGBRdWVyeUNvbnN0cmFpbnRgLlxuICovIGNsYXNzIFF1ZXJ5Q29uc3RyYWludCBleHRlbmRzIEFwcGxpYWJsZUNvbnN0cmFpbnQge31cblxuZnVuY3Rpb24gcXVlcnkoZSwgdCwgLi4ubikge1xuICAgIGxldCByID0gW107XG4gICAgdCBpbnN0YW5jZW9mIEFwcGxpYWJsZUNvbnN0cmFpbnQgJiYgci5wdXNoKHQpLCByID0gci5jb25jYXQobiksIGZ1bmN0aW9uIF9fUFJJVkFURV92YWxpZGF0ZVF1ZXJ5Q29uc3RyYWludEFycmF5KGUpIHtcbiAgICAgICAgY29uc3QgdCA9IGUuZmlsdGVyKChlID0+IGUgaW5zdGFuY2VvZiBRdWVyeUNvbXBvc2l0ZUZpbHRlckNvbnN0cmFpbnQpKS5sZW5ndGgsIG4gPSBlLmZpbHRlcigoZSA9PiBlIGluc3RhbmNlb2YgUXVlcnlGaWVsZEZpbHRlckNvbnN0cmFpbnQpKS5sZW5ndGg7XG4gICAgICAgIGlmICh0ID4gMSB8fCB0ID4gMCAmJiBuID4gMCkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgXCJJbnZhbGlkUXVlcnkuIFdoZW4gdXNpbmcgY29tcG9zaXRlIGZpbHRlcnMsIHlvdSBjYW5ub3QgdXNlIG1vcmUgdGhhbiBvbmUgZmlsdGVyIGF0IHRoZSB0b3AgbGV2ZWwuIENvbnNpZGVyIG5lc3RpbmcgdGhlIG11bHRpcGxlIGZpbHRlcnMgd2l0aGluIGFuIGBhbmQoLi4uKWAgc3RhdGVtZW50LiBGb3IgZXhhbXBsZTogY2hhbmdlIGBxdWVyeShxdWVyeSwgd2hlcmUoLi4uKSwgb3IoLi4uKSlgIHRvIGBxdWVyeShxdWVyeSwgYW5kKHdoZXJlKC4uLiksIG9yKC4uLikpKWAuXCIpO1xuICAgIH1cbiAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuICAgIC8qKlxuICogQ29udmVydHMgRmlyZXN0b3JlJ3MgaW50ZXJuYWwgdHlwZXMgdG8gdGhlIEphdmFTY3JpcHQgdHlwZXMgdGhhdCB3ZSBleHBvc2VcbiAqIHRvIHRoZSB1c2VyLlxuICpcbiAqIEBpbnRlcm5hbFxuICovIChyKTtcbiAgICBmb3IgKGNvbnN0IHQgb2YgcikgZSA9IHQuX2FwcGx5KGUpO1xuICAgIHJldHVybiBlO1xufVxuXG4vKipcbiAqIEEgYFF1ZXJ5RmllbGRGaWx0ZXJDb25zdHJhaW50YCBpcyB1c2VkIHRvIG5hcnJvdyB0aGUgc2V0IG9mIGRvY3VtZW50cyByZXR1cm5lZCBieVxuICogYSBGaXJlc3RvcmUgcXVlcnkgYnkgZmlsdGVyaW5nIG9uIG9uZSBvciBtb3JlIGRvY3VtZW50IGZpZWxkcy5cbiAqIGBRdWVyeUZpZWxkRmlsdGVyQ29uc3RyYWludGBzIGFyZSBjcmVhdGVkIGJ5IGludm9raW5nIHtAbGluayB3aGVyZX0gYW5kIGNhbiB0aGVuXG4gKiBiZSBwYXNzZWQgdG8ge0BsaW5rIChxdWVyeToxKX0gdG8gY3JlYXRlIGEgbmV3IHF1ZXJ5IGluc3RhbmNlIHRoYXQgYWxzbyBjb250YWluc1xuICogdGhpcyBgUXVlcnlGaWVsZEZpbHRlckNvbnN0cmFpbnRgLlxuICovIGNsYXNzIFF1ZXJ5RmllbGRGaWx0ZXJDb25zdHJhaW50IGV4dGVuZHMgUXVlcnlDb25zdHJhaW50IHtcbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihlLCB0LCBuKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuX2ZpZWxkID0gZSwgdGhpcy5fb3AgPSB0LCB0aGlzLl92YWx1ZSA9IG4sIFxuICAgICAgICAvKiogVGhlIHR5cGUgb2YgdGhpcyBxdWVyeSBjb25zdHJhaW50ICovXG4gICAgICAgIHRoaXMudHlwZSA9IFwid2hlcmVcIjtcbiAgICB9XG4gICAgc3RhdGljIF9jcmVhdGUoZSwgdCwgbikge1xuICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5RmllbGRGaWx0ZXJDb25zdHJhaW50KGUsIHQsIG4pO1xuICAgIH1cbiAgICBfYXBwbHkoZSkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5fcGFyc2UoZSk7XG4gICAgICAgIHJldHVybiBfX1BSSVZBVEVfdmFsaWRhdGVOZXdGaWVsZEZpbHRlcihlLl9xdWVyeSwgdCksIG5ldyBRdWVyeShlLmZpcmVzdG9yZSwgZS5jb252ZXJ0ZXIsIF9fUFJJVkFURV9xdWVyeVdpdGhBZGRlZEZpbHRlcihlLl9xdWVyeSwgdCkpO1xuICAgIH1cbiAgICBfcGFyc2UoZSkge1xuICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX25ld1VzZXJEYXRhUmVhZGVyKGUuZmlyZXN0b3JlKSwgbiA9IGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdRdWVyeUZpbHRlcihlLCB0LCBuLCByLCBpLCBzLCBvKSB7XG4gICAgICAgICAgICBsZXQgXztcbiAgICAgICAgICAgIGlmIChpLmlzS2V5RmllbGQoKSkge1xuICAgICAgICAgICAgICAgIGlmIChcImFycmF5LWNvbnRhaW5zXCIgLyogT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlMgKi8gPT09IHMgfHwgXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBPcGVyYXRvci5BUlJBWV9DT05UQUlOU19BTlkgKi8gPT09IHMpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIFF1ZXJ5LiBZb3UgY2FuJ3QgcGVyZm9ybSAnJHtzfScgcXVlcmllcyBvbiBkb2N1bWVudElkKCkuYCk7XG4gICAgICAgICAgICAgICAgaWYgKFwiaW5cIiAvKiBPcGVyYXRvci5JTiAqLyA9PT0gcyB8fCBcIm5vdC1pblwiIC8qIE9wZXJhdG9yLk5PVF9JTiAqLyA9PT0gcykge1xuICAgICAgICAgICAgICAgICAgICBfX1BSSVZBVEVfdmFsaWRhdGVEaXNqdW5jdGl2ZUZpbHRlckVsZW1lbnRzKG8sIHMpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gW107XG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbiBvZiBvKSB0LnB1c2goX19QUklWQVRFX3BhcnNlRG9jdW1lbnRJZFZhbHVlKHIsIGUsIG4pKTtcbiAgICAgICAgICAgICAgICAgICAgXyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5VmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXM6IHRcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgXyA9IF9fUFJJVkFURV9wYXJzZURvY3VtZW50SWRWYWx1ZShyLCBlLCBvKTtcbiAgICAgICAgICAgIH0gZWxzZSBcImluXCIgLyogT3BlcmF0b3IuSU4gKi8gIT09IHMgJiYgXCJub3QtaW5cIiAvKiBPcGVyYXRvci5OT1RfSU4gKi8gIT09IHMgJiYgXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBPcGVyYXRvci5BUlJBWV9DT05UQUlOU19BTlkgKi8gIT09IHMgfHwgX19QUklWQVRFX3ZhbGlkYXRlRGlzanVuY3RpdmVGaWx0ZXJFbGVtZW50cyhvLCBzKSwgXG4gICAgICAgICAgICBfID0gX19QUklWQVRFX3BhcnNlUXVlcnlWYWx1ZShuLCB0LCBvLCBcbiAgICAgICAgICAgIC8qIGFsbG93QXJyYXlzPSAqLyBcImluXCIgLyogT3BlcmF0b3IuSU4gKi8gPT09IHMgfHwgXCJub3QtaW5cIiAvKiBPcGVyYXRvci5OT1RfSU4gKi8gPT09IHMpO1xuICAgICAgICAgICAgcmV0dXJuIEZpZWxkRmlsdGVyLmNyZWF0ZShpLCBzLCBfKTtcbiAgICAgICAgfShlLl9xdWVyeSwgXCJ3aGVyZVwiLCB0LCBlLmZpcmVzdG9yZS5fZGF0YWJhc2VJZCwgdGhpcy5fZmllbGQsIHRoaXMuX29wLCB0aGlzLl92YWx1ZSk7XG4gICAgICAgIHJldHVybiBuO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEge0BsaW5rIFF1ZXJ5RmllbGRGaWx0ZXJDb25zdHJhaW50fSB0aGF0IGVuZm9yY2VzIHRoYXQgZG9jdW1lbnRzXG4gKiBtdXN0IGNvbnRhaW4gdGhlIHNwZWNpZmllZCBmaWVsZCBhbmQgdGhhdCB0aGUgdmFsdWUgc2hvdWxkIHNhdGlzZnkgdGhlXG4gKiByZWxhdGlvbiBjb25zdHJhaW50IHByb3ZpZGVkLlxuICpcbiAqIEBwYXJhbSBmaWVsZFBhdGggLSBUaGUgcGF0aCB0byBjb21wYXJlXG4gKiBAcGFyYW0gb3BTdHIgLSBUaGUgb3BlcmF0aW9uIHN0cmluZyAoZS5nIFwiJmx0O1wiLCBcIiZsdDs9XCIsIFwiPT1cIiwgXCImbHQ7XCIsXG4gKiAgIFwiJmx0Oz1cIiwgXCIhPVwiKS5cbiAqIEBwYXJhbSB2YWx1ZSAtIFRoZSB2YWx1ZSBmb3IgY29tcGFyaXNvblxuICogQHJldHVybnMgVGhlIGNyZWF0ZWQge0BsaW5rIFF1ZXJ5RmllbGRGaWx0ZXJDb25zdHJhaW50fS5cbiAqLyBmdW5jdGlvbiB3aGVyZShlLCB0LCBuKSB7XG4gICAgY29uc3QgciA9IHQsIGkgPSBfX1BSSVZBVEVfZmllbGRQYXRoRnJvbUFyZ3VtZW50KFwid2hlcmVcIiwgZSk7XG4gICAgcmV0dXJuIFF1ZXJ5RmllbGRGaWx0ZXJDb25zdHJhaW50Ll9jcmVhdGUoaSwgciwgbik7XG59XG5cbi8qKlxuICogQSBgUXVlcnlDb21wb3NpdGVGaWx0ZXJDb25zdHJhaW50YCBpcyB1c2VkIHRvIG5hcnJvdyB0aGUgc2V0IG9mIGRvY3VtZW50c1xuICogcmV0dXJuZWQgYnkgYSBGaXJlc3RvcmUgcXVlcnkgYnkgcGVyZm9ybWluZyB0aGUgbG9naWNhbCBPUiBvciBBTkQgb2YgbXVsdGlwbGVcbiAqIHtAbGluayBRdWVyeUZpZWxkRmlsdGVyQ29uc3RyYWludH1zIG9yIHtAbGluayBRdWVyeUNvbXBvc2l0ZUZpbHRlckNvbnN0cmFpbnR9cy5cbiAqIGBRdWVyeUNvbXBvc2l0ZUZpbHRlckNvbnN0cmFpbnRgcyBhcmUgY3JlYXRlZCBieSBpbnZva2luZyB7QGxpbmsgb3J9IG9yXG4gKiB7QGxpbmsgYW5kfSBhbmQgY2FuIHRoZW4gYmUgcGFzc2VkIHRvIHtAbGluayAocXVlcnk6MSl9IHRvIGNyZWF0ZSBhIG5ldyBxdWVyeVxuICogaW5zdGFuY2UgdGhhdCBhbHNvIGNvbnRhaW5zIHRoZSBgUXVlcnlDb21wb3NpdGVGaWx0ZXJDb25zdHJhaW50YC5cbiAqLyBjbGFzcyBRdWVyeUNvbXBvc2l0ZUZpbHRlckNvbnN0cmFpbnQgZXh0ZW5kcyBBcHBsaWFibGVDb25zdHJhaW50IHtcbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKiogVGhlIHR5cGUgb2YgdGhpcyBxdWVyeSBjb25zdHJhaW50ICovXG4gICAgZSwgdCkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLnR5cGUgPSBlLCB0aGlzLl9xdWVyeUNvbnN0cmFpbnRzID0gdDtcbiAgICB9XG4gICAgc3RhdGljIF9jcmVhdGUoZSwgdCkge1xuICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5Q29tcG9zaXRlRmlsdGVyQ29uc3RyYWludChlLCB0KTtcbiAgICB9XG4gICAgX3BhcnNlKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuX3F1ZXJ5Q29uc3RyYWludHMubWFwKCh0ID0+IHQuX3BhcnNlKGUpKSkuZmlsdGVyKChlID0+IGUuZ2V0RmlsdGVycygpLmxlbmd0aCA+IDApKTtcbiAgICAgICAgcmV0dXJuIDEgPT09IHQubGVuZ3RoID8gdFswXSA6IENvbXBvc2l0ZUZpbHRlci5jcmVhdGUodCwgdGhpcy5fZ2V0T3BlcmF0b3IoKSk7XG4gICAgfVxuICAgIF9hcHBseShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLl9wYXJzZShlKTtcbiAgICAgICAgcmV0dXJuIDAgPT09IHQuZ2V0RmlsdGVycygpLmxlbmd0aCA/IGUgOiAoZnVuY3Rpb24gX19QUklWQVRFX3ZhbGlkYXRlTmV3RmlsdGVyKGUsIHQpIHtcbiAgICAgICAgICAgIGxldCBuID0gZTtcbiAgICAgICAgICAgIGNvbnN0IHIgPSB0LmdldEZsYXR0ZW5lZEZpbHRlcnMoKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZSBvZiByKSBfX1BSSVZBVEVfdmFsaWRhdGVOZXdGaWVsZEZpbHRlcihuLCBlKSwgbiA9IF9fUFJJVkFURV9xdWVyeVdpdGhBZGRlZEZpbHRlcihuLCBlKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBDaGVja3MgaWYgYW55IG9mIHRoZSBwcm92aWRlZCBmaWx0ZXIgb3BlcmF0b3JzIGFyZSBpbmNsdWRlZCBpbiB0aGUgZ2l2ZW4gbGlzdCBvZiBmaWx0ZXJzIGFuZFxuICAgICAgICAvLyByZXR1cm5zIHRoZSBmaXJzdCBvbmUgdGhhdCBpcywgb3IgbnVsbCBpZiBub25lIGFyZS5cbiAgICAgICAgKGUuX3F1ZXJ5LCB0KSwgbmV3IFF1ZXJ5KGUuZmlyZXN0b3JlLCBlLmNvbnZlcnRlciwgX19QUklWQVRFX3F1ZXJ5V2l0aEFkZGVkRmlsdGVyKGUuX3F1ZXJ5LCB0KSkpO1xuICAgIH1cbiAgICBfZ2V0UXVlcnlDb25zdHJhaW50cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3F1ZXJ5Q29uc3RyYWludHM7XG4gICAgfVxuICAgIF9nZXRPcGVyYXRvcigpIHtcbiAgICAgICAgcmV0dXJuIFwiYW5kXCIgPT09IHRoaXMudHlwZSA/IFwiYW5kXCIgLyogQ29tcG9zaXRlT3BlcmF0b3IuQU5EICovIDogXCJvclwiIC8qIENvbXBvc2l0ZU9wZXJhdG9yLk9SICovO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IHtAbGluayBRdWVyeUNvbXBvc2l0ZUZpbHRlckNvbnN0cmFpbnR9IHRoYXQgaXMgYSBkaXNqdW5jdGlvbiBvZlxuICogdGhlIGdpdmVuIGZpbHRlciBjb25zdHJhaW50cy4gQSBkaXNqdW5jdGlvbiBmaWx0ZXIgaW5jbHVkZXMgYSBkb2N1bWVudCBpZiBpdFxuICogc2F0aXNmaWVzIGFueSBvZiB0aGUgZ2l2ZW4gZmlsdGVycy5cbiAqXG4gKiBAcGFyYW0gcXVlcnlDb25zdHJhaW50cyAtIE9wdGlvbmFsLiBUaGUgbGlzdCBvZlxuICoge0BsaW5rIFF1ZXJ5RmlsdGVyQ29uc3RyYWludH1zIHRvIHBlcmZvcm0gYSBkaXNqdW5jdGlvbiBmb3IuIFRoZXNlIG11c3QgYmVcbiAqIGNyZWF0ZWQgd2l0aCBjYWxscyB0byB7QGxpbmsgd2hlcmV9LCB7QGxpbmsgb3J9LCBvciB7QGxpbmsgYW5kfS5cbiAqIEByZXR1cm5zIFRoZSBuZXdseSBjcmVhdGVkIHtAbGluayBRdWVyeUNvbXBvc2l0ZUZpbHRlckNvbnN0cmFpbnR9LlxuICovIGZ1bmN0aW9uIG9yKC4uLmUpIHtcbiAgICAvLyBPbmx5IHN1cHBvcnQgUXVlcnlGaWx0ZXJDb25zdHJhaW50c1xuICAgIHJldHVybiBlLmZvckVhY2goKGUgPT4gX19QUklWQVRFX3ZhbGlkYXRlUXVlcnlGaWx0ZXJDb25zdHJhaW50KFwib3JcIiwgZSkpKSwgUXVlcnlDb21wb3NpdGVGaWx0ZXJDb25zdHJhaW50Ll9jcmVhdGUoXCJvclwiIC8qIENvbXBvc2l0ZU9wZXJhdG9yLk9SICovICwgZSk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyB7QGxpbmsgUXVlcnlDb21wb3NpdGVGaWx0ZXJDb25zdHJhaW50fSB0aGF0IGlzIGEgY29uanVuY3Rpb24gb2ZcbiAqIHRoZSBnaXZlbiBmaWx0ZXIgY29uc3RyYWludHMuIEEgY29uanVuY3Rpb24gZmlsdGVyIGluY2x1ZGVzIGEgZG9jdW1lbnQgaWYgaXRcbiAqIHNhdGlzZmllcyBhbGwgb2YgdGhlIGdpdmVuIGZpbHRlcnMuXG4gKlxuICogQHBhcmFtIHF1ZXJ5Q29uc3RyYWludHMgLSBPcHRpb25hbC4gVGhlIGxpc3Qgb2ZcbiAqIHtAbGluayBRdWVyeUZpbHRlckNvbnN0cmFpbnR9cyB0byBwZXJmb3JtIGEgY29uanVuY3Rpb24gZm9yLiBUaGVzZSBtdXN0IGJlXG4gKiBjcmVhdGVkIHdpdGggY2FsbHMgdG8ge0BsaW5rIHdoZXJlfSwge0BsaW5rIG9yfSwgb3Ige0BsaW5rIGFuZH0uXG4gKiBAcmV0dXJucyBUaGUgbmV3bHkgY3JlYXRlZCB7QGxpbmsgUXVlcnlDb21wb3NpdGVGaWx0ZXJDb25zdHJhaW50fS5cbiAqLyBmdW5jdGlvbiBhbmQoLi4uZSkge1xuICAgIC8vIE9ubHkgc3VwcG9ydCBRdWVyeUZpbHRlckNvbnN0cmFpbnRzXG4gICAgcmV0dXJuIGUuZm9yRWFjaCgoZSA9PiBfX1BSSVZBVEVfdmFsaWRhdGVRdWVyeUZpbHRlckNvbnN0cmFpbnQoXCJhbmRcIiwgZSkpKSwgUXVlcnlDb21wb3NpdGVGaWx0ZXJDb25zdHJhaW50Ll9jcmVhdGUoXCJhbmRcIiAvKiBDb21wb3NpdGVPcGVyYXRvci5BTkQgKi8gLCBlKTtcbn1cblxuLyoqXG4gKiBBIGBRdWVyeU9yZGVyQnlDb25zdHJhaW50YCBpcyB1c2VkIHRvIHNvcnQgdGhlIHNldCBvZiBkb2N1bWVudHMgcmV0dXJuZWQgYnkgYVxuICogRmlyZXN0b3JlIHF1ZXJ5LiBgUXVlcnlPcmRlckJ5Q29uc3RyYWludGBzIGFyZSBjcmVhdGVkIGJ5IGludm9raW5nXG4gKiB7QGxpbmsgb3JkZXJCeX0gYW5kIGNhbiB0aGVuIGJlIHBhc3NlZCB0byB7QGxpbmsgKHF1ZXJ5OjEpfSB0byBjcmVhdGUgYSBuZXcgcXVlcnlcbiAqIGluc3RhbmNlIHRoYXQgYWxzbyBjb250YWlucyB0aGlzIGBRdWVyeU9yZGVyQnlDb25zdHJhaW50YC5cbiAqXG4gKiBOb3RlOiBEb2N1bWVudHMgdGhhdCBkbyBub3QgY29udGFpbiB0aGUgb3JkZXJCeSBmaWVsZCB3aWxsIG5vdCBiZSBwcmVzZW50IGluXG4gKiB0aGUgcXVlcnkgcmVzdWx0LlxuICovIGNsYXNzIFF1ZXJ5T3JkZXJCeUNvbnN0cmFpbnQgZXh0ZW5kcyBRdWVyeUNvbnN0cmFpbnQge1xuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5fZmllbGQgPSBlLCB0aGlzLl9kaXJlY3Rpb24gPSB0LCBcbiAgICAgICAgLyoqIFRoZSB0eXBlIG9mIHRoaXMgcXVlcnkgY29uc3RyYWludCAqL1xuICAgICAgICB0aGlzLnR5cGUgPSBcIm9yZGVyQnlcIjtcbiAgICB9XG4gICAgc3RhdGljIF9jcmVhdGUoZSwgdCkge1xuICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5T3JkZXJCeUNvbnN0cmFpbnQoZSwgdCk7XG4gICAgfVxuICAgIF9hcHBseShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBmdW5jdGlvbiBfX1BSSVZBVEVfbmV3UXVlcnlPcmRlckJ5KGUsIHQsIG4pIHtcbiAgICAgICAgICAgIGlmIChudWxsICE9PSBlLnN0YXJ0QXQpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELklOVkFMSURfQVJHVU1FTlQsIFwiSW52YWxpZCBxdWVyeS4gWW91IG11c3Qgbm90IGNhbGwgc3RhcnRBdCgpIG9yIHN0YXJ0QWZ0ZXIoKSBiZWZvcmUgY2FsbGluZyBvcmRlckJ5KCkuXCIpO1xuICAgICAgICAgICAgaWYgKG51bGwgIT09IGUuZW5kQXQpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELklOVkFMSURfQVJHVU1FTlQsIFwiSW52YWxpZCBxdWVyeS4gWW91IG11c3Qgbm90IGNhbGwgZW5kQXQoKSBvciBlbmRCZWZvcmUoKSBiZWZvcmUgY2FsbGluZyBvcmRlckJ5KCkuXCIpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBPcmRlckJ5KHQsIG4pO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogQ3JlYXRlIGEgYEJvdW5kYCBmcm9tIGEgcXVlcnkgYW5kIGEgZG9jdW1lbnQuXG4gKlxuICogTm90ZSB0aGF0IHRoZSBgQm91bmRgIHdpbGwgYWx3YXlzIGluY2x1ZGUgdGhlIGtleSBvZiB0aGUgZG9jdW1lbnRcbiAqIGFuZCBzbyBvbmx5IHRoZSBwcm92aWRlZCBkb2N1bWVudCB3aWxsIGNvbXBhcmUgZXF1YWwgdG8gdGhlIHJldHVybmVkXG4gKiBwb3NpdGlvbi5cbiAqXG4gKiBXaWxsIHRocm93IGlmIHRoZSBkb2N1bWVudCBkb2VzIG5vdCBjb250YWluIGFsbCBmaWVsZHMgb2YgdGhlIG9yZGVyIGJ5XG4gKiBvZiB0aGUgcXVlcnkgb3IgaWYgYW55IG9mIHRoZSBmaWVsZHMgaW4gdGhlIG9yZGVyIGJ5IGFyZSBhbiB1bmNvbW1pdHRlZFxuICogc2VydmVyIHRpbWVzdGFtcC5cbiAqLyAoZS5fcXVlcnksIHRoaXMuX2ZpZWxkLCB0aGlzLl9kaXJlY3Rpb24pO1xuICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5KGUuZmlyZXN0b3JlLCBlLmNvbnZlcnRlciwgZnVuY3Rpb24gX19QUklWQVRFX3F1ZXJ5V2l0aEFkZGVkT3JkZXJCeShlLCB0KSB7XG4gICAgICAgICAgICAvLyBUT0RPKGRpbW9uZCk6IHZhbGlkYXRlIHRoYXQgb3JkZXJCeSBkb2VzIG5vdCBsaXN0IHRoZSBzYW1lIGtleSB0d2ljZS5cbiAgICAgICAgICAgIGNvbnN0IG4gPSBlLmV4cGxpY2l0T3JkZXJCeS5jb25jYXQoWyB0IF0pO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfUXVlcnlJbXBsKGUucGF0aCwgZS5jb2xsZWN0aW9uR3JvdXAsIG4sIGUuZmlsdGVycy5zbGljZSgpLCBlLmxpbWl0LCBlLmxpbWl0VHlwZSwgZS5zdGFydEF0LCBlLmVuZEF0KTtcbiAgICAgICAgfShlLl9xdWVyeSwgdCkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEge0BsaW5rIFF1ZXJ5T3JkZXJCeUNvbnN0cmFpbnR9IHRoYXQgc29ydHMgdGhlIHF1ZXJ5IHJlc3VsdCBieSB0aGVcbiAqIHNwZWNpZmllZCBmaWVsZCwgb3B0aW9uYWxseSBpbiBkZXNjZW5kaW5nIG9yZGVyIGluc3RlYWQgb2YgYXNjZW5kaW5nLlxuICpcbiAqIE5vdGU6IERvY3VtZW50cyB0aGF0IGRvIG5vdCBjb250YWluIHRoZSBzcGVjaWZpZWQgZmllbGQgd2lsbCBub3QgYmUgcHJlc2VudFxuICogaW4gdGhlIHF1ZXJ5IHJlc3VsdC5cbiAqXG4gKiBAcGFyYW0gZmllbGRQYXRoIC0gVGhlIGZpZWxkIHRvIHNvcnQgYnkuXG4gKiBAcGFyYW0gZGlyZWN0aW9uU3RyIC0gT3B0aW9uYWwgZGlyZWN0aW9uIHRvIHNvcnQgYnkgKCdhc2MnIG9yICdkZXNjJykuIElmXG4gKiBub3Qgc3BlY2lmaWVkLCBvcmRlciB3aWxsIGJlIGFzY2VuZGluZy5cbiAqIEByZXR1cm5zIFRoZSBjcmVhdGVkIHtAbGluayBRdWVyeU9yZGVyQnlDb25zdHJhaW50fS5cbiAqLyBmdW5jdGlvbiBvcmRlckJ5KGUsIHQgPSBcImFzY1wiKSB7XG4gICAgY29uc3QgbiA9IHQsIHIgPSBfX1BSSVZBVEVfZmllbGRQYXRoRnJvbUFyZ3VtZW50KFwib3JkZXJCeVwiLCBlKTtcbiAgICByZXR1cm4gUXVlcnlPcmRlckJ5Q29uc3RyYWludC5fY3JlYXRlKHIsIG4pO1xufVxuXG4vKipcbiAqIEEgYFF1ZXJ5TGltaXRDb25zdHJhaW50YCBpcyB1c2VkIHRvIGxpbWl0IHRoZSBudW1iZXIgb2YgZG9jdW1lbnRzIHJldHVybmVkIGJ5XG4gKiBhIEZpcmVzdG9yZSBxdWVyeS5cbiAqIGBRdWVyeUxpbWl0Q29uc3RyYWludGBzIGFyZSBjcmVhdGVkIGJ5IGludm9raW5nIHtAbGluayBsaW1pdH0gb3JcbiAqIHtAbGluayBsaW1pdFRvTGFzdH0gYW5kIGNhbiB0aGVuIGJlIHBhc3NlZCB0byB7QGxpbmsgKHF1ZXJ5OjEpfSB0byBjcmVhdGUgYSBuZXdcbiAqIHF1ZXJ5IGluc3RhbmNlIHRoYXQgYWxzbyBjb250YWlucyB0aGlzIGBRdWVyeUxpbWl0Q29uc3RyYWludGAuXG4gKi8gY2xhc3MgUXVlcnlMaW1pdENvbnN0cmFpbnQgZXh0ZW5kcyBRdWVyeUNvbnN0cmFpbnQge1xuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBUaGUgdHlwZSBvZiB0aGlzIHF1ZXJ5IGNvbnN0cmFpbnQgKi9cbiAgICBlLCB0LCBuKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMudHlwZSA9IGUsIHRoaXMuX2xpbWl0ID0gdCwgdGhpcy5fbGltaXRUeXBlID0gbjtcbiAgICB9XG4gICAgc3RhdGljIF9jcmVhdGUoZSwgdCwgbikge1xuICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5TGltaXRDb25zdHJhaW50KGUsIHQsIG4pO1xuICAgIH1cbiAgICBfYXBwbHkoZSkge1xuICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5KGUuZmlyZXN0b3JlLCBlLmNvbnZlcnRlciwgX19QUklWQVRFX3F1ZXJ5V2l0aExpbWl0KGUuX3F1ZXJ5LCB0aGlzLl9saW1pdCwgdGhpcy5fbGltaXRUeXBlKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSB7QGxpbmsgUXVlcnlMaW1pdENvbnN0cmFpbnR9IHRoYXQgb25seSByZXR1cm5zIHRoZSBmaXJzdCBtYXRjaGluZ1xuICogZG9jdW1lbnRzLlxuICpcbiAqIEBwYXJhbSBsaW1pdCAtIFRoZSBtYXhpbXVtIG51bWJlciBvZiBpdGVtcyB0byByZXR1cm4uXG4gKiBAcmV0dXJucyBUaGUgY3JlYXRlZCB7QGxpbmsgUXVlcnlMaW1pdENvbnN0cmFpbnR9LlxuICovIGZ1bmN0aW9uIGxpbWl0KGUpIHtcbiAgICByZXR1cm4gX19QUklWQVRFX3ZhbGlkYXRlUG9zaXRpdmVOdW1iZXIoXCJsaW1pdFwiLCBlKSwgUXVlcnlMaW1pdENvbnN0cmFpbnQuX2NyZWF0ZShcImxpbWl0XCIsIGUsIFwiRlwiIC8qIExpbWl0VHlwZS5GaXJzdCAqLyk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHtAbGluayBRdWVyeUxpbWl0Q29uc3RyYWludH0gdGhhdCBvbmx5IHJldHVybnMgdGhlIGxhc3QgbWF0Y2hpbmdcbiAqIGRvY3VtZW50cy5cbiAqXG4gKiBZb3UgbXVzdCBzcGVjaWZ5IGF0IGxlYXN0IG9uZSBgb3JkZXJCeWAgY2xhdXNlIGZvciBgbGltaXRUb0xhc3RgIHF1ZXJpZXMsXG4gKiBvdGhlcndpc2UgYW4gZXhjZXB0aW9uIHdpbGwgYmUgdGhyb3duIGR1cmluZyBleGVjdXRpb24uXG4gKlxuICogQHBhcmFtIGxpbWl0IC0gVGhlIG1heGltdW0gbnVtYmVyIG9mIGl0ZW1zIHRvIHJldHVybi5cbiAqIEByZXR1cm5zIFRoZSBjcmVhdGVkIHtAbGluayBRdWVyeUxpbWl0Q29uc3RyYWludH0uXG4gKi8gZnVuY3Rpb24gbGltaXRUb0xhc3QoZSkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfdmFsaWRhdGVQb3NpdGl2ZU51bWJlcihcImxpbWl0VG9MYXN0XCIsIGUpLCBRdWVyeUxpbWl0Q29uc3RyYWludC5fY3JlYXRlKFwibGltaXRUb0xhc3RcIiwgZSwgXCJMXCIgLyogTGltaXRUeXBlLkxhc3QgKi8pO1xufVxuXG4vKipcbiAqIEEgYFF1ZXJ5U3RhcnRBdENvbnN0cmFpbnRgIGlzIHVzZWQgdG8gZXhjbHVkZSBkb2N1bWVudHMgZnJvbSB0aGUgc3RhcnQgb2YgYVxuICogcmVzdWx0IHNldCByZXR1cm5lZCBieSBhIEZpcmVzdG9yZSBxdWVyeS5cbiAqIGBRdWVyeVN0YXJ0QXRDb25zdHJhaW50YHMgYXJlIGNyZWF0ZWQgYnkgaW52b2tpbmcge0BsaW5rIChzdGFydEF0OjEpfSBvclxuICoge0BsaW5rIChzdGFydEFmdGVyOjEpfSBhbmQgY2FuIHRoZW4gYmUgcGFzc2VkIHRvIHtAbGluayAocXVlcnk6MSl9IHRvIGNyZWF0ZSBhXG4gKiBuZXcgcXVlcnkgaW5zdGFuY2UgdGhhdCBhbHNvIGNvbnRhaW5zIHRoaXMgYFF1ZXJ5U3RhcnRBdENvbnN0cmFpbnRgLlxuICovIGNsYXNzIFF1ZXJ5U3RhcnRBdENvbnN0cmFpbnQgZXh0ZW5kcyBRdWVyeUNvbnN0cmFpbnQge1xuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBUaGUgdHlwZSBvZiB0aGlzIHF1ZXJ5IGNvbnN0cmFpbnQgKi9cbiAgICBlLCB0LCBuKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMudHlwZSA9IGUsIHRoaXMuX2RvY09yRmllbGRzID0gdCwgdGhpcy5faW5jbHVzaXZlID0gbjtcbiAgICB9XG4gICAgc3RhdGljIF9jcmVhdGUoZSwgdCwgbikge1xuICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5U3RhcnRBdENvbnN0cmFpbnQoZSwgdCwgbik7XG4gICAgfVxuICAgIF9hcHBseShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfbmV3UXVlcnlCb3VuZEZyb21Eb2NPckZpZWxkcyhlLCB0aGlzLnR5cGUsIHRoaXMuX2RvY09yRmllbGRzLCB0aGlzLl9pbmNsdXNpdmUpO1xuICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5KGUuZmlyZXN0b3JlLCBlLmNvbnZlcnRlciwgZnVuY3Rpb24gX19QUklWQVRFX3F1ZXJ5V2l0aFN0YXJ0QXQoZSwgdCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfUXVlcnlJbXBsKGUucGF0aCwgZS5jb2xsZWN0aW9uR3JvdXAsIGUuZXhwbGljaXRPcmRlckJ5LnNsaWNlKCksIGUuZmlsdGVycy5zbGljZSgpLCBlLmxpbWl0LCBlLmxpbWl0VHlwZSwgdCwgZS5lbmRBdCk7XG4gICAgICAgIH0oZS5fcXVlcnksIHQpKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHN0YXJ0QXQoLi4uZSkge1xuICAgIHJldHVybiBRdWVyeVN0YXJ0QXRDb25zdHJhaW50Ll9jcmVhdGUoXCJzdGFydEF0XCIsIGUsIFxuICAgIC8qaW5jbHVzaXZlPSovICEwKTtcbn1cblxuZnVuY3Rpb24gc3RhcnRBZnRlciguLi5lKSB7XG4gICAgcmV0dXJuIFF1ZXJ5U3RhcnRBdENvbnN0cmFpbnQuX2NyZWF0ZShcInN0YXJ0QWZ0ZXJcIiwgZSwgXG4gICAgLyppbmNsdXNpdmU9Ki8gITEpO1xufVxuXG4vKipcbiAqIEEgYFF1ZXJ5RW5kQXRDb25zdHJhaW50YCBpcyB1c2VkIHRvIGV4Y2x1ZGUgZG9jdW1lbnRzIGZyb20gdGhlIGVuZCBvZiBhXG4gKiByZXN1bHQgc2V0IHJldHVybmVkIGJ5IGEgRmlyZXN0b3JlIHF1ZXJ5LlxuICogYFF1ZXJ5RW5kQXRDb25zdHJhaW50YHMgYXJlIGNyZWF0ZWQgYnkgaW52b2tpbmcge0BsaW5rIChlbmRBdDoxKX0gb3JcbiAqIHtAbGluayAoZW5kQmVmb3JlOjEpfSBhbmQgY2FuIHRoZW4gYmUgcGFzc2VkIHRvIHtAbGluayAocXVlcnk6MSl9IHRvIGNyZWF0ZSBhIG5ld1xuICogcXVlcnkgaW5zdGFuY2UgdGhhdCBhbHNvIGNvbnRhaW5zIHRoaXMgYFF1ZXJ5RW5kQXRDb25zdHJhaW50YC5cbiAqLyBjbGFzcyBRdWVyeUVuZEF0Q29uc3RyYWludCBleHRlbmRzIFF1ZXJ5Q29uc3RyYWludCB7XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIFRoZSB0eXBlIG9mIHRoaXMgcXVlcnkgY29uc3RyYWludCAqL1xuICAgIGUsIHQsIG4pIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy50eXBlID0gZSwgdGhpcy5fZG9jT3JGaWVsZHMgPSB0LCB0aGlzLl9pbmNsdXNpdmUgPSBuO1xuICAgIH1cbiAgICBzdGF0aWMgX2NyZWF0ZShlLCB0LCBuKSB7XG4gICAgICAgIHJldHVybiBuZXcgUXVlcnlFbmRBdENvbnN0cmFpbnQoZSwgdCwgbik7XG4gICAgfVxuICAgIF9hcHBseShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfbmV3UXVlcnlCb3VuZEZyb21Eb2NPckZpZWxkcyhlLCB0aGlzLnR5cGUsIHRoaXMuX2RvY09yRmllbGRzLCB0aGlzLl9pbmNsdXNpdmUpO1xuICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5KGUuZmlyZXN0b3JlLCBlLmNvbnZlcnRlciwgZnVuY3Rpb24gX19QUklWQVRFX3F1ZXJ5V2l0aEVuZEF0KGUsIHQpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgX19QUklWQVRFX1F1ZXJ5SW1wbChlLnBhdGgsIGUuY29sbGVjdGlvbkdyb3VwLCBlLmV4cGxpY2l0T3JkZXJCeS5zbGljZSgpLCBlLmZpbHRlcnMuc2xpY2UoKSwgZS5saW1pdCwgZS5saW1pdFR5cGUsIGUuc3RhcnRBdCwgdCk7XG4gICAgICAgIH0oZS5fcXVlcnksIHQpKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGVuZEJlZm9yZSguLi5lKSB7XG4gICAgcmV0dXJuIFF1ZXJ5RW5kQXRDb25zdHJhaW50Ll9jcmVhdGUoXCJlbmRCZWZvcmVcIiwgZSwgXG4gICAgLyppbmNsdXNpdmU9Ki8gITEpO1xufVxuXG5mdW5jdGlvbiBlbmRBdCguLi5lKSB7XG4gICAgcmV0dXJuIFF1ZXJ5RW5kQXRDb25zdHJhaW50Ll9jcmVhdGUoXCJlbmRBdFwiLCBlLCBcbiAgICAvKmluY2x1c2l2ZT0qLyAhMCk7XG59XG5cbi8qKiBIZWxwZXIgZnVuY3Rpb24gdG8gY3JlYXRlIGEgYm91bmQgZnJvbSBhIGRvY3VtZW50IG9yIGZpZWxkcyAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfbmV3UXVlcnlCb3VuZEZyb21Eb2NPckZpZWxkcyhlLCB0LCBuLCByKSB7XG4gICAgaWYgKG5bMF0gPSBnZXRNb2R1bGFySW5zdGFuY2UoblswXSksIG5bMF0gaW5zdGFuY2VvZiBEb2N1bWVudFNuYXBzaG90JDEpIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfbmV3UXVlcnlCb3VuZEZyb21Eb2N1bWVudChlLCB0LCBuLCByLCBpKSB7XG4gICAgICAgIGlmICghcikgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuTk9UX0ZPVU5ELCBgQ2FuJ3QgdXNlIGEgRG9jdW1lbnRTbmFwc2hvdCB0aGF0IGRvZXNuJ3QgZXhpc3QgZm9yICR7bn0oKS5gKTtcbiAgICAgICAgY29uc3QgcyA9IFtdO1xuICAgICAgICAvLyBCZWNhdXNlIHBlb3BsZSBleHBlY3QgdG8gY29udGludWUvZW5kIGEgcXVlcnkgYXQgdGhlIGV4YWN0IGRvY3VtZW50XG4gICAgICAgIC8vIHByb3ZpZGVkLCB3ZSBuZWVkIHRvIHVzZSB0aGUgaW1wbGljaXQgc29ydCBvcmRlciByYXRoZXIgdGhhbiB0aGUgZXhwbGljaXRcbiAgICAgICAgLy8gc29ydCBvcmRlciwgYmVjYXVzZSBpdCdzIGd1YXJhbnRlZWQgdG8gY29udGFpbiB0aGUgZG9jdW1lbnQga2V5LiBUaGF0IHdheVxuICAgICAgICAvLyB0aGUgcG9zaXRpb24gYmVjb21lcyB1bmFtYmlndW91cyBhbmQgdGhlIHF1ZXJ5IGNvbnRpbnVlcy9lbmRzIGV4YWN0bHkgYXRcbiAgICAgICAgLy8gdGhlIHByb3ZpZGVkIGRvY3VtZW50LiBXaXRob3V0IHRoZSBrZXkgKGJ5IHVzaW5nIHRoZSBleHBsaWNpdCBzb3J0XG4gICAgICAgIC8vIG9yZGVycyksIG11bHRpcGxlIGRvY3VtZW50cyBjb3VsZCBtYXRjaCB0aGUgcG9zaXRpb24sIHlpZWxkaW5nIGR1cGxpY2F0ZVxuICAgICAgICAvLyByZXN1bHRzLlxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbiBvZiBfX1BSSVZBVEVfcXVlcnlOb3JtYWxpemVkT3JkZXJCeShlKSkgaWYgKG4uZmllbGQuaXNLZXlGaWVsZCgpKSBzLnB1c2goX19QUklWQVRFX3JlZlZhbHVlKHQsIHIua2V5KSk7IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZSA9IHIuZGF0YS5maWVsZChuLmZpZWxkKTtcbiAgICAgICAgICAgIGlmIChfX1BSSVZBVEVfaXNTZXJ2ZXJUaW1lc3RhbXAoZSkpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELklOVkFMSURfQVJHVU1FTlQsICdJbnZhbGlkIHF1ZXJ5LiBZb3UgYXJlIHRyeWluZyB0byBzdGFydCBvciBlbmQgYSBxdWVyeSB1c2luZyBhIGRvY3VtZW50IGZvciB3aGljaCB0aGUgZmllbGQgXCInICsgbi5maWVsZCArICdcIiBpcyBhbiB1bmNvbW1pdHRlZCBzZXJ2ZXIgdGltZXN0YW1wLiAoU2luY2UgdGhlIHZhbHVlIG9mIHRoaXMgZmllbGQgaXMgdW5rbm93biwgeW91IGNhbm5vdCBzdGFydC9lbmQgYSBxdWVyeSB3aXRoIGl0LiknKTtcbiAgICAgICAgICAgIGlmIChudWxsID09PSBlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IG4uZmllbGQuY2Fub25pY2FsU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIFlvdSBhcmUgdHJ5aW5nIHRvIHN0YXJ0IG9yIGVuZCBhIHF1ZXJ5IHVzaW5nIGEgZG9jdW1lbnQgZm9yIHdoaWNoIHRoZSBmaWVsZCAnJHtlfScgKHVzZWQgYXMgdGhlIG9yZGVyQnkpIGRvZXMgbm90IGV4aXN0LmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcy5wdXNoKGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgQm91bmQocywgaSk7XG4gICAgfVxuICAgIC8qKlxuICogQ29udmVydHMgYSBsaXN0IG9mIGZpZWxkIHZhbHVlcyB0byBhIGBCb3VuZGAgZm9yIHRoZSBnaXZlbiBxdWVyeS5cbiAqLyAoZS5fcXVlcnksIGUuZmlyZXN0b3JlLl9kYXRhYmFzZUlkLCB0LCBuWzBdLl9kb2N1bWVudCwgcik7XG4gICAge1xuICAgICAgICBjb25zdCBpID0gX19QUklWQVRFX25ld1VzZXJEYXRhUmVhZGVyKGUuZmlyZXN0b3JlKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9uZXdRdWVyeUJvdW5kRnJvbUZpZWxkcyhlLCB0LCBuLCByLCBpLCBzKSB7XG4gICAgICAgICAgICAvLyBVc2UgZXhwbGljaXQgb3JkZXIgYnkncyBiZWNhdXNlIGl0IGhhcyB0byBtYXRjaCB0aGUgcXVlcnkgdGhlIHVzZXIgbWFkZVxuICAgICAgICAgICAgY29uc3QgbyA9IGUuZXhwbGljaXRPcmRlckJ5O1xuICAgICAgICAgICAgaWYgKGkubGVuZ3RoID4gby5sZW5ndGgpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELklOVkFMSURfQVJHVU1FTlQsIGBUb28gbWFueSBhcmd1bWVudHMgcHJvdmlkZWQgdG8gJHtyfSgpLiBUaGUgbnVtYmVyIG9mIGFyZ3VtZW50cyBtdXN0IGJlIGxlc3MgdGhhbiBvciBlcXVhbCB0byB0aGUgbnVtYmVyIG9mIG9yZGVyQnkoKSBjbGF1c2VzYCk7XG4gICAgICAgICAgICBjb25zdCBfID0gW107XG4gICAgICAgICAgICBmb3IgKGxldCBzID0gMDsgcyA8IGkubGVuZ3RoOyBzKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhID0gaVtzXTtcbiAgICAgICAgICAgICAgICBpZiAob1tzXS5maWVsZC5pc0tleUZpZWxkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKFwic3RyaW5nXCIgIT0gdHlwZW9mIGEpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBFeHBlY3RlZCBhIHN0cmluZyBmb3IgZG9jdW1lbnQgSUQgaW4gJHtyfSgpLCBidXQgZ290IGEgJHt0eXBlb2YgYX1gKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFfX1BSSVZBVEVfaXNDb2xsZWN0aW9uR3JvdXBRdWVyeShlKSAmJiAtMSAhPT0gYS5pbmRleE9mKFwiL1wiKSkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIFdoZW4gcXVlcnlpbmcgYSBjb2xsZWN0aW9uIGFuZCBvcmRlcmluZyBieSBkb2N1bWVudElkKCksIHRoZSB2YWx1ZSBwYXNzZWQgdG8gJHtyfSgpIG11c3QgYmUgYSBwbGFpbiBkb2N1bWVudCBJRCwgYnV0ICcke2F9JyBjb250YWlucyBhIHNsYXNoLmApO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gZS5wYXRoLmNoaWxkKFJlc291cmNlUGF0aC5mcm9tU3RyaW5nKGEpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFEb2N1bWVudEtleS5pc0RvY3VtZW50S2V5KG4pKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gV2hlbiBxdWVyeWluZyBhIGNvbGxlY3Rpb24gZ3JvdXAgYW5kIG9yZGVyaW5nIGJ5IGRvY3VtZW50SWQoKSwgdGhlIHZhbHVlIHBhc3NlZCB0byAke3J9KCkgbXVzdCByZXN1bHQgaW4gYSB2YWxpZCBkb2N1bWVudCBwYXRoLCBidXQgJyR7bn0nIGlzIG5vdCBiZWNhdXNlIGl0IGNvbnRhaW5zIGFuIG9kZCBudW1iZXIgb2Ygc2VnbWVudHMuYCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGkgPSBuZXcgRG9jdW1lbnRLZXkobik7XG4gICAgICAgICAgICAgICAgICAgIF8ucHVzaChfX1BSSVZBVEVfcmVmVmFsdWUodCwgaSkpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBfX1BSSVZBVEVfcGFyc2VRdWVyeVZhbHVlKG4sIHIsIGEpO1xuICAgICAgICAgICAgICAgICAgICBfLnB1c2goZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBCb3VuZChfLCBzKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIFBhcnNlcyB0aGUgZ2l2ZW4gYGRvY3VtZW50SWRWYWx1ZWAgaW50byBhIGBSZWZlcmVuY2VWYWx1ZWAsIHRocm93aW5nXG4gKiBhcHByb3ByaWF0ZSBlcnJvcnMgaWYgdGhlIHZhbHVlIGlzIGFueXRoaW5nIG90aGVyIHRoYW4gYSBgRG9jdW1lbnRSZWZlcmVuY2VgXG4gKiBvciBgc3RyaW5nYCwgb3IgaWYgdGhlIHN0cmluZyBpcyBtYWxmb3JtZWQuXG4gKi8gKGUuX3F1ZXJ5LCBlLmZpcmVzdG9yZS5fZGF0YWJhc2VJZCwgaSwgdCwgbiwgcik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfcGFyc2VEb2N1bWVudElkVmFsdWUoZSwgdCwgbikge1xuICAgIGlmIChcInN0cmluZ1wiID09IHR5cGVvZiAobiA9IGdldE1vZHVsYXJJbnN0YW5jZShuKSkpIHtcbiAgICAgICAgaWYgKFwiXCIgPT09IG4pIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELklOVkFMSURfQVJHVU1FTlQsIFwiSW52YWxpZCBxdWVyeS4gV2hlbiBxdWVyeWluZyB3aXRoIGRvY3VtZW50SWQoKSwgeW91IG11c3QgcHJvdmlkZSBhIHZhbGlkIGRvY3VtZW50IElELCBidXQgaXQgd2FzIGFuIGVtcHR5IHN0cmluZy5cIik7XG4gICAgICAgIGlmICghX19QUklWQVRFX2lzQ29sbGVjdGlvbkdyb3VwUXVlcnkodCkgJiYgLTEgIT09IG4uaW5kZXhPZihcIi9cIikpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBXaGVuIHF1ZXJ5aW5nIGEgY29sbGVjdGlvbiBieSBkb2N1bWVudElkKCksIHlvdSBtdXN0IHByb3ZpZGUgYSBwbGFpbiBkb2N1bWVudCBJRCwgYnV0ICcke259JyBjb250YWlucyBhICcvJyBjaGFyYWN0ZXIuYCk7XG4gICAgICAgIGNvbnN0IHIgPSB0LnBhdGguY2hpbGQoUmVzb3VyY2VQYXRoLmZyb21TdHJpbmcobikpO1xuICAgICAgICBpZiAoIURvY3VtZW50S2V5LmlzRG9jdW1lbnRLZXkocikpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBXaGVuIHF1ZXJ5aW5nIGEgY29sbGVjdGlvbiBncm91cCBieSBkb2N1bWVudElkKCksIHRoZSB2YWx1ZSBwcm92aWRlZCBtdXN0IHJlc3VsdCBpbiBhIHZhbGlkIGRvY3VtZW50IHBhdGgsIGJ1dCAnJHtyfScgaXMgbm90IGJlY2F1c2UgaXQgaGFzIGFuIG9kZCBudW1iZXIgb2Ygc2VnbWVudHMgKCR7ci5sZW5ndGh9KS5gKTtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9yZWZWYWx1ZShlLCBuZXcgRG9jdW1lbnRLZXkocikpO1xuICAgIH1cbiAgICBpZiAobiBpbnN0YW5jZW9mIERvY3VtZW50UmVmZXJlbmNlKSByZXR1cm4gX19QUklWQVRFX3JlZlZhbHVlKGUsIG4uX2tleSk7XG4gICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIFdoZW4gcXVlcnlpbmcgd2l0aCBkb2N1bWVudElkKCksIHlvdSBtdXN0IHByb3ZpZGUgYSB2YWxpZCBzdHJpbmcgb3IgYSBEb2N1bWVudFJlZmVyZW5jZSwgYnV0IGl0IHdhczogJHtfX1BSSVZBVEVfdmFsdWVEZXNjcmlwdGlvbihuKX0uYCk7XG59XG5cbi8qKlxuICogVmFsaWRhdGVzIHRoYXQgdGhlIHZhbHVlIHBhc3NlZCBpbnRvIGEgZGlzanVuY3RpdmUgZmlsdGVyIHNhdGlzZmllcyBhbGxcbiAqIGFycmF5IHJlcXVpcmVtZW50cy5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfdmFsaWRhdGVEaXNqdW5jdGl2ZUZpbHRlckVsZW1lbnRzKGUsIHQpIHtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoZSkgfHwgMCA9PT0gZS5sZW5ndGgpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIFF1ZXJ5LiBBIG5vbi1lbXB0eSBhcnJheSBpcyByZXF1aXJlZCBmb3IgJyR7dC50b1N0cmluZygpfScgZmlsdGVycy5gKTtcbn1cblxuLyoqXG4gKiBHaXZlbiBhbiBvcGVyYXRvciwgcmV0dXJucyB0aGUgc2V0IG9mIG9wZXJhdG9ycyB0aGF0IGNhbm5vdCBiZSB1c2VkIHdpdGggaXQuXG4gKlxuICogVGhpcyBpcyBub3QgYSBjb21wcmVoZW5zaXZlIGNoZWNrLCBhbmQgdGhpcyBmdW5jdGlvbiBzaG91bGQgYmUgcmVtb3ZlZCBpbiB0aGVcbiAqIGxvbmcgdGVybS4gVmFsaWRhdGlvbnMgc2hvdWxkIG9jY3VyIGluIHRoZSBGaXJlc3RvcmUgYmFja2VuZC5cbiAqXG4gKiBPcGVyYXRvcnMgaW4gYSBxdWVyeSBtdXN0IGFkaGVyZSB0byB0aGUgZm9sbG93aW5nIHNldCBvZiBydWxlczpcbiAqIDEuIE9ubHkgb25lIGluZXF1YWxpdHkgcGVyIHF1ZXJ5LlxuICogMi4gYE5PVF9JTmAgY2Fubm90IGJlIHVzZWQgd2l0aCBhcnJheSwgZGlzanVuY3RpdmUsIG9yIGBOT1RfRVFVQUxgIG9wZXJhdG9ycy5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfdmFsaWRhdGVOZXdGaWVsZEZpbHRlcihlLCB0KSB7XG4gICAgY29uc3QgbiA9IGZ1bmN0aW9uIF9fUFJJVkFURV9maW5kT3BJbnNpZGVGaWx0ZXJzKGUsIHQpIHtcbiAgICAgICAgZm9yIChjb25zdCBuIG9mIGUpIGZvciAoY29uc3QgZSBvZiBuLmdldEZsYXR0ZW5lZEZpbHRlcnMoKSkgaWYgKHQuaW5kZXhPZihlLm9wKSA+PSAwKSByZXR1cm4gZS5vcDtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfShlLmZpbHRlcnMsIGZ1bmN0aW9uIF9fUFJJVkFURV9jb25mbGljdGluZ09wcyhlKSB7XG4gICAgICAgIHN3aXRjaCAoZSkge1xuICAgICAgICAgIGNhc2UgXCIhPVwiIC8qIE9wZXJhdG9yLk5PVF9FUVVBTCAqLyA6XG4gICAgICAgICAgICByZXR1cm4gWyBcIiE9XCIgLyogT3BlcmF0b3IuTk9UX0VRVUFMICovICwgXCJub3QtaW5cIiAvKiBPcGVyYXRvci5OT1RfSU4gKi8gXTtcblxuICAgICAgICAgIGNhc2UgXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBPcGVyYXRvci5BUlJBWV9DT05UQUlOU19BTlkgKi8gOlxuICAgICAgICAgIGNhc2UgXCJpblwiIC8qIE9wZXJhdG9yLklOICovIDpcbiAgICAgICAgICAgIHJldHVybiBbIFwibm90LWluXCIgLyogT3BlcmF0b3IuTk9UX0lOICovIF07XG5cbiAgICAgICAgICBjYXNlIFwibm90LWluXCIgLyogT3BlcmF0b3IuTk9UX0lOICovIDpcbiAgICAgICAgICAgIHJldHVybiBbIFwiYXJyYXktY29udGFpbnMtYW55XCIgLyogT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlNfQU5ZICovICwgXCJpblwiIC8qIE9wZXJhdG9yLklOICovICwgXCJub3QtaW5cIiAvKiBPcGVyYXRvci5OT1RfSU4gKi8gLCBcIiE9XCIgLyogT3BlcmF0b3IuTk9UX0VRVUFMICovIF07XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG4gICAgfSh0Lm9wKSk7XG4gICAgaWYgKG51bGwgIT09IG4pIFxuICAgIC8vIFNwZWNpYWwgY2FzZSB3aGVuIGl0J3MgYSBkdXBsaWNhdGUgb3AgdG8gZ2l2ZSBhIHNsaWdodGx5IGNsZWFyZXIgZXJyb3IgbWVzc2FnZS5cbiAgICB0aHJvdyBuID09PSB0Lm9wID8gbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIFlvdSBjYW5ub3QgdXNlIG1vcmUgdGhhbiBvbmUgJyR7dC5vcC50b1N0cmluZygpfScgZmlsdGVyLmApIDogbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIFlvdSBjYW5ub3QgdXNlICcke3Qub3AudG9TdHJpbmcoKX0nIGZpbHRlcnMgd2l0aCAnJHtuLnRvU3RyaW5nKCl9JyBmaWx0ZXJzLmApO1xufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdmFsaWRhdGVRdWVyeUZpbHRlckNvbnN0cmFpbnQoZSwgdCkge1xuICAgIGlmICghKHQgaW5zdGFuY2VvZiBRdWVyeUZpZWxkRmlsdGVyQ29uc3RyYWludCB8fCB0IGluc3RhbmNlb2YgUXVlcnlDb21wb3NpdGVGaWx0ZXJDb25zdHJhaW50KSkgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgYEZ1bmN0aW9uICR7ZX0oKSByZXF1aXJlcyBBcHBsaWFibGVDb25zdHJhaW50cyBjcmVhdGVkIHdpdGggYSBjYWxsIHRvICd3aGVyZSguLi4pJywgJ29yKC4uLiknLCBvciAnYW5kKC4uLiknLmApO1xufVxuXG5jbGFzcyBBYnN0cmFjdFVzZXJEYXRhV3JpdGVyIHtcbiAgICBjb252ZXJ0VmFsdWUoZSwgdCA9IFwibm9uZVwiKSB7XG4gICAgICAgIHN3aXRjaCAoX19QUklWQVRFX3R5cGVPcmRlcihlKSkge1xuICAgICAgICAgIGNhc2UgMCAvKiBUeXBlT3JkZXIuTnVsbFZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuXG4gICAgICAgICAgY2FzZSAxIC8qIFR5cGVPcmRlci5Cb29sZWFuVmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIGUuYm9vbGVhblZhbHVlO1xuXG4gICAgICAgICAgY2FzZSAyIC8qIFR5cGVPcmRlci5OdW1iZXJWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gX19QUklWQVRFX25vcm1hbGl6ZU51bWJlcihlLmludGVnZXJWYWx1ZSB8fCBlLmRvdWJsZVZhbHVlKTtcblxuICAgICAgICAgIGNhc2UgMyAvKiBUeXBlT3JkZXIuVGltZXN0YW1wVmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydFRpbWVzdGFtcChlLnRpbWVzdGFtcFZhbHVlKTtcblxuICAgICAgICAgIGNhc2UgNCAvKiBUeXBlT3JkZXIuU2VydmVyVGltZXN0YW1wVmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydFNlcnZlclRpbWVzdGFtcChlLCB0KTtcblxuICAgICAgICAgIGNhc2UgNSAvKiBUeXBlT3JkZXIuU3RyaW5nVmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIGUuc3RyaW5nVmFsdWU7XG5cbiAgICAgICAgICBjYXNlIDYgLyogVHlwZU9yZGVyLkJsb2JWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb252ZXJ0Qnl0ZXMoX19QUklWQVRFX25vcm1hbGl6ZUJ5dGVTdHJpbmcoZS5ieXRlc1ZhbHVlKSk7XG5cbiAgICAgICAgICBjYXNlIDcgLyogVHlwZU9yZGVyLlJlZlZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnZlcnRSZWZlcmVuY2UoZS5yZWZlcmVuY2VWYWx1ZSk7XG5cbiAgICAgICAgICBjYXNlIDggLyogVHlwZU9yZGVyLkdlb1BvaW50VmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydEdlb1BvaW50KGUuZ2VvUG9pbnRWYWx1ZSk7XG5cbiAgICAgICAgICBjYXNlIDkgLyogVHlwZU9yZGVyLkFycmF5VmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydEFycmF5KGUuYXJyYXlWYWx1ZSwgdCk7XG5cbiAgICAgICAgICBjYXNlIDEwIC8qIFR5cGVPcmRlci5PYmplY3RWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb252ZXJ0T2JqZWN0KGUubWFwVmFsdWUsIHQpO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRocm93IGZhaWwoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb252ZXJ0T2JqZWN0KGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydE9iamVjdE1hcChlLmZpZWxkcywgdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqLyAgICBjb252ZXJ0T2JqZWN0TWFwKGUsIHQgPSBcIm5vbmVcIikge1xuICAgICAgICBjb25zdCBuID0ge307XG4gICAgICAgIHJldHVybiBmb3JFYWNoKGUsICgoZSwgcikgPT4ge1xuICAgICAgICAgICAgbltlXSA9IHRoaXMuY29udmVydFZhbHVlKHIsIHQpO1xuICAgICAgICB9KSksIG47XG4gICAgfVxuICAgIGNvbnZlcnRHZW9Qb2ludChlKSB7XG4gICAgICAgIHJldHVybiBuZXcgR2VvUG9pbnQoX19QUklWQVRFX25vcm1hbGl6ZU51bWJlcihlLmxhdGl0dWRlKSwgX19QUklWQVRFX25vcm1hbGl6ZU51bWJlcihlLmxvbmdpdHVkZSkpO1xuICAgIH1cbiAgICBjb252ZXJ0QXJyYXkoZSwgdCkge1xuICAgICAgICByZXR1cm4gKGUudmFsdWVzIHx8IFtdKS5tYXAoKGUgPT4gdGhpcy5jb252ZXJ0VmFsdWUoZSwgdCkpKTtcbiAgICB9XG4gICAgY29udmVydFNlcnZlclRpbWVzdGFtcChlLCB0KSB7XG4gICAgICAgIHN3aXRjaCAodCkge1xuICAgICAgICAgIGNhc2UgXCJwcmV2aW91c1wiOlxuICAgICAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9nZXRQcmV2aW91c1ZhbHVlKGUpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGwgPT0gbiA/IG51bGwgOiB0aGlzLmNvbnZlcnRWYWx1ZShuLCB0KTtcblxuICAgICAgICAgIGNhc2UgXCJlc3RpbWF0ZVwiOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydFRpbWVzdGFtcChfX1BSSVZBVEVfZ2V0TG9jYWxXcml0ZVRpbWUoZSkpO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnZlcnRUaW1lc3RhbXAoZSkge1xuICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX25vcm1hbGl6ZVRpbWVzdGFtcChlKTtcbiAgICAgICAgcmV0dXJuIG5ldyBUaW1lc3RhbXAodC5zZWNvbmRzLCB0Lm5hbm9zKTtcbiAgICB9XG4gICAgY29udmVydERvY3VtZW50S2V5KGUsIHQpIHtcbiAgICAgICAgY29uc3QgbiA9IFJlc291cmNlUGF0aC5mcm9tU3RyaW5nKGUpO1xuICAgICAgICBfX1BSSVZBVEVfaGFyZEFzc2VydChfX1BSSVZBVEVfaXNWYWxpZFJlc291cmNlTmFtZShuKSk7XG4gICAgICAgIGNvbnN0IHIgPSBuZXcgRGF0YWJhc2VJZChuLmdldCgxKSwgbi5nZXQoMykpLCBpID0gbmV3IERvY3VtZW50S2V5KG4ucG9wRmlyc3QoNSkpO1xuICAgICAgICByZXR1cm4gci5pc0VxdWFsKHQpIHx8IFxuICAgICAgICAvLyBUT0RPKGIvNjQxMzAyMDIpOiBTb21laG93IHN1cHBvcnQgZm9yZWlnbiByZWZlcmVuY2VzLlxuICAgICAgICBfX1BSSVZBVEVfbG9nRXJyb3IoYERvY3VtZW50ICR7aX0gY29udGFpbnMgYSBkb2N1bWVudCByZWZlcmVuY2Ugd2l0aGluIGEgZGlmZmVyZW50IGRhdGFiYXNlICgke3IucHJvamVjdElkfS8ke3IuZGF0YWJhc2V9KSB3aGljaCBpcyBub3Qgc3VwcG9ydGVkLiBJdCB3aWxsIGJlIHRyZWF0ZWQgYXMgYSByZWZlcmVuY2UgaW4gdGhlIGN1cnJlbnQgZGF0YWJhc2UgKCR7dC5wcm9qZWN0SWR9LyR7dC5kYXRhYmFzZX0pIGluc3RlYWQuYCksIFxuICAgICAgICBpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQ29udmVydHMgY3VzdG9tIG1vZGVsIG9iamVjdCBvZiB0eXBlIFQgaW50byBgRG9jdW1lbnREYXRhYCBieSBhcHBseWluZyB0aGVcbiAqIGNvbnZlcnRlciBpZiBpdCBleGlzdHMuXG4gKlxuICogVGhpcyBmdW5jdGlvbiBpcyB1c2VkIHdoZW4gY29udmVydGluZyB1c2VyIG9iamVjdHMgdG8gYERvY3VtZW50RGF0YWBcbiAqIGJlY2F1c2Ugd2Ugd2FudCB0byBwcm92aWRlIHRoZSB1c2VyIHdpdGggYSBtb3JlIHNwZWNpZmljIGVycm9yIG1lc3NhZ2UgaWZcbiAqIHRoZWlyIGBzZXQoKWAgb3IgZmFpbHMgZHVlIHRvIGludmFsaWQgZGF0YSBvcmlnaW5hdGluZyBmcm9tIGEgYHRvRmlyZXN0b3JlKClgXG4gKiBjYWxsLlxuICovIGZ1bmN0aW9uIF9fUFJJVkFURV9hcHBseUZpcmVzdG9yZURhdGFDb252ZXJ0ZXIoZSwgdCwgbikge1xuICAgIGxldCByO1xuICAgIC8vIENhc3QgdG8gYGFueWAgaW4gb3JkZXIgdG8gc2F0aXNmeSB0aGUgdW5pb24gdHlwZSBjb25zdHJhaW50IG9uXG4gICAgLy8gdG9GaXJlc3RvcmUoKS5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIHJldHVybiByID0gZSA/IG4gJiYgKG4ubWVyZ2UgfHwgbi5tZXJnZUZpZWxkcykgPyBlLnRvRmlyZXN0b3JlKHQsIG4pIDogZS50b0ZpcmVzdG9yZSh0KSA6IHQsIFxuICAgIHI7XG59XG5cbmNsYXNzIF9fUFJJVkFURV9MaXRlVXNlckRhdGFXcml0ZXIgZXh0ZW5kcyBBYnN0cmFjdFVzZXJEYXRhV3JpdGVyIHtcbiAgICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuZmlyZXN0b3JlID0gZTtcbiAgICB9XG4gICAgY29udmVydEJ5dGVzKGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBCeXRlcyhlKTtcbiAgICB9XG4gICAgY29udmVydFJlZmVyZW5jZShlKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmNvbnZlcnREb2N1bWVudEtleShlLCB0aGlzLmZpcmVzdG9yZS5fZGF0YWJhc2VJZCk7XG4gICAgICAgIHJldHVybiBuZXcgRG9jdW1lbnRSZWZlcmVuY2UodGhpcy5maXJlc3RvcmUsIC8qIGNvbnZlcnRlcj0gKi8gbnVsbCwgdCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBDcmVhdGUgYW4gQWdncmVnYXRlRmllbGQgb2JqZWN0IHRoYXQgY2FuIGJlIHVzZWQgdG8gY29tcHV0ZSB0aGUgc3VtIG9mXG4gKiBhIHNwZWNpZmllZCBmaWVsZCBvdmVyIGEgcmFuZ2Ugb2YgZG9jdW1lbnRzIGluIHRoZSByZXN1bHQgc2V0IG9mIGEgcXVlcnkuXG4gKiBAcGFyYW0gZmllbGQgU3BlY2lmaWVzIHRoZSBmaWVsZCB0byBzdW0gYWNyb3NzIHRoZSByZXN1bHQgc2V0LlxuICovIGZ1bmN0aW9uIHN1bShlKSB7XG4gICAgcmV0dXJuIG5ldyBBZ2dyZWdhdGVGaWVsZChcInN1bVwiLCBfX1BSSVZBVEVfZmllbGRQYXRoRnJvbUFyZ3VtZW50JDEoXCJzdW1cIiwgZSkpO1xufVxuXG4vKipcbiAqIENyZWF0ZSBhbiBBZ2dyZWdhdGVGaWVsZCBvYmplY3QgdGhhdCBjYW4gYmUgdXNlZCB0byBjb21wdXRlIHRoZSBhdmVyYWdlIG9mXG4gKiBhIHNwZWNpZmllZCBmaWVsZCBvdmVyIGEgcmFuZ2Ugb2YgZG9jdW1lbnRzIGluIHRoZSByZXN1bHQgc2V0IG9mIGEgcXVlcnkuXG4gKiBAcGFyYW0gZmllbGQgU3BlY2lmaWVzIHRoZSBmaWVsZCB0byBhdmVyYWdlIGFjcm9zcyB0aGUgcmVzdWx0IHNldC5cbiAqLyBmdW5jdGlvbiBhdmVyYWdlKGUpIHtcbiAgICByZXR1cm4gbmV3IEFnZ3JlZ2F0ZUZpZWxkKFwiYXZnXCIsIF9fUFJJVkFURV9maWVsZFBhdGhGcm9tQXJndW1lbnQkMShcImF2ZXJhZ2VcIiwgZSkpO1xufVxuXG4vKipcbiAqIENyZWF0ZSBhbiBBZ2dyZWdhdGVGaWVsZCBvYmplY3QgdGhhdCBjYW4gYmUgdXNlZCB0byBjb21wdXRlIHRoZSBjb3VudCBvZlxuICogZG9jdW1lbnRzIGluIHRoZSByZXN1bHQgc2V0IG9mIGEgcXVlcnkuXG4gKi8gZnVuY3Rpb24gY291bnQoKSB7XG4gICAgcmV0dXJuIG5ldyBBZ2dyZWdhdGVGaWVsZChcImNvdW50XCIpO1xufVxuXG4vKipcbiAqIENvbXBhcmVzIHR3byAnQWdncmVnYXRlRmllbGRgIGluc3RhbmNlcyBmb3IgZXF1YWxpdHkuXG4gKlxuICogQHBhcmFtIGxlZnQgQ29tcGFyZSB0aGlzIEFnZ3JlZ2F0ZUZpZWxkIHRvIHRoZSBgcmlnaHRgLlxuICogQHBhcmFtIHJpZ2h0IENvbXBhcmUgdGhpcyBBZ2dyZWdhdGVGaWVsZCB0byB0aGUgYGxlZnRgLlxuICovIGZ1bmN0aW9uIGFnZ3JlZ2F0ZUZpZWxkRXF1YWwoZSwgdCkge1xuICAgIHZhciBuLCByO1xuICAgIHJldHVybiBlIGluc3RhbmNlb2YgQWdncmVnYXRlRmllbGQgJiYgdCBpbnN0YW5jZW9mIEFnZ3JlZ2F0ZUZpZWxkICYmIGUuYWdncmVnYXRlVHlwZSA9PT0gdC5hZ2dyZWdhdGVUeXBlICYmIChudWxsID09PSAobiA9IGUuX2ludGVybmFsRmllbGRQYXRoKSB8fCB2b2lkIDAgPT09IG4gPyB2b2lkIDAgOiBuLmNhbm9uaWNhbFN0cmluZygpKSA9PT0gKG51bGwgPT09IChyID0gdC5faW50ZXJuYWxGaWVsZFBhdGgpIHx8IHZvaWQgMCA9PT0gciA/IHZvaWQgMCA6IHIuY2Fub25pY2FsU3RyaW5nKCkpO1xufVxuXG4vKipcbiAqIENvbXBhcmVzIHR3byBgQWdncmVnYXRlUXVlcnlTbmFwc2hvdGAgaW5zdGFuY2VzIGZvciBlcXVhbGl0eS5cbiAqXG4gKiBUd28gYEFnZ3JlZ2F0ZVF1ZXJ5U25hcHNob3RgIGluc3RhbmNlcyBhcmUgY29uc2lkZXJlZCBcImVxdWFsXCIgaWYgdGhleSBoYXZlXG4gKiB1bmRlcmx5aW5nIHF1ZXJpZXMgdGhhdCBjb21wYXJlIGVxdWFsLCBhbmQgdGhlIHNhbWUgZGF0YS5cbiAqXG4gKiBAcGFyYW0gbGVmdCAtIFRoZSBmaXJzdCBgQWdncmVnYXRlUXVlcnlTbmFwc2hvdGAgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSByaWdodCAtIFRoZSBzZWNvbmQgYEFnZ3JlZ2F0ZVF1ZXJ5U25hcHNob3RgIHRvIGNvbXBhcmUuXG4gKlxuICogQHJldHVybnMgYHRydWVgIGlmIHRoZSBvYmplY3RzIGFyZSBcImVxdWFsXCIsIGFzIGRlZmluZWQgYWJvdmUsIG9yIGBmYWxzZWBcbiAqIG90aGVyd2lzZS5cbiAqLyBmdW5jdGlvbiBhZ2dyZWdhdGVRdWVyeVNuYXBzaG90RXF1YWwoZSwgdCkge1xuICAgIHJldHVybiBxdWVyeUVxdWFsKGUucXVlcnksIHQucXVlcnkpICYmIGRlZXBFcXVhbChlLmRhdGEoKSwgdC5kYXRhKCkpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBNZXRhZGF0YSBhYm91dCBhIHNuYXBzaG90LCBkZXNjcmliaW5nIHRoZSBzdGF0ZSBvZiB0aGUgc25hcHNob3QuXG4gKi8gY2xhc3MgU25hcHNob3RNZXRhZGF0YSB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMuaGFzUGVuZGluZ1dyaXRlcyA9IGUsIHRoaXMuZnJvbUNhY2hlID0gdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoaXMgYFNuYXBzaG90TWV0YWRhdGFgIGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBvbmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3RoZXIgLSBUaGUgYFNuYXBzaG90TWV0YWRhdGFgIHRvIGNvbXBhcmUgYWdhaW5zdC5cbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoaXMgYFNuYXBzaG90TWV0YWRhdGFgIGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBvbmUuXG4gICAgICovICAgIGlzRXF1YWwoZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5oYXNQZW5kaW5nV3JpdGVzID09PSBlLmhhc1BlbmRpbmdXcml0ZXMgJiYgdGhpcy5mcm9tQ2FjaGUgPT09IGUuZnJvbUNhY2hlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIGBEb2N1bWVudFNuYXBzaG90YCBjb250YWlucyBkYXRhIHJlYWQgZnJvbSBhIGRvY3VtZW50IGluIHlvdXIgRmlyZXN0b3JlXG4gKiBkYXRhYmFzZS4gVGhlIGRhdGEgY2FuIGJlIGV4dHJhY3RlZCB3aXRoIGAuZGF0YSgpYCBvciBgLmdldCg8ZmllbGQ+KWAgdG9cbiAqIGdldCBhIHNwZWNpZmljIGZpZWxkLlxuICpcbiAqIEZvciBhIGBEb2N1bWVudFNuYXBzaG90YCB0aGF0IHBvaW50cyB0byBhIG5vbi1leGlzdGluZyBkb2N1bWVudCwgYW55IGRhdGFcbiAqIGFjY2VzcyB3aWxsIHJldHVybiAndW5kZWZpbmVkJy4gWW91IGNhbiB1c2UgdGhlIGBleGlzdHMoKWAgbWV0aG9kIHRvXG4gKiBleHBsaWNpdGx5IHZlcmlmeSBhIGRvY3VtZW50J3MgZXhpc3RlbmNlLlxuICovIGNsYXNzIERvY3VtZW50U25hcHNob3QgZXh0ZW5kcyBEb2N1bWVudFNuYXBzaG90JDEge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yIHByb3RlY3RlZCAqL1xuICAgIGNvbnN0cnVjdG9yKGUsIHQsIG4sIHIsIGksIHMpIHtcbiAgICAgICAgc3VwZXIoZSwgdCwgbiwgciwgcyksIHRoaXMuX2ZpcmVzdG9yZSA9IGUsIHRoaXMuX2ZpcmVzdG9yZUltcGwgPSBlLCB0aGlzLm1ldGFkYXRhID0gaTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB3aGV0aGVyIG9yIG5vdCB0aGUgZGF0YSBleGlzdHMuIFRydWUgaWYgdGhlIGRvY3VtZW50IGV4aXN0cy5cbiAgICAgKi8gICAgZXhpc3RzKCkge1xuICAgICAgICByZXR1cm4gc3VwZXIuZXhpc3RzKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyBhbGwgZmllbGRzIGluIHRoZSBkb2N1bWVudCBhcyBhbiBgT2JqZWN0YC4gUmV0dXJucyBgdW5kZWZpbmVkYCBpZlxuICAgICAqIHRoZSBkb2N1bWVudCBkb2Vzbid0IGV4aXN0LlxuICAgICAqXG4gICAgICogQnkgZGVmYXVsdCwgYHNlcnZlclRpbWVzdGFtcCgpYCB2YWx1ZXMgdGhhdCBoYXZlIG5vdCB5ZXQgYmVlblxuICAgICAqIHNldCB0byB0aGVpciBmaW5hbCB2YWx1ZSB3aWxsIGJlIHJldHVybmVkIGFzIGBudWxsYC4gWW91IGNhbiBvdmVycmlkZVxuICAgICAqIHRoaXMgYnkgcGFzc2luZyBhbiBvcHRpb25zIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gQW4gb3B0aW9ucyBvYmplY3QgdG8gY29uZmlndXJlIGhvdyBkYXRhIGlzIHJldHJpZXZlZCBmcm9tXG4gICAgICogdGhlIHNuYXBzaG90IChmb3IgZXhhbXBsZSB0aGUgZGVzaXJlZCBiZWhhdmlvciBmb3Igc2VydmVyIHRpbWVzdGFtcHMgdGhhdFxuICAgICAqIGhhdmUgbm90IHlldCBiZWVuIHNldCB0byB0aGVpciBmaW5hbCB2YWx1ZSkuXG4gICAgICogQHJldHVybnMgQW4gYE9iamVjdGAgY29udGFpbmluZyBhbGwgZmllbGRzIGluIHRoZSBkb2N1bWVudCBvciBgdW5kZWZpbmVkYCBpZlxuICAgICAqIHRoZSBkb2N1bWVudCBkb2Vzbid0IGV4aXN0LlxuICAgICAqLyAgICBkYXRhKGUgPSB7fSkge1xuICAgICAgICBpZiAodGhpcy5fZG9jdW1lbnQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9jb252ZXJ0ZXIpIHtcbiAgICAgICAgICAgICAgICAvLyBXZSBvbmx5IHdhbnQgdG8gdXNlIHRoZSBjb252ZXJ0ZXIgYW5kIGNyZWF0ZSBhIG5ldyBEb2N1bWVudFNuYXBzaG90XG4gICAgICAgICAgICAgICAgLy8gaWYgYSBjb252ZXJ0ZXIgaGFzIGJlZW4gcHJvdmlkZWQuXG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IG5ldyBRdWVyeURvY3VtZW50U25hcHNob3QodGhpcy5fZmlyZXN0b3JlLCB0aGlzLl91c2VyRGF0YVdyaXRlciwgdGhpcy5fa2V5LCB0aGlzLl9kb2N1bWVudCwgdGhpcy5tZXRhZGF0YSwgXG4gICAgICAgICAgICAgICAgLyogY29udmVydGVyPSAqLyBudWxsKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fY29udmVydGVyLmZyb21GaXJlc3RvcmUodCwgZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdXNlckRhdGFXcml0ZXIuY29udmVydFZhbHVlKHRoaXMuX2RvY3VtZW50LmRhdGEudmFsdWUsIGUuc2VydmVyVGltZXN0YW1wcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIHRoZSBmaWVsZCBzcGVjaWZpZWQgYnkgYGZpZWxkUGF0aGAuIFJldHVybnMgYHVuZGVmaW5lZGAgaWYgdGhlXG4gICAgICogZG9jdW1lbnQgb3IgZmllbGQgZG9lc24ndCBleGlzdC5cbiAgICAgKlxuICAgICAqIEJ5IGRlZmF1bHQsIGEgYHNlcnZlclRpbWVzdGFtcCgpYCB0aGF0IGhhcyBub3QgeWV0IGJlZW4gc2V0IHRvXG4gICAgICogaXRzIGZpbmFsIHZhbHVlIHdpbGwgYmUgcmV0dXJuZWQgYXMgYG51bGxgLiBZb3UgY2FuIG92ZXJyaWRlIHRoaXMgYnlcbiAgICAgKiBwYXNzaW5nIGFuIG9wdGlvbnMgb2JqZWN0LlxuICAgICAqXG4gICAgICogQHBhcmFtIGZpZWxkUGF0aCAtIFRoZSBwYXRoIChmb3IgZXhhbXBsZSAnZm9vJyBvciAnZm9vLmJhcicpIHRvIGEgc3BlY2lmaWNcbiAgICAgKiBmaWVsZC5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIEFuIG9wdGlvbnMgb2JqZWN0IHRvIGNvbmZpZ3VyZSBob3cgdGhlIGZpZWxkIGlzIHJldHJpZXZlZFxuICAgICAqIGZyb20gdGhlIHNuYXBzaG90IChmb3IgZXhhbXBsZSB0aGUgZGVzaXJlZCBiZWhhdmlvciBmb3Igc2VydmVyIHRpbWVzdGFtcHNcbiAgICAgKiB0aGF0IGhhdmUgbm90IHlldCBiZWVuIHNldCB0byB0aGVpciBmaW5hbCB2YWx1ZSkuXG4gICAgICogQHJldHVybnMgVGhlIGRhdGEgYXQgdGhlIHNwZWNpZmllZCBmaWVsZCBsb2NhdGlvbiBvciB1bmRlZmluZWQgaWYgbm8gc3VjaFxuICAgICAqIGZpZWxkIGV4aXN0cyBpbiB0aGUgZG9jdW1lbnQuXG4gICAgICovXG4gICAgLy8gV2UgYXJlIHVzaW5nIGBhbnlgIGhlcmUgdG8gYXZvaWQgYW4gZXhwbGljaXQgY2FzdCBieSBvdXIgdXNlcnMuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBnZXQoZSwgdCA9IHt9KSB7XG4gICAgICAgIGlmICh0aGlzLl9kb2N1bWVudCkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMuX2RvY3VtZW50LmRhdGEuZmllbGQoX19QUklWQVRFX2ZpZWxkUGF0aEZyb21Bcmd1bWVudChcIkRvY3VtZW50U25hcHNob3QuZ2V0XCIsIGUpKTtcbiAgICAgICAgICAgIGlmIChudWxsICE9PSBuKSByZXR1cm4gdGhpcy5fdXNlckRhdGFXcml0ZXIuY29udmVydFZhbHVlKG4sIHQuc2VydmVyVGltZXN0YW1wcyk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8qKlxuICogQSBgUXVlcnlEb2N1bWVudFNuYXBzaG90YCBjb250YWlucyBkYXRhIHJlYWQgZnJvbSBhIGRvY3VtZW50IGluIHlvdXJcbiAqIEZpcmVzdG9yZSBkYXRhYmFzZSBhcyBwYXJ0IG9mIGEgcXVlcnkuIFRoZSBkb2N1bWVudCBpcyBndWFyYW50ZWVkIHRvIGV4aXN0XG4gKiBhbmQgaXRzIGRhdGEgY2FuIGJlIGV4dHJhY3RlZCB3aXRoIGAuZGF0YSgpYCBvciBgLmdldCg8ZmllbGQ+KWAgdG8gZ2V0IGFcbiAqIHNwZWNpZmljIGZpZWxkLlxuICpcbiAqIEEgYFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdGAgb2ZmZXJzIHRoZSBzYW1lIEFQSSBzdXJmYWNlIGFzIGFcbiAqIGBEb2N1bWVudFNuYXBzaG90YC4gU2luY2UgcXVlcnkgcmVzdWx0cyBjb250YWluIG9ubHkgZXhpc3RpbmcgZG9jdW1lbnRzLCB0aGVcbiAqIGBleGlzdHNgIHByb3BlcnR5IHdpbGwgYWx3YXlzIGJlIHRydWUgYW5kIGBkYXRhKClgIHdpbGwgbmV2ZXIgcmV0dXJuXG4gKiAndW5kZWZpbmVkJy5cbiAqLyBjbGFzcyBRdWVyeURvY3VtZW50U25hcHNob3QgZXh0ZW5kcyBEb2N1bWVudFNuYXBzaG90IHtcbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgYWxsIGZpZWxkcyBpbiB0aGUgZG9jdW1lbnQgYXMgYW4gYE9iamVjdGAuXG4gICAgICpcbiAgICAgKiBCeSBkZWZhdWx0LCBgc2VydmVyVGltZXN0YW1wKClgIHZhbHVlcyB0aGF0IGhhdmUgbm90IHlldCBiZWVuXG4gICAgICogc2V0IHRvIHRoZWlyIGZpbmFsIHZhbHVlIHdpbGwgYmUgcmV0dXJuZWQgYXMgYG51bGxgLiBZb3UgY2FuIG92ZXJyaWRlXG4gICAgICogdGhpcyBieSBwYXNzaW5nIGFuIG9wdGlvbnMgb2JqZWN0LlxuICAgICAqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBBbiBvcHRpb25zIG9iamVjdCB0byBjb25maWd1cmUgaG93IGRhdGEgaXMgcmV0cmlldmVkIGZyb21cbiAgICAgKiB0aGUgc25hcHNob3QgKGZvciBleGFtcGxlIHRoZSBkZXNpcmVkIGJlaGF2aW9yIGZvciBzZXJ2ZXIgdGltZXN0YW1wcyB0aGF0XG4gICAgICogaGF2ZSBub3QgeWV0IGJlZW4gc2V0IHRvIHRoZWlyIGZpbmFsIHZhbHVlKS5cbiAgICAgKiBAcmV0dXJucyBBbiBgT2JqZWN0YCBjb250YWluaW5nIGFsbCBmaWVsZHMgaW4gdGhlIGRvY3VtZW50LlxuICAgICAqL1xuICAgIGRhdGEoZSA9IHt9KSB7XG4gICAgICAgIHJldHVybiBzdXBlci5kYXRhKGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIGBRdWVyeVNuYXBzaG90YCBjb250YWlucyB6ZXJvIG9yIG1vcmUgYERvY3VtZW50U25hcHNob3RgIG9iamVjdHNcbiAqIHJlcHJlc2VudGluZyB0aGUgcmVzdWx0cyBvZiBhIHF1ZXJ5LiBUaGUgZG9jdW1lbnRzIGNhbiBiZSBhY2Nlc3NlZCBhcyBhblxuICogYXJyYXkgdmlhIHRoZSBgZG9jc2AgcHJvcGVydHkgb3IgZW51bWVyYXRlZCB1c2luZyB0aGUgYGZvckVhY2hgIG1ldGhvZC4gVGhlXG4gKiBudW1iZXIgb2YgZG9jdW1lbnRzIGNhbiBiZSBkZXRlcm1pbmVkIHZpYSB0aGUgYGVtcHR5YCBhbmQgYHNpemVgXG4gKiBwcm9wZXJ0aWVzLlxuICovIGNsYXNzIFF1ZXJ5U25hcHNob3Qge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IoZSwgdCwgbiwgcikge1xuICAgICAgICB0aGlzLl9maXJlc3RvcmUgPSBlLCB0aGlzLl91c2VyRGF0YVdyaXRlciA9IHQsIHRoaXMuX3NuYXBzaG90ID0gciwgdGhpcy5tZXRhZGF0YSA9IG5ldyBTbmFwc2hvdE1ldGFkYXRhKHIuaGFzUGVuZGluZ1dyaXRlcywgci5mcm9tQ2FjaGUpLCBcbiAgICAgICAgdGhpcy5xdWVyeSA9IG47XG4gICAgfVxuICAgIC8qKiBBbiBhcnJheSBvZiBhbGwgdGhlIGRvY3VtZW50cyBpbiB0aGUgYFF1ZXJ5U25hcHNob3RgLiAqLyAgICBnZXQgZG9jcygpIHtcbiAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5mb3JFYWNoKCh0ID0+IGUucHVzaCh0KSkpLCBlO1xuICAgIH1cbiAgICAvKiogVGhlIG51bWJlciBvZiBkb2N1bWVudHMgaW4gdGhlIGBRdWVyeVNuYXBzaG90YC4gKi8gICAgZ2V0IHNpemUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zbmFwc2hvdC5kb2NzLnNpemU7XG4gICAgfVxuICAgIC8qKiBUcnVlIGlmIHRoZXJlIGFyZSBubyBkb2N1bWVudHMgaW4gdGhlIGBRdWVyeVNuYXBzaG90YC4gKi8gICAgZ2V0IGVtcHR5KCkge1xuICAgICAgICByZXR1cm4gMCA9PT0gdGhpcy5zaXplO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFbnVtZXJhdGVzIGFsbCBvZiB0aGUgZG9jdW1lbnRzIGluIHRoZSBgUXVlcnlTbmFwc2hvdGAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY2FsbGJhY2sgLSBBIGNhbGxiYWNrIHRvIGJlIGNhbGxlZCB3aXRoIGEgYFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdGAgZm9yXG4gICAgICogZWFjaCBkb2N1bWVudCBpbiB0aGUgc25hcHNob3QuXG4gICAgICogQHBhcmFtIHRoaXNBcmcgLSBUaGUgYHRoaXNgIGJpbmRpbmcgZm9yIHRoZSBjYWxsYmFjay5cbiAgICAgKi8gICAgZm9yRWFjaChlLCB0KSB7XG4gICAgICAgIHRoaXMuX3NuYXBzaG90LmRvY3MuZm9yRWFjaCgobiA9PiB7XG4gICAgICAgICAgICBlLmNhbGwodCwgbmV3IFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdCh0aGlzLl9maXJlc3RvcmUsIHRoaXMuX3VzZXJEYXRhV3JpdGVyLCBuLmtleSwgbiwgbmV3IFNuYXBzaG90TWV0YWRhdGEodGhpcy5fc25hcHNob3QubXV0YXRlZEtleXMuaGFzKG4ua2V5KSwgdGhpcy5fc25hcHNob3QuZnJvbUNhY2hlKSwgdGhpcy5xdWVyeS5jb252ZXJ0ZXIpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFuIGFycmF5IG9mIHRoZSBkb2N1bWVudHMgY2hhbmdlcyBzaW5jZSB0aGUgbGFzdCBzbmFwc2hvdC4gSWYgdGhpc1xuICAgICAqIGlzIHRoZSBmaXJzdCBzbmFwc2hvdCwgYWxsIGRvY3VtZW50cyB3aWxsIGJlIGluIHRoZSBsaXN0IGFzICdhZGRlZCdcbiAgICAgKiBjaGFuZ2VzLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBgU25hcHNob3RMaXN0ZW5PcHRpb25zYCB0aGF0IGNvbnRyb2wgd2hldGhlciBtZXRhZGF0YS1vbmx5XG4gICAgICogY2hhbmdlcyAoaS5lLiBvbmx5IGBEb2N1bWVudFNuYXBzaG90Lm1ldGFkYXRhYCBjaGFuZ2VkKSBzaG91bGQgdHJpZ2dlclxuICAgICAqIHNuYXBzaG90IGV2ZW50cy5cbiAgICAgKi8gICAgZG9jQ2hhbmdlcyhlID0ge30pIHtcbiAgICAgICAgY29uc3QgdCA9ICEhZS5pbmNsdWRlTWV0YWRhdGFDaGFuZ2VzO1xuICAgICAgICBpZiAodCAmJiB0aGlzLl9zbmFwc2hvdC5leGNsdWRlc01ldGFkYXRhQ2hhbmdlcykgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgXCJUbyBpbmNsdWRlIG1ldGFkYXRhIGNoYW5nZXMgd2l0aCB5b3VyIGRvY3VtZW50IGNoYW5nZXMsIHlvdSBtdXN0IGFsc28gcGFzcyB7IGluY2x1ZGVNZXRhZGF0YUNoYW5nZXM6dHJ1ZSB9IHRvIG9uU25hcHNob3QoKS5cIik7XG4gICAgICAgIHJldHVybiB0aGlzLl9jYWNoZWRDaGFuZ2VzICYmIHRoaXMuX2NhY2hlZENoYW5nZXNJbmNsdWRlTWV0YWRhdGFDaGFuZ2VzID09PSB0IHx8ICh0aGlzLl9jYWNoZWRDaGFuZ2VzID0gXG4gICAgICAgIC8qKiBDYWxjdWxhdGVzIHRoZSBhcnJheSBvZiBgRG9jdW1lbnRDaGFuZ2VgcyBmb3IgYSBnaXZlbiBgVmlld1NuYXBzaG90YC4gKi9cbiAgICAgICAgZnVuY3Rpb24gX19QUklWQVRFX2NoYW5nZXNGcm9tU25hcHNob3QoZSwgdCkge1xuICAgICAgICAgICAgaWYgKGUuX3NuYXBzaG90Lm9sZERvY3MuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICAgICAgbGV0IHQgPSAwO1xuICAgICAgICAgICAgICAgIHJldHVybiBlLl9zbmFwc2hvdC5kb2NDaGFuZ2VzLm1hcCgobiA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBuZXcgUXVlcnlEb2N1bWVudFNuYXBzaG90KGUuX2ZpcmVzdG9yZSwgZS5fdXNlckRhdGFXcml0ZXIsIG4uZG9jLmtleSwgbi5kb2MsIG5ldyBTbmFwc2hvdE1ldGFkYXRhKGUuX3NuYXBzaG90Lm11dGF0ZWRLZXlzLmhhcyhuLmRvYy5rZXkpLCBlLl9zbmFwc2hvdC5mcm9tQ2FjaGUpLCBlLnF1ZXJ5LmNvbnZlcnRlcik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuLmRvYywge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJhZGRlZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jOiByLFxuICAgICAgICAgICAgICAgICAgICAgICAgb2xkSW5kZXg6IC0xLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3SW5kZXg6IHQrK1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAvLyBBIGBEb2N1bWVudFNldGAgdGhhdCBpcyB1cGRhdGVkIGluY3JlbWVudGFsbHkgYXMgY2hhbmdlcyBhcmUgYXBwbGllZCB0byB1c2VcbiAgICAgICAgICAgICAgICAvLyB0byBsb29rdXAgdGhlIGluZGV4IG9mIGEgZG9jdW1lbnQuXG4gICAgICAgICAgICAgICAgbGV0IG4gPSBlLl9zbmFwc2hvdC5vbGREb2NzO1xuICAgICAgICAgICAgICAgIHJldHVybiBlLl9zbmFwc2hvdC5kb2NDaGFuZ2VzLmZpbHRlcigoZSA9PiB0IHx8IDMgLyogQ2hhbmdlVHlwZS5NZXRhZGF0YSAqLyAhPT0gZS50eXBlKSkubWFwKCh0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgciA9IG5ldyBRdWVyeURvY3VtZW50U25hcHNob3QoZS5fZmlyZXN0b3JlLCBlLl91c2VyRGF0YVdyaXRlciwgdC5kb2Mua2V5LCB0LmRvYywgbmV3IFNuYXBzaG90TWV0YWRhdGEoZS5fc25hcHNob3QubXV0YXRlZEtleXMuaGFzKHQuZG9jLmtleSksIGUuX3NuYXBzaG90LmZyb21DYWNoZSksIGUucXVlcnkuY29udmVydGVyKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGkgPSAtMSwgcyA9IC0xO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMCAvKiBDaGFuZ2VUeXBlLkFkZGVkICovICE9PSB0LnR5cGUgJiYgKGkgPSBuLmluZGV4T2YodC5kb2Mua2V5KSwgbiA9IG4uZGVsZXRlKHQuZG9jLmtleSkpLCBcbiAgICAgICAgICAgICAgICAgICAgMSAvKiBDaGFuZ2VUeXBlLlJlbW92ZWQgKi8gIT09IHQudHlwZSAmJiAobiA9IG4uYWRkKHQuZG9jKSwgcyA9IG4uaW5kZXhPZih0LmRvYy5rZXkpKSwgXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IF9fUFJJVkFURV9yZXN1bHRDaGFuZ2VUeXBlKHQudHlwZSksXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2M6IHIsXG4gICAgICAgICAgICAgICAgICAgICAgICBvbGRJbmRleDogaSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0luZGV4OiBzXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KHRoaXMsIHQpLCB0aGlzLl9jYWNoZWRDaGFuZ2VzSW5jbHVkZU1ldGFkYXRhQ2hhbmdlcyA9IHQpLCB0aGlzLl9jYWNoZWRDaGFuZ2VzO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3Jlc3VsdENoYW5nZVR5cGUoZSkge1xuICAgIHN3aXRjaCAoZSkge1xuICAgICAgY2FzZSAwIC8qIENoYW5nZVR5cGUuQWRkZWQgKi8gOlxuICAgICAgICByZXR1cm4gXCJhZGRlZFwiO1xuXG4gICAgICBjYXNlIDIgLyogQ2hhbmdlVHlwZS5Nb2RpZmllZCAqLyA6XG4gICAgICBjYXNlIDMgLyogQ2hhbmdlVHlwZS5NZXRhZGF0YSAqLyA6XG4gICAgICAgIHJldHVybiBcIm1vZGlmaWVkXCI7XG5cbiAgICAgIGNhc2UgMSAvKiBDaGFuZ2VUeXBlLlJlbW92ZWQgKi8gOlxuICAgICAgICByZXR1cm4gXCJyZW1vdmVkXCI7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBmYWlsKCk7XG4gICAgfVxufVxuXG4vLyBUT0RPKGZpcmVzdG9yZWV4cCk6IEFkZCB0ZXN0cyBmb3Igc25hcHNob3RFcXVhbCB3aXRoIGRpZmZlcmVudCBzbmFwc2hvdFxuLy8gbWV0YWRhdGFcbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIHRoZSBwcm92aWRlZCBzbmFwc2hvdHMgYXJlIGVxdWFsLlxuICpcbiAqIEBwYXJhbSBsZWZ0IC0gQSBzbmFwc2hvdCB0byBjb21wYXJlLlxuICogQHBhcmFtIHJpZ2h0IC0gQSBzbmFwc2hvdCB0byBjb21wYXJlLlxuICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgc25hcHNob3RzIGFyZSBlcXVhbC5cbiAqLyBmdW5jdGlvbiBzbmFwc2hvdEVxdWFsKGUsIHQpIHtcbiAgICByZXR1cm4gZSBpbnN0YW5jZW9mIERvY3VtZW50U25hcHNob3QgJiYgdCBpbnN0YW5jZW9mIERvY3VtZW50U25hcHNob3QgPyBlLl9maXJlc3RvcmUgPT09IHQuX2ZpcmVzdG9yZSAmJiBlLl9rZXkuaXNFcXVhbCh0Ll9rZXkpICYmIChudWxsID09PSBlLl9kb2N1bWVudCA/IG51bGwgPT09IHQuX2RvY3VtZW50IDogZS5fZG9jdW1lbnQuaXNFcXVhbCh0Ll9kb2N1bWVudCkpICYmIGUuX2NvbnZlcnRlciA9PT0gdC5fY29udmVydGVyIDogZSBpbnN0YW5jZW9mIFF1ZXJ5U25hcHNob3QgJiYgdCBpbnN0YW5jZW9mIFF1ZXJ5U25hcHNob3QgJiYgKGUuX2ZpcmVzdG9yZSA9PT0gdC5fZmlyZXN0b3JlICYmIHF1ZXJ5RXF1YWwoZS5xdWVyeSwgdC5xdWVyeSkgJiYgZS5tZXRhZGF0YS5pc0VxdWFsKHQubWV0YWRhdGEpICYmIGUuX3NuYXBzaG90LmlzRXF1YWwodC5fc25hcHNob3QpKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmVhZHMgdGhlIGRvY3VtZW50IHJlZmVycmVkIHRvIGJ5IHRoaXMgYERvY3VtZW50UmVmZXJlbmNlYC5cbiAqXG4gKiBOb3RlOiBgZ2V0RG9jKClgIGF0dGVtcHRzIHRvIHByb3ZpZGUgdXAtdG8tZGF0ZSBkYXRhIHdoZW4gcG9zc2libGUgYnkgd2FpdGluZ1xuICogZm9yIGRhdGEgZnJvbSB0aGUgc2VydmVyLCBidXQgaXQgbWF5IHJldHVybiBjYWNoZWQgZGF0YSBvciBmYWlsIGlmIHlvdSBhcmVcbiAqIG9mZmxpbmUgYW5kIHRoZSBzZXJ2ZXIgY2Fubm90IGJlIHJlYWNoZWQuIFRvIHNwZWNpZnkgdGhpcyBiZWhhdmlvciwgaW52b2tlXG4gKiB7QGxpbmsgZ2V0RG9jRnJvbUNhY2hlfSBvciB7QGxpbmsgZ2V0RG9jRnJvbVNlcnZlcn0uXG4gKlxuICogQHBhcmFtIHJlZmVyZW5jZSAtIFRoZSByZWZlcmVuY2Ugb2YgdGhlIGRvY3VtZW50IHRvIGZldGNoLlxuICogQHJldHVybnMgQSBQcm9taXNlIHJlc29sdmVkIHdpdGggYSBgRG9jdW1lbnRTbmFwc2hvdGAgY29udGFpbmluZyB0aGVcbiAqIGN1cnJlbnQgZG9jdW1lbnQgY29udGVudHMuXG4gKi8gZnVuY3Rpb24gZ2V0RG9jKGUpIHtcbiAgICBlID0gX19QUklWQVRFX2Nhc3QoZSwgRG9jdW1lbnRSZWZlcmVuY2UpO1xuICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfY2FzdChlLmZpcmVzdG9yZSwgRmlyZXN0b3JlKTtcbiAgICByZXR1cm4gX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudEdldERvY3VtZW50VmlhU25hcHNob3RMaXN0ZW5lcihlbnN1cmVGaXJlc3RvcmVDb25maWd1cmVkKHQpLCBlLl9rZXkpLnRoZW4oKG4gPT4gX19QUklWQVRFX2NvbnZlcnRUb0RvY1NuYXBzaG90KHQsIGUsIG4pKSk7XG59XG5cbmNsYXNzIF9fUFJJVkFURV9FeHBVc2VyRGF0YVdyaXRlciBleHRlbmRzIEFic3RyYWN0VXNlckRhdGFXcml0ZXIge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5maXJlc3RvcmUgPSBlO1xuICAgIH1cbiAgICBjb252ZXJ0Qnl0ZXMoZSkge1xuICAgICAgICByZXR1cm4gbmV3IEJ5dGVzKGUpO1xuICAgIH1cbiAgICBjb252ZXJ0UmVmZXJlbmNlKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuY29udmVydERvY3VtZW50S2V5KGUsIHRoaXMuZmlyZXN0b3JlLl9kYXRhYmFzZUlkKTtcbiAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudFJlZmVyZW5jZSh0aGlzLmZpcmVzdG9yZSwgLyogY29udmVydGVyPSAqLyBudWxsLCB0KTtcbiAgICB9XG59XG5cbi8qKlxuICogUmVhZHMgdGhlIGRvY3VtZW50IHJlZmVycmVkIHRvIGJ5IHRoaXMgYERvY3VtZW50UmVmZXJlbmNlYCBmcm9tIGNhY2hlLlxuICogUmV0dXJucyBhbiBlcnJvciBpZiB0aGUgZG9jdW1lbnQgaXMgbm90IGN1cnJlbnRseSBjYWNoZWQuXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgcmVzb2x2ZWQgd2l0aCBhIGBEb2N1bWVudFNuYXBzaG90YCBjb250YWluaW5nIHRoZVxuICogY3VycmVudCBkb2N1bWVudCBjb250ZW50cy5cbiAqLyBmdW5jdGlvbiBnZXREb2NGcm9tQ2FjaGUoZSkge1xuICAgIGUgPSBfX1BSSVZBVEVfY2FzdChlLCBEb2N1bWVudFJlZmVyZW5jZSk7XG4gICAgY29uc3QgdCA9IF9fUFJJVkFURV9jYXN0KGUuZmlyZXN0b3JlLCBGaXJlc3RvcmUpLCBuID0gZW5zdXJlRmlyZXN0b3JlQ29uZmlndXJlZCh0KSwgciA9IG5ldyBfX1BSSVZBVEVfRXhwVXNlckRhdGFXcml0ZXIodCk7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9maXJlc3RvcmVDbGllbnRHZXREb2N1bWVudEZyb21Mb2NhbENhY2hlKG4sIGUuX2tleSkudGhlbigobiA9PiBuZXcgRG9jdW1lbnRTbmFwc2hvdCh0LCByLCBlLl9rZXksIG4sIG5ldyBTbmFwc2hvdE1ldGFkYXRhKG51bGwgIT09IG4gJiYgbi5oYXNMb2NhbE11dGF0aW9ucywgXG4gICAgLyogZnJvbUNhY2hlPSAqLyAhMCksIGUuY29udmVydGVyKSkpO1xufVxuXG4vKipcbiAqIFJlYWRzIHRoZSBkb2N1bWVudCByZWZlcnJlZCB0byBieSB0aGlzIGBEb2N1bWVudFJlZmVyZW5jZWAgZnJvbSB0aGUgc2VydmVyLlxuICogUmV0dXJucyBhbiBlcnJvciBpZiB0aGUgbmV0d29yayBpcyBub3QgYXZhaWxhYmxlLlxuICpcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHJlc29sdmVkIHdpdGggYSBgRG9jdW1lbnRTbmFwc2hvdGAgY29udGFpbmluZyB0aGVcbiAqIGN1cnJlbnQgZG9jdW1lbnQgY29udGVudHMuXG4gKi8gZnVuY3Rpb24gZ2V0RG9jRnJvbVNlcnZlcihlKSB7XG4gICAgZSA9IF9fUFJJVkFURV9jYXN0KGUsIERvY3VtZW50UmVmZXJlbmNlKTtcbiAgICBjb25zdCB0ID0gX19QUklWQVRFX2Nhc3QoZS5maXJlc3RvcmUsIEZpcmVzdG9yZSk7XG4gICAgcmV0dXJuIF9fUFJJVkFURV9maXJlc3RvcmVDbGllbnRHZXREb2N1bWVudFZpYVNuYXBzaG90TGlzdGVuZXIoZW5zdXJlRmlyZXN0b3JlQ29uZmlndXJlZCh0KSwgZS5fa2V5LCB7XG4gICAgICAgIHNvdXJjZTogXCJzZXJ2ZXJcIlxuICAgIH0pLnRoZW4oKG4gPT4gX19QUklWQVRFX2NvbnZlcnRUb0RvY1NuYXBzaG90KHQsIGUsIG4pKSk7XG59XG5cbi8qKlxuICogRXhlY3V0ZXMgdGhlIHF1ZXJ5IGFuZCByZXR1cm5zIHRoZSByZXN1bHRzIGFzIGEgYFF1ZXJ5U25hcHNob3RgLlxuICpcbiAqIE5vdGU6IGBnZXREb2NzKClgIGF0dGVtcHRzIHRvIHByb3ZpZGUgdXAtdG8tZGF0ZSBkYXRhIHdoZW4gcG9zc2libGUgYnlcbiAqIHdhaXRpbmcgZm9yIGRhdGEgZnJvbSB0aGUgc2VydmVyLCBidXQgaXQgbWF5IHJldHVybiBjYWNoZWQgZGF0YSBvciBmYWlsIGlmXG4gKiB5b3UgYXJlIG9mZmxpbmUgYW5kIHRoZSBzZXJ2ZXIgY2Fubm90IGJlIHJlYWNoZWQuIFRvIHNwZWNpZnkgdGhpcyBiZWhhdmlvcixcbiAqIGludm9rZSB7QGxpbmsgZ2V0RG9jc0Zyb21DYWNoZX0gb3Ige0BsaW5rIGdldERvY3NGcm9tU2VydmVyfS5cbiAqXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IHdpbGwgYmUgcmVzb2x2ZWQgd2l0aCB0aGUgcmVzdWx0cyBvZiB0aGUgcXVlcnkuXG4gKi8gZnVuY3Rpb24gZ2V0RG9jcyhlKSB7XG4gICAgZSA9IF9fUFJJVkFURV9jYXN0KGUsIFF1ZXJ5KTtcbiAgICBjb25zdCB0ID0gX19QUklWQVRFX2Nhc3QoZS5maXJlc3RvcmUsIEZpcmVzdG9yZSksIG4gPSBlbnN1cmVGaXJlc3RvcmVDb25maWd1cmVkKHQpLCByID0gbmV3IF9fUFJJVkFURV9FeHBVc2VyRGF0YVdyaXRlcih0KTtcbiAgICByZXR1cm4gX19QUklWQVRFX3ZhbGlkYXRlSGFzRXhwbGljaXRPcmRlckJ5Rm9yTGltaXRUb0xhc3QoZS5fcXVlcnkpLCBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50R2V0RG9jdW1lbnRzVmlhU25hcHNob3RMaXN0ZW5lcihuLCBlLl9xdWVyeSkudGhlbigobiA9PiBuZXcgUXVlcnlTbmFwc2hvdCh0LCByLCBlLCBuKSkpO1xufVxuXG4vKipcbiAqIEV4ZWN1dGVzIHRoZSBxdWVyeSBhbmQgcmV0dXJucyB0aGUgcmVzdWx0cyBhcyBhIGBRdWVyeVNuYXBzaG90YCBmcm9tIGNhY2hlLlxuICogUmV0dXJucyBhbiBlbXB0eSByZXN1bHQgc2V0IGlmIG5vIGRvY3VtZW50cyBtYXRjaGluZyB0aGUgcXVlcnkgYXJlIGN1cnJlbnRseVxuICogY2FjaGVkLlxuICpcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgd2lsbCBiZSByZXNvbHZlZCB3aXRoIHRoZSByZXN1bHRzIG9mIHRoZSBxdWVyeS5cbiAqLyBmdW5jdGlvbiBnZXREb2NzRnJvbUNhY2hlKGUpIHtcbiAgICBlID0gX19QUklWQVRFX2Nhc3QoZSwgUXVlcnkpO1xuICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfY2FzdChlLmZpcmVzdG9yZSwgRmlyZXN0b3JlKSwgbiA9IGVuc3VyZUZpcmVzdG9yZUNvbmZpZ3VyZWQodCksIHIgPSBuZXcgX19QUklWQVRFX0V4cFVzZXJEYXRhV3JpdGVyKHQpO1xuICAgIHJldHVybiBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50R2V0RG9jdW1lbnRzRnJvbUxvY2FsQ2FjaGUobiwgZS5fcXVlcnkpLnRoZW4oKG4gPT4gbmV3IFF1ZXJ5U25hcHNob3QodCwgciwgZSwgbikpKTtcbn1cblxuLyoqXG4gKiBFeGVjdXRlcyB0aGUgcXVlcnkgYW5kIHJldHVybnMgdGhlIHJlc3VsdHMgYXMgYSBgUXVlcnlTbmFwc2hvdGAgZnJvbSB0aGVcbiAqIHNlcnZlci4gUmV0dXJucyBhbiBlcnJvciBpZiB0aGUgbmV0d29yayBpcyBub3QgYXZhaWxhYmxlLlxuICpcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgd2lsbCBiZSByZXNvbHZlZCB3aXRoIHRoZSByZXN1bHRzIG9mIHRoZSBxdWVyeS5cbiAqLyBmdW5jdGlvbiBnZXREb2NzRnJvbVNlcnZlcihlKSB7XG4gICAgZSA9IF9fUFJJVkFURV9jYXN0KGUsIFF1ZXJ5KTtcbiAgICBjb25zdCB0ID0gX19QUklWQVRFX2Nhc3QoZS5maXJlc3RvcmUsIEZpcmVzdG9yZSksIG4gPSBlbnN1cmVGaXJlc3RvcmVDb25maWd1cmVkKHQpLCByID0gbmV3IF9fUFJJVkFURV9FeHBVc2VyRGF0YVdyaXRlcih0KTtcbiAgICByZXR1cm4gX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudEdldERvY3VtZW50c1ZpYVNuYXBzaG90TGlzdGVuZXIobiwgZS5fcXVlcnksIHtcbiAgICAgICAgc291cmNlOiBcInNlcnZlclwiXG4gICAgfSkudGhlbigobiA9PiBuZXcgUXVlcnlTbmFwc2hvdCh0LCByLCBlLCBuKSkpO1xufVxuXG5mdW5jdGlvbiBzZXREb2MoZSwgdCwgbikge1xuICAgIGUgPSBfX1BSSVZBVEVfY2FzdChlLCBEb2N1bWVudFJlZmVyZW5jZSk7XG4gICAgY29uc3QgciA9IF9fUFJJVkFURV9jYXN0KGUuZmlyZXN0b3JlLCBGaXJlc3RvcmUpLCBpID0gX19QUklWQVRFX2FwcGx5RmlyZXN0b3JlRGF0YUNvbnZlcnRlcihlLmNvbnZlcnRlciwgdCwgbik7XG4gICAgcmV0dXJuIGV4ZWN1dGVXcml0ZShyLCBbIF9fUFJJVkFURV9wYXJzZVNldERhdGEoX19QUklWQVRFX25ld1VzZXJEYXRhUmVhZGVyKHIpLCBcInNldERvY1wiLCBlLl9rZXksIGksIG51bGwgIT09IGUuY29udmVydGVyLCBuKS50b011dGF0aW9uKGUuX2tleSwgUHJlY29uZGl0aW9uLm5vbmUoKSkgXSk7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZURvYyhlLCB0LCBuLCAuLi5yKSB7XG4gICAgZSA9IF9fUFJJVkFURV9jYXN0KGUsIERvY3VtZW50UmVmZXJlbmNlKTtcbiAgICBjb25zdCBpID0gX19QUklWQVRFX2Nhc3QoZS5maXJlc3RvcmUsIEZpcmVzdG9yZSksIHMgPSBfX1BSSVZBVEVfbmV3VXNlckRhdGFSZWFkZXIoaSk7XG4gICAgbGV0IG87XG4gICAgbyA9IFwic3RyaW5nXCIgPT0gdHlwZW9mIChcbiAgICAvLyBGb3IgQ29tcGF0IHR5cGVzLCB3ZSBoYXZlIHRvIFwiZXh0cmFjdFwiIHRoZSB1bmRlcmx5aW5nIHR5cGVzIGJlZm9yZVxuICAgIC8vIHBlcmZvcm1pbmcgdmFsaWRhdGlvbi5cbiAgICB0ID0gZ2V0TW9kdWxhckluc3RhbmNlKHQpKSB8fCB0IGluc3RhbmNlb2YgRmllbGRQYXRoID8gX19QUklWQVRFX3BhcnNlVXBkYXRlVmFyYXJncyhzLCBcInVwZGF0ZURvY1wiLCBlLl9rZXksIHQsIG4sIHIpIDogX19QUklWQVRFX3BhcnNlVXBkYXRlRGF0YShzLCBcInVwZGF0ZURvY1wiLCBlLl9rZXksIHQpO1xuICAgIHJldHVybiBleGVjdXRlV3JpdGUoaSwgWyBvLnRvTXV0YXRpb24oZS5fa2V5LCBQcmVjb25kaXRpb24uZXhpc3RzKCEwKSkgXSk7XG59XG5cbi8qKlxuICogRGVsZXRlcyB0aGUgZG9jdW1lbnQgcmVmZXJyZWQgdG8gYnkgdGhlIHNwZWNpZmllZCBgRG9jdW1lbnRSZWZlcmVuY2VgLlxuICpcbiAqIEBwYXJhbSByZWZlcmVuY2UgLSBBIHJlZmVyZW5jZSB0byB0aGUgZG9jdW1lbnQgdG8gZGVsZXRlLlxuICogQHJldHVybnMgQSBQcm9taXNlIHJlc29sdmVkIG9uY2UgdGhlIGRvY3VtZW50IGhhcyBiZWVuIHN1Y2Nlc3NmdWxseVxuICogZGVsZXRlZCBmcm9tIHRoZSBiYWNrZW5kIChub3RlIHRoYXQgaXQgd29uJ3QgcmVzb2x2ZSB3aGlsZSB5b3UncmUgb2ZmbGluZSkuXG4gKi8gZnVuY3Rpb24gZGVsZXRlRG9jKGUpIHtcbiAgICByZXR1cm4gZXhlY3V0ZVdyaXRlKF9fUFJJVkFURV9jYXN0KGUuZmlyZXN0b3JlLCBGaXJlc3RvcmUpLCBbIG5ldyBfX1BSSVZBVEVfRGVsZXRlTXV0YXRpb24oZS5fa2V5LCBQcmVjb25kaXRpb24ubm9uZSgpKSBdKTtcbn1cblxuLyoqXG4gKiBBZGQgYSBuZXcgZG9jdW1lbnQgdG8gc3BlY2lmaWVkIGBDb2xsZWN0aW9uUmVmZXJlbmNlYCB3aXRoIHRoZSBnaXZlbiBkYXRhLFxuICogYXNzaWduaW5nIGl0IGEgZG9jdW1lbnQgSUQgYXV0b21hdGljYWxseS5cbiAqXG4gKiBAcGFyYW0gcmVmZXJlbmNlIC0gQSByZWZlcmVuY2UgdG8gdGhlIGNvbGxlY3Rpb24gdG8gYWRkIHRoaXMgZG9jdW1lbnQgdG8uXG4gKiBAcGFyYW0gZGF0YSAtIEFuIE9iamVjdCBjb250YWluaW5nIHRoZSBkYXRhIGZvciB0aGUgbmV3IGRvY3VtZW50LlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgcmVzb2x2ZWQgd2l0aCBhIGBEb2N1bWVudFJlZmVyZW5jZWAgcG9pbnRpbmcgdG8gdGhlXG4gKiBuZXdseSBjcmVhdGVkIGRvY3VtZW50IGFmdGVyIGl0IGhhcyBiZWVuIHdyaXR0ZW4gdG8gdGhlIGJhY2tlbmQgKE5vdGUgdGhhdCBpdFxuICogd29uJ3QgcmVzb2x2ZSB3aGlsZSB5b3UncmUgb2ZmbGluZSkuXG4gKi8gZnVuY3Rpb24gYWRkRG9jKGUsIHQpIHtcbiAgICBjb25zdCBuID0gX19QUklWQVRFX2Nhc3QoZS5maXJlc3RvcmUsIEZpcmVzdG9yZSksIHIgPSBkb2MoZSksIGkgPSBfX1BSSVZBVEVfYXBwbHlGaXJlc3RvcmVEYXRhQ29udmVydGVyKGUuY29udmVydGVyLCB0KTtcbiAgICByZXR1cm4gZXhlY3V0ZVdyaXRlKG4sIFsgX19QUklWQVRFX3BhcnNlU2V0RGF0YShfX1BSSVZBVEVfbmV3VXNlckRhdGFSZWFkZXIoZS5maXJlc3RvcmUpLCBcImFkZERvY1wiLCByLl9rZXksIGksIG51bGwgIT09IGUuY29udmVydGVyLCB7fSkudG9NdXRhdGlvbihyLl9rZXksIFByZWNvbmRpdGlvbi5leGlzdHMoITEpKSBdKS50aGVuKCgoKSA9PiByKSk7XG59XG5cbmZ1bmN0aW9uIG9uU25hcHNob3QoZSwgLi4udCkge1xuICAgIHZhciBuLCByLCBpO1xuICAgIGUgPSBnZXRNb2R1bGFySW5zdGFuY2UoZSk7XG4gICAgbGV0IHMgPSB7XG4gICAgICAgIGluY2x1ZGVNZXRhZGF0YUNoYW5nZXM6ICExXG4gICAgfSwgbyA9IDA7XG4gICAgXCJvYmplY3RcIiAhPSB0eXBlb2YgdFtvXSB8fCBfX1BSSVZBVEVfaXNQYXJ0aWFsT2JzZXJ2ZXIodFtvXSkgfHwgKHMgPSB0W29dLCBvKyspO1xuICAgIGNvbnN0IF8gPSB7XG4gICAgICAgIGluY2x1ZGVNZXRhZGF0YUNoYW5nZXM6IHMuaW5jbHVkZU1ldGFkYXRhQ2hhbmdlc1xuICAgIH07XG4gICAgaWYgKF9fUFJJVkFURV9pc1BhcnRpYWxPYnNlcnZlcih0W29dKSkge1xuICAgICAgICBjb25zdCBlID0gdFtvXTtcbiAgICAgICAgdFtvXSA9IG51bGwgPT09IChuID0gZS5uZXh0KSB8fCB2b2lkIDAgPT09IG4gPyB2b2lkIDAgOiBuLmJpbmQoZSksIHRbbyArIDFdID0gbnVsbCA9PT0gKHIgPSBlLmVycm9yKSB8fCB2b2lkIDAgPT09IHIgPyB2b2lkIDAgOiByLmJpbmQoZSksIFxuICAgICAgICB0W28gKyAyXSA9IG51bGwgPT09IChpID0gZS5jb21wbGV0ZSkgfHwgdm9pZCAwID09PSBpID8gdm9pZCAwIDogaS5iaW5kKGUpO1xuICAgIH1cbiAgICBsZXQgYSwgdSwgYztcbiAgICBpZiAoZSBpbnN0YW5jZW9mIERvY3VtZW50UmVmZXJlbmNlKSB1ID0gX19QUklWQVRFX2Nhc3QoZS5maXJlc3RvcmUsIEZpcmVzdG9yZSksIFxuICAgIGMgPSBfX1BSSVZBVEVfbmV3UXVlcnlGb3JQYXRoKGUuX2tleS5wYXRoKSwgYSA9IHtcbiAgICAgICAgbmV4dDogbiA9PiB7XG4gICAgICAgICAgICB0W29dICYmIHRbb10oX19QUklWQVRFX2NvbnZlcnRUb0RvY1NuYXBzaG90KHUsIGUsIG4pKTtcbiAgICAgICAgfSxcbiAgICAgICAgZXJyb3I6IHRbbyArIDFdLFxuICAgICAgICBjb21wbGV0ZTogdFtvICsgMl1cbiAgICB9OyBlbHNlIHtcbiAgICAgICAgY29uc3QgbiA9IF9fUFJJVkFURV9jYXN0KGUsIFF1ZXJ5KTtcbiAgICAgICAgdSA9IF9fUFJJVkFURV9jYXN0KG4uZmlyZXN0b3JlLCBGaXJlc3RvcmUpLCBjID0gbi5fcXVlcnk7XG4gICAgICAgIGNvbnN0IHIgPSBuZXcgX19QUklWQVRFX0V4cFVzZXJEYXRhV3JpdGVyKHUpO1xuICAgICAgICBhID0ge1xuICAgICAgICAgICAgbmV4dDogZSA9PiB7XG4gICAgICAgICAgICAgICAgdFtvXSAmJiB0W29dKG5ldyBRdWVyeVNuYXBzaG90KHUsIHIsIG4sIGUpKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogdFtvICsgMV0sXG4gICAgICAgICAgICBjb21wbGV0ZTogdFtvICsgMl1cbiAgICAgICAgfSwgX19QUklWQVRFX3ZhbGlkYXRlSGFzRXhwbGljaXRPcmRlckJ5Rm9yTGltaXRUb0xhc3QoZS5fcXVlcnkpO1xuICAgIH1cbiAgICByZXR1cm4gZnVuY3Rpb24gX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudExpc3RlbihlLCB0LCBuLCByKSB7XG4gICAgICAgIGNvbnN0IGkgPSBuZXcgX19QUklWQVRFX0FzeW5jT2JzZXJ2ZXIociksIHMgPSBuZXcgX19QUklWQVRFX1F1ZXJ5TGlzdGVuZXIodCwgaSwgbik7XG4gICAgICAgIHJldHVybiBlLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gX19QUklWQVRFX2V2ZW50TWFuYWdlckxpc3Rlbihhd2FpdCBfX1BSSVZBVEVfZ2V0RXZlbnRNYW5hZ2VyKGUpLCBzKSkpLCBcbiAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgaS5OYSgpLCBlLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gX19QUklWQVRFX2V2ZW50TWFuYWdlclVubGlzdGVuKGF3YWl0IF9fUFJJVkFURV9nZXRFdmVudE1hbmFnZXIoZSksIHMpKSk7XG4gICAgICAgIH07XG4gICAgfShlbnN1cmVGaXJlc3RvcmVDb25maWd1cmVkKHUpLCBjLCBfLCBhKTtcbn1cblxuZnVuY3Rpb24gb25TbmFwc2hvdHNJblN5bmMoZSwgdCkge1xuICAgIHJldHVybiBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50QWRkU25hcHNob3RzSW5TeW5jTGlzdGVuZXIoZW5zdXJlRmlyZXN0b3JlQ29uZmlndXJlZChlID0gX19QUklWQVRFX2Nhc3QoZSwgRmlyZXN0b3JlKSksIF9fUFJJVkFURV9pc1BhcnRpYWxPYnNlcnZlcih0KSA/IHQgOiB7XG4gICAgICAgIG5leHQ6IHRcbiAgICB9KTtcbn1cblxuLyoqXG4gKiBMb2NhbGx5IHdyaXRlcyBgbXV0YXRpb25zYCBvbiB0aGUgYXN5bmMgcXVldWUuXG4gKiBAaW50ZXJuYWxcbiAqLyBmdW5jdGlvbiBleGVjdXRlV3JpdGUoZSwgdCkge1xuICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50V3JpdGUoZSwgdCkge1xuICAgICAgICBjb25zdCBuID0gbmV3IF9fUFJJVkFURV9EZWZlcnJlZDtcbiAgICAgICAgcmV0dXJuIGUuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiBfX1BSSVZBVEVfc3luY0VuZ2luZVdyaXRlKGF3YWl0IF9fUFJJVkFURV9nZXRTeW5jRW5naW5lKGUpLCB0LCBuKSkpLCBcbiAgICAgICAgbi5wcm9taXNlO1xuICAgIH0oZW5zdXJlRmlyZXN0b3JlQ29uZmlndXJlZChlKSwgdCk7XG59XG5cbi8qKlxuICogQ29udmVydHMgYSB7QGxpbmsgVmlld1NuYXBzaG90fSB0aGF0IGNvbnRhaW5zIHRoZSBzaW5nbGUgZG9jdW1lbnQgc3BlY2lmaWVkIGJ5IGByZWZgXG4gKiB0byBhIHtAbGluayBEb2N1bWVudFNuYXBzaG90fS5cbiAqLyBmdW5jdGlvbiBfX1BSSVZBVEVfY29udmVydFRvRG9jU25hcHNob3QoZSwgdCwgbikge1xuICAgIGNvbnN0IHIgPSBuLmRvY3MuZ2V0KHQuX2tleSksIGkgPSBuZXcgX19QUklWQVRFX0V4cFVzZXJEYXRhV3JpdGVyKGUpO1xuICAgIHJldHVybiBuZXcgRG9jdW1lbnRTbmFwc2hvdChlLCBpLCB0Ll9rZXksIHIsIG5ldyBTbmFwc2hvdE1ldGFkYXRhKG4uaGFzUGVuZGluZ1dyaXRlcywgbi5mcm9tQ2FjaGUpLCB0LmNvbnZlcnRlcik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIG51bWJlciBvZiBkb2N1bWVudHMgaW4gdGhlIHJlc3VsdCBzZXQgb2YgdGhlIGdpdmVuIHF1ZXJ5LFxuICogd2l0aG91dCBhY3R1YWxseSBkb3dubG9hZGluZyB0aGUgZG9jdW1lbnRzLlxuICpcbiAqIFVzaW5nIHRoaXMgZnVuY3Rpb24gdG8gY291bnQgdGhlIGRvY3VtZW50cyBpcyBlZmZpY2llbnQgYmVjYXVzZSBvbmx5IHRoZVxuICogZmluYWwgY291bnQsIG5vdCB0aGUgZG9jdW1lbnRzJyBkYXRhLCBpcyBkb3dubG9hZGVkLiBUaGlzIGZ1bmN0aW9uIGNhbiBldmVuXG4gKiBjb3VudCB0aGUgZG9jdW1lbnRzIGlmIHRoZSByZXN1bHQgc2V0IHdvdWxkIGJlIHByb2hpYml0aXZlbHkgbGFyZ2UgdG9cbiAqIGRvd25sb2FkIGVudGlyZWx5IChlLmcuIHRob3VzYW5kcyBvZiBkb2N1bWVudHMpLlxuICpcbiAqIFRoZSByZXN1bHQgcmVjZWl2ZWQgZnJvbSB0aGUgc2VydmVyIGlzIHByZXNlbnRlZCwgdW5hbHRlcmVkLCB3aXRob3V0XG4gKiBjb25zaWRlcmluZyBhbnkgbG9jYWwgc3RhdGUuIFRoYXQgaXMsIGRvY3VtZW50cyBpbiB0aGUgbG9jYWwgY2FjaGUgYXJlIG5vdFxuICogdGFrZW4gaW50byBjb25zaWRlcmF0aW9uLCBuZWl0aGVyIGFyZSBsb2NhbCBtb2RpZmljYXRpb25zIG5vdCB5ZXRcbiAqIHN5bmNocm9uaXplZCB3aXRoIHRoZSBzZXJ2ZXIuIFByZXZpb3VzbHktZG93bmxvYWRlZCByZXN1bHRzLCBpZiBhbnksIGFyZSBub3RcbiAqIHVzZWQ6IGV2ZXJ5IHJlcXVlc3QgdXNpbmcgdGhpcyBzb3VyY2UgbmVjZXNzYXJpbHkgaW52b2x2ZXMgYSByb3VuZCB0cmlwIHRvXG4gKiB0aGUgc2VydmVyLlxuICpcbiAqIEBwYXJhbSBxdWVyeSAtIFRoZSBxdWVyeSB3aG9zZSByZXN1bHQgc2V0IHNpemUgdG8gY2FsY3VsYXRlLlxuICogQHJldHVybnMgQSBQcm9taXNlIHRoYXQgd2lsbCBiZSByZXNvbHZlZCB3aXRoIHRoZSBjb3VudDsgdGhlIGNvdW50IGNhbiBiZVxuICogcmV0cmlldmVkIGZyb20gYHNuYXBzaG90LmRhdGEoKS5jb3VudGAsIHdoZXJlIGBzbmFwc2hvdGAgaXMgdGhlXG4gKiBgQWdncmVnYXRlUXVlcnlTbmFwc2hvdGAgdG8gd2hpY2ggdGhlIHJldHVybmVkIFByb21pc2UgcmVzb2x2ZXMuXG4gKi8gZnVuY3Rpb24gZ2V0Q291bnRGcm9tU2VydmVyKGUpIHtcbiAgICByZXR1cm4gZ2V0QWdncmVnYXRlRnJvbVNlcnZlcihlLCB7XG4gICAgICAgIGNvdW50OiBjb3VudCgpXG4gICAgfSk7XG59XG5cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgc3BlY2lmaWVkIGFnZ3JlZ2F0aW9ucyBvdmVyIHRoZSBkb2N1bWVudHMgaW4gdGhlIHJlc3VsdFxuICogc2V0IG9mIHRoZSBnaXZlbiBxdWVyeSwgd2l0aG91dCBhY3R1YWxseSBkb3dubG9hZGluZyB0aGUgZG9jdW1lbnRzLlxuICpcbiAqIFVzaW5nIHRoaXMgZnVuY3Rpb24gdG8gcGVyZm9ybSBhZ2dyZWdhdGlvbnMgaXMgZWZmaWNpZW50IGJlY2F1c2Ugb25seSB0aGVcbiAqIGZpbmFsIGFnZ3JlZ2F0aW9uIHZhbHVlcywgbm90IHRoZSBkb2N1bWVudHMnIGRhdGEsIGFyZSBkb3dubG9hZGVkLiBUaGlzXG4gKiBmdW5jdGlvbiBjYW4gZXZlbiBwZXJmb3JtIGFnZ3JlZ2F0aW9ucyBvZiB0aGUgZG9jdW1lbnRzIGlmIHRoZSByZXN1bHQgc2V0XG4gKiB3b3VsZCBiZSBwcm9oaWJpdGl2ZWx5IGxhcmdlIHRvIGRvd25sb2FkIGVudGlyZWx5IChlLmcuIHRob3VzYW5kcyBvZiBkb2N1bWVudHMpLlxuICpcbiAqIFRoZSByZXN1bHQgcmVjZWl2ZWQgZnJvbSB0aGUgc2VydmVyIGlzIHByZXNlbnRlZCwgdW5hbHRlcmVkLCB3aXRob3V0XG4gKiBjb25zaWRlcmluZyBhbnkgbG9jYWwgc3RhdGUuIFRoYXQgaXMsIGRvY3VtZW50cyBpbiB0aGUgbG9jYWwgY2FjaGUgYXJlIG5vdFxuICogdGFrZW4gaW50byBjb25zaWRlcmF0aW9uLCBuZWl0aGVyIGFyZSBsb2NhbCBtb2RpZmljYXRpb25zIG5vdCB5ZXRcbiAqIHN5bmNocm9uaXplZCB3aXRoIHRoZSBzZXJ2ZXIuIFByZXZpb3VzbHktZG93bmxvYWRlZCByZXN1bHRzLCBpZiBhbnksIGFyZSBub3RcbiAqIHVzZWQ6IGV2ZXJ5IHJlcXVlc3QgdXNpbmcgdGhpcyBzb3VyY2UgbmVjZXNzYXJpbHkgaW52b2x2ZXMgYSByb3VuZCB0cmlwIHRvXG4gKiB0aGUgc2VydmVyLlxuICpcbiAqIEBwYXJhbSBxdWVyeSBUaGUgcXVlcnkgd2hvc2UgcmVzdWx0IHNldCB0byBhZ2dyZWdhdGUgb3Zlci5cbiAqIEBwYXJhbSBhZ2dyZWdhdGVTcGVjIEFuIGBBZ2dyZWdhdGVTcGVjYCBvYmplY3QgdGhhdCBzcGVjaWZpZXMgdGhlIGFnZ3JlZ2F0ZXNcbiAqIHRvIHBlcmZvcm0gb3ZlciB0aGUgcmVzdWx0IHNldC4gVGhlIEFnZ3JlZ2F0ZVNwZWMgc3BlY2lmaWVzIGFsaWFzZXMgZm9yIGVhY2hcbiAqIGFnZ3JlZ2F0ZSwgd2hpY2ggY2FuIGJlIHVzZWQgdG8gcmV0cmlldmUgdGhlIGFnZ3JlZ2F0ZSByZXN1bHQuXG4gKiBAZXhhbXBsZVxuICogYGBgdHlwZXNjcmlwdFxuICogY29uc3QgYWdncmVnYXRlU25hcHNob3QgPSBhd2FpdCBnZXRBZ2dyZWdhdGVGcm9tU2VydmVyKHF1ZXJ5LCB7XG4gKiAgIGNvdW50T2ZEb2NzOiBjb3VudCgpLFxuICogICB0b3RhbEhvdXJzOiBzdW0oJ2hvdXJzJyksXG4gKiAgIGF2ZXJhZ2VTY29yZTogYXZlcmFnZSgnc2NvcmUnKVxuICogfSk7XG4gKlxuICogY29uc3QgY291bnRPZkRvY3M6IG51bWJlciA9IGFnZ3JlZ2F0ZVNuYXBzaG90LmRhdGEoKS5jb3VudE9mRG9jcztcbiAqIGNvbnN0IHRvdGFsSG91cnM6IG51bWJlciA9IGFnZ3JlZ2F0ZVNuYXBzaG90LmRhdGEoKS50b3RhbEhvdXJzO1xuICogY29uc3QgYXZlcmFnZVNjb3JlOiBudW1iZXIgfCBudWxsID0gYWdncmVnYXRlU25hcHNob3QuZGF0YSgpLmF2ZXJhZ2VTY29yZTtcbiAqIGBgYFxuICovIGZ1bmN0aW9uIGdldEFnZ3JlZ2F0ZUZyb21TZXJ2ZXIoZSwgdCkge1xuICAgIGNvbnN0IG4gPSBfX1BSSVZBVEVfY2FzdChlLmZpcmVzdG9yZSwgRmlyZXN0b3JlKSwgciA9IGVuc3VyZUZpcmVzdG9yZUNvbmZpZ3VyZWQobiksIGkgPSBmdW5jdGlvbiBfX1BSSVZBVEVfbWFwVG9BcnJheShlLCB0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCByIGluIGUpIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLCByKSAmJiBuLnB1c2godChlW3JdLCByLCBlKSk7XG4gICAgICAgIHJldHVybiBuO1xuICAgIH0odCwgKChlLCB0KSA9PiBuZXcgX19QUklWQVRFX0FnZ3JlZ2F0ZUltcGwodCwgZS5hZ2dyZWdhdGVUeXBlLCBlLl9pbnRlcm5hbEZpZWxkUGF0aCkpKTtcbiAgICAvLyBSdW4gdGhlIGFnZ3JlZ2F0aW9uIGFuZCBjb252ZXJ0IHRoZSByZXN1bHRzXG4gICAgcmV0dXJuIGZ1bmN0aW9uIF9fUFJJVkFURV9maXJlc3RvcmVDbGllbnRSdW5BZ2dyZWdhdGVRdWVyeShlLCB0LCBuKSB7XG4gICAgICAgIGNvbnN0IHIgPSBuZXcgX19QUklWQVRFX0RlZmVycmVkO1xuICAgICAgICByZXR1cm4gZS5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIC8vIEltcGxlbWVudCBhbmQgY2FsbCBleGVjdXRlQWdncmVnYXRlUXVlcnlWaWFTbmFwc2hvdExpc3RlbmVyLCBzaW1pbGFyXG4gICAgICAgICAgICAvLyB0byB0aGUgaW1wbGVtZW50YXRpb24gaW4gZmlyZXN0b3JlQ2xpZW50R2V0RG9jdW1lbnRzVmlhU25hcHNob3RMaXN0ZW5lclxuICAgICAgICAgICAgLy8gYWJvdmVcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgLy8gVE9ETyhiLzI3NzYyODM4NCk6IGNoZWNrIGBjYW5Vc2VOZXR3b3JrKClgIGFuZCBoYW5kbGUgbXVsdGktdGFiLlxuICAgICAgICAgICAgICAgIGNvbnN0IGkgPSBhd2FpdCBfX1BSSVZBVEVfZ2V0RGF0YXN0b3JlKGUpO1xuICAgICAgICAgICAgICAgIHIucmVzb2x2ZShfX1BSSVZBVEVfaW52b2tlUnVuQWdncmVnYXRpb25RdWVyeVJwYyhpLCB0LCBuKSk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgci5yZWplY3QoZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKSwgci5wcm9taXNlO1xuICAgIH0ociwgZS5fcXVlcnksIGkpLnRoZW4oKHQgPT4gXG4gICAgLyoqXG4gKiBDb252ZXJ0cyB0aGUgY29yZSBhZ2dyZWdyYXRpb24gcmVzdWx0IHRvIGFuIGBBZ2dyZWdhdGVRdWVyeVNuYXBzaG90YFxuICogdGhhdCBjYW4gYmUgcmV0dXJuZWQgdG8gdGhlIGNvbnN1bWVyLlxuICogQHBhcmFtIHF1ZXJ5XG4gKiBAcGFyYW0gYWdncmVnYXRlUmVzdWx0IENvcmUgYWdncmVnYXRpb24gcmVzdWx0XG4gKiBAaW50ZXJuYWxcbiAqL1xuICAgIGZ1bmN0aW9uIF9fUFJJVkFURV9jb252ZXJ0VG9BZ2dyZWdhdGVRdWVyeVNuYXBzaG90KGUsIHQsIG4pIHtcbiAgICAgICAgY29uc3QgciA9IG5ldyBfX1BSSVZBVEVfRXhwVXNlckRhdGFXcml0ZXIoZSk7XG4gICAgICAgIHJldHVybiBuZXcgQWdncmVnYXRlUXVlcnlTbmFwc2hvdCh0LCByLCBuKTtcbiAgICB9XG4gICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjMgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gKG4sIGUsIHQpKSk7XG59XG5cbmNsYXNzIF9fUFJJVkFURV9NZW1vcnlMb2NhbENhY2hlSW1wbCB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLmtpbmQgPSBcIm1lbW9yeVwiLCB0aGlzLl9vbmxpbmVDb21wb25lbnRQcm92aWRlciA9IG5ldyBPbmxpbmVDb21wb25lbnRQcm92aWRlciwgXG4gICAgICAgIChudWxsID09IGUgPyB2b2lkIDAgOiBlLmdhcmJhZ2VDb2xsZWN0b3IpID8gdGhpcy5fb2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyID0gZS5nYXJiYWdlQ29sbGVjdG9yLl9vZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIgOiB0aGlzLl9vZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIgPSBuZXcgTWVtb3J5T2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBraW5kOiB0aGlzLmtpbmRcbiAgICAgICAgfTtcbiAgICB9XG59XG5cbmNsYXNzIF9fUFJJVkFURV9QZXJzaXN0ZW50TG9jYWxDYWNoZUltcGwge1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgbGV0IHQ7XG4gICAgICAgIHRoaXMua2luZCA9IFwicGVyc2lzdGVudFwiLCAobnVsbCA9PSBlID8gdm9pZCAwIDogZS50YWJNYW5hZ2VyKSA/IChlLnRhYk1hbmFnZXIuX2luaXRpYWxpemUoZSksIFxuICAgICAgICB0ID0gZS50YWJNYW5hZ2VyKSA6ICh0ID0gcGVyc2lzdGVudFNpbmdsZVRhYk1hbmFnZXIodm9pZCAwKSwgdC5faW5pdGlhbGl6ZShlKSksIFxuICAgICAgICB0aGlzLl9vbmxpbmVDb21wb25lbnRQcm92aWRlciA9IHQuX29ubGluZUNvbXBvbmVudFByb3ZpZGVyLCB0aGlzLl9vZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIgPSB0Ll9vZmZsaW5lQ29tcG9uZW50UHJvdmlkZXI7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGtpbmQ6IHRoaXMua2luZFxuICAgICAgICB9O1xuICAgIH1cbn1cblxuY2xhc3MgX19QUklWQVRFX01lbW9yeUVhZ2VyR2FiYWdlQ29sbGVjdG9ySW1wbCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMua2luZCA9IFwibWVtb3J5RWFnZXJcIiwgdGhpcy5fb2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyID0gbmV3IE1lbW9yeU9mZmxpbmVDb21wb25lbnRQcm92aWRlcjtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAga2luZDogdGhpcy5raW5kXG4gICAgICAgIH07XG4gICAgfVxufVxuXG5jbGFzcyBfX1BSSVZBVEVfTWVtb3J5THJ1R2FiYWdlQ29sbGVjdG9ySW1wbCB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLmtpbmQgPSBcIm1lbW9yeUxydVwiLCB0aGlzLl9vZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIgPSBuZXcgX19QUklWQVRFX0xydUdjTWVtb3J5T2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyKGUpO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBraW5kOiB0aGlzLmtpbmRcbiAgICAgICAgfTtcbiAgICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBgTWVtb3J5RWFnZXJHYXJiYWdlQ29sbGVjdG9yYC4gVGhpcyBpcyBhbHNvIHRoZVxuICogZGVmYXVsdCBnYXJiYWdlIGNvbGxlY3RvciB1bmxlc3MgaXQgaXMgZXhwbGljaXRseSBzcGVjaWZpZWQgb3RoZXJ3aXNlLlxuICovIGZ1bmN0aW9uIG1lbW9yeUVhZ2VyR2FyYmFnZUNvbGxlY3RvcigpIHtcbiAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9NZW1vcnlFYWdlckdhYmFnZUNvbGxlY3RvckltcGw7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBgTWVtb3J5THJ1R2FyYmFnZUNvbGxlY3RvcmAuXG4gKlxuICogQSB0YXJnZXQgc2l6ZSBjYW4gYmUgc3BlY2lmaWVkIGFzIHBhcnQgb2YgdGhlIHNldHRpbmcgcGFyYW1ldGVyLiBUaGVcbiAqIGNvbGxlY3RvciB3aWxsIHN0YXJ0IGRlbGV0aW5nIGRvY3VtZW50cyBvbmNlIHRoZSBjYWNoZSBzaXplIGV4Y2VlZHNcbiAqIHRoZSBnaXZlbiBzaXplLiBUaGUgZGVmYXVsdCBjYWNoZSBzaXplIGlzIDQwTUIgKDQwICogMTAyNCAqIDEwMjQgYnl0ZXMpLlxuICovIGZ1bmN0aW9uIG1lbW9yeUxydUdhcmJhZ2VDb2xsZWN0b3IoZSkge1xuICAgIHJldHVybiBuZXcgX19QUklWQVRFX01lbW9yeUxydUdhYmFnZUNvbGxlY3RvckltcGwobnVsbCA9PSBlID8gdm9pZCAwIDogZS5jYWNoZVNpemVCeXRlcyk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBgTWVtb3J5TG9jYWxDYWNoZWAuIFRoZSBpbnN0YW5jZSBjYW4gYmUgc2V0IHRvXG4gKiBgRmlyZXN0b3JlU2V0dGluZ3MuY2FjaGVgIHRvIHRlbGwgdGhlIFNESyB3aGljaCBjYWNoZSBsYXllciB0byB1c2UuXG4gKi8gZnVuY3Rpb24gbWVtb3J5TG9jYWxDYWNoZShlKSB7XG4gICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfTWVtb3J5TG9jYWxDYWNoZUltcGwoZSk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBgUGVyc2lzdGVudExvY2FsQ2FjaGVgLiBUaGUgaW5zdGFuY2UgY2FuIGJlIHNldCB0b1xuICogYEZpcmVzdG9yZVNldHRpbmdzLmNhY2hlYCB0byB0ZWxsIHRoZSBTREsgd2hpY2ggY2FjaGUgbGF5ZXIgdG8gdXNlLlxuICpcbiAqIFBlcnNpc3RlbnQgY2FjaGUgY2Fubm90IGJlIHVzZWQgaW4gYSBOb2RlLmpzIGVudmlyb25tZW50LlxuICovIGZ1bmN0aW9uIHBlcnNpc3RlbnRMb2NhbENhY2hlKGUpIHtcbiAgICByZXR1cm4gbmV3IF9fUFJJVkFURV9QZXJzaXN0ZW50TG9jYWxDYWNoZUltcGwoZSk7XG59XG5cbmNsYXNzIF9fUFJJVkFURV9TaW5nbGVUYWJNYW5hZ2VySW1wbCB7XG4gICAgY29uc3RydWN0b3IoZSkge1xuICAgICAgICB0aGlzLmZvcmNlT3duZXJzaGlwID0gZSwgdGhpcy5raW5kID0gXCJwZXJzaXN0ZW50U2luZ2xlVGFiXCI7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGtpbmQ6IHRoaXMua2luZFxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi8gICAgX2luaXRpYWxpemUoZSkge1xuICAgICAgICB0aGlzLl9vbmxpbmVDb21wb25lbnRQcm92aWRlciA9IG5ldyBPbmxpbmVDb21wb25lbnRQcm92aWRlciwgdGhpcy5fb2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyID0gbmV3IF9fUFJJVkFURV9JbmRleGVkRGJPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIodGhpcy5fb25saW5lQ29tcG9uZW50UHJvdmlkZXIsIG51bGwgPT0gZSA/IHZvaWQgMCA6IGUuY2FjaGVTaXplQnl0ZXMsIHRoaXMuZm9yY2VPd25lcnNoaXApO1xuICAgIH1cbn1cblxuY2xhc3MgX19QUklWQVRFX011bHRpVGFiTWFuYWdlckltcGwge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmtpbmQgPSBcIlBlcnNpc3RlbnRNdWx0aXBsZVRhYlwiO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBraW5kOiB0aGlzLmtpbmRcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovICAgIF9pbml0aWFsaXplKGUpIHtcbiAgICAgICAgdGhpcy5fb25saW5lQ29tcG9uZW50UHJvdmlkZXIgPSBuZXcgT25saW5lQ29tcG9uZW50UHJvdmlkZXIsIHRoaXMuX29mZmxpbmVDb21wb25lbnRQcm92aWRlciA9IG5ldyBfX1BSSVZBVEVfTXVsdGlUYWJPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIodGhpcy5fb25saW5lQ29tcG9uZW50UHJvdmlkZXIsIG51bGwgPT0gZSA/IHZvaWQgMCA6IGUuY2FjaGVTaXplQnl0ZXMpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIGBQZXJzaXN0ZW50U2luZ2xlVGFiTWFuYWdlcmAuXG4gKlxuICogQHBhcmFtIHNldHRpbmdzIENvbmZpZ3VyZXMgdGhlIGNyZWF0ZWQgdGFiIG1hbmFnZXIuXG4gKi8gZnVuY3Rpb24gcGVyc2lzdGVudFNpbmdsZVRhYk1hbmFnZXIoZSkge1xuICAgIHJldHVybiBuZXcgX19QUklWQVRFX1NpbmdsZVRhYk1hbmFnZXJJbXBsKG51bGwgPT0gZSA/IHZvaWQgMCA6IGUuZm9yY2VPd25lcnNoaXApO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgYFBlcnNpc3RlbnRNdWx0aXBsZVRhYk1hbmFnZXJgLlxuICovIGZ1bmN0aW9uIHBlcnNpc3RlbnRNdWx0aXBsZVRhYk1hbmFnZXIoKSB7XG4gICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfTXVsdGlUYWJNYW5hZ2VySW1wbDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY29uc3QgeWUgPSB7XG4gICAgbWF4QXR0ZW1wdHM6IDVcbn07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgd3JpdGUgYmF0Y2gsIHVzZWQgdG8gcGVyZm9ybSBtdWx0aXBsZSB3cml0ZXMgYXMgYSBzaW5nbGUgYXRvbWljIHVuaXQuXG4gKlxuICogQSBgV3JpdGVCYXRjaGAgb2JqZWN0IGNhbiBiZSBhY3F1aXJlZCBieSBjYWxsaW5nIHtAbGluayB3cml0ZUJhdGNofS4gSXRcbiAqIHByb3ZpZGVzIG1ldGhvZHMgZm9yIGFkZGluZyB3cml0ZXMgdG8gdGhlIHdyaXRlIGJhdGNoLiBOb25lIG9mIHRoZSB3cml0ZXNcbiAqIHdpbGwgYmUgY29tbWl0dGVkIChvciB2aXNpYmxlIGxvY2FsbHkpIHVudGlsIHtAbGluayBXcml0ZUJhdGNoLmNvbW1pdH0gaXNcbiAqIGNhbGxlZC5cbiAqL1xuY2xhc3MgV3JpdGVCYXRjaCB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3RvcihlLCB0KSB7XG4gICAgICAgIHRoaXMuX2ZpcmVzdG9yZSA9IGUsIHRoaXMuX2NvbW1pdEhhbmRsZXIgPSB0LCB0aGlzLl9tdXRhdGlvbnMgPSBbXSwgdGhpcy5fY29tbWl0dGVkID0gITEsIFxuICAgICAgICB0aGlzLl9kYXRhUmVhZGVyID0gX19QUklWQVRFX25ld1VzZXJEYXRhUmVhZGVyKGUpO1xuICAgIH1cbiAgICBzZXQoZSwgdCwgbikge1xuICAgICAgICB0aGlzLl92ZXJpZnlOb3RDb21taXR0ZWQoKTtcbiAgICAgICAgY29uc3QgciA9IF9fUFJJVkFURV92YWxpZGF0ZVJlZmVyZW5jZShlLCB0aGlzLl9maXJlc3RvcmUpLCBpID0gX19QUklWQVRFX2FwcGx5RmlyZXN0b3JlRGF0YUNvbnZlcnRlcihyLmNvbnZlcnRlciwgdCwgbiksIHMgPSBfX1BSSVZBVEVfcGFyc2VTZXREYXRhKHRoaXMuX2RhdGFSZWFkZXIsIFwiV3JpdGVCYXRjaC5zZXRcIiwgci5fa2V5LCBpLCBudWxsICE9PSByLmNvbnZlcnRlciwgbik7XG4gICAgICAgIHJldHVybiB0aGlzLl9tdXRhdGlvbnMucHVzaChzLnRvTXV0YXRpb24oci5fa2V5LCBQcmVjb25kaXRpb24ubm9uZSgpKSksIHRoaXM7XG4gICAgfVxuICAgIHVwZGF0ZShlLCB0LCBuLCAuLi5yKSB7XG4gICAgICAgIHRoaXMuX3ZlcmlmeU5vdENvbW1pdHRlZCgpO1xuICAgICAgICBjb25zdCBpID0gX19QUklWQVRFX3ZhbGlkYXRlUmVmZXJlbmNlKGUsIHRoaXMuX2ZpcmVzdG9yZSk7XG4gICAgICAgIC8vIEZvciBDb21wYXQgdHlwZXMsIHdlIGhhdmUgdG8gXCJleHRyYWN0XCIgdGhlIHVuZGVybHlpbmcgdHlwZXMgYmVmb3JlXG4gICAgICAgIC8vIHBlcmZvcm1pbmcgdmFsaWRhdGlvbi5cbiAgICAgICAgICAgICAgICBsZXQgcztcbiAgICAgICAgcmV0dXJuIHMgPSBcInN0cmluZ1wiID09IHR5cGVvZiAodCA9IGdldE1vZHVsYXJJbnN0YW5jZSh0KSkgfHwgdCBpbnN0YW5jZW9mIEZpZWxkUGF0aCA/IF9fUFJJVkFURV9wYXJzZVVwZGF0ZVZhcmFyZ3ModGhpcy5fZGF0YVJlYWRlciwgXCJXcml0ZUJhdGNoLnVwZGF0ZVwiLCBpLl9rZXksIHQsIG4sIHIpIDogX19QUklWQVRFX3BhcnNlVXBkYXRlRGF0YSh0aGlzLl9kYXRhUmVhZGVyLCBcIldyaXRlQmF0Y2gudXBkYXRlXCIsIGkuX2tleSwgdCksIFxuICAgICAgICB0aGlzLl9tdXRhdGlvbnMucHVzaChzLnRvTXV0YXRpb24oaS5fa2V5LCBQcmVjb25kaXRpb24uZXhpc3RzKCEwKSkpLCB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWxldGVzIHRoZSBkb2N1bWVudCByZWZlcnJlZCB0byBieSB0aGUgcHJvdmlkZWQge0BsaW5rIERvY3VtZW50UmVmZXJlbmNlfS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkb2N1bWVudFJlZiAtIEEgcmVmZXJlbmNlIHRvIHRoZSBkb2N1bWVudCB0byBiZSBkZWxldGVkLlxuICAgICAqIEByZXR1cm5zIFRoaXMgYFdyaXRlQmF0Y2hgIGluc3RhbmNlLiBVc2VkIGZvciBjaGFpbmluZyBtZXRob2QgY2FsbHMuXG4gICAgICovICAgIGRlbGV0ZShlKSB7XG4gICAgICAgIHRoaXMuX3ZlcmlmeU5vdENvbW1pdHRlZCgpO1xuICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX3ZhbGlkYXRlUmVmZXJlbmNlKGUsIHRoaXMuX2ZpcmVzdG9yZSk7XG4gICAgICAgIHJldHVybiB0aGlzLl9tdXRhdGlvbnMgPSB0aGlzLl9tdXRhdGlvbnMuY29uY2F0KG5ldyBfX1BSSVZBVEVfRGVsZXRlTXV0YXRpb24odC5fa2V5LCBQcmVjb25kaXRpb24ubm9uZSgpKSksIFxuICAgICAgICB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb21taXRzIGFsbCBvZiB0aGUgd3JpdGVzIGluIHRoaXMgd3JpdGUgYmF0Y2ggYXMgYSBzaW5nbGUgYXRvbWljIHVuaXQuXG4gICAgICpcbiAgICAgKiBUaGUgcmVzdWx0IG9mIHRoZXNlIHdyaXRlcyB3aWxsIG9ubHkgYmUgcmVmbGVjdGVkIGluIGRvY3VtZW50IHJlYWRzIHRoYXRcbiAgICAgKiBvY2N1ciBhZnRlciB0aGUgcmV0dXJuZWQgcHJvbWlzZSByZXNvbHZlcy4gSWYgdGhlIGNsaWVudCBpcyBvZmZsaW5lLCB0aGVcbiAgICAgKiB3cml0ZSBmYWlscy4gSWYgeW91IHdvdWxkIGxpa2UgdG8gc2VlIGxvY2FsIG1vZGlmaWNhdGlvbnMgb3IgYnVmZmVyIHdyaXRlc1xuICAgICAqIHVudGlsIHRoZSBjbGllbnQgaXMgb25saW5lLCB1c2UgdGhlIGZ1bGwgRmlyZXN0b3JlIFNESy5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEEgYFByb21pc2VgIHJlc29sdmVkIG9uY2UgYWxsIG9mIHRoZSB3cml0ZXMgaW4gdGhlIGJhdGNoIGhhdmUgYmVlblxuICAgICAqIHN1Y2Nlc3NmdWxseSB3cml0dGVuIHRvIHRoZSBiYWNrZW5kIGFzIGFuIGF0b21pYyB1bml0IChub3RlIHRoYXQgaXQgd29uJ3RcbiAgICAgKiByZXNvbHZlIHdoaWxlIHlvdSdyZSBvZmZsaW5lKS5cbiAgICAgKi8gICAgY29tbWl0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdmVyaWZ5Tm90Q29tbWl0dGVkKCksIHRoaXMuX2NvbW1pdHRlZCA9ICEwLCB0aGlzLl9tdXRhdGlvbnMubGVuZ3RoID4gMCA/IHRoaXMuX2NvbW1pdEhhbmRsZXIodGhpcy5fbXV0YXRpb25zKSA6IFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBfdmVyaWZ5Tm90Q29tbWl0dGVkKCkge1xuICAgICAgICBpZiAodGhpcy5fY29tbWl0dGVkKSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5GQUlMRURfUFJFQ09ORElUSU9OLCBcIkEgd3JpdGUgYmF0Y2ggY2FuIG5vIGxvbmdlciBiZSB1c2VkIGFmdGVyIGNvbW1pdCgpIGhhcyBiZWVuIGNhbGxlZC5cIik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfX1BSSVZBVEVfdmFsaWRhdGVSZWZlcmVuY2UoZSwgdCkge1xuICAgIGlmICgoZSA9IGdldE1vZHVsYXJJbnN0YW5jZShlKSkuZmlyZXN0b3JlICE9PSB0KSB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoRC5JTlZBTElEX0FSR1VNRU5ULCBcIlByb3ZpZGVkIGRvY3VtZW50IHJlZmVyZW5jZSBpcyBmcm9tIGEgZGlmZmVyZW50IEZpcmVzdG9yZSBpbnN0YW5jZS5cIik7XG4gICAgcmV0dXJuIGU7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBUT0RPKG1yc2NobWlkdCkgQ29uc2lkZXIgdXNpbmcgYEJhc2VUcmFuc2FjdGlvbmAgYXMgdGhlIGJhc2UgY2xhc3MgaW4gdGhlXG4vLyBsZWdhY3kgU0RLLlxuLyoqXG4gKiBBIHJlZmVyZW5jZSB0byBhIHRyYW5zYWN0aW9uLlxuICpcbiAqIFRoZSBgVHJhbnNhY3Rpb25gIG9iamVjdCBwYXNzZWQgdG8gYSB0cmFuc2FjdGlvbidzIGB1cGRhdGVGdW5jdGlvbmAgcHJvdmlkZXNcbiAqIHRoZSBtZXRob2RzIHRvIHJlYWQgYW5kIHdyaXRlIGRhdGEgd2l0aGluIHRoZSB0cmFuc2FjdGlvbiBjb250ZXh0LiBTZWVcbiAqIHtAbGluayBydW5UcmFuc2FjdGlvbn0uXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgcmVmZXJlbmNlIHRvIGEgdHJhbnNhY3Rpb24uXG4gKlxuICogVGhlIGBUcmFuc2FjdGlvbmAgb2JqZWN0IHBhc3NlZCB0byBhIHRyYW5zYWN0aW9uJ3MgYHVwZGF0ZUZ1bmN0aW9uYCBwcm92aWRlc1xuICogdGhlIG1ldGhvZHMgdG8gcmVhZCBhbmQgd3JpdGUgZGF0YSB3aXRoaW4gdGhlIHRyYW5zYWN0aW9uIGNvbnRleHQuIFNlZVxuICoge0BsaW5rIHJ1blRyYW5zYWN0aW9ufS5cbiAqL1xuY2xhc3MgVHJhbnNhY3Rpb24gZXh0ZW5kcyBjbGFzcyBUcmFuc2FjdGlvbiQxIHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKGUsIHQpIHtcbiAgICAgICAgdGhpcy5fZmlyZXN0b3JlID0gZSwgdGhpcy5fdHJhbnNhY3Rpb24gPSB0LCB0aGlzLl9kYXRhUmVhZGVyID0gX19QUklWQVRFX25ld1VzZXJEYXRhUmVhZGVyKGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWFkcyB0aGUgZG9jdW1lbnQgcmVmZXJlbmNlZCBieSB0aGUgcHJvdmlkZWQge0BsaW5rIERvY3VtZW50UmVmZXJlbmNlfS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkb2N1bWVudFJlZiAtIEEgcmVmZXJlbmNlIHRvIHRoZSBkb2N1bWVudCB0byBiZSByZWFkLlxuICAgICAqIEByZXR1cm5zIEEgYERvY3VtZW50U25hcHNob3RgIHdpdGggdGhlIHJlYWQgZGF0YS5cbiAgICAgKi8gICAgZ2V0KGUpIHtcbiAgICAgICAgY29uc3QgdCA9IF9fUFJJVkFURV92YWxpZGF0ZVJlZmVyZW5jZShlLCB0aGlzLl9maXJlc3RvcmUpLCBuID0gbmV3IF9fUFJJVkFURV9MaXRlVXNlckRhdGFXcml0ZXIodGhpcy5fZmlyZXN0b3JlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RyYW5zYWN0aW9uLmxvb2t1cChbIHQuX2tleSBdKS50aGVuKChlID0+IHtcbiAgICAgICAgICAgIGlmICghZSB8fCAxICE9PSBlLmxlbmd0aCkgcmV0dXJuIGZhaWwoKTtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBlWzBdO1xuICAgICAgICAgICAgaWYgKHIuaXNGb3VuZERvY3VtZW50KCkpIHJldHVybiBuZXcgRG9jdW1lbnRTbmFwc2hvdCQxKHRoaXMuX2ZpcmVzdG9yZSwgbiwgci5rZXksIHIsIHQuY29udmVydGVyKTtcbiAgICAgICAgICAgIGlmIChyLmlzTm9Eb2N1bWVudCgpKSByZXR1cm4gbmV3IERvY3VtZW50U25hcHNob3QkMSh0aGlzLl9maXJlc3RvcmUsIG4sIHQuX2tleSwgbnVsbCwgdC5jb252ZXJ0ZXIpO1xuICAgICAgICAgICAgdGhyb3cgZmFpbCgpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHNldChlLCB0LCBuKSB7XG4gICAgICAgIGNvbnN0IHIgPSBfX1BSSVZBVEVfdmFsaWRhdGVSZWZlcmVuY2UoZSwgdGhpcy5fZmlyZXN0b3JlKSwgaSA9IF9fUFJJVkFURV9hcHBseUZpcmVzdG9yZURhdGFDb252ZXJ0ZXIoci5jb252ZXJ0ZXIsIHQsIG4pLCBzID0gX19QUklWQVRFX3BhcnNlU2V0RGF0YSh0aGlzLl9kYXRhUmVhZGVyLCBcIlRyYW5zYWN0aW9uLnNldFwiLCByLl9rZXksIGksIG51bGwgIT09IHIuY29udmVydGVyLCBuKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RyYW5zYWN0aW9uLnNldChyLl9rZXksIHMpLCB0aGlzO1xuICAgIH1cbiAgICB1cGRhdGUoZSwgdCwgbiwgLi4ucikge1xuICAgICAgICBjb25zdCBpID0gX19QUklWQVRFX3ZhbGlkYXRlUmVmZXJlbmNlKGUsIHRoaXMuX2ZpcmVzdG9yZSk7XG4gICAgICAgIC8vIEZvciBDb21wYXQgdHlwZXMsIHdlIGhhdmUgdG8gXCJleHRyYWN0XCIgdGhlIHVuZGVybHlpbmcgdHlwZXMgYmVmb3JlXG4gICAgICAgIC8vIHBlcmZvcm1pbmcgdmFsaWRhdGlvbi5cbiAgICAgICAgICAgICAgICBsZXQgcztcbiAgICAgICAgcmV0dXJuIHMgPSBcInN0cmluZ1wiID09IHR5cGVvZiAodCA9IGdldE1vZHVsYXJJbnN0YW5jZSh0KSkgfHwgdCBpbnN0YW5jZW9mIEZpZWxkUGF0aCA/IF9fUFJJVkFURV9wYXJzZVVwZGF0ZVZhcmFyZ3ModGhpcy5fZGF0YVJlYWRlciwgXCJUcmFuc2FjdGlvbi51cGRhdGVcIiwgaS5fa2V5LCB0LCBuLCByKSA6IF9fUFJJVkFURV9wYXJzZVVwZGF0ZURhdGEodGhpcy5fZGF0YVJlYWRlciwgXCJUcmFuc2FjdGlvbi51cGRhdGVcIiwgaS5fa2V5LCB0KSwgXG4gICAgICAgIHRoaXMuX3RyYW5zYWN0aW9uLnVwZGF0ZShpLl9rZXksIHMpLCB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWxldGVzIHRoZSBkb2N1bWVudCByZWZlcnJlZCB0byBieSB0aGUgcHJvdmlkZWQge0BsaW5rIERvY3VtZW50UmVmZXJlbmNlfS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkb2N1bWVudFJlZiAtIEEgcmVmZXJlbmNlIHRvIHRoZSBkb2N1bWVudCB0byBiZSBkZWxldGVkLlxuICAgICAqIEByZXR1cm5zIFRoaXMgYFRyYW5zYWN0aW9uYCBpbnN0YW5jZS4gVXNlZCBmb3IgY2hhaW5pbmcgbWV0aG9kIGNhbGxzLlxuICAgICAqLyAgICBkZWxldGUoZSkge1xuICAgICAgICBjb25zdCB0ID0gX19QUklWQVRFX3ZhbGlkYXRlUmVmZXJlbmNlKGUsIHRoaXMuX2ZpcmVzdG9yZSk7XG4gICAgICAgIHJldHVybiB0aGlzLl90cmFuc2FjdGlvbi5kZWxldGUodC5fa2V5KSwgdGhpcztcbiAgICB9XG59IHtcbiAgICAvLyBUaGlzIGNsYXNzIGltcGxlbWVudHMgdGhlIHNhbWUgbG9naWMgYXMgdGhlIFRyYW5zYWN0aW9uIEFQSSBpbiB0aGUgTGl0ZSBTREtcbiAgICAvLyBidXQgaXMgc3ViY2xhc3NlZCBpbiBvcmRlciB0byByZXR1cm4gaXRzIG93biBEb2N1bWVudFNuYXBzaG90IHR5cGVzLlxuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IoZSwgdCkge1xuICAgICAgICBzdXBlcihlLCB0KSwgdGhpcy5fZmlyZXN0b3JlID0gZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVhZHMgdGhlIGRvY3VtZW50IHJlZmVyZW5jZWQgYnkgdGhlIHByb3ZpZGVkIHtAbGluayBEb2N1bWVudFJlZmVyZW5jZX0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRSZWYgLSBBIHJlZmVyZW5jZSB0byB0aGUgZG9jdW1lbnQgdG8gYmUgcmVhZC5cbiAgICAgKiBAcmV0dXJucyBBIGBEb2N1bWVudFNuYXBzaG90YCB3aXRoIHRoZSByZWFkIGRhdGEuXG4gICAgICovICAgIGdldChlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfdmFsaWRhdGVSZWZlcmVuY2UoZSwgdGhpcy5fZmlyZXN0b3JlKSwgbiA9IG5ldyBfX1BSSVZBVEVfRXhwVXNlckRhdGFXcml0ZXIodGhpcy5fZmlyZXN0b3JlKTtcbiAgICAgICAgcmV0dXJuIHN1cGVyLmdldChlKS50aGVuKChlID0+IG5ldyBEb2N1bWVudFNuYXBzaG90KHRoaXMuX2ZpcmVzdG9yZSwgbiwgdC5fa2V5LCBlLl9kb2N1bWVudCwgbmV3IFNuYXBzaG90TWV0YWRhdGEoXG4gICAgICAgIC8qIGhhc1BlbmRpbmdXcml0ZXM9ICovICExLCBcbiAgICAgICAgLyogZnJvbUNhY2hlPSAqLyAhMSksIHQuY29udmVydGVyKSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBFeGVjdXRlcyB0aGUgZ2l2ZW4gYHVwZGF0ZUZ1bmN0aW9uYCBhbmQgdGhlbiBhdHRlbXB0cyB0byBjb21taXQgdGhlIGNoYW5nZXNcbiAqIGFwcGxpZWQgd2l0aGluIHRoZSB0cmFuc2FjdGlvbi4gSWYgYW55IGRvY3VtZW50IHJlYWQgd2l0aGluIHRoZSB0cmFuc2FjdGlvblxuICogaGFzIGNoYW5nZWQsIENsb3VkIEZpcmVzdG9yZSByZXRyaWVzIHRoZSBgdXBkYXRlRnVuY3Rpb25gLiBJZiBpdCBmYWlscyB0b1xuICogY29tbWl0IGFmdGVyIDUgYXR0ZW1wdHMsIHRoZSB0cmFuc2FjdGlvbiBmYWlscy5cbiAqXG4gKiBUaGUgbWF4aW11bSBudW1iZXIgb2Ygd3JpdGVzIGFsbG93ZWQgaW4gYSBzaW5nbGUgdHJhbnNhY3Rpb24gaXMgNTAwLlxuICpcbiAqIEBwYXJhbSBmaXJlc3RvcmUgLSBBIHJlZmVyZW5jZSB0byB0aGUgRmlyZXN0b3JlIGRhdGFiYXNlIHRvIHJ1biB0aGlzXG4gKiB0cmFuc2FjdGlvbiBhZ2FpbnN0LlxuICogQHBhcmFtIHVwZGF0ZUZ1bmN0aW9uIC0gVGhlIGZ1bmN0aW9uIHRvIGV4ZWN1dGUgd2l0aGluIHRoZSB0cmFuc2FjdGlvblxuICogY29udGV4dC5cbiAqIEBwYXJhbSBvcHRpb25zIC0gQW4gb3B0aW9ucyBvYmplY3QgdG8gY29uZmlndXJlIG1heGltdW0gbnVtYmVyIG9mIGF0dGVtcHRzIHRvXG4gKiBjb21taXQuXG4gKiBAcmV0dXJucyBJZiB0aGUgdHJhbnNhY3Rpb24gY29tcGxldGVkIHN1Y2Nlc3NmdWxseSBvciB3YXMgZXhwbGljaXRseSBhYm9ydGVkXG4gKiAodGhlIGB1cGRhdGVGdW5jdGlvbmAgcmV0dXJuZWQgYSBmYWlsZWQgcHJvbWlzZSksIHRoZSBwcm9taXNlIHJldHVybmVkIGJ5IHRoZVxuICogYHVwZGF0ZUZ1bmN0aW9uIGBpcyByZXR1cm5lZCBoZXJlLiBPdGhlcndpc2UsIGlmIHRoZSB0cmFuc2FjdGlvbiBmYWlsZWQsIGFcbiAqIHJlamVjdGVkIHByb21pc2Ugd2l0aCB0aGUgY29ycmVzcG9uZGluZyBmYWlsdXJlIGVycm9yIGlzIHJldHVybmVkLlxuICovIGZ1bmN0aW9uIHJ1blRyYW5zYWN0aW9uKGUsIHQsIG4pIHtcbiAgICBlID0gX19QUklWQVRFX2Nhc3QoZSwgRmlyZXN0b3JlKTtcbiAgICBjb25zdCByID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCB5ZSksIG4pO1xuICAgICFmdW5jdGlvbiBfX1BSSVZBVEVfdmFsaWRhdGVUcmFuc2FjdGlvbk9wdGlvbnMoZSkge1xuICAgICAgICBpZiAoZS5tYXhBdHRlbXB0cyA8IDEpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELklOVkFMSURfQVJHVU1FTlQsIFwiTWF4IGF0dGVtcHRzIG11c3QgYmUgYXQgbGVhc3QgMVwiKTtcbiAgICB9KHIpO1xuICAgIHJldHVybiBmdW5jdGlvbiBfX1BSSVZBVEVfZmlyZXN0b3JlQ2xpZW50VHJhbnNhY3Rpb24oZSwgdCwgbikge1xuICAgICAgICBjb25zdCByID0gbmV3IF9fUFJJVkFURV9EZWZlcnJlZDtcbiAgICAgICAgcmV0dXJuIGUuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gYXdhaXQgX19QUklWQVRFX2dldERhdGFzdG9yZShlKTtcbiAgICAgICAgICAgIG5ldyBfX1BSSVZBVEVfVHJhbnNhY3Rpb25SdW5uZXIoZS5hc3luY1F1ZXVlLCBpLCBuLCB0LCByKS5ydW4oKTtcbiAgICAgICAgfSkpLCByLnByb21pc2U7XG4gICAgfShlbnN1cmVGaXJlc3RvcmVDb25maWd1cmVkKGUpLCAobiA9PiB0KG5ldyBUcmFuc2FjdGlvbihlLCBuKSkpLCByKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmV0dXJucyBhIHNlbnRpbmVsIGZvciB1c2Ugd2l0aCB7QGxpbmsgQGZpcmViYXNlL2ZpcmVzdG9yZS9saXRlIyh1cGRhdGVEb2M6MSl9IG9yXG4gKiB7QGxpbmsgQGZpcmViYXNlL2ZpcmVzdG9yZS9saXRlIyhzZXREb2M6MSl9IHdpdGggYHttZXJnZTogdHJ1ZX1gIHRvIG1hcmsgYSBmaWVsZCBmb3IgZGVsZXRpb24uXG4gKi8gZnVuY3Rpb24gZGVsZXRlRmllbGQoKSB7XG4gICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfRGVsZXRlRmllbGRWYWx1ZUltcGwoXCJkZWxldGVGaWVsZFwiKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgc2VudGluZWwgdXNlZCB3aXRoIHtAbGluayBAZmlyZWJhc2UvZmlyZXN0b3JlL2xpdGUjKHNldERvYzoxKX0gb3Ige0BsaW5rIEBmaXJlYmFzZS9maXJlc3RvcmUvbGl0ZSModXBkYXRlRG9jOjEpfSB0b1xuICogaW5jbHVkZSBhIHNlcnZlci1nZW5lcmF0ZWQgdGltZXN0YW1wIGluIHRoZSB3cml0dGVuIGRhdGEuXG4gKi8gZnVuY3Rpb24gc2VydmVyVGltZXN0YW1wKCkge1xuICAgIHJldHVybiBuZXcgX19QUklWQVRFX1NlcnZlclRpbWVzdGFtcEZpZWxkVmFsdWVJbXBsKFwic2VydmVyVGltZXN0YW1wXCIpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBzcGVjaWFsIHZhbHVlIHRoYXQgY2FuIGJlIHVzZWQgd2l0aCB7QGxpbmsgQGZpcmViYXNlL2ZpcmVzdG9yZS9saXRlIyhzZXREb2M6MSl9IG9yIHtAbGlua1xuICogQGZpcmViYXNlL2ZpcmVzdG9yZS9saXRlIyh1cGRhdGVEb2M6MSl9IHRoYXQgdGVsbHMgdGhlIHNlcnZlciB0byB1bmlvbiB0aGUgZ2l2ZW4gZWxlbWVudHMgd2l0aCBhbnkgYXJyYXlcbiAqIHZhbHVlIHRoYXQgYWxyZWFkeSBleGlzdHMgb24gdGhlIHNlcnZlci4gRWFjaCBzcGVjaWZpZWQgZWxlbWVudCB0aGF0IGRvZXNuJ3RcbiAqIGFscmVhZHkgZXhpc3QgaW4gdGhlIGFycmF5IHdpbGwgYmUgYWRkZWQgdG8gdGhlIGVuZC4gSWYgdGhlIGZpZWxkIGJlaW5nXG4gKiBtb2RpZmllZCBpcyBub3QgYWxyZWFkeSBhbiBhcnJheSBpdCB3aWxsIGJlIG92ZXJ3cml0dGVuIHdpdGggYW4gYXJyYXlcbiAqIGNvbnRhaW5pbmcgZXhhY3RseSB0aGUgc3BlY2lmaWVkIGVsZW1lbnRzLlxuICpcbiAqIEBwYXJhbSBlbGVtZW50cyAtIFRoZSBlbGVtZW50cyB0byB1bmlvbiBpbnRvIHRoZSBhcnJheS5cbiAqIEByZXR1cm5zIFRoZSBgRmllbGRWYWx1ZWAgc2VudGluZWwgZm9yIHVzZSBpbiBhIGNhbGwgdG8gYHNldERvYygpYCBvclxuICogYHVwZGF0ZURvYygpYC5cbiAqLyBmdW5jdGlvbiBhcnJheVVuaW9uKC4uLmUpIHtcbiAgICAvLyBOT1RFOiBXZSBkb24ndCBhY3R1YWxseSBwYXJzZSB0aGUgZGF0YSB1bnRpbCBpdCdzIHVzZWQgaW4gc2V0KCkgb3JcbiAgICAvLyB1cGRhdGUoKSBzaW5jZSB3ZSdkIG5lZWQgdGhlIEZpcmVzdG9yZSBpbnN0YW5jZSB0byBkbyB0aGlzLlxuICAgIHJldHVybiBuZXcgX19QUklWQVRFX0FycmF5VW5pb25GaWVsZFZhbHVlSW1wbChcImFycmF5VW5pb25cIiwgZSk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHNwZWNpYWwgdmFsdWUgdGhhdCBjYW4gYmUgdXNlZCB3aXRoIHtAbGluayAoc2V0RG9jOjEpfSBvciB7QGxpbmtcbiAqIHVwZGF0ZURvYzoxfSB0aGF0IHRlbGxzIHRoZSBzZXJ2ZXIgdG8gcmVtb3ZlIHRoZSBnaXZlbiBlbGVtZW50cyBmcm9tIGFueVxuICogYXJyYXkgdmFsdWUgdGhhdCBhbHJlYWR5IGV4aXN0cyBvbiB0aGUgc2VydmVyLiBBbGwgaW5zdGFuY2VzIG9mIGVhY2ggZWxlbWVudFxuICogc3BlY2lmaWVkIHdpbGwgYmUgcmVtb3ZlZCBmcm9tIHRoZSBhcnJheS4gSWYgdGhlIGZpZWxkIGJlaW5nIG1vZGlmaWVkIGlzIG5vdFxuICogYWxyZWFkeSBhbiBhcnJheSBpdCB3aWxsIGJlIG92ZXJ3cml0dGVuIHdpdGggYW4gZW1wdHkgYXJyYXkuXG4gKlxuICogQHBhcmFtIGVsZW1lbnRzIC0gVGhlIGVsZW1lbnRzIHRvIHJlbW92ZSBmcm9tIHRoZSBhcnJheS5cbiAqIEByZXR1cm5zIFRoZSBgRmllbGRWYWx1ZWAgc2VudGluZWwgZm9yIHVzZSBpbiBhIGNhbGwgdG8gYHNldERvYygpYCBvclxuICogYHVwZGF0ZURvYygpYFxuICovIGZ1bmN0aW9uIGFycmF5UmVtb3ZlKC4uLmUpIHtcbiAgICAvLyBOT1RFOiBXZSBkb24ndCBhY3R1YWxseSBwYXJzZSB0aGUgZGF0YSB1bnRpbCBpdCdzIHVzZWQgaW4gc2V0KCkgb3JcbiAgICAvLyB1cGRhdGUoKSBzaW5jZSB3ZSdkIG5lZWQgdGhlIEZpcmVzdG9yZSBpbnN0YW5jZSB0byBkbyB0aGlzLlxuICAgIHJldHVybiBuZXcgX19QUklWQVRFX0FycmF5UmVtb3ZlRmllbGRWYWx1ZUltcGwoXCJhcnJheVJlbW92ZVwiLCBlKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgc3BlY2lhbCB2YWx1ZSB0aGF0IGNhbiBiZSB1c2VkIHdpdGgge0BsaW5rIEBmaXJlYmFzZS9maXJlc3RvcmUvbGl0ZSMoc2V0RG9jOjEpfSBvciB7QGxpbmtcbiAqIEBmaXJlYmFzZS9maXJlc3RvcmUvbGl0ZSModXBkYXRlRG9jOjEpfSB0aGF0IHRlbGxzIHRoZSBzZXJ2ZXIgdG8gaW5jcmVtZW50IHRoZSBmaWVsZCdzIGN1cnJlbnQgdmFsdWUgYnlcbiAqIHRoZSBnaXZlbiB2YWx1ZS5cbiAqXG4gKiBJZiBlaXRoZXIgdGhlIG9wZXJhbmQgb3IgdGhlIGN1cnJlbnQgZmllbGQgdmFsdWUgdXNlcyBmbG9hdGluZyBwb2ludFxuICogcHJlY2lzaW9uLCBhbGwgYXJpdGhtZXRpYyBmb2xsb3dzIElFRUUgNzU0IHNlbWFudGljcy4gSWYgYm90aCB2YWx1ZXMgYXJlXG4gKiBpbnRlZ2VycywgdmFsdWVzIG91dHNpZGUgb2YgSmF2YVNjcmlwdCdzIHNhZmUgbnVtYmVyIHJhbmdlXG4gKiAoYE51bWJlci5NSU5fU0FGRV9JTlRFR0VSYCB0byBgTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVJgKSBhcmUgYWxzbyBzdWJqZWN0IHRvXG4gKiBwcmVjaXNpb24gbG9zcy4gRnVydGhlcm1vcmUsIG9uY2UgcHJvY2Vzc2VkIGJ5IHRoZSBGaXJlc3RvcmUgYmFja2VuZCwgYWxsXG4gKiBpbnRlZ2VyIG9wZXJhdGlvbnMgYXJlIGNhcHBlZCBiZXR3ZWVuIC0yXjYzIGFuZCAyXjYzLTEuXG4gKlxuICogSWYgdGhlIGN1cnJlbnQgZmllbGQgdmFsdWUgaXMgbm90IG9mIHR5cGUgYG51bWJlcmAsIG9yIGlmIHRoZSBmaWVsZCBkb2VzIG5vdFxuICogeWV0IGV4aXN0LCB0aGUgdHJhbnNmb3JtYXRpb24gc2V0cyB0aGUgZmllbGQgdG8gdGhlIGdpdmVuIHZhbHVlLlxuICpcbiAqIEBwYXJhbSBuIC0gVGhlIHZhbHVlIHRvIGluY3JlbWVudCBieS5cbiAqIEByZXR1cm5zIFRoZSBgRmllbGRWYWx1ZWAgc2VudGluZWwgZm9yIHVzZSBpbiBhIGNhbGwgdG8gYHNldERvYygpYCBvclxuICogYHVwZGF0ZURvYygpYFxuICovIGZ1bmN0aW9uIGluY3JlbWVudChlKSB7XG4gICAgcmV0dXJuIG5ldyBfX1BSSVZBVEVfTnVtZXJpY0luY3JlbWVudEZpZWxkVmFsdWVJbXBsKFwiaW5jcmVtZW50XCIsIGUpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBDcmVhdGVzIGEgd3JpdGUgYmF0Y2gsIHVzZWQgZm9yIHBlcmZvcm1pbmcgbXVsdGlwbGUgd3JpdGVzIGFzIGEgc2luZ2xlXG4gKiBhdG9taWMgb3BlcmF0aW9uLiBUaGUgbWF4aW11bSBudW1iZXIgb2Ygd3JpdGVzIGFsbG93ZWQgaW4gYSBzaW5nbGUge0BsaW5rIFdyaXRlQmF0Y2h9XG4gKiBpcyA1MDAuXG4gKlxuICogVW5saWtlIHRyYW5zYWN0aW9ucywgd3JpdGUgYmF0Y2hlcyBhcmUgcGVyc2lzdGVkIG9mZmxpbmUgYW5kIHRoZXJlZm9yZSBhcmVcbiAqIHByZWZlcmFibGUgd2hlbiB5b3UgZG9uJ3QgbmVlZCB0byBjb25kaXRpb24geW91ciB3cml0ZXMgb24gcmVhZCBkYXRhLlxuICpcbiAqIEByZXR1cm5zIEEge0BsaW5rIFdyaXRlQmF0Y2h9IHRoYXQgY2FuIGJlIHVzZWQgdG8gYXRvbWljYWxseSBleGVjdXRlIG11bHRpcGxlXG4gKiB3cml0ZXMuXG4gKi8gZnVuY3Rpb24gd3JpdGVCYXRjaChlKSB7XG4gICAgcmV0dXJuIGVuc3VyZUZpcmVzdG9yZUNvbmZpZ3VyZWQoZSA9IF9fUFJJVkFURV9jYXN0KGUsIEZpcmVzdG9yZSkpLCBuZXcgV3JpdGVCYXRjaChlLCAodCA9PiBleGVjdXRlV3JpdGUoZSwgdCkpKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gZnVuY3Rpb24gc2V0SW5kZXhDb25maWd1cmF0aW9uKGUsIHQpIHtcbiAgICB2YXIgbjtcbiAgICBjb25zdCByID0gZW5zdXJlRmlyZXN0b3JlQ29uZmlndXJlZChlID0gX19QUklWQVRFX2Nhc3QoZSwgRmlyZXN0b3JlKSk7XG4gICAgaWYgKCFyLl91bmluaXRpYWxpemVkQ29tcG9uZW50c1Byb3ZpZGVyIHx8IFwibWVtb3J5XCIgPT09IChudWxsID09PSAobiA9IHIuX3VuaW5pdGlhbGl6ZWRDb21wb25lbnRzUHJvdmlkZXIpIHx8IHZvaWQgMCA9PT0gbiA/IHZvaWQgMCA6IG4uX29mZmxpbmVLaW5kKSkgXG4gICAgLy8gUE9SVElORyBOT1RFOiBXZSBkb24ndCByZXR1cm4gYW4gZXJyb3IgaWYgdGhlIHVzZXIgaGFzIG5vdCBlbmFibGVkXG4gICAgLy8gcGVyc2lzdGVuY2Ugc2luY2UgYGVuYWJsZUluZGV4ZWRkYlBlcnNpc3RlbmNlKClgIGNhbiBmYWlsIG9uIHRoZSBXZWIuXG4gICAgcmV0dXJuIF9fUFJJVkFURV9sb2dXYXJuKFwiQ2Fubm90IGVuYWJsZSBpbmRleGVzIHdoZW4gcGVyc2lzdGVuY2UgaXMgZGlzYWJsZWRcIiksIFxuICAgIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIGNvbnN0IGkgPSBmdW5jdGlvbiBfX1BSSVZBVEVfcGFyc2VJbmRleGVzKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IFwic3RyaW5nXCIgPT0gdHlwZW9mIGUgPyBmdW5jdGlvbiBfX1BSSVZBVEVfdHJ5UGFyc2VKc29uKGUpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoZSk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKEQuSU5WQUxJRF9BUkdVTUVOVCwgXCJGYWlsZWQgdG8gcGFyc2UgSlNPTjogXCIgKyAobnVsbCA9PSBlID8gdm9pZCAwIDogZS5tZXNzYWdlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0oZSkgOiBlLCBuID0gW107XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHQuaW5kZXhlcykpIGZvciAoY29uc3QgZSBvZiB0LmluZGV4ZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBfX1BSSVZBVEVfdHJ5R2V0U3RyaW5nKGUsIFwiY29sbGVjdGlvbkdyb3VwXCIpLCByID0gW107XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShlLmZpZWxkcykpIGZvciAoY29uc3QgdCBvZiBlLmZpZWxkcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBfX1BSSVZBVEVfZmllbGRQYXRoRnJvbURvdFNlcGFyYXRlZFN0cmluZyhcInNldEluZGV4Q29uZmlndXJhdGlvblwiLCBfX1BSSVZBVEVfdHJ5R2V0U3RyaW5nKHQsIFwiZmllbGRQYXRoXCIpKTtcbiAgICAgICAgICAgICAgICBcIkNPTlRBSU5TXCIgPT09IHQuYXJyYXlDb25maWcgPyByLnB1c2gobmV3IEluZGV4U2VnbWVudChlLCAyIC8qIEluZGV4S2luZC5DT05UQUlOUyAqLykpIDogXCJBU0NFTkRJTkdcIiA9PT0gdC5vcmRlciA/IHIucHVzaChuZXcgSW5kZXhTZWdtZW50KGUsIDAgLyogSW5kZXhLaW5kLkFTQ0VORElORyAqLykpIDogXCJERVNDRU5ESU5HXCIgPT09IHQub3JkZXIgJiYgci5wdXNoKG5ldyBJbmRleFNlZ21lbnQoZSwgMSAvKiBJbmRleEtpbmQuREVTQ0VORElORyAqLykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbi5wdXNoKG5ldyBGaWVsZEluZGV4KEZpZWxkSW5kZXguVU5LTk9XTl9JRCwgdCwgciwgSW5kZXhTdGF0ZS5lbXB0eSgpKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG47XG4gICAgfSh0KTtcbiAgICByZXR1cm4gX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudFNldEluZGV4Q29uZmlndXJhdGlvbihyLCBpKTtcbn1cblxuZnVuY3Rpb24gX19QUklWQVRFX3RyeUdldFN0cmluZyhlLCB0KSB7XG4gICAgaWYgKFwic3RyaW5nXCIgIT0gdHlwZW9mIGVbdF0pIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELklOVkFMSURfQVJHVU1FTlQsIFwiTWlzc2luZyBzdHJpbmcgdmFsdWUgZm9yOiBcIiArIHQpO1xuICAgIHJldHVybiBlW3RdO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIGBQZXJzaXN0ZW50Q2FjaGVJbmRleE1hbmFnZXJgIGZvciBjb25maWd1cmluZyBwZXJzaXN0ZW50IGNhY2hlIGluZGV4ZXMgdXNlZFxuICogZm9yIGxvY2FsIHF1ZXJ5IGV4ZWN1dGlvbi5cbiAqXG4gKiBUbyB1c2UsIGNhbGwgYGdldFBlcnNpc3RlbnRDYWNoZUluZGV4TWFuYWdlcigpYCB0byBnZXQgYW4gaW5zdGFuY2UuXG4gKi8gY2xhc3MgUGVyc2lzdGVudENhY2hlSW5kZXhNYW5hZ2VyIHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKGUpIHtcbiAgICAgICAgdGhpcy5fY2xpZW50ID0gZSwgXG4gICAgICAgIC8qKiBBIHR5cGUgc3RyaW5nIHRvIHVuaXF1ZWx5IGlkZW50aWZ5IGluc3RhbmNlcyBvZiB0aGlzIGNsYXNzLiAqL1xuICAgICAgICB0aGlzLnR5cGUgPSBcIlBlcnNpc3RlbnRDYWNoZUluZGV4TWFuYWdlclwiO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBQZXJzaXN0ZW50Q2FjaGUgSW5kZXggTWFuYWdlciB1c2VkIGJ5IHRoZSBnaXZlbiBgRmlyZXN0b3JlYFxuICogb2JqZWN0LlxuICpcbiAqIEByZXR1cm4gVGhlIGBQZXJzaXN0ZW50Q2FjaGVJbmRleE1hbmFnZXJgIGluc3RhbmNlLCBvciBgbnVsbGAgaWYgbG9jYWxcbiAqIHBlcnNpc3RlbnQgc3RvcmFnZSBpcyBub3QgaW4gdXNlLlxuICovIGZ1bmN0aW9uIGdldFBlcnNpc3RlbnRDYWNoZUluZGV4TWFuYWdlcihlKSB7XG4gICAgdmFyIHQ7XG4gICAgZSA9IF9fUFJJVkFURV9jYXN0KGUsIEZpcmVzdG9yZSk7XG4gICAgY29uc3QgbiA9IHdlLmdldChlKTtcbiAgICBpZiAobikgcmV0dXJuIG47XG4gICAgY29uc3QgciA9IGVuc3VyZUZpcmVzdG9yZUNvbmZpZ3VyZWQoZSk7XG4gICAgaWYgKFwicGVyc2lzdGVudFwiICE9PSAobnVsbCA9PT0gKHQgPSByLl91bmluaXRpYWxpemVkQ29tcG9uZW50c1Byb3ZpZGVyKSB8fCB2b2lkIDAgPT09IHQgPyB2b2lkIDAgOiB0Ll9vZmZsaW5lS2luZCkpIHJldHVybiBudWxsO1xuICAgIGNvbnN0IGkgPSBuZXcgUGVyc2lzdGVudENhY2hlSW5kZXhNYW5hZ2VyKHIpO1xuICAgIHJldHVybiB3ZS5zZXQoZSwgaSksIGk7XG59XG5cbi8qKlxuICogRW5hYmxlcyB0aGUgU0RLIHRvIGNyZWF0ZSBwZXJzaXN0ZW50IGNhY2hlIGluZGV4ZXMgYXV0b21hdGljYWxseSBmb3IgbG9jYWxcbiAqIHF1ZXJ5IGV4ZWN1dGlvbiB3aGVuIHRoZSBTREsgYmVsaWV2ZXMgY2FjaGUgaW5kZXhlcyBjYW4gaGVscCBpbXByb3ZlXG4gKiBwZXJmb3JtYW5jZS5cbiAqXG4gKiBUaGlzIGZlYXR1cmUgaXMgZGlzYWJsZWQgYnkgZGVmYXVsdC5cbiAqLyBmdW5jdGlvbiBlbmFibGVQZXJzaXN0ZW50Q2FjaGVJbmRleEF1dG9DcmVhdGlvbihlKSB7XG4gICAgX19QUklWQVRFX3NldFBlcnNpc3RlbnRDYWNoZUluZGV4QXV0b0NyZWF0aW9uRW5hYmxlZChlLCAhMCk7XG59XG5cbi8qKlxuICogU3RvcHMgY3JlYXRpbmcgcGVyc2lzdGVudCBjYWNoZSBpbmRleGVzIGF1dG9tYXRpY2FsbHkgZm9yIGxvY2FsIHF1ZXJ5XG4gKiBleGVjdXRpb24uIFRoZSBpbmRleGVzIHdoaWNoIGhhdmUgYmVlbiBjcmVhdGVkIGJ5IGNhbGxpbmdcbiAqIGBlbmFibGVQZXJzaXN0ZW50Q2FjaGVJbmRleEF1dG9DcmVhdGlvbigpYCBzdGlsbCB0YWtlIGVmZmVjdC5cbiAqLyBmdW5jdGlvbiBkaXNhYmxlUGVyc2lzdGVudENhY2hlSW5kZXhBdXRvQ3JlYXRpb24oZSkge1xuICAgIF9fUFJJVkFURV9zZXRQZXJzaXN0ZW50Q2FjaGVJbmRleEF1dG9DcmVhdGlvbkVuYWJsZWQoZSwgITEpO1xufVxuXG4vKipcbiAqIFJlbW92ZXMgYWxsIHBlcnNpc3RlbnQgY2FjaGUgaW5kZXhlcy5cbiAqXG4gKiBQbGVhc2Ugbm90ZSB0aGlzIGZ1bmN0aW9uIHdpbGwgYWxzbyBkZWxldGVzIGluZGV4ZXMgZ2VuZXJhdGVkIGJ5XG4gKiBgc2V0SW5kZXhDb25maWd1cmF0aW9uKClgLCB3aGljaCBpcyBkZXByZWNhdGVkLlxuICovIGZ1bmN0aW9uIGRlbGV0ZUFsbFBlcnNpc3RlbnRDYWNoZUluZGV4ZXMoZSkge1xuICAgIGUuX2NsaWVudC52ZXJpZnlOb3RUZXJtaW5hdGVkKCk7XG4gICAgX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudERlbGV0ZUFsbEZpZWxkSW5kZXhlcyhlLl9jbGllbnQpLnRoZW4oKGUgPT4gX19QUklWQVRFX2xvZ0RlYnVnKFwiZGVsZXRpbmcgYWxsIHBlcnNpc3RlbnQgY2FjaGUgaW5kZXhlcyBzdWNjZWVkZWRcIikpKS5jYXRjaCgoZSA9PiBfX1BSSVZBVEVfbG9nV2FybihcImRlbGV0aW5nIGFsbCBwZXJzaXN0ZW50IGNhY2hlIGluZGV4ZXMgZmFpbGVkXCIsIGUpKSk7XG59XG5cbmZ1bmN0aW9uIF9fUFJJVkFURV9zZXRQZXJzaXN0ZW50Q2FjaGVJbmRleEF1dG9DcmVhdGlvbkVuYWJsZWQoZSwgdCkge1xuICAgIGUuX2NsaWVudC52ZXJpZnlOb3RUZXJtaW5hdGVkKCk7XG4gICAgX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudFNldFBlcnNpc3RlbnRDYWNoZUluZGV4QXV0b0NyZWF0aW9uRW5hYmxlZChlLl9jbGllbnQsIHQpLnRoZW4oKGUgPT4gX19QUklWQVRFX2xvZ0RlYnVnKGBzZXR0aW5nIHBlcnNpc3RlbnQgY2FjaGUgaW5kZXggYXV0byBjcmVhdGlvbiBpc0VuYWJsZWQ9JHt0fSBzdWNjZWVkZWRgKSkpLmNhdGNoKChlID0+IF9fUFJJVkFURV9sb2dXYXJuKGBzZXR0aW5nIHBlcnNpc3RlbnQgY2FjaGUgaW5kZXggYXV0byBjcmVhdGlvbiBpc0VuYWJsZWQ9JHt0fSBmYWlsZWRgLCBlKSkpO1xufVxuXG4vKipcbiAqIE1hcHMgYEZpcmVzdG9yZWAgaW5zdGFuY2VzIHRvIHRoZWlyIGNvcnJlc3BvbmRpbmdcbiAqIGBQZXJzaXN0ZW50Q2FjaGVJbmRleE1hbmFnZXJgIGluc3RhbmNlcy5cbiAqXG4gKiBVc2UgYSBgV2Vha01hcGAgc28gdGhhdCB0aGUgbWFwcGluZyB3aWxsIGJlIGF1dG9tYXRpY2FsbHkgZHJvcHBlZCB3aGVuIHRoZVxuICogYEZpcmVzdG9yZWAgaW5zdGFuY2UgaXMgZ2FyYmFnZSBjb2xsZWN0ZWQuIFRoaXMgZW11bGF0ZXMgYSBwcml2YXRlIG1lbWJlclxuICogYXMgZGVzY3JpYmVkIGluIGh0dHBzOi8vZ29vLmdsZS80NTR5dnVnLlxuICovIGNvbnN0IHdlID0gbmV3IFdlYWtNYXA7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFRlc3RpbmcgaG9va3MgZm9yIHVzZSBieSBGaXJlc3RvcmUncyBpbnRlZ3JhdGlvbiB0ZXN0IHN1aXRlIHRvIHJlYWNoIGludG8gdGhlXG4gKiBTREsgaW50ZXJuYWxzIHRvIHZhbGlkYXRlIGxvZ2ljIGFuZCBiZWhhdmlvciB0aGF0IGlzIG5vdCB2aXNpYmxlIGZyb20gdGhlXG4gKiBwdWJsaWMgQVBJIHN1cmZhY2UuXG4gKlxuICogQGludGVybmFsXG4gKi8gY2xhc3MgVGVzdGluZ0hvb2tzIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiaW5zdGFuY2VzIG9mIHRoaXMgY2xhc3Mgc2hvdWxkIG5vdCBiZSBjcmVhdGVkXCIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWdpc3RlcnMgYSBjYWxsYmFjayB0byBiZSBub3RpZmllZCB3aGVuIGFuIGV4aXN0ZW5jZSBmaWx0ZXIgbWlzbWF0Y2hcbiAgICAgKiBvY2N1cnMgaW4gdGhlIFdhdGNoIGxpc3RlbiBzdHJlYW0uXG4gICAgICpcbiAgICAgKiBUaGUgcmVsYXRpdmUgb3JkZXIgaW4gd2hpY2ggY2FsbGJhY2tzIGFyZSBub3RpZmllZCBpcyB1bnNwZWNpZmllZDsgZG8gbm90XG4gICAgICogcmVseSBvbiBhbnkgcGFydGljdWxhciBvcmRlcmluZy4gSWYgYSBnaXZlbiBjYWxsYmFjayBpcyByZWdpc3RlcmVkIG11bHRpcGxlXG4gICAgICogdGltZXMgdGhlbiBpdCB3aWxsIGJlIG5vdGlmaWVkIG11bHRpcGxlIHRpbWVzLCBvbmNlIHBlciByZWdpc3RyYXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY2FsbGJhY2sgdGhlIGNhbGxiYWNrIHRvIGludm9rZSB1cG9uIGV4aXN0ZW5jZSBmaWx0ZXIgbWlzbWF0Y2guXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIGEgZnVuY3Rpb24gdGhhdCwgd2hlbiBjYWxsZWQsIHVucmVnaXN0ZXJzIHRoZSBnaXZlbiBjYWxsYmFjazsgb25seVxuICAgICAqIHRoZSBmaXJzdCBpbnZvY2F0aW9uIG9mIHRoZSByZXR1cm5lZCBmdW5jdGlvbiBkb2VzIGFueXRoaW5nOyBhbGwgc3Vic2VxdWVudFxuICAgICAqIGludm9jYXRpb25zIGRvIG5vdGhpbmcuXG4gICAgICovICAgIHN0YXRpYyBvbkV4aXN0ZW5jZUZpbHRlck1pc21hdGNoKGUpIHtcbiAgICAgICAgcmV0dXJuIF9fUFJJVkFURV9UZXN0aW5nSG9va3NTcGlJbXBsLmluc3RhbmNlLm9uRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2goZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIFRoZSBpbXBsZW1lbnRhdGlvbiBvZiBgVGVzdGluZ0hvb2tzU3BpYC5cbiAqLyBjbGFzcyBfX1BSSVZBVEVfVGVzdGluZ0hvb2tzU3BpSW1wbCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuU3UgPSBuZXcgTWFwO1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0IGluc3RhbmNlKCkge1xuICAgICAgICByZXR1cm4gU2UgfHwgKFNlID0gbmV3IF9fUFJJVkFURV9UZXN0aW5nSG9va3NTcGlJbXBsLCBmdW5jdGlvbiBfX1BSSVZBVEVfc2V0VGVzdGluZ0hvb2tzU3BpKGUpIHtcbiAgICAgICAgICAgIGlmIChjZSkgdGhyb3cgbmV3IEVycm9yKFwiYSBUZXN0aW5nSG9va3NTcGkgaW5zdGFuY2UgaXMgYWxyZWFkeSBzZXRcIik7XG4gICAgICAgICAgICBjZSA9IGU7XG4gICAgICAgIH0oU2UpKSwgU2U7XG4gICAgfVxuICAgIHR0KGUpIHtcbiAgICAgICAgdGhpcy5TdS5mb3JFYWNoKCh0ID0+IHQoZSkpKTtcbiAgICB9XG4gICAgb25FeGlzdGVuY2VGaWx0ZXJNaXNtYXRjaChlKSB7XG4gICAgICAgIGNvbnN0IHQgPSBTeW1ib2woKSwgbiA9IHRoaXMuU3U7XG4gICAgICAgIHJldHVybiBuLnNldCh0LCBlKSwgKCkgPT4gbi5kZWxldGUodCk7XG4gICAgfVxufVxuXG5sZXQgU2UgPSBudWxsO1xuXG4vKipcbiAqIENsb3VkIEZpcmVzdG9yZVxuICpcbiAqIEBwYWNrYWdlRG9jdW1lbnRhdGlvblxuICovICFmdW5jdGlvbiBfX1BSSVZBVEVfcmVnaXN0ZXJGaXJlc3RvcmUoZSwgdCA9ICEwKSB7XG4gICAgIWZ1bmN0aW9uIF9fUFJJVkFURV9zZXRTREtWZXJzaW9uKGUpIHtcbiAgICAgICAgUyA9IGU7XG4gICAgfShTREtfVkVSU0lPTiksIF9yZWdpc3RlckNvbXBvbmVudChuZXcgQ29tcG9uZW50KFwiZmlyZXN0b3JlXCIsICgoZSwge2luc3RhbmNlSWRlbnRpZmllcjogbiwgb3B0aW9uczogcn0pID0+IHtcbiAgICAgICAgY29uc3QgaSA9IGUuZ2V0UHJvdmlkZXIoXCJhcHBcIikuZ2V0SW1tZWRpYXRlKCksIHMgPSBuZXcgRmlyZXN0b3JlKG5ldyBfX1BSSVZBVEVfRmlyZWJhc2VBdXRoQ3JlZGVudGlhbHNQcm92aWRlcihlLmdldFByb3ZpZGVyKFwiYXV0aC1pbnRlcm5hbFwiKSksIG5ldyBfX1BSSVZBVEVfRmlyZWJhc2VBcHBDaGVja1Rva2VuUHJvdmlkZXIoZS5nZXRQcm92aWRlcihcImFwcC1jaGVjay1pbnRlcm5hbFwiKSksIGZ1bmN0aW9uIF9fUFJJVkFURV9kYXRhYmFzZUlkRnJvbUFwcChlLCB0KSB7XG4gICAgICAgICAgICBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuYXBwbHkoZS5vcHRpb25zLCBbIFwicHJvamVjdElkXCIgXSkpIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcihELklOVkFMSURfQVJHVU1FTlQsICdcInByb2plY3RJZFwiIG5vdCBwcm92aWRlZCBpbiBmaXJlYmFzZS5pbml0aWFsaXplQXBwLicpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRhYmFzZUlkKGUub3B0aW9ucy5wcm9qZWN0SWQsIHQpO1xuICAgICAgICB9KGksIG4pLCBpKTtcbiAgICAgICAgcmV0dXJuIHIgPSBPYmplY3QuYXNzaWduKHtcbiAgICAgICAgICAgIHVzZUZldGNoU3RyZWFtczogdFxuICAgICAgICB9LCByKSwgcy5fc2V0U2V0dGluZ3MociksIHM7XG4gICAgfSksIFwiUFVCTElDXCIpLnNldE11bHRpcGxlSW5zdGFuY2VzKCEwKSksIHJlZ2lzdGVyVmVyc2lvbih3LCBcIjQuNC4wXCIsIGUpLCBcbiAgICAvLyBCVUlMRF9UQVJHRVQgd2lsbCBiZSByZXBsYWNlZCBieSB2YWx1ZXMgbGlrZSBlc201LCBlc20yMDE3LCBjanM1LCBldGMgZHVyaW5nIHRoZSBjb21waWxhdGlvblxuICAgIHJlZ2lzdGVyVmVyc2lvbih3LCBcIjQuNC4wXCIsIFwiZXNtMjAxN1wiKTtcbn0oKTtcblxuZXhwb3J0IHsgQWJzdHJhY3RVc2VyRGF0YVdyaXRlciwgQWdncmVnYXRlRmllbGQsIEFnZ3JlZ2F0ZVF1ZXJ5U25hcHNob3QsIEJ5dGVzLCBmZSBhcyBDQUNIRV9TSVpFX1VOTElNSVRFRCwgQ29sbGVjdGlvblJlZmVyZW5jZSwgRG9jdW1lbnRSZWZlcmVuY2UsIERvY3VtZW50U25hcHNob3QsIEZpZWxkUGF0aCwgRmllbGRWYWx1ZSwgRmlyZXN0b3JlLCBGaXJlc3RvcmVFcnJvciwgR2VvUG9pbnQsIExvYWRCdW5kbGVUYXNrLCBQZXJzaXN0ZW50Q2FjaGVJbmRleE1hbmFnZXIsIFF1ZXJ5LCBRdWVyeUNvbXBvc2l0ZUZpbHRlckNvbnN0cmFpbnQsIFF1ZXJ5Q29uc3RyYWludCwgUXVlcnlEb2N1bWVudFNuYXBzaG90LCBRdWVyeUVuZEF0Q29uc3RyYWludCwgUXVlcnlGaWVsZEZpbHRlckNvbnN0cmFpbnQsIFF1ZXJ5TGltaXRDb25zdHJhaW50LCBRdWVyeU9yZGVyQnlDb25zdHJhaW50LCBRdWVyeVNuYXBzaG90LCBRdWVyeVN0YXJ0QXRDb25zdHJhaW50LCBTbmFwc2hvdE1ldGFkYXRhLCBUaW1lc3RhbXAsIFRyYW5zYWN0aW9uLCBXcml0ZUJhdGNoLCBfX1BSSVZBVEVfQXV0b0lkIGFzIF9BdXRvSWQsIEJ5dGVTdHJpbmcgYXMgX0J5dGVTdHJpbmcsIERhdGFiYXNlSWQgYXMgX0RhdGFiYXNlSWQsIERvY3VtZW50S2V5IGFzIF9Eb2N1bWVudEtleSwgX19QUklWQVRFX0VtcHR5QXBwQ2hlY2tUb2tlblByb3ZpZGVyIGFzIF9FbXB0eUFwcENoZWNrVG9rZW5Qcm92aWRlciwgX19QUklWQVRFX0VtcHR5QXV0aENyZWRlbnRpYWxzUHJvdmlkZXIgYXMgX0VtcHR5QXV0aENyZWRlbnRpYWxzUHJvdmlkZXIsIEZpZWxkUGF0aCQxIGFzIF9GaWVsZFBhdGgsIFRlc3RpbmdIb29rcyBhcyBfVGVzdGluZ0hvb2tzLCBfX1BSSVZBVEVfY2FzdCBhcyBfY2FzdCwgX19QUklWQVRFX2RlYnVnQXNzZXJ0IGFzIF9kZWJ1Z0Fzc2VydCwgX19QUklWQVRFX2lzQmFzZTY0QXZhaWxhYmxlIGFzIF9pc0Jhc2U2NEF2YWlsYWJsZSwgX19QUklWQVRFX2xvZ1dhcm4gYXMgX2xvZ1dhcm4sIF9fUFJJVkFURV92YWxpZGF0ZUlzTm90VXNlZFRvZ2V0aGVyIGFzIF92YWxpZGF0ZUlzTm90VXNlZFRvZ2V0aGVyLCBhZGREb2MsIGFnZ3JlZ2F0ZUZpZWxkRXF1YWwsIGFnZ3JlZ2F0ZVF1ZXJ5U25hcHNob3RFcXVhbCwgYW5kLCBhcnJheVJlbW92ZSwgYXJyYXlVbmlvbiwgYXZlcmFnZSwgY2xlYXJJbmRleGVkRGJQZXJzaXN0ZW5jZSwgY29sbGVjdGlvbiwgY29sbGVjdGlvbkdyb3VwLCBjb25uZWN0RmlyZXN0b3JlRW11bGF0b3IsIGNvdW50LCBkZWxldGVBbGxQZXJzaXN0ZW50Q2FjaGVJbmRleGVzLCBkZWxldGVEb2MsIGRlbGV0ZUZpZWxkLCBkaXNhYmxlTmV0d29yaywgZGlzYWJsZVBlcnNpc3RlbnRDYWNoZUluZGV4QXV0b0NyZWF0aW9uLCBkb2MsIGRvY3VtZW50SWQsIGVuYWJsZUluZGV4ZWREYlBlcnNpc3RlbmNlLCBlbmFibGVNdWx0aVRhYkluZGV4ZWREYlBlcnNpc3RlbmNlLCBlbmFibGVOZXR3b3JrLCBlbmFibGVQZXJzaXN0ZW50Q2FjaGVJbmRleEF1dG9DcmVhdGlvbiwgZW5kQXQsIGVuZEJlZm9yZSwgZW5zdXJlRmlyZXN0b3JlQ29uZmlndXJlZCwgZXhlY3V0ZVdyaXRlLCBnZXRBZ2dyZWdhdGVGcm9tU2VydmVyLCBnZXRDb3VudEZyb21TZXJ2ZXIsIGdldERvYywgZ2V0RG9jRnJvbUNhY2hlLCBnZXREb2NGcm9tU2VydmVyLCBnZXREb2NzLCBnZXREb2NzRnJvbUNhY2hlLCBnZXREb2NzRnJvbVNlcnZlciwgZ2V0RmlyZXN0b3JlLCBnZXRQZXJzaXN0ZW50Q2FjaGVJbmRleE1hbmFnZXIsIGluY3JlbWVudCwgaW5pdGlhbGl6ZUZpcmVzdG9yZSwgbGltaXQsIGxpbWl0VG9MYXN0LCBsb2FkQnVuZGxlLCBtZW1vcnlFYWdlckdhcmJhZ2VDb2xsZWN0b3IsIG1lbW9yeUxvY2FsQ2FjaGUsIG1lbW9yeUxydUdhcmJhZ2VDb2xsZWN0b3IsIG5hbWVkUXVlcnksIG9uU25hcHNob3QsIG9uU25hcHNob3RzSW5TeW5jLCBvciwgb3JkZXJCeSwgcGVyc2lzdGVudExvY2FsQ2FjaGUsIHBlcnNpc3RlbnRNdWx0aXBsZVRhYk1hbmFnZXIsIHBlcnNpc3RlbnRTaW5nbGVUYWJNYW5hZ2VyLCBxdWVyeSwgcXVlcnlFcXVhbCwgcmVmRXF1YWwsIHJ1blRyYW5zYWN0aW9uLCBzZXJ2ZXJUaW1lc3RhbXAsIHNldERvYywgc2V0SW5kZXhDb25maWd1cmF0aW9uLCBzZXRMb2dMZXZlbCwgc25hcHNob3RFcXVhbCwgc3RhcnRBZnRlciwgc3RhcnRBdCwgc3VtLCB0ZXJtaW5hdGUsIHVwZGF0ZURvYywgd2FpdEZvclBlbmRpbmdXcml0ZXMsIHdoZXJlLCB3cml0ZUJhdGNoIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20yMDE3LmpzLm1hcFxuIiwiaW1wb3J0IHsgcmVnaXN0ZXJWZXJzaW9uIH0gZnJvbSAnQGZpcmViYXNlL2FwcCc7XG5leHBvcnQgKiBmcm9tICdAZmlyZWJhc2UvYXBwJztcblxudmFyIG5hbWUgPSBcImZpcmViYXNlXCI7XG52YXIgdmVyc2lvbiA9IFwiMTAuNy4wXCI7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnJlZ2lzdGVyVmVyc2lvbihuYW1lLCB2ZXJzaW9uLCAnYXBwJyk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20uanMubWFwXG4iLCJpbXBvcnQgeyBpbml0aWFsaXplQXBwIH0gZnJvbSBcImZpcmViYXNlL2FwcFwiO1xuaW1wb3J0IHsgZ2V0RmlyZXN0b3JlIH0gZnJvbSBcImZpcmViYXNlL2ZpcmVzdG9yZVwiO1xuXG5jb25zdCBmaXJlYmFzZUNvbmZpZyA9IHtcbiAgYXBpS2V5OiBcIkFJemFTeURLWktlZzZLMnNpZ09wYWRXYUtVQ2RPZXNJbDIyYVBIa1wiLFxuICBhdXRoRG9tYWluOiBcImNoYXQtYXBwLWNmNGUyLmZpcmViYXNlYXBwLmNvbVwiLFxuICBwcm9qZWN0SWQ6IFwiY2hhdC1hcHAtY2Y0ZTJcIixcbiAgc3RvcmFnZUJ1Y2tldDogXCJjaGF0LWFwcC1jZjRlMi5hcHBzcG90LmNvbVwiLFxuICBtZXNzYWdpbmdTZW5kZXJJZDogXCI3MzY2NDc4NjE5MDhcIixcbiAgYXBwSWQ6IFwiMTo3MzY2NDc4NjE5MDg6d2ViOjQ4YmE5MTZmYWMxM2QzOGFlZDA2ODFcIixcbiAgbWVhc3VyZW1lbnRJZDogXCJHLTZRWUIwUTFYUjJcIixcbn07XG5cbmNvbnN0IGFwcCA9IGluaXRpYWxpemVBcHAoZmlyZWJhc2VDb25maWcpO1xuXG5jb25zdCBmaXJlc3RvcmUgPSBnZXRGaXJlc3RvcmUoYXBwKTtcblxuZXhwb3J0IHsgZmlyZXN0b3JlIH07XG4iLCJpbXBvcnQgeyBjb2xsZWN0aW9uLCBnZXREb2NzIH0gZnJvbSBcImZpcmViYXNlL2ZpcmVzdG9yZVwiO1xuaW1wb3J0IHsgZmlyZXN0b3JlIH0gZnJvbSBcIi4uL2ZpcmViYXNlQ29uZmlnXCI7XG5cbmV4cG9ydCBjb25zdCBTRU5EX01FU1NBR0UgPSBcIlNFTkRfTUVTU0FHRVwiO1xuZXhwb3J0IGNvbnN0IENMRUFSX0NIQVQgPSBcIkNMRUFSX0NIQVRcIjtcbmV4cG9ydCBjb25zdCBJTkNSRU1FTlRfVU5SRUFEX0NPVU5UID0gXCJJTkNSRU1FTlRfVU5SRUFEX0NPVU5UXCI7XG5leHBvcnQgY29uc3QgUkVTRVRfVU5SRUFEX0NPVU5UID0gXCJSRVNFVF9VTlJFQURfQ09VTlRcIjtcbmV4cG9ydCBjb25zdCBTRVRfQ1VSUkVOVF9TRU5ERVIgPSBcIlNFVF9DVVJSRU5UX1NFTkRFUlwiO1xuZXhwb3J0IGNvbnN0IEZFVENIX01FU1NBR0VTX1NVQ0NFU1MgPSBcIkZFVENIX01FU1NBR0VTX1NVQ0NFU1NcIjtcblxuZXhwb3J0IHR5cGUgTWVzc2FnZSA9IHtcbiAgc2VuZGVyOiBzdHJpbmc7XG4gIHRleHQ6IHN0cmluZztcbiAgdGltZXN0YW1wOiBzdHJpbmc7XG59O1xuXG5leHBvcnQgdHlwZSBTZW5kTWVzc2FnZUFjdGlvbiA9IHtcbiAgdHlwZTogdHlwZW9mIFNFTkRfTUVTU0FHRTtcbiAgcGF5bG9hZDogTWVzc2FnZTtcbn07XG5cbmV4cG9ydCB0eXBlIENsZWFyQ2hhdEFjdGlvbiA9IHtcbiAgdHlwZTogdHlwZW9mIENMRUFSX0NIQVQ7XG59O1xuXG5leHBvcnQgdHlwZSBJbmNyZW1lbnRVbnJlYWRDb3VudEFjdGlvbiA9IHtcbiAgdHlwZTogdHlwZW9mIElOQ1JFTUVOVF9VTlJFQURfQ09VTlQ7XG4gIHBheWxvYWQ6IHN0cmluZztcbn07XG5cbmV4cG9ydCB0eXBlIFJlc2V0VW5yZWFkQ291bnRBY3Rpb24gPSB7XG4gIHR5cGU6IHR5cGVvZiBSRVNFVF9VTlJFQURfQ09VTlQ7XG4gIHBheWxvYWQ6IHN0cmluZztcbn07XG5cbmV4cG9ydCB0eXBlIFNldEN1cnJlbnRTZW5kZXJBY3Rpb24gPSB7XG4gIHR5cGU6IHR5cGVvZiBTRVRfQ1VSUkVOVF9TRU5ERVI7XG4gIHBheWxvYWQ6IHN0cmluZztcbn07XG5cbmV4cG9ydCB0eXBlIEZldGNoTWVzc2FnZXNTdWNjZXNzQWN0aW9uID0ge1xuICB0eXBlOiB0eXBlb2YgRkVUQ0hfTUVTU0FHRVNfU1VDQ0VTUztcbiAgcGF5bG9hZDogTWVzc2FnZVtdO1xufTtcblxuZXhwb3J0IHR5cGUgQ2hhdEFjdGlvblR5cGVzID1cbiAgfCBTZW5kTWVzc2FnZUFjdGlvblxuICB8IENsZWFyQ2hhdEFjdGlvblxuICB8IEluY3JlbWVudFVucmVhZENvdW50QWN0aW9uXG4gIHwgUmVzZXRVbnJlYWRDb3VudEFjdGlvblxuICB8IFNldEN1cnJlbnRTZW5kZXJBY3Rpb25cbiAgfCBGZXRjaE1lc3NhZ2VzU3VjY2Vzc0FjdGlvbjtcblxuZXhwb3J0IGNvbnN0IHNlbmRNZXNzYWdlID0gKG1lc3NhZ2U6IE1lc3NhZ2UpOiBTZW5kTWVzc2FnZUFjdGlvbiA9PiAoe1xuICB0eXBlOiBTRU5EX01FU1NBR0UsXG4gIHBheWxvYWQ6IG1lc3NhZ2UsXG59KTtcblxuZXhwb3J0IGNvbnN0IGNsZWFyQ2hhdCA9ICgpOiBDbGVhckNoYXRBY3Rpb24gPT4gKHtcbiAgdHlwZTogQ0xFQVJfQ0hBVCxcbn0pO1xuXG5leHBvcnQgY29uc3QgaW5jcmVtZW50VW5yZWFkQ291bnQgPSAoXG4gIHVzZXJOYW1lOiBzdHJpbmcsXG4pOiBJbmNyZW1lbnRVbnJlYWRDb3VudEFjdGlvbiA9PiAoe1xuICB0eXBlOiBJTkNSRU1FTlRfVU5SRUFEX0NPVU5ULFxuICBwYXlsb2FkOiB1c2VyTmFtZSxcbn0pO1xuXG5leHBvcnQgY29uc3QgcmVzZXRVbnJlYWRDb3VudCA9ICh1c2VyTmFtZTogc3RyaW5nKTogUmVzZXRVbnJlYWRDb3VudEFjdGlvbiA9PiAoe1xuICB0eXBlOiBSRVNFVF9VTlJFQURfQ09VTlQsXG4gIHBheWxvYWQ6IHVzZXJOYW1lLFxufSk7XG5cbmV4cG9ydCBjb25zdCBzZXRDdXJyZW50U2VuZGVyID0gKHNlbmRlcjogc3RyaW5nKTogU2V0Q3VycmVudFNlbmRlckFjdGlvbiA9PiAoe1xuICB0eXBlOiBTRVRfQ1VSUkVOVF9TRU5ERVIsXG4gIHBheWxvYWQ6IHNlbmRlcixcbn0pO1xuXG5leHBvcnQgY29uc3QgZmV0Y2hNZXNzYWdlc1N1Y2Nlc3MgPSAoXG4gIG1lc3NhZ2VzOiBNZXNzYWdlW10sXG4pOiBGZXRjaE1lc3NhZ2VzU3VjY2Vzc0FjdGlvbiA9PiAoe1xuICB0eXBlOiBGRVRDSF9NRVNTQUdFU19TVUNDRVNTLFxuICBwYXlsb2FkOiBtZXNzYWdlcyxcbn0pO1xuXG5leHBvcnQgY29uc3QgZmV0Y2hNZXNzYWdlcyA9IGFzeW5jIChcbiAgZGlzcGF0Y2g6IChhY3Rpb246IENoYXRBY3Rpb25UeXBlcykgPT4gdm9pZCxcbikgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHF1ZXJ5U25hcHNob3QgPSBhd2FpdCBnZXREb2NzKGNvbGxlY3Rpb24oZmlyZXN0b3JlLCBcIm1lc3NhZ2VzXCIpKTtcbiAgICBjb25zdCBtZXNzYWdlczogTWVzc2FnZVtdID0gcXVlcnlTbmFwc2hvdC5kb2NzLm1hcChcbiAgICAgIChkb2MpID0+IGRvYy5kYXRhKCkgYXMgTWVzc2FnZSxcbiAgICApO1xuICAgIG1lc3NhZ2VzLnNvcnQoKGEsIGIpID0+IGEudGltZXN0YW1wLmxvY2FsZUNvbXBhcmUoYi50aW1lc3RhbXApKTtcbiAgICBkaXNwYXRjaChmZXRjaE1lc3NhZ2VzU3VjY2VzcyhtZXNzYWdlcykpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCLQntGI0LjQsdC60LAg0L/RgNC4INC/0L7Qu9GD0YfQtdC90LjQuCDRgdC+0L7QsdGJ0LXQvdC40Lk6IFwiLCBlcnJvcik7XG4gIH1cbn07XG4iLCJpbXBvcnQge1xuICBTRU5EX01FU1NBR0UsXG4gIENMRUFSX0NIQVQsXG4gIElOQ1JFTUVOVF9VTlJFQURfQ09VTlQsXG4gIFJFU0VUX1VOUkVBRF9DT1VOVCxcbiAgU0VUX0NVUlJFTlRfU0VOREVSLFxuICBGRVRDSF9NRVNTQUdFU19TVUNDRVNTLFxuICBDaGF0QWN0aW9uVHlwZXMsXG4gIE1lc3NhZ2UsXG59IGZyb20gXCIuL2FjdGlvbnNcIjtcblxuZXhwb3J0IHR5cGUgQ2hhdFN0YXRlID0ge1xuICBtZXNzYWdlczogTWVzc2FnZVtdO1xuICBpdmFuVW5yZWFkOiBudW1iZXI7XG4gIG1hcnlhVW5yZWFkOiBudW1iZXI7XG4gIGN1cnJlbnRTZW5kZXI6IHN0cmluZztcbn07XG5cbmV4cG9ydCBjb25zdCBpbml0aWFsU3RhdGU6IENoYXRTdGF0ZSA9IHtcbiAgbWVzc2FnZXM6IFtdLFxuICBpdmFuVW5yZWFkOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcIml2YW5VbnJlYWRcIilcbiAgICA/IHBhcnNlSW50KGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiaXZhblVucmVhZFwiKSwgMTApXG4gICAgOiAwLFxuICBtYXJ5YVVucmVhZDogbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJtYXJ5YVVucmVhZFwiKVxuICAgID8gcGFyc2VJbnQobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJtYXJ5YVVucmVhZFwiKSwgMTApXG4gICAgOiAwLFxuICBjdXJyZW50U2VuZGVyOiBcItCY0LLQsNC9XCIsXG59O1xuXG5leHBvcnQgY29uc3QgY2hhdFJlZHVjZXIgPSAoXG4gIHN0YXRlOiBDaGF0U3RhdGUgfCB1bmRlZmluZWQsXG4gIGFjdGlvbjogQ2hhdEFjdGlvblR5cGVzLFxuKTogQ2hhdFN0YXRlID0+IHtcbiAgY29uc3QgY3VycmVudFN0YXRlID0gc3RhdGUgfHwgaW5pdGlhbFN0YXRlO1xuICBzd2l0Y2ggKGFjdGlvbi50eXBlKSB7XG4gICAgY2FzZSBTRU5EX01FU1NBR0U6IHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnN0YXRlLFxuICAgICAgICBtZXNzYWdlczogWy4uLnN0YXRlLm1lc3NhZ2VzLCBhY3Rpb24ucGF5bG9hZF0sXG4gICAgICB9O1xuICAgIH1cbiAgICBjYXNlIENMRUFSX0NIQVQ6IHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnN0YXRlLFxuICAgICAgICBtZXNzYWdlczogW10sXG4gICAgICB9O1xuICAgIH1cbiAgICBjYXNlIElOQ1JFTUVOVF9VTlJFQURfQ09VTlQ6IHtcbiAgICAgIGNvbnN0IHVwZGF0ZWRJdmFuVW5yZWFkID1cbiAgICAgICAgYWN0aW9uLnBheWxvYWQgPT09IFwi0JjQstCw0L1cIiA/IHN0YXRlLml2YW5VbnJlYWQgKyAxIDogc3RhdGUuaXZhblVucmVhZDtcbiAgICAgIGNvbnN0IHVwZGF0ZWRNYXJ5YVVucmVhZCA9XG4gICAgICAgIGFjdGlvbi5wYXlsb2FkID09PSBcItCc0LDRgNC40Y9cIiA/IHN0YXRlLm1hcnlhVW5yZWFkICsgMSA6IHN0YXRlLm1hcnlhVW5yZWFkO1xuXG4gICAgICBpZiAoYWN0aW9uLnBheWxvYWQgPT09IFwi0JjQstCw0L1cIikge1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcIml2YW5VbnJlYWRcIiwgdXBkYXRlZEl2YW5VbnJlYWQudG9TdHJpbmcoKSk7XG4gICAgICAgIHJldHVybiB7IC4uLnN0YXRlLCBpdmFuVW5yZWFkOiB1cGRhdGVkSXZhblVucmVhZCB9O1xuICAgICAgfVxuICAgICAgaWYgKGFjdGlvbi5wYXlsb2FkID09PSBcItCc0LDRgNC40Y9cIikge1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcIm1hcnlhVW5yZWFkXCIsIHVwZGF0ZWRNYXJ5YVVucmVhZC50b1N0cmluZygpKTtcbiAgICAgICAgcmV0dXJuIHsgLi4uc3RhdGUsIG1hcnlhVW5yZWFkOiB1cGRhdGVkTWFyeWFVbnJlYWQgfTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzdGF0ZTtcbiAgICB9XG4gICAgY2FzZSBSRVNFVF9VTlJFQURfQ09VTlQ6IHtcbiAgICAgIGlmIChhY3Rpb24ucGF5bG9hZCA9PT0gXCLQmNCy0LDQvVwiKSB7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiaXZhblVucmVhZFwiLCBcIjBcIik7XG4gICAgICAgIHJldHVybiB7IC4uLnN0YXRlLCBpdmFuVW5yZWFkOiAwIH07XG4gICAgICB9XG4gICAgICBpZiAoYWN0aW9uLnBheWxvYWQgPT09IFwi0JzQsNGA0LjRj1wiKSB7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwibWFyeWFVbnJlYWRcIiwgXCIwXCIpO1xuICAgICAgICByZXR1cm4geyAuLi5zdGF0ZSwgbWFyeWFVbnJlYWQ6IDAgfTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzdGF0ZTtcbiAgICB9XG4gICAgY2FzZSBTRVRfQ1VSUkVOVF9TRU5ERVI6IHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnN0YXRlLFxuICAgICAgICBjdXJyZW50U2VuZGVyOiBhY3Rpb24ucGF5bG9hZCxcbiAgICAgIH07XG4gICAgfVxuICAgIGNhc2UgRkVUQ0hfTUVTU0FHRVNfU1VDQ0VTUzoge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgIG1lc3NhZ2VzOiBhY3Rpb24ucGF5bG9hZCxcbiAgICAgIH07XG4gICAgfVxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gY3VycmVudFN0YXRlO1xuICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBjaGF0UmVkdWNlcjtcbiIsImltcG9ydCB7XG4gIENoYXRTdGF0ZSxcbiAgY2hhdFJlZHVjZXIsXG4gIGluaXRpYWxTdGF0ZSBhcyBjaGF0SW5pdGlhbFN0YXRlLFxufSBmcm9tIFwiLi9yZWR1Y2VyXCI7XG5pbXBvcnQgeyBDaGF0QWN0aW9uVHlwZXMgfSBmcm9tIFwiLi9hY3Rpb25zXCI7XG5cbmNsYXNzIFN0b3JlIHtcbiAgcHJpdmF0ZSBzdGF0ZTogQ2hhdFN0YXRlO1xuXG4gIHByaXZhdGUgbGlzdGVuZXJzOiBBcnJheTwoKSA9PiB2b2lkPiA9IFtdO1xuXG4gIGNvbnN0cnVjdG9yKGluaXRpYWxTdGF0ZTogQ2hhdFN0YXRlKSB7XG4gICAgdGhpcy5zdGF0ZSA9IGluaXRpYWxTdGF0ZTtcbiAgfVxuXG4gIGdldFN0YXRlID0gKCk6IENoYXRTdGF0ZSA9PiB0aGlzLnN0YXRlO1xuXG4gIGRpc3BhdGNoID0gKGFjdGlvbjogQ2hhdEFjdGlvblR5cGVzKTogdm9pZCA9PiB7XG4gICAgdGhpcy5zdGF0ZSA9IGNoYXRSZWR1Y2VyKHRoaXMuc3RhdGUsIGFjdGlvbik7XG4gICAgdGhpcy5saXN0ZW5lcnMuZm9yRWFjaCgobGlzdGVuZXIpID0+IGxpc3RlbmVyKCkpO1xuICB9O1xuXG4gIHN1YnNjcmliZSA9IChsaXN0ZW5lcjogKCkgPT4gdm9pZCk6ICgoKSA9PiB2b2lkKSA9PiB7XG4gICAgdGhpcy5saXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHRoaXMubGlzdGVuZXJzID0gdGhpcy5saXN0ZW5lcnMuZmlsdGVyKChsKSA9PiBsICE9PSBsaXN0ZW5lcik7XG4gICAgfTtcbiAgfTtcbn1cblxuY29uc3Qgc3RvcmUgPSBuZXcgU3RvcmUoY2hhdEluaXRpYWxTdGF0ZSk7XG5leHBvcnQgZGVmYXVsdCBzdG9yZTtcbiIsImltcG9ydCBcIi4vc3R5bGUuY3NzXCI7XG5pbXBvcnQgeyBjb2xsZWN0aW9uLCBhZGREb2MsIGdldERvY3MsIGRlbGV0ZURvYyB9IGZyb20gXCJmaXJlYmFzZS9maXJlc3RvcmVcIjtcbmltcG9ydCB7IGZpcmVzdG9yZSB9IGZyb20gXCIuL2ZpcmViYXNlQ29uZmlnXCI7XG5pbXBvcnQgc3RvcmUgZnJvbSBcIi4vcmVkdXgvc3RvcmVcIjtcbmltcG9ydCB7XG4gIHNlbmRNZXNzYWdlLFxuICBjbGVhckNoYXQsXG4gIHNldEN1cnJlbnRTZW5kZXIsXG4gIGluY3JlbWVudFVucmVhZENvdW50LFxuICByZXNldFVucmVhZENvdW50LFxuICBmZXRjaE1lc3NhZ2VzLFxuICBNZXNzYWdlLFxufSBmcm9tIFwiLi9yZWR1eC9hY3Rpb25zXCI7XG5cbmNvbnN0IGNyZWF0ZUNoYXRNZXNzYWdlRWxlbWVudCA9IChtZXNzYWdlOiBNZXNzYWdlLCBtZXNzYWdlU2VuZGVyOiBzdHJpbmcpID0+IHtcbiAgY29uc3QgaXNDdXJyZW50VXNlck1lc3NhZ2UgPSBtZXNzYWdlLnNlbmRlciA9PT0gbWVzc2FnZVNlbmRlcjtcbiAgY29uc3QgYmdDb2xvckNsYXNzID0gaXNDdXJyZW50VXNlck1lc3NhZ2UgPyBcImJsdWUtYmdcIiA6IFwiZ3JheS1iZ1wiO1xuICBjb25zdCBmb3JtYXR0ZWRUaW1lc3RhbXAgPSBuZXcgRGF0ZShtZXNzYWdlLnRpbWVzdGFtcCkudG9Mb2NhbGVTdHJpbmcoXG4gICAgXCJydS1SVVwiLFxuICApO1xuXG4gIHJldHVybiBgXG4gICAgPGRpdiBjbGFzcz1cIm1lc3NhZ2UgJHtiZ0NvbG9yQ2xhc3N9XCI+XG4gICAgICA8ZGl2IGNsYXNzPVwibWVzc2FnZS1zZW5kZXJcIj4ke21lc3NhZ2Uuc2VuZGVyfTwvZGl2PlxuICAgICAgPGRpdiBjbGFzcz1cIm1lc3NhZ2UtdGV4dFwiPiR7bWVzc2FnZS50ZXh0fTwvZGl2PlxuICAgICAgPGRpdiBjbGFzcz1cIm1lc3NhZ2UtdGltZXN0YW1wXCI+JHtmb3JtYXR0ZWRUaW1lc3RhbXB9PC9kaXY+XG4gICAgPC9kaXY+XG4gIGA7XG59O1xuXG5jb25zdCBpdmFuU2VsZWN0b3JCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcbiAgXCJpdmFuLXNlbGVjdG9yXCIsXG4pIGFzIEhUTUxCdXR0b25FbGVtZW50O1xuY29uc3QgbWFyeWFTZWxlY3RvckJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxuICBcIm1hcnlhLXNlbGVjdG9yXCIsXG4pIGFzIEhUTUxCdXR0b25FbGVtZW50O1xuY29uc3QgY2hhdElucHV0Rm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLmNoYXQtaW5wdXQtZm9ybVwiLFxuKSBhcyBIVE1MRm9ybUVsZW1lbnQ7XG5jb25zdCBjaGF0SW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNoYXQtaW5wdXRcIikgYXMgSFRNTFRleHRBcmVhRWxlbWVudDtcbmNvbnN0IGNoYXRNZXNzYWdlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2hhdC1tZXNzYWdlc1wiKSBhcyBIVE1MRGl2RWxlbWVudDtcbmNvbnN0IGNsZWFyQ2hhdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLmNsZWFyLWNoYXQtYnV0dG9uXCIsXG4pIGFzIEhUTUxCdXR0b25FbGVtZW50O1xuY29uc3QgaXZhblVucmVhZENvdW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXG4gIFwiaXZhbi11bnJlYWRcIixcbikgYXMgSFRNTFNwYW5FbGVtZW50O1xuY29uc3QgbWFyeWFVbnJlYWRDb3VudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxuICBcIm1hcnlhLXVucmVhZFwiLFxuKSBhcyBIVE1MU3BhbkVsZW1lbnQ7XG5jb25zdCBlbW9qaUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLmVtb2ppLWJ1dHRvblwiLFxuKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcbmNvbnN0IGVtb2ppUGFuZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVtb2ppLXBhbmVsXCIpIGFzIEhUTUxEaXZFbGVtZW50O1xuXG5pZiAoXG4gICFpdmFuU2VsZWN0b3JCdXR0b24gfHxcbiAgIW1hcnlhU2VsZWN0b3JCdXR0b24gfHxcbiAgIWNoYXRJbnB1dEZvcm0gfHxcbiAgIWNoYXRJbnB1dCB8fFxuICAhY2hhdE1lc3NhZ2VzIHx8XG4gICFjbGVhckNoYXRCdXR0b24gfHxcbiAgIWVtb2ppQnV0dG9uIHx8XG4gICFlbW9qaVBhbmVsXG4pIHtcbiAgdGhyb3cgbmV3IEVycm9yKFwiU29tZSBIVE1MIGVsZW1lbnRzIGFyZSBtaXNzaW5nLlwiKTtcbn1cblxuY29uc3Qgc2Nyb2xsVG9Cb3R0b20gPSAoKSA9PiB7XG4gIGNoYXRNZXNzYWdlcy5zY3JvbGxUb3AgPSBjaGF0TWVzc2FnZXMuc2Nyb2xsSGVpZ2h0O1xufTtcblxuZnVuY3Rpb24gaGFuZGxlVXNlclNlbGVjdGlvbihcbiAgdXNlcjogc3RyaW5nLFxuICB1c2VyQnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudCxcbiAgb3RoZXJCdXR0b246IEhUTUxCdXR0b25FbGVtZW50LFxuKSB7XG4gIHN0b3JlLmRpc3BhdGNoKHNldEN1cnJlbnRTZW5kZXIodXNlcikpO1xuICB1c2VyQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmUtcGVyc29uXCIpO1xuICBvdGhlckJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlLXBlcnNvblwiKTtcbiAgc3RvcmUuZGlzcGF0Y2gocmVzZXRVbnJlYWRDb3VudCh1c2VyKSk7XG5cbiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0odXNlciA9PT0gXCLQmNCy0LDQvVwiID8gXCJpdmFuVW5yZWFkXCIgOiBcIm1hcnlhVW5yZWFkXCIsIFwiMFwiKTtcbiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJjdXJyZW50U2VuZGVyXCIsIHVzZXIpO1xuICBjb25zdCBjaGF0SGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICBcIi5jaGF0LWhlYWRlclwiLFxuICApIGFzIEhUTUxIZWFkaW5nRWxlbWVudDtcbiAgY29uc3QgY2hhdElucHV0UGxhY2Vob2xkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgIFwiLmNoYXQtaW5wdXRcIixcbiAgKSBhcyBIVE1MVGV4dEFyZWFFbGVtZW50O1xuICBpZiAodXNlciA9PT0gXCLQmNCy0LDQvVwiKSB7XG4gICAgY2hhdEhlYWRlci50ZXh0Q29udGVudCA9IFwi0JzQsNGA0LjRjyDQv9C40YjQtdGCLi4uXCI7XG4gICAgY2hhdElucHV0UGxhY2Vob2xkZXIucGxhY2Vob2xkZXIgPSBcItCX0LTQtdGB0Ywg0L/QuNGI0LXRgiwg0JjQstCw0L0uLi5cIjtcbiAgfSBlbHNlIHtcbiAgICBjaGF0SGVhZGVyLnRleHRDb250ZW50ID0gXCLQmNCy0LDQvSDQv9C40YjQtdGCLi4uXCI7XG4gICAgY2hhdElucHV0UGxhY2Vob2xkZXIucGxhY2Vob2xkZXIgPSBcItCX0LTQtdGB0Ywg0L/QuNGI0LXRgiwg0JzQsNGA0LjRjy4uLlwiO1xuICB9XG59XG5cbml2YW5TZWxlY3RvckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT5cbiAgaGFuZGxlVXNlclNlbGVjdGlvbihcItCY0LLQsNC9XCIsIGl2YW5TZWxlY3RvckJ1dHRvbiwgbWFyeWFTZWxlY3RvckJ1dHRvbiksXG4pO1xubWFyeWFTZWxlY3RvckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT5cbiAgaGFuZGxlVXNlclNlbGVjdGlvbihcItCc0LDRgNC40Y9cIiwgbWFyeWFTZWxlY3RvckJ1dHRvbiwgaXZhblNlbGVjdG9yQnV0dG9uKSxcbik7XG5cbmFzeW5jIGZ1bmN0aW9uIHNlbmRNZXNzYWdlSGFuZGxlcigpIHtcbiAgY29uc3QgbWVzc2FnZSA9IGNoYXRJbnB1dC52YWx1ZS50cmltKCk7XG4gIGlmIChtZXNzYWdlKSB7XG4gICAgY29uc3QgdGltZXN0YW1wID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuICAgIGNvbnN0IHsgY3VycmVudFNlbmRlciB9ID0gc3RvcmUuZ2V0U3RhdGUoKTtcblxuICAgIGNvbnN0IG1lc3NhZ2VEYXRhID0geyBzZW5kZXI6IGN1cnJlbnRTZW5kZXIsIHRleHQ6IG1lc3NhZ2UsIHRpbWVzdGFtcCB9O1xuXG4gICAgc3RvcmUuZGlzcGF0Y2goc2VuZE1lc3NhZ2UobWVzc2FnZURhdGEpKTtcblxuICAgIHRyeSB7XG4gICAgICBhd2FpdCBhZGREb2MoY29sbGVjdGlvbihmaXJlc3RvcmUsIFwibWVzc2FnZXNcIiksIG1lc3NhZ2VEYXRhKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcItCe0YjQuNCx0LrQsCDQv9GA0Lgg0LTQvtCx0LDQstC70LXQvdC40Lgg0YHQvtC+0LHRidC10L3QuNGPOiBcIiwgZXJyb3IpO1xuICAgIH1cblxuICAgIGNoYXRJbnB1dC52YWx1ZSA9IFwiXCI7XG5cbiAgICBjb25zdCByZWNpcGllbnQgPSBjdXJyZW50U2VuZGVyID09PSBcItCY0LLQsNC9XCIgPyBcItCc0LDRgNC40Y9cIiA6IFwi0JjQstCw0L1cIjtcbiAgICBzdG9yZS5kaXNwYXRjaChpbmNyZW1lbnRVbnJlYWRDb3VudChyZWNpcGllbnQpKTtcblxuICAgIGNvbnN0IHVwZGF0ZWRDb3VudCA9XG4gICAgICBzdG9yZS5nZXRTdGF0ZSgpW3JlY2lwaWVudCA9PT0gXCLQmNCy0LDQvVwiID8gXCJpdmFuVW5yZWFkXCIgOiBcIm1hcnlhVW5yZWFkXCJdO1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFxuICAgICAgcmVjaXBpZW50ID09PSBcItCY0LLQsNC9XCIgPyBcIml2YW5VbnJlYWRcIiA6IFwibWFyeWFVbnJlYWRcIixcbiAgICAgIHVwZGF0ZWRDb3VudC50b1N0cmluZygpLFxuICAgICk7XG5cbiAgICBzY3JvbGxUb0JvdHRvbSgpO1xuICB9XG59XG5cbmNoYXRJbnB1dC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBhc3luYyAoZXZlbnQpID0+IHtcbiAgaWYgKGV2ZW50LmtleSA9PT0gXCJFbnRlclwiICYmICFldmVudC5zaGlmdEtleSkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgYXdhaXQgc2VuZE1lc3NhZ2VIYW5kbGVyKCk7XG4gIH1cbn0pO1xuXG5jaGF0SW5wdXRGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgYXN5bmMgKGV2ZW50KSA9PiB7XG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIGF3YWl0IHNlbmRNZXNzYWdlSGFuZGxlcigpO1xufSk7XG5cbmNvbnN0IHVwZGF0ZVVJID0gKCkgPT4ge1xuICBlbW9qaVBhbmVsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcblxuICBjb25zdCBzdGF0ZSA9IHN0b3JlLmdldFN0YXRlKCk7XG4gIGNoYXRNZXNzYWdlcy5pbm5lckhUTUwgPSBcIlwiO1xuXG4gIHN0YXRlLm1lc3NhZ2VzLmZvckVhY2goKG1lc3NhZ2VEYXRhKSA9PiB7XG4gICAgY29uc3QgbWVzc2FnZUhUTUwgPSBjcmVhdGVDaGF0TWVzc2FnZUVsZW1lbnQoXG4gICAgICBtZXNzYWdlRGF0YSxcbiAgICAgIHN0YXRlLmN1cnJlbnRTZW5kZXIsXG4gICAgKTtcbiAgICBjaGF0TWVzc2FnZXMuaW5uZXJIVE1MICs9IG1lc3NhZ2VIVE1MO1xuICB9KTtcbiAgc2Nyb2xsVG9Cb3R0b20oKTtcblxuICBpdmFuVW5yZWFkQ291bnQudGV4dENvbnRlbnQgPVxuICAgIHN0YXRlLml2YW5VbnJlYWQgPiAwID8gc3RhdGUuaXZhblVucmVhZC50b1N0cmluZygpIDogXCJcIjtcbiAgbWFyeWFVbnJlYWRDb3VudC50ZXh0Q29udGVudCA9XG4gICAgc3RhdGUubWFyeWFVbnJlYWQgPiAwID8gc3RhdGUubWFyeWFVbnJlYWQudG9TdHJpbmcoKSA6IFwiXCI7XG4gIGl2YW5VbnJlYWRDb3VudC5zdHlsZS5kaXNwbGF5ID0gc3RhdGUuaXZhblVucmVhZCA+IDAgPyBcImlubGluZVwiIDogXCJub25lXCI7XG4gIG1hcnlhVW5yZWFkQ291bnQuc3R5bGUuZGlzcGxheSA9IHN0YXRlLm1hcnlhVW5yZWFkID4gMCA/IFwiaW5saW5lXCIgOiBcIm5vbmVcIjtcbn07XG5cbmNsZWFyQ2hhdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYXN5bmMgKCkgPT4ge1xuICBzdG9yZS5kaXNwYXRjaChjbGVhckNoYXQoKSk7XG5cbiAgc3RvcmUuZGlzcGF0Y2gocmVzZXRVbnJlYWRDb3VudChcItCY0LLQsNC9XCIpKTtcbiAgc3RvcmUuZGlzcGF0Y2gocmVzZXRVbnJlYWRDb3VudChcItCc0LDRgNC40Y9cIikpO1xuXG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiaXZhblVucmVhZFwiLCBcIjBcIik7XG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwibWFyeWFVbnJlYWRcIiwgXCIwXCIpO1xuXG4gIGNvbnN0IG1lc3NhZ2VzUmVmID0gY29sbGVjdGlvbihmaXJlc3RvcmUsIFwibWVzc2FnZXNcIik7XG4gIGNvbnN0IHF1ZXJ5U25hcHNob3QgPSBhd2FpdCBnZXREb2NzKG1lc3NhZ2VzUmVmKTtcbiAgcXVlcnlTbmFwc2hvdC5mb3JFYWNoKChkb2MpID0+IHtcbiAgICBkZWxldGVEb2MoZG9jLnJlZik7XG4gIH0pO1xuICBjaGF0SW5wdXQudmFsdWUgPSBcIlwiO1xuICB1cGRhdGVVSSgpO1xufSk7XG5cbmNvbnN0IGluc2VydEVtb2ppID0gKGVtb2ppOiBzdHJpbmcpID0+IHtcbiAgY29uc3Qgc3RhcnQgPSBjaGF0SW5wdXQuc2VsZWN0aW9uU3RhcnQ7XG4gIGNvbnN0IGVuZCA9IGNoYXRJbnB1dC5zZWxlY3Rpb25FbmQ7XG4gIGNvbnN0IHRleHQgPSBjaGF0SW5wdXQudmFsdWU7XG4gIGNvbnN0IGJlZm9yZSA9IHRleHQuc3Vic3RyaW5nKDAsIHN0YXJ0KTtcbiAgY29uc3QgYWZ0ZXIgPSB0ZXh0LnN1YnN0cmluZyhlbmQsIHRleHQubGVuZ3RoKTtcbiAgY2hhdElucHV0LnZhbHVlID0gYmVmb3JlICsgZW1vamkgKyBhZnRlcjtcbiAgY2hhdElucHV0LnNlbGVjdGlvblN0YXJ0ID0gc3RhcnQgKyBlbW9qaS5sZW5ndGg7XG4gIGNoYXRJbnB1dC5zZWxlY3Rpb25FbmQgPSBzdGFydCArIGVtb2ppLmxlbmd0aDtcbiAgY2hhdElucHV0LmZvY3VzKCk7XG59O1xuXG5lbW9qaUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBjb25zdCBpc1BhbmVsVmlzaWJsZSA9IGVtb2ppUGFuZWwuc3R5bGUuZGlzcGxheSA9PT0gXCJibG9ja1wiO1xuICBlbW9qaVBhbmVsLnN0eWxlLmRpc3BsYXkgPSBpc1BhbmVsVmlzaWJsZSA/IFwibm9uZVwiIDogXCJibG9ja1wiO1xuICBjbGVhckNoYXRCdXR0b24uc3R5bGUuZGlzcGxheSA9IGlzUGFuZWxWaXNpYmxlID8gXCJibG9ja1wiIDogXCJub25lXCI7XG59KTtcblxuZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5lbW9qaVwiKS5mb3JFYWNoKChlbW9qaUVsZW1lbnQpID0+IHtcbiAgZW1vamlFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgIGNvbnN0IGVtb2ppID0gKGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50KS50ZXh0Q29udGVudDtcbiAgICBpZiAoZW1vamkpIHtcbiAgICAgIGluc2VydEVtb2ppKGVtb2ppKTtcbiAgICAgIGVtb2ppUGFuZWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgY2xlYXJDaGF0QnV0dG9uLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgfVxuICB9KTtcbn0pO1xuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBhc3luYyAoKSA9PiB7XG4gIGNvbnN0IHNhdmVkU2VuZGVyID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJjdXJyZW50U2VuZGVyXCIpO1xuICBpZiAoc2F2ZWRTZW5kZXIpIHtcbiAgICBoYW5kbGVVc2VyU2VsZWN0aW9uKFxuICAgICAgc2F2ZWRTZW5kZXIsXG4gICAgICBzYXZlZFNlbmRlciA9PT0gXCLQmNCy0LDQvVwiID8gaXZhblNlbGVjdG9yQnV0dG9uIDogbWFyeWFTZWxlY3RvckJ1dHRvbixcbiAgICAgIHNhdmVkU2VuZGVyID09PSBcItCY0LLQsNC9XCIgPyBtYXJ5YVNlbGVjdG9yQnV0dG9uIDogaXZhblNlbGVjdG9yQnV0dG9uLFxuICAgICk7XG4gIH1cblxuICBpZiAoZW1vamlQYW5lbCkge1xuICAgIGVtb2ppUGFuZWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICB9XG5cbiAgYXdhaXQgZmV0Y2hNZXNzYWdlcyhzdG9yZS5kaXNwYXRjaCk7XG5cbiAgc3RvcmUuc3Vic2NyaWJlKHVwZGF0ZVVJKTtcbiAgdXBkYXRlVUkoKTtcbn0pO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qIGVzbGludC1lbnYgYnJvd3NlciAqL1xuLypcbiAgZXNsaW50LWRpc2FibGVcbiAgbm8tY29uc29sZSxcbiAgZnVuYy1uYW1lc1xuKi9cblxuLyoqIEB0eXBlZGVmIHthbnl9IFRPRE8gKi9cblxudmFyIG5vcm1hbGl6ZVVybCA9IHJlcXVpcmUoXCIuL25vcm1hbGl6ZS11cmxcIik7XG52YXIgc3JjQnlNb2R1bGVJZCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG52YXIgbm9Eb2N1bWVudCA9IHR5cGVvZiBkb2N1bWVudCA9PT0gXCJ1bmRlZmluZWRcIjtcbnZhciBmb3JFYWNoID0gQXJyYXkucHJvdG90eXBlLmZvckVhY2g7XG5cbi8qKlxuICogQHBhcmFtIHtmdW5jdGlvbn0gZm5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0aW1lXG4gKiBAcmV0dXJucyB7KGZ1bmN0aW9uKCk6IHZvaWQpfCp9XG4gKi9cbmZ1bmN0aW9uIGRlYm91bmNlKGZuLCB0aW1lKSB7XG4gIHZhciB0aW1lb3V0ID0gMDtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItcmVzdC1wYXJhbXNcbiAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgICB2YXIgZnVuY3Rpb25DYWxsID0gZnVuY3Rpb24gZnVuY3Rpb25DYWxsKCkge1xuICAgICAgcmV0dXJuIGZuLmFwcGx5KHNlbGYsIGFyZ3MpO1xuICAgIH07XG4gICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuXG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uQ2FsbCwgdGltZSk7XG4gIH07XG59XG5mdW5jdGlvbiBub29wKCkge31cblxuLyoqXG4gKiBAcGFyYW0ge1RPRE99IG1vZHVsZUlkXG4gKiBAcmV0dXJucyB7VE9ET31cbiAqL1xuZnVuY3Rpb24gZ2V0Q3VycmVudFNjcmlwdFVybChtb2R1bGVJZCkge1xuICB2YXIgc3JjID0gc3JjQnlNb2R1bGVJZFttb2R1bGVJZF07XG4gIGlmICghc3JjKSB7XG4gICAgaWYgKGRvY3VtZW50LmN1cnJlbnRTY3JpcHQpIHtcbiAgICAgIHNyYyA9IC8qKiBAdHlwZSB7SFRNTFNjcmlwdEVsZW1lbnR9ICovZG9jdW1lbnQuY3VycmVudFNjcmlwdC5zcmM7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBzY3JpcHRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzY3JpcHRcIik7XG4gICAgICB2YXIgbGFzdFNjcmlwdFRhZyA9IHNjcmlwdHNbc2NyaXB0cy5sZW5ndGggLSAxXTtcbiAgICAgIGlmIChsYXN0U2NyaXB0VGFnKSB7XG4gICAgICAgIHNyYyA9IGxhc3RTY3JpcHRUYWcuc3JjO1xuICAgICAgfVxuICAgIH1cbiAgICBzcmNCeU1vZHVsZUlkW21vZHVsZUlkXSA9IHNyYztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZmlsZU1hcFxuICAgKiBAcmV0dXJucyB7bnVsbCB8IHN0cmluZ1tdfVxuICAgKi9cbiAgcmV0dXJuIGZ1bmN0aW9uIChmaWxlTWFwKSB7XG4gICAgaWYgKCFzcmMpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICB2YXIgc3BsaXRSZXN1bHQgPSBzcmMuc3BsaXQoLyhbXlxcXFwvXSspXFwuanMkLyk7XG4gICAgdmFyIGZpbGVuYW1lID0gc3BsaXRSZXN1bHQgJiYgc3BsaXRSZXN1bHRbMV07XG4gICAgaWYgKCFmaWxlbmFtZSkge1xuICAgICAgcmV0dXJuIFtzcmMucmVwbGFjZShcIi5qc1wiLCBcIi5jc3NcIildO1xuICAgIH1cbiAgICBpZiAoIWZpbGVNYXApIHtcbiAgICAgIHJldHVybiBbc3JjLnJlcGxhY2UoXCIuanNcIiwgXCIuY3NzXCIpXTtcbiAgICB9XG4gICAgcmV0dXJuIGZpbGVNYXAuc3BsaXQoXCIsXCIpLm1hcChmdW5jdGlvbiAobWFwUnVsZSkge1xuICAgICAgdmFyIHJlZyA9IG5ldyBSZWdFeHAoXCJcIi5jb25jYXQoZmlsZW5hbWUsIFwiXFxcXC5qcyRcIiksIFwiZ1wiKTtcbiAgICAgIHJldHVybiBub3JtYWxpemVVcmwoc3JjLnJlcGxhY2UocmVnLCBcIlwiLmNvbmNhdChtYXBSdWxlLnJlcGxhY2UoL3tmaWxlTmFtZX0vZywgZmlsZW5hbWUpLCBcIi5jc3NcIikpKTtcbiAgICB9KTtcbiAgfTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge1RPRE99IGVsXG4gKiBAcGFyYW0ge3N0cmluZ30gW3VybF1cbiAqL1xuZnVuY3Rpb24gdXBkYXRlQ3NzKGVsLCB1cmwpIHtcbiAgaWYgKCF1cmwpIHtcbiAgICBpZiAoIWVsLmhyZWYpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgICB1cmwgPSBlbC5ocmVmLnNwbGl0KFwiP1wiKVswXTtcbiAgfVxuICBpZiAoIWlzVXJsUmVxdWVzdCggLyoqIEB0eXBlIHtzdHJpbmd9ICovdXJsKSkge1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAoZWwuaXNMb2FkZWQgPT09IGZhbHNlKSB7XG4gICAgLy8gV2Ugc2VlbSB0byBiZSBhYm91dCB0byByZXBsYWNlIGEgY3NzIGxpbmsgdGhhdCBoYXNuJ3QgbG9hZGVkIHlldC5cbiAgICAvLyBXZSdyZSBwcm9iYWJseSBjaGFuZ2luZyB0aGUgc2FtZSBmaWxlIG1vcmUgdGhhbiBvbmNlLlxuICAgIHJldHVybjtcbiAgfVxuICBpZiAoIXVybCB8fCAhKHVybC5pbmRleE9mKFwiLmNzc1wiKSA+IC0xKSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICBlbC52aXNpdGVkID0gdHJ1ZTtcbiAgdmFyIG5ld0VsID0gZWwuY2xvbmVOb2RlKCk7XG4gIG5ld0VsLmlzTG9hZGVkID0gZmFsc2U7XG4gIG5ld0VsLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGZ1bmN0aW9uICgpIHtcbiAgICBpZiAobmV3RWwuaXNMb2FkZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbmV3RWwuaXNMb2FkZWQgPSB0cnVlO1xuICAgIGVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWwpO1xuICB9KTtcbiAgbmV3RWwuYWRkRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsIGZ1bmN0aW9uICgpIHtcbiAgICBpZiAobmV3RWwuaXNMb2FkZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbmV3RWwuaXNMb2FkZWQgPSB0cnVlO1xuICAgIGVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWwpO1xuICB9KTtcbiAgbmV3RWwuaHJlZiA9IFwiXCIuY29uY2F0KHVybCwgXCI/XCIpLmNvbmNhdChEYXRlLm5vdygpKTtcbiAgaWYgKGVsLm5leHRTaWJsaW5nKSB7XG4gICAgZWwucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUobmV3RWwsIGVsLm5leHRTaWJsaW5nKTtcbiAgfSBlbHNlIHtcbiAgICBlbC5wYXJlbnROb2RlLmFwcGVuZENoaWxkKG5ld0VsKTtcbiAgfVxufVxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBocmVmXG4gKiBAcGFyYW0ge1RPRE99IHNyY1xuICogQHJldHVybnMge1RPRE99XG4gKi9cbmZ1bmN0aW9uIGdldFJlbG9hZFVybChocmVmLCBzcmMpIHtcbiAgdmFyIHJldDtcblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgaHJlZiA9IG5vcm1hbGl6ZVVybChocmVmKTtcbiAgc3JjLnNvbWUoXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsXG4gICAqL1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgYXJyYXktY2FsbGJhY2stcmV0dXJuXG4gIGZ1bmN0aW9uICh1cmwpIHtcbiAgICBpZiAoaHJlZi5pbmRleE9mKHNyYykgPiAtMSkge1xuICAgICAgcmV0ID0gdXJsO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiByZXQ7XG59XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IFtzcmNdXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gcmVsb2FkU3R5bGUoc3JjKSB7XG4gIGlmICghc3JjKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHZhciBlbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJsaW5rXCIpO1xuICB2YXIgbG9hZGVkID0gZmFsc2U7XG4gIGZvckVhY2guY2FsbChlbGVtZW50cywgZnVuY3Rpb24gKGVsKSB7XG4gICAgaWYgKCFlbC5ocmVmKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciB1cmwgPSBnZXRSZWxvYWRVcmwoZWwuaHJlZiwgc3JjKTtcbiAgICBpZiAoIWlzVXJsUmVxdWVzdCh1cmwpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChlbC52aXNpdGVkID09PSB0cnVlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh1cmwpIHtcbiAgICAgIHVwZGF0ZUNzcyhlbCwgdXJsKTtcbiAgICAgIGxvYWRlZCA9IHRydWU7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIGxvYWRlZDtcbn1cbmZ1bmN0aW9uIHJlbG9hZEFsbCgpIHtcbiAgdmFyIGVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcImxpbmtcIik7XG4gIGZvckVhY2guY2FsbChlbGVtZW50cywgZnVuY3Rpb24gKGVsKSB7XG4gICAgaWYgKGVsLnZpc2l0ZWQgPT09IHRydWUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdXBkYXRlQ3NzKGVsKTtcbiAgfSk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICogQHJldHVybnMge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzVXJsUmVxdWVzdCh1cmwpIHtcbiAgLy8gQW4gVVJMIGlzIG5vdCBhbiByZXF1ZXN0IGlmXG5cbiAgLy8gSXQgaXMgbm90IGh0dHAgb3IgaHR0cHNcbiAgaWYgKCEvXlthLXpBLVpdW2EtekEtWlxcZCtcXC0uXSo6Ly50ZXN0KHVybCkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5cbi8qKlxuICogQHBhcmFtIHtUT0RPfSBtb2R1bGVJZFxuICogQHBhcmFtIHtUT0RPfSBvcHRpb25zXG4gKiBAcmV0dXJucyB7VE9ET31cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAobW9kdWxlSWQsIG9wdGlvbnMpIHtcbiAgaWYgKG5vRG9jdW1lbnQpIHtcbiAgICBjb25zb2xlLmxvZyhcIm5vIHdpbmRvdy5kb2N1bWVudCBmb3VuZCwgd2lsbCBub3QgSE1SIENTU1wiKTtcbiAgICByZXR1cm4gbm9vcDtcbiAgfVxuICB2YXIgZ2V0U2NyaXB0U3JjID0gZ2V0Q3VycmVudFNjcmlwdFVybChtb2R1bGVJZCk7XG4gIGZ1bmN0aW9uIHVwZGF0ZSgpIHtcbiAgICB2YXIgc3JjID0gZ2V0U2NyaXB0U3JjKG9wdGlvbnMuZmlsZW5hbWUpO1xuICAgIHZhciByZWxvYWRlZCA9IHJlbG9hZFN0eWxlKHNyYyk7XG4gICAgaWYgKG9wdGlvbnMubG9jYWxzKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIltITVJdIERldGVjdGVkIGxvY2FsIGNzcyBtb2R1bGVzLiBSZWxvYWQgYWxsIGNzc1wiKTtcbiAgICAgIHJlbG9hZEFsbCgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAocmVsb2FkZWQpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiW0hNUl0gY3NzIHJlbG9hZCAlc1wiLCBzcmMuam9pbihcIiBcIikpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmxvZyhcIltITVJdIFJlbG9hZCBhbGwgY3NzXCIpO1xuICAgICAgcmVsb2FkQWxsKCk7XG4gICAgfVxuICB9XG4gIHJldHVybiBkZWJvdW5jZSh1cGRhdGUsIDUwKTtcbn07IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qIGVzbGludC1kaXNhYmxlICovXG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmdbXX0gcGF0aENvbXBvbmVudHNcbiAqIEByZXR1cm5zIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIG5vcm1hbGl6ZVVybChwYXRoQ29tcG9uZW50cykge1xuICByZXR1cm4gcGF0aENvbXBvbmVudHMucmVkdWNlKGZ1bmN0aW9uIChhY2N1bXVsYXRvciwgaXRlbSkge1xuICAgIHN3aXRjaCAoaXRlbSkge1xuICAgICAgY2FzZSBcIi4uXCI6XG4gICAgICAgIGFjY3VtdWxhdG9yLnBvcCgpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCIuXCI6XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYWNjdW11bGF0b3IucHVzaChpdGVtKTtcbiAgICB9XG4gICAgcmV0dXJuIGFjY3VtdWxhdG9yO1xuICB9LCAvKiogQHR5cGUge3N0cmluZ1tdfSAqL1tdKS5qb2luKFwiL1wiKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsU3RyaW5nXG4gKiBAcmV0dXJucyB7c3RyaW5nfVxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICh1cmxTdHJpbmcpIHtcbiAgdXJsU3RyaW5nID0gdXJsU3RyaW5nLnRyaW0oKTtcbiAgaWYgKC9eZGF0YTovaS50ZXN0KHVybFN0cmluZykpIHtcbiAgICByZXR1cm4gdXJsU3RyaW5nO1xuICB9XG4gIHZhciBwcm90b2NvbCA9IHVybFN0cmluZy5pbmRleE9mKFwiLy9cIikgIT09IC0xID8gdXJsU3RyaW5nLnNwbGl0KFwiLy9cIilbMF0gKyBcIi8vXCIgOiBcIlwiO1xuICB2YXIgY29tcG9uZW50cyA9IHVybFN0cmluZy5yZXBsYWNlKG5ldyBSZWdFeHAocHJvdG9jb2wsIFwiaVwiKSwgXCJcIikuc3BsaXQoXCIvXCIpO1xuICB2YXIgaG9zdCA9IGNvbXBvbmVudHNbMF0udG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9cXC4kLywgXCJcIik7XG4gIGNvbXBvbmVudHNbMF0gPSBcIlwiO1xuICB2YXIgcGF0aCA9IG5vcm1hbGl6ZVVybChjb21wb25lbnRzKTtcbiAgcmV0dXJuIHByb3RvY29sICsgaG9zdCArIHBhdGg7XG59OyIsIi8vIGV4dHJhY3RlZCBieSBtaW5pLWNzcy1leHRyYWN0LXBsdWdpblxuZXhwb3J0IHt9O1xuICAgIGlmKG1vZHVsZS5ob3QpIHtcbiAgICAgIC8vIDE3MDE2NDk2ODcwNzdcbiAgICAgIHZhciBjc3NSZWxvYWQgPSByZXF1aXJlKFwiLi4vbm9kZV9tb2R1bGVzL21pbmktY3NzLWV4dHJhY3QtcGx1Z2luL2Rpc3QvaG1yL2hvdE1vZHVsZVJlcGxhY2VtZW50LmpzXCIpKG1vZHVsZS5pZCwge1wibG9jYWxzXCI6ZmFsc2V9KTtcbiAgICAgIG1vZHVsZS5ob3QuZGlzcG9zZShjc3NSZWxvYWQpO1xuICAgICAgbW9kdWxlLmhvdC5hY2NlcHQodW5kZWZpbmVkLCBjc3NSZWxvYWQpO1xuICAgIH1cbiAgIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdGlmIChjYWNoZWRNb2R1bGUuZXJyb3IgIT09IHVuZGVmaW5lZCkgdGhyb3cgY2FjaGVkTW9kdWxlLmVycm9yO1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHRpZDogbW9kdWxlSWQsXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHR0cnkge1xuXHRcdHZhciBleGVjT3B0aW9ucyA9IHsgaWQ6IG1vZHVsZUlkLCBtb2R1bGU6IG1vZHVsZSwgZmFjdG9yeTogX193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0sIHJlcXVpcmU6IF9fd2VicGFja19yZXF1aXJlX18gfTtcblx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmkuZm9yRWFjaChmdW5jdGlvbihoYW5kbGVyKSB7IGhhbmRsZXIoZXhlY09wdGlvbnMpOyB9KTtcblx0XHRtb2R1bGUgPSBleGVjT3B0aW9ucy5tb2R1bGU7XG5cdFx0ZXhlY09wdGlvbnMuZmFjdG9yeS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBleGVjT3B0aW9ucy5yZXF1aXJlKTtcblx0fSBjYXRjaChlKSB7XG5cdFx0bW9kdWxlLmVycm9yID0gZTtcblx0XHR0aHJvdyBlO1xuXHR9XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4vLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuX193ZWJwYWNrX3JlcXVpcmVfXy5tID0gX193ZWJwYWNrX21vZHVsZXNfXztcblxuLy8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbl9fd2VicGFja19yZXF1aXJlX18uYyA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfXztcblxuLy8gZXhwb3NlIHRoZSBtb2R1bGUgZXhlY3V0aW9uIGludGVyY2VwdG9yXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmkgPSBbXTtcblxuIiwiLy8gVGhpcyBmdW5jdGlvbiBhbGxvdyB0byByZWZlcmVuY2UgYWxsIGNodW5rc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5odSA9IChjaHVua0lkKSA9PiB7XG5cdC8vIHJldHVybiB1cmwgZm9yIGZpbGVuYW1lcyBiYXNlZCBvbiB0ZW1wbGF0ZVxuXHRyZXR1cm4gXCJcIiArIGNodW5rSWQgKyBcIi5cIiArIF9fd2VicGFja19yZXF1aXJlX18uaCgpICsgXCIuaG90LXVwZGF0ZS5qc1wiO1xufTsiLCIvLyBUaGlzIGZ1bmN0aW9uIGFsbG93IHRvIHJlZmVyZW5jZSBhc3luYyBjaHVua3Ncbl9fd2VicGFja19yZXF1aXJlX18ubWluaUNzc0YgPSAoY2h1bmtJZCkgPT4ge1xuXHQvLyByZXR1cm4gdXJsIGZvciBmaWxlbmFtZXMgYmFzZWQgb24gdGVtcGxhdGVcblx0cmV0dXJuIHVuZGVmaW5lZDtcbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5obXJGID0gKCkgPT4gKFwibWFpbi5cIiArIF9fd2VicGFja19yZXF1aXJlX18uaCgpICsgXCIuaG90LXVwZGF0ZS5qc29uXCIpOyIsIl9fd2VicGFja19yZXF1aXJlX18uaCA9ICgpID0+IChcImRlZmVmNDk5NjdlOWYzMmZiODA5XCIpIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5nID0gKGZ1bmN0aW9uKCkge1xuXHRpZiAodHlwZW9mIGdsb2JhbFRoaXMgPT09ICdvYmplY3QnKSByZXR1cm4gZ2xvYmFsVGhpcztcblx0dHJ5IHtcblx0XHRyZXR1cm4gdGhpcyB8fCBuZXcgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JykgcmV0dXJuIHdpbmRvdztcblx0fVxufSkoKTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwidmFyIGN1cnJlbnRNb2R1bGVEYXRhID0ge307XG52YXIgaW5zdGFsbGVkTW9kdWxlcyA9IF9fd2VicGFja19yZXF1aXJlX18uYztcblxuLy8gbW9kdWxlIGFuZCByZXF1aXJlIGNyZWF0aW9uXG52YXIgY3VycmVudENoaWxkTW9kdWxlO1xudmFyIGN1cnJlbnRQYXJlbnRzID0gW107XG5cbi8vIHN0YXR1c1xudmFyIHJlZ2lzdGVyZWRTdGF0dXNIYW5kbGVycyA9IFtdO1xudmFyIGN1cnJlbnRTdGF0dXMgPSBcImlkbGVcIjtcblxuLy8gd2hpbGUgZG93bmxvYWRpbmdcbnZhciBibG9ja2luZ1Byb21pc2VzID0gMDtcbnZhciBibG9ja2luZ1Byb21pc2VzV2FpdGluZyA9IFtdO1xuXG4vLyBUaGUgdXBkYXRlIGluZm9cbnZhciBjdXJyZW50VXBkYXRlQXBwbHlIYW5kbGVycztcbnZhciBxdWV1ZWRJbnZhbGlkYXRlZE1vZHVsZXM7XG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5obXJEID0gY3VycmVudE1vZHVsZURhdGE7XG5cbl9fd2VicGFja19yZXF1aXJlX18uaS5wdXNoKGZ1bmN0aW9uIChvcHRpb25zKSB7XG5cdHZhciBtb2R1bGUgPSBvcHRpb25zLm1vZHVsZTtcblx0dmFyIHJlcXVpcmUgPSBjcmVhdGVSZXF1aXJlKG9wdGlvbnMucmVxdWlyZSwgb3B0aW9ucy5pZCk7XG5cdG1vZHVsZS5ob3QgPSBjcmVhdGVNb2R1bGVIb3RPYmplY3Qob3B0aW9ucy5pZCwgbW9kdWxlKTtcblx0bW9kdWxlLnBhcmVudHMgPSBjdXJyZW50UGFyZW50cztcblx0bW9kdWxlLmNoaWxkcmVuID0gW107XG5cdGN1cnJlbnRQYXJlbnRzID0gW107XG5cdG9wdGlvbnMucmVxdWlyZSA9IHJlcXVpcmU7XG59KTtcblxuX193ZWJwYWNrX3JlcXVpcmVfXy5obXJDID0ge307XG5fX3dlYnBhY2tfcmVxdWlyZV9fLmhtckkgPSB7fTtcblxuZnVuY3Rpb24gY3JlYXRlUmVxdWlyZShyZXF1aXJlLCBtb2R1bGVJZCkge1xuXHR2YXIgbWUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXTtcblx0aWYgKCFtZSkgcmV0dXJuIHJlcXVpcmU7XG5cdHZhciBmbiA9IGZ1bmN0aW9uIChyZXF1ZXN0KSB7XG5cdFx0aWYgKG1lLmhvdC5hY3RpdmUpIHtcblx0XHRcdGlmIChpbnN0YWxsZWRNb2R1bGVzW3JlcXVlc3RdKSB7XG5cdFx0XHRcdHZhciBwYXJlbnRzID0gaW5zdGFsbGVkTW9kdWxlc1tyZXF1ZXN0XS5wYXJlbnRzO1xuXHRcdFx0XHRpZiAocGFyZW50cy5pbmRleE9mKG1vZHVsZUlkKSA9PT0gLTEpIHtcblx0XHRcdFx0XHRwYXJlbnRzLnB1c2gobW9kdWxlSWQpO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjdXJyZW50UGFyZW50cyA9IFttb2R1bGVJZF07XG5cdFx0XHRcdGN1cnJlbnRDaGlsZE1vZHVsZSA9IHJlcXVlc3Q7XG5cdFx0XHR9XG5cdFx0XHRpZiAobWUuY2hpbGRyZW4uaW5kZXhPZihyZXF1ZXN0KSA9PT0gLTEpIHtcblx0XHRcdFx0bWUuY2hpbGRyZW4ucHVzaChyZXF1ZXN0KTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0Y29uc29sZS53YXJuKFxuXHRcdFx0XHRcIltITVJdIHVuZXhwZWN0ZWQgcmVxdWlyZShcIiArXG5cdFx0XHRcdFx0cmVxdWVzdCArXG5cdFx0XHRcdFx0XCIpIGZyb20gZGlzcG9zZWQgbW9kdWxlIFwiICtcblx0XHRcdFx0XHRtb2R1bGVJZFxuXHRcdFx0KTtcblx0XHRcdGN1cnJlbnRQYXJlbnRzID0gW107XG5cdFx0fVxuXHRcdHJldHVybiByZXF1aXJlKHJlcXVlc3QpO1xuXHR9O1xuXHR2YXIgY3JlYXRlUHJvcGVydHlEZXNjcmlwdG9yID0gZnVuY3Rpb24gKG5hbWUpIHtcblx0XHRyZXR1cm4ge1xuXHRcdFx0Y29uZmlndXJhYmxlOiB0cnVlLFxuXHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcblx0XHRcdGdldDogZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRyZXR1cm4gcmVxdWlyZVtuYW1lXTtcblx0XHRcdH0sXG5cdFx0XHRzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHRcdFx0XHRyZXF1aXJlW25hbWVdID0gdmFsdWU7XG5cdFx0XHR9XG5cdFx0fTtcblx0fTtcblx0Zm9yICh2YXIgbmFtZSBpbiByZXF1aXJlKSB7XG5cdFx0aWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChyZXF1aXJlLCBuYW1lKSAmJiBuYW1lICE9PSBcImVcIikge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGZuLCBuYW1lLCBjcmVhdGVQcm9wZXJ0eURlc2NyaXB0b3IobmFtZSkpO1xuXHRcdH1cblx0fVxuXHRmbi5lID0gZnVuY3Rpb24gKGNodW5rSWQpIHtcblx0XHRyZXR1cm4gdHJhY2tCbG9ja2luZ1Byb21pc2UocmVxdWlyZS5lKGNodW5rSWQpKTtcblx0fTtcblx0cmV0dXJuIGZuO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVNb2R1bGVIb3RPYmplY3QobW9kdWxlSWQsIG1lKSB7XG5cdHZhciBfbWFpbiA9IGN1cnJlbnRDaGlsZE1vZHVsZSAhPT0gbW9kdWxlSWQ7XG5cdHZhciBob3QgPSB7XG5cdFx0Ly8gcHJpdmF0ZSBzdHVmZlxuXHRcdF9hY2NlcHRlZERlcGVuZGVuY2llczoge30sXG5cdFx0X2FjY2VwdGVkRXJyb3JIYW5kbGVyczoge30sXG5cdFx0X2RlY2xpbmVkRGVwZW5kZW5jaWVzOiB7fSxcblx0XHRfc2VsZkFjY2VwdGVkOiBmYWxzZSxcblx0XHRfc2VsZkRlY2xpbmVkOiBmYWxzZSxcblx0XHRfc2VsZkludmFsaWRhdGVkOiBmYWxzZSxcblx0XHRfZGlzcG9zZUhhbmRsZXJzOiBbXSxcblx0XHRfbWFpbjogX21haW4sXG5cdFx0X3JlcXVpcmVTZWxmOiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRjdXJyZW50UGFyZW50cyA9IG1lLnBhcmVudHMuc2xpY2UoKTtcblx0XHRcdGN1cnJlbnRDaGlsZE1vZHVsZSA9IF9tYWluID8gdW5kZWZpbmVkIDogbW9kdWxlSWQ7XG5cdFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKTtcblx0XHR9LFxuXG5cdFx0Ly8gTW9kdWxlIEFQSVxuXHRcdGFjdGl2ZTogdHJ1ZSxcblx0XHRhY2NlcHQ6IGZ1bmN0aW9uIChkZXAsIGNhbGxiYWNrLCBlcnJvckhhbmRsZXIpIHtcblx0XHRcdGlmIChkZXAgPT09IHVuZGVmaW5lZCkgaG90Ll9zZWxmQWNjZXB0ZWQgPSB0cnVlO1xuXHRcdFx0ZWxzZSBpZiAodHlwZW9mIGRlcCA9PT0gXCJmdW5jdGlvblwiKSBob3QuX3NlbGZBY2NlcHRlZCA9IGRlcDtcblx0XHRcdGVsc2UgaWYgKHR5cGVvZiBkZXAgPT09IFwib2JqZWN0XCIgJiYgZGVwICE9PSBudWxsKSB7XG5cdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgZGVwLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdFx0aG90Ll9hY2NlcHRlZERlcGVuZGVuY2llc1tkZXBbaV1dID0gY2FsbGJhY2sgfHwgZnVuY3Rpb24gKCkge307XG5cdFx0XHRcdFx0aG90Ll9hY2NlcHRlZEVycm9ySGFuZGxlcnNbZGVwW2ldXSA9IGVycm9ySGFuZGxlcjtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aG90Ll9hY2NlcHRlZERlcGVuZGVuY2llc1tkZXBdID0gY2FsbGJhY2sgfHwgZnVuY3Rpb24gKCkge307XG5cdFx0XHRcdGhvdC5fYWNjZXB0ZWRFcnJvckhhbmRsZXJzW2RlcF0gPSBlcnJvckhhbmRsZXI7XG5cdFx0XHR9XG5cdFx0fSxcblx0XHRkZWNsaW5lOiBmdW5jdGlvbiAoZGVwKSB7XG5cdFx0XHRpZiAoZGVwID09PSB1bmRlZmluZWQpIGhvdC5fc2VsZkRlY2xpbmVkID0gdHJ1ZTtcblx0XHRcdGVsc2UgaWYgKHR5cGVvZiBkZXAgPT09IFwib2JqZWN0XCIgJiYgZGVwICE9PSBudWxsKVxuXHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGRlcC5sZW5ndGg7IGkrKylcblx0XHRcdFx0XHRob3QuX2RlY2xpbmVkRGVwZW5kZW5jaWVzW2RlcFtpXV0gPSB0cnVlO1xuXHRcdFx0ZWxzZSBob3QuX2RlY2xpbmVkRGVwZW5kZW5jaWVzW2RlcF0gPSB0cnVlO1xuXHRcdH0sXG5cdFx0ZGlzcG9zZTogZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG5cdFx0XHRob3QuX2Rpc3Bvc2VIYW5kbGVycy5wdXNoKGNhbGxiYWNrKTtcblx0XHR9LFxuXHRcdGFkZERpc3Bvc2VIYW5kbGVyOiBmdW5jdGlvbiAoY2FsbGJhY2spIHtcblx0XHRcdGhvdC5fZGlzcG9zZUhhbmRsZXJzLnB1c2goY2FsbGJhY2spO1xuXHRcdH0sXG5cdFx0cmVtb3ZlRGlzcG9zZUhhbmRsZXI6IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuXHRcdFx0dmFyIGlkeCA9IGhvdC5fZGlzcG9zZUhhbmRsZXJzLmluZGV4T2YoY2FsbGJhY2spO1xuXHRcdFx0aWYgKGlkeCA+PSAwKSBob3QuX2Rpc3Bvc2VIYW5kbGVycy5zcGxpY2UoaWR4LCAxKTtcblx0XHR9LFxuXHRcdGludmFsaWRhdGU6IGZ1bmN0aW9uICgpIHtcblx0XHRcdHRoaXMuX3NlbGZJbnZhbGlkYXRlZCA9IHRydWU7XG5cdFx0XHRzd2l0Y2ggKGN1cnJlbnRTdGF0dXMpIHtcblx0XHRcdFx0Y2FzZSBcImlkbGVcIjpcblx0XHRcdFx0XHRjdXJyZW50VXBkYXRlQXBwbHlIYW5kbGVycyA9IFtdO1xuXHRcdFx0XHRcdE9iamVjdC5rZXlzKF9fd2VicGFja19yZXF1aXJlX18uaG1ySSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG5cdFx0XHRcdFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmhtcklba2V5XShcblx0XHRcdFx0XHRcdFx0bW9kdWxlSWQsXG5cdFx0XHRcdFx0XHRcdGN1cnJlbnRVcGRhdGVBcHBseUhhbmRsZXJzXG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdHNldFN0YXR1cyhcInJlYWR5XCIpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIFwicmVhZHlcIjpcblx0XHRcdFx0XHRPYmplY3Qua2V5cyhfX3dlYnBhY2tfcmVxdWlyZV9fLmhtckkpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuXHRcdFx0XHRcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5obXJJW2tleV0oXG5cdFx0XHRcdFx0XHRcdG1vZHVsZUlkLFxuXHRcdFx0XHRcdFx0XHRjdXJyZW50VXBkYXRlQXBwbHlIYW5kbGVyc1xuXHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBcInByZXBhcmVcIjpcblx0XHRcdFx0Y2FzZSBcImNoZWNrXCI6XG5cdFx0XHRcdGNhc2UgXCJkaXNwb3NlXCI6XG5cdFx0XHRcdGNhc2UgXCJhcHBseVwiOlxuXHRcdFx0XHRcdChxdWV1ZWRJbnZhbGlkYXRlZE1vZHVsZXMgPSBxdWV1ZWRJbnZhbGlkYXRlZE1vZHVsZXMgfHwgW10pLnB1c2goXG5cdFx0XHRcdFx0XHRtb2R1bGVJZFxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0Ly8gaWdub3JlIHJlcXVlc3RzIGluIGVycm9yIHN0YXRlc1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdH0sXG5cblx0XHQvLyBNYW5hZ2VtZW50IEFQSVxuXHRcdGNoZWNrOiBob3RDaGVjayxcblx0XHRhcHBseTogaG90QXBwbHksXG5cdFx0c3RhdHVzOiBmdW5jdGlvbiAobCkge1xuXHRcdFx0aWYgKCFsKSByZXR1cm4gY3VycmVudFN0YXR1cztcblx0XHRcdHJlZ2lzdGVyZWRTdGF0dXNIYW5kbGVycy5wdXNoKGwpO1xuXHRcdH0sXG5cdFx0YWRkU3RhdHVzSGFuZGxlcjogZnVuY3Rpb24gKGwpIHtcblx0XHRcdHJlZ2lzdGVyZWRTdGF0dXNIYW5kbGVycy5wdXNoKGwpO1xuXHRcdH0sXG5cdFx0cmVtb3ZlU3RhdHVzSGFuZGxlcjogZnVuY3Rpb24gKGwpIHtcblx0XHRcdHZhciBpZHggPSByZWdpc3RlcmVkU3RhdHVzSGFuZGxlcnMuaW5kZXhPZihsKTtcblx0XHRcdGlmIChpZHggPj0gMCkgcmVnaXN0ZXJlZFN0YXR1c0hhbmRsZXJzLnNwbGljZShpZHgsIDEpO1xuXHRcdH0sXG5cblx0XHQvL2luaGVyaXQgZnJvbSBwcmV2aW91cyBkaXNwb3NlIGNhbGxcblx0XHRkYXRhOiBjdXJyZW50TW9kdWxlRGF0YVttb2R1bGVJZF1cblx0fTtcblx0Y3VycmVudENoaWxkTW9kdWxlID0gdW5kZWZpbmVkO1xuXHRyZXR1cm4gaG90O1xufVxuXG5mdW5jdGlvbiBzZXRTdGF0dXMobmV3U3RhdHVzKSB7XG5cdGN1cnJlbnRTdGF0dXMgPSBuZXdTdGF0dXM7XG5cdHZhciByZXN1bHRzID0gW107XG5cblx0Zm9yICh2YXIgaSA9IDA7IGkgPCByZWdpc3RlcmVkU3RhdHVzSGFuZGxlcnMubGVuZ3RoOyBpKyspXG5cdFx0cmVzdWx0c1tpXSA9IHJlZ2lzdGVyZWRTdGF0dXNIYW5kbGVyc1tpXS5jYWxsKG51bGwsIG5ld1N0YXR1cyk7XG5cblx0cmV0dXJuIFByb21pc2UuYWxsKHJlc3VsdHMpO1xufVxuXG5mdW5jdGlvbiB1bmJsb2NrKCkge1xuXHRpZiAoLS1ibG9ja2luZ1Byb21pc2VzID09PSAwKSB7XG5cdFx0c2V0U3RhdHVzKFwicmVhZHlcIikudGhlbihmdW5jdGlvbiAoKSB7XG5cdFx0XHRpZiAoYmxvY2tpbmdQcm9taXNlcyA9PT0gMCkge1xuXHRcdFx0XHR2YXIgbGlzdCA9IGJsb2NraW5nUHJvbWlzZXNXYWl0aW5nO1xuXHRcdFx0XHRibG9ja2luZ1Byb21pc2VzV2FpdGluZyA9IFtdO1xuXHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHRsaXN0W2ldKCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblx0fVxufVxuXG5mdW5jdGlvbiB0cmFja0Jsb2NraW5nUHJvbWlzZShwcm9taXNlKSB7XG5cdHN3aXRjaCAoY3VycmVudFN0YXR1cykge1xuXHRcdGNhc2UgXCJyZWFkeVwiOlxuXHRcdFx0c2V0U3RhdHVzKFwicHJlcGFyZVwiKTtcblx0XHQvKiBmYWxsdGhyb3VnaCAqL1xuXHRcdGNhc2UgXCJwcmVwYXJlXCI6XG5cdFx0XHRibG9ja2luZ1Byb21pc2VzKys7XG5cdFx0XHRwcm9taXNlLnRoZW4odW5ibG9jaywgdW5ibG9jayk7XG5cdFx0XHRyZXR1cm4gcHJvbWlzZTtcblx0XHRkZWZhdWx0OlxuXHRcdFx0cmV0dXJuIHByb21pc2U7XG5cdH1cbn1cblxuZnVuY3Rpb24gd2FpdEZvckJsb2NraW5nUHJvbWlzZXMoZm4pIHtcblx0aWYgKGJsb2NraW5nUHJvbWlzZXMgPT09IDApIHJldHVybiBmbigpO1xuXHRyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcblx0XHRibG9ja2luZ1Byb21pc2VzV2FpdGluZy5wdXNoKGZ1bmN0aW9uICgpIHtcblx0XHRcdHJlc29sdmUoZm4oKSk7XG5cdFx0fSk7XG5cdH0pO1xufVxuXG5mdW5jdGlvbiBob3RDaGVjayhhcHBseU9uVXBkYXRlKSB7XG5cdGlmIChjdXJyZW50U3RhdHVzICE9PSBcImlkbGVcIikge1xuXHRcdHRocm93IG5ldyBFcnJvcihcImNoZWNrKCkgaXMgb25seSBhbGxvd2VkIGluIGlkbGUgc3RhdHVzXCIpO1xuXHR9XG5cdHJldHVybiBzZXRTdGF0dXMoXCJjaGVja1wiKVxuXHRcdC50aGVuKF9fd2VicGFja19yZXF1aXJlX18uaG1yTSlcblx0XHQudGhlbihmdW5jdGlvbiAodXBkYXRlKSB7XG5cdFx0XHRpZiAoIXVwZGF0ZSkge1xuXHRcdFx0XHRyZXR1cm4gc2V0U3RhdHVzKGFwcGx5SW52YWxpZGF0ZWRNb2R1bGVzKCkgPyBcInJlYWR5XCIgOiBcImlkbGVcIikudGhlbihcblx0XHRcdFx0XHRmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gbnVsbDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdCk7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBzZXRTdGF0dXMoXCJwcmVwYXJlXCIpLnRoZW4oZnVuY3Rpb24gKCkge1xuXHRcdFx0XHR2YXIgdXBkYXRlZE1vZHVsZXMgPSBbXTtcblx0XHRcdFx0Y3VycmVudFVwZGF0ZUFwcGx5SGFuZGxlcnMgPSBbXTtcblxuXHRcdFx0XHRyZXR1cm4gUHJvbWlzZS5hbGwoXG5cdFx0XHRcdFx0T2JqZWN0LmtleXMoX193ZWJwYWNrX3JlcXVpcmVfXy5obXJDKS5yZWR1Y2UoZnVuY3Rpb24gKFxuXHRcdFx0XHRcdFx0cHJvbWlzZXMsXG5cdFx0XHRcdFx0XHRrZXlcblx0XHRcdFx0XHQpIHtcblx0XHRcdFx0XHRcdF9fd2VicGFja19yZXF1aXJlX18uaG1yQ1trZXldKFxuXHRcdFx0XHRcdFx0XHR1cGRhdGUuYyxcblx0XHRcdFx0XHRcdFx0dXBkYXRlLnIsXG5cdFx0XHRcdFx0XHRcdHVwZGF0ZS5tLFxuXHRcdFx0XHRcdFx0XHRwcm9taXNlcyxcblx0XHRcdFx0XHRcdFx0Y3VycmVudFVwZGF0ZUFwcGx5SGFuZGxlcnMsXG5cdFx0XHRcdFx0XHRcdHVwZGF0ZWRNb2R1bGVzXG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0cmV0dXJuIHByb21pc2VzO1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0W10pXG5cdFx0XHRcdCkudGhlbihmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHdhaXRGb3JCbG9ja2luZ1Byb21pc2VzKGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdGlmIChhcHBseU9uVXBkYXRlKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBpbnRlcm5hbEFwcGx5KGFwcGx5T25VcGRhdGUpO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHNldFN0YXR1cyhcInJlYWR5XCIpLnRoZW4oZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybiB1cGRhdGVkTW9kdWxlcztcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG59XG5cbmZ1bmN0aW9uIGhvdEFwcGx5KG9wdGlvbnMpIHtcblx0aWYgKGN1cnJlbnRTdGF0dXMgIT09IFwicmVhZHlcIikge1xuXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUoKS50aGVuKGZ1bmN0aW9uICgpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcblx0XHRcdFx0XCJhcHBseSgpIGlzIG9ubHkgYWxsb3dlZCBpbiByZWFkeSBzdGF0dXMgKHN0YXRlOiBcIiArXG5cdFx0XHRcdFx0Y3VycmVudFN0YXR1cyArXG5cdFx0XHRcdFx0XCIpXCJcblx0XHRcdCk7XG5cdFx0fSk7XG5cdH1cblx0cmV0dXJuIGludGVybmFsQXBwbHkob3B0aW9ucyk7XG59XG5cbmZ1bmN0aW9uIGludGVybmFsQXBwbHkob3B0aW9ucykge1xuXHRvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuXHRhcHBseUludmFsaWRhdGVkTW9kdWxlcygpO1xuXG5cdHZhciByZXN1bHRzID0gY3VycmVudFVwZGF0ZUFwcGx5SGFuZGxlcnMubWFwKGZ1bmN0aW9uIChoYW5kbGVyKSB7XG5cdFx0cmV0dXJuIGhhbmRsZXIob3B0aW9ucyk7XG5cdH0pO1xuXHRjdXJyZW50VXBkYXRlQXBwbHlIYW5kbGVycyA9IHVuZGVmaW5lZDtcblxuXHR2YXIgZXJyb3JzID0gcmVzdWx0c1xuXHRcdC5tYXAoZnVuY3Rpb24gKHIpIHtcblx0XHRcdHJldHVybiByLmVycm9yO1xuXHRcdH0pXG5cdFx0LmZpbHRlcihCb29sZWFuKTtcblxuXHRpZiAoZXJyb3JzLmxlbmd0aCA+IDApIHtcblx0XHRyZXR1cm4gc2V0U3RhdHVzKFwiYWJvcnRcIikudGhlbihmdW5jdGlvbiAoKSB7XG5cdFx0XHR0aHJvdyBlcnJvcnNbMF07XG5cdFx0fSk7XG5cdH1cblxuXHQvLyBOb3cgaW4gXCJkaXNwb3NlXCIgcGhhc2Vcblx0dmFyIGRpc3Bvc2VQcm9taXNlID0gc2V0U3RhdHVzKFwiZGlzcG9zZVwiKTtcblxuXHRyZXN1bHRzLmZvckVhY2goZnVuY3Rpb24gKHJlc3VsdCkge1xuXHRcdGlmIChyZXN1bHQuZGlzcG9zZSkgcmVzdWx0LmRpc3Bvc2UoKTtcblx0fSk7XG5cblx0Ly8gTm93IGluIFwiYXBwbHlcIiBwaGFzZVxuXHR2YXIgYXBwbHlQcm9taXNlID0gc2V0U3RhdHVzKFwiYXBwbHlcIik7XG5cblx0dmFyIGVycm9yO1xuXHR2YXIgcmVwb3J0RXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG5cdFx0aWYgKCFlcnJvcikgZXJyb3IgPSBlcnI7XG5cdH07XG5cblx0dmFyIG91dGRhdGVkTW9kdWxlcyA9IFtdO1xuXHRyZXN1bHRzLmZvckVhY2goZnVuY3Rpb24gKHJlc3VsdCkge1xuXHRcdGlmIChyZXN1bHQuYXBwbHkpIHtcblx0XHRcdHZhciBtb2R1bGVzID0gcmVzdWx0LmFwcGx5KHJlcG9ydEVycm9yKTtcblx0XHRcdGlmIChtb2R1bGVzKSB7XG5cdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgbW9kdWxlcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdG91dGRhdGVkTW9kdWxlcy5wdXNoKG1vZHVsZXNbaV0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9KTtcblxuXHRyZXR1cm4gUHJvbWlzZS5hbGwoW2Rpc3Bvc2VQcm9taXNlLCBhcHBseVByb21pc2VdKS50aGVuKGZ1bmN0aW9uICgpIHtcblx0XHQvLyBoYW5kbGUgZXJyb3JzIGluIGFjY2VwdCBoYW5kbGVycyBhbmQgc2VsZiBhY2NlcHRlZCBtb2R1bGUgbG9hZFxuXHRcdGlmIChlcnJvcikge1xuXHRcdFx0cmV0dXJuIHNldFN0YXR1cyhcImZhaWxcIikudGhlbihmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdHRocm93IGVycm9yO1xuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0aWYgKHF1ZXVlZEludmFsaWRhdGVkTW9kdWxlcykge1xuXHRcdFx0cmV0dXJuIGludGVybmFsQXBwbHkob3B0aW9ucykudGhlbihmdW5jdGlvbiAobGlzdCkge1xuXHRcdFx0XHRvdXRkYXRlZE1vZHVsZXMuZm9yRWFjaChmdW5jdGlvbiAobW9kdWxlSWQpIHtcblx0XHRcdFx0XHRpZiAobGlzdC5pbmRleE9mKG1vZHVsZUlkKSA8IDApIGxpc3QucHVzaChtb2R1bGVJZCk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRyZXR1cm4gbGlzdDtcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdHJldHVybiBzZXRTdGF0dXMoXCJpZGxlXCIpLnRoZW4oZnVuY3Rpb24gKCkge1xuXHRcdFx0cmV0dXJuIG91dGRhdGVkTW9kdWxlcztcblx0XHR9KTtcblx0fSk7XG59XG5cbmZ1bmN0aW9uIGFwcGx5SW52YWxpZGF0ZWRNb2R1bGVzKCkge1xuXHRpZiAocXVldWVkSW52YWxpZGF0ZWRNb2R1bGVzKSB7XG5cdFx0aWYgKCFjdXJyZW50VXBkYXRlQXBwbHlIYW5kbGVycykgY3VycmVudFVwZGF0ZUFwcGx5SGFuZGxlcnMgPSBbXTtcblx0XHRPYmplY3Qua2V5cyhfX3dlYnBhY2tfcmVxdWlyZV9fLmhtckkpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuXHRcdFx0cXVldWVkSW52YWxpZGF0ZWRNb2R1bGVzLmZvckVhY2goZnVuY3Rpb24gKG1vZHVsZUlkKSB7XG5cdFx0XHRcdF9fd2VicGFja19yZXF1aXJlX18uaG1ySVtrZXldKFxuXHRcdFx0XHRcdG1vZHVsZUlkLFxuXHRcdFx0XHRcdGN1cnJlbnRVcGRhdGVBcHBseUhhbmRsZXJzXG5cdFx0XHRcdCk7XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0XHRxdWV1ZWRJbnZhbGlkYXRlZE1vZHVsZXMgPSB1bmRlZmluZWQ7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cbn0iLCJ2YXIgc2NyaXB0VXJsO1xuaWYgKF9fd2VicGFja19yZXF1aXJlX18uZy5pbXBvcnRTY3JpcHRzKSBzY3JpcHRVcmwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmcubG9jYXRpb24gKyBcIlwiO1xudmFyIGRvY3VtZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXy5nLmRvY3VtZW50O1xuaWYgKCFzY3JpcHRVcmwgJiYgZG9jdW1lbnQpIHtcblx0aWYgKGRvY3VtZW50LmN1cnJlbnRTY3JpcHQpXG5cdFx0c2NyaXB0VXJsID0gZG9jdW1lbnQuY3VycmVudFNjcmlwdC5zcmM7XG5cdGlmICghc2NyaXB0VXJsKSB7XG5cdFx0dmFyIHNjcmlwdHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNjcmlwdFwiKTtcblx0XHRpZihzY3JpcHRzLmxlbmd0aCkge1xuXHRcdFx0dmFyIGkgPSBzY3JpcHRzLmxlbmd0aCAtIDE7XG5cdFx0XHR3aGlsZSAoaSA+IC0xICYmICFzY3JpcHRVcmwpIHNjcmlwdFVybCA9IHNjcmlwdHNbaS0tXS5zcmM7XG5cdFx0fVxuXHR9XG59XG4vLyBXaGVuIHN1cHBvcnRpbmcgYnJvd3NlcnMgd2hlcmUgYW4gYXV0b21hdGljIHB1YmxpY1BhdGggaXMgbm90IHN1cHBvcnRlZCB5b3UgbXVzdCBzcGVjaWZ5IGFuIG91dHB1dC5wdWJsaWNQYXRoIG1hbnVhbGx5IHZpYSBjb25maWd1cmF0aW9uXG4vLyBvciBwYXNzIGFuIGVtcHR5IHN0cmluZyAoXCJcIikgYW5kIHNldCB0aGUgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gdmFyaWFibGUgZnJvbSB5b3VyIGNvZGUgdG8gdXNlIHlvdXIgb3duIGxvZ2ljLlxuaWYgKCFzY3JpcHRVcmwpIHRocm93IG5ldyBFcnJvcihcIkF1dG9tYXRpYyBwdWJsaWNQYXRoIGlzIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBicm93c2VyXCIpO1xuc2NyaXB0VXJsID0gc2NyaXB0VXJsLnJlcGxhY2UoLyMuKiQvLCBcIlwiKS5yZXBsYWNlKC9cXD8uKiQvLCBcIlwiKS5yZXBsYWNlKC9cXC9bXlxcL10rJC8sIFwiL1wiKTtcbl9fd2VicGFja19yZXF1aXJlX18ucCA9IHNjcmlwdFVybDsiLCJpZiAodHlwZW9mIGRvY3VtZW50ID09PSBcInVuZGVmaW5lZFwiKSByZXR1cm47XG52YXIgY3JlYXRlU3R5bGVzaGVldCA9IChjaHVua0lkLCBmdWxsaHJlZiwgb2xkVGFnLCByZXNvbHZlLCByZWplY3QpID0+IHtcblx0dmFyIGxpbmtUYWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlua1wiKTtcblxuXHRsaW5rVGFnLnJlbCA9IFwic3R5bGVzaGVldFwiO1xuXHRsaW5rVGFnLnR5cGUgPSBcInRleHQvY3NzXCI7XG5cdHZhciBvbkxpbmtDb21wbGV0ZSA9IChldmVudCkgPT4ge1xuXHRcdC8vIGF2b2lkIG1lbSBsZWFrcy5cblx0XHRsaW5rVGFnLm9uZXJyb3IgPSBsaW5rVGFnLm9ubG9hZCA9IG51bGw7XG5cdFx0aWYgKGV2ZW50LnR5cGUgPT09ICdsb2FkJykge1xuXHRcdFx0cmVzb2x2ZSgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR2YXIgZXJyb3JUeXBlID0gZXZlbnQgJiYgKGV2ZW50LnR5cGUgPT09ICdsb2FkJyA/ICdtaXNzaW5nJyA6IGV2ZW50LnR5cGUpO1xuXHRcdFx0dmFyIHJlYWxIcmVmID0gZXZlbnQgJiYgZXZlbnQudGFyZ2V0ICYmIGV2ZW50LnRhcmdldC5ocmVmIHx8IGZ1bGxocmVmO1xuXHRcdFx0dmFyIGVyciA9IG5ldyBFcnJvcihcIkxvYWRpbmcgQ1NTIGNodW5rIFwiICsgY2h1bmtJZCArIFwiIGZhaWxlZC5cXG4oXCIgKyByZWFsSHJlZiArIFwiKVwiKTtcblx0XHRcdGVyci5jb2RlID0gXCJDU1NfQ0hVTktfTE9BRF9GQUlMRURcIjtcblx0XHRcdGVyci50eXBlID0gZXJyb3JUeXBlO1xuXHRcdFx0ZXJyLnJlcXVlc3QgPSByZWFsSHJlZjtcblx0XHRcdGlmIChsaW5rVGFnLnBhcmVudE5vZGUpIGxpbmtUYWcucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChsaW5rVGFnKVxuXHRcdFx0cmVqZWN0KGVycik7XG5cdFx0fVxuXHR9XG5cdGxpbmtUYWcub25lcnJvciA9IGxpbmtUYWcub25sb2FkID0gb25MaW5rQ29tcGxldGU7XG5cdGxpbmtUYWcuaHJlZiA9IGZ1bGxocmVmO1xuXG5cdGlmIChvbGRUYWcpIHtcblx0XHRvbGRUYWcucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUobGlua1RhZywgb2xkVGFnLm5leHRTaWJsaW5nKTtcblx0fSBlbHNlIHtcblx0XHRkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGxpbmtUYWcpO1xuXHR9XG5cdHJldHVybiBsaW5rVGFnO1xufTtcbnZhciBmaW5kU3R5bGVzaGVldCA9IChocmVmLCBmdWxsaHJlZikgPT4ge1xuXHR2YXIgZXhpc3RpbmdMaW5rVGFncyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwibGlua1wiKTtcblx0Zm9yKHZhciBpID0gMDsgaSA8IGV4aXN0aW5nTGlua1RhZ3MubGVuZ3RoOyBpKyspIHtcblx0XHR2YXIgdGFnID0gZXhpc3RpbmdMaW5rVGFnc1tpXTtcblx0XHR2YXIgZGF0YUhyZWYgPSB0YWcuZ2V0QXR0cmlidXRlKFwiZGF0YS1ocmVmXCIpIHx8IHRhZy5nZXRBdHRyaWJ1dGUoXCJocmVmXCIpO1xuXHRcdGlmKHRhZy5yZWwgPT09IFwic3R5bGVzaGVldFwiICYmIChkYXRhSHJlZiA9PT0gaHJlZiB8fCBkYXRhSHJlZiA9PT0gZnVsbGhyZWYpKSByZXR1cm4gdGFnO1xuXHR9XG5cdHZhciBleGlzdGluZ1N0eWxlVGFncyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic3R5bGVcIik7XG5cdGZvcih2YXIgaSA9IDA7IGkgPCBleGlzdGluZ1N0eWxlVGFncy5sZW5ndGg7IGkrKykge1xuXHRcdHZhciB0YWcgPSBleGlzdGluZ1N0eWxlVGFnc1tpXTtcblx0XHR2YXIgZGF0YUhyZWYgPSB0YWcuZ2V0QXR0cmlidXRlKFwiZGF0YS1ocmVmXCIpO1xuXHRcdGlmKGRhdGFIcmVmID09PSBocmVmIHx8IGRhdGFIcmVmID09PSBmdWxsaHJlZikgcmV0dXJuIHRhZztcblx0fVxufTtcbnZhciBsb2FkU3R5bGVzaGVldCA9IChjaHVua0lkKSA9PiB7XG5cdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0dmFyIGhyZWYgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLm1pbmlDc3NGKGNodW5rSWQpO1xuXHRcdHZhciBmdWxsaHJlZiA9IF9fd2VicGFja19yZXF1aXJlX18ucCArIGhyZWY7XG5cdFx0aWYoZmluZFN0eWxlc2hlZXQoaHJlZiwgZnVsbGhyZWYpKSByZXR1cm4gcmVzb2x2ZSgpO1xuXHRcdGNyZWF0ZVN0eWxlc2hlZXQoY2h1bmtJZCwgZnVsbGhyZWYsIG51bGwsIHJlc29sdmUsIHJlamVjdCk7XG5cdH0pO1xufVxuLy8gbm8gY2h1bmsgbG9hZGluZ1xuXG52YXIgb2xkVGFncyA9IFtdO1xudmFyIG5ld1RhZ3MgPSBbXTtcbnZhciBhcHBseUhhbmRsZXIgPSAob3B0aW9ucykgPT4ge1xuXHRyZXR1cm4geyBkaXNwb3NlOiAoKSA9PiB7XG5cdFx0Zm9yKHZhciBpID0gMDsgaSA8IG9sZFRhZ3MubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBvbGRUYWcgPSBvbGRUYWdzW2ldO1xuXHRcdFx0aWYob2xkVGFnLnBhcmVudE5vZGUpIG9sZFRhZy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG9sZFRhZyk7XG5cdFx0fVxuXHRcdG9sZFRhZ3MubGVuZ3RoID0gMDtcblx0fSwgYXBwbHk6ICgpID0+IHtcblx0XHRmb3IodmFyIGkgPSAwOyBpIDwgbmV3VGFncy5sZW5ndGg7IGkrKykgbmV3VGFnc1tpXS5yZWwgPSBcInN0eWxlc2hlZXRcIjtcblx0XHRuZXdUYWdzLmxlbmd0aCA9IDA7XG5cdH0gfTtcbn1cbl9fd2VicGFja19yZXF1aXJlX18uaG1yQy5taW5pQ3NzID0gKGNodW5rSWRzLCByZW1vdmVkQ2h1bmtzLCByZW1vdmVkTW9kdWxlcywgcHJvbWlzZXMsIGFwcGx5SGFuZGxlcnMsIHVwZGF0ZWRNb2R1bGVzTGlzdCkgPT4ge1xuXHRhcHBseUhhbmRsZXJzLnB1c2goYXBwbHlIYW5kbGVyKTtcblx0Y2h1bmtJZHMuZm9yRWFjaCgoY2h1bmtJZCkgPT4ge1xuXHRcdHZhciBocmVmID0gX193ZWJwYWNrX3JlcXVpcmVfXy5taW5pQ3NzRihjaHVua0lkKTtcblx0XHR2YXIgZnVsbGhyZWYgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLnAgKyBocmVmO1xuXHRcdHZhciBvbGRUYWcgPSBmaW5kU3R5bGVzaGVldChocmVmLCBmdWxsaHJlZik7XG5cdFx0aWYoIW9sZFRhZykgcmV0dXJuO1xuXHRcdHByb21pc2VzLnB1c2gobmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0dmFyIHRhZyA9IGNyZWF0ZVN0eWxlc2hlZXQoY2h1bmtJZCwgZnVsbGhyZWYsIG9sZFRhZywgKCkgPT4ge1xuXHRcdFx0XHR0YWcuYXMgPSBcInN0eWxlXCI7XG5cdFx0XHRcdHRhZy5yZWwgPSBcInByZWxvYWRcIjtcblx0XHRcdFx0cmVzb2x2ZSgpO1xuXHRcdFx0fSwgcmVqZWN0KTtcblx0XHRcdG9sZFRhZ3MucHVzaChvbGRUYWcpO1xuXHRcdFx0bmV3VGFncy5wdXNoKHRhZyk7XG5cdFx0fSkpO1xuXHR9KTtcbn0iLCIvLyBubyBiYXNlVVJJXG5cbi8vIG9iamVjdCB0byBzdG9yZSBsb2FkZWQgYW5kIGxvYWRpbmcgY2h1bmtzXG4vLyB1bmRlZmluZWQgPSBjaHVuayBub3QgbG9hZGVkLCBudWxsID0gY2h1bmsgcHJlbG9hZGVkL3ByZWZldGNoZWRcbi8vIFtyZXNvbHZlLCByZWplY3QsIFByb21pc2VdID0gY2h1bmsgbG9hZGluZywgMCA9IGNodW5rIGxvYWRlZFxudmFyIGluc3RhbGxlZENodW5rcyA9IF9fd2VicGFja19yZXF1aXJlX18uaG1yU19qc29ucCA9IF9fd2VicGFja19yZXF1aXJlX18uaG1yU19qc29ucCB8fCB7XG5cdDE3OTogMFxufTtcblxuLy8gbm8gY2h1bmsgb24gZGVtYW5kIGxvYWRpbmdcblxuLy8gbm8gcHJlZmV0Y2hpbmdcblxuLy8gbm8gcHJlbG9hZGVkXG5cbnZhciBjdXJyZW50VXBkYXRlZE1vZHVsZXNMaXN0O1xudmFyIHdhaXRpbmdVcGRhdGVSZXNvbHZlcyA9IHt9O1xuZnVuY3Rpb24gbG9hZFVwZGF0ZUNodW5rKGNodW5rSWQsIHVwZGF0ZWRNb2R1bGVzTGlzdCkge1xuXHRjdXJyZW50VXBkYXRlZE1vZHVsZXNMaXN0ID0gdXBkYXRlZE1vZHVsZXNMaXN0O1xuXHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdHdhaXRpbmdVcGRhdGVSZXNvbHZlc1tjaHVua0lkXSA9IHJlc29sdmU7XG5cdFx0Ly8gc3RhcnQgdXBkYXRlIGNodW5rIGxvYWRpbmdcblx0XHR2YXIgdXJsID0gX193ZWJwYWNrX3JlcXVpcmVfXy5wICsgX193ZWJwYWNrX3JlcXVpcmVfXy5odShjaHVua0lkKTtcblx0XHQvLyBjcmVhdGUgZXJyb3IgYmVmb3JlIHN0YWNrIHVud291bmQgdG8gZ2V0IHVzZWZ1bCBzdGFja3RyYWNlIGxhdGVyXG5cdFx0dmFyIGVycm9yID0gbmV3IEVycm9yKCk7XG5cdFx0dmFyIGxvYWRpbmdFbmRlZCA9IChldmVudCkgPT4ge1xuXHRcdFx0aWYod2FpdGluZ1VwZGF0ZVJlc29sdmVzW2NodW5rSWRdKSB7XG5cdFx0XHRcdHdhaXRpbmdVcGRhdGVSZXNvbHZlc1tjaHVua0lkXSA9IHVuZGVmaW5lZFxuXHRcdFx0XHR2YXIgZXJyb3JUeXBlID0gZXZlbnQgJiYgKGV2ZW50LnR5cGUgPT09ICdsb2FkJyA/ICdtaXNzaW5nJyA6IGV2ZW50LnR5cGUpO1xuXHRcdFx0XHR2YXIgcmVhbFNyYyA9IGV2ZW50ICYmIGV2ZW50LnRhcmdldCAmJiBldmVudC50YXJnZXQuc3JjO1xuXHRcdFx0XHRlcnJvci5tZXNzYWdlID0gJ0xvYWRpbmcgaG90IHVwZGF0ZSBjaHVuayAnICsgY2h1bmtJZCArICcgZmFpbGVkLlxcbignICsgZXJyb3JUeXBlICsgJzogJyArIHJlYWxTcmMgKyAnKSc7XG5cdFx0XHRcdGVycm9yLm5hbWUgPSAnQ2h1bmtMb2FkRXJyb3InO1xuXHRcdFx0XHRlcnJvci50eXBlID0gZXJyb3JUeXBlO1xuXHRcdFx0XHRlcnJvci5yZXF1ZXN0ID0gcmVhbFNyYztcblx0XHRcdFx0cmVqZWN0KGVycm9yKTtcblx0XHRcdH1cblx0XHR9O1xuXHRcdF9fd2VicGFja19yZXF1aXJlX18ubCh1cmwsIGxvYWRpbmdFbmRlZCk7XG5cdH0pO1xufVxuXG5zZWxmW1wid2VicGFja0hvdFVwZGF0ZWNoYXRfYXBwXCJdID0gKGNodW5rSWQsIG1vcmVNb2R1bGVzLCBydW50aW1lKSA9PiB7XG5cdGZvcih2YXIgbW9kdWxlSWQgaW4gbW9yZU1vZHVsZXMpIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8obW9yZU1vZHVsZXMsIG1vZHVsZUlkKSkge1xuXHRcdFx0Y3VycmVudFVwZGF0ZVttb2R1bGVJZF0gPSBtb3JlTW9kdWxlc1ttb2R1bGVJZF07XG5cdFx0XHRpZihjdXJyZW50VXBkYXRlZE1vZHVsZXNMaXN0KSBjdXJyZW50VXBkYXRlZE1vZHVsZXNMaXN0LnB1c2gobW9kdWxlSWQpO1xuXHRcdH1cblx0fVxuXHRpZihydW50aW1lKSBjdXJyZW50VXBkYXRlUnVudGltZS5wdXNoKHJ1bnRpbWUpO1xuXHRpZih3YWl0aW5nVXBkYXRlUmVzb2x2ZXNbY2h1bmtJZF0pIHtcblx0XHR3YWl0aW5nVXBkYXRlUmVzb2x2ZXNbY2h1bmtJZF0oKTtcblx0XHR3YWl0aW5nVXBkYXRlUmVzb2x2ZXNbY2h1bmtJZF0gPSB1bmRlZmluZWQ7XG5cdH1cbn07XG5cbnZhciBjdXJyZW50VXBkYXRlQ2h1bmtzO1xudmFyIGN1cnJlbnRVcGRhdGU7XG52YXIgY3VycmVudFVwZGF0ZVJlbW92ZWRDaHVua3M7XG52YXIgY3VycmVudFVwZGF0ZVJ1bnRpbWU7XG5mdW5jdGlvbiBhcHBseUhhbmRsZXIob3B0aW9ucykge1xuXHRpZiAoX193ZWJwYWNrX3JlcXVpcmVfXy5mKSBkZWxldGUgX193ZWJwYWNrX3JlcXVpcmVfXy5mLmpzb25wSG1yO1xuXHRjdXJyZW50VXBkYXRlQ2h1bmtzID0gdW5kZWZpbmVkO1xuXHRmdW5jdGlvbiBnZXRBZmZlY3RlZE1vZHVsZUVmZmVjdHModXBkYXRlTW9kdWxlSWQpIHtcblx0XHR2YXIgb3V0ZGF0ZWRNb2R1bGVzID0gW3VwZGF0ZU1vZHVsZUlkXTtcblx0XHR2YXIgb3V0ZGF0ZWREZXBlbmRlbmNpZXMgPSB7fTtcblxuXHRcdHZhciBxdWV1ZSA9IG91dGRhdGVkTW9kdWxlcy5tYXAoZnVuY3Rpb24gKGlkKSB7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRjaGFpbjogW2lkXSxcblx0XHRcdFx0aWQ6IGlkXG5cdFx0XHR9O1xuXHRcdH0pO1xuXHRcdHdoaWxlIChxdWV1ZS5sZW5ndGggPiAwKSB7XG5cdFx0XHR2YXIgcXVldWVJdGVtID0gcXVldWUucG9wKCk7XG5cdFx0XHR2YXIgbW9kdWxlSWQgPSBxdWV1ZUl0ZW0uaWQ7XG5cdFx0XHR2YXIgY2hhaW4gPSBxdWV1ZUl0ZW0uY2hhaW47XG5cdFx0XHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX3JlcXVpcmVfXy5jW21vZHVsZUlkXTtcblx0XHRcdGlmIChcblx0XHRcdFx0IW1vZHVsZSB8fFxuXHRcdFx0XHQobW9kdWxlLmhvdC5fc2VsZkFjY2VwdGVkICYmICFtb2R1bGUuaG90Ll9zZWxmSW52YWxpZGF0ZWQpXG5cdFx0XHQpXG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0aWYgKG1vZHVsZS5ob3QuX3NlbGZEZWNsaW5lZCkge1xuXHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdHR5cGU6IFwic2VsZi1kZWNsaW5lZFwiLFxuXHRcdFx0XHRcdGNoYWluOiBjaGFpbixcblx0XHRcdFx0XHRtb2R1bGVJZDogbW9kdWxlSWRcblx0XHRcdFx0fTtcblx0XHRcdH1cblx0XHRcdGlmIChtb2R1bGUuaG90Ll9tYWluKSB7XG5cdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0dHlwZTogXCJ1bmFjY2VwdGVkXCIsXG5cdFx0XHRcdFx0Y2hhaW46IGNoYWluLFxuXHRcdFx0XHRcdG1vZHVsZUlkOiBtb2R1bGVJZFxuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBtb2R1bGUucGFyZW50cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHR2YXIgcGFyZW50SWQgPSBtb2R1bGUucGFyZW50c1tpXTtcblx0XHRcdFx0dmFyIHBhcmVudCA9IF9fd2VicGFja19yZXF1aXJlX18uY1twYXJlbnRJZF07XG5cdFx0XHRcdGlmICghcGFyZW50KSBjb250aW51ZTtcblx0XHRcdFx0aWYgKHBhcmVudC5ob3QuX2RlY2xpbmVkRGVwZW5kZW5jaWVzW21vZHVsZUlkXSkge1xuXHRcdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0XHR0eXBlOiBcImRlY2xpbmVkXCIsXG5cdFx0XHRcdFx0XHRjaGFpbjogY2hhaW4uY29uY2F0KFtwYXJlbnRJZF0pLFxuXHRcdFx0XHRcdFx0bW9kdWxlSWQ6IG1vZHVsZUlkLFxuXHRcdFx0XHRcdFx0cGFyZW50SWQ6IHBhcmVudElkXG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAob3V0ZGF0ZWRNb2R1bGVzLmluZGV4T2YocGFyZW50SWQpICE9PSAtMSkgY29udGludWU7XG5cdFx0XHRcdGlmIChwYXJlbnQuaG90Ll9hY2NlcHRlZERlcGVuZGVuY2llc1ttb2R1bGVJZF0pIHtcblx0XHRcdFx0XHRpZiAoIW91dGRhdGVkRGVwZW5kZW5jaWVzW3BhcmVudElkXSlcblx0XHRcdFx0XHRcdG91dGRhdGVkRGVwZW5kZW5jaWVzW3BhcmVudElkXSA9IFtdO1xuXHRcdFx0XHRcdGFkZEFsbFRvU2V0KG91dGRhdGVkRGVwZW5kZW5jaWVzW3BhcmVudElkXSwgW21vZHVsZUlkXSk7XG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdH1cblx0XHRcdFx0ZGVsZXRlIG91dGRhdGVkRGVwZW5kZW5jaWVzW3BhcmVudElkXTtcblx0XHRcdFx0b3V0ZGF0ZWRNb2R1bGVzLnB1c2gocGFyZW50SWQpO1xuXHRcdFx0XHRxdWV1ZS5wdXNoKHtcblx0XHRcdFx0XHRjaGFpbjogY2hhaW4uY29uY2F0KFtwYXJlbnRJZF0pLFxuXHRcdFx0XHRcdGlkOiBwYXJlbnRJZFxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4ge1xuXHRcdFx0dHlwZTogXCJhY2NlcHRlZFwiLFxuXHRcdFx0bW9kdWxlSWQ6IHVwZGF0ZU1vZHVsZUlkLFxuXHRcdFx0b3V0ZGF0ZWRNb2R1bGVzOiBvdXRkYXRlZE1vZHVsZXMsXG5cdFx0XHRvdXRkYXRlZERlcGVuZGVuY2llczogb3V0ZGF0ZWREZXBlbmRlbmNpZXNcblx0XHR9O1xuXHR9XG5cblx0ZnVuY3Rpb24gYWRkQWxsVG9TZXQoYSwgYikge1xuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgYi5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGl0ZW0gPSBiW2ldO1xuXHRcdFx0aWYgKGEuaW5kZXhPZihpdGVtKSA9PT0gLTEpIGEucHVzaChpdGVtKTtcblx0XHR9XG5cdH1cblxuXHQvLyBhdCBiZWdpbiBhbGwgdXBkYXRlcyBtb2R1bGVzIGFyZSBvdXRkYXRlZFxuXHQvLyB0aGUgXCJvdXRkYXRlZFwiIHN0YXR1cyBjYW4gcHJvcGFnYXRlIHRvIHBhcmVudHMgaWYgdGhleSBkb24ndCBhY2NlcHQgdGhlIGNoaWxkcmVuXG5cdHZhciBvdXRkYXRlZERlcGVuZGVuY2llcyA9IHt9O1xuXHR2YXIgb3V0ZGF0ZWRNb2R1bGVzID0gW107XG5cdHZhciBhcHBsaWVkVXBkYXRlID0ge307XG5cblx0dmFyIHdhcm5VbmV4cGVjdGVkUmVxdWlyZSA9IGZ1bmN0aW9uIHdhcm5VbmV4cGVjdGVkUmVxdWlyZShtb2R1bGUpIHtcblx0XHRjb25zb2xlLndhcm4oXG5cdFx0XHRcIltITVJdIHVuZXhwZWN0ZWQgcmVxdWlyZShcIiArIG1vZHVsZS5pZCArIFwiKSB0byBkaXNwb3NlZCBtb2R1bGVcIlxuXHRcdCk7XG5cdH07XG5cblx0Zm9yICh2YXIgbW9kdWxlSWQgaW4gY3VycmVudFVwZGF0ZSkge1xuXHRcdGlmIChfX3dlYnBhY2tfcmVxdWlyZV9fLm8oY3VycmVudFVwZGF0ZSwgbW9kdWxlSWQpKSB7XG5cdFx0XHR2YXIgbmV3TW9kdWxlRmFjdG9yeSA9IGN1cnJlbnRVcGRhdGVbbW9kdWxlSWRdO1xuXHRcdFx0LyoqIEB0eXBlIHtUT0RPfSAqL1xuXHRcdFx0dmFyIHJlc3VsdDtcblx0XHRcdGlmIChuZXdNb2R1bGVGYWN0b3J5KSB7XG5cdFx0XHRcdHJlc3VsdCA9IGdldEFmZmVjdGVkTW9kdWxlRWZmZWN0cyhtb2R1bGVJZCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZXN1bHQgPSB7XG5cdFx0XHRcdFx0dHlwZTogXCJkaXNwb3NlZFwiLFxuXHRcdFx0XHRcdG1vZHVsZUlkOiBtb2R1bGVJZFxuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXHRcdFx0LyoqIEB0eXBlIHtFcnJvcnxmYWxzZX0gKi9cblx0XHRcdHZhciBhYm9ydEVycm9yID0gZmFsc2U7XG5cdFx0XHR2YXIgZG9BcHBseSA9IGZhbHNlO1xuXHRcdFx0dmFyIGRvRGlzcG9zZSA9IGZhbHNlO1xuXHRcdFx0dmFyIGNoYWluSW5mbyA9IFwiXCI7XG5cdFx0XHRpZiAocmVzdWx0LmNoYWluKSB7XG5cdFx0XHRcdGNoYWluSW5mbyA9IFwiXFxuVXBkYXRlIHByb3BhZ2F0aW9uOiBcIiArIHJlc3VsdC5jaGFpbi5qb2luKFwiIC0+IFwiKTtcblx0XHRcdH1cblx0XHRcdHN3aXRjaCAocmVzdWx0LnR5cGUpIHtcblx0XHRcdFx0Y2FzZSBcInNlbGYtZGVjbGluZWRcIjpcblx0XHRcdFx0XHRpZiAob3B0aW9ucy5vbkRlY2xpbmVkKSBvcHRpb25zLm9uRGVjbGluZWQocmVzdWx0KTtcblx0XHRcdFx0XHRpZiAoIW9wdGlvbnMuaWdub3JlRGVjbGluZWQpXG5cdFx0XHRcdFx0XHRhYm9ydEVycm9yID0gbmV3IEVycm9yKFxuXHRcdFx0XHRcdFx0XHRcIkFib3J0ZWQgYmVjYXVzZSBvZiBzZWxmIGRlY2xpbmU6IFwiICtcblx0XHRcdFx0XHRcdFx0XHRyZXN1bHQubW9kdWxlSWQgK1xuXHRcdFx0XHRcdFx0XHRcdGNoYWluSW5mb1xuXHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBcImRlY2xpbmVkXCI6XG5cdFx0XHRcdFx0aWYgKG9wdGlvbnMub25EZWNsaW5lZCkgb3B0aW9ucy5vbkRlY2xpbmVkKHJlc3VsdCk7XG5cdFx0XHRcdFx0aWYgKCFvcHRpb25zLmlnbm9yZURlY2xpbmVkKVxuXHRcdFx0XHRcdFx0YWJvcnRFcnJvciA9IG5ldyBFcnJvcihcblx0XHRcdFx0XHRcdFx0XCJBYm9ydGVkIGJlY2F1c2Ugb2YgZGVjbGluZWQgZGVwZW5kZW5jeTogXCIgK1xuXHRcdFx0XHRcdFx0XHRcdHJlc3VsdC5tb2R1bGVJZCArXG5cdFx0XHRcdFx0XHRcdFx0XCIgaW4gXCIgK1xuXHRcdFx0XHRcdFx0XHRcdHJlc3VsdC5wYXJlbnRJZCArXG5cdFx0XHRcdFx0XHRcdFx0Y2hhaW5JbmZvXG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIFwidW5hY2NlcHRlZFwiOlxuXHRcdFx0XHRcdGlmIChvcHRpb25zLm9uVW5hY2NlcHRlZCkgb3B0aW9ucy5vblVuYWNjZXB0ZWQocmVzdWx0KTtcblx0XHRcdFx0XHRpZiAoIW9wdGlvbnMuaWdub3JlVW5hY2NlcHRlZClcblx0XHRcdFx0XHRcdGFib3J0RXJyb3IgPSBuZXcgRXJyb3IoXG5cdFx0XHRcdFx0XHRcdFwiQWJvcnRlZCBiZWNhdXNlIFwiICsgbW9kdWxlSWQgKyBcIiBpcyBub3QgYWNjZXB0ZWRcIiArIGNoYWluSW5mb1xuXHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBcImFjY2VwdGVkXCI6XG5cdFx0XHRcdFx0aWYgKG9wdGlvbnMub25BY2NlcHRlZCkgb3B0aW9ucy5vbkFjY2VwdGVkKHJlc3VsdCk7XG5cdFx0XHRcdFx0ZG9BcHBseSA9IHRydWU7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgXCJkaXNwb3NlZFwiOlxuXHRcdFx0XHRcdGlmIChvcHRpb25zLm9uRGlzcG9zZWQpIG9wdGlvbnMub25EaXNwb3NlZChyZXN1bHQpO1xuXHRcdFx0XHRcdGRvRGlzcG9zZSA9IHRydWU7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiVW5leGNlcHRpb24gdHlwZSBcIiArIHJlc3VsdC50eXBlKTtcblx0XHRcdH1cblx0XHRcdGlmIChhYm9ydEVycm9yKSB7XG5cdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0ZXJyb3I6IGFib3J0RXJyb3Jcblx0XHRcdFx0fTtcblx0XHRcdH1cblx0XHRcdGlmIChkb0FwcGx5KSB7XG5cdFx0XHRcdGFwcGxpZWRVcGRhdGVbbW9kdWxlSWRdID0gbmV3TW9kdWxlRmFjdG9yeTtcblx0XHRcdFx0YWRkQWxsVG9TZXQob3V0ZGF0ZWRNb2R1bGVzLCByZXN1bHQub3V0ZGF0ZWRNb2R1bGVzKTtcblx0XHRcdFx0Zm9yIChtb2R1bGVJZCBpbiByZXN1bHQub3V0ZGF0ZWREZXBlbmRlbmNpZXMpIHtcblx0XHRcdFx0XHRpZiAoX193ZWJwYWNrX3JlcXVpcmVfXy5vKHJlc3VsdC5vdXRkYXRlZERlcGVuZGVuY2llcywgbW9kdWxlSWQpKSB7XG5cdFx0XHRcdFx0XHRpZiAoIW91dGRhdGVkRGVwZW5kZW5jaWVzW21vZHVsZUlkXSlcblx0XHRcdFx0XHRcdFx0b3V0ZGF0ZWREZXBlbmRlbmNpZXNbbW9kdWxlSWRdID0gW107XG5cdFx0XHRcdFx0XHRhZGRBbGxUb1NldChcblx0XHRcdFx0XHRcdFx0b3V0ZGF0ZWREZXBlbmRlbmNpZXNbbW9kdWxlSWRdLFxuXHRcdFx0XHRcdFx0XHRyZXN1bHQub3V0ZGF0ZWREZXBlbmRlbmNpZXNbbW9kdWxlSWRdXG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0aWYgKGRvRGlzcG9zZSkge1xuXHRcdFx0XHRhZGRBbGxUb1NldChvdXRkYXRlZE1vZHVsZXMsIFtyZXN1bHQubW9kdWxlSWRdKTtcblx0XHRcdFx0YXBwbGllZFVwZGF0ZVttb2R1bGVJZF0gPSB3YXJuVW5leHBlY3RlZFJlcXVpcmU7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdGN1cnJlbnRVcGRhdGUgPSB1bmRlZmluZWQ7XG5cblx0Ly8gU3RvcmUgc2VsZiBhY2NlcHRlZCBvdXRkYXRlZCBtb2R1bGVzIHRvIHJlcXVpcmUgdGhlbSBsYXRlciBieSB0aGUgbW9kdWxlIHN5c3RlbVxuXHR2YXIgb3V0ZGF0ZWRTZWxmQWNjZXB0ZWRNb2R1bGVzID0gW107XG5cdGZvciAodmFyIGogPSAwOyBqIDwgb3V0ZGF0ZWRNb2R1bGVzLmxlbmd0aDsgaisrKSB7XG5cdFx0dmFyIG91dGRhdGVkTW9kdWxlSWQgPSBvdXRkYXRlZE1vZHVsZXNbal07XG5cdFx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19yZXF1aXJlX18uY1tvdXRkYXRlZE1vZHVsZUlkXTtcblx0XHRpZiAoXG5cdFx0XHRtb2R1bGUgJiZcblx0XHRcdChtb2R1bGUuaG90Ll9zZWxmQWNjZXB0ZWQgfHwgbW9kdWxlLmhvdC5fbWFpbikgJiZcblx0XHRcdC8vIHJlbW92ZWQgc2VsZi1hY2NlcHRlZCBtb2R1bGVzIHNob3VsZCBub3QgYmUgcmVxdWlyZWRcblx0XHRcdGFwcGxpZWRVcGRhdGVbb3V0ZGF0ZWRNb2R1bGVJZF0gIT09IHdhcm5VbmV4cGVjdGVkUmVxdWlyZSAmJlxuXHRcdFx0Ly8gd2hlbiBjYWxsZWQgaW52YWxpZGF0ZSBzZWxmLWFjY2VwdGluZyBpcyBub3QgcG9zc2libGVcblx0XHRcdCFtb2R1bGUuaG90Ll9zZWxmSW52YWxpZGF0ZWRcblx0XHQpIHtcblx0XHRcdG91dGRhdGVkU2VsZkFjY2VwdGVkTW9kdWxlcy5wdXNoKHtcblx0XHRcdFx0bW9kdWxlOiBvdXRkYXRlZE1vZHVsZUlkLFxuXHRcdFx0XHRyZXF1aXJlOiBtb2R1bGUuaG90Ll9yZXF1aXJlU2VsZixcblx0XHRcdFx0ZXJyb3JIYW5kbGVyOiBtb2R1bGUuaG90Ll9zZWxmQWNjZXB0ZWRcblx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXG5cdHZhciBtb2R1bGVPdXRkYXRlZERlcGVuZGVuY2llcztcblxuXHRyZXR1cm4ge1xuXHRcdGRpc3Bvc2U6IGZ1bmN0aW9uICgpIHtcblx0XHRcdGN1cnJlbnRVcGRhdGVSZW1vdmVkQ2h1bmtzLmZvckVhY2goZnVuY3Rpb24gKGNodW5rSWQpIHtcblx0XHRcdFx0ZGVsZXRlIGluc3RhbGxlZENodW5rc1tjaHVua0lkXTtcblx0XHRcdH0pO1xuXHRcdFx0Y3VycmVudFVwZGF0ZVJlbW92ZWRDaHVua3MgPSB1bmRlZmluZWQ7XG5cblx0XHRcdHZhciBpZHg7XG5cdFx0XHR2YXIgcXVldWUgPSBvdXRkYXRlZE1vZHVsZXMuc2xpY2UoKTtcblx0XHRcdHdoaWxlIChxdWV1ZS5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdHZhciBtb2R1bGVJZCA9IHF1ZXVlLnBvcCgpO1xuXHRcdFx0XHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX3JlcXVpcmVfXy5jW21vZHVsZUlkXTtcblx0XHRcdFx0aWYgKCFtb2R1bGUpIGNvbnRpbnVlO1xuXG5cdFx0XHRcdHZhciBkYXRhID0ge307XG5cblx0XHRcdFx0Ly8gQ2FsbCBkaXNwb3NlIGhhbmRsZXJzXG5cdFx0XHRcdHZhciBkaXNwb3NlSGFuZGxlcnMgPSBtb2R1bGUuaG90Ll9kaXNwb3NlSGFuZGxlcnM7XG5cdFx0XHRcdGZvciAoaiA9IDA7IGogPCBkaXNwb3NlSGFuZGxlcnMubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0XHRkaXNwb3NlSGFuZGxlcnNbal0uY2FsbChudWxsLCBkYXRhKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmhtckRbbW9kdWxlSWRdID0gZGF0YTtcblxuXHRcdFx0XHQvLyBkaXNhYmxlIG1vZHVsZSAodGhpcyBkaXNhYmxlcyByZXF1aXJlcyBmcm9tIHRoaXMgbW9kdWxlKVxuXHRcdFx0XHRtb2R1bGUuaG90LmFjdGl2ZSA9IGZhbHNlO1xuXG5cdFx0XHRcdC8vIHJlbW92ZSBtb2R1bGUgZnJvbSBjYWNoZVxuXHRcdFx0XHRkZWxldGUgX193ZWJwYWNrX3JlcXVpcmVfXy5jW21vZHVsZUlkXTtcblxuXHRcdFx0XHQvLyB3aGVuIGRpc3Bvc2luZyB0aGVyZSBpcyBubyBuZWVkIHRvIGNhbGwgZGlzcG9zZSBoYW5kbGVyXG5cdFx0XHRcdGRlbGV0ZSBvdXRkYXRlZERlcGVuZGVuY2llc1ttb2R1bGVJZF07XG5cblx0XHRcdFx0Ly8gcmVtb3ZlIFwicGFyZW50c1wiIHJlZmVyZW5jZXMgZnJvbSBhbGwgY2hpbGRyZW5cblx0XHRcdFx0Zm9yIChqID0gMDsgaiA8IG1vZHVsZS5jaGlsZHJlbi5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRcdHZhciBjaGlsZCA9IF9fd2VicGFja19yZXF1aXJlX18uY1ttb2R1bGUuY2hpbGRyZW5bal1dO1xuXHRcdFx0XHRcdGlmICghY2hpbGQpIGNvbnRpbnVlO1xuXHRcdFx0XHRcdGlkeCA9IGNoaWxkLnBhcmVudHMuaW5kZXhPZihtb2R1bGVJZCk7XG5cdFx0XHRcdFx0aWYgKGlkeCA+PSAwKSB7XG5cdFx0XHRcdFx0XHRjaGlsZC5wYXJlbnRzLnNwbGljZShpZHgsIDEpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyByZW1vdmUgb3V0ZGF0ZWQgZGVwZW5kZW5jeSBmcm9tIG1vZHVsZSBjaGlsZHJlblxuXHRcdFx0dmFyIGRlcGVuZGVuY3k7XG5cdFx0XHRmb3IgKHZhciBvdXRkYXRlZE1vZHVsZUlkIGluIG91dGRhdGVkRGVwZW5kZW5jaWVzKSB7XG5cdFx0XHRcdGlmIChfX3dlYnBhY2tfcmVxdWlyZV9fLm8ob3V0ZGF0ZWREZXBlbmRlbmNpZXMsIG91dGRhdGVkTW9kdWxlSWQpKSB7XG5cdFx0XHRcdFx0bW9kdWxlID0gX193ZWJwYWNrX3JlcXVpcmVfXy5jW291dGRhdGVkTW9kdWxlSWRdO1xuXHRcdFx0XHRcdGlmIChtb2R1bGUpIHtcblx0XHRcdFx0XHRcdG1vZHVsZU91dGRhdGVkRGVwZW5kZW5jaWVzID1cblx0XHRcdFx0XHRcdFx0b3V0ZGF0ZWREZXBlbmRlbmNpZXNbb3V0ZGF0ZWRNb2R1bGVJZF07XG5cdFx0XHRcdFx0XHRmb3IgKGogPSAwOyBqIDwgbW9kdWxlT3V0ZGF0ZWREZXBlbmRlbmNpZXMubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0XHRcdFx0ZGVwZW5kZW5jeSA9IG1vZHVsZU91dGRhdGVkRGVwZW5kZW5jaWVzW2pdO1xuXHRcdFx0XHRcdFx0XHRpZHggPSBtb2R1bGUuY2hpbGRyZW4uaW5kZXhPZihkZXBlbmRlbmN5KTtcblx0XHRcdFx0XHRcdFx0aWYgKGlkeCA+PSAwKSBtb2R1bGUuY2hpbGRyZW4uc3BsaWNlKGlkeCwgMSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSxcblx0XHRhcHBseTogZnVuY3Rpb24gKHJlcG9ydEVycm9yKSB7XG5cdFx0XHQvLyBpbnNlcnQgbmV3IGNvZGVcblx0XHRcdGZvciAodmFyIHVwZGF0ZU1vZHVsZUlkIGluIGFwcGxpZWRVcGRhdGUpIHtcblx0XHRcdFx0aWYgKF9fd2VicGFja19yZXF1aXJlX18ubyhhcHBsaWVkVXBkYXRlLCB1cGRhdGVNb2R1bGVJZCkpIHtcblx0XHRcdFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLm1bdXBkYXRlTW9kdWxlSWRdID0gYXBwbGllZFVwZGF0ZVt1cGRhdGVNb2R1bGVJZF07XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gcnVuIG5ldyBydW50aW1lIG1vZHVsZXNcblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgY3VycmVudFVwZGF0ZVJ1bnRpbWUubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0Y3VycmVudFVwZGF0ZVJ1bnRpbWVbaV0oX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIGNhbGwgYWNjZXB0IGhhbmRsZXJzXG5cdFx0XHRmb3IgKHZhciBvdXRkYXRlZE1vZHVsZUlkIGluIG91dGRhdGVkRGVwZW5kZW5jaWVzKSB7XG5cdFx0XHRcdGlmIChfX3dlYnBhY2tfcmVxdWlyZV9fLm8ob3V0ZGF0ZWREZXBlbmRlbmNpZXMsIG91dGRhdGVkTW9kdWxlSWQpKSB7XG5cdFx0XHRcdFx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19yZXF1aXJlX18uY1tvdXRkYXRlZE1vZHVsZUlkXTtcblx0XHRcdFx0XHRpZiAobW9kdWxlKSB7XG5cdFx0XHRcdFx0XHRtb2R1bGVPdXRkYXRlZERlcGVuZGVuY2llcyA9XG5cdFx0XHRcdFx0XHRcdG91dGRhdGVkRGVwZW5kZW5jaWVzW291dGRhdGVkTW9kdWxlSWRdO1xuXHRcdFx0XHRcdFx0dmFyIGNhbGxiYWNrcyA9IFtdO1xuXHRcdFx0XHRcdFx0dmFyIGVycm9ySGFuZGxlcnMgPSBbXTtcblx0XHRcdFx0XHRcdHZhciBkZXBlbmRlbmNpZXNGb3JDYWxsYmFja3MgPSBbXTtcblx0XHRcdFx0XHRcdGZvciAodmFyIGogPSAwOyBqIDwgbW9kdWxlT3V0ZGF0ZWREZXBlbmRlbmNpZXMubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0XHRcdFx0dmFyIGRlcGVuZGVuY3kgPSBtb2R1bGVPdXRkYXRlZERlcGVuZGVuY2llc1tqXTtcblx0XHRcdFx0XHRcdFx0dmFyIGFjY2VwdENhbGxiYWNrID1cblx0XHRcdFx0XHRcdFx0XHRtb2R1bGUuaG90Ll9hY2NlcHRlZERlcGVuZGVuY2llc1tkZXBlbmRlbmN5XTtcblx0XHRcdFx0XHRcdFx0dmFyIGVycm9ySGFuZGxlciA9XG5cdFx0XHRcdFx0XHRcdFx0bW9kdWxlLmhvdC5fYWNjZXB0ZWRFcnJvckhhbmRsZXJzW2RlcGVuZGVuY3ldO1xuXHRcdFx0XHRcdFx0XHRpZiAoYWNjZXB0Q2FsbGJhY2spIHtcblx0XHRcdFx0XHRcdFx0XHRpZiAoY2FsbGJhY2tzLmluZGV4T2YoYWNjZXB0Q2FsbGJhY2spICE9PSAtMSkgY29udGludWU7XG5cdFx0XHRcdFx0XHRcdFx0Y2FsbGJhY2tzLnB1c2goYWNjZXB0Q2FsbGJhY2spO1xuXHRcdFx0XHRcdFx0XHRcdGVycm9ySGFuZGxlcnMucHVzaChlcnJvckhhbmRsZXIpO1xuXHRcdFx0XHRcdFx0XHRcdGRlcGVuZGVuY2llc0ZvckNhbGxiYWNrcy5wdXNoKGRlcGVuZGVuY3kpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRmb3IgKHZhciBrID0gMDsgayA8IGNhbGxiYWNrcy5sZW5ndGg7IGsrKykge1xuXHRcdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHRcdGNhbGxiYWNrc1trXS5jYWxsKG51bGwsIG1vZHVsZU91dGRhdGVkRGVwZW5kZW5jaWVzKTtcblx0XHRcdFx0XHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKHR5cGVvZiBlcnJvckhhbmRsZXJzW2tdID09PSBcImZ1bmN0aW9uXCIpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGVycm9ySGFuZGxlcnNba10oZXJyLCB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0bW9kdWxlSWQ6IG91dGRhdGVkTW9kdWxlSWQsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZGVwZW5kZW5jeUlkOiBkZXBlbmRlbmNpZXNGb3JDYWxsYmFja3Nba11cblx0XHRcdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdFx0XHR9IGNhdGNoIChlcnIyKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChvcHRpb25zLm9uRXJyb3JlZCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdG9wdGlvbnMub25FcnJvcmVkKHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwiYWNjZXB0LWVycm9yLWhhbmRsZXItZXJyb3JlZFwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0bW9kdWxlSWQ6IG91dGRhdGVkTW9kdWxlSWQsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRkZXBlbmRlbmN5SWQ6IGRlcGVuZGVuY2llc0ZvckNhbGxiYWNrc1trXSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGVycm9yOiBlcnIyLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0b3JpZ2luYWxFcnJvcjogZXJyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKCFvcHRpb25zLmlnbm9yZUVycm9yZWQpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXBvcnRFcnJvcihlcnIyKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXBvcnRFcnJvcihlcnIpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChvcHRpb25zLm9uRXJyb3JlZCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRvcHRpb25zLm9uRXJyb3JlZCh7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJhY2NlcHQtZXJyb3JlZFwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdG1vZHVsZUlkOiBvdXRkYXRlZE1vZHVsZUlkLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGRlcGVuZGVuY3lJZDogZGVwZW5kZW5jaWVzRm9yQ2FsbGJhY2tzW2tdLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGVycm9yOiBlcnJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoIW9wdGlvbnMuaWdub3JlRXJyb3JlZCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRyZXBvcnRFcnJvcihlcnIpO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBMb2FkIHNlbGYgYWNjZXB0ZWQgbW9kdWxlc1xuXHRcdFx0Zm9yICh2YXIgbyA9IDA7IG8gPCBvdXRkYXRlZFNlbGZBY2NlcHRlZE1vZHVsZXMubGVuZ3RoOyBvKyspIHtcblx0XHRcdFx0dmFyIGl0ZW0gPSBvdXRkYXRlZFNlbGZBY2NlcHRlZE1vZHVsZXNbb107XG5cdFx0XHRcdHZhciBtb2R1bGVJZCA9IGl0ZW0ubW9kdWxlO1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdGl0ZW0ucmVxdWlyZShtb2R1bGVJZCk7XG5cdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRcdGlmICh0eXBlb2YgaXRlbS5lcnJvckhhbmRsZXIgPT09IFwiZnVuY3Rpb25cIikge1xuXHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0aXRlbS5lcnJvckhhbmRsZXIoZXJyLCB7XG5cdFx0XHRcdFx0XHRcdFx0bW9kdWxlSWQ6IG1vZHVsZUlkLFxuXHRcdFx0XHRcdFx0XHRcdG1vZHVsZTogX193ZWJwYWNrX3JlcXVpcmVfXy5jW21vZHVsZUlkXVxuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdH0gY2F0Y2ggKGVycjIpIHtcblx0XHRcdFx0XHRcdFx0aWYgKG9wdGlvbnMub25FcnJvcmVkKSB7XG5cdFx0XHRcdFx0XHRcdFx0b3B0aW9ucy5vbkVycm9yZWQoe1xuXHRcdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJzZWxmLWFjY2VwdC1lcnJvci1oYW5kbGVyLWVycm9yZWRcIixcblx0XHRcdFx0XHRcdFx0XHRcdG1vZHVsZUlkOiBtb2R1bGVJZCxcblx0XHRcdFx0XHRcdFx0XHRcdGVycm9yOiBlcnIyLFxuXHRcdFx0XHRcdFx0XHRcdFx0b3JpZ2luYWxFcnJvcjogZXJyXG5cdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0aWYgKCFvcHRpb25zLmlnbm9yZUVycm9yZWQpIHtcblx0XHRcdFx0XHRcdFx0XHRyZXBvcnRFcnJvcihlcnIyKTtcblx0XHRcdFx0XHRcdFx0XHRyZXBvcnRFcnJvcihlcnIpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGlmIChvcHRpb25zLm9uRXJyb3JlZCkge1xuXHRcdFx0XHRcdFx0XHRvcHRpb25zLm9uRXJyb3JlZCh7XG5cdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJzZWxmLWFjY2VwdC1lcnJvcmVkXCIsXG5cdFx0XHRcdFx0XHRcdFx0bW9kdWxlSWQ6IG1vZHVsZUlkLFxuXHRcdFx0XHRcdFx0XHRcdGVycm9yOiBlcnJcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRpZiAoIW9wdGlvbnMuaWdub3JlRXJyb3JlZCkge1xuXHRcdFx0XHRcdFx0XHRyZXBvcnRFcnJvcihlcnIpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gb3V0ZGF0ZWRNb2R1bGVzO1xuXHRcdH1cblx0fTtcbn1cbl9fd2VicGFja19yZXF1aXJlX18uaG1ySS5qc29ucCA9IGZ1bmN0aW9uIChtb2R1bGVJZCwgYXBwbHlIYW5kbGVycykge1xuXHRpZiAoIWN1cnJlbnRVcGRhdGUpIHtcblx0XHRjdXJyZW50VXBkYXRlID0ge307XG5cdFx0Y3VycmVudFVwZGF0ZVJ1bnRpbWUgPSBbXTtcblx0XHRjdXJyZW50VXBkYXRlUmVtb3ZlZENodW5rcyA9IFtdO1xuXHRcdGFwcGx5SGFuZGxlcnMucHVzaChhcHBseUhhbmRsZXIpO1xuXHR9XG5cdGlmICghX193ZWJwYWNrX3JlcXVpcmVfXy5vKGN1cnJlbnRVcGRhdGUsIG1vZHVsZUlkKSkge1xuXHRcdGN1cnJlbnRVcGRhdGVbbW9kdWxlSWRdID0gX193ZWJwYWNrX3JlcXVpcmVfXy5tW21vZHVsZUlkXTtcblx0fVxufTtcbl9fd2VicGFja19yZXF1aXJlX18uaG1yQy5qc29ucCA9IGZ1bmN0aW9uIChcblx0Y2h1bmtJZHMsXG5cdHJlbW92ZWRDaHVua3MsXG5cdHJlbW92ZWRNb2R1bGVzLFxuXHRwcm9taXNlcyxcblx0YXBwbHlIYW5kbGVycyxcblx0dXBkYXRlZE1vZHVsZXNMaXN0XG4pIHtcblx0YXBwbHlIYW5kbGVycy5wdXNoKGFwcGx5SGFuZGxlcik7XG5cdGN1cnJlbnRVcGRhdGVDaHVua3MgPSB7fTtcblx0Y3VycmVudFVwZGF0ZVJlbW92ZWRDaHVua3MgPSByZW1vdmVkQ2h1bmtzO1xuXHRjdXJyZW50VXBkYXRlID0gcmVtb3ZlZE1vZHVsZXMucmVkdWNlKGZ1bmN0aW9uIChvYmosIGtleSkge1xuXHRcdG9ialtrZXldID0gZmFsc2U7XG5cdFx0cmV0dXJuIG9iajtcblx0fSwge30pO1xuXHRjdXJyZW50VXBkYXRlUnVudGltZSA9IFtdO1xuXHRjaHVua0lkcy5mb3JFYWNoKGZ1bmN0aW9uIChjaHVua0lkKSB7XG5cdFx0aWYgKFxuXHRcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vKGluc3RhbGxlZENodW5rcywgY2h1bmtJZCkgJiZcblx0XHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXSAhPT0gdW5kZWZpbmVkXG5cdFx0KSB7XG5cdFx0XHRwcm9taXNlcy5wdXNoKGxvYWRVcGRhdGVDaHVuayhjaHVua0lkLCB1cGRhdGVkTW9kdWxlc0xpc3QpKTtcblx0XHRcdGN1cnJlbnRVcGRhdGVDaHVua3NbY2h1bmtJZF0gPSB0cnVlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRjdXJyZW50VXBkYXRlQ2h1bmtzW2NodW5rSWRdID0gZmFsc2U7XG5cdFx0fVxuXHR9KTtcblx0aWYgKF9fd2VicGFja19yZXF1aXJlX18uZikge1xuXHRcdF9fd2VicGFja19yZXF1aXJlX18uZi5qc29ucEhtciA9IGZ1bmN0aW9uIChjaHVua0lkLCBwcm9taXNlcykge1xuXHRcdFx0aWYgKFxuXHRcdFx0XHRjdXJyZW50VXBkYXRlQ2h1bmtzICYmXG5cdFx0XHRcdF9fd2VicGFja19yZXF1aXJlX18ubyhjdXJyZW50VXBkYXRlQ2h1bmtzLCBjaHVua0lkKSAmJlxuXHRcdFx0XHQhY3VycmVudFVwZGF0ZUNodW5rc1tjaHVua0lkXVxuXHRcdFx0KSB7XG5cdFx0XHRcdHByb21pc2VzLnB1c2gobG9hZFVwZGF0ZUNodW5rKGNodW5rSWQpKTtcblx0XHRcdFx0Y3VycmVudFVwZGF0ZUNodW5rc1tjaHVua0lkXSA9IHRydWU7XG5cdFx0XHR9XG5cdFx0fTtcblx0fVxufTtcblxuX193ZWJwYWNrX3JlcXVpcmVfXy5obXJNID0gKCkgPT4ge1xuXHRpZiAodHlwZW9mIGZldGNoID09PSBcInVuZGVmaW5lZFwiKSB0aHJvdyBuZXcgRXJyb3IoXCJObyBicm93c2VyIHN1cHBvcnQ6IG5lZWQgZmV0Y2ggQVBJXCIpO1xuXHRyZXR1cm4gZmV0Y2goX193ZWJwYWNrX3JlcXVpcmVfXy5wICsgX193ZWJwYWNrX3JlcXVpcmVfXy5obXJGKCkpLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG5cdFx0aWYocmVzcG9uc2Uuc3RhdHVzID09PSA0MDQpIHJldHVybjsgLy8gbm8gdXBkYXRlIGF2YWlsYWJsZVxuXHRcdGlmKCFyZXNwb25zZS5vaykgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGZldGNoIHVwZGF0ZSBtYW5pZmVzdCBcIiArIHJlc3BvbnNlLnN0YXR1c1RleHQpO1xuXHRcdHJldHVybiByZXNwb25zZS5qc29uKCk7XG5cdH0pO1xufTtcblxuLy8gbm8gb24gY2h1bmtzIGxvYWRlZFxuXG4vLyBubyBqc29ucCBmdW5jdGlvbiIsIi8vIG1vZHVsZSBjYWNoZSBhcmUgdXNlZCBzbyBlbnRyeSBpbmxpbmluZyBpcyBkaXNhYmxlZFxuLy8gc3RhcnR1cFxuLy8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG52YXIgX193ZWJwYWNrX2V4cG9ydHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTMyKTtcbiJdLCJuYW1lcyI6WyJpblByb2dyZXNzIiwiZGF0YVdlYnBhY2tQcmVmaXgiLCJzdHJpbmdUb0J5dGVBcnJheSQxIiwic3RyIiwib3V0IiwicCIsImkiLCJsZW5ndGgiLCJjIiwiY2hhckNvZGVBdCIsImJhc2U2NCIsImJ5dGVUb0NoYXJNYXBfIiwiY2hhclRvQnl0ZU1hcF8iLCJieXRlVG9DaGFyTWFwV2ViU2FmZV8iLCJjaGFyVG9CeXRlTWFwV2ViU2FmZV8iLCJFTkNPREVEX1ZBTFNfQkFTRSIsIkVOQ09ERURfVkFMUyIsInRoaXMiLCJFTkNPREVEX1ZBTFNfV0VCU0FGRSIsIkhBU19OQVRJVkVfU1VQUE9SVCIsImF0b2IiLCJlbmNvZGVCeXRlQXJyYXkiLCJpbnB1dCIsIndlYlNhZmUiLCJBcnJheSIsImlzQXJyYXkiLCJFcnJvciIsImluaXRfIiwiYnl0ZVRvQ2hhck1hcCIsIm91dHB1dCIsImJ5dGUxIiwiaGF2ZUJ5dGUyIiwiYnl0ZTIiLCJoYXZlQnl0ZTMiLCJieXRlMyIsIm91dEJ5dGUxIiwib3V0Qnl0ZTIiLCJvdXRCeXRlMyIsIm91dEJ5dGU0IiwicHVzaCIsImpvaW4iLCJlbmNvZGVTdHJpbmciLCJidG9hIiwiZGVjb2RlU3RyaW5nIiwiYnl0ZXMiLCJwb3MiLCJjMSIsIlN0cmluZyIsImZyb21DaGFyQ29kZSIsImMyIiwidSIsImMzIiwiYnl0ZUFycmF5VG9TdHJpbmciLCJkZWNvZGVTdHJpbmdUb0J5dGVBcnJheSIsImNoYXJUb0J5dGVNYXAiLCJjaGFyQXQiLCJieXRlNCIsIkRlY29kZUJhc2U2NFN0cmluZ0Vycm9yIiwiY29uc3RydWN0b3IiLCJzdXBlciIsImFyZ3VtZW50cyIsIm5hbWUiLCJiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZyIsInV0ZjhCeXRlcyIsImJhc2U2NEVuY29kZSIsInJlcGxhY2UiLCJnZXREZWZhdWx0cyIsInNlbGYiLCJ3aW5kb3ciLCJnIiwiZ2V0R2xvYmFsIiwiX19GSVJFQkFTRV9ERUZBVUxUU19fIiwicHJvY2VzcyIsImVudiIsImRlZmF1bHRzSnNvblN0cmluZyIsIkpTT04iLCJwYXJzZSIsImdldERlZmF1bHRzRnJvbUVudlZhcmlhYmxlIiwiZG9jdW1lbnQiLCJtYXRjaCIsImNvb2tpZSIsImUiLCJkZWNvZGVkIiwiY29uc29sZSIsImVycm9yIiwiYmFzZTY0RGVjb2RlIiwiZ2V0RGVmYXVsdHNGcm9tQ29va2llIiwiaW5mbyIsImdldERlZmF1bHRBcHBDb25maWciLCJfYSIsImNvbmZpZyIsIkRlZmVycmVkIiwicmVqZWN0IiwicmVzb2x2ZSIsInByb21pc2UiLCJQcm9taXNlIiwid3JhcENhbGxiYWNrIiwiY2FsbGJhY2siLCJ2YWx1ZSIsImNhdGNoIiwiRmlyZWJhc2VFcnJvciIsImNvZGUiLCJtZXNzYWdlIiwiY3VzdG9tRGF0YSIsIk9iamVjdCIsInNldFByb3RvdHlwZU9mIiwicHJvdG90eXBlIiwiY2FwdHVyZVN0YWNrVHJhY2UiLCJFcnJvckZhY3RvcnkiLCJjcmVhdGUiLCJzZXJ2aWNlIiwic2VydmljZU5hbWUiLCJlcnJvcnMiLCJkYXRhIiwiZnVsbENvZGUiLCJ0ZW1wbGF0ZSIsIlBBVFRFUk4iLCJfIiwia2V5IiwicmVwbGFjZVRlbXBsYXRlIiwiZnVsbE1lc3NhZ2UiLCJhIiwiYiIsImFLZXlzIiwia2V5cyIsImJLZXlzIiwiayIsImluY2x1ZGVzIiwiYVByb3AiLCJiUHJvcCIsImlzT2JqZWN0IiwidGhpbmciLCJfZGVsZWdhdGUiLCJDb21wb25lbnQiLCJpbnN0YW5jZUZhY3RvcnkiLCJ0eXBlIiwibXVsdGlwbGVJbnN0YW5jZXMiLCJzZXJ2aWNlUHJvcHMiLCJpbnN0YW50aWF0aW9uTW9kZSIsIm9uSW5zdGFuY2VDcmVhdGVkIiwic2V0SW5zdGFudGlhdGlvbk1vZGUiLCJtb2RlIiwic2V0TXVsdGlwbGVJbnN0YW5jZXMiLCJzZXRTZXJ2aWNlUHJvcHMiLCJwcm9wcyIsInNldEluc3RhbmNlQ3JlYXRlZENhbGxiYWNrIiwiREVGQVVMVF9FTlRSWV9OQU1FIiwiUHJvdmlkZXIiLCJjb250YWluZXIiLCJjb21wb25lbnQiLCJpbnN0YW5jZXMiLCJNYXAiLCJpbnN0YW5jZXNEZWZlcnJlZCIsImluc3RhbmNlc09wdGlvbnMiLCJvbkluaXRDYWxsYmFja3MiLCJnZXQiLCJpZGVudGlmaWVyIiwibm9ybWFsaXplZElkZW50aWZpZXIiLCJub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIiLCJoYXMiLCJkZWZlcnJlZCIsInNldCIsImlzSW5pdGlhbGl6ZWQiLCJzaG91bGRBdXRvSW5pdGlhbGl6ZSIsImluc3RhbmNlIiwiZ2V0T3JJbml0aWFsaXplU2VydmljZSIsImluc3RhbmNlSWRlbnRpZmllciIsImdldEltbWVkaWF0ZSIsIm9wdGlvbnMiLCJvcHRpb25hbCIsImdldENvbXBvbmVudCIsInNldENvbXBvbmVudCIsImlzQ29tcG9uZW50RWFnZXIiLCJpbnN0YW5jZURlZmVycmVkIiwiZW50cmllcyIsImNsZWFySW5zdGFuY2UiLCJkZWxldGUiLCJzZXJ2aWNlcyIsImZyb20iLCJ2YWx1ZXMiLCJhbGwiLCJmaWx0ZXIiLCJtYXAiLCJJTlRFUk5BTCIsIl9kZWxldGUiLCJpc0NvbXBvbmVudFNldCIsImdldE9wdGlvbnMiLCJpbml0aWFsaXplIiwib3B0cyIsIm9uSW5pdCIsImV4aXN0aW5nQ2FsbGJhY2tzIiwiU2V0IiwiYWRkIiwiZXhpc3RpbmdJbnN0YW5jZSIsImludm9rZU9uSW5pdENhbGxiYWNrcyIsImNhbGxiYWNrcyIsInVuZGVmaW5lZCIsIkNvbXBvbmVudENvbnRhaW5lciIsInByb3ZpZGVycyIsImFkZENvbXBvbmVudCIsInByb3ZpZGVyIiwiZ2V0UHJvdmlkZXIiLCJhZGRPck92ZXJ3cml0ZUNvbXBvbmVudCIsImdldFByb3ZpZGVycyIsIkxvZ0xldmVsIiwibGV2ZWxTdHJpbmdUb0VudW0iLCJERUJVRyIsIlZFUkJPU0UiLCJJTkZPIiwiV0FSTiIsIkVSUk9SIiwiU0lMRU5UIiwiZGVmYXVsdExvZ0xldmVsIiwiQ29uc29sZU1ldGhvZCIsImRlZmF1bHRMb2dIYW5kbGVyIiwibG9nVHlwZSIsImFyZ3MiLCJsb2dMZXZlbCIsIm5vdyIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsIm1ldGhvZCIsIkxvZ2dlciIsIl9sb2dMZXZlbCIsIl9sb2dIYW5kbGVyIiwiX3VzZXJMb2dIYW5kbGVyIiwidmFsIiwiVHlwZUVycm9yIiwic2V0TG9nTGV2ZWwiLCJsb2dIYW5kbGVyIiwidXNlckxvZ0hhbmRsZXIiLCJkZWJ1ZyIsImxvZyIsIndhcm4iLCJpbnN0YW5jZU9mQW55Iiwib2JqZWN0IiwiY29uc3RydWN0b3JzIiwic29tZSIsImlkYlByb3h5YWJsZVR5cGVzIiwiY3Vyc29yQWR2YW5jZU1ldGhvZHMiLCJjdXJzb3JSZXF1ZXN0TWFwIiwiV2Vha01hcCIsInRyYW5zYWN0aW9uRG9uZU1hcCIsInRyYW5zYWN0aW9uU3RvcmVOYW1lc01hcCIsInRyYW5zZm9ybUNhY2hlIiwicmV2ZXJzZVRyYW5zZm9ybUNhY2hlIiwiaWRiUHJveHlUcmFwcyIsInRhcmdldCIsInByb3AiLCJyZWNlaXZlciIsIklEQlRyYW5zYWN0aW9uIiwib2JqZWN0U3RvcmVOYW1lcyIsIm9iamVjdFN0b3JlIiwidHJhbnNmb3JtQ2FjaGFibGVWYWx1ZSIsImZ1bmMiLCJJREJEYXRhYmFzZSIsInRyYW5zYWN0aW9uIiwiSURCQ3Vyc29yIiwiYWR2YW5jZSIsImNvbnRpbnVlIiwiY29udGludWVQcmltYXJ5S2V5IiwiYXBwbHkiLCJ1bndyYXAiLCJzdG9yZU5hbWVzIiwidHgiLCJjYWxsIiwic29ydCIsImRvbmUiLCJ1bmxpc3RlbiIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJjb21wbGV0ZSIsIkRPTUV4Y2VwdGlvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJjYWNoZURvbmVQcm9taXNlRm9yVHJhbnNhY3Rpb24iLCJJREJPYmplY3RTdG9yZSIsIklEQkluZGV4IiwiUHJveHkiLCJJREJSZXF1ZXN0IiwicmVxdWVzdCIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJ0aGVuIiwicHJvbWlzaWZ5UmVxdWVzdCIsIm5ld1ZhbHVlIiwicmVhZE1ldGhvZHMiLCJ3cml0ZU1ldGhvZHMiLCJjYWNoZWRNZXRob2RzIiwiZ2V0TWV0aG9kIiwidGFyZ2V0RnVuY05hbWUiLCJ1c2VJbmRleCIsImlzV3JpdGUiLCJhc3luYyIsInN0b3JlTmFtZSIsInN0b3JlIiwiaW5kZXgiLCJzaGlmdCIsIm9sZFRyYXBzIiwiUGxhdGZvcm1Mb2dnZXJTZXJ2aWNlSW1wbCIsImdldFBsYXRmb3JtSW5mb1N0cmluZyIsImlzVmVyc2lvblNlcnZpY2VQcm92aWRlciIsImxpYnJhcnkiLCJ2ZXJzaW9uIiwibG9nU3RyaW5nIiwibmFtZSRvIiwidmVyc2lvbiQxIiwibG9nZ2VyIiwiUExBVEZPUk1fTE9HX1NUUklORyIsIl9hcHBzIiwiX2NvbXBvbmVudHMiLCJfYWRkQ29tcG9uZW50IiwiYXBwIiwiX3JlZ2lzdGVyQ29tcG9uZW50IiwiY29tcG9uZW50TmFtZSIsIkVSUk9SX0ZBQ1RPUlkiLCJGaXJlYmFzZUFwcEltcGwiLCJfaXNEZWxldGVkIiwiX29wdGlvbnMiLCJhc3NpZ24iLCJfY29uZmlnIiwiX25hbWUiLCJfYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkIiwiYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkIiwiX2NvbnRhaW5lciIsImNoZWNrRGVzdHJveWVkIiwiaXNEZWxldGVkIiwiYXBwTmFtZSIsImluaXRpYWxpemVBcHAiLCJyYXdDb25maWciLCJleGlzdGluZ0FwcCIsIm5ld0FwcCIsInJlZ2lzdGVyVmVyc2lvbiIsImxpYnJhcnlLZXlPck5hbWUiLCJ2YXJpYW50IiwibGlicmFyeU1pc21hdGNoIiwidmVyc2lvbk1pc21hdGNoIiwid2FybmluZyIsIkRCX05BTUUiLCJEQl9WRVJTSU9OIiwiU1RPUkVfTkFNRSIsImRiUHJvbWlzZSIsImdldERiUHJvbWlzZSIsImJsb2NrZWQiLCJ1cGdyYWRlIiwiYmxvY2tpbmciLCJ0ZXJtaW5hdGVkIiwiaW5kZXhlZERCIiwib3BlbiIsIm9wZW5Qcm9taXNlIiwiZXZlbnQiLCJvbGRWZXJzaW9uIiwibmV3VmVyc2lvbiIsImRiIiwib3BlbkRCIiwiY3JlYXRlT2JqZWN0U3RvcmUiLCJvcmlnaW5hbEVycm9yTWVzc2FnZSIsIndyaXRlSGVhcnRiZWF0c1RvSW5kZXhlZERCIiwiaGVhcnRiZWF0T2JqZWN0IiwicHV0IiwiY29tcHV0ZUtleSIsImlkYkdldEVycm9yIiwiYXBwSWQiLCJIZWFydGJlYXRTZXJ2aWNlSW1wbCIsIl9oZWFydGJlYXRzQ2FjaGUiLCJfc3RvcmFnZSIsIkhlYXJ0YmVhdFN0b3JhZ2VJbXBsIiwiX2hlYXJ0YmVhdHNDYWNoZVByb21pc2UiLCJyZWFkIiwidHJpZ2dlckhlYXJ0YmVhdCIsIl9iIiwiYWdlbnQiLCJkYXRlIiwiZ2V0VVRDRGF0ZVN0cmluZyIsImhlYXJ0YmVhdHMiLCJsYXN0U2VudEhlYXJ0YmVhdERhdGUiLCJzaW5nbGVEYXRlSGVhcnRiZWF0IiwiaGJUaW1lc3RhbXAiLCJ2YWx1ZU9mIiwib3ZlcndyaXRlIiwiZ2V0SGVhcnRiZWF0c0hlYWRlciIsImhlYXJ0YmVhdHNUb1NlbmQiLCJ1bnNlbnRFbnRyaWVzIiwiaGVhcnRiZWF0c0NhY2hlIiwibWF4U2l6ZSIsInNsaWNlIiwiaGVhcnRiZWF0RW50cnkiLCJmaW5kIiwiaGIiLCJkYXRlcyIsImNvdW50Qnl0ZXMiLCJwb3AiLCJleHRyYWN0SGVhcnRiZWF0c0ZvckhlYWRlciIsImhlYWRlclN0cmluZyIsInN0cmluZ2lmeSIsInN1YnN0cmluZyIsIl9jYW5Vc2VJbmRleGVkREJQcm9taXNlIiwicnVuSW5kZXhlZERCRW52aXJvbm1lbnRDaGVjayIsInByZUV4aXN0IiwiREJfQ0hFQ0tfTkFNRSIsIm9uc3VjY2VzcyIsImNsb3NlIiwiZGVsZXRlRGF0YWJhc2UiLCJvbnVwZ3JhZGVuZWVkZWQiLCJvbmVycm9yIiwiaWRiSGVhcnRiZWF0T2JqZWN0IiwicmVhZEhlYXJ0YmVhdHNGcm9tSW5kZXhlZERCIiwiaGVhcnRiZWF0c09iamVjdCIsImV4aXN0aW5nSGVhcnRiZWF0c09iamVjdCIsImNvbW1vbmpzR2xvYmFsIiwiZ2xvYmFsVGhpcyIsImdsb2JhbCIsImVzbSIsImdvb2ciLCJsIiwiYWEiLCJjYSIsIk1hdGgiLCJyYW5kb20iLCJkYSIsImVhIiwiYmluZCIsImZhIiwiZCIsInVuc2hpZnQiLCJxIiwiRnVuY3Rpb24iLCJ0b1N0cmluZyIsImluZGV4T2YiLCJoYSIsInIiLCIkIiwiYWMiLCJmIiwiaCIsIm4iLCJ2IiwicyIsIm8iLCJzYSIsIk4iLCJoYXNPd25Qcm9wZXJ0eSIsImthIiwibWEiLCJuYSIsInciLCJkZWZhdWx0UHJldmVudGVkIiwib2EiLCJkZWZpbmVQcm9wZXJ0eSIsIngiLCJ0ZXN0IiwicGEiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJ5IiwicWEiLCJ6YSIsIkRhIiwidGEiLCJ6IiwidWEiLCJ2YSIsIndhIiwidG9Mb3dlckNhc2UiLCJ4YSIsInlhIiwiZG9jdW1lbnRNb2RlIiwiQWEiLCJCYSIsImV4ZWMiLCJDYSIsInBhcnNlRmxvYXQiLCJwYXJzZUludCIsIkZhIiwiQSIsInJlbGF0ZWRUYXJnZXQiLCJidXR0b24iLCJzY3JlZW5ZIiwic2NyZWVuWCIsImNsaWVudFkiLCJjbGllbnRYIiwibWV0YUtleSIsInNoaWZ0S2V5IiwiYWx0S2V5IiwiY3RybEtleSIsInN0YXRlIiwicG9pbnRlcklkIiwicG9pbnRlclR5cGUiLCJjaGFuZ2VkVG91Y2hlcyIsInNyY0VsZW1lbnQiLCJub2RlTmFtZSIsImZyb21FbGVtZW50IiwidG9FbGVtZW50IiwicGFnZVgiLCJwYWdlWSIsIkdhIiwicHJldmVudERlZmF1bHQiLCJyZXR1cm5WYWx1ZSIsIkhhIiwiSWEiLCJKYSIsImxpc3RlbmVyIiwicHJveHkiLCJzcmMiLCJjYXB0dXJlIiwibGEiLCJpYSIsIk1hIiwiTmEiLCJQYSIsIlFhIiwic3BsaXQiLCJSYSIsIlNhIiwiVWEiLCJzcGxpY2UiLCJUYSIsIlZhIiwiV2EiLCJZYSIsIm9uY2UiLCJaYSIsIiRhIiwiTyIsImFiIiwiYmIiLCJlYiIsImNiIiwiYXR0YWNoRXZlbnQiLCJhZGRMaXN0ZW5lciIsInJlbW92ZUxpc3RlbmVyIiwiUCIsImZiIiwiZ2IiLCJkZXRhY2hFdmVudCIsImhhbmRsZUV2ZW50IiwiQiIsIlMiLCJKIiwiQyIsImliIiwiY29uY2F0IiwidCIsImpiIiwibGIiLCJtYiIsIm5leHQiLCJvYiIsImoiLCJwYiIsInJlc2V0IiwicWIiLCJyYiIsInNldFRpbWVvdXQiLCJzYiIsInRiIiwidmIiLCJ1YiIsIndiIiwieGIiLCJnYSIsIlQiLCJjbGVhclRpbWVvdXQiLCJ5YiIsIk51bWJlciIsInpiIiwibSIsInN0YXJ0IiwiQWIiLCJCYiIsIkNiIiwiRWIiLCJGYiIsIkdiIiwiRCIsIkpiIiwiRWEiLCJFIiwiTGIiLCJNYiIsIk5iIiwiT2IiLCJQYiIsIlNUQVRfRVZFTlQiLCJzdGF0IiwiRiIsIlFiIiwic2l6ZSIsIlJiIiwiU2IiLCJOT19FUlJPUiIsIkRiIiwiVElNRU9VVCIsIkliIiwiVGIiLCJLYiIsIiRiIiwiVWIiLCJWYiIsIldiIiwiWGIiLCJPUEVOIiwiSGIiLCJZYiIsIlpiIiwiYmMiLCJXIiwiVSIsImNjIiwiViIsIkkiLCJMIiwiRyIsIlkiLCJNIiwiYmEiLCJLIiwiZGMiLCJYTUxIdHRwUmVxdWVzdCIsImVjIiwiZmMiLCJnYyIsImhjIiwiaWMiLCJqYyIsImtjIiwibGMiLCJuYiIsIm9jIiwicmMiLCJ1YyIsInFjIiwidmMiLCJwYyIsImlzTmFOIiwid2MiLCJuYyIsIkgiLCJzYyIsImFib3J0IiwieGMiLCJ5YyIsInpjIiwiQWMiLCJCYyIsInJhIiwiS2EiLCJMYSIsImdldFJlc3BvbnNlSGVhZGVyIiwiQ2MiLCJEYyIsIkVjIiwiRmMiLCJHYyIsIkhjIiwiS2MiLCJmb3JFYWNoIiwiWiIsIkpjIiwiSWMiLCJqYSIsIm1jIiwiVGV4dERlY29kZXIiLCJkZWNvZGUiLCJzdHJlYW0iLCJnZXRBbGxSZXNwb25zZUhlYWRlcnMiLCJ0cmltIiwiT2EiLCJ0YyIsImNhbmNlbCIsIkxjIiwiUmVnRXhwIiwiTmMiLCJPYyIsIlBjIiwiUWMiLCJSYyIsIiRjIiwiWGMiLCJTYyIsIlljIiwiZmxvb3IiLCJhYnMiLCJkZWNvZGVVUkkiLCJkZWNvZGVVUklDb21wb25lbnQiLCJlbmNvZGVVUkkiLCJaYyIsIlRjIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiVWMiLCJWYyIsIldjIiwiTWMiLCJhZCIsImJkIiwiY2QiLCJkZCIsIlBlcmZvcm1hbmNlTmF2aWdhdGlvblRpbWluZyIsInBlcmZvcm1hbmNlIiwiZ2V0RW50cmllc0J5VHlwZSIsIm5leHRIb3BQcm90b2NvbCIsImVkIiwiZmQiLCJjbGVhciIsImdkIiwiaGQiLCJpZCIsImtkIiwib25sb2FkIiwib25hYm9ydCIsIm9udGltZW91dCIsImxkIiwibWQiLCJyZWFkeVN0YXRlIiwibmQiLCJzdGF0dXMiLCJyZXNwb25zZVR5cGUiLCJyZXNwb25zZVRleHQiLCJyZXNwb25zZSIsInN0YXR1c1RleHQiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJIZWFkZXJzIiwicWQiLCJYYSIsInBkIiwib2QiLCJzZW5kIiwiaGVhZGVycyIsImNyZWRlbnRpYWxzIiwiY2FjaGUiLCJib2R5IiwiZmV0Y2giLCJSZXF1ZXN0IiwiYXJyYXlCdWZmZXIiLCJSZWFkYWJsZVN0cmVhbSIsImdldFJlYWRlciIsInRleHQiLCJVaW50OEFycmF5Iiwic2V0UmVxdWVzdEhlYWRlciIsImFwcGVuZCIsInJkIiwic2QiLCJ0ZCIsInVkIiwidmQiLCJ5ZCIsInpkIiwiQWQiLCJsb2NhdGlvbiIsInByb3RvY29sIiwid2QiLCJtb3pSZXNwb25zZUFycmF5QnVmZmVyIiwiQmQiLCJDZCIsIkRkIiwiaW50ZXJuYWxDaGFubmVsUGFyYW1zIiwiRWQiLCJ4bWxIdHRwRmFjdG9yeSIsInVzZUZldGNoU3RyZWFtcyIsInN1cHBvcnRzQ3Jvc3NEb21haW5YaHIiLCJjb25jdXJyZW50UmVxdWVzdExpbWl0IiwiZmFzdEhhbmRzaGFrZSIsImVuY29kZUluaXRNZXNzYWdlSGVhZGVycyIsImZvcmNlTG9uZ1BvbGxpbmciLCJkZXRlY3RCdWZmZXJpbmdQcm94eSIsImxvbmdQb2xsaW5nVGltZW91dCIsIkZkIiwiR2QiLCJzZW5kQmVhY29uIiwiSW1hZ2UiLCJIZCIsIkxkIiwiS2QiLCJyb3VuZCIsIm1pbiIsIm1heCIsIkpkIiwiTWQiLCJJZCIsImlzQWN0aXZlIiwiamQiLCJob3N0bmFtZSIsInBvcnQiLCJOZCIsIk9kIiwiUSIsIm1lc3NhZ2VVcmxQYXJhbXMiLCJtZXNzYWdlSGVhZGVycyIsImNsaWVudFByb3RvY29sSGVhZGVyUmVxdWlyZWQiLCJpbml0TWVzc2FnZUhlYWRlcnMiLCJtZXNzYWdlQ29udGVudFR5cGUiLCJzZW5kUmF3SnNvbiIsImh0dHBTZXNzaW9uSWRQYXJhbSIsIlIiLCJQZCIsIl9faGVhZGVyc19fIiwic3RhdHVzQ29kZSIsIl9fc3RhdHVzX18iLCJfX3NtX18iLCJRZCIsImJsb2NrU2l6ZSIsIlNkIiwidG9VcHBlckNhc2UiLCJnZXRQcm90b3R5cGVPZiIsIkZvcm1EYXRhIiwid2l0aENyZWRlbnRpYWxzIiwidGltZW91dCIsInhkIiwia2IiLCJfX2RhdGFfXyIsIlRkIiwiaXNGaW5pdGUiLCJVZCIsIldkIiwiWGQiLCJYIiwiWmQiLCIkZCIsImFlIiwiWWQiLCJiZSIsImNlaWwiLCJMTjIiLCJwb3ciLCJhbmQiLCJvciIsInhvciIsImNyZWF0ZVdlYkNoYW5uZWwiLCJIVFRQX0VSUk9SIiwiQ09NUExFVEUiLCJFdmVudFR5cGUiLCJDTE9TRSIsIk1FU1NBR0UiLCJsaXN0ZW4iLCJsaXN0ZW5PbmNlIiwiZ2V0TGFzdEVycm9yIiwiZ2V0TGFzdEVycm9yQ29kZSIsImdldFN0YXR1cyIsImdldFJlc3BvbnNlSnNvbiIsImdldFJlc3BvbnNlVGV4dCIsInNldFdpdGhDcmVkZW50aWFscyIsImRpZ2VzdCIsInVwZGF0ZSIsIm11bHRpcGx5IiwibW9kdWxvIiwiY29tcGFyZSIsInRvTnVtYmVyIiwiZ2V0Qml0cyIsImZyb21OdW1iZXIiLCJmcm9tU3RyaW5nIiwiVmQiLCJjcmVhdGVXZWJDaGFubmVsVHJhbnNwb3J0IiwiZ2V0U3RhdEV2ZW50VGFyZ2V0IiwiRXJyb3JDb2RlIiwiRXZlbnQiLCJTdGF0IiwiUFJPWFkiLCJOT1BST1hZIiwiV2ViQ2hhbm5lbCIsIkZldGNoWG1sSHR0cEZhY3RvcnkiLCJYaHJJbyIsIk1kNSIsIkludGVnZXIiLCJVc2VyIiwidWlkIiwiaXNBdXRoZW50aWNhdGVkIiwidG9LZXkiLCJpc0VxdWFsIiwiVU5BVVRIRU5USUNBVEVEIiwiR09PR0xFX0NSRURFTlRJQUxTIiwiRklSU1RfUEFSVFkiLCJNT0NLX1VTRVIiLCJfX1BSSVZBVEVfZ2V0TG9nTGV2ZWwiLCJfX1BSSVZBVEVfbG9nRGVidWciLCJfX1BSSVZBVEVfYXJnVG9TdHJpbmciLCJfX1BSSVZBVEVfbG9nRXJyb3IiLCJfX1BSSVZBVEVfbG9nV2FybiIsImZhaWwiLCJfX1BSSVZBVEVfaGFyZEFzc2VydCIsIl9fUFJJVkFURV9kZWJ1Z0Nhc3QiLCJPSyIsIkNBTkNFTExFRCIsIlVOS05PV04iLCJJTlZBTElEX0FSR1VNRU5UIiwiREVBRExJTkVfRVhDRUVERUQiLCJOT1RfRk9VTkQiLCJBTFJFQURZX0VYSVNUUyIsIlBFUk1JU1NJT05fREVOSUVEIiwiUkVTT1VSQ0VfRVhIQVVTVEVEIiwiRkFJTEVEX1BSRUNPTkRJVElPTiIsIkFCT1JURUQiLCJPVVRfT0ZfUkFOR0UiLCJVTklNUExFTUVOVEVEIiwiVU5BVkFJTEFCTEUiLCJEQVRBX0xPU1MiLCJGaXJlc3RvcmVFcnJvciIsIl9fUFJJVkFURV9EZWZlcnJlZCIsIl9fUFJJVkFURV9PQXV0aFRva2VuIiwidXNlciIsIl9fUFJJVkFURV9FbXB0eUF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyIiwiZ2V0VG9rZW4iLCJpbnZhbGlkYXRlVG9rZW4iLCJlbnF1ZXVlUmV0cnlhYmxlIiwic2h1dGRvd24iLCJfX1BSSVZBVEVfRW11bGF0b3JBdXRoQ3JlZGVudGlhbHNQcm92aWRlciIsInRva2VuIiwiY2hhbmdlTGlzdGVuZXIiLCJfX1BSSVZBVEVfRmlyZWJhc2VBdXRoQ3JlZGVudGlhbHNQcm92aWRlciIsImN1cnJlbnRVc2VyIiwiZm9yY2VSZWZyZXNoIiwiYXV0aCIsIl9fUFJJVkFURV9ndWFyZGVkQ2hhbmdlTGlzdGVuZXIiLCJfX1BSSVZBVEVfYXdhaXROZXh0VG9rZW4iLCJfX1BSSVZBVEVfcmVnaXN0ZXJBdXRoIiwiYWRkQXV0aFRva2VuTGlzdGVuZXIiLCJhY2Nlc3NUb2tlbiIsInJlbW92ZUF1dGhUb2tlbkxpc3RlbmVyIiwiZ2V0VWlkIiwiX19QUklWQVRFX0ZpcnN0UGFydHlUb2tlbiIsIl9fUFJJVkFURV9GaXJzdFBhcnR5QXV0aENyZWRlbnRpYWxzUHJvdmlkZXIiLCJBcHBDaGVja1Rva2VuIiwiX19QUklWQVRFX0ZpcmViYXNlQXBwQ2hlY2tUb2tlblByb3ZpZGVyIiwiYXBwQ2hlY2siLCJvblRva2VuQ2hhbmdlZCIsIl9fUFJJVkFURV9yZWdpc3RlckFwcENoZWNrIiwiYWRkVG9rZW5MaXN0ZW5lciIsInJlbW92ZVRva2VuTGlzdGVuZXIiLCJfX1BSSVZBVEVfcmFuZG9tQnl0ZXMiLCJjcnlwdG8iLCJtc0NyeXB0byIsImdldFJhbmRvbVZhbHVlcyIsIl9fUFJJVkFURV9BdXRvSWQiLCJuZXdJZCIsIl9fUFJJVkFURV9wcmltaXRpdmVDb21wYXJhdG9yIiwiX19QUklWQVRFX2FycmF5RXF1YWxzIiwiZXZlcnkiLCJUaW1lc3RhbXAiLCJzZWNvbmRzIiwibmFub3NlY29uZHMiLCJmcm9tTWlsbGlzIiwiZnJvbURhdGUiLCJnZXRUaW1lIiwidG9EYXRlIiwidG9NaWxsaXMiLCJfY29tcGFyZVRvIiwidG9KU09OIiwicGFkU3RhcnQiLCJTbmFwc2hvdFZlcnNpb24iLCJ0aW1lc3RhbXAiLCJmcm9tVGltZXN0YW1wIiwiY29tcGFyZVRvIiwidG9NaWNyb3NlY29uZHMiLCJ0b1RpbWVzdGFtcCIsIkJhc2VQYXRoIiwic2VnbWVudHMiLCJvZmZzZXQiLCJsZW4iLCJjb21wYXJhdG9yIiwiY2hpbGQiLCJsaW1pdCIsImNvbnN0cnVjdCIsInBvcEZpcnN0IiwicG9wTGFzdCIsImZpcnN0U2VnbWVudCIsImxhc3RTZWdtZW50IiwiaXNFbXB0eSIsImlzUHJlZml4T2YiLCJpc0ltbWVkaWF0ZVBhcmVudE9mIiwidG9BcnJheSIsIlJlc291cmNlUGF0aCIsImNhbm9uaWNhbFN0cmluZyIsImVtcHR5UGF0aCIsIkZpZWxkUGF0aCQxIiwiaXNWYWxpZElkZW50aWZpZXIiLCJpc0tleUZpZWxkIiwia2V5RmllbGQiLCJmcm9tU2VydmVyRm9ybWF0IiwiX19QUklWQVRFX2FkZEN1cnJlbnRTZWdtZW50IiwiRG9jdW1lbnRLZXkiLCJwYXRoIiwiZnJvbVBhdGgiLCJmcm9tTmFtZSIsImVtcHR5IiwiY29sbGVjdGlvbkdyb3VwIiwiaGFzQ29sbGVjdGlvbklkIiwiZ2V0Q29sbGVjdGlvbkdyb3VwIiwiZ2V0Q29sbGVjdGlvblBhdGgiLCJpc0RvY3VtZW50S2V5IiwiZnJvbVNlZ21lbnRzIiwiX19QUklWQVRFX25ld0luZGV4T2Zmc2V0RnJvbURvY3VtZW50IiwiSW5kZXhPZmZzZXQiLCJyZWFkVGltZSIsImRvY3VtZW50S2V5IiwibGFyZ2VzdEJhdGNoSWQiLCJfX1BSSVZBVEVfaW5kZXhPZmZzZXRDb21wYXJhdG9yIiwiUGVyc2lzdGVuY2VUcmFuc2FjdGlvbiIsIm9uQ29tbWl0dGVkTGlzdGVuZXJzIiwiYWRkT25Db21taXR0ZWRMaXN0ZW5lciIsInJhaXNlT25Db21taXR0ZWRFdmVudCIsIl9fUFJJVkFURV9pZ25vcmVJZlByaW1hcnlMZWFzZUxvc3MiLCJQZXJzaXN0ZW5jZVByb21pc2UiLCJuZXh0Q2FsbGJhY2siLCJjYXRjaENhbGxiYWNrIiwiaXNEb25lIiwiY2FsbGJhY2tBdHRhY2hlZCIsIndyYXBGYWlsdXJlIiwid3JhcFN1Y2Nlc3MiLCJ0b1Byb21pc2UiLCJ3cmFwVXNlckZ1bmN0aW9uIiwid2FpdEZvciIsIm1hcEFycmF5IiwiZG9XaGlsZSIsIl9fUFJJVkFURV9pc0luZGV4ZWREYlRyYW5zYWN0aW9uRXJyb3IiLCJfX1BSSVZBVEVfTGlzdGVuU2VxdWVuY2UiLCJwcmV2aW91c1ZhbHVlIiwic2VxdWVuY2VOdW1iZXJIYW5kbGVyIiwic2UiLCJvZSIsIndyaXRlU2VxdWVuY2VOdW1iZXIiLCJfX1BSSVZBVEVfaXNOdWxsT3JVbmRlZmluZWQiLCJfX1BSSVZBVEVfaXNOZWdhdGl2ZVplcm8iLCJfZSIsIl9fUFJJVkFURV9vYmplY3RTaXplIiwiU29ydGVkTWFwIiwicm9vdCIsIkxMUkJOb2RlIiwiRU1QVFkiLCJpbnNlcnQiLCJjb3B5IiwiQkxBQ0siLCJyZW1vdmUiLCJsZWZ0IiwicmlnaHQiLCJtaW5LZXkiLCJtYXhLZXkiLCJpbm9yZGVyVHJhdmVyc2FsIiwicmV2ZXJzZVRyYXZlcnNhbCIsImdldEl0ZXJhdG9yIiwiU29ydGVkTWFwSXRlcmF0b3IiLCJnZXRJdGVyYXRvckZyb20iLCJnZXRSZXZlcnNlSXRlcmF0b3IiLCJnZXRSZXZlcnNlSXRlcmF0b3JGcm9tIiwiaXNSZXZlcnNlIiwibm9kZVN0YWNrIiwiZ2V0TmV4dCIsImhhc05leHQiLCJwZWVrIiwiY29sb3IiLCJSRUQiLCJmaXhVcCIsInJlbW92ZU1pbiIsImlzUmVkIiwibW92ZVJlZExlZnQiLCJyb3RhdGVSaWdodCIsIm1vdmVSZWRSaWdodCIsInJvdGF0ZUxlZnQiLCJjb2xvckZsaXAiLCJjaGVja01heERlcHRoIiwiY2hlY2siLCJTb3J0ZWRTZXQiLCJmaXJzdCIsImxhc3QiLCJmb3JFYWNoSW5SYW5nZSIsImZvckVhY2hXaGlsZSIsImZpcnN0QWZ0ZXJPckVxdWFsIiwiU29ydGVkU2V0SXRlcmF0b3IiLCJ1bmlvbldpdGgiLCJpdGVyIiwiRmllbGRNYXNrIiwiZmllbGRzIiwiY292ZXJzIiwiX19QUklWQVRFX0Jhc2U2NERlY29kZUVycm9yIiwiQnl0ZVN0cmluZyIsImJpbmFyeVN0cmluZyIsImZyb21CYXNlNjRTdHJpbmciLCJmcm9tVWludDhBcnJheSIsIlN5bWJvbCIsIml0ZXJhdG9yIiwidG9CYXNlNjQiLCJ0b1VpbnQ4QXJyYXkiLCJhcHByb3hpbWF0ZUJ5dGVTaXplIiwiRU1QVFlfQllURV9TVFJJTkciLCJlZSIsIl9fUFJJVkFURV9ub3JtYWxpemVUaW1lc3RhbXAiLCJzdWJzdHIiLCJuYW5vcyIsIl9fUFJJVkFURV9ub3JtYWxpemVOdW1iZXIiLCJfX1BSSVZBVEVfbm9ybWFsaXplQnl0ZVN0cmluZyIsIl9fUFJJVkFURV9pc1NlcnZlclRpbWVzdGFtcCIsIm1hcFZhbHVlIiwiX190eXBlX18iLCJzdHJpbmdWYWx1ZSIsIl9fUFJJVkFURV9nZXRQcmV2aW91c1ZhbHVlIiwiX19wcmV2aW91c192YWx1ZV9fIiwiX19QUklWQVRFX2dldExvY2FsV3JpdGVUaW1lIiwiX19sb2NhbF93cml0ZV90aW1lX18iLCJ0aW1lc3RhbXBWYWx1ZSIsIkRhdGFiYXNlSW5mbyIsImRhdGFiYXNlSWQiLCJwZXJzaXN0ZW5jZUtleSIsImhvc3QiLCJzc2wiLCJhdXRvRGV0ZWN0TG9uZ1BvbGxpbmciLCJsb25nUG9sbGluZ09wdGlvbnMiLCJEYXRhYmFzZUlkIiwicHJvamVjdElkIiwiZGF0YWJhc2UiLCJpc0RlZmF1bHREYXRhYmFzZSIsInRlIiwiX19QUklWQVRFX3R5cGVPcmRlciIsIl9fUFJJVkFURV9pc01heFZhbHVlIiwiX19QUklWQVRFX3ZhbHVlRXF1YWxzIiwiYm9vbGVhblZhbHVlIiwiYnl0ZXNWYWx1ZSIsInJlZmVyZW5jZVZhbHVlIiwiZ2VvUG9pbnRWYWx1ZSIsImxhdGl0dWRlIiwibG9uZ2l0dWRlIiwiaW50ZWdlclZhbHVlIiwiZG91YmxlVmFsdWUiLCJhcnJheVZhbHVlIiwiX19QUklWQVRFX2FycmF5VmFsdWVDb250YWlucyIsIl9fUFJJVkFURV92YWx1ZUNvbXBhcmUiLCJfX1BSSVZBVEVfY29tcGFyZVRpbWVzdGFtcHMiLCJjYW5vbmljYWxJZCIsIl9fUFJJVkFURV9jYW5vbmlmeVZhbHVlIiwiaXNJbnRlZ2VyIiwiX19QUklWQVRFX2lzTnVsbFZhbHVlIiwiX19QUklWQVRFX2lzTmFuVmFsdWUiLCJfX1BSSVZBVEVfaXNNYXBWYWx1ZSIsIl9fUFJJVkFURV9kZWVwQ2xvbmUiLCJPYmplY3RWYWx1ZSIsImZpZWxkIiwiZ2V0RmllbGRzTWFwIiwic2V0QWxsIiwiYXBwbHlDaGFuZ2VzIiwiY2xvbmUiLCJfX1BSSVZBVEVfZXh0cmFjdEZpZWxkTWFzayIsIk11dGFibGVEb2N1bWVudCIsImRvY3VtZW50VHlwZSIsImNyZWF0ZVRpbWUiLCJkb2N1bWVudFN0YXRlIiwibmV3SW52YWxpZERvY3VtZW50IiwibmV3Rm91bmREb2N1bWVudCIsIm5ld05vRG9jdW1lbnQiLCJuZXdVbmtub3duRG9jdW1lbnQiLCJjb252ZXJ0VG9Gb3VuZERvY3VtZW50IiwiY29udmVydFRvTm9Eb2N1bWVudCIsImNvbnZlcnRUb1Vua25vd25Eb2N1bWVudCIsInNldEhhc0NvbW1pdHRlZE11dGF0aW9ucyIsInNldEhhc0xvY2FsTXV0YXRpb25zIiwic2V0UmVhZFRpbWUiLCJoYXNMb2NhbE11dGF0aW9ucyIsImhhc0NvbW1pdHRlZE11dGF0aW9ucyIsImhhc1BlbmRpbmdXcml0ZXMiLCJpc1ZhbGlkRG9jdW1lbnQiLCJpc0ZvdW5kRG9jdW1lbnQiLCJpc05vRG9jdW1lbnQiLCJpc1Vua25vd25Eb2N1bWVudCIsIm11dGFibGVDb3B5IiwiQm91bmQiLCJwb3NpdGlvbiIsImluY2x1c2l2ZSIsIl9fUFJJVkFURV9ib3VuZENvbXBhcmVUb0RvY3VtZW50IiwiZGlyIiwiX19QUklWQVRFX2JvdW5kRXF1YWxzIiwiT3JkZXJCeSIsIl9fUFJJVkFURV9vcmRlckJ5RXF1YWxzIiwiRmlsdGVyIiwiRmllbGRGaWx0ZXIiLCJvcCIsImNyZWF0ZUtleUZpZWxkSW5GaWx0ZXIiLCJfX1BSSVZBVEVfS2V5RmllbGRGaWx0ZXIiLCJfX1BSSVZBVEVfQXJyYXlDb250YWluc0ZpbHRlciIsIl9fUFJJVkFURV9JbkZpbHRlciIsIl9fUFJJVkFURV9Ob3RJbkZpbHRlciIsIl9fUFJJVkFURV9BcnJheUNvbnRhaW5zQW55RmlsdGVyIiwiX19QUklWQVRFX0tleUZpZWxkSW5GaWx0ZXIiLCJfX1BSSVZBVEVfS2V5RmllbGROb3RJbkZpbHRlciIsIm1hdGNoZXMiLCJtYXRjaGVzQ29tcGFyaXNvbiIsImlzSW5lcXVhbGl0eSIsImdldEZsYXR0ZW5lZEZpbHRlcnMiLCJnZXRGaWx0ZXJzIiwiQ29tcG9zaXRlRmlsdGVyIiwiZmlsdGVycyIsInVlIiwiX19QUklWQVRFX2NvbXBvc2l0ZUZpbHRlcklzQ29uanVuY3Rpb24iLCJyZWR1Y2UiLCJfX1BSSVZBVEVfY29tcG9zaXRlRmlsdGVySXNGbGF0Q29uanVuY3Rpb24iLCJfX1BSSVZBVEVfY29tcG9zaXRlRmlsdGVySXNGbGF0IiwiX19QUklWQVRFX2Nhbm9uaWZ5RmlsdGVyIiwiX19QUklWQVRFX2ZpbHRlckVxdWFscyIsIl9fUFJJVkFURV9zdHJpbmdpZnlGaWx0ZXIiLCJfX1BSSVZBVEVfZXh0cmFjdERvY3VtZW50S2V5c0Zyb21BcnJheVZhbHVlIiwibnVsbFZhbHVlIiwiX19QUklWQVRFX1RhcmdldEltcGwiLCJvcmRlckJ5Iiwic3RhcnRBdCIsImVuZEF0IiwiY2UiLCJfX1BSSVZBVEVfbmV3VGFyZ2V0IiwiX19QUklWQVRFX2Nhbm9uaWZ5VGFyZ2V0IiwiX19QUklWQVRFX3RhcmdldEVxdWFscyIsIl9fUFJJVkFURV90YXJnZXRJc0RvY3VtZW50VGFyZ2V0IiwiX19QUklWQVRFX1F1ZXJ5SW1wbCIsImV4cGxpY2l0T3JkZXJCeSIsImxpbWl0VHlwZSIsImxlIiwiaGUiLCJQZSIsIl9fUFJJVkFURV9uZXdRdWVyeUZvclBhdGgiLCJfX1BSSVZBVEVfcXVlcnlNYXRjaGVzQWxsRG9jdW1lbnRzIiwiX19QUklWQVRFX3F1ZXJ5Tm9ybWFsaXplZE9yZGVyQnkiLCJfX1BSSVZBVEVfcXVlcnlUb1RhcmdldCIsIl9fUFJJVkFURV9fcXVlcnlUb1RhcmdldCIsIl9fUFJJVkFURV9xdWVyeVdpdGhMaW1pdCIsIl9fUFJJVkFURV9xdWVyeUVxdWFscyIsIl9fUFJJVkFURV9jYW5vbmlmeVF1ZXJ5IiwiX19QUklWQVRFX3N0cmluZ2lmeVF1ZXJ5IiwiX19QUklWQVRFX3F1ZXJ5TWF0Y2hlcyIsIl9fUFJJVkFURV9uZXdRdWVyeUNvbXBhcmF0b3IiLCJfX1BSSVZBVEVfY29tcGFyZURvY3MiLCJPYmplY3RNYXAiLCJtYXBLZXlGbiIsImVxdWFsc0ZuIiwiaW5uZXIiLCJpbm5lclNpemUiLCJyZSIsIl9fUFJJVkFURV9tdXRhYmxlRG9jdW1lbnRNYXAiLCJpZSIsImRvY3VtZW50TWFwIiwiX19QUklWQVRFX2NvbnZlcnRPdmVybGF5ZWREb2N1bWVudE1hcFRvRG9jdW1lbnRNYXAiLCJvdmVybGF5ZWREb2N1bWVudCIsIl9fUFJJVkFURV9uZXdPdmVybGF5TWFwIiwiX19QUklWQVRFX25ld0RvY3VtZW50S2V5TWFwIiwiX19QUklWQVRFX25ld011dGF0aW9uTWFwIiwiX19QUklWQVRFX2RvY3VtZW50S2V5U2V0IiwiX19QUklWQVRFX3RvRG91YmxlIiwidXNlUHJvdG8zSnNvbiIsIl9fUFJJVkFURV90b0ludGVnZXIiLCJNQVhfU0FGRV9JTlRFR0VSIiwiTUlOX1NBRkVfSU5URUdFUiIsImlzU2FmZUludGVnZXIiLCJUcmFuc2Zvcm1PcGVyYXRpb24iLCJfX1BSSVZBVEVfYXBwbHlUcmFuc2Zvcm1PcGVyYXRpb25Ub0xvY2FsVmlldyIsIl9fUFJJVkFURV9TZXJ2ZXJUaW1lc3RhbXBUcmFuc2Zvcm0iLCJfX1BSSVZBVEVfQXJyYXlVbmlvblRyYW5zZm9ybU9wZXJhdGlvbiIsIl9fUFJJVkFURV9hcHBseUFycmF5VW5pb25UcmFuc2Zvcm1PcGVyYXRpb24iLCJfX1BSSVZBVEVfQXJyYXlSZW1vdmVUcmFuc2Zvcm1PcGVyYXRpb24iLCJfX1BSSVZBVEVfYXBwbHlBcnJheVJlbW92ZVRyYW5zZm9ybU9wZXJhdGlvbiIsIl9fUFJJVkFURV9jb21wdXRlVHJhbnNmb3JtT3BlcmF0aW9uQmFzZVZhbHVlIiwiYXNOdW1iZXIiLCJJZSIsInNlcmlhbGl6ZXIiLCJfX1BSSVZBVEVfYXBwbHlUcmFuc2Zvcm1PcGVyYXRpb25Ub1JlbW90ZURvY3VtZW50IiwiX19QUklWQVRFX051bWVyaWNJbmNyZW1lbnRUcmFuc2Zvcm1PcGVyYXRpb24iLCJlbGVtZW50cyIsIl9fUFJJVkFURV9jb2VyY2VkRmllbGRWYWx1ZXNBcnJheSIsIk11dGF0aW9uUmVzdWx0IiwidHJhbnNmb3JtUmVzdWx0cyIsIlByZWNvbmRpdGlvbiIsInVwZGF0ZVRpbWUiLCJleGlzdHMiLCJub25lIiwiaXNOb25lIiwiX19QUklWQVRFX3ByZWNvbmRpdGlvbklzVmFsaWRGb3JEb2N1bWVudCIsIk11dGF0aW9uIiwiX19QUklWQVRFX2NhbGN1bGF0ZU92ZXJsYXlNdXRhdGlvbiIsIl9fUFJJVkFURV9EZWxldGVNdXRhdGlvbiIsIl9fUFJJVkFURV9TZXRNdXRhdGlvbiIsIl9fUFJJVkFURV9QYXRjaE11dGF0aW9uIiwiX19QUklWQVRFX211dGF0aW9uQXBwbHlUb1JlbW90ZURvY3VtZW50IiwiX19QUklWQVRFX3NlcnZlclRyYW5zZm9ybVJlc3VsdHMiLCJmaWVsZFRyYW5zZm9ybXMiLCJwcmVjb25kaXRpb24iLCJfX1BSSVZBVEVfZ2V0UGF0Y2giLCJfX1BSSVZBVEVfbXV0YXRpb25BcHBseVRvTG9jYWxWaWV3IiwiX19QUklWQVRFX2xvY2FsVHJhbnNmb3JtUmVzdWx0cyIsImZpZWxkTWFzayIsIl9fUFJJVkFURV9tdXRhdGlvbkV4dHJhY3RCYXNlVmFsdWUiLCJ0cmFuc2Zvcm0iLCJfX1BSSVZBVEVfbXV0YXRpb25FcXVhbHMiLCJfX1BSSVZBVEVfZmllbGRUcmFuc2Zvcm1FcXVhbHMiLCJnZXRGaWVsZE1hc2siLCJfX1BSSVZBVEVfVmVyaWZ5TXV0YXRpb24iLCJNdXRhdGlvbkJhdGNoIiwiYmF0Y2hJZCIsImxvY2FsV3JpdGVUaW1lIiwiYmFzZU11dGF0aW9ucyIsIm11dGF0aW9ucyIsImFwcGx5VG9SZW1vdGVEb2N1bWVudCIsIm11dGF0aW9uUmVzdWx0cyIsImFwcGx5VG9Mb2NhbFZpZXciLCJhcHBseVRvTG9jYWxEb2N1bWVudFNldCIsIm11dGF0ZWRGaWVsZHMiLCJNdXRhdGlvbkJhdGNoUmVzdWx0IiwiYmF0Y2giLCJjb21taXRWZXJzaW9uIiwiZG9jVmVyc2lvbnMiLCJPdmVybGF5IiwibXV0YXRpb24iLCJnZXRLZXkiLCJFeGlzdGVuY2VGaWx0ZXIiLCJjb3VudCIsInVuY2hhbmdlZE5hbWVzIiwiX19QUklWQVRFX21hcENvZGVGcm9tUnBjQ29kZSIsIl9fUFJJVkFURV9nZXRNZDVIYXNoVmFsdWUiLCJUZXh0RW5jb2RlciIsImVuY29kZSIsIl9fUFJJVkFURV9nZXQ2NEJpdFVpbnRzIiwiRGF0YVZpZXciLCJidWZmZXIiLCJnZXRVaW50MzIiLCJCbG9vbUZpbHRlciIsImJpdG1hcCIsInBhZGRpbmciLCJoYXNoQ291bnQiLCJfX1BSSVZBVEVfQmxvb21GaWx0ZXJFcnJvciIsIlRlIiwiRWUiLCJkZSIsIkFlIiwibWlnaHRDb250YWluIiwiUmUiLCJSZW1vdGVFdmVudCIsInNuYXBzaG90VmVyc2lvbiIsInRhcmdldENoYW5nZXMiLCJ0YXJnZXRNaXNtYXRjaGVzIiwiZG9jdW1lbnRVcGRhdGVzIiwicmVzb2x2ZWRMaW1ib0RvY3VtZW50cyIsImNyZWF0ZVN5bnRoZXNpemVkUmVtb3RlRXZlbnRGb3JDdXJyZW50Q2hhbmdlIiwiVGFyZ2V0Q2hhbmdlIiwiY3JlYXRlU3ludGhlc2l6ZWRUYXJnZXRDaGFuZ2VGb3JDdXJyZW50Q2hhbmdlIiwicmVzdW1lVG9rZW4iLCJjdXJyZW50IiwiYWRkZWREb2N1bWVudHMiLCJtb2RpZmllZERvY3VtZW50cyIsInJlbW92ZWREb2N1bWVudHMiLCJfX1BSSVZBVEVfRG9jdW1lbnRXYXRjaENoYW5nZSIsIlZlIiwicmVtb3ZlZFRhcmdldElkcyIsIm1lIiwiX19QUklWQVRFX0V4aXN0ZW5jZUZpbHRlckNoYW5nZSIsInRhcmdldElkIiwiZmUiLCJfX1BSSVZBVEVfV2F0Y2hUYXJnZXRDaGFuZ2UiLCJ0YXJnZXRJZHMiLCJjYXVzZSIsIl9fUFJJVkFURV9UYXJnZXRTdGF0ZSIsImdlIiwicGUiLCJfX1BSSVZBVEVfc25hcHNob3RDaGFuZ2VzTWFwIiwieWUiLCJ3ZSIsIlNlIiwiRGUiLCJDZSIsInZlIiwiRmUiLCJNZSIsInhlIiwiT2UiLCJOZSIsIkJlIiwiX19QUklWQVRFX1dhdGNoQ2hhbmdlQWdncmVnYXRvciIsIkxlIiwia2UiLCJxZSIsIlFlIiwiX19QUklWQVRFX2RvY3VtZW50VGFyZ2V0TWFwIiwiS2UiLCIkZSIsIlVlIiwiV2UiLCJHZSIsImZvckVhY2hUYXJnZXQiLCJ6ZSIsImplIiwicmVtb3ZlVGFyZ2V0IiwiSGUiLCJKZSIsIlllIiwiWmUiLCJYZSIsImV0IiwiYml0cyIsInJ0IiwiZ2V0UmVtb3RlS2V5c0ZvclRhcmdldCIsIm50IiwiaXQiLCJzdCIsInB1cnBvc2UiLCJvdCIsIl90IiwiYXNjIiwiZGVzYyIsImluIiwiSnNvblByb3RvU2VyaWFsaXplciIsIl9fUFJJVkFURV90b0ludDMyUHJvdG8iLCJfX1BSSVZBVEVfdG9CeXRlcyIsIl9fUFJJVkFURV90b1ZlcnNpb24iLCJfX1BSSVZBVEVfZnJvbVZlcnNpb24iLCJfX1BSSVZBVEVfdG9SZXNvdXJjZU5hbWUiLCJfX1BSSVZBVEVfZnJvbVJlc291cmNlTmFtZSIsIl9fUFJJVkFURV9pc1ZhbGlkUmVzb3VyY2VOYW1lIiwiX19QUklWQVRFX3RvTmFtZSIsIl9fUFJJVkFURV9leHRyYWN0TG9jYWxQYXRoRnJvbVJlc291cmNlTmFtZSIsIl9fUFJJVkFURV90b1F1ZXJ5UGF0aCIsIl9fUFJJVkFURV9nZXRFbmNvZGVkRGF0YWJhc2VJZCIsIl9fUFJJVkFURV90b011dGF0aW9uRG9jdW1lbnQiLCJfX1BSSVZBVEVfdG9Eb2N1bWVudHNUYXJnZXQiLCJkb2N1bWVudHMiLCJfX1BSSVZBVEVfdG9RdWVyeVRhcmdldCIsInN0cnVjdHVyZWRRdWVyeSIsInBhcmVudCIsImNvbGxlY3Rpb25JZCIsImFsbERlc2NlbmRhbnRzIiwiX19QUklWQVRFX3RvRmlsdGVyIiwid2hlcmUiLCJfX1BSSVZBVEVfdG9GaWVsZFBhdGhSZWZlcmVuY2UiLCJkaXJlY3Rpb24iLCJfX1BSSVZBVEVfdG9EaXJlY3Rpb24iLCJiZWZvcmUiLCJfX1BSSVZBVEVfY29udmVydFF1ZXJ5VGFyZ2V0VG9RdWVyeSIsIl9fUFJJVkFURV9mcm9tUXVlcnlQYXRoIiwiX19QUklWQVRFX2Zyb21GaWx0ZXIiLCJfX1BSSVZBVEVfZnJvbUZpZWxkUGF0aFJlZmVyZW5jZSIsIl9fUFJJVkFURV9uZXdRdWVyeSIsInVuYXJ5RmlsdGVyIiwiTmFOIiwiZmllbGRGaWx0ZXIiLCJjb21wb3NpdGVGaWx0ZXIiLCJfX1BSSVZBVEVfdG9PcGVyYXRvck5hbWUiLCJfX1BSSVZBVEVfdG9Db21wb3NpdGVPcGVyYXRvck5hbWUiLCJmaWVsZFBhdGgiLCJfX1BSSVZBVEVfdG9Eb2N1bWVudE1hc2siLCJmaWVsZFBhdGhzIiwiVGFyZ2V0RGF0YSIsInNlcXVlbmNlTnVtYmVyIiwibGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiIsImV4cGVjdGVkQ291bnQiLCJ3aXRoU2VxdWVuY2VOdW1iZXIiLCJ3aXRoUmVzdW1lVG9rZW4iLCJ3aXRoRXhwZWN0ZWRDb3VudCIsIndpdGhMYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uIiwiX19QUklWQVRFX0xvY2FsU2VyaWFsaXplciIsInV0IiwiX19QUklWQVRFX2Zyb21CdW5kbGVkUXVlcnkiLCJfX1BSSVZBVEVfRmlyZXN0b3JlSW5kZXhWYWx1ZVdyaXRlciIsImh0IiwiUHQiLCJJdCIsIlR0IiwiRXQiLCJkdCIsIkF0IiwiUnQiLCJWdCIsImZ0IiwiZ3QiLCJ5dCIsInd0IiwiU3QiLCJfX1BSSVZBVEVfTWVtb3J5SW5kZXhNYW5hZ2VyIiwib24iLCJfX1BSSVZBVEVfTWVtb3J5Q29sbGVjdGlvblBhcmVudEluZGV4IiwiYWRkVG9Db2xsZWN0aW9uUGFyZW50SW5kZXgiLCJnZXRDb2xsZWN0aW9uUGFyZW50cyIsImdldEVudHJpZXMiLCJhZGRGaWVsZEluZGV4IiwiZGVsZXRlRmllbGRJbmRleCIsImRlbGV0ZUFsbEZpZWxkSW5kZXhlcyIsImNyZWF0ZVRhcmdldEluZGV4ZXMiLCJnZXREb2N1bWVudHNNYXRjaGluZ1RhcmdldCIsImdldEluZGV4VHlwZSIsImdldEZpZWxkSW5kZXhlcyIsImdldE5leHRDb2xsZWN0aW9uR3JvdXBUb1VwZGF0ZSIsImdldE1pbk9mZnNldCIsImdldE1pbk9mZnNldEZyb21Db2xsZWN0aW9uR3JvdXAiLCJ1cGRhdGVDb2xsZWN0aW9uR3JvdXAiLCJ1cGRhdGVJbmRleEVudHJpZXMiLCJMcnVQYXJhbXMiLCJjYWNoZVNpemVDb2xsZWN0aW9uVGhyZXNob2xkIiwicGVyY2VudGlsZVRvQ29sbGVjdCIsIm1heGltdW1TZXF1ZW5jZU51bWJlcnNUb0NvbGxlY3QiLCJ3aXRoQ2FjaGVTaXplIiwiREVGQVVMVF9DT0xMRUNUSU9OX1BFUkNFTlRJTEUiLCJERUZBVUxUX01BWF9TRVFVRU5DRV9OVU1CRVJTX1RPX0NPTExFQ1QiLCJERUZBVUxUIiwiRElTQUJMRUQiLCJfX1BSSVZBVEVfVGFyZ2V0SWRHZW5lcmF0b3IiLCJ4biIsIk9uIiwiTm4iLCJSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlciIsImNoYW5nZXMiLCJjaGFuZ2VzQXBwbGllZCIsImFkZEVudHJ5IiwiYXNzZXJ0Tm90QXBwbGllZCIsInJlbW92ZUVudHJ5IiwiZ2V0RW50cnkiLCJnZXRGcm9tQ2FjaGUiLCJnZXRBbGxGcm9tQ2FjaGUiLCJPdmVybGF5ZWREb2N1bWVudCIsIkxvY2FsRG9jdW1lbnRzVmlldyIsInJlbW90ZURvY3VtZW50Q2FjaGUiLCJtdXRhdGlvblF1ZXVlIiwiZG9jdW1lbnRPdmVybGF5Q2FjaGUiLCJpbmRleE1hbmFnZXIiLCJnZXREb2N1bWVudCIsImdldE92ZXJsYXkiLCJnZXREb2N1bWVudHMiLCJnZXRMb2NhbFZpZXdPZkRvY3VtZW50cyIsInBvcHVsYXRlT3ZlcmxheXMiLCJjb21wdXRlVmlld3MiLCJnZXRPdmVybGF5ZWREb2N1bWVudHMiLCJnZXRPdmVybGF5cyIsInJlY2FsY3VsYXRlQW5kU2F2ZU92ZXJsYXlzIiwiZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXlzIiwic2F2ZU92ZXJsYXlzIiwicmVjYWxjdWxhdGVBbmRTYXZlT3ZlcmxheXNGb3JEb2N1bWVudEtleXMiLCJnZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5IiwiZ2V0RG9jdW1lbnRzTWF0Y2hpbmdEb2N1bWVudFF1ZXJ5IiwiX19QUklWQVRFX2lzQ29sbGVjdGlvbkdyb3VwUXVlcnkiLCJnZXREb2N1bWVudHNNYXRjaGluZ0NvbGxlY3Rpb25Hcm91cFF1ZXJ5IiwiZ2V0RG9jdW1lbnRzTWF0Y2hpbmdDb2xsZWN0aW9uUXVlcnkiLCJnZXROZXh0RG9jdW1lbnRzIiwiZ2V0QWxsRnJvbUNvbGxlY3Rpb25Hcm91cCIsImdldE92ZXJsYXlzRm9yQ29sbGVjdGlvbkdyb3VwIiwiZ2V0T3ZlcmxheXNGb3JDb2xsZWN0aW9uIiwiX19QUklWQVRFX01lbW9yeUJ1bmRsZUNhY2hlIiwidXIiLCJjciIsImdldEJ1bmRsZU1ldGFkYXRhIiwic2F2ZUJ1bmRsZU1ldGFkYXRhIiwiZ2V0TmFtZWRRdWVyeSIsInNhdmVOYW1lZFF1ZXJ5IiwicXVlcnkiLCJidW5kbGVkUXVlcnkiLCJfX1BSSVZBVEVfTWVtb3J5RG9jdW1lbnRPdmVybGF5Q2FjaGUiLCJvdmVybGF5cyIsImxyIiwibHQiLCJyZW1vdmVPdmVybGF5c0ZvckJhdGNoSWQiLCJfX1BSSVZBVEVfUmVmZXJlbmNlU2V0IiwiaHIiLCJfX1BSSVZBVEVfRG9jUmVmZXJlbmNlIiwiUHIiLCJJciIsIlRyIiwiYWRkUmVmZXJlbmNlIiwiRXIiLCJyZW1vdmVSZWZlcmVuY2UiLCJkciIsIkFyIiwiUnIiLCJWciIsIm1yIiwiY29udGFpbnNLZXkiLCJnciIsIl9fUFJJVkFURV9NZW1vcnlNdXRhdGlvblF1ZXVlIiwicmVmZXJlbmNlRGVsZWdhdGUiLCJwciIsInlyIiwiY2hlY2tFbXB0eSIsImFkZE11dGF0aW9uQmF0Y2giLCJsb29rdXBNdXRhdGlvbkJhdGNoIiwid3IiLCJnZXROZXh0TXV0YXRpb25CYXRjaEFmdGVyQmF0Y2hJZCIsIlNyIiwiZ2V0SGlnaGVzdFVuYWNrbm93bGVkZ2VkQmF0Y2hJZCIsImdldEFsbE11dGF0aW9uQmF0Y2hlcyIsImdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ0RvY3VtZW50S2V5IiwiUE9TSVRJVkVfSU5GSU5JVFkiLCJiciIsImdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ1F1ZXJ5IiwicmVtb3ZlTXV0YXRpb25CYXRjaCIsIkRyIiwibWFya1BvdGVudGlhbGx5T3JwaGFuZWQiLCJGbiIsInBlcmZvcm1Db25zaXN0ZW5jeUNoZWNrIiwiX19QUklWQVRFX01lbW9yeVJlbW90ZURvY3VtZW50Q2FjaGVJbXBsIiwiQ3IiLCJkb2NzIiwic2V0SW5kZXhNYW5hZ2VyIiwidnIiLCJuZXdDaGFuZ2VCdWZmZXIiLCJfX1BSSVZBVEVfTWVtb3J5UmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXIiLCJnZXRTaXplIiwiX3IiLCJfX1BSSVZBVEVfTWVtb3J5VGFyZ2V0Q2FjaGUiLCJwZXJzaXN0ZW5jZSIsIkZyIiwibGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbiIsImhpZ2hlc3RUYXJnZXRJZCIsIk1yIiwiT3IiLCJ0YXJnZXRDb3VudCIsIk5yIiwiZ2V0TGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbiIsImdldEhpZ2hlc3RTZXF1ZW5jZU51bWJlciIsImFsbG9jYXRlVGFyZ2V0SWQiLCJzZXRUYXJnZXRzTWV0YWRhdGEiLCJrbiIsImFkZFRhcmdldERhdGEiLCJ1cGRhdGVUYXJnZXREYXRhIiwicmVtb3ZlVGFyZ2V0RGF0YSIsInJlbW92ZVRhcmdldHMiLCJyZW1vdmVNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCIsImdldFRhcmdldENvdW50IiwiZ2V0VGFyZ2V0RGF0YSIsImFkZE1hdGNoaW5nS2V5cyIsInJlbW92ZU1hdGNoaW5nS2V5cyIsImdldE1hdGNoaW5nS2V5c0ZvclRhcmdldElkIiwiX19QUklWQVRFX01lbW9yeVBlcnNpc3RlbmNlIiwiQnIiLCJMciIsImtyIiwicXIiLCJRciIsIktyIiwic3RhcnRlZCIsInNldERhdGFiYXNlRGVsZXRlZExpc3RlbmVyIiwic2V0TmV0d29ya0VuYWJsZWQiLCJnZXRJbmRleE1hbmFnZXIiLCJnZXREb2N1bWVudE92ZXJsYXlDYWNoZSIsImdldE11dGF0aW9uUXVldWUiLCJnZXRUYXJnZXRDYWNoZSIsImdldFJlbW90ZURvY3VtZW50Q2FjaGUiLCJnZXRCdW5kbGVDYWNoZSIsInJ1blRyYW5zYWN0aW9uIiwiX19QUklWQVRFX01lbW9yeVRyYW5zYWN0aW9uIiwiJHIiLCJVciIsIldyIiwiY3VycmVudFNlcXVlbmNlTnVtYmVyIiwiX19QUklWQVRFX01lbW9yeUVhZ2VyRGVsZWdhdGUiLCJHciIsInpyIiwianIiLCJIciIsIkpyIiwidXBkYXRlTGltYm9Eb2N1bWVudCIsIl9fUFJJVkFURV9Mb2NhbFZpZXdDaGFuZ2VzIiwiZnJvbUNhY2hlIiwia2kiLCJxaSIsIlFpIiwiZG9jQ2hhbmdlcyIsImRvYyIsIlF1ZXJ5Q29udGV4dCIsIl9kb2N1bWVudFJlYWRDb3VudCIsImRvY3VtZW50UmVhZENvdW50IiwiaW5jcmVtZW50RG9jdW1lbnRSZWFkQ291bnQiLCJfX1BSSVZBVEVfUXVlcnlFbmdpbmUiLCJLaSIsIiRpIiwiVWkiLCJXaSIsIkdpIiwiemkiLCJqaSIsIkhpIiwiSmkiLCJZaSIsIlppIiwiWGkiLCJfX1BSSVZBVEVfbmV3SW5kZXhPZmZzZXRTdWNjZXNzb3JGcm9tUmVhZFRpbWUiLCJfX1BSSVZBVEVfTG9jYWxTdG9yZUltcGwiLCJlcyIsInRzIiwibnMiLCJycyIsInNzIiwib3MiLCJsb2NhbERvY3VtZW50cyIsImNvbGxlY3RHYXJiYWdlIiwiY29sbGVjdCIsIl9fUFJJVkFURV9sb2NhbFN0b3JlSGFuZGxlVXNlckNoYW5nZSIsIl9zIiwicmVtb3ZlZEJhdGNoSWRzIiwiYWRkZWRCYXRjaElkcyIsIl9fUFJJVkFURV9sb2NhbFN0b3JlR2V0TGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbiIsIl9fUFJJVkFURV9sb2NhbFN0b3JlR2V0TmV4dE11dGF0aW9uQmF0Y2giLCJfX1BSSVZBVEVfbG9jYWxTdG9yZVJlbGVhc2VUYXJnZXQiLCJfX1BSSVZBVEVfbG9jYWxTdG9yZUV4ZWN1dGVRdWVyeSIsIl9fUFJJVkFURV9zZXRNYXhSZWFkVGltZSIsIl9fUFJJVkFURV9xdWVyeUNvbGxlY3Rpb25Hcm91cCIsImxzIiwiX19QUklWQVRFX0xvY2FsQ2xpZW50U3RhdGUiLCJhY3RpdmVUYXJnZXRJZHMiLCJkcyIsIkFzIiwiRXMiLCJ1cGRhdGVUaW1lTXMiLCJfX1BSSVZBVEVfTWVtb3J5U2hhcmVkQ2xpZW50U3RhdGUiLCJlbyIsIm5vIiwib25saW5lU3RhdGVIYW5kbGVyIiwiYWRkUGVuZGluZ011dGF0aW9uIiwidXBkYXRlTXV0YXRpb25TdGF0ZSIsImFkZExvY2FsUXVlcnlUYXJnZXQiLCJ1cGRhdGVRdWVyeVN0YXRlIiwicmVtb3ZlTG9jYWxRdWVyeVRhcmdldCIsImlzTG9jYWxRdWVyeVRhcmdldCIsImNsZWFyUXVlcnlTdGF0ZSIsImdldEFsbEFjdGl2ZVF1ZXJ5VGFyZ2V0cyIsImlzQWN0aXZlUXVlcnlUYXJnZXQiLCJoYW5kbGVVc2VyQ2hhbmdlIiwic2V0T25saW5lU3RhdGUiLCJub3RpZnlCdW5kbGVMb2FkZWQiLCJfX1BSSVZBVEVfTm9vcENvbm5lY3Rpdml0eU1vbml0b3IiLCJybyIsIl9fUFJJVkFURV9Ccm93c2VyQ29ubmVjdGl2aXR5TW9uaXRvciIsImlvIiwic28iLCJvbyIsIl9vIiwiYW8iLCJ1byIsIl9fUFJJVkFURV9nZW5lcmF0ZVVuaXF1ZURlYnVnSWQiLCJCYXRjaEdldERvY3VtZW50cyIsIkNvbW1pdCIsIlJ1blF1ZXJ5IiwiUnVuQWdncmVnYXRpb25RdWVyeSIsIl9fUFJJVkFURV9TdHJlYW1CcmlkZ2UiLCJjbyIsImxvIiwiaG8iLCJQbyIsIklvIiwiVG8iLCJvbk1lc3NhZ2UiLCJFbyIsIkFvIiwiUm8iLCJWbyIsIl9fUFJJVkFURV9XZWJDaGFubmVsQ29ubmVjdGlvbiIsImRhdGFiYXNlSW5mbyIsIm1vIiwiZm8iLCJwbyIsInlvIiwid28iLCJTbyIsImJvIiwiRG8iLCJDbyIsInZvIiwiZm9yd2FyZENoYW5uZWxSZXF1ZXN0VGltZW91dE1zIiwidGltZW91dFNlY29uZHMiLCJfX1BSSVZBVEVfdW5ndWFyZGVkRXZlbnRMaXN0ZW4iLCJfX1BSSVZBVEVfbmV3U2VyaWFsaXplciIsIl9fUFJJVkFURV9FeHBvbmVudGlhbEJhY2tvZmYiLCJzaSIsInRpbWVySWQiLCJGbyIsIk1vIiwieG8iLCJPbyIsIk5vIiwiQm8iLCJMbyIsImtvIiwicW8iLCJlbnF1ZXVlQWZ0ZXJEZWxheSIsIlFvIiwic2tpcERlbGF5IiwiX19QUklWQVRFX1BlcnNpc3RlbnRTdHJlYW0iLCJLbyIsIiRvIiwiY29ubmVjdGlvbiIsImF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyIiwiYXBwQ2hlY2tDcmVkZW50aWFsc1Byb3ZpZGVyIiwiVW8iLCJXbyIsIkdvIiwiem8iLCJqbyIsIkhvIiwiSm8iLCJzdG9wIiwiWW8iLCJabyIsIlhvIiwiZV8iLCJ0XyIsIm5fIiwicl8iLCJpXyIsInNfIiwib18iLCJfXyIsImVucXVldWVBbmRGb3JnZXQiLCJfX1BSSVZBVEVfUGVyc2lzdGVudExpc3RlblN0cmVhbSIsInRhcmdldENoYW5nZSIsInRhcmdldENoYW5nZVR5cGUiLCJkb2N1bWVudENoYW5nZSIsImRvY3VtZW50RGVsZXRlIiwiZG9jdW1lbnRSZW1vdmUiLCJfX1BSSVZBVEVfZnJvbVdhdGNoQ2hhbmdlIiwiYV8iLCJ1XyIsImFkZFRhcmdldCIsIl9fUFJJVkFURV90b0xpc3RlblJlcXVlc3RMYWJlbHMiLCJsYWJlbHMiLCJjXyIsIl9fUFJJVkFURV9QZXJzaXN0ZW50V3JpdGVTdHJlYW0iLCJsXyIsImhfIiwibGFzdFN0cmVhbVRva2VuIiwiUF8iLCJzdHJlYW1Ub2tlbiIsIl9fUFJJVkFURV9mcm9tV3JpdGVSZXN1bHRzIiwid3JpdGVSZXN1bHRzIiwiY29tbWl0VGltZSIsIklfIiwiVF8iLCJFXyIsIndyaXRlcyIsInVwZGF0ZU1hc2siLCJ2ZXJpZnkiLCJ1cGRhdGVUcmFuc2Zvcm1zIiwic2V0VG9TZXJ2ZXJWYWx1ZSIsImFwcGVuZE1pc3NpbmdFbGVtZW50cyIsInJlbW92ZUFsbEZyb21BcnJheSIsImluY3JlbWVudCIsImN1cnJlbnREb2N1bWVudCIsInRvTXV0YXRpb24iLCJfX1BSSVZBVEVfRGF0YXN0b3JlSW1wbCIsImF1dGhDcmVkZW50aWFscyIsImFwcENoZWNrQ3JlZGVudGlhbHMiLCJkXyIsIkFfIiwidGVybWluYXRlIiwiX19QUklWQVRFX09ubGluZVN0YXRlVHJhY2tlciIsImFzeW5jUXVldWUiLCJWXyIsIm1fIiwiZl8iLCJnXyIsInBfIiwieV8iLCJ3XyIsIlNfIiwiX19QUklWQVRFX1JlbW90ZVN0b3JlSW1wbCIsImxvY2FsU3RvcmUiLCJkYXRhc3RvcmUiLCJyZW1vdGVTeW5jZXIiLCJiXyIsIkRfIiwiQ18iLCJ2XyIsIkZfIiwiX19QUklWQVRFX2NhblVzZU5ldHdvcmsiLCJfX1BSSVZBVEVfZGlzYWJsZU5ldHdvcmtJbnRlcm5hbCIsIk1fIiwiX19QUklWQVRFX2VuYWJsZU5ldHdvcmtJbnRlcm5hbCIsIl9fUFJJVkFURV9yZW1vdGVTdG9yZUxpc3RlbiIsIl9fUFJJVkFURV9zaG91bGRTdGFydFdhdGNoU3RyZWFtIiwiX19QUklWQVRFX3N0YXJ0V2F0Y2hTdHJlYW0iLCJfX1BSSVZBVEVfZW5zdXJlV2F0Y2hTdHJlYW0iLCJfX1BSSVZBVEVfc2VuZFdhdGNoUmVxdWVzdCIsIl9fUFJJVkFURV9yZW1vdGVTdG9yZVVubGlzdGVuIiwiX19QUklWQVRFX3NlbmRVbndhdGNoUmVxdWVzdCIsInhfIiwiX19QUklWQVRFX2NsZWFuVXBXYXRjaFN0cmVhbVN0YXRlIiwiX19QUklWQVRFX29uV2F0Y2hTdHJlYW1PcGVuIiwiX19QUklWQVRFX29uV2F0Y2hTdHJlYW1DbG9zZSIsIl9fUFJJVkFURV9vbldhdGNoU3RyZWFtQ2hhbmdlIiwicmVqZWN0TGlzdGVuIiwiX19QUklWQVRFX2Rpc2FibGVOZXR3b3JrVW50aWxSZWNvdmVyeSIsImFwcGx5UmVtb3RlRXZlbnQiLCJfX1BSSVZBVEVfZXhlY3V0ZVdpdGhSZWNvdmVyeSIsIl9fUFJJVkFURV9maWxsV3JpdGVQaXBlbGluZSIsIl9fUFJJVkFURV9lbnN1cmVXcml0ZVN0cmVhbSIsIl9fUFJJVkFURV9jYW5BZGRUb1dyaXRlUGlwZWxpbmUiLCJfX1BSSVZBVEVfYWRkVG9Xcml0ZVBpcGVsaW5lIiwiX19QUklWQVRFX3Nob3VsZFN0YXJ0V3JpdGVTdHJlYW0iLCJfX1BSSVZBVEVfc3RhcnRXcml0ZVN0cmVhbSIsIl9fUFJJVkFURV9vbldyaXRlU3RyZWFtT3BlbiIsIl9fUFJJVkFURV9vbldyaXRlSGFuZHNoYWtlQ29tcGxldGUiLCJfX1BSSVZBVEVfb25NdXRhdGlvblJlc3VsdCIsImFwcGx5U3VjY2Vzc2Z1bFdyaXRlIiwiX19QUklWQVRFX29uV3JpdGVTdHJlYW1DbG9zZSIsIl9fUFJJVkFURV9pc1Blcm1hbmVudEVycm9yIiwicmVqZWN0RmFpbGVkV3JpdGUiLCJfX1BSSVZBVEVfcmVtb3RlU3RvcmVIYW5kbGVDcmVkZW50aWFsQ2hhbmdlIiwidmVyaWZ5T3BlcmF0aW9uSW5Qcm9ncmVzcyIsImhhbmRsZUNyZWRlbnRpYWxDaGFuZ2UiLCJPXyIsIk5fIiwiRGVsYXllZE9wZXJhdGlvbiIsInRhcmdldFRpbWVNcyIsInJlbW92YWxDYWxsYmFjayIsImNyZWF0ZUFuZFNjaGVkdWxlIiwidGltZXJIYW5kbGUiLCJoYW5kbGVEZWxheUVsYXBzZWQiLCJfX1BSSVZBVEVfd3JhcEluVXNlckVycm9ySWZSZWNvdmVyYWJsZSIsIkRvY3VtZW50U2V0Iiwia2V5ZWRNYXAiLCJzb3J0ZWRTZXQiLCJlbXB0eVNldCIsIl9fUFJJVkFURV9Eb2N1bWVudENoYW5nZVNldCIsIkJfIiwidHJhY2siLCJMXyIsIlZpZXdTbmFwc2hvdCIsIm9sZERvY3MiLCJtdXRhdGVkS2V5cyIsInN5bmNTdGF0ZUNoYW5nZWQiLCJleGNsdWRlc01ldGFkYXRhQ2hhbmdlcyIsImhhc0NhY2hlZFJlc3VsdHMiLCJmcm9tSW5pdGlhbERvY3VtZW50cyIsIl9fUFJJVkFURV9RdWVyeUxpc3RlbmVyc0luZm8iLCJrXyIsImxpc3RlbmVycyIsIl9fUFJJVkFURV9FdmVudE1hbmFnZXJJbXBsIiwicXVlcmllcyIsIm9ubGluZVN0YXRlIiwicV8iLCJfX1BSSVZBVEVfZXZlbnRNYW5hZ2VyT25XYXRjaENoYW5nZSIsIktfIiwiX19QUklWQVRFX3JhaXNlU25hcHNob3RzSW5TeW5jRXZlbnQiLCJfX1BSSVZBVEVfZXZlbnRNYW5hZ2VyT25XYXRjaEVycm9yIiwib25FcnJvciIsIl9fUFJJVkFURV9RdWVyeUxpc3RlbmVyIiwiVV8iLCJXXyIsIkdfIiwiaW5jbHVkZU1ldGFkYXRhQ2hhbmdlcyIsInpfIiwial8iLCJIXyIsIlFfIiwiSl8iLCJfX1BSSVZBVEVfQWRkZWRMaW1ib0RvY3VtZW50IiwiX19QUklWQVRFX1JlbW92ZWRMaW1ib0RvY3VtZW50IiwiX19QUklWQVRFX1ZpZXciLCJvcmRlciIsInNuYXBzaG90IiwiX19QUklWQVRFX1F1ZXJ5VmlldyIsInZpZXciLCJMaW1ib1Jlc29sdXRpb24iLCJfX1BSSVZBVEVfU3luY0VuZ2luZUltcGwiLCJyZW1vdGVTdG9yZSIsImV2ZW50TWFuYWdlciIsInNoYXJlZENsaWVudFN0YXRlIiwibWF4Q29uY3VycmVudExpbWJvUmVzb2x1dGlvbnMiLCJpc1ByaW1hcnlDbGllbnQiLCJfX1BSSVZBVEVfc3luY0VuZ2luZUxpc3RlbiIsIl9fUFJJVkFURV9zeW5jRW5naW5lQXBwbHlSZW1vdGVFdmVudCIsIl9fUFJJVkFURV9zeW5jRW5naW5lR2V0UmVtb3RlS2V5c0ZvclRhcmdldCIsIl9fUFJJVkFURV9zeW5jRW5naW5lUmVqZWN0TGlzdGVuIiwiX19QUklWQVRFX2Vuc3VyZVdhdGNoQ2FsbGJhY2tzIiwiX19QUklWQVRFX2xvY2FsU3RvcmVBbGxvY2F0ZVRhcmdldCIsIl9fUFJJVkFURV91cGRhdGVUcmFja2VkTGltYm9zIiwiX19QUklWQVRFX2luaXRpYWxpemVWaWV3QW5kQ29tcHV0ZVNuYXBzaG90IiwiX19QUklWQVRFX3N5bmNFbmdpbmVVbmxpc3RlbiIsIl9fUFJJVkFURV9yZW1vdmVBbmRDbGVhbnVwVGFyZ2V0IiwidHJhY2tSZW1vdmFscyIsInVzIiwiY3MiLCJfX1BSSVZBVEVfcG9wdWxhdGVEb2N1bWVudENoYW5nZUJ1ZmZlciIsIl9fUFJJVkFURV9sb2NhbFN0b3JlQXBwbHlSZW1vdGVFdmVudFRvTG9jYWxDYWNoZSIsIl9fUFJJVkFURV9zeW5jRW5naW5lRW1pdE5ld1NuYXBzQW5kTm90aWZ5TG9jYWxTdG9yZSIsIl9fUFJJVkFURV9zeW5jRW5naW5lQXBwbHlPbmxpbmVTdGF0ZUNoYW5nZSIsIl9fUFJJVkFURV9wdW1wRW5xdWV1ZWRMaW1ib1Jlc29sdXRpb25zIiwiX19QUklWQVRFX3N5bmNFbmdpbmVBcHBseVN1Y2Nlc3NmdWxXcml0ZSIsIl9fUFJJVkFURV9sb2NhbFN0b3JlQWNrbm93bGVkZ2VCYXRjaCIsIl9fUFJJVkFURV9wcm9jZXNzVXNlckNhbGxiYWNrIiwiX19QUklWQVRFX3RyaWdnZXJQZW5kaW5nV3JpdGVzQ2FsbGJhY2tzIiwiX19QUklWQVRFX3N5bmNFbmdpbmVSZWplY3RGYWlsZWRXcml0ZSIsIl9fUFJJVkFURV9yZW1vdmVMaW1ib1RhcmdldCIsIl9fUFJJVkFURV90cmFja0xpbWJvQ2hhbmdlIiwiX19QUklWQVRFX3N5bmNFbmdpbmVIYW5kbGVDcmVkZW50aWFsQ2hhbmdlIiwiX19QUklWQVRFX3N5bmNFbmdpbmVFbnN1cmVXcml0ZUNhbGxiYWNrcyIsIk1lbW9yeU9mZmxpbmVDb21wb25lbnRQcm92aWRlciIsInN5bmNocm9uaXplVGFicyIsImNyZWF0ZVNoYXJlZENsaWVudFN0YXRlIiwiY3JlYXRlUGVyc2lzdGVuY2UiLCJjcmVhdGVMb2NhbFN0b3JlIiwiZ2NTY2hlZHVsZXIiLCJjcmVhdGVHYXJiYWdlQ29sbGVjdGlvblNjaGVkdWxlciIsImluZGV4QmFja2ZpbGxlclNjaGVkdWxlciIsImNyZWF0ZUluZGV4QmFja2ZpbGxlclNjaGVkdWxlciIsIl9fUFJJVkFURV9uZXdMb2NhbFN0b3JlIiwiaW5pdGlhbFVzZXIiLCJPbmxpbmVDb21wb25lbnRQcm92aWRlciIsImNyZWF0ZURhdGFzdG9yZSIsImNyZWF0ZVJlbW90ZVN0b3JlIiwiY3JlYXRlRXZlbnRNYW5hZ2VyIiwic3luY0VuZ2luZSIsImNyZWF0ZVN5bmNFbmdpbmUiLCJfX1BSSVZBVEVfcmVtb3RlU3RvcmVBcHBseVByaW1hcnlTdGF0ZSIsIl9fUFJJVkFURV9Bc3luY09ic2VydmVyIiwib2JzZXJ2ZXIiLCJtdXRlZCIsIkZpcmVzdG9yZUNsaWVudCIsImNsaWVudElkIiwiYXV0aENyZWRlbnRpYWxMaXN0ZW5lciIsImFwcENoZWNrQ3JlZGVudGlhbExpc3RlbmVyIiwiZ2V0Q29uZmlndXJhdGlvbiIsInNldENyZWRlbnRpYWxDaGFuZ2VMaXN0ZW5lciIsInNldEFwcENoZWNrVG9rZW5DaGFuZ2VMaXN0ZW5lciIsInZlcmlmeU5vdFRlcm1pbmF0ZWQiLCJpc1NodXR0aW5nRG93biIsImVudGVyUmVzdHJpY3RlZE1vZGUiLCJlbnF1ZXVlQW5kRm9yZ2V0RXZlbldoaWxlUmVzdHJpY3RlZCIsIl9vbmxpbmVDb21wb25lbnRzIiwiX29mZmxpbmVDb21wb25lbnRzIiwiX19QUklWQVRFX3NldE9mZmxpbmVDb21wb25lbnRQcm92aWRlciIsIl9fUFJJVkFURV9zZXRPbmxpbmVDb21wb25lbnRQcm92aWRlciIsIl91bmluaXRpYWxpemVkQ29tcG9uZW50c1Byb3ZpZGVyIiwiX29mZmxpbmUiLCJfX1BSSVZBVEVfY2FuRmFsbGJhY2tGcm9tSW5kZXhlZERiRXJyb3IiLCJfX1BSSVZBVEVfZW5zdXJlT2ZmbGluZUNvbXBvbmVudHMiLCJfX1BSSVZBVEVfZW5zdXJlT25saW5lQ29tcG9uZW50cyIsIl9vbmxpbmUiLCJfX1BSSVZBVEVfZ2V0RXZlbnRNYW5hZ2VyIiwib25MaXN0ZW4iLCJvblVubGlzdGVuIiwiX19QUklWQVRFX2ZpcmVzdG9yZUNsaWVudEdldERvY3VtZW50c1ZpYVNuYXBzaG90TGlzdGVuZXIiLCJfX1BSSVZBVEVfZXZlbnRNYW5hZ2VyVW5saXN0ZW4iLCJzb3VyY2UiLCJfX1BSSVZBVEVfZXZlbnRNYW5hZ2VyTGlzdGVuIiwiX19QUklWQVRFX2Nsb25lTG9uZ1BvbGxpbmdPcHRpb25zIiwiX19QUklWQVRFX3ZhbGlkYXRlTm9uRW1wdHlBcmd1bWVudCIsIl9fUFJJVkFURV92YWxpZGF0ZURvY3VtZW50UGF0aCIsIl9fUFJJVkFURV92YWxpZGF0ZUNvbGxlY3Rpb25QYXRoIiwiX19QUklWQVRFX3ZhbHVlRGVzY3JpcHRpb24iLCJfX1BSSVZBVEVfY2FzdCIsIkZpcmVzdG9yZVNldHRpbmdzSW1wbCIsImlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMiLCJsb2NhbENhY2hlIiwiY2FjaGVTaXplQnl0ZXMiLCJfX1BSSVZBVEVfdmFsaWRhdGVJc05vdFVzZWRUb2dldGhlciIsImV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmciLCJleHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmciLCJleHBlcmltZW50YWxMb25nUG9sbGluZ09wdGlvbnMiLCJGaXJlc3RvcmUkMSIsIl9hdXRoQ3JlZGVudGlhbHMiLCJfYXBwQ2hlY2tDcmVkZW50aWFscyIsIl9kYXRhYmFzZUlkIiwiX2FwcCIsIl9wZXJzaXN0ZW5jZUtleSIsIl9zZXR0aW5ncyIsIl9zZXR0aW5nc0Zyb3plbiIsIl9pbml0aWFsaXplZCIsIl90ZXJtaW5hdGVkIiwiX3Rlcm1pbmF0ZVRhc2siLCJfc2V0U2V0dGluZ3MiLCJzZXNzaW9uSW5kZXgiLCJpYW1Ub2tlbiIsImF1dGhUb2tlbkZhY3RvcnkiLCJjbGllbnQiLCJfZ2V0U2V0dGluZ3MiLCJfZnJlZXplU2V0dGluZ3MiLCJfdGVybWluYXRlIiwic2V0dGluZ3MiLCJRdWVyeSIsImNvbnZlcnRlciIsIl9xdWVyeSIsImZpcmVzdG9yZSIsIndpdGhDb252ZXJ0ZXIiLCJEb2N1bWVudFJlZmVyZW5jZSIsIl9rZXkiLCJfcGF0aCIsIkNvbGxlY3Rpb25SZWZlcmVuY2UiLCJjb2xsZWN0aW9uIiwiX19QUklWQVRFX0FzeW5jUXVldWVJbXBsIiwiZXUiLCJ0dSIsIm51IiwicnUiLCJpdSIsInZpc2liaWxpdHlTdGF0ZSIsImVucXVldWUiLCJzdSIsIm91IiwiX3UiLCJzdGFjayIsImF1IiwidXUiLCJjdSIsImx1IiwiaHUiLCJGaXJlc3RvcmUiLCJfcXVldWUiLCJfZmlyZXN0b3JlQ2xpZW50IiwiX19QUklWQVRFX2NvbmZpZ3VyZUZpcmVzdG9yZSIsImVuc3VyZUZpcmVzdG9yZUNvbmZpZ3VyZWQiLCJfb2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyIiwiX29ubGluZUNvbXBvbmVudFByb3ZpZGVyIiwiX29mZmxpbmVLaW5kIiwia2luZCIsIkJ5dGVzIiwiX2J5dGVTdHJpbmciLCJGaWVsZFBhdGgiLCJfaW50ZXJuYWxQYXRoIiwiRmllbGRWYWx1ZSIsIl9tZXRob2ROYW1lIiwiR2VvUG9pbnQiLCJfbGF0IiwiX2xvbmciLCJQYXJzZWRTZXREYXRhIiwiX19QUklWQVRFX2lzV3JpdGUiLCJfX1BSSVZBVEVfUGFyc2VDb250ZXh0SW1wbCIsIlB1IiwiSXUiLCJUdSIsIkV1IiwiZHUiLCJBdSIsIlJ1IiwiVnUiLCJtdSIsIl9fUFJJVkFURV9jcmVhdGVFcnJvciIsIm1ldGhvZE5hbWUiLCJmdSIsImd1IiwiY29udGFpbnMiLCJfX1BSSVZBVEVfVXNlckRhdGFSZWFkZXIiLCJwdSIsIl9fUFJJVkFURV9uZXdVc2VyRGF0YVJlYWRlciIsIl9fUFJJVkFURV9wYXJzZVNldERhdGEiLCJtZXJnZSIsIm1lcmdlRmllbGRzIiwiX19QUklWQVRFX3ZhbGlkYXRlUGxhaW5PYmplY3QiLCJfX1BSSVZBVEVfcGFyc2VPYmplY3QiLCJfX1BSSVZBVEVfZmllbGRQYXRoRnJvbUFyZ3VtZW50JDEiLCJfX1BSSVZBVEVfZmllbGRNYXNrQ29udGFpbnMiLCJfX1BSSVZBVEVfcGFyc2VEYXRhIiwiX19QUklWQVRFX2xvb2tzTGlrZUpzb25PYmplY3QiLCJfdG9GaWVsZFRyYW5zZm9ybSIsIl9fUFJJVkFURV9maWVsZFBhdGhGcm9tRG90U2VwYXJhdGVkU3RyaW5nIiwic2VhcmNoIiwiRG9jdW1lbnRTbmFwc2hvdCQxIiwiX2ZpcmVzdG9yZSIsIl91c2VyRGF0YVdyaXRlciIsIl9kb2N1bWVudCIsIl9jb252ZXJ0ZXIiLCJyZWYiLCJRdWVyeURvY3VtZW50U25hcHNob3QkMSIsImZyb21GaXJlc3RvcmUiLCJjb252ZXJ0VmFsdWUiLCJfX1BSSVZBVEVfZmllbGRQYXRoRnJvbUFyZ3VtZW50IiwiQWJzdHJhY3RVc2VyRGF0YVdyaXRlciIsImNvbnZlcnRUaW1lc3RhbXAiLCJjb252ZXJ0U2VydmVyVGltZXN0YW1wIiwiY29udmVydEJ5dGVzIiwiY29udmVydFJlZmVyZW5jZSIsImNvbnZlcnRHZW9Qb2ludCIsImNvbnZlcnRBcnJheSIsImNvbnZlcnRPYmplY3QiLCJjb252ZXJ0T2JqZWN0TWFwIiwiY29udmVydERvY3VtZW50S2V5IiwiU25hcHNob3RNZXRhZGF0YSIsIkRvY3VtZW50U25hcHNob3QiLCJfZmlyZXN0b3JlSW1wbCIsIm1ldGFkYXRhIiwiUXVlcnlEb2N1bWVudFNuYXBzaG90Iiwic2VydmVyVGltZXN0YW1wcyIsIlF1ZXJ5U25hcHNob3QiLCJfc25hcHNob3QiLCJfY2FjaGVkQ2hhbmdlcyIsIl9jYWNoZWRDaGFuZ2VzSW5jbHVkZU1ldGFkYXRhQ2hhbmdlcyIsIm9sZEluZGV4IiwibmV3SW5kZXgiLCJfX1BSSVZBVEVfcmVzdWx0Q2hhbmdlVHlwZSIsIl9fUFJJVkFURV9FeHBVc2VyRGF0YVdyaXRlciIsImdldERvY3MiLCJfX1BSSVZBVEVfdmFsaWRhdGVIYXNFeHBsaWNpdE9yZGVyQnlGb3JMaW1pdFRvTGFzdCIsImV4ZWN1dGVXcml0ZSIsIl9fUFJJVkFURV9zeW5jRW5naW5lV3JpdGUiLCJfX1BSSVZBVEVfZ2V0U3luY0VuZ2luZSIsImhlYXJ0YmVhdENvbnRyb2xsZXIiLCJnZXRBcHAiLCJwcm9kdWN0TmFtZSIsImVtdWxhdG9ySG9zdHMiLCJnZXREZWZhdWx0RW11bGF0b3JIb3N0Iiwic2VwYXJhdG9ySW5kZXgiLCJsYXN0SW5kZXhPZiIsImdldERlZmF1bHRFbXVsYXRvckhvc3RuYW1lQW5kUG9ydCIsIm1vY2tVc2VyVG9rZW4iLCJwcm9qZWN0IiwiaWF0Iiwic3ViIiwidXNlcl9pZCIsInBheWxvYWQiLCJpc3MiLCJhdWQiLCJleHAiLCJhdXRoX3RpbWUiLCJmaXJlYmFzZSIsInNpZ25faW5fcHJvdmlkZXIiLCJpZGVudGl0aWVzIiwiYWxnIiwiY3JlYXRlTW9ja1VzZXJUb2tlbiIsImNvbm5lY3RGaXJlc3RvcmVFbXVsYXRvciIsImdldEZpcmVzdG9yZSIsImFwaUtleSIsImF1dGhEb21haW4iLCJzdG9yYWdlQnVja2V0IiwibWVzc2FnaW5nU2VuZGVySWQiLCJtZWFzdXJlbWVudElkIiwiU0VORF9NRVNTQUdFIiwiQ0xFQVJfQ0hBVCIsIklOQ1JFTUVOVF9VTlJFQURfQ09VTlQiLCJSRVNFVF9VTlJFQURfQ09VTlQiLCJTRVRfQ1VSUkVOVF9TRU5ERVIiLCJGRVRDSF9NRVNTQUdFU19TVUNDRVNTIiwicmVzZXRVbnJlYWRDb3VudCIsInVzZXJOYW1lIiwiaW5pdGlhbFN0YXRlIiwibWVzc2FnZXMiLCJpdmFuVW5yZWFkIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsIm1hcnlhVW5yZWFkIiwiY3VycmVudFNlbmRlciIsImdldFN0YXRlIiwiZGlzcGF0Y2giLCJhY3Rpb24iLCJjaGF0UmVkdWNlciIsImN1cnJlbnRTdGF0ZSIsInVwZGF0ZWRJdmFuVW5yZWFkIiwidXBkYXRlZE1hcnlhVW5yZWFkIiwic2V0SXRlbSIsInN1YnNjcmliZSIsImNoYXRJbml0aWFsU3RhdGUiLCJpdmFuU2VsZWN0b3JCdXR0b24iLCJnZXRFbGVtZW50QnlJZCIsIm1hcnlhU2VsZWN0b3JCdXR0b24iLCJjaGF0SW5wdXRGb3JtIiwicXVlcnlTZWxlY3RvciIsImNoYXRJbnB1dCIsImNoYXRNZXNzYWdlcyIsImNsZWFyQ2hhdEJ1dHRvbiIsIml2YW5VbnJlYWRDb3VudCIsIm1hcnlhVW5yZWFkQ291bnQiLCJlbW9qaUJ1dHRvbiIsImVtb2ppUGFuZWwiLCJzY3JvbGxUb0JvdHRvbSIsInNjcm9sbFRvcCIsInNjcm9sbEhlaWdodCIsImhhbmRsZVVzZXJTZWxlY3Rpb24iLCJ1c2VyQnV0dG9uIiwib3RoZXJCdXR0b24iLCJjbGFzc0xpc3QiLCJjaGF0SGVhZGVyIiwiY2hhdElucHV0UGxhY2Vob2xkZXIiLCJ0ZXh0Q29udGVudCIsInBsYWNlaG9sZGVyIiwic2VuZE1lc3NhZ2VIYW5kbGVyIiwibWVzc2FnZURhdGEiLCJzZW5kZXIiLCJzZW5kTWVzc2FnZSIsInRvRmlyZXN0b3JlIiwiX19QUklWQVRFX2FwcGx5RmlyZXN0b3JlRGF0YUNvbnZlcnRlciIsImFkZERvYyIsInJlY2lwaWVudCIsInVwZGF0ZWRDb3VudCIsInVwZGF0ZVVJIiwic3R5bGUiLCJkaXNwbGF5IiwiaW5uZXJIVE1MIiwibWVzc2FnZUhUTUwiLCJjcmVhdGVDaGF0TWVzc2FnZUVsZW1lbnQiLCJtZXNzYWdlU2VuZGVyIiwiYmdDb2xvckNsYXNzIiwiZm9ybWF0dGVkVGltZXN0YW1wIiwidG9Mb2NhbGVTdHJpbmciLCJtZXNzYWdlc1JlZiIsImlzUGFuZWxWaXNpYmxlIiwicXVlcnlTZWxlY3RvckFsbCIsImVtb2ppRWxlbWVudCIsImVtb2ppIiwic2VsZWN0aW9uU3RhcnQiLCJlbmQiLCJzZWxlY3Rpb25FbmQiLCJhZnRlciIsImZvY3VzIiwiaW5zZXJ0RW1vamkiLCJzYXZlZFNlbmRlciIsImxvY2FsZUNvbXBhcmUiLCJmZXRjaE1lc3NhZ2VzU3VjY2VzcyIsImZldGNoTWVzc2FnZXMiLCJub3JtYWxpemVVcmwiLCJzcmNCeU1vZHVsZUlkIiwibm9Eb2N1bWVudCIsIm5vb3AiLCJ1cGRhdGVDc3MiLCJlbCIsInVybCIsImhyZWYiLCJpc1VybFJlcXVlc3QiLCJpc0xvYWRlZCIsInZpc2l0ZWQiLCJuZXdFbCIsImNsb25lTm9kZSIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsIm5leHRTaWJsaW5nIiwiaW5zZXJ0QmVmb3JlIiwiYXBwZW5kQ2hpbGQiLCJyZWxvYWRBbGwiLCJtb2R1bGUiLCJleHBvcnRzIiwibW9kdWxlSWQiLCJmbiIsImdldFNjcmlwdFNyYyIsImN1cnJlbnRTY3JpcHQiLCJzY3JpcHRzIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJsYXN0U2NyaXB0VGFnIiwiZmlsZU1hcCIsInNwbGl0UmVzdWx0IiwiZmlsZW5hbWUiLCJtYXBSdWxlIiwicmVnIiwiZ2V0Q3VycmVudFNjcmlwdFVybCIsInJlbG9hZGVkIiwibG9hZGVkIiwicmV0IiwiZ2V0UmVsb2FkVXJsIiwicmVsb2FkU3R5bGUiLCJsb2NhbHMiLCJ1cmxTdHJpbmciLCJjb21wb25lbnRzIiwiYWNjdW11bGF0b3IiLCJpdGVtIiwiY3NzUmVsb2FkIiwiaG90IiwiZGlzcG9zZSIsImFjY2VwdCIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJjYWNoZWRNb2R1bGUiLCJleGVjT3B0aW9ucyIsImZhY3RvcnkiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwicmVxdWlyZSIsImhhbmRsZXIiLCJjaHVua0lkIiwibWluaUNzc0YiLCJobXJGIiwib2JqIiwic2NyaXB0IiwibmVlZEF0dGFjaCIsImdldEF0dHJpYnV0ZSIsImNyZWF0ZUVsZW1lbnQiLCJjaGFyc2V0Iiwic2V0QXR0cmlidXRlIiwib25TY3JpcHRDb21wbGV0ZSIsInByZXYiLCJkb25lRm5zIiwiaGVhZCIsImN1cnJlbnRDaGlsZE1vZHVsZSIsImN1cnJlbnRVcGRhdGVBcHBseUhhbmRsZXJzIiwicXVldWVkSW52YWxpZGF0ZWRNb2R1bGVzIiwiY3VycmVudE1vZHVsZURhdGEiLCJpbnN0YWxsZWRNb2R1bGVzIiwiY3VycmVudFBhcmVudHMiLCJyZWdpc3RlcmVkU3RhdHVzSGFuZGxlcnMiLCJjdXJyZW50U3RhdHVzIiwiYmxvY2tpbmdQcm9taXNlcyIsImJsb2NraW5nUHJvbWlzZXNXYWl0aW5nIiwic2V0U3RhdHVzIiwibmV3U3RhdHVzIiwicmVzdWx0cyIsInVuYmxvY2siLCJsaXN0IiwiaG90Q2hlY2siLCJhcHBseU9uVXBkYXRlIiwiaG1yTSIsInVwZGF0ZWRNb2R1bGVzIiwiaG1yQyIsInByb21pc2VzIiwiaW50ZXJuYWxBcHBseSIsImFwcGx5SW52YWxpZGF0ZWRNb2R1bGVzIiwiaG90QXBwbHkiLCJCb29sZWFuIiwiZGlzcG9zZVByb21pc2UiLCJhcHBseVByb21pc2UiLCJyZXBvcnRFcnJvciIsImVyciIsIm91dGRhdGVkTW9kdWxlcyIsIm1vZHVsZXMiLCJobXJJIiwiaG1yRCIsIl9tYWluIiwiYWN0aXZlIiwicGFyZW50cyIsImNoaWxkcmVuIiwiY3JlYXRlUHJvcGVydHlEZXNjcmlwdG9yIiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsInRyYWNrQmxvY2tpbmdQcm9taXNlIiwiY3JlYXRlUmVxdWlyZSIsIl9hY2NlcHRlZERlcGVuZGVuY2llcyIsIl9hY2NlcHRlZEVycm9ySGFuZGxlcnMiLCJfZGVjbGluZWREZXBlbmRlbmNpZXMiLCJfc2VsZkFjY2VwdGVkIiwiX3NlbGZEZWNsaW5lZCIsIl9zZWxmSW52YWxpZGF0ZWQiLCJfZGlzcG9zZUhhbmRsZXJzIiwiX3JlcXVpcmVTZWxmIiwiZGVwIiwiZXJyb3JIYW5kbGVyIiwiZGVjbGluZSIsImFkZERpc3Bvc2VIYW5kbGVyIiwicmVtb3ZlRGlzcG9zZUhhbmRsZXIiLCJpZHgiLCJpbnZhbGlkYXRlIiwiYWRkU3RhdHVzSGFuZGxlciIsInJlbW92ZVN0YXR1c0hhbmRsZXIiLCJzY3JpcHRVcmwiLCJpbXBvcnRTY3JpcHRzIiwib2xkVGFncyIsIm5ld1RhZ3MiLCJhcHBseUhhbmRsZXIiLCJvbGRUYWciLCJyZWwiLCJtaW5pQ3NzIiwiY2h1bmtJZHMiLCJyZW1vdmVkQ2h1bmtzIiwicmVtb3ZlZE1vZHVsZXMiLCJhcHBseUhhbmRsZXJzIiwidXBkYXRlZE1vZHVsZXNMaXN0IiwiZnVsbGhyZWYiLCJleGlzdGluZ0xpbmtUYWdzIiwiZGF0YUhyZWYiLCJ0YWciLCJleGlzdGluZ1N0eWxlVGFncyIsImZpbmRTdHlsZXNoZWV0IiwibGlua1RhZyIsImVycm9yVHlwZSIsInJlYWxIcmVmIiwiY3JlYXRlU3R5bGVzaGVldCIsImFzIiwiY3VycmVudFVwZGF0ZWRNb2R1bGVzTGlzdCIsImN1cnJlbnRVcGRhdGVDaHVua3MiLCJjdXJyZW50VXBkYXRlIiwiY3VycmVudFVwZGF0ZVJlbW92ZWRDaHVua3MiLCJjdXJyZW50VXBkYXRlUnVudGltZSIsImluc3RhbGxlZENodW5rcyIsImhtclNfanNvbnAiLCJ3YWl0aW5nVXBkYXRlUmVzb2x2ZXMiLCJsb2FkVXBkYXRlQ2h1bmsiLCJyZWFsU3JjIiwiZ2V0QWZmZWN0ZWRNb2R1bGVFZmZlY3RzIiwidXBkYXRlTW9kdWxlSWQiLCJvdXRkYXRlZERlcGVuZGVuY2llcyIsInF1ZXVlIiwiY2hhaW4iLCJxdWV1ZUl0ZW0iLCJwYXJlbnRJZCIsImFkZEFsbFRvU2V0IiwianNvbnBIbXIiLCJhcHBsaWVkVXBkYXRlIiwid2FyblVuZXhwZWN0ZWRSZXF1aXJlIiwibmV3TW9kdWxlRmFjdG9yeSIsImFib3J0RXJyb3IiLCJkb0FwcGx5IiwiZG9EaXNwb3NlIiwiY2hhaW5JbmZvIiwib25EZWNsaW5lZCIsImlnbm9yZURlY2xpbmVkIiwib25VbmFjY2VwdGVkIiwiaWdub3JlVW5hY2NlcHRlZCIsIm9uQWNjZXB0ZWQiLCJvbkRpc3Bvc2VkIiwibW9kdWxlT3V0ZGF0ZWREZXBlbmRlbmNpZXMiLCJvdXRkYXRlZFNlbGZBY2NlcHRlZE1vZHVsZXMiLCJvdXRkYXRlZE1vZHVsZUlkIiwiZGVwZW5kZW5jeSIsImRpc3Bvc2VIYW5kbGVycyIsImVycm9ySGFuZGxlcnMiLCJkZXBlbmRlbmNpZXNGb3JDYWxsYmFja3MiLCJhY2NlcHRDYWxsYmFjayIsImRlcGVuZGVuY3lJZCIsImVycjIiLCJvbkVycm9yZWQiLCJvcmlnaW5hbEVycm9yIiwiaWdub3JlRXJyb3JlZCIsIm1vcmVNb2R1bGVzIiwicnVudGltZSIsImpzb25wIiwib2siLCJqc29uIl0sInNvdXJjZVJvb3QiOiIifQ==